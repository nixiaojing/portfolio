// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
/*
 @esri/arcgis-html-sanitizer - v2.7.0 - Wed Jul 14 2021 13:34:33 GMT-0400 (Eastern Daylight Time)
 Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 Apache-2.0

 js-xss
 Copyright (c) 2012-2017 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 http://ucdok.com
 MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details

 Lodash/isPlainObject
 Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
**************************************************************************** @overview es6-promise - a tiny implementation of Promises/A+.
 @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 @license   Licensed under MIT license
            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 @version   v4.2.8+1e68dce6
*/
require({cache:{"esri/main":function(){define(["./kernel","dojo/i18n!./nls/jsapi","./config","./sniff"],function(D,A){D.bundle=A;return D})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(D,A,a){D=function(){return this}();var b=D.location,g=b.pathname;a=b.protocol;b={version:"3.38",_appBaseUrl:a+"//"+b.host+g.substring(0,g.lastIndexOf(g.split("/")[g.split("/").length-1]))};A.noGlobals||(D.esri=b);(b.dijit=b.dijit||{})._arcgisUrl=("http:"===a||"https:"===
a?a:"http:")+"//www.arcgis.com/sharing/rest";return b})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","./kernel"],function(D,A,a,b){a=function(){return this}();var g={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,
zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(d,e){A.publish("esri.Error",[d])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com",
"js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com","tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com",
"cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com","qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com",
"servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com","basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},
workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};b.config=g;D.noGlobals||(a.esriConfig=g);return g})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(D,A,a){var b=D("ff"),g=D("ie"),d=void 0===g&&7<=D("trident"),e=D("edge"),f=D("webkit"),n=D("opera"),h=D("chrome"),k=D("safari"),c=navigator.userAgent,l;(l=c.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&D.add("esri-iphone",parseFloat(l[2].replace("_",".")));(l=c.match(/Android\s+(\d+(\.\d+)*)/i))&&
D.add("esri-android",parseFloat(l[1]));(l=c.match(/Fennec\/(\d+\.\d+)/i))&&D.add("esri-fennec",parseFloat(l[1]));0<=c.indexOf("BlackBerry")&&0<=c.indexOf("WebKit")&&D.add("esri-blackberry",1);D.add("esri-touch",D("esri-iphone")||D("esri-android")||D("esri-blackberry")||6<=D("esri-fennec")||(b||f)&&(document.createTouch||"ontouchstart"in A||A.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(l=c.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&D.add("esri-mobile",!!l);D.add("esri-pointer",
!b&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!A.PointerEvent));a._getDOMAccessor=function(m){var q="";b?q="Moz":f?q="Webkit":g?q="ms":n&&(q="O");return q+m.charAt(0).toUpperCase()+m.substr(1)};D.add("esri-phonegap",!!A.cordova);D.add("esri-cors",D("esri-phonegap")||A.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);D.add("esri-file-upload",A.FormData&&A.FileList?!0:!1);D.add("esri-script-sandbox",function(){return"MessageChannel"in A&&"HTMLIFrameElement"in A&&"sandbox"in HTMLIFrameElement.prototype});
D.add("esri-secure-context",function(){if("isSecureContext"in A)return A.isSecureContext;if(A.location&&A.location.origin)return 0===A.location.origin.indexOf("https:")});D.add("esri-wasm","WebAssembly"in A);D.add("esri-workers",A.Worker?!0:!1);D.add("esri-featurelayer-webgl",!1);if(c=D("esri-featurelayer-webgl")){var r=D("esri-mobile");l=r?1:2;r=r?1:3;"object"===typeof c?(c.maxDrillLevel=null==c.maxDrillLevel?l:c.maxDrillLevel,c.maxRecordCountFactor=null==c.maxRecordCountFactor?r:c.maxRecordCountFactor,
c.enablePBFQuery=null==c.enablePBFQuery?!0:c.enablePBFQuery):D.add("esri-featurelayer-webgl",{maxDrillLevel:l,maxRecordCountFactor:r,enablePBFQuery:!0},null,!0)}D.add("esri-featurelayer-webgl-labeling",!1);D.add("esri-pbf",!g||10<=g);D.add("esri-featurelayer-pbf",!0);D.add("esri-transforms",d||e||9<=g||3.5<=b||4<=h||3.1<=k||10.5<=n||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transitions",d||e||10<=g||4<=b||4<=h||3.1<=k||10.5<=n||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transforms3d",
d||e||10<=b||12<=h||4<=k||3.2<=D("esri-iphone")||3<=D("esri-android"));D.add("esri-url-encodes-apostrophe",function(){if(!A.document)return!1;var m=A.document.createElement("a");m.href="?'";return-1<m.href.indexOf("?%27")});3>D("esri-android")&&(D.add("esri-transforms",!1,!1,!0),D.add("esri-transitions",!1,!1,!0),D.add("esri-transforms3d",!1,!1,!0));D.add("esri-will-change",D("esri-transforms")&&(52<=h||11.1<=k));a._css=function(m){var q=D("esri-transforms3d");void 0!==m&&null!==m?q=m:q&&(h||k&&!D("esri-iphone"))&&
(q=!1);var v=q?"translate3d(":"translate(",B=q?h?",-1px)":",0px)":")",w=q?"scale3d(":"scale(",z=q?",1)":")",x=q?"rotate3d(0,0,1,":"rotate(",y=q?"matrix3d(":"matrix(",u=q?",0,0,":",",t=q?",0,0,0,0,1,0,":",",C=q?",0,1)":")";return{names:{transition:f&&"-webkit-transition"||b&&"MozTransition"||n&&"OTransition"||g&&"msTransition"||"transition",transform:f&&"-webkit-transform"||b&&"MozTransform"||n&&"OTransform"||g&&"msTransform"||"transform",transformName:f&&"-webkit-transform"||b&&"-moz-transform"||
n&&"-o-transform"||g&&"-ms-transform"||"transform",origin:f&&"-webkit-transform-origin"||b&&"MozTransformOrigin"||n&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",endEvent:f&&"webkitTransitionEnd"||b&&"transitionend"||n&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(E,F){return v+E+"px,"+F+"px"+B},scale:function(E){return w+E+","+E+z},rotate:function(E){return x+E+"deg)"},matrix:function(E){return y+E.xx+","+E.xy+u+E.yx+","+E.yy+t+E.dx.toFixed(10)+(b&&
59>=b?"px,":",")+E.dy.toFixed(10)+(b&&59>=b?"px":"")+C},getScaleFromMatrix:function(E){if(!E)return 1;E=E.toLowerCase();var F=-1<E.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(E.substring(F.length,E.indexOf(",")))}}};a.isiPhone=D("esri-iphone");a.isAndroid=D("esri-android");a.isFennec=D("esri-fennec");a.isBlackBerry=D("esri-blackberry");a.isTouchEnabled=D("esri-touch");a.isPointerEnabled=D("esri-pointer");a._hasCors=D("esri-cors");a._hasFileUpload=D("esri-file-upload");a._hasTransforms=
D("esri-transforms");a._hasTransitions=D("esri-transitions");a._has3DTransforms=D("esri-transforms3d");return D})},"esri/utils":function(){define("./domUtils ./lang ./urlUtils ./request ./tileUtils ./graphicsUtils ./deferredUtils ./layerUtils ./geometry/normalizeUtils".split(" "),function(){return{}})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(D,A,a,b,g){var d={show:function(e){if(e=d.getNode(e))e.style.display="block"},
getNode:function(e){return e&&e.domNode||e},hide:function(e){if(e=d.getNode(e))e.style.display="none"},toggle:function(e){if(e=d.getNode(e))e.style.display="none"===e.style.display?"block":"none"},documentBox:8>=g("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(e){if(e=this.getNode(e)){var f=0,n=0,h=0,k=0,c=0,l=0;return[A.connect(e,"ontouchstart",function(r){f=r.touches[0].screenX;n=r.touches[0].screenY;
h=e.scrollWidth;k=e.scrollHeight;c=e.clientWidth;l=e.clientHeight}),A.connect(e,"ontouchmove",function(r){r.preventDefault();var m=e.firstChild;m instanceof Text&&(m=e.childNodes[1]);var q=m._currentX||0,v=m._currentY||0;q+=r.touches[0].screenX-f;0<q?q=0:0>q&&Math.abs(q)+c>h&&(q=-1*(h-c));m._currentX=q;v+=r.touches[0].screenY-n;0<v?v=0:0>v&&Math.abs(v)+l>k&&(v=-1*(k-l));m._currentY=v;b.set(m,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+q+"px, "+v+"px)"});f=r.touches[0].screenX;
n=r.touches[0].screenY})]}}};a.mixin(D,d);return d})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(D,A,a,b,g,d,e,f,n){function h(B,w,z,x){(w=w&&w[B])?w={formatType:w.formatType,options:w}:x&&-1!==D.indexOf(x.properties||"",B)?w={formatType:x.formatter||"DateString",options:null}:z&&-1!==D.indexOf(z.properties||"",B)&&(w={formatType:z.formatter||"NumberFormat",options:null});
return w}function k(B,w,z){return[b.isString(B)?B.split(""):B,w||a.global,b.isString(z)?new Function("item","index","array",z):z]}function c(B){return void 0!==B&&null!==B}function l(B){return c(B)?B:""}function r(B,w,z,x){var y=z.match(/([^\(]+)(\([^\)]+\))?/i);z=b.trim(y[1]);var u=y[2]?b.trim(y[2]):null;y=w[B];x=x||(u?A.fromJson(u.replace(/^\(/,"({").replace(/\)$/,"})")):{});u=x.utcOffset;if(-1===D.indexOf(q,z))z=b.getObject(z),b.isFunction(z)&&(y=z(y,B,w,x));else if("number"===typeof y||"string"===
typeof y&&y&&!isNaN(Number(y)))switch(y=Number(y),z){case "NumberFormat":return e.format(y,x);case "DateString":B=new Date(y);if(x.local||x.systemLocale)return x.systemLocale?B.toLocaleDateString()+(x.hideTime?"":" "+B.toLocaleTimeString()):B.toDateString()+(x.hideTime?"":" "+B.toTimeString());B=B.toUTCString();x.hideTime&&(B=B.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return B;case "DateFormat":return B=new Date(y),c(u)&&(B=g.add(B,"minute",B.getTimezoneOffset()-u)),f.format(B,x)}return l(y)}
function m(B,w){var z;if(w)for(z in B)B.hasOwnProperty(z)&&(void 0===B[z]?delete B[z]:B[z]instanceof Object&&m(B[z],!0));else for(z in B)B.hasOwnProperty(z)&&void 0===B[z]&&delete B[z];return B}var q=["NumberFormat","DateString","DateFormat"],v=/<\/?[^>]+>/g;d={valueOf:function(B,w){for(var z in B)if(B[z]==w)return z;return null},stripTags:function(B){if(B){var w=typeof B;if("string"===w)B=B.replace(v,"");else if("object"===w)for(var z in B)(w=B[z])&&"string"===typeof w&&(w=w.replace(v,"")),B[z]=
w}return B},substitute:function(B,w,z){if(c(z))if(b.isObject(z)){var x=z.first;var y=z.dateFormat;var u=z.numberFormat;var t=z.format}else x=z;if(w&&"${*}"!==w)return b.replace(w,b.hitch({obj:B},function(E,F){var G=F.split(":"),H;return 1<G.length?(F=G[0],G.shift(),(H=t&&t[G[0]])?G=H.formatType:(G=G.join(":"),H=null),r(F,this.obj,G,H)):(H=h(F,t,u,y))?r(F,this.obj,H.formatType,H.options):l(this.obj[F])}),/\$\{([^\}]+)\}/g);w=[];for(var C in B)if(z=(z=h(C,t,u,y))?r(C,B,z.formatType,z.options):B[C],
w.push(C+" \x3d "+l(z)+"\x3cbr/\x3e"),x)break;return w.join("")},filter:function(B,w,z){w=k(B,z,w);z={};var x;B=w[0];for(x in B)w[2].call(w[x],B[x],x,B)&&(z[x]=B[x]);return z},startsWith:function(B,w,z){z=z||0;return B.indexOf(w,z)===z},endsWith:function(B,w,z){if("number"!==typeof z||!isFinite(z)||Math.floor(z)!==z||z>B.length)z=B.length;z-=w.length;B=B.indexOf(w,z);return-1!==B&&B===z},isDefined:c,fixJson:m,isObject:function(B){return B&&"object"===typeof B},isString:function(B){return"string"===
typeof B},mixin:function(B,w){for(var z in w)w.hasOwnProperty(z)&&(B[z]=w[z]);return B},clone2DArray:function(B){if(B=B?B.slice(0):null){var w,z=B.length;for(w=0;w<z;w++)B[w]=B[w]?B[w].slice(0):null}return B},clone3DArray:function(B){if(B=B?B.slice(0):null){var w,z=B.length;for(w=0;w<z;w++){B[w]=B[w]?B[w].slice(0):null;var x=B[w];if(x){var y,u=x.length;for(y=0;y<u;y++)x[y]=x[y]?x[y].slice(0):null}}}return B}};b.mixin(n,d);n._isDefined=c;n._getParts=k;n._sanitize=m;return d})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(D,A,a,b,g,d,e,f,n,h){var k={},c=f.defaults.io,l=/^[a-z][a-z0-9\+\-\.]*:/i,r=/^\s*http:/i,m=/^\s*https:/i,q=/:\d+$/,v=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;k.isHTTP=function(w){var z=b.location.protocol;return null==w?"http:"===z||"https:"===z:w?"https:"===z:"http:"===z};k.getProtocolForWebResource=function(w){return k.isHTTP()?b.location.protocol:w?"https:":"http:"};k.urlToObject=function(w){var z={},x=new a(w),y=w.indexOf("?");null===x.query?z={path:w,query:null}:(z.path=w.substring(0,
y),z.query=g.queryToObject(x.query));x.fragment&&(z.hash=x.fragment,null===x.query&&(z.path=z.path.substring(0,z.path.length-(x.fragment.length+1))));return z};k.getProxyUrl=function(w,z){var x=D.isString(w)?0===D.trim(w).toLowerCase().indexOf("https:"):w,y=c.proxyUrl,u,t=h.io.proxyNotSet;D.isString(w)&&(u=k.getProxyRule(w))&&(y=u.proxyUrl);if(!y)throw Error(t);if(x&&!1!==z&&0!==b.location.href.toLowerCase().indexOf("https:")&&(x=y,0!==x.toLowerCase().indexOf("http")&&(x=k.getAbsoluteUrl(x)),x=x.replace(/^http:/i,
"https:"),k.canUseXhr(x))){y=x;var C=1}y=k.urlToObject(y);y._xo=C;return y};k.addProxy=function(w){var z=k.getProxyRule(w),x;z?x=k.urlToObject(z.proxyUrl):c.alwaysUseProxy&&(x=k.getProxyUrl());x&&(z=k.urlToObject(w),w=x.path+"?"+z.path,(x=g.objectToQuery(D.mixin(x.query||{},z.query)))&&(w+="?"+x));return w};k.addProxyRule=function(w){var z=w.urlPrefix=k.urlToObject(w.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),x=c.proxyRules,y,u=x.length,t=u;for(y=0;y<u;y++){var C=
x[y].urlPrefix;if(0===z.indexOf(C)){if(z.length===C)return-1;t=y;break}else 0===C.indexOf(z)&&(t=y+1)}x.splice(t,0,w);return t};k.getProxyRule=function(w){var z=c.proxyRules,x=z.length,y=k.urlToObject(w).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(w=0;w<x;w++)if(0===y.indexOf(z[w].urlPrefix)){var u=z[w];break}return u};k.hasSameOrigin=function(w,z,x){w=w.toLowerCase();z=z.toLowerCase();var y=b.location.href.toLowerCase();w=0===w.indexOf("http")?new a(w):y=new a(y);
z=0===z.indexOf("http")?new a(z):D.isString(y)?new a(y):y;return(x||w.scheme===z.scheme)&&w.host===z.host&&w.port===z.port};k.canUseXhr=function(w,z){var x=n("esri-phonegap")?!0:!1,y=k.hasSameOrigin,u=c.corsEnabledServers,t,C=-1;!x&&n("esri-cors")&&u&&u.length&&(x=A.some(u,function(E,F){var G=!E||"object"!==typeof E||E instanceof RegExp?E:E.host;if(G instanceof RegExp){if(G.test(w))return C=F,!0}else if(G&&(t=0!==G.trim().toLowerCase().indexOf("http"),y(w,t?"http://"+G:G)||t&&y(w,"https://"+G)))return C=
F,!0;return!1}));return z?C:x};k.getAbsoluteUrl=function(w){var z=k.getProtocolForWebResource();return D.isString(w)&&!l.test(w)?0===w.indexOf("//")?z+w:0===w.indexOf("/")?z+"//"+b.location.host+w:d._appBaseUrl+w:w};k.fixUrl=function(w){w=D.trim(w);w=k.getAbsoluteUrl(w);w=k.normalizeSlashes(w);w=w.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");w=k.downgradeToHTTP(w);return w=k.upgradeToHTTPS(w)};k.normalize=function(w){return k.fixUrl(w)};k.normalizeSlashes=function(w){if(/^https?:\/\//i.test(w)){var z=
w.indexOf("?");if(-1<z){var x=w.slice(0,z);var y=w.slice(z+1)}else x=w;w=x.replace(/\/{2,}/g,"/");w=w.replace("/","//");y&&(w+="?"+y)}return w};k.downgradeToHTTP=function(w){return k.isHTTP(!1)&&m.test(w)&&k.hasSameOrigin(b.location.href,w,!0)&&!k.canUseXhr(w)?w.replace(m,"http:"):w};k.upgradeToHTTPS=function(w){var z=c.httpsDomains,x=k.isHTTP(!1),y=k.isHTTP(!0);if(!r.test(w))return w;w=D.trim(w);var u=w.indexOf("/",7);u=-1===u?w:w.slice(0,u);u=u.toLowerCase().slice(7);if(q.test(u))if(e.endsWith(u,
":80"))u=u.slice(0,-3),w=w.replace(":80","");else return w;if(x&&u===b.location.host&&(!v.test(w)||!k.canUseXhr(w)))return w;x=!1;if(y&&u===b.location.host)x=!0;else if(z)for(var t=0;t<z.length;t++){var C=z[t];if(u===C||e.endsWith(u,"."+C)){x=!0;break}}x||!y||c.alwaysUseProxy||k.getProxyRule(w)||(x=!0);x&&(w=w.replace(r,"https:"));return w};f=h.widgets.popup;var B=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:f.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:f.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:f.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:f.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:f.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:f.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:f.NLS_openLinkInApp}];k.getURIInfo=function(w){var z;A.some(B,function(x){x.pattern.test(w)&&(z=x);return!!z});return z};k.isKnownURI=function(w){return!!k.getURIInfo(w)};D.mixin(d,k);d._getProxyUrl=k.getProxyUrl;d._getProxiedUrl=k.addProxy;d._hasSameOrigin=k.hasSameOrigin;d._canDoXOXHR=k.canUseXhr;d._getAbsoluteUrl=k.getAbsoluteUrl;d.fixUrl=k.fixUrl;return k})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B){function w(M){M=new d(M);return(M.host+(M.port?":"+M.port:"")).toLowerCase()}function z(M){return this._xhr?this._xhr.getResponseHeader(M):null}function x(M,N){var K=c.objectToQuery(M.content);K&&(M.url+=(-1===M.url.indexOf("?")?"?":"\x26")+K);if(2E3<M.url.length){if("data:"!==M.url.toLowerCase().slice(0,5))return K=new b,K.reject(g.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),K;if(3E6<M.url.length)return K=
new b,K.reject(g.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),K}var X=new Image;N.allowImageDataAccess&&(X.crossOrigin=M.withCredentials?"use-credentials":"anonymous");var da=!1,Y=new b(function(aa){da=!0;X.onload=X.onerror=X.onabort=null;X.src=""});K=function(aa){X.onload=X.onerror=X.onabort=null;da||Y.reject(Error("Unable to load the resource"))};X.onload=function(){X.onload=X.onerror=X.onabort=null;da||Y.resolve(this)};X.onerror=
K;X.onabort=K;X.alt="";X.src=M.url;return Y}function y(M,N,K,X){var da=!1,Y=!1,aa=!1;if(q.isDefined(N))if(g.isObject(N)){da=!!N.useProxy;Y=!!N.usePost;aa=!!N.returnProgress;var ca=N.crossOrigin}else da=!!N;M=g.mixin({},M);delete M._credential;M._ssl&&(M.url=M.url.replace(/^http:/i,"https:"));10>m("ie")&&!P.test(M.url)&&(M.url=encodeURI(M.url));var I=M.content,T=M.url,ba=K&&M.form,pa=L;ca=q.isDefined(ca)?ca:pa.useCors;M.load=function(Ma){if(Ma){if(Ma.error){var eb=g.mixin(Error(),Ma.error);eb.log=
!!a.isDebug}else"error"===Ma.status&&(eb=g.mixin(Error(),Ma),eb.log=!!a.isDebug);eb&&(M.failOk=!eb.log,q.isDefined(eb.httpCode)||(eb.httpCode=eb.code))}return eb||Ma};M.error=function(Ma,eb){eb&&eb.xhr&&eb.xhr.abort();Ma instanceof Error||(Ma=g.mixin(Error(),Ma));Ma.log=!!a.isDebug;M.failOk=!Ma.log;pa.errorHandler(Ma,eb);return Ma};M._token&&(M.content=M.content||{},M.content.token=M._token);var ya=0;if(I&&T){var Da=c.objectToQuery(I);ya=Da.length+T.length+1;m("esri-url-encodes-apostrophe")&&(ya=
Da.replace(/'/g,"%27").length+T.length+1)}M.timeout=q.isDefined(M.timeout)?M.timeout:pa.timeout;M.handleAs=M.handleAs||"json";try{var Ha=ca&&v.canUseXhr(M.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(M.url),ta=v.hasSameOrigin(M.url,window.location.href)||Ha,xa=Y||K||ya>pa.postLength?!0:!1,ra=ta||-1===M.handleAs.indexOf("json")||!M.callbackParamName||K?!1:!0,Aa=v.getProxyRule(M.url)||pa.alwaysUseProxy||da||!("image"===M.handleAs&&!N.allowImageDataAccess||ra&&!xa||ta)?!0:!1;K&&!m("esri-file-upload")&&
!Aa&&Ha&&(Aa=!0);if(Aa){var ua=v.getProxyUrl(T,ca);var Ja=ua.path;ua._xo&&(Ha=!0);!xa&&Ja.length+1+ya>pa.postLength&&(xa=!0);M.url=Ja+"?"+T;if(xa)M.content=g.mixin(ua.query||{},I);else{var ha=c.objectToQuery(g.mixin(ua.query||{},I));ha&&(M.url+="?"+ha);M.content=null}}if(!ra||xa||Aa){var ma=M.headers;!Ha||ma&&ma.hasOwnProperty("X-Requested-With")||(ma=M.headers=ma||{},ma["X-Requested-With"]=null);if(K){var R=M.callbackParamName||"callback.html",Ea=M.callbackElementName||"textarea",Ia,ea,Ya=ba.elements?
ba.elements.length:0;if(I=M.content)for(Ia in I.token&&-1<T.toLowerCase().indexOf("/sharing/servers/")&&(T+=(-1===T.indexOf("?")?"?":"\x26")+"token\x3d"+I.token,M.url=Aa?Ja+"?"+T:T,delete I.token),I){var Xa=I[Ia];if(q.isDefined(Xa)){var Ba=null;for(ea=0;ea<Ya;ea++){var U=ba.elements[ea];if(U.name===Ia){Ba=U;break}}Ba?Ba.value=Xa:X?ba.append(Ia,Xa):ba.appendChild(k.create("input",{type:"hidden",name:Ia,value:Xa}))}}if(m("esri-file-upload")){A.forEach(ba.elements,function(Ma){Ma.name===R&&ba.removeChild(Ma)});
var la=X?ba:new FormData(ba);if(11<=m("safari")&&"entries"in la&&"delete"in la){X=[];for(var na=la.entries(),V=na.next();!V.done;){var fa=V.value;fa[1]instanceof File&&""===fa[1].name&&X.push(fa[0]);V=na.next()}X.forEach(function(Ma){la["delete"](Ma)})}M.contentType=!1;M.postData=la;delete M.form}else{ba.enctype="multipart/form-data";9>m("ie")&&(ba.encoding="multipart/form-data");ba.method="post";A.some(ba.elements,function(Ma){return Ma.name===R})||ba.appendChild(k.create("input",{type:"hidden",
name:R,value:Ea}));if(-1!==T.toLowerCase().indexOf("addattachment")||-1!==T.toLowerCase().indexOf("updateattachment"))T+=(-1===T.indexOf("?")?"?":"\x26")+R+"\x3d"+Ea,M.url=Aa?Ja+"?"+T:T;delete M.content}}if(Ha&&!M.hasOwnProperty("withCredentials")&&"with-credentials"===L.useCors){T=Aa?Ja:T;var qa=v.canUseXhr(T,!0),va=-1<qa?L.corsEnabledServers[qa]:null;if(va&&va.hasOwnProperty("withCredentials"))va.withCredentials&&(M.withCredentials=!0);else if(l.id){var Fa=l.id.findServerInfo(T);Fa&&Fa.webTierAuth&&
(M.withCredentials=!0)}}M=H?H(M):M;if("image"===M.handleAs)return x(M,N);if(xa){if(K&&!m("esri-file-upload")){var Ca=new b(function(){La.cancel()});var La=h.post(M.url,M).then(function(Ma){Ca.resolve(Ma)}).otherwise(function(Ma){Ca.reject(Ma)});Ca.addCallback(function(Ma){return M.load(Ma)});Ca.addErrback(function(Ma){return M.error(Ma)});return Ca}!Aa&&m("safari")&&(M.url+=(-1===M.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+S++);if(aa){M.uploadProgress=!0;M.data=M.postData;M.query=
M.content;Ca=new b(function(){Wa.cancel()});var Wa=f.post(M.url,M).then(function(Ma){Ca.resolve(Ma)},function(Ma){Ca.reject(Ma)},function(Ma){Ca.progress({transferType:Ma.transferType,loaded:Ma.loaded,total:Ma.total})});Ca.addCallback(function(Ma){return M.load(Ma)});Ca.addErrback(function(Ma){return M.error(Ma)});return Ca}return e.post(M)}return e.get(M)}M=H?H(M):M;M.jsonp=M.callbackParamName;M.query=M.content;Ca=new b(function(){Va.cancel()});var Va=n.get(M.url,M).then(function(Ma){Ca.resolve(Ma)}).otherwise(function(Ma){Ca.reject(Ma)});
Ca.addCallback(function(Ma){return M.load(Ma)});Ca.addErrback(function(Ma){return M.error(Ma)});return Ca}catch(Ma){return Ca=new b,Ca.errback(M.error(Ma)),Ca}}function u(M){var N=L.corsStatus,K=v.canUseXhr(M,!0);-1<K&&L.corsEnabledServers.splice(K,1);var X=new b;X.reject({log:!!a.isDebug});N[w(M)]=X.promise;return K}function t(M){var N=L.corsStatus;try{var K=w(M);if(L.corsDetection&&L.useCors&&m("esri-cors")&&M&&-1!==M.toLowerCase().indexOf("/rest/services")&&!v.hasSameOrigin(M,window.location.href)&&
!v.canUseXhr(M)){if(N[K]&&!N[K].isCanceled())return N[K];var X=new b(B._dfdCanceller);N[K]=X.promise;var da=e.get({url:M.substring(0,M.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*L.corsDetectionTimeout});X._pendingDfd=da;da.then(function(Y){Y?(v.canUseXhr(M)||L.corsEnabledServers.push(K),X.resolve()):X.reject()},function(Y){X.reject(Y)});return X.promise}}catch(Y){}return Q}function C(M){H=M}function E(M,N,K,
X){function da(ta){ta._pendingDfd=y(K,X,pa,ba);if(!ta._pendingDfd){ta.ioArgs=ta._pendingDfd&&ta._pendingDfd.ioArgs;var xa=Error("Deferred object is missing");xa.log=!!a.isDebug;ta.errback(xa);ta._pendingDfd=null;return ta}ta._pendingDfd.addCallback(function(ra){if(!ra)return ra;var Aa=ta._pendingDfd&&ta._pendingDfd.ioArgs&&ta._pendingDfd.ioArgs.xhr;if(!Aa)return ra;if(Aa=Aa.getResponseHeader("Content-Type"))if(Aa=Aa.toLowerCase(),-1===Aa.indexOf("text/plain")&&-1===Aa.indexOf("application/json"))return ra;
if(ra instanceof ArrayBuffer&&750>=ra.byteLength)Aa=new Blob([ra]);else if(ra instanceof Blob&&750>=ra.size)Aa=ra;else return ra;var ua=new b,Ja=new FileReader;Ja.readAsText(Aa);Ja.onloadend=function(){if(!Ja.error)try{var ha=JSON.parse(Ja.result);if(ha.error)var ma=ha.error}catch(R){}ma?(ma=g.mixin(Error(),ma),ma.log=!!a.isDebug,null==ma.httpCode&&(ma.httpCode=ma.code),ua.reject(ma)):ua.resolve(ra)};return ua.promise}).addCallback(function(ra){ta.ioArgs=ta._pendingDfd&&ta._pendingDfd.ioArgs;X.returnFullResponse&&
(ra={data:ra,_xhr:ta.ioArgs&&ta.ioArgs.xhr,getHeader:z});ta.callback(ra);ta._pendingDfd=null}).addErrback(function(ra){if(ra){var Aa=ra.code;var ua=ra.subcode;var Ja=(Ja=ra.messageCode)&&Ja.toUpperCase()}if(ra&&403==Aa&&(4==ua||ra.message&&-1<ra.message.toLowerCase().indexOf("ssl")&&-1===ra.message.toLowerCase().indexOf("permission"))){if(!K._ssl){K._ssl=K._sslFromServer=!0;E(ta,!0,K,X);return}}else if(ra&&415==ra.status){if(u(K.url),!K._err415){K._err415=1;E(ta,!0,K,X);return}}else if(l.id&&-1!==
A.indexOf(l.id._errorCodes,Aa)&&!l.id._isPublic(K.url)&&!aa&&(403!=Aa||-1===A.indexOf(J,Ja)&&(!q.isDefined(ua)||2==ua&&K._token))){ta._pendingDfd=l.id.getCredential(K.url,{token:K._token,error:ra});ta._pendingDfd.addCallback(function(ha){K._token=ha.token;K._credential=ha;K._ssl=K._sslFromServer||ha.ssl;E(ta,!0,K,X)}).addErrback(function(ha){ta.errback(ha);ta._pendingDfd=null});return}ta.ioArgs=ta._pendingDfd&&ta._pendingDfd.ioArgs;ta.isFulfilled()||ta.errback(ra);ta._pendingDfd=null}).then(null,
null,function(ra){ta.progress(ra)})}var Y=K.form,aa=X.disableIdentityLookup,ca=X._preLookup,I=!1;if(m("esri-workers")&&!1!==L.useWorkers)if(!0===X.useWorkers||!0===L.useWorkers)I=!0;else if(X.workerOptions){var T=X.workerOptions;if(T.callback||T.worker&&T.worker.worker instanceof Worker)I=!0}var ba=Y&&m("esri-file-upload")&&Y instanceof FormData,pa=Y&&(Y.elements?A.some(Y.elements,function(ta){return"file"===ta.type}):ba),ya=-1!==K.url.toLowerCase().indexOf("token\x3d")||K.content&&K.content.token||
pa&&A.some(Y.elements,function(ta){return"token"===ta.name})?1:0;if(!N){M.addCallback(function(ta){if((/\/sharing\/rest\/accounts\/self/i.test(K.url)||/\/sharing\/rest\/portals\/self/i.test(K.url))&&!ya&&!K._token&&ta&&ta.user&&ta.user.username){L.webTierAuthServers.push(w(K.url));ta=L.corsEnabledServers;var xa=v.canUseXhr(K.url,!0),ra={host:w(K.url),withCredentials:!0};if(-1===xa)ta.push(ra);else{var Aa=ta[xa];Aa instanceof RegExp?(ra.host=Aa,ta.splice(xa,1,ra)):"object"===typeof Aa?Aa.withCredentials=
!0:ta.splice(xa,1,ra)}}if(ta=K._credential)if(xa=(xa=l.id.findServerInfo(ta.server))&&xa.owningSystemUrl)xa=xa.replace(/\/?$/,"/sharing"),(ta=l.id.findCredential(xa,ta.userId))&&-1===l.id._getIdenticalSvcIdx(xa,ta)&&ta.resources.splice(0,0,xa)});M.addBoth(function(ta){delete K._credential;!ta||m("ie")&&ta.nodeType||(ta._ssl=K._ssl)});var Da=K.load,Ha=K.error;Da&&M.addCallback(function(ta){var xa=M._pendingDfd;xa=xa&&xa.ioArgs;return Da.call(xa&&xa.args,ta,xa)});Ha&&M.addErrback(function(ta){var xa=
M._pendingDfd;xa=xa&&xa.ioArgs;return Ha.call(xa&&xa.args,ta,xa)})}!l.id||ya||K._token||l.id._isPublic(K.url)||aa&&!ca||!(N=l.id.findCredential(K.url))||(K._token=N.token,K._ssl=N.ssl);I?X.workerOptions&&X.workerOptions.worker?(G||(G=e),e=X.workerOptions.worker,da(M)):D(["./workers/RequestClient"],function(ta){G||(G=e);if(X.workerOptions){var xa=X.workerOptions;e=ta.getClient(xa.callback,xa.cbFunction)}else e=ta.getClient();da(M)}):(G&&(e=G,G=null),da(M));return M}function F(M,N){M.url=v.fixUrl(M.url);
N=N||{};var K=new b(B._dfdCanceller),X=t(M.url);K._pendingDfd=X;X.always(function(da){da&&"cancel"===da.dojoType?K.reject(da):E(K,!1,M,N)});return K}var G=null,H,L=r.defaults.io,J=["COM_0056","COM_0057","SB_0008"],S=0,P=/%[0-9A-F]{2}/i,Q=function(){var M=new b;M.resolve();return M.promise}();F._makeRequest=y;F._processRequest=E;F._disableCors=u;F._detectCors=t;F.setRequestPreCallback=C;l.request=F;l._makeRequest=y;l._processRequest=E;l._disableCors=u;l._detectCors=t;l.setRequestPreCallback=C;return F})},
"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(D,A,a,b,g,d){function e(){var v=document.createElement("iframe");v.name="esri_core_jsonp_iframe";v.style.display="none";v.setAttribute("sandbox","allow-scripts");if(!d("ff")&&"srcdoc"in v){var B=D.toUrl("dojo/dojo.js"),w=g.replace("../../../dojo/dojo.js",B);B=B.slice(0,-7);w=w.replace("../../../dojo/",B);v.srcdoc=w}else w=D.toUrl("./iframe.html"),"http:"===
window.location.protocol&&0===w.indexOf("https:")&&(w=w.replace("https:","http:")),v.src=w;document.body.appendChild(v);return v}function f(){var v=new MessageChannel;v.port1.addEventListener("message",n);v.port1.start();return v}function n(v){var B=v.data;if("ready"===B){B=0;for(var w=m;B<w.length;B++)v=w[B],k(v,l);m=null}else if(v=q[B.id])delete q[B.id],B.isError?v.dfd.reject(Error(B.message)):v.dfd.resolve(B.response)}function h(v,B){v.addEventListener("load",function(){v.contentWindow.postMessage("init",
"*",[B.port2])})}function k(v,B){q[v.message.id]=v;B.port1.postMessage(v.message)}Object.defineProperty(A,"__esModule",{value:!0});var c,l,r=0,m=[],q={};A.get=function(v,B){if(!d("esri-script-sandbox"))return b.get(v,B);var w=null;B&&(w={jsonp:B.jsonp,preventCache:B.preventCache,query:B.query,timeout:B.timeout});var z=new a(function(){if(m){var y=m.indexOf(x);-1<y&&m.splice(y,1)}else x.message.id in q&&delete q[x.message.id]}),x={dfd:z,message:{id:"id"+(++r+Math.random()),url:v,options:w}};c||(c=
e(),l=f(),h(c,l));m?m.push(x):k(x,l);return z.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(D,A,a,b,g,d,e,f,n,h,k){function c(t,C){t.canDelete&&v._remove(t.id,C.options.frameDoc,!0)}function l(t){u&&u.length&&(g.forEach(u,function(C){v._remove(C.id,C.frameDoc);C.frameDoc=null}),u=[]);return t.options.jsonp?!t.data:!0}function r(t){return!!this.scriptLoaded}
function m(t){return(t=t.options.checkString)&&eval("typeof("+t+') !\x3d\x3d "undefined"')}function q(t,C){if(this.canDelete){var E=this.response.options;u.push({id:this.id,frameDoc:E.ioArgs?E.ioArgs.frameDoc:E.frameDoc});E.ioArgs&&(E.ioArgs.frameDoc=null);E.frameDoc=null}C?this.reject(C):this.resolve(t)}function v(t,C,E){var F=a.parseArgs(t,a.deepCopy({},C));t=F.url;C=F.options;var G=a.deferred(F,c,l,C.jsonp?null:C.checkString?m:r,q);d.mixin(G,{id:B+w++,canDelete:!1});C.jsonp&&((new RegExp("[?\x26]"+
C.jsonp+"\x3d")).test(t)||(t+=(~t.indexOf("?")?"\x26":"?")+C.jsonp+"\x3d"+(C.frameDoc?"parent.":"")+B+"_callbacks."+G.id),G.canDelete=!0,y[G.id]=function(J){F.data=J;G.handleResponse(F)});a.notify&&a.notify.emit("send",F,G.promise.cancel);if(!C.canAttach||C.canAttach(G)){var H=v._attach(G.id,t,C.frameDoc,function(J){if(!(J instanceof Error)){var S=Error("Error loading "+(J.target?J.target.src:"script"));S.source=J;J=S}G.reject(J);v._remove(G.id,C.frameDoc,!0)});if(!C.jsonp&&!C.checkString)var L=e(H,
z,function(J){if("load"===J.type||x.test(H.readyState))L.remove(),G.scriptLoaded=J})}A(G);return E?G:G.promise}h.add("script-readystatechange",function(t,C){return"undefined"!==typeof C.createElement("script").onreadystatechange&&("undefined"===typeof t.opera||"[object Opera]"!==t.opera.toString())});var B=D.id.replace(/[\/\.\-]/g,"_"),w=0,z=h("script-readystatechange")?"readystatechange":"load",x=/complete|loaded/,y=b.global[B+"_callbacks"]={},u=[];v.get=v;v._attach=function(t,C,E,F){E=E||k.doc;
var G=E.createElement("script");if(F)e.once(G,"error",F);G.type="text/javascript";try{G.src=C}catch(H){F&&F(G)}G.id=t;G.async=!0;G.charset="utf-8";return E.getElementsByTagName("head")[0].appendChild(G)};v._remove=function(t,C,E){n.destroy(f.byId(t,C));y[t]&&(E?y[t]=function(){delete y[t]}:delete y[t])};v._callbacksProperty=B+"_callbacks";return v})},"esri/core/sniff":function(){define(["../sniff"],function(D){return D})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c){function l(x){return!this.isFulfilled()}function r(x){return!!this._finished}function m(x,y){if(!y)try{var u=x.options,t=v.doc(v._frame),C=u.handleAs;if("html"!==C){if("xml"===C)if("html"===t.documentElement.tagName.toLowerCase()){f("a",t.documentElement).orphan();var E=t.documentElement.innerText||t.documentElement.textContent;E=E.replace(/>\s+</g,"\x3e\x3c");x.text=d.trim(E)}else x.data=t;else x.text=t.getElementsByTagName("textarea")[0].value;g(x)}else x.data=
t}catch(F){y=F}y?this.reject(y):this._finished?this.resolve(x):this.reject(Error("Invalid dojo/request/iframe request state"))}function q(x){this._callNext()}function v(x,y,u){var t=b.parseArgs(x,b.deepCreate(z,y),!0);x=t.url;y=t.options;if("GET"!==y.method&&"POST"!==y.method)throw Error(y.method+" not supported by dojo/request/iframe");v._frame||(v._frame=v.create(v._iframeName,w+"();"));x=b.deferred(t,null,l,r,m,q);x._callNext=function(){this._calledNext||(this._calledNext=!0,v._currentDfd=null,
v._fireNextRequest())};x._legacy=u;v._dfdQueue.push(x);v._fireNextRequest();a(x);return u?x:x.promise}var B=D.id.replace(/[\/\.\-]/g,"_"),w=B+"_onload";c.global[w]||(c.global[w]=function(){var x=v._currentDfd;if(x){var y=h.byId(x.response.options.form)||x._tmpForm;if(y){for(var u=x._contentToClean,t=0;t<u.length;t++)for(var C=u[t],E=0;E<y.childNodes.length;E++){var F=y.childNodes[E];if(F.name===C){k.destroy(F);break}}x._originalAction&&y.setAttribute("action",x._originalAction);x._originalMethod&&
(y.setAttribute("method",x._originalMethod),y.method=x._originalMethod);x._originalTarget&&(y.setAttribute("target",x._originalTarget),y.target=x._originalTarget)}x._tmpForm&&(k.destroy(x._tmpForm),delete x._tmpForm);x._finished=!0}else v._fireNextRequest()});var z={method:"POST"};v.create=function(x,y,u){if(c.global[x])return c.global[x];if(c.global.frames[x])return c.global.frames[x];u||(n("config-useXDomain")&&n("config-dojoBlankHtmlUrl"),u=n("config-dojoBlankHtmlUrl")||A.toUrl("dojo/resources/blank.html"));
y=k.place('\x3ciframe id\x3d"'+x+'" name\x3d"'+x+'" src\x3d"'+u+'" onload\x3d"'+y+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',c.body());return c.global[x]=y};v.doc=function(x){if(x.contentDocument)return x.contentDocument;var y=x.name;if(y){var u=c.doc.getElementsByTagName("iframe");if(x.document&&u[y].contentWindow&&u[y].contentWindow.document)return u[y].contentWindow.document;if(c.doc.frames[y]&&c.doc.frames[y].document)return c.doc.frames[y].document}return null};
v.setSrc=function(x,y,u){x=c.global.frames[x.name];x.contentWindow&&(x=x.contentWindow);try{u?x.location.replace(y):x.location=y}catch(t){}};v._iframeName=B+"_IoIframe";v._notifyStart=function(){};v._dfdQueue=[];v._currentDfd=null;v._fireNextRequest=function(){try{if(!v._currentDfd&&v._dfdQueue.length){do var x=v._currentDfd=v._dfdQueue.shift();while(x&&(x.canceled||x.isCanceled&&x.isCanceled())&&v._dfdQueue.length);if(!x||x.canceled||x.isCanceled&&x.isCanceled())v._currentDfd=null;else{var y=x.response,
u=y.options,t=x._contentToClean=[],C=h.byId(u.form),E=b.notify,F=u.data||null;if(!x._legacy&&"POST"===u.method&&!C)C=x._tmpForm=k.create("form",{name:B+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},c.body());else if("GET"===u.method&&C&&-1<y.url.indexOf("?")){var G=y.url.slice(y.url.indexOf("?")+1);F=d.mixin(e.queryToObject(G),F)}if(C){if(!x._legacy){var H=C;do H=H.parentNode;while(H&&H!==c.doc.documentElement);H||(C.style.position="absolute",C.style.left="-1000px",C.style.top=
"-1000px",c.body().appendChild(C));C.name||(C.name=B+"_form")}if(F){H=function(N,K){k.create("input",{type:"hidden",name:N,value:K},C);t.push(N)};for(var L in F){var J=F[L];if(d.isArray(J)&&1<J.length)for(G=0;G<J.length;G++)H(L,J[G]);else{var S=f("input[name\x3d'"+L+"']",C);-1==S.indexOf()?H(L,J):S.val(J)}}}var P=C.getAttributeNode("action"),Q=C.getAttributeNode("method"),M=C.getAttributeNode("target");y.url&&(x._originalAction=P?P.value:null,P?P.value=y.url:C.setAttribute("action",y.url));x._legacy?
Q&&Q.value||(Q?Q.value=u.method:C.setAttribute("method",u.method)):(x._originalMethod=Q?Q.value:null,Q?Q.value=u.method:C.setAttribute("method",u.method));x._originalTarget=M?M.value:null;M?M.value=v._iframeName:C.setAttribute("target",v._iframeName);C.target=v._iframeName;E&&E.emit("send",y,x.promise.cancel);v._notifyStart(y);C.submit()}else u="",y.options.data&&(u=y.options.data,"string"!==typeof u&&(u=e.objectToQuery(u))),H=y.url+(-1<y.url.indexOf("?")?"\x26":"?")+u,E&&E.emit("send",y,x.promise.cancel),
v._notifyStart(y),v.setSrc(v._frame,H,!0)}}}catch(N){x.reject(N)}};b.addCommonMethods(v,["GET","POST"]);return v})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(D,A,a,b,g){function d(n){for(;n.childNodes[0]&&1==n.childNodes[0].nodeType;)n=n.childNodes[0];return n}function e(n,h){"string"==typeof n?(n=b.toDom(n,h&&h.ownerDocument),11==n.nodeType&&(n=n.childNodes[0])):1==n.nodeType&&n.parentNode&&(n=n.cloneNode(!1));
return n}var f=D.NodeList;A.extend(f,{_placeMultiple:function(n,h){for(var k="string"==typeof n||n.nodeType?D(n):n,c=[],l=0;l<k.length;l++)for(var r=k[l],m=this.length,q=m-1,v;v=this[q];q--)0<l&&(v=this._cloneNode(v),c.unshift(v)),q==m-1?b.place(v,r,h):r.parentNode.insertBefore(v,r),r=v;c.length&&(c.unshift(0),c.unshift(this.length-1),Array.prototype.splice.apply(this,c));return this},innerHTML:function(n){return arguments.length?this.addContent(n,"only"):this[0].innerHTML},text:function(n){if(arguments.length){for(var h=
0,k;k=this[h];h++)1==k.nodeType&&g.set(k,"textContent",n);return this}var c="";for(h=0;k=this[h];h++)c+=g.get(k,"textContent");return c},val:function(n){if(arguments.length){for(var h=A.isArray(n),k=0,c;c=this[k];k++){var l=c.nodeName.toUpperCase(),r=c.type,m=h?n[k]:n;if("SELECT"==l)for(l=c.options,r=0;r<l.length;r++){var q=l[r];q.selected=c.multiple?-1!=a.indexOf(n,q.value):q.value==m}else"checkbox"==r||"radio"==r?c.checked=c.value==m:c.value=m}return this}if((c=this[0])&&1==c.nodeType){n=c.value||
"";if("SELECT"==c.nodeName.toUpperCase()&&c.multiple){n=[];l=c.options;for(r=0;r<l.length;r++)q=l[r],q.selected&&n.push(q.value);n.length||(n=null)}return n}},append:function(n){return this.addContent(n,"last")},appendTo:function(n){return this._placeMultiple(n,"last")},prepend:function(n){return this.addContent(n,"first")},prependTo:function(n){return this._placeMultiple(n,"first")},after:function(n){return this.addContent(n,"after")},insertAfter:function(n){return this._placeMultiple(n,"after")},
before:function(n){return this.addContent(n,"before")},insertBefore:function(n){return this._placeMultiple(n,"before")},remove:f.prototype.orphan,wrap:function(n){if(this[0]){n=e(n,this[0]);for(var h=0,k;k=this[h];h++){var c=this._cloneNode(n);k.parentNode&&k.parentNode.replaceChild(c,k);d(c).appendChild(k)}}return this},wrapAll:function(n){if(this[0]){n=e(n,this[0]);this[0].parentNode.replaceChild(n,this[0]);n=d(n);for(var h=0,k;k=this[h];h++)n.appendChild(k)}return this},wrapInner:function(n){if(this[0]){n=
e(n,this[0]);for(var h=0;h<this.length;h++){var k=this._cloneNode(n);this._wrap(A._toArray(this[h].childNodes),null,this._NodeListCtor).wrapAll(k)}}return this},replaceWith:function(n){n=this._normalize(n,this[0]);for(var h=0,k;k=this[h];h++)this._place(n,k,"before",0<h),k.parentNode.removeChild(k);return this},replaceAll:function(n){n=D(n);for(var h=this._normalize(this,this[0]),k=0,c;c=n[k];k++)this._place(h,c,"before",0<k),c.parentNode.removeChild(c);return this},clone:function(){for(var n=[],
h=0;h<this.length;h++)n.push(this._cloneNode(this[h]));return this._wrap(n,this,this._NodeListCtor)}});f.prototype.html||(f.prototype.html=f.prototype.innerHTML);return f})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,A,a){A={_dfdCanceller:function(b){b.canceled=!0;var g=b._pendingDfd;if(!b.isFulfilled()&&g&&!g.isFulfilled()){g.cancel();var d=g.results&&g.results[1]}b._pendingDfd=null;return d},_fixDfd:function(b){var g=b.then;b.then=function(d,e,f){if(d){var n=
d;d=function(h){return h&&h._argsArray?n.apply(null,h):n(h)}}return g.call(this,d,e,f)};return b},_resDfd:function(b,g,d){var e=g.length;1===e?d?b.errback(g[0]):b.callback(g[0]):1<e?(g._argsArray=!0,b.callback(g)):b.callback()}};D.mixin(a,A);return A})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","./kernel","./geometry/Point","./geometry/Extent"],function(D,A,a,b,g){A={_addFrameInfo:function(d,e){var f,n,h=2*e.origin[1],k=e.origin[0],c=d.origin.x,l=d.width,r;D.forEach(d.lods,
function(m){f=Math.round(h/m.resolution);n=Math.ceil(f/l);r=Math.floor((k-c)/(l*m.resolution));m._frameInfo||(m._frameInfo=[n,r,r+n-1,f])})},getContainingTileCoords:function(d,e,f){var n=d.origin;f=f.resolution;return{row:Math.floor((n.y-e.y)/(d.height*f)),col:Math.floor((e.x-n.x)/(d.width*f))}},getCandidateTileInfo:function(d,e,f){var n=d.width;var h=d.height,k=f.xmax-f.xmin,c=f.ymax-f.ymin,l=d.__tileInfo===e,r=l?d.getMinZoom():-1;l=l?d.getMaxZoom():-1;var m=-1,q=e.lods,v=Math.abs,B;l=-1<l?l:q.length-
1;for(r=-1<r?r:0;r<=l;r++)if(B=q[r]){var w=k>c?v(c-h*B.resolution):v(k-n*B.resolution);if(0>m||w<=m){var z=B;m=w}else break}n=z;z=n.resolution;h=(f.xmin+f.xmax)/2;k=(f.ymin+f.ymax)/2;c=d.width/2*z;z*=d.height/2;h=new g(h-c,k-z,h+c,k+z,f.spatialReference);f=new b(h.xmin,h.ymax,f.spatialReference);l=n.resolution;c=e.width;k=e.height;e=e.origin;d=d.__visibleDelta;z=Math.floor;q=c*l;v=k*l;l=z((e.y-f.y)/v);m=z((f.x-e.x)/q);r=e.y-l*v;e=z(Math.abs((f.x-(e.x+m*q))*c/q))+d.x;d=z(Math.abs((f.y-r)*k/v))+d.y;
return{tile:{point:f,coords:{row:l,col:m},offsets:{x:e,y:d}},lod:n,extent:h}},getTileExtent:function(d,e,f,n){var h=d.origin;e=d.lods[e].resolution;var k=d.width,c=d.height;return new g(n*e*k+h.x,h.y-(f+1)*e*c,(n+1)*e*k+h.x,h.y-f*e*c,d.spatialReference)}};return a.TileUtils=A})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(D,A,a,b,g,d,e,f){function n(r,m){89.99999<m?m=89.99999:
-89.99999>m&&(m=-89.99999);var q=.017453292519943*m;return[111319.49079327169*r,3189068.5*Math.log((1+Math.sin(q))/(1-Math.sin(q)))]}function h(r,m,q){r=r/6378137*57.29577951308232;return q?[r,57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*m/6378137)))]:[r-360*Math.floor((r+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*m/6378137)))]}function k(){}function c(){}function l(r){var m=r._json;r._unquantizeFn?(m=r._unquantizeFn({x:m.x,y:m.y}),r._xVal=m.x,r._yVal=
m.y,r._unquantizeFn=null):(r._xVal=m.x,r._yVal=m.y);r._json=null}a={type:"point",x:0,y:0};D=D(e,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(r,m,q){A.isArray(r)?(this.x=r[0],this.y=r[1],this.spatialReference=m):g.isObject(r)?(g.mixin(this,r),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=f.createSpatialReference(this.spatialReference))):(this.x=r,this.y=m,this.spatialReference=
q);this.verifySR()},offset:function(r,m){return new this.constructor(this.x+r,this.y+m,this.spatialReference)},setX:function(r){this.x=r;this.clearCache();return this},setY:function(r){this.y=r;this.clearCache();return this},setLongitude:function(r){var m=this.spatialReference;m&&(m._isWebMercator()?this.setX(n(r,this.y)[0]):4326===m.wkid&&this.setX(r));return this},setLatitude:function(r){var m=this.spatialReference;m&&(m._isWebMercator()?this.setY(n(this.x,r)[1]):4326===m.wkid&&this.setY(r));return this},
getLongitude:function(){var r=this.spatialReference;if(r)if(r._isWebMercator())var m=h(this.x,this.y)[0];else 4326===r.wkid&&(m=this.x);return m},getLatitude:function(){var r=this.spatialReference;if(r)if(r._isWebMercator())var m=h(this.x,this.y)[1];else 4326===r.wkid&&(m=this.y);return m},update:function(r,m){this.x=r;this.y=m;this.clearCache();return this},normalize:function(){var r=this.x,m=this.spatialReference;if(m){var q=m._getInfo();q&&(r=this._normalizeX(r,q))}return new this.constructor(r,
this.y,m)},_normalizeX:function(r,m){var q=m.valid[0],v=m.valid[1],B=2*v;r>v?(q=Math.ceil(Math.abs(r-v)/B),r-=q*B):r<q&&(q=Math.ceil(Math.abs(r-q)/B),r+=q*B);return r},toJson:function(){var r={x:this.x,y:this.y},m=this.spatialReference;m&&(r.spatialReference=m.toJson());return r}});k.prototype=D.prototype;c.prototype=new k;Object.defineProperty(c.prototype,"x",{get:function(){this._json&&l(this);return this._xVal},set:function(r){this._xVal=r}});Object.defineProperty(c.prototype,"y",{get:function(){this._json&&
l(this);return this._yVal},set:function(r){this._yVal=r}});c.prototype.setupLazyUnquantization=function(r,m){this._unquantizeFn=r;this._json=m};D.simpleConstructor=k;D.accessorConstructor=c;D.lngLatToXY=n;D.xyToLngLat=h;D.defaultProps=a;D.metersPerDegree=6378137*Math.PI/180;A.setObject("geometry.Point",D,b);b.geometry.defaultPoint=a;return D})},"esri/SpatialReference":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/has","./kernel","./lang"],function(D,A,a,b,g){function d(){}a=[-2.0037508342788905E7,
2.0037508342788905E7];var e=[-2.0037508342787E7,2.0037508342787E7];D=D(null,{declaredClass:"esri.SpatialReference",constructor:function(f){f&&(g.isObject(f)?g.mixin(this,f):g.isString(f)?this.wkt=f:this.wkid=f)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:e,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:e,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:e,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:e,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==A.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==A.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(f){var n=!1;f&&(n=this.isWebMercator()&&4326===f.wkid||f.isWebMercator()&&4326===this.wkid);return n},isWebMercator:function(){return this._isWebMercator()},equals:function(f){var n=!1;f&&(this===f&&
(n=!0),this.wkid||f.wkid?n=this.wkid===f.wkid||this.isWebMercator()&&f.isWebMercator()||this.wkid===f.latestWkid||f.wkid===this.latestWkid:this.wkt&&f.wkt&&(n=this.wkt.toUpperCase()===f.wkt.toUpperCase()));return n},toJson:function(){var f=null;null!=this.wkid?f={wkid:this.wkid}:null!=this.wkt&&(f={wkt:this.wkt});f&&null!=this.latestWkid&&(f.latestWkid=this.latestWkid);return f}});d.prototype=D.prototype;D.simpleConstructor=d;return b.SpatialReference=D})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(d){this.spatialReference=d;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new g(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(d){return this.cache&&this.cache[d]},setCacheValue:function(d,e){this.cache||
(this.cache={});this.cache[d]=e}});A.setObject("geometry.Geometry",D,b);return D})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(D,A,a,b,g){function d(e){var f=!1;e&&(e.ics||e.icsid)&&(f=!0);return f}b={isICS:d,createSpatialReference:function(e){var f=null;e&&(f=d(e)?new A(e):new D(e));return f}};g.mixin(a,b);return b})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(D,A,a,b,g,d){D=D(d,{declaredClass:"esri.ImageSpatialReference",constructor:function(e){e&&A.isObject(e)&&A.mixin(this,e)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(e){var f=!1;if(e)if(this.icsid&&e.icsid){if(f=this.icsid===e.icsid,this.icsns||e.icsns)f=f&&this.icsns===e.icsns}else this.ics&&e.ics&&(f=this.ics===e.ics);return f},toJson:function(e){var f=null,n=g.isDefined;e=n(e)?e:!0;n(this.icsid)?(f={icsid:this.icsid},
n(this.icsns)&&(f.icsns=this.icsns)):n(this.ics)&&(f={ics:this.ics});n(this.url)&&n(f)&&e&&(f.url=this.url);return f}});return b.ImageSpatialReference=D})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c){function l(){}b={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var r=D(f,{declaredClass:"esri.geometry.Extent",
type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(m,q,v,B,w){d.isObject(m)?(d.mixin(this,m),this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference))):this.update(m,q,v,B,w);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new n((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new n(this.xmin,
this.ymax,this.spatialReference)},getTopRight:function(){return new n(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new n(this.xmin,this.ymin,this.spatialReference)},getBottomRight:function(){return new n(this.xmax,this.ymin,this.spatialReference)},centerAt:function(m){var q=this.getCenter(),v=m.x-q.x;m=m.y-q.y;return new r(this.xmin+v,this.ymin+m,this.xmax+v,this.ymax+m,this.spatialReference)},update:function(m,q,v,B,w){this.xmin=m;this.ymin=q;this.xmax=v;this.ymax=
B;this.spatialReference=w;this.clearCache();return this},offset:function(m,q){return new r(this.xmin+m,this.ymin+q,this.xmax+m,this.ymax+q,this.spatialReference)},expand:function(m){var q=(1-m)/2;m=this.getWidth()*q;q*=this.getHeight();return new r(this.xmin+m,this.ymin+q,this.xmax-m,this.ymax-q,this.spatialReference)},intersects:function(m){if(!m)return!1;var q=m.type,v=this.spatialReference,B=m.spatialReference;v&&B&&!v.equals(B)&&v._canProject(B)&&(m=v.isWebMercator()?h.geographicToWebMercator(m):
h.webMercatorToGeographic(m,!0));switch(q){case "point":return this.contains(m);case "multipoint":return this._intersectsMultipoint(m);case "extent":return this._intersectsExtent(m);case "polygon":return this._intersectsPolygon(m);case "polyline":return this._intersectsPolyline(m)}},normalize:function(){var m=this._normalize(!1,!0);a.isArray(m)||(m=[m]);return m},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var m=this.spatialReference,q=m&&m._getInfo(),v=[],B=0;if(q&&
this._isOutOfBounds(q)){var w=this;B=w.xmin;var z=w.ymin,x=w.ymax,y=q.valid[0],u=q.valid[1];w.getWidth()>2*u&&(w=w.getCenter(),w=new r(w.x-u,z,w.x+u,x,new e(m.toJson())));B=w.xmin-B;var t=this._normalizeX(w.xmin,q);q=this._normalizeX(w.xmax,q);t.frameId===q.frameId?v.push(new r(t.x,z,q.x,x,new e(m.toJson()))):v.push(new r(t.x,z,u,x,new e(m.toJson())),new r(y,z,q.x,x,new e(m.toJson())))}else v.push(this.getExtent());return{extents:v,marginLeft:B}},_intersectsMultipoint:function(m){var q=m.points.length,
v;for(v=0;v<q;v++)if(this.contains(m.getPoint(v)))return!0;return!1},_intersectsExtent:function(m){var q,v,B=!1;if(this.xmin<=m.xmin){var w=m.xmin;this.xmax<w?B=!0:q=Math.min(this.xmax,m.xmax)-w}else w=this.xmin,m.xmax<w?B=!0:q=Math.min(this.xmax,m.xmax)-w;if(this.ymin<=m.ymin){var z=m.ymin;this.ymax<z?B=!0:v=Math.min(this.ymax,m.ymax)-z}else z=this.ymin,m.ymax<z?B=!0:v=Math.min(this.ymax,m.ymax)-z;return B?null:new r(w,z,w+q,z+v,this.spatialReference)},_intersectsPolygon:function(m){var q=[this.xmin,
this.ymax],v=[this.xmax,this.ymax],B=[this.xmin,this.ymin],w=[this.xmax,this.ymin],z=[q,v,B,w];q=[[B,q],[q,v],[v,w],[w,B]];B=m.rings;w=B.length;var x=new n(0,0,this.spatialReference);var y=z.length;for(v=0;v<y;v++)if(x.update(z[v][0],z[v][1]),m.contains(x))return!0;x.setSpatialReference(m.spatialReference);for(v=0;v<w;v++)if(z=B[v],y=z.length){var u=z[0];x.update(u[0],u[1]);if(this.contains(x))return!0;for(m=1;m<y;m++){var t=z[m];x.update(t[0],t[1]);if(this.contains(x)||this._intersectsLine([u,t],
q))return!0;u=t}}return!1},_intersectsPolyline:function(m){var q=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],v,B=m.paths,w=B.length,z,x=new n(0,0,m.spatialReference);for(m=0;m<w;m++){var y=B[m];if(z=y.length){var u=y[0];x.update(u[0],u[1]);if(this.contains(x))return!0;for(v=1;v<z;v++){var t=y[v];x.update(t[0],t[1]);if(this.contains(x)||this._intersectsLine([u,
t],q))return!0;u=t}}}return!1},_intersectsLine:function(m,q){var v=k._getLineIntersection2,B,w=q.length;for(B=0;B<w;B++)if(v(m,q[B]))return!0;return!1},contains:function(m){if(!m)return!1;var q=m.type;if("point"===q){var v=this.spatialReference,B=m.spatialReference;q=m.x;m=m.y;v&&B&&!v.equals(B)&&v._canProject(B)&&(m=v.isWebMercator()?n.lngLatToXY(q,m):n.xyToLngLat(q,m,!0),q=m[0],m=m[1]);return q>=this.xmin&&q<=this.xmax&&m>=this.ymin&&m<=this.ymax}return"extent"===q?this._containsExtent(m):!1},_containsExtent:function(m){var q=
m.xmin,v=m.ymin,B=m.xmax,w=m.ymax,z=m.spatialReference;m=new n(q,v,z);q=new n(q,w,z);w=new n(B,w,z);v=new n(B,v,z);return this.contains(m)&&this.contains(q)&&this.contains(w)&&this.contains(v)?!0:!1},union:function(m){return new r(Math.min(this.xmin,m.xmin),Math.min(this.ymin,m.ymin),Math.max(this.xmax,m.xmax),Math.max(this.ymax,m.ymax),this.spatialReference)},getExtent:function(){var m=this.spatialReference;return new r(this.xmin,this.ymin,this.xmax,this.ymax,m&&new e(m.toJson()))},_shiftCM:function(m){var q=
this.getCacheValue("_shifted");if(!q){q=new r(this.toJson());var v=q.spatialReference;if(m=m||v._getInfo()){var B=this._getCM(m);if(B){var w=v._isWebMercator()?h.webMercatorToGeographic(B):B;q.xmin-=B.x;q.xmax-=B.x;v._isWebMercator()||(w.x=this._normalizeX(w.x,m).x);q.setSpatialReference(new e(d.substitute({Central_Meridian:w.x},4326===v.wkid?m.altTemplate:m.wkTemplate)))}}this.setCacheValue("_shifted",q)}return q},_getCM:function(m){var q;this._isOutOfBounds(m)&&(q=this.getCenter());return q},_isOutOfBounds:function(m){var q=
m.valid[0];m=m.valid[1];var v=this.xmin,B=this.xmax;return!(v>=q&&v<=m&&B>=q&&B<=m)},_normalize:function(m,q,v){var B=new r(this.toJson()),w=B.spatialReference;if(w&&(v=v||w._getInfo())){var z=A.map(this._getParts(v),function(x){return x.extent});return 2<z.length?m?this._shiftCM(v):B.update(v.valid[0],B.ymin,v.valid[1],B.ymax,w):2===z.length?m?this._shiftCM(v):q?z:{rings:A.map(z,function(x){return[[x.xmin,x.ymin],[x.xmin,x.ymax],[x.xmax,x.ymax],[x.xmax,x.ymin],[x.xmin,x.ymin]]}),spatialReference:w}:
z[0]||B}return B},_getParts:function(m){var q=this.getCacheValue("_parts");if(!q){q=[];var v=this.xmin,B=this.xmax,w=this.ymin,z=this.ymax,x=this.spatialReference,y=this.getWidth(),u=v,t=B,C=0,E=0;m=m||x._getInfo();var F=m.valid[0];var G=m.valid[1];E=this._normalizeX(v,m);v=E.x;C=E.frameId;E=this._normalizeX(B,m);B=E.x;E=E.frameId;m=v===B&&0<y;if(y>2*G){y=new r(u<t?v:B,w,G,z,x);v=new r(F,w,u<t?B:v,z,x);G=new r(0,w,G,z,x);w=new r(F,w,0,z,x);x=[];F=[];y.contains(G)&&x.push(C);y.contains(w)&&F.push(C);
v.contains(G)&&x.push(E);v.contains(w)&&F.push(E);for(z=C+1;z<E;z++)x.push(z),F.push(z);q.push({extent:y,frameIds:[C]},{extent:v,frameIds:[E]},{extent:G,frameIds:x},{extent:w,frameIds:F})}else v>B||m?q.push({extent:new r(v,w,G,z,x),frameIds:[C]},{extent:new r(F,w,B,z,x),frameIds:[E]}):q.push({extent:new r(v,w,B,z,x),frameIds:[C]});this.setCacheValue("_parts",q)}return q},_normalizeX:function(m,q){var v=0,B=q.valid[0],w=q.valid[1],z=2*w;m>w?(v=Math.ceil(Math.abs(m-w)/z),m-=v*z):m<B&&(v=Math.ceil(Math.abs(m-
B)/z),m+=v*z,v=-v);return{x:m,frameId:v}},toJson:function(){var m={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},q=this.spatialReference;q&&(m.spatialReference=q.toJson());return m}});l.prototype=r.prototype;r.simpleConstructor=l;r.defaultProps=b;a.setObject("geometry.Extent",r,g);g.geometry.defaultExtent=b;return r})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(D,A,a,b,g,d){function e(n,
h,k,c){if("point"===n.type){var l=h(n.x,n.y,c);return new n.constructor(l[0],l[1],new g(k))}if("extent"===n.type){l=h(n.xmin,n.ymin,c);var r=h(n.xmax,n.ymax,c);return new n.constructor(l[0],l[1],r[0],r[1],new g(k))}if("polyline"===n.type||"polygon"===n.type){l="polyline"===n.type;var m=[],q;D.forEach(l?n.paths:n.rings,function(B){m.push(q=[]);D.forEach(B,function(w){q.push(h(w[0],w[1],c))})});return l?new n.constructor({paths:m,spatialReference:new g(k)}):new n.constructor({rings:m,spatialReference:new g(k)})}if("multipoint"===
n.type){var v=[];D.forEach(n.points,function(B){v.push(h(B[0],B[1],c))});return new n.constructor({points:v,spatialReference:new g(k)})}}function f(n,h){var k=n&&(null!=n.wkid?n:n.spatialReference),c=h&&(null!=h.wkid?h:h.spatialReference);return k&&c?c.equals(k)?!0:c._canProject(k):!1}a={canProject:f,project:function(n,h){var k=n&&n.spatialReference,c=h&&(null!=h.wkid?h:h.spatialReference);k&&c?k.equals(c)?n=new n.constructor(n.toJson()):f(k,c)?c.isWebMercator()?n=e(n,d.lngLatToXY,{wkid:102100}):
4326===c.wkid&&(n=e(n,d.xyToLngLat,{wkid:4326})):n=null:n=null;return n},lngLatToXY:d.lngLatToXY,xyToLngLat:d.xyToLngLat,metersPerDegree:d.metersPerDegree,geographicToWebMercator:function(n){return e(n,d.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(n,h){return e(n,d.xyToLngLat,{wkid:4326},h)}};A.mixin(A.getObject("geometry",!0,b),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,A,a,b){function g(f,n,h){return f instanceof
b?new b(f.x+h*(n.x-f.x),f.y+h*(n.y-f.y)):[f[0]+h*(n[0]-f[0]),f[1]+h*(n[1]-f[1])]}function d(f,n){return 1E-8>Math.abs(f-n)}function e(f,n,h,k){var c=d(f[0],n[0])?1E10:(f[1]-n[1])/(f[0]-n[0]),l=d(h[0],k[0])?1E10:(h[1]-k[1])/(h[0]-k[0]),r=f[1]-c*f[0],m=h[1]-l*h[0];if(d(c,l)){if(d(r,m)){if(d(f[0],n[0]))if(Math.min(f[1],n[1])<Math.max(h[1],k[1])||Math.max(f[1],n[1])>Math.min(h[1],k[1])){f=(f[1]+n[1]+h[1]+k[1]-Math.min(f[1],n[1],h[1],k[1])-Math.max(f[1],n[1],h[1],k[1]))/2;var q=(f-r)/c}else return null;
else if(Math.min(f[0],n[0])<Math.max(h[0],k[0])||Math.max(f[0],n[0])>Math.min(h[0],k[0]))q=(f[0]+n[0]+h[0]+k[0]-Math.min(f[0],n[0],h[0],k[0])-Math.max(f[0],n[0],h[0],k[0]))/2,f=c*q+r;else return null;return[q,f]}return null}d(c,1E10)?(q=f[0],f=l*q+m):d(l,1E10)?(q=h[0],f=c*q+r):(q=-(r-m)/(c-l),f=f[1]===n[1]?f[1]:h[1]===k[1]?h[1]:c*q+r);return[q,f]}A={getLength:function(f,n){var h=n.x-f.x,k=n.y-f.y;return Math.sqrt(h*h+k*k)},_getLength:function(f,n){var h=n[0]-f[0],k=n[1]-f[1];return Math.sqrt(h*h+
k*k)},getPointOnLine:g,getMidpoint:function(f,n){return g(f,n,.5)},_equals:d,_getLineIntersection:e,getLineIntersection:function(f,n,h,k,c){(f=e([f.x,f.y],[n.x,n.y],[h.x,h.y],[k.x,k.y]))&&(f=new b(f[0],f[1],c));return f},_getLineIntersection2:function(f,n){var h=f[0],k=f[1],c=n[0],l=n[1],r=h[0];h=h[1];var m=k[0];k=k[1];var q=c[0],v=c[1];c=l[0]-q;q=r-q;var B=m-r;l=l[1]-v;v=h-v;var w=k-h,z=l*B-c*w;if(0===z)return!1;c=(c*v-l*q)/z;q=(B*v-w*q)/z;return 0<=c&&1>=c&&0<=q&&1>=q?[r+c*(m-r),h+c*(k-h)]:!1},
_pointLineDistance:function(f,n){var h=n[0],k=n[1],c=h[0],l=h[1];h=f[0];var r=f[1],m=k[0]-c,q=k[1]-l,v=h-c,B=r-l;k=Math.sqrt;var w=Math.pow,z=k(w(m,2)+w(q,2));v=(v*m+B*q)/(z*z);l+=v*q;return k(w(h-(c+v*m),2)+w(r-l,2))}};D.mixin(D.getObject("geometry",!0,a),A);return A})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","./kernel","./geometry/Extent"],function(D,A,a,b,g){a={graphicsExtent:function(d){if(!d||!d.length)return null;var e=null,f,n=d.length;for(f=
0;f<n;f++){var h=d[f].geometry;if(h){var k=h.getExtent();k||"point"!==h.type||null==h.x||null==h.y||(k=new g(h.x,h.y,h.x,h.y,h.spatialReference));k&&(e=e?e.union(k):k)}}return 0>e.getWidth()&&0>e.getHeight()?null:e},getGeometries:function(d){return A.map(d,function(e){return e.geometry})},_encodeGraphics:function(d,e){return A.map(d,function(f,n){var h=f.toJson(),k={};if(h.geometry){var c=e&&e[n];k.geometry=c&&c.toJson()||h.geometry}h.attributes&&(k.attributes=h.attributes);return k})}};D.mixin(b,
a);return a})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","./kernel"],function(D,A,a,b,g){b={_serializeLayerDefinitions:function(d,e){var f=[],n=/[:;]/;if(d&&(A.forEach(d,function(k,c){k&&(f.push([c,k]),!e&&n.test(k)&&(e=!0))}),0<f.length)){if(e){var h={};A.forEach(f,function(k){h[k[0]]=k[1]});h=a.toJson(h)}else h=[],A.forEach(f,function(k){h.push(k[0]+":"+k[1])}),h=h.join(";");return h}return null},_serializeTimeOptions:function(d,e){if(d){var f=
[];A.forEach(d,function(n,h){if(n){var k=n.toJson();e&&-1!==A.indexOf(e,h)&&(k.useTime=!1);f.push('"'+h+'":'+a.toJson(k))}});if(f.length)return"{"+f.join(",")+"}"}},_getVisibleLayers:function(d,e){var f=[],n;if(!d)return f;if(e)for(f=e.concat(),n=0;n<d.length;n++){var h=d[n];var k=A.indexOf(d,h.id);h.subLayerIds&&-1<k&&(f.splice(k,1),f=f.concat(h.subLayerIds))}else f=this._getDefaultVisibleLayers(d);return f},_getDefaultVisibleLayers:function(d){var e=[],f;if(!d)return e;for(f=0;f<d.length;f++)0<=
d[f].parentLayerId&&-1===A.indexOf(e,d[f].parentLayerId)&&A.some(d,function(n){return n.id===d[f].parentLayerId})||d[f].defaultVisibility&&e.push(d[f].id);return e},_getLayersForScale:function(d,e){var f=[];if(0<d&&e){var n;for(n=0;n<e.length;n++)if(!(0<=e[n].parentLayerId&&-1===A.indexOf(f,e[n].parentLayerId)&&A.some(e,function(l){return l.id===e[n].parentLayerId}))&&0<=e[n].id){var h=!0,k=e[n].maxScale,c=e[n].minScale;if(0<k||0<c)0<k&&0<c?h=k<=d&&d<=c:0<k?h=k<=d:0<c&&(h=d<=c);h&&f.push(e[n].id)}}return f}};
D.mixin(g,b);return b})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has ../kernel ../config ../deferredUtils ./Extent ./Polyline ./Polygon ./webMercatorUtils ./jsonUtils".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c){function l(t,C){return Math.ceil((t-C)/(2*C))}function r(t,C){var E=t.paths||t.rings,F,G,H=E.length;for(F=0;F<H;F++){var L=E[F].length;for(G=0;G<L;G++){var J=t.getPoint(F,G);t.setPoint(F,G,J.offset(C,0))}}return t}function m(t,
C){if(!(t instanceof n||t instanceof h))throw Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var E=t instanceof n,F=[],G;D.forEach(E?t.paths:t.rings,function(H){F.push(G=[]);G.push([H[0][0],H[0][1]]);var L,J;for(L=0;L<H.length-1;L++){var S=H[L][0];var P=H[L][1];var Q=H[L+1][0];var M=H[L+1][1];var N=Math.sqrt((Q-S)*(Q-S)+(M-P)*(M-P));var K=(M-P)/N;var X=(Q-S)/N;var da=N/C;if(1<da){for(J=1;J<=da-1;J++){var Y=J*C;var aa=X*Y+S;Y=K*Y+P;G.push([aa,Y])}J=(N+Math.floor(da-
1)*C)/2;aa=X*J+S;Y=K*J+P;G.push([aa,Y])}G.push([Q,M])}});return E?new n({paths:F,spatialReference:t.spatialReference}):new h({rings:F,spatialReference:t.spatialReference})}function q(t,C,E){C&&(t=m(t,1E6),t=k.webMercatorToGeographic(t,!0));E&&(t=r(t,E));return t}function v(t,C,E){var F=t.x||t[0];if(F>C){var G=l(F,C);t.x?t=t.offset(-2*G*C,0):t[0]=F+-2*G*C}else F<E&&(G=l(F,E),t.x?t=t.offset(-2*G*E,0):t[0]=F+-2*G*E);return t}function B(t,C){var E=-1;D.forEach(C.cutIndexes,function(F,G){var H=C.geometries[G];
D.forEach(H.rings||H.paths,function(L,J){D.some(L,function(S){if(!(180>S[0])){S=0;var P,Q=L.length;for(P=0;P<Q;P++){var M=L[P][0];S=M>S?M:S}S=Number(S.toFixed(9));S=-360*l(S,180);Q=L.length;for(P=0;P<Q;P++)M=H.getPoint(J,P),H.setPoint(J,P,M.offset(S,0))}return!0})});F===E?H.rings?D.forEach(H.rings,function(L){t[F]=t[F].addRing(L)}):D.forEach(H.paths,function(L){t[F]=t[F].addPath(L)}):(E=F,t[F]=H)});return t}function w(t,C,E,F){var G=new a;G.addCallbacks(E,F);C=C||d.defaults.geometryService;var H=
[],L=[],J,S,P,Q,M,N,K,X,da=0;D.forEach(t,function(I){if(I)if(J||(J=I.spatialReference,S=J._getInfo(),Q=(P=J._isWebMercator())?2.0037508342788905E7:180,M=P?-2.0037508342788905E7:-180,N=P?102100:4326,K=new n({paths:[[[Q,M],[Q,Q]]],spatialReference:{wkid:N}}),X=new n({paths:[[[M,M],[M,Q]]],spatialReference:{wkid:N}})),S){var T=c.fromJson(I.toJson()),ba=I.getExtent();"point"===I.type?H.push(v(T,Q,M)):"multipoint"===I.type?(T.points=D.map(T.points,function(pa){return v(pa,Q,M)}),H.push(T)):"extent"===
I.type?(T=ba._normalize(null,null,S),H.push(T.rings?new h(T):T)):ba?(I=2*l(ba.xmin,M)*Q,T=0===I?T:r(T,I),ba=ba.offset(I,0),ba.intersects(K)&&ba.xmax!==Q?(da=ba.xmax>da?ba.xmax:da,T=q(T,P),L.push(T),H.push("cut")):ba.intersects(X)&&ba.xmin!==M?(da=2*ba.xmax*Q>da?2*ba.xmax*Q:da,T=q(T,P,360),L.push(T),H.push("cut")):H.push(T)):H.push(T)}else H.push(I);else H.push(I)});E=new n;F=l(da,Q);for(var Y=-90,aa=F;0<F;){var ca=-180+360*F;E.addPath([[ca,Y],[ca,-1*Y]]);Y*=-1;F--}0<L.length&&0<aa?C?C.cut(L,E,function(I){L=
B(L,I);var T=[];D.forEach(H,function(ba,pa){if("cut"===ba){var ya=L.shift();t[pa].rings&&1<t[pa].rings.length&&ya.rings.length>=t[pa].rings.length?(H[pa]="simplify",T.push(ya)):H[pa]=!0===P?k.geographicToWebMercator(ya):ya}});0<T.length?C.simplify(T,function(ba){D.forEach(H,function(pa,ya){"simplify"===pa&&(H[ya]=!0===P?k.geographicToWebMercator(ba.shift()):ba.shift())});G.callback(H)},function(ba){G.errback(ba)}):G.callback(H)},function(I){G.errback(I)}):G.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):
(D.forEach(H,function(I,T){if("cut"===I){var ba=L.shift();H[T]=!0===P?k.geographicToWebMercator(ba):ba}}),G.callback(H));return G}function z(t,C,E,F){var G=!1,H;A.isObject(t)&&t&&(A.isArray(t)?t.length&&((H=t[0]&&t[0].declaredClass)&&-1!==H.indexOf("Graphic")?(t=D.map(t,function(L){return L.geometry}),G=t.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&(G=!0)):(H=t.declaredClass)&&-1!==H.indexOf("FeatureSet")?(t=D.map(t.features||[],function(L){return L.geometry}),G=t.length?!0:!1):H&&-1!==H.indexOf("esri.geometry.")&&
(G=!0));G&&C.push({index:E,property:F,value:t})}function x(t,C){var E=[];D.forEach(C,function(F){var G=F.i,H=t[G];F=F.p;var L;if(A.isObject(H)&&H)if(F)if("*"===F[0])for(L in H)H.hasOwnProperty(L)&&z(H[L],E,G,L);else D.forEach(F,function(J){z(A.getObject(J,!1,H),E,G,J)});else z(H,E,G)});return E}function y(t,C){var E=0,F={};D.forEach(C,function(G){var H=G.index,L=G.property,J=G.value,S=J.length||1,P=t.slice(E,E+S);A.isArray(J)||(P=P[0]);E+=S;delete G.value;L?(F[H]=F[H]||{},F[H][L]=P):F[H]=P});return F}
function u(t){for(var C=[],E=0,F=0,G=Math.min,H=Math.max,L=0;L<t.length;L++){for(var J=t[L],S=null,P=0;P<J.length;P++)S=J[P],C.push(S),0===P?F=E=S[0]:(E=G(E,S[0]),F=H(F,S[0]));S&&C.push([(E+F)/2,0])}return C}b={normalizeCentralMeridian:w,_foldCutResults:B,_prepareGeometryForCut:q,_offsetMagnitude:l,_pointNormalization:v,_updatePolyGeometry:r,_straightLineDensify:m,_createWrappers:function(t){var C=A.isObject(t)?t.prototype:A.getObject(t+".prototype");D.forEach(C.__msigns,function(E){var F=C[E.n];
C[E.n]=function(){var G=this,H=[],L,J=new a(e._dfdCanceller);E.f&&e._fixDfd(J);for(L=0;L<E.c;L++)H[L]=arguments[L];var S={dfd:J};H.push(S);var P=[],Q;if(G.normalization&&!G._isTable){var M=x(H,E.a);D.forEach(M,function(N){P=P.concat(N.value)});P.length&&(Q=w(P))}Q?(J._pendingDfd=Q,Q.addCallbacks(function(N){J.canceled||(S.assembly=y(N,M),J._pendingDfd=F.apply(G,H))},function(N){var K=G.declaredClass;K&&-1!==K.indexOf("FeatureLayer")?G._resolve([N],null,H[E.e],J,!0):G._errorHandler(N,H[E.e],J)})):
J._pendingDfd=F.apply(G,H);return J}})},_disassemble:x,_addToBucket:z,_reassemble:y,getDenormalizedExtent:function(t){if(!t)return null;var C=t.getExtent();if(!C)return null;var E=t.spatialReference&&t.spatialReference._getInfo();if(!E)return C;var F=E.valid[0];E=E.valid[1];var G=2*E,H=C.getWidth(),L=C.xmax,J=C.xmin;if("extent"===t.type||0===H||H<=E||H>G||L<F||J>E)return C;switch(t.type){case "polygon":if(1<t.rings.length)var S=u(t.rings);else return C;break;case "polyline":if(1<t.paths.length)S=
u(t.paths);else return C;break;case "multipoint":S=t.points}t=Math.min;F=Math.max;G=new f(C.toJson());for(var P=0;P<S.length;P++){var Q=S[P][0];0>Q?(Q+=E,J=F(Q,J)):(Q-=E,L=t(Q,L))}G.xmin=L;G.xmax=J;return G.getWidth()<H?(G.xmin-=E,G.xmax-=E,G):C}};A.mixin(A.getObject("geometry",!0,g),b);return b})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,
A,a,b,g,d,e,f,n,h,k){function c(){}function l(){}b={type:"polyline",paths:null};D=D(f,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(r){this.paths=[];this._path=0;r&&(a.isArray(r)?this.paths=a.isArray(r[0][0])?r:[r]:r.paths?d.mixin(this,r):this.spatialReference=r,this.spatialReference&&(this.spatialReference=k.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(r){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.isArray(r[0])?A.forEach(r,this._addPointArr,this):A.forEach(r,this._addPoint,this);return this},_addPointArr:function(r){this.paths[this._path].push(r)},_addPoint:function(r){this.paths[this._path].push([r.x,r.y])},_insertPoints:function(r,m){this.clearCache();this._path=m;this.paths[this._path]||(this.paths[this._path]=[]);A.forEach(r,this._addPoint,this)},_validateInputs:function(r,m){return null!==r&&void 0!==r&&(0>r||r>=this.paths.length)||null!==m&&void 0!==r&&(0>m||m>=this.paths[r].length)?
!1:!0},getPoint:function(r,m){if(this._validateInputs(r,m))return new n(this.paths[r][m],this.spatialReference)},setPoint:function(r,m,q){if(this._validateInputs(r,m))return this.clearCache(),this.paths[r][m]=[q.x,q.y],this},insertPoint:function(r,m,q){if(this._validateInputs(r)&&null!=m&&0<=m&&m<=this.paths[r].length)return this.clearCache(),this.paths[r].splice(m,0,[q.x,q.y]),this},removePath:function(r){if(this._validateInputs(r,null)){this.clearCache();r=this.paths.splice(r,1)[0];var m,q=r.length,
v=this.spatialReference;for(m=0;m<q;m++)r[m]=new n(r[m],v);return r}},removePoint:function(r,m){if(this._validateInputs(r,m))return this.clearCache(),new n(this.paths[r].splice(m,1)[0],this.spatialReference)},getExtent:function(){var r=this.getCacheValue("_extent");var m=this.getCacheValue("_partwise");if(r)return r=new h(r),r._partwise=m,r;r=this.paths;var q=r.length;if(q&&r[0].length){var v,B,w,z,x=v=r[0][0][0],y=B=r[0][0][1],u=Math.min,t=Math.max,C=this.spatialReference;m=[];var E,F;for(w=0;w<
q;w++){var G=r[w];var H=E=G[0]&&G[0][0];var L=F=G[0]&&G[0][1];var J=G.length;for(z=0;z<J;z++){var S=G[z];var P=S[0];S=S[1];x=u(x,P);y=u(y,S);v=t(v,P);B=t(B,S);H=u(H,P);L=u(L,S);E=t(E,P);F=t(F,S)}m.push(new h({xmin:H,ymin:L,xmax:E,ymax:F,spatialReference:C?C.toJson():null}))}r={xmin:x,ymin:y,xmax:v,ymax:B,spatialReference:C?C.toJson():null};m=1<m.length?m:null;this.setCacheValue("_extent",r);this.setCacheValue("_partwise",m);r=new h(r);r._partwise=m;return r}},toJson:function(){var r={paths:d.clone3DArray(this.paths)},
m=this.spatialReference;m&&(r.spatialReference=m.toJson());return r}});c.prototype=D.prototype;l.prototype=new c;Object.defineProperty(l.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:d.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(r){this._pathsVal=r}});l.prototype.setupLazyUnquantization=function(r,m){this._unquantizeFn=r;this._pathsVal=m.paths};D.simpleConstructor=c;D.accessorConstructor=l;D.defaultProps=
b;a.setObject("geometry.Polyline",D,g);g.geometry.defaultPolyline=b;return D})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c){function l(){}function r(){}b={type:"polygon",rings:null};var m=D(f,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(q){this.rings=[];this._ring=
0;q&&(a.isArray(q)?this.rings=a.isArray(q[0][0])?q:[q]:q.rings?d.mixin(this,q):this.spatialReference=q,this.spatialReference&&(this.spatialReference=c.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(q){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(q[0])?A.forEach(q,this._addPointArr,this):A.forEach(q,this._addPoint,this);return this},_addPointArr:function(q){this.rings[this._ring].push(q)},_addPoint:function(q){this.rings[this._ring].push([q.x,
q.y])},_insertPoints:function(q,v){this.clearCache();this._ring=v;this.rings[this._ring]||(this.rings[this._ring]=[]);A.forEach(q,this._addPoint,this)},_validateInputs:function(q,v){return null!==q&&void 0!==q&&(0>q||q>=this.rings.length)||null!==v&&void 0!==q&&(0>v||v>=this.rings[q].length)?!1:!0},getPoint:function(q,v){if(this._validateInputs(q,v))return new n(this.rings[q][v],this.spatialReference)},setPoint:function(q,v,B){if(this._validateInputs(q,v))return this.clearCache(),this.rings[q][v]=
[B.x,B.y],this},insertPoint:function(q,v,B){if(this._validateInputs(q)&&null!=v&&0<=v&&v<=this.rings[q].length)return this.clearCache(),this.rings[q].splice(v,0,[B.x,B.y]),this},removeRing:function(q){if(this._validateInputs(q,null)){this.clearCache();q=this.rings.splice(q,1)[0];var v,B=q.length,w=this.spatialReference;for(v=0;v<B;v++)q[v]=new n(q[v],w);return q}},removePoint:function(q,v){if(this._validateInputs(q,v))return this.clearCache(),new n(this.rings[q].splice(v,1)[0],this.spatialReference)},
getExtent:function(){var q=this.getCacheValue("_extent");var v=this.getCacheValue("_partwise");if(q)return q=new h(q),q._partwise=v,q;q=this.rings;var B=q.length;if(B&&q[0].length){var w,z,x,y,u=w=q[0][0][0],t=z=q[0][0][1],C=Math.min,E=Math.max,F=this.spatialReference;v=[];var G,H;for(x=0;x<B;x++){var L=q[x];var J=G=L[0]&&L[0][0];var S=H=L[0]&&L[0][1];var P=L.length;for(y=0;y<P;y++){var Q=L[y];var M=Q[0];Q=Q[1];u=C(u,M);t=C(t,Q);w=E(w,M);z=E(z,Q);J=C(J,M);S=C(S,Q);G=E(G,M);H=E(H,Q)}v.push(new h({xmin:J,
ymin:S,xmax:G,ymax:H,spatialReference:F?F.toJson():null}))}q={xmin:u,ymin:t,xmax:w,ymax:z,spatialReference:F?F.toJson():null};v=1<v.length?v:null;this.setCacheValue("_extent",q);this.setCacheValue("_partwise",v);q=new h(q);q._partwise=v;return q}},contains:function(q){var v=this.rings,B=!1,w,z,x,y=v.length;var u=this.spatialReference;var t=q.spatialReference;var C=q.x;q=q.y;u&&t&&!u.equals(t)&&u._canProject(t)&&(q=u.isWebMercator()?n.lngLatToXY(C,q):n.xyToLngLat(C,q,!0),C=q[0],q=q[1]);for(x=0;x<y;x++){u=
v[x];var E=u.length;for(z=w=0;z<E;z++){w++;w===E&&(w=0);t=u[z];var F=u[w];(t[1]<q&&F[1]>=q||F[1]<q&&t[1]>=q)&&t[0]+(q-t[1])/(F[1]-t[1])*(F[0]-t[0])<C&&(B=!B)}}return B},getCentroid:function(){var q=this.getCacheValue("_centroid");if(void 0!==q)return q;q=this.rings;var v,B,w=[],z,x,y=Infinity,u=-Infinity,t=Infinity,C=-Infinity;A.forEach(q,function(G){E=v=B=0;A.forEach(G,function(H,L){L<G.length-1&&(z=G[L+1],x=H[0]*z[1]-z[0]*H[1],E+=(H[0]+z[0])*x,v+=(H[1]+z[1])*x,B+=x,H[0]<y&&(y=H[0]),H[0]>u&&(u=H[0]),
H[1]<t&&(t=H[1]),H[1]>C&&(C=H[1]))});0<B&&(B*=-1);B&&w.push([E,v,B/2])});w.sort(function(G,H){return G[2]-H[2]});var E=v=void 0;if(w[0]){var F=6*w[0][2];E=w[0][0]/F;v=w[0][1]/F;if(E<y||E>u||v<t||v>C)E=v=void 0}if(void 0===E||void 0===v)if(q=q[0]&&q[0].length?this._getLineCentroid(q[0]):null)E=q.x,v=q.y;q=isNaN(E)||isNaN(v)?null:new n(E,v,this.spatialReference);this.setCacheValue("_centroid",q);return q},_getLineCentroid:function(q){var v=0,B=0,w=0,z={x:0,y:0},x={x:0,y:0},y,u=q.length,t;for(y=0;y<
u-1;y++){var C=q[y];var E=q[y+1];if(C&&E){z.x=C[0];z.y=C[1];x.x=E[0];x.y=E[1];var F=k.getLength(z,x);0<F&&(v+=F,C=k.getMidpoint(C,E),B+=F*C[0],w+=F*C[1])}}0<v?t={x:B/v,y:w/v}:q[0]&&(t={x:q[0][0],y:q[0][1]});return t},isClockwise:function(q){var v=0,B,w=q.length,z=a.isArray(q[0])?function(x,y){return x[0]*y[1]-y[0]*x[1]}:function(x,y){return x.x*y.y-y.x*x.y};for(B=0;B<w;B++)v+=z(q[B],q[(B+1)%w]);return 0>=v/2},isSelfIntersecting:function(q){q=q||this;var v,B,w,z,x,y=q.rings.length;for(w=0;w<y;w++){for(v=
0;v<q.rings[w].length-1;v++){var u=[[q.rings[w][v][0],q.rings[w][v][1]],[q.rings[w][v+1][0],q.rings[w][v+1][1]]];for(B=w+1;B<y;B++)for(z=0;z<q.rings[B].length-1;z++){var t=[[q.rings[B][z][0],q.rings[B][z][1]],[q.rings[B][z+1][0],q.rings[B][z+1][1]]];if((x=k._getLineIntersection2(u,t))&&!(x[0]===u[0][0]&&x[1]===u[0][1]||x[0]===t[0][0]&&x[1]===t[0][1]||x[0]===u[1][0]&&x[1]===u[1][1]||x[0]===t[1][0]&&x[1]===t[1][1]))return!0}}z=q.rings[w].length;if(!(4>=z))for(v=0;v<z-3;v++){var C=z-1;0===v&&(C=z-2);
u=[[q.rings[w][v][0],q.rings[w][v][1]],[q.rings[w][v+1][0],q.rings[w][v+1][1]]];for(B=v+2;B<C;B++)if(t=[[q.rings[w][B][0],q.rings[w][B][1]],[q.rings[w][B+1][0],q.rings[w][B+1][1]]],(x=k._getLineIntersection2(u,t))&&!(x[0]===u[0][0]&&x[1]===u[0][1]||x[0]===t[0][0]&&x[1]===t[0][1]||x[0]===u[1][0]&&x[1]===u[1][1]||x[0]===t[1][0]&&x[1]===t[1][1]))return!0}}return!1},toJson:function(){var q={rings:d.clone3DArray(this.rings)},v=this.spatialReference;v&&(q.spatialReference=v.toJson());return q}});l.prototype=
m.prototype;r.prototype=new l;Object.defineProperty(r.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:d.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(q){this._ringsVal=q}});r.prototype.setupLazyUnquantization=function(q,v){this._unquantizeFn=q;this._ringsVal=v.rings};m.simpleConstructor=l;m.accessorConstructor=r;m.defaultProps=b;m.createEllipse=function(q){var v=q.center.x,B=q.center.y,w=q.longAxis,
z=q.shortAxis,x=q.numberOfPoints,y=q.map,u;q=[];var t=2*Math.PI/x;for(u=0;u<x;u++){var C=Math.cos(u*t);var E=Math.sin(u*t);C=y.toMap({x:w*C+v,y:z*E+B});q.push(C)}q.push(q[0]);v=new m(y.spatialReference);v.addRing(q);return v};m.createCircle=function(q){return m.createEllipse({center:q.center,longAxis:q.r,shortAxis:q.r,numberOfPoints:q.numberOfPoints,map:q.map})};m.fromExtent=function(q){var v=q.normalize();q=q.spatialReference;return new m({rings:A.map(v,function(B){return[[B.xmin,B.ymin],[B.xmin,
B.ymax],[B.xmax,B.ymax],[B.xmax,B.ymin],[B.xmin,B.ymin]]}),spatialReference:q?q.toJson():null})};a.setObject("geometry.Polygon",m,g);g.geometry.defaultPolygon=b;g.geometry.createEllipse=m.createEllipse;g.geometry.createCircle=m.createCircle;g.geometry.isClockwise=m.prototype.isClockwise;g.geometry.polygonSelfIntersecting=m.prototype.isSelfIntersecting;return m})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),
function(D,A,a,b,g,d,e,f,n){function h(r,m,q){var v=r.rings||r.paths,B,w;var z=0;for(B=v.length;z<B;z++){var x=v[z];var y=0;for(w=x.length;y<w;y++){var u=x[y];if(0<y)t+=u[0],C+=u[1];else{var t=u[0];var C=u[1]}u[0]=m(t);u[1]=q(C)}}return r}var k={esriGeometryPoint:function(r,m,q){r.x=m(r.x);r.y=q(r.y);return r},esriGeometryPolyline:h,esriGeometryPolygon:h,esriGeometryEnvelope:function(r,m,q){r.xmin=m(r.xmin);r.ymin=q(r.ymin);r.xmax=m(r.xmax);r.ymax=q(r.ymax);return r},esriGeometryMultipoint:function(r,
m,q){var v=r.points,B;var w=0;for(B=v.length;w<B;w++){var z=v[w];if(0<w)x+=z[0],y+=z[1];else{var x=z[0];var y=z[1]}z[0]=m(x);z[1]=q(y)}return r}},c={esriGeometryPoint:function(r,m,q){r.x=m(r.x);r.y=q(r.y);return r}},l={createInstance:function(r,m){var q=new r;m&&b.mixin(q,m);return q},fromJson:function(r){if(void 0!==r.x&&void 0!==r.y)return new g(r);if(void 0!==r.paths)return new d(r);if(void 0!==r.rings)return new e(r);if(void 0!==r.points)return new f(r);if(void 0!==r.xmin&&void 0!==r.ymin&&void 0!==
r.xmax&&void 0!==r.ymax)return new n(r)},getJsonType:function(r){return r instanceof g?"esriGeometryPoint":r instanceof d?"esriGeometryPolyline":r instanceof e?"esriGeometryPolygon":r instanceof n?"esriGeometryEnvelope":r instanceof f?"esriGeometryMultipoint":null},getGeometryType:function(r){return"esriGeometryPoint"===r?g:"esriGeometryPolyline"===r?d:"esriGeometryPolygon"===r?e:"esriGeometryEnvelope"===r?n:"esriGeometryMultipoint"===r?f:null},supportsLazyUnquantization:function(r){return"esriGeometryPoint"===
r||"esriGeometryPolyline"===r||"esriGeometryPolygon"===r||"esriGeometryMultipoint"===r},unquantizeFunction:function(r,m){if(r&&m){var q=m.translate[0],v=m.translate[1],B=m.scale[0],w=m.scale[1],z=function(u){return u*B+q},x=function(u){return v-u*w},y=k[r];return function(u){return u?y(u,z,x):null}}},unquantize:function(r,m,q){if(m=l.unquantizeFunction(m,q)){var v=r.length;for(q=0;q<v;q++)m(r[q].geometry)}},quantizeFunction:function(r,m){if(r&&"esriGeometryPoint"===r&&m){var q=m.translate[0],v=m.translate[1],
B=m.scale[0],w=m.scale[1],z=function(u){return Math.round((u-q)/B)},x=function(u){return Math.round((v-u)/w)},y=c[r];return function(u){return u?y(u,z,x):null}}},quantize:function(r,m,q){if(m=l.quantizeFunction(m,q)){var v=r.length;for(q=0;q<v;q++)m(r[q].geometry)}}};D.mixin(D.getObject("geometry",!0,a),l);return l})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,
A,a,b,g,d,e,f,n,h){function k(){}function c(){}a={type:"multipoint",points:null};D=D(e,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(l){this.points=[];l&&(l.points?g.mixin(this,l):this.spatialReference=l,this.spatialReference&&(this.spatialReference=h.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(l){this.clearCache();A.isArray(l)?this.points.push(l):this.points.push([l.x,l.y]);return this},removePoint:function(l){if(this._validateInputs(l))return this.clearCache(),
new f(this.points.splice(l,1)[0],this.spatialReference)},getExtent:function(){var l=this.getCacheValue("_extent");if(l)return new n(l);l=this.points;var r=l.length;if(r){var m=l[0],q,v,B=q=m[0],w=v=m[1],z=Math.min,x=Math.max,y=this.spatialReference,u;for(u=0;u<r;u++){m=l[u];var t=m[0];m=m[1];B=z(B,t);w=z(w,m);q=x(q,t);v=x(v,m)}l={xmin:B,ymin:w,xmax:q,ymax:v,spatialReference:y?y.toJson():null};this.setCacheValue("_extent",l);return new n(l)}},_validateInputs:function(l){return null===l||0>l||l>=this.points.length?
!1:!0},getPoint:function(l){if(this._validateInputs(l))return l=this.points[l],new f(l[0],l[1],this.spatialReference)},setPoint:function(l,r){if(this._validateInputs(l))return this.clearCache(),this.points[l]=[r.x,r.y],this},toJson:function(){var l={points:g.clone2DArray(this.points)},r=this.spatialReference;r&&(l.spatialReference=r.toJson());return l}});k.prototype=D.prototype;c.prototype=new k;Object.defineProperty(c.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:g.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(l){this._pointsVal=l}});c.prototype.setupLazyUnquantization=function(l,r){this._unquantizeFn=l;this._pointsVal=r.points};D.simpleConstructor=k;D.accessorConstructor=c;D.defaultProps=a;A.setObject("geometry.Multipoint",D,b);b.geometry.defaultMultipoint=a;return D})},"arcgisonline/init":function(){define(["dojo","dijit","dojox","dojo/require!dojo/DeferredList,arcgisonline/sharing/dijit/_Empty,esri/libs/sanitizer/Sanitizer,arcgisonline/pages/utils/organization,arcgisonline/pages/utils/user"],
function(D,A,a){D.provide("arcgisonline.init");D.require("dojo.DeferredList");D.require("arcgisonline.sharing.dijit._Empty");D.require("esri.libs.sanitizer.Sanitizer");D.require("arcgisonline.pages.utils.organization");D.require("arcgisonline.pages.utils.user");D.mixin(arcgisonline.init,{labels:null,feeds:[],currentFeed:null,allSSL:!1,isOrg:!1,isSingleTenant:!1,settings:null,galleryNodeMap:{},sanitizer:null,orgUtil:arcgisonline.pages.utils.organization,userUtil:arcgisonline.pages.utils.user,loadLabels:function(){var b=
arcgisonline.init;b.labels=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(b.labels,D.i18n.getLocalization("arcgisonline","arcgisonline").homePage);D.mixin(b.labels,D.i18n.getLocalization("arcgisonline","arcgisonline").emptyStates);D.attr("viewerLink","innerHTML",b.labels.viewerLink);D.attr("viewerDescription","innerHTML",b.labels.viewerDescription);D.attr("signUpLink","innerHTML",b.labels.signUpLink);D.attr("signUpDescription","innerHTML",b.labels.signUpDescription);D.attr("featuredVideosLink",
"innerHTML",b.labels.featuredVideosLink);D.attr("featuredVideosDescription","innerHTML",b.labels.featuredVideosDescription);D.attr("lnkExplore","innerHTML",b.labels.explorerLink);D.attr("pExplore","innerHTML",b.labels.explorerDescription);D.attr("signUpImg","alt",b.labels.signUpLink);D.attr("signUpImg","title",b.labels.signUpLink);D.attr("mapImg","alt",b.labels.viewerLink);D.attr("mapImg","title",b.labels.viewerLink);D.attr("developersImg","alt",b.labels.explorerLink);D.attr("developersImg","title",
b.labels.explorerLink);D.attr("videosImg","alt",b.labels.featuredVideosLink);D.attr("videosImg","title",b.labels.featuredVideosLink);D.attr("next","aria-label",esriGeowConfig.isRightToLeft?b.labels.previous:b.labels.next);D.attr("prev","aria-label",esriGeowConfig.isRightToLeft?b.labels.next:b.labels.previous);D.attr("skipToContent","innerHTML",b.labels.skipToContent)},initialize:function(b){var g=arcgisonline.init;g.credential=b;esri.i18nBundle=D.i18n.getLocalization("arcgisonline","arcgisonline");
g.loadLabels();g.initSanitizer();D.byId("logoImg")&&D.attr("logoImg","src",arcgisonline.sharing.util.relativeToExplicitUrl("images/logo-pod.jpg"));D.byId("featuredVideosLink").href=esriGeowConfig.learnArcGIS;g.isSingleTenant=void 0!==esriGeowConfig.isMultiTenant&&null!==esriGeowConfig.isMultiTenant&&!1===esriGeowConfig.isMultiTenant;this.userUtil.getUserProperties(esriGeowConfig.userInfo).then(function(d){esriGeowConfig.userProperties=d;arcgisonline.sharing.geow.Account.getSelf(D.hitch(g,arcgisonline.init.initPage),
D.hitch(arcgisonline.init,arcgisonline.init.initPage))})},unhide:function(){document.body.classList.remove("hide")},initSanitizer:function(){var b=arcgisonline.init;b.sanitizer=new esri.libs.sanitizer.Sanitizer(b.orgUtil.orgSettingsSanitizerParams,!0);b.sanitizer.sanitizeUrl=b.orgUtil.sanitizeUrlOrgOverride;b.orgUtil.adjustSanitizerForOrgSettingsUse(b.sanitizer)},overrideSettings:function(b){var g=arcgisonline.init;g.settings=b;g.isPortal=arcgisonline.sharing.util.isPortal();if(g.settings.id&&0<g.settings.id.length){g.isOrg=
!0;var d=D.byId("headerTitle");d&&d.parentNode.removeChild(d)}g.isPortal&&g.getFederatedServers();b.allSSL&&(g.allSSL=b.allSSL);b.portalName&&(esriGeowConfig.portalName=b.portalName);b.portalHostname&&(esriGeowConfig.portalHostname=b.portalHostname);b.portalHeaderImage&&(esriGeowConfig.portalHeaderImage=b.portalHeaderImage);b.homePageFeaturedContent?esriGeowConfig.homePageFeaturedContent=b.homePageFeaturedContent:g.isOrg&&(esriGeowConfig.homePageFeaturedContent=null);esri.isDefined(b.homePageFeaturedContentCount)&&
(esriGeowConfig.homePageFeaturedContentCount=b.homePageFeaturedContentCount);if(b.rotatorPanels)if(g.isOrg){esriGeowConfig.rotatorPanels=b.rotatorPanels;d=esriGeowConfig.rotatorPanels;for(var e,f,n,h=0;h<d.length;h++)e=d[h],g.isPortal&&"7443"===location.port&&-1===esriGeowConfig.self.portalHostname.indexOf(":7443")&&(f=new RegExp(esriGeowConfig.self.portalHostname,"gi"),f.test(e.innerHTML)&&(n=esriGeowConfig.self.portalHostname.split("/"),n[0]+=":7443",n[1]="arcgis",e.innerHTML=e.innerHTML.replace(f,
n.join("/")))),d[h].innerHTML=e.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl)}else D.create("div",{id:"homeCalciteBanner"},D.byId("matrixLayout")),D.addClass(D.byId("details"),"calcite_home calcite_home_details"),D.addClass(D.byId("matrixLayout"),"calcite_home calcite_home_matrixLayout"),D.addClass(D.byId("homeCalciteBanner"),"calcite_home calcite_home_banner"),D.addClass(D.byId("featuredMaps"),"calcite_home calcite_home_featuredMaps"),D.addClass(D.byId("bottomContent"),"calcite_home calcite_home_bottomContent");
else g.isOrg&&(esriGeowConfig.rotatorPanels=null);g=b.showHomePageDescription;esriGeowConfig.showHomePageDescription=void 0!==g&&null!==g?b.showHomePageDescription:!1},getFederatedServers:function(){var b=arcgisonline.sharing.util.getUser();!esriGeowConfig.federatedServers&&b&&arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/"+esriGeowConfig.self.id+"/servers"}).then(D.hitch(this,function(g){arcgisonline.sharing.util.setFederatedServers((g||{}).servers||[])}))},initOrganization:function(){var b=
arcgisonline.init;esri.hide(D.byId("bottomSection"));if(esriGeowConfig.explorerOnline){var g="http://developers.arcgis.com",d=b.labels.explorerLink,e=b.labels.explorerDescription;b.isSingleTenant&&(g=esriGeowConfig.explorerOnline,d=b.labels.explorerLinkPortal,e=b.labels.explorerDescriptionPortal);D.create("div",{id:"appOrgDiv",innerHTML:'\x3ch2 id\x3d"h2Explore"\x3e\x3ca id\x3d"lnkExplore" class\x3d"explorerLink" href\x3d"'+g+'" target\x3d"_blank" \x3e'+d+'\x3c/a\x3e\x3c/h2\x3e\x3cp id\x3d"pExplore"\x3e'+
e+"\x3c/p\x3e"},D.byId("topRow2"))}g=b.settings.name;d=b.settings.description;e=esriGeowConfig.showHomePageDescription;e=void 0!==e&&null!==e&&!1===e?!1:!0;var f=esri.isDefined(d)&&"\x3cbr\x3e"!==d&&"\x3cbr/\x3e"!==d&&"\x3cbr /\x3e"!==d&&""!==d;f&&e?(D.attr(D.byId("orgDetails"),"innerHTML",b.sanitizer.sanitize(d)),esri.show(D.byId("organizationSection"))):!arcgisonline.sharing.util.isPortal()||f||e||(d='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+(b.settings.helpBase+b.settings.helpMap.m["120000837"])+
'" target\x3d"_blank"\x3e',D.attr(D.byId("orgDetails"),"innerHTML",esri.substitute({linkStart:d,linkEnd:"\x3c/a\x3e\x3c/span\x3e"},b.labels.portalDefaultDesc)),esri.show(D.byId("organizationSection")));d=(d=arcgisonline.sharing.util.getToken())?"?token\x3d"+d:"";e=b.settings.backgroundImage;esri.isDefined(e)?"none"!==e?0===e.indexOf("images/")?D.query("body").addClass("defaultBackground"):(e=esriGeowConfig.restBaseUrl+"portals/self/resources/"+e+d,f=D.query("body.esri")[0],D.style(f,"backgroundImage",
"url('"+e+"')"),D.style(f,"backgroundPosition","top center"),D.style(f,"backgroundRepeat","repeat-x")):D.query("body").addClass("calciteBackground"):D.query("body").addClass("calciteBackground");if(esriGeowConfig.rotatorPanels){D.addClass(D.byId("matrixLayout"),"matrixLayoutShort");D.addClass(D.byId("details"),"detailsShort");g=arcgisonline.sharing.util.getToken();e=esriGeowConfig.rotatorPanels;for(f=0;f<e.length;f++)d=e[f],d.id&&(d.innerHTML=b.allSSL||b.isPortal&&"https:"===location.protocol?d.innerHTML.replace(/http:/g,
"https:"):d.innerHTML),d.innerHTML=d.innerHTML.replace(/CDN_SERVER/gi,esriGeowConfig.cdnServerUrl),d.innerHTML=d.innerHTML.replace("SECURITY_TOKEN",g?g:""),d.innerHTML=b.expandPredefinedImageUrls(d.innerHTML),d.innerHTML=b.expandProtocolAgnosticUrls(d.innerHTML),d.innerHTML=b.sanitizer.sanitize(d.innerHTML);b.createRotator(e)}else e=esriGeowConfig.portalHeaderImage?esriGeowConfig.portalHeaderImage:arcgisonline.sharing.util.relativeToExplicitUrl("images/organizationSplash.jpg"),D.create("img",{id:"headerImage",
src:e},D.byId("matrixLayout")),D.addClass(D.byId("headerImage"),"portalImage"),e=D.create("div",{id:"logoDisplay"},D.byId("matrixLayout")),f="",b.settings&&b.settings.thumbnail&&(f=esriGeowConfig.restBaseUrl+"portals/self/resources/"+b.settings.thumbnail+d,D.create("img",{src:f,alt:g},e)),D.create("span",{innerHTML:g},e),D.addClass(D.byId("matrixLayout"),"matrixLayoutShort"),D.addClass(D.byId("details"),"detailsShort");b.unhide()},expandPredefinedImageUrls:function(b){var g=window.location.href.substring(0,
window.location.href.lastIndexOf("/")+1);b=this.expandPredefinedImageUrl(b,"images/banner-1.jpg",g);b=this.expandPredefinedImageUrl(b,"images/banner-2.jpg",g);b=this.expandPredefinedImageUrl(b,"images/banner-3.jpg",g);b=this.expandPredefinedImageUrl(b,"images/banner-4.jpg",g);b=this.expandPredefinedImageUrl(b,"images/banner-5.jpg",g);b=this.expandPredefinedImageUrl(b,"images/organizationSplash.jpg",g);return b=this.expandPredefinedImageUrl(b,"images/arcgis_background.jpg",g)},expandPredefinedImageUrl:function(b,
g,d){return b.replace('src\x3d"'+g+'"','src\x3d"'+d+g+'"').replace("src\x3d'"+g+"'","src\x3d'"+d+g+"'")},expandProtocolAgnosticUrls:function(b){var g=window.location.protocol;return b.replace('src\x3d"//','src\x3d"'+g+"//").replace("src\x3d'//","src\x3d'"+g+"//")},initPage:function(b,g){var d=arcgisonline.init;esriGeowConfig.userInfo&&d.credential&&(esriGeowConfig.userInfo.credential=d.credential,esriGeowConfig.userInfo.token=d.credential.token);!b||b.code||b.message||d.overrideSettings(b);var e=
arcgisonline.sharing.util.getUser();if(d.isSingleTenant||e&&e.accountId)d.isOrg=!0,(e=D.byId("headerTitle"))&&e.parentNode.removeChild(e);d.isOrg?document.title=d.settings.name:(document.title=esriGeowConfig.portalName||d.labels.arcgis,D.query("body").addClass("defaultBackground"),esriGeowConfig.portalHeaderImage?((e=D.byId("headerTitle"))&&e.parentNode.removeChild(e),D.create("img",{id:"headerImage",src:esriGeowConfig.portalHeaderImage},D.byId("matrixLayout")),D.addClass(D.byId("headerImage"),"portalImage")):
d.createRotator(esriGeowConfig.rotatorPanels));e="";(e=arcgisonline.sharing.util.getUser())&&!e.accountId?(D.attr("signUpLink","innerHTML",d.labels.readyToUse),D.attr("signUpDescription","innerHTML",d.labels.readyToUseDescription),D.query("#signUpLink").attr("href",location.protocol+"//www.esri.com/software/apps")):(-1===esriGeowConfig.signin.indexOf("http")?(e=esriGeowConfig.baseUrl+esriGeowConfig.signin,!1!==esriGeowConfig.useSSL&&(e=e.replace("http:","https:"))):e=esriGeowConfig.signin,D.query("#signUpLink").attr("href",
e));esriGeowConfig.explorerOnline?D.query(".explorerLink").attr("href","http://developers.arcgis.com"):(D.style(D.byId("bottom3Grid"),"display","none"),D.removeClass(D.byId("bottomRow2"),"middle"),D.addClass(D.byId("bottomRow2"),"last"),D.addClass(D.byId("bottom2Grid"),"grid_6"),D.addClass(D.byId("bottom1Grid"),"grid_6"));D.style("page-border","visibility","visible");esriGeowConfig.homePageFeaturedContent?d.getGroup(esriGeowConfig.homePageFeaturedContent):esri.hide(D.byId("featuredMaps"));d.isOrg?
d.initOrganization():d.unhide()},createRotator:function(b){var g=new a.widget.AutoRotator({transition:"dojox.widget.rotator.crossFade",duration:1E4,panes:b,autoStart:!0,pauseOnManualChange:!0,cycles:12,suspendOnHover:!0},D.byId("imgRotator"));new a.widget.rotator.Controller({rotator:g,commands:"#"},D.byId("categories"));b&&1===b.length&&D.style("categories","display","none")},getNextElementSibling:function(b){if(b.nextElementSibling)return b.nextElementSibling;for(;b.nextSibling;){if(1===b.nextSibling.nodeType)return b.nextSibling;
b=b.nextSibling}},getGroup:function(b){b={q:b,f:"json",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/groups",content:b}).then(D.hitch(arcgisonline.init,arcgisonline.init.getGroupContent),D.hitch(arcgisonline.init,arcgisonline.init.getGroupContent))},getGroupContent:function(b){if(b&&b.results&&b.results[0]){for(var g=0,d=b.results[g];b.results.length>g+1&&!(-1<b.query.indexOf('"'+d.title+'"'));)g++,d=b.results[g];D.byId("galleryTitle").innerHTML=
d.title;0===esriGeowConfig.homePageFeaturedContentCount?this.showAllGroupItems(d):(b={q:"group:"+d.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:esriGeowConfig.homePageFeaturedContentCount,sortField:d.sortField?d.sortField:"modified",sortOrder:d.sortOrder?d.sortOrder:"desc",ts:(new Date).getTime()},arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:b}).then(D.hitch(arcgisonline.init,
arcgisonline.init.createGallery),function(e){}))}else esri.hide(D.byId("featuredMaps"))},showAllGroupItems:function(b){var g={q:"group:"+b.id+' -(type:"Code Attachment" OR type:"Windows Viewer Add In" OR type:"Windows Viewer Configuration" OR type:"Map Area") -typekeywords:"MapAreaPackage"',f:"json",num:100,sortField:b.sortField?b.sortField:"modified",sortOrder:b.sortOrder?b.sortOrder:"desc",ts:(new Date).getTime()};arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:g}).then(D.hitch(this,
function(d){var e={results:d.results},f=0;f=0;if(0<d.nextStart){f=d.total-d.results.length;f=Math.ceil(f/100);var n=[];d=d.nextStart;for(var h=0;h<f;h++)g.start=d+100*h,n.push(arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"search",content:g}));(new D.DeferredList(n)).then(D.hitch(this,function(k){D.forEach(k,D.hitch(this,function(c){c[1]&&c[1].results&&(e.results=e.results.concat(c[1].results))}));this.createGallery(e)}),D.hitch(this,function(k){this.createGallery(e)}))}else this.createGallery(e)}),
function(d){})},createGallery:function(b,g){var d=b.results,e=new arcgisonline.sharing.dijit.Gallery({nodesPerPage:4,showThumbnailInDetails:!1,showToolTip:!1,showPageControls:!1,fadeOutOtherNodes:!0,noResultsMessage:D.string.substitute(arcgisonline.sharing.dijit._Empty,{message:arcgisonline.init.labels.noContentAvailable,width:96})},"gallery");D.connect(e,"onContentChange",function(){d.length<=e.nodesPerPage&&(esriGeowConfig.isRightToLeft?(D.removeClass("next","prevButtonEnabled"),D.addClass("next",
"prevButtonDisabled")):(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")))});e.set("items",d);esriGeowConfig.isRightToLeft?(D.connect(D.byId("prev"),"click, keyup",e,e.nextPage),D.connect(D.byId("next"),"click, keyup",e,e.prevPage),D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.connect(D.byId("prev"),"click, keyup",e,e.prevPage),D.connect(D.byId("next"),"click, keyup",e,e.nextPage),D.removeClass("prev","prevButtonEnabled"),D.addClass("prev",
"prevButtonDisabled"));D.connect(e,"onPageChange",function(f){arcgisonline.init.galleryNodeMap={};esriGeowConfig.isRightToLeft?(1===f?(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.removeClass("next","nextButtonDisabled"),D.addClass("next","nextButtonEnabled")),f===e.pageCount?(D.removeClass("prev","prevButtonEnabled"),D.addClass("prev","prevuttonDisabled")):(D.removeClass("prev","prevButtonDisabled"),D.addClass("prev","prevButtonEnabled"))):(1===f?(D.removeClass("prev",
"prevButtonEnabled"),D.addClass("prev","prevButtonDisabled")):(D.removeClass("prev","prevButtonDisabled"),D.addClass("prev","prevButtonEnabled")),f===e.pageCount?(D.removeClass("next","nextButtonEnabled"),D.addClass("next","nextButtonDisabled")):(D.removeClass("next","nextButtonDisabled"),D.addClass("next","nextButtonEnabled")))});D.connect(e,"onNodeMouseEnter",function(f,n){var h=arcgisonline.init,k=f.currentTarget,c=arcgisonline.sharing.util.getUser();D.query("a",k).forEach(function(l){if(!h.galleryNodeMap[n.id]){var r=
arcgisonline.sharing.util.getHomePageGalleryLinkInfo(n),m=!1;r.href&&-1<r.href.toLowerCase().indexOf("javascript")&&n.url&&("Web Mapping Application"===n.type||"Mobile Application"===n.type||"Document Link"===n.type||"Site Application"===n.type||"Hub Site Application"===n.type||"StoryMap"===n.type)&&(r.href=n.url,m=!0);if("CityEngine Web Scene"===n.type||"Dashboard"===n.type||"Operation View"===n.type)m=!0;if(r&&r.href&&"JavaScript:void(0)"===r.href&&r.onclick)D.connect(l,"onclick",r.onclick);else{if(!c&&
"self"!==n.contentOrigin&&"public"===n.access&&r.href){var q=r.href.indexOf("/apps/");0===q?r.href="https://"+esriGeowConfig.self.portalHostname+r.href:0<r.href.indexOf(window.location.host+arcgisonline.sharing.util.getHomeAppContext())&&0<q?r.href="https://"+esriGeowConfig.self.portalHostname+r.href.substring(q):-1<r.href.indexOf(".arcgis.com")&&(q=r.href.split(".arcgis.com"),r.href="https://"+esriGeowConfig.self.portalHostname+q[q.length-1])}D.attr(l,"href",r.href)}D.attr(l,"target",m?"_blank":
"");h.galleryNodeMap[n.id]=!0}})})}})})},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(D,A,a){D.DeferredList=function(b,g,d,e,f){var n=[];A.call(this);var h=this;0!==b.length||g||this.resolve([0,[]]);var k=0;a.forEach(b,function(c,l){function r(m,q){n[l]=[m,q];k++;k===b.length&&h.resolve(n)}c.then(function(m){g?h.resolve([l,m]):r(!0,m)},function(m){d?h.reject(m):r(!1,m);if(e)return null;throw m;})})};D.DeferredList.prototype=new A;D.DeferredList.prototype.gatherResults=
function(b){b=new D.DeferredList(b,!1,!0,!1);b.addCallback(function(g){var d=[];a.forEach(g,function(e){d.push(e[1])});return d});return b};return D.DeferredList})},"arcgisonline/sharing/dijit/_Empty":function(){define(["dojo/text!./templates/_Empty.html"],function(D){return D})},"esri/libs/sanitizer/Sanitizer":function(){!function(D,A){"object"==typeof exports&&"undefined"!=typeof module?module.exports=A():"function"==typeof define&&define.amd?define(A):(D="undefined"!=typeof globalThis?globalThis:
D||self).Sanitizer=A()}(this,function(){function D(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,
"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,
"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,
"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,
cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,"float":!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,
"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,
"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,
"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,
"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,
"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,
"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,
"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,
"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}function A(ra){var Aa=ra||{},ua={},Ja;for(Ja in Aa)ua[Ja]=Aa[Ja];(ra=ua).whiteList=ra.whiteList||H.whiteList;ra.onAttr=ra.onAttr||H.onAttr;ra.onIgnoreAttr=ra.onIgnoreAttr||H.onIgnoreAttr;ra.safeAttrValue=ra.safeAttrValue||H.safeAttrValue;this.options=ra}function a(ra){return ra.replace(M,"\x26lt;").replace(N,"\x26gt;")}function b(ra){return ra.replace(K,"\x26quot;")}function g(ra){return ra.replace(X,'"')}function d(ra){return ra.replace(da,
function(Aa,ua){return"x"===ua[0]||"X"===ua[0]?String.fromCharCode(parseInt(ua.substr(1),16)):String.fromCharCode(parseInt(ua,10))})}function e(ra){return ra.replace(Y,":").replace(aa," ")}function f(ra){for(var Aa="",ua=0,Ja=ra.length;ua<Ja;ua++)Aa+=32>ra.charCodeAt(ua)?" ":ra.charAt(ua);return P.trim(Aa)}function n(ra){return ra=f(ra=e(ra=d(ra=g(ra))))}function h(ra){return ra=a(ra=b(ra))}function k(ra,Aa){for(;Aa<ra.length;Aa++){var ua=ra[Aa];if(" "!==ua)return"\x3d"===ua?Aa:-1}}function c(ra,
Aa){for(;0<Aa;Aa--){var ua=ra[Aa];if(" "!==ua)return"\x3d"===ua?Aa:-1}}function l(ra){return'"'===ra[0]&&'"'===ra[ra.length-1]||"'"===ra[0]&&"'"===ra[ra.length-1]?ra.substr(1,ra.length-2):ra}function r(ra){var Aa=ra||{},ua={},Ja;for(Ja in Aa)ua[Ja]=Aa[Ja];(ra=ua).stripIgnoreTag&&(ra.onIgnoreTag=Ha.onIgnoreTagStripAll);ra.whiteList=ra.whiteList||Ha.whiteList;ra.onTag=ra.onTag||Ha.onTag;ra.onTagAttr=ra.onTagAttr||Ha.onTagAttr;ra.onIgnoreTag=ra.onIgnoreTag||Ha.onIgnoreTag;ra.onIgnoreTagAttr=ra.onIgnoreTagAttr||
Ha.onIgnoreTagAttr;ra.safeAttrValue=ra.safeAttrValue||Ha.safeAttrValue;ra.escapeHtml=ra.escapeHtml||Ha.escapeHtml;this.options=ra;!1===ra.css?this.cssFilter=!1:(ra.css=ra.css||{},this.cssFilter=new Da(ra.css))}var m,q,v=Object.prototype,B=Function.prototype.toString,w=v.hasOwnProperty,z=B.call(Object),x=v.toString,y=(m=Object.getPrototypeOf,q=Object,function(ra){return m(q(ra))}),u=function(ra){var Aa;if(!(Aa=!ra||"object"!=typeof ra||"[object Object]"!=x.call(ra))&&(Aa=!1,null!=ra&&"function"!=typeof ra.toString))try{Aa=
!!(ra+"")}catch(ua){}if(Aa)return!1;ra=y(ra);if(null===ra)return!0;ra=w.call(ra,"constructor")&&ra.constructor;return"function"==typeof ra&&ra instanceof ra&&B.call(ra)==z},t={exports:{}},C={};v={exports:{}};var E={},F=/javascript\s*:/gim;E.whiteList=D();E.getDefaultWhiteList=D;E.onAttr=function(ra,Aa,ua){};E.onIgnoreAttr=function(ra,Aa,ua){};E.safeAttrValue=function(ra,Aa){return F.test(Aa)?"":Aa};var G={indexOf:function(ra,Aa){var ua;if(Array.prototype.indexOf)return ra.indexOf(Aa);var Ja=0;for(ua=
ra.length;Ja<ua;Ja++)if(ra[Ja]===Aa)return Ja;return-1},forEach:function(ra,Aa,ua){var Ja;if(Array.prototype.forEach)return ra.forEach(Aa,ua);var ha=0;for(Ja=ra.length;ha<Ja;ha++)Aa.call(ua,ra[ha],ha,ra)},trim:function(ra){return String.prototype.trim?ra.trim():ra.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(ra){return String.prototype.trimRight?ra.trimRight():ra.replace(/(\s*$)/g,"")}},H=E,L=function(ra,Aa){function ua(){if(!ha){var ea=G.trim(ra.slice(ma,R)),Ya=ea.indexOf(":");if(-1!==Ya){var Xa=
G.trim(ea.slice(0,Ya));Ya=G.trim(ea.slice(Ya+1));Xa&&(ea=Aa(ma,Ea.length,Xa,Ya,ea))&&(Ea+=ea+"; ")}}ma=R+1}";"!==(ra=G.trimRight(ra))[ra.length-1]&&(ra+=";");for(var Ja=ra.length,ha=!1,ma=0,R=0,Ea="";R<Ja;R++){var Ia=ra[R];if("/"===Ia&&"*"===ra[R+1]){Ia=ra.indexOf("*/",R+2);if(-1===Ia)break;ma=(R=Ia+1)+1;ha=!1}else"("===Ia?ha=!0:")"===Ia?ha=!1:";"===Ia?ha||ua():"\n"===Ia&&ua()}return G.trim(Ea)};A.prototype.process=function(ra){if(!(ra=(ra=ra||"").toString()))return"";var Aa=this.options,ua=Aa.whiteList,
Ja=Aa.onAttr,ha=Aa.onIgnoreAttr,ma=Aa.safeAttrValue;return L(ra,function(R,Ea,Ia,ea,Ya){var Xa=ua[Ia],Ba=!1;if(!0===Xa?Ba=Xa:"function"==typeof Xa?Ba=Xa(ea):Xa instanceof RegExp&&(Ba=Xa.test(ea)),!0!==Ba&&(Ba=!1),ea=ma(Ia,ea)){var U;R={position:Ea,sourcePosition:R,source:Ya,isWhite:Ba};return Ba?null==(U=Ja(Ia,ea,R))?Ia+":"+ea:U:null==(U=ha(Ia,ea,R))?void 0:U}})};!function(ra,Aa){for(var ua in(Aa=ra.exports=function(Ja,ha){return(new A(ha)).process(Ja)}).FilterCSS=A,E)Aa[ua]=E[ua]}(v,v.exports);var J=
{indexOf:function(ra,Aa){var ua;if(Array.prototype.indexOf)return ra.indexOf(Aa);var Ja=0;for(ua=ra.length;Ja<ua;Ja++)if(ra[Ja]===Aa)return Ja;return-1},forEach:function(ra,Aa,ua){var Ja;if(Array.prototype.forEach)return ra.forEach(Aa,ua);var ha=0;for(Ja=ra.length;ha<Ja;ha++)Aa.call(ua,ra[ha],ha,ra)},trim:function(ra){return String.prototype.trim?ra.trim():ra.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(ra){return(ra=/\s|\n|\t/.exec(ra))?ra.index:-1}},S=v.exports.getDefaultWhiteList,P=J,Q=new v.exports.FilterCSS,
M=/</g,N=/>/g,K=/"/g,X=/&quot;/g,da=/&#([a-zA-Z0-9]*);?/gim,Y=/&colon;?/gim,aa=/&newline;?/gim,ca=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,I=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,T=/u\s*r\s*l\s*\(.*/gi,ba=/\x3c!--[\s\S]*?--\x3e/g;C.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],
bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],
strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")};C.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords",
"href","alt"],article:[],aside:[],audio:"autoplay controls crossorigin loop muted preload src".split(" "),b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width",
"height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls crossorigin loop muted playsinline poster preload src height width".split(" ")}};
C.onTag=function(ra,Aa,ua){};C.onIgnoreTag=function(ra,Aa,ua){};C.onTagAttr=function(ra,Aa,ua){};C.onIgnoreTagAttr=function(ra,Aa,ua){};C.safeAttrValue=function(ra,Aa,ua,Ja){if(ua=n(ua),"href"===Aa||"src"===Aa){if("#"===(ua=P.trim(ua)))return"#";if("http://"!==ua.substr(0,7)&&"https://"!==ua.substr(0,8)&&"mailto:"!==ua.substr(0,7)&&"tel:"!==ua.substr(0,4)&&"data:image/"!==ua.substr(0,11)&&"ftp://"!==ua.substr(0,6)&&"./"!==ua.substr(0,2)&&"../"!==ua.substr(0,3)&&"#"!==ua[0]&&"/"!==ua[0])return""}else if("background"===
Aa){if(ca.lastIndex=0,ca.test(ua))return""}else if("style"===Aa){if((I.lastIndex=0,I.test(ua))||(T.lastIndex=0,T.test(ua)&&(ca.lastIndex=0,ca.test(ua))))return"";!1!==Ja&&(ua=(Ja=Ja||Q).process(ua))}return ua=h(ua)};C.escapeHtml=a;C.escapeQuote=b;C.unescapeQuote=g;C.escapeHtmlEntities=d;C.escapeDangerHtml5Entities=e;C.clearNonPrintableCharacter=f;C.friendlyAttrValue=n;C.escapeAttrValue=h;C.onIgnoreTagStripAll=function(){return""};C.StripTagBody=function(ra,Aa){"function"!=typeof Aa&&(Aa=function(){});
var ua=!Array.isArray(ra),Ja=[],ha=!1;return{onIgnoreTag:function(ma,R,Ea){return ua||-1!==P.indexOf(ra,ma)?Ea.isClosing?(Ja.push([!1!==ha?ha:Ea.position,Ea.position+10]),ha=!1,"[/removed]"):(ha||(ha=Ea.position),"[removed]"):Aa(ma,R,Ea)},remove:function(ma){var R="",Ea=0;return P.forEach(Ja,function(Ia){R+=ma.slice(Ea,Ia[0]);Ea=Ia[1]}),R+=ma.slice(Ea)}}};C.stripCommentTag=function(ra){return ra.replace(ba,"")};C.stripBlankChar=function(ra){ra=ra.split("");return(ra=ra.filter(function(Aa){Aa=Aa.charCodeAt(0);
return 127!==Aa&&(!(31>=Aa)||10===Aa||13===Aa)})).join("")};C.cssFilter=Q;C.getDefaultCSSWhiteList=S;var pa={},ya=/[^a-zA-Z0-9_:\.\-]/gim;pa.parseTag=function(ra,Aa,ua){var Ja="",ha=0,ma=!1,R=!1,Ea=0,Ia=ra.length,ea="",Ya="";Ea=0;a:for(;Ea<Ia;Ea++)if(Ya=ra.charAt(Ea),!1===ma)"\x3c"===Ya&&(ma=Ea);else if(!1===R)if("\x3c"===Ya)Ja+=ua(ra.slice(ha,Ea)),ha=ma=Ea;else if("\x3e"===Ya)Ja+=ua(ra.slice(ha,ma)),ha=Ya=ra.slice(ma,Ea+1),ea=J.spaceIndex(ha),ha=-1===ea?ha.slice(1,-1):ha.slice(1,ea+1),ea=("/"===
(ha=J.trim(ha).toLowerCase()).slice(0,1)&&(ha=ha.slice(1)),"/"===ha.slice(-1)&&(ha=ha.slice(0,-1)),ha),Ja+=Aa(ma,Ja.length,ea,Ya,"\x3c/"===Ya.slice(0,2)),ha=Ea+1,ma=!1;else{if('"'===Ya||"'"===Ya){ea=1;for(var Xa=ra.charAt(Ea-ea);""===Xa.trim()||"\x3d"===Xa;){if("\x3d"===Xa){R=Ya;continue a}Xa=ra.charAt(Ea-++ea)}}}else Ya===R&&(R=!1);return ha<ra.length&&(Ja+=ua(ra.substr(ha))),Ja};pa.parseAttr=function(ra,Aa){function ua(ea,Ya){if(!(1>(ea=(ea=J.trim(ea)).replace(ya,"").toLowerCase()).length)){var Xa=
Aa(ea,Ya||"");Xa&&ha.push(Xa)}}for(var Ja=0,ha=[],ma=!1,R=ra.length,Ea=0;Ea<R;Ea++){var Ia=ra.charAt(Ea);if(!1!==ma||"\x3d"!==Ia)if(!1===ma||Ea!==Ja||'"'!==Ia&&"'"!==Ia||"\x3d"!==ra.charAt(Ea-1))/\s|\n|\t/.test(Ia)&&((ra=ra.replace(/\s|\n|\t/g," "),!1===ma)?-1===(Ia=k(ra,Ea))?(ua(J.trim(ra.slice(Ja,Ea))),ma=!1,Ja=Ea+1):Ea=Ia-1:-1===(Ia=c(ra,Ea-1))&&(ua(ma,l(J.trim(ra.slice(Ja,Ea)))),ma=!1,Ja=Ea+1));else{if(-1===(Ia=ra.indexOf(Ia,Ea+1)))break;ua(ma,J.trim(ra.slice(Ja+1,Ia)));ma=!1;Ja=(Ea=Ia)+1}else ma=
ra.slice(Ja,Ea),Ja=Ea+1}return Ja<ra.length&&(!1===ma?ua(ra.slice(Ja)):ua(ma,l(J.trim(ra.slice(Ja))))),J.trim(ha.join(" "))};var Da=v.exports.FilterCSS,Ha=C,ta=pa.parseTag,xa=pa.parseAttr;r.prototype.process=function(ra){if(!(ra=(ra=ra||"").toString()))return"";var Aa=this.options,ua=Aa.whiteList,Ja=Aa.onTag,ha=Aa.onIgnoreTag,ma=Aa.onTagAttr,R=Aa.onIgnoreTagAttr,Ea=Aa.safeAttrValue,Ia=Aa.escapeHtml,ea=this.cssFilter;Aa.stripBlankChar&&(ra=Ha.stripBlankChar(ra));Aa.allowCommentTag||(ra=Ha.stripCommentTag(ra));
var Ya=!1;Aa.stripIgnoreTagBody&&(Ya=Ha.StripTagBody(Aa.stripIgnoreTagBody,ha),ha=Ya.onIgnoreTag);ra=ta(ra,function(Xa,Ba,U,la,na){Ba={sourcePosition:Xa,position:Ba,isClosing:na,isWhite:ua.hasOwnProperty(U)};if(null!=(Xa=Ja(U,la,Ba)))return Xa;if(Ba.isWhite){if(Ba.isClosing)return"\x3c/"+U+"\x3e";Xa=function(fa){var qa=J.spaceIndex(fa);if(-1===qa)return{html:"",closing:"/"===fa[fa.length-2]};qa="/"===(fa=J.trim(fa.slice(qa+1,-1)))[fa.length-1];return qa&&(fa=J.trim(fa.slice(0,-1))),{html:fa,closing:qa}}(la);
var V=ua[U];Ba=xa(Xa.html,function(fa,qa){var va,Fa=-1!==J.indexOf(V,fa);return null==(va=ma(U,fa,qa,Fa))?Fa?(qa=Ea(U,fa,qa,ea))?fa+'\x3d"'+qa+'"':fa:null==(va=R(U,fa,qa,Fa))?void 0:va:va});la="\x3c"+U;return Ba&&(la+=" "+Ba),Xa.closing&&(la+=" /"),la+="\x3e"}return null==(Xa=ha(U,la,Ba))?Ia(la):Xa},Ia);return Ya&&(ra=Ya.remove(ra)),ra};return function(ra,Aa){function ua(ma,R){return(new Ja(R)).process(ma)}var Ja=r,ha;for(ha in(Aa=ra.exports=ua).filterXSS=ua,Aa.FilterXSS=Ja,C)Aa[ha]=C[ha];for(ha in pa)Aa[ha]=
pa[ha];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=ra.exports)}(t,t.exports),function(){function ra(Aa,ua){var Ja,ha=this;this.arcgisWhiteList={a:["href","target","style"],abbr:["title"],img:"src width height border alt style".split(" "),video:"autoplay controls height loop muted poster preload width".split(" "),audio:["autoplay","controls","loop","muted","preload"],source:["media","src","type"],span:["style"],
table:"width height cellpadding cellspacing border style".split(" "),div:["style","align"],font:["size","color","style","face"],tr:["height","valign","align","style"],td:"height width valign align colspan rowspan nowrap style".split(" "),th:"height width valign align colspan rowspan nowrap style".split(" "),p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");
this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(ma,R,Ea,Ia){return"a"===ma&&"href"===R||("img"===ma||"source"===ma)&&"src"===R?ha.sanitizeUrl(Ea):t.exports.safeAttrValue(ma,R,Ea,Ia)}};Aa&&!ua?Ja=Aa:Aa&&ua?(Ja=Object.create(this.arcgisFilterOptions),Object.keys(Aa).forEach(function(ma){"whiteList"===ma?Ja.whiteList=ha._extendObjectOfArrays([ha.arcgisWhiteList,Aa.whiteList||{}]):Ja[ma]=Aa[ma]})):(Ja=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=
Ja;this._xssFilter=new t.exports.FilterXSS(Ja)}return ra.prototype.sanitize=function(Aa,ua){switch(void 0===ua&&(ua={}),typeof Aa){case "number":return isNaN(Aa)||!isFinite(Aa)?null:Aa;case "boolean":return Aa;case "string":return this._xssFilter.process(Aa);case "object":return this._iterateOverObject(Aa,ua);default:if(!ua.allowUndefined||void 0!==Aa)return null}},ra.prototype.sanitizeUrl=function(Aa){var ua=this._trim(Aa.substring(0,Aa.indexOf(":")));return"/"===Aa||"#"===Aa||"#"===Aa[0]||-1<this.allowedProtocols.indexOf(ua.toLowerCase())?
t.exports.escapeAttrValue(Aa):""},ra.prototype.sanitizeHTMLAttribute=function(Aa,ua,Ja,ha){return"function"==typeof this.xssFilterOptions.safeAttrValue?this.xssFilterOptions.safeAttrValue(Aa,ua,Ja,ha):t.exports.safeAttrValue(Aa,ua,Ja,ha)},ra.prototype.validate=function(Aa,ua){void 0===ua&&(ua={});var Ja=this.sanitize(Aa,ua);return{isValid:Aa===Ja,sanitized:Ja}},ra.prototype._extendObjectOfArrays=function(Aa){var ua={};return Aa.forEach(function(Ja){Object.keys(Ja).forEach(function(ha){Array.isArray(Ja[ha])&&
Array.isArray(ua[ha])?ua[ha]=ua[ha].concat(Ja[ha]):ua[ha]=Ja[ha]})}),ua},ra.prototype._iterateOverObject=function(Aa,ua){var Ja=this;void 0===ua&&(ua={});try{var ha=!1,ma=void 0;if(Array.isArray(Aa))ma=Aa.reduce(function(R,Ea){var Ia=Ja.validate(Ea,ua);return Ia.isValid?R.concat([Ea]):(ha=!0,R.concat([Ia.sanitized]))},[]);else{if(!u(Aa))return ua.allowUndefined&&void 0===Aa?void 0:null;ma=Object.keys(Aa).reduce(function(R,Ea){var Ia=Aa[Ea],ea=Ja.validate(Ia,ua);return ea.isValid?R[Ea]=Ia:(ha=!0,R[Ea]=
ea.sanitized),R},{})}return ha?ma:Aa}catch(R){return null}},ra.prototype._trim=function(Aa){return String.prototype.trim?Aa.trim():Aa.replace(/(^\s*)|(\s*$)/g,"")},ra}()})},"arcgisonline/pages/utils/organization":function(){define("require exports tslib dojo/Deferred dojo/cookie dojo/json dojo/string dojo/i18n!../../nls/arcgisonline dojo/io-query dojo/_base/kernel moment/moment ../../esriGeowConfig ./formatters ./arrays ./subscription ../../sharing/geow/Roles ../../sharing/util".split(" "),function(D,
A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);var B=D.toUrl("arcgisonline/sharing/dijit")+"/css/images/app-icons/";return function(){function w(){}w.isMobile=function(){return 720>=window.innerWidth};
w.getCompatibleUserTypes=function(z,x,y){var u=[];x.forEach(function(t){var C=!1,E=!1;z.isPro&&t.apps.forEach(function(L){L.isAppBundle||L.entitlements.forEach(function(J){if(-1!==w._proKeys.indexOf(J)){-1!==w._proKeys.indexOf(z.key)&&(E=!0);var S=null===y||void 0===y?void 0:y.filter(function(P){return P.key===J})[0];S&&w.isProExtension(z.key)&&-1!==S.extNotSupported.indexOf(z.key)&&(C=!0)}})});var F=!1,G=!1,H=!1;t.apps.forEach(function(L){z.isAppBundle&&L.isAppBundle&&L.id===z.itemId&&(F=!0);z.isAppBundle||
L.isAppBundle||L.id!==z.itemId||-1===L.entitlements.indexOf(z.key)?!z.isAppBundle&&L.isAppBundle&&L.apps.some(function(S){return-1!==S.entitlements.indexOf(z.key)})&&(G=!0):G=!0;var J=z.requiredListings;0<(null===J||void 0===J?void 0:J.length)?L.isAppBundle?L.apps.some(function(S){return-1<J.indexOf(S.id)})&&(H=!0):-1<J.indexOf(L.id)&&(H=!0):H=!0});!(-1===z.allowedLevels.indexOf(t.level)&&0!==z.allowedLevels.length||C||E||F||G)&&0<t.maxUsers&&H&&!t.supportsSignInOnlyFromUTApps&&u.push(t)});return u};
w.isBusinessAnalyst=function(z){return"ArcGIS Business Analyst Web and Mobile Apps"===z||-1<this.baKeys.indexOf(z)};w.isDrone2Map=function(z){return"ArcGIS Drone2Map"===z||-1<this.droneKeys.indexOf(z)};w.userTypePassesRequired=function(z,x){var y=x.requiredListings;if(!y||0===y.length)return!0;var u=!1;return z.apps.some(function(t){t.isAppBundle?t.apps.some(function(C){return-1<y.indexOf(C.id)})&&(u=!0):-1<y.indexOf(t.id)&&(u=!0);return u})};w.checkPasswordStrength=function(z){return v["default"].request({url:v["default"].getSecureUrl(c["default"].restBaseUrl+
"portals/checkPasswordStrength"),content:{password:z}},{usePost:!0})};w.getSubscriptionInfo=function(){return v["default"].request({url:v["default"].getSecureUrl(c["default"].restBaseUrl+"portals/self/subscriptionInfo")})};w.filterRoles=function(z,x,y,u,t){var C=[],E=a.__spreadArray(a.__spreadArray([],q["default"].extraLevelOnePrivileges),x.privileges);"11"===u&&E.push("features:user:edit");z.forEach(function(F){if(y||!y&&x&&F.privileges&&!q["default"].exceedsRolePrivileges(E,F.privileges))t?C.push(F):
C.push({name:F.name,role:F.id,description:F.description})});return C};w.alreadyIncludedInUserType=function(z,x){var y,u=0<z.apps.filter(function(t){return x.itemId===t.id}).length;z.apps.forEach(function(t){t.isAppBundle&&t.apps.forEach(function(C){C.id===x.itemId&&(u=!0)})});(null!==(y=z.extensions)&&void 0!==y?y:[]).some(function(t){(t=t.id===x.itemId)&&(u=!0);return t});return u};w.convertAppBundletoEntitlement=function(z){return z.map(function(x){return{key:x.appBundleItemId,itemId:x.appBundleItemId,
title:x.name,used:x.assigned,total:x.maxUsers,isAppBundle:!0,apps:x.apps,allowedLevels:x.allowedLevels,usernames:x.usernames}})};w.transformAppBundleApps=function(z,x,y){var u=[];z.forEach(function(t){var C,E,F;if(1>=(null===(C=t.entitlements)||void 0===C?void 0:C.length)){if(C=((null===(E=w._appSwitcherResponse)||void 0===E?void 0:E.apps)||[]).filter(function(G){return G.entitlement===t.entitlements[0]})[0],y||null===C||void 0===C||!C.hidden)C&&(t.title=C.shortLabel||C.title||t.title||""),u.push(t)}else null===
(F=t.entitlements)||void 0===F?void 0:F.forEach(function(G){var H,L=((null===(H=w._appSwitcherResponse)||void 0===H?void 0:H.apps)||[]).filter(function(J){return G&&J.entitlement===G})[0];(null===L||void 0===L?0:L.title)&&!L.hidden&&(H=a.__assign(a.__assign({},t),{title:L.shortLabel||L.title}),u.push(H))})});return u};w.initLicensesConfig=function(z){var x=new b["default"];z||x.resolve();w.queryAppSwitcherItem(z).then(function(y){var u;0<(null===(u=y.items)||void 0===u?void 0:u.length)?(y=y.items[0],
w.licensesConfigItem=y,w.getAppSwitcherConfig(y,z).then(function(){x.resolve()})):x.resolve()});return x};w.clearLicensesConfigCache=function(){w._appSwitcherSearchResponse=void 0;w._appSwitcherSearchDfd=void 0;w._appSwitcherResponse=void 0;w._appSwitcherConfigDfd=void 0};w.queryAppSwitcherItem=function(z){var x=new b["default"];w._appSwitcherSearchResponse?x.resolve(w._appSwitcherSearchResponse):w._appSwitcherSearchDfd?w._appSwitcherSearchDfd.then(function(y){x.resolve(y)}):(w._appSwitcherSearchDfd=
x,z.queryItems(c["default"].licensesItemQuery,!0).then(function(y){w._appSwitcherSearchResponse=y;x.resolve(y)},function(y){w._appSwitcherSearchResponse={};x.resolve({})}));return x};w.getAppSwitcherConfig=function(z,x){var y=new b["default"];w._appSwitcherResponse?y.resolve(w._appSwitcherResponse):w._appSwitcherConfigDfd?w._appSwitcherConfigDfd.then(function(u){y.resolve(u)}):(w._appSwitcherConfigDfd=y,v["default"].request({url:z.itemDataUrl}).then(function(u){w._appSwitcherResponse=u;w.licensesConfig=
u;u.appSwitcher&&(w._apps=u.appSwitcher.apps);y.resolve(u)},function(u){w._appSwitcherResponse={};y.resolve({})}));return y};w.isEntitlement=function(z){return void 0!==z.key||void 0!==z.itemId};w.getAppIconDir=function(){return B};w.getAppIcon=function(z,x){function y(S){F.imagePath="svg-app-icon.svg";F.abbr=S.title.substring(0,1);F.showAbbr=!0;F.abbrClass="";F.ordinal=1;F.shapeClass=""}function u(S){var P=L.filter(function(Q){var M,N;return Q.entitlement&&1===(null===(M=S.entitlements)||void 0===
M?void 0:M.length)&&Q.entitlement===(null===(N=S.entitlements)||void 0===N?void 0:N[0])||Q.title&&Q.title===S.title||Q.shortLabel&&Q.shortLabel===S.title})[0];-1!==S.title.indexOf("ArcGIS Pro")?(F.imagePath="arcgis-pro.png",F.ordinal=0):(null===P||void 0===P?0:P.image)?(F.imagePath=""+H+P.image,F.ordinal=0,G=!0):P&&!P.image?y(S):(F.imagePath="fieldmapsmobile"===S.id?B+"fieldmaps.png":J?""+H+S.title.replace(/\s/g,"_")+"/icon.png":B+"generic-app.png",F.shapeClass="not-hex",G=!0)}function t(S){var P,
Q,M=L.filter(function(N){return N.entitlement&&N.entitlement===S.key||N.title&&N.title===S.title||N.label&&N.label===S.title||N.shortLabel&&N.shortLabel===S.title})[0];S.isPro||-1!==S.title.indexOf("ArcGIS Pro")?(F.imagePath="arcgis-pro.png",F.ordinal=0):(null===M||void 0===M?0:M.image)?(F.imagePath=""+H+M.image,F.ordinal=0,G=!0):M&&!M.image?y(S):(F.shapeClass="not-hex",S.icon?(F.imagePath=c["default"].restBaseUrl+"portals/self/resources/"+S.icon+"?token\x3d"+c["default"].userInfo.token,G=!0,F.ordinal=
2):(null===(Q=null===(P=S.properties)||void 0===P?void 0:P.appSwitcher)||void 0===Q?0:Q.image)?(F.imagePath="https://"+c["default"].self.portalHostname+"/sharing/rest/content/items/"+S.itemId+"/resources/"+S.properties.appSwitcher.image+"?token\x3d"+c["default"].userInfo.token,G=!0,F.ordinal=2):"esri"===S.owner||"esri_apps"===S.owner||S.isAppBundle?(F.imagePath=J?""+H+S.title.replace(/\s/g,"_")+"/icon.png":B+"generic-app.png",G=!0):(F.imagePath=x,F.showAbbr=!0,F.abbrClass="",F.ordinal=3))}var C,E,
F={abbrClass:"hide",showAbbr:!1,abbr:"",shapeClass:""},G=!1,H=c["default"].restBaseUrl+"content/items/"+(null===(C=w.licensesConfigItem)||void 0===C?void 0:C.id)+"/resources/",L=(null===(E=w._appSwitcherResponse)||void 0===E?void 0:E.apps)||[];if("User License Type Extension"===z.type){C=L.filter(function(S){return S.entitlement&&S.entitlement===z.key||S.title&&S.title===z.title})[0];E=v["default"].isPortal()?B+"user-type-extension.png":B+"user-type-extension-online.png";if(null===C||void 0===C?0:
C.image)E=""+H+C.image;return a.__assign(a.__assign({},F),{imagePath:E,ordinal:0})}if("Application SDK"===z.type)return a.__assign(a.__assign({},F),{imagePath:B+"runtime.png",ordinal:0});if(z.isExtension)return a.__assign(a.__assign({},F),{imagePath:B+"pro-extension.png",ordinal:0});C=w._getAppSwitcherIcon(z,x);var J=w.licensesConfigItem;x&&0!==x.length||(x="svg-app-circle.svg");C?F=C:(C=a.__assign({},z),-1<C.title.indexOf("ArcGIS Drone2Map")&&(C.title="ArcGIS Drone2Map"),w.isEntitlement(C)?t(C):
u(C));G||(F.imagePath=B+F.imagePath);F.isAppBundle=z.isAppBundle;return F};w.getEmptyAppIcon=function(){return B+"svg-app-icon.svg"};w._getAppSwitcherIcon=function(z,x){if(w._apps){x="svg-app-icon.svg";var y=w._apps.filter(function(t){var C=t.title&&t.title===z.title;w.isEntitlement(z)&&!C&&(C=t.itemId&&t.itemId===z.itemId);return C})[0];if(y){var u={};y.image?(u.imagePath=y.image,u.ordinal=0,u.abbrClass="hide",u.showAbbr=!1,u.abbr=""):(u.imagePath=x,u.abbr=y.abbr,u.showAbbr=!0,u.abbrClass="",u.ordinal=
1);u.shapeClass=""}return u}};w.getUserTypesContainingPro=function(z){return z.filter(function(x){return x.apps?x.apps.some(function(y){return"ArcGIS Pro"===y.title}):!1})};w.userTypeIncludesPro=function(z){var x;return null===(x=null===z||void 0===z?void 0:z.apps)||void 0===x?void 0:x.some(function(y){return"ArcGIS Pro"===y.title})};w.getProFromUserTypes=function(z){var x;z.forEach(function(y){y.apps&&(x=r["default"].find(y.apps,function(u){if("ArcGIS Pro"===u.title)return u}))});return x};w.getProFromAppBundles=
function(z){var x;z.forEach(function(y){x=r["default"].find(y.apps,function(u){if("ArcGIS Pro"===u.title)return u})});return x};w.getProExtensions=function(z){return z.filter(function(x){return-1!==w._proExtensionKeys.indexOf(x.key)})};w.isProExtension=function(z){return-1!==w._proExtensionKeys.indexOf(z)};w.isProKey=function(z){return-1!==w._proKeys.indexOf(z)};w.getProKeys=function(){return w._proKeys};w.filterOutProExtensions=function(z){return z.filter(function(x){return-1===w._proExtensionKeys.indexOf(x.key)})};
w.getProEntitlements=function(z){z=z.filter(function(x){return x.isPro&&-1<w._proKeys.indexOf(x.key)});z.forEach(function(x){"desktopBasicN"===x.key?x.ordinal=0:"desktopStdN"===x.key?x.ordinal=1:"desktopAdvN"===x.key&&(x.ordinal=2)});z.sort(function(x,y){return x.ordinal>y.ordinal?1:x.ordinal<y.ordinal?-1:0});return z};w.getUserRole=function(z){var x;return null!==(x=null===z||void 0===z?void 0:z.userRole)&&void 0!==x?x:{}};w.shouldShowMFA=function(z,x){var y=w.getUserRole(x).isAdmin(),u=!1;!z.isPortal&&
z.subscriptionInfo?(u=m["default"].isDeveloperSubscription(z.subscriptionInfo.type,z.isPortal),u=y&&c["default"].multiFactorEnabled&&z.mfaEnabled&&!u):u=z.isPortal&&z.supportsEmail&&y&&z.mfaEnabled;return u};w.canViewLastLogin=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canViewUsers()};w.canLoadLicensesUI=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canViewOrgUsers()&&z.canManageLicenses()};w.canLoadMembersCard=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canViewUsers()};
w.canManageMembers=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canViewUsers()&&(z.canUpdateUsers()||z.canDeleteUsers()||z.canChangeUserRoles()||z.canManageLicenses())};w.canGetUserTypes=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canInviteUsers()||z.canManageRoles()||z.canManageLicenses()};w.canGetUsersGroups=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canViewUsers()&&z.canViewOrgGroups()};w.canGetLicenseTypes=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canManageLicenses()||
z.canInviteUsers()};w.canSelectMembers=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canViewOrgUsers()&&(z.canDisableUsers()||z.canManageLicenses()||z.canAssignUsersToOrgGroups()||z.canReassignOrgItems())};w.canUseMemberActions=function(z){z=w.getUserRole(z);return z.isAdmin()||z.canUpdateUsers()||z.canDeleteUsers()||z.canDisableUsers()||z.canChangeUserRoles()};w.checkUserCultureSetting=function(z,x){var y=new b["default"],u=n["default"].queryToObject(window.location.search.substring(1)),t=
function(C){var E=-1<["hi"].indexOf(C);!C||h["default"].locale===C.toLowerCase()||E||u.locale?y.resolve():(E=c["default"].userInfo.culture,c["default"].userInfo.username===z.username&&(E&&(null===E||void 0===E?void 0:E.toLowerCase())===C.toLowerCase()||(c["default"].userInfo.culture=C.toLowerCase(),g["default"]("arcgisLocale",c["default"].userInfo.culture,{sameSite:"Strict"})),y.resolve(),window.location.reload()))};x?v["default"].request({url:c["default"].restBaseUrl+"community/users/"+z.username}).then(function(C){return t(C.culture)},
function(){return y.resolve()}):t(z.culture);return y};w.hasRequestedLegacyHomePageExtension=function(z){var x;return!z.isPortal&&!0===(null===(x=z.portalProperties)||void 0===x?void 0:x.extendLegacyHomePage)};w.hasModernHomePageEnabled=function(z){var x,y,u;return z.isPortal?"modern"===(null===(y=z.portalProperties)||void 0===y?void 0:y.homePage)||"modernOnly"===(null===(u=z.portalProperties)||void 0===u?void 0:u.homePage):"modern"===(null===(x=z.portalProperties)||void 0===x?void 0:x.homePage)||
w.isOrgPastLegacyHomePageCutOffDate(z)};w.isOrgPastLegacyHomePageCutOffDate=function(z){var x=(new Date("June 30, 2020")).getTime();return z.isPortal?!1:z.created>=x};w.isEnterpriseSetToModernHomePageOnly=function(z){var x;return z.isPortal&&"modernOnly"===(null===(x=z.portalProperties)||void 0===x?void 0:x.homePage)};w.hasLegacyHomePageDefaults=function(z){var x,y=null===(x=z.rotatorPanels)||void 0===x?void 0:x[0];x=!z.homePageFeaturedContent;var u=!z.description;z=!z.backgroundImage;y=!y||"banner-2"===
(null===y||void 0===y?void 0:y.id)&&-1<y.innerHTML.indexOf('\x3cimg src\x3d"images/banner-2.jpg" style\x3d"border-radius:0 0 10px 10px; margin-top:0; width:960px;height:180px;" /\x3e\x3cdiv style\x3d"position: absolute; bottom: 80px; left:80px; max-height:65px; width: 660px; margin:0;"\x3e\x3cimg src\x3d"')&&-1<y.innerHTML.indexOf(' class\x3d"esriFloatLeading esriTrailingMargin025" style\x3d"margin-bottom:0;max-height:100px;" /\x3e\x3cspan style\x3d"position:absolute;bottom:0;margin-bottom:0;line-height:normal; font-family:HelveticaNeue,Verdana; font-weight:600;font-size:32px;color:#369;"\x3e')&&
-1<(null===y||void 0===y?void 0:y.innerHTML.indexOf("\x3c/span\x3e\x3c/div\x3e"));return u&&z&&y&&x};w.neverLoggedInLabel=function(z,x){return e["default"].substitute(f["default"].myOrganization.notYetTooltip,{date:x})};w.lastLoginDate=function(z){var x=k["default"](new Date).diff(k["default"](z),"days"),y=k["default"](new Date).isSame(z,"day");return y?f["default"].filters.today:!y&&2>x?f["default"].myOrganization.membersTab.yesterday:0===z||-1===z||1E3===z?f["default"].myOrganization.notYet:l["default"].fullDate(z)};
w.disabledStyle=function(z){return z?"org-member-disabled":""};w.disabledStyleAllowEvents=function(z){return z?"org-member-disabled__allow-events":""};w.disabledLinkClass=function(z){return z?"org-member-disable-link":""};w.shouldShowOnboard=function(z,x){var y=v["default"].getCookie("esri_onboard",!0)||{},u=v["default"].isPortal(),t=!!c["default"].isDebug;t=u||t?document.domain:".arcgis.com";x||(x=new Date("June 30, 2019"));var C=!y[z]&&new Date<x;!u&&y[z]&&new Date>=x&&(delete y[z],g["default"]("esri_onboard",
d["default"].stringify(y),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:t,sameSite:"Strict"}));return C};w.createOnboardCookie=function(z){var x,y=v["default"].getCookie("esri_onboard")||{},u=v["default"].isPortal(),t=!!c["default"].isDebug;u=u||t?document.domain:".arcgis.com";g["default"]("esri_onboard",d["default"].stringify(a.__assign(a.__assign({},y),(x={},x[z]=!0,x))),{expires:new Date((new Date).getTime()+31556926E3),path:"/",domain:u,sameSite:"Strict"})};w.createCookie=
function(z,x,y,u){var t=v["default"].isPortal(),C=!!c["default"].isDebug;u=u||!c["default"].self.urlKey?".arcgis.com":c["default"].self.urlKey+"."+c["default"].self.customBaseUrl;t=t||C?document.domain:u;y*=864E5;g["default"](z,d["default"].stringify(a.__assign({},x)),{expires:new Date((new Date).getTime()+y),path:"/",domain:t})};w.isSearchTermValid=function(z,x){var y=/^[^%()';]+$/,u=/^[a-zA-Z0-9@._]+$/;return("username"===x?u:y).test(z)||0===z.length};w.generateSearchErrorMessage=function(z,x){return{firstname:f["default"].myOrganization.restrictedFirstNameCharacters,
lastname:f["default"].myOrganization.restrictedLastNameCharacters,username:f["default"].createAccount.errors.restrictedCharacters,fullname:f["default"].myOrganization.restrictedFullNameCharacters}[x]||f["default"].controlBar.invalidSyntax};w.addBuiltInRolesAndTranslate=function(z,x){var y=[{id:"org_publisher",name:f["default"].myOrganization.formatters.rolePublisher},{id:"org_admin",name:f["default"].myOrganization.formatters.roleAdmin},{id:"org_user",name:f["default"].myOrganization.formatters.roleUser}];
y=a.__spreadArray(a.__spreadArray([],z),y);y.forEach(function(u){var t=x.filter(function(C){return C.id===u.id})[0];t&&(u.name=t.name)});return y};w.highlight=function(z,x){if(x){var y=x.textContent.replace(new RegExp("("+z+")","ig"),'\x3cspan class\x3d"org-settings__search-highlight"\x3e$1\x3c/span\x3e');x.innerHTML=y}};w.categorizeEntitlements=function(z){var x=w.getProExtensions(z);z=w.filterOutProExtensions(z);var y=w.getProEntitlements(z),u=[],t=[],C=[],E=[];z.forEach(function(F){"User License Type Extension"===
F.type?C.push(F):"Application SDK"===F.type?E.push(F):F.type&&(-1<F.type.indexOf("Application")||-1<F.type.indexOf("Web AppBuilder Widget"))?u.push(F):F.type&&-1===F.type.indexOf("Applcation")&&-1===F.type.indexOf("Web AppBuilder Widget")&&t.push(F)});return{pro:y,proExtensions:x,apps:u,data:t,userTypeExtensions:C,runtime:E}};w.pickRandomHomePageStockImage=function(){return""+Math.floor(2*Math.random()+1)};w.getTitleColorBasedOnStockImage=function(z){return r["default"].includes(["4","5","6"],z)?
"white-ramp":"dark-ramp"};w.isAdminRole=function(z){var x=!1;z.privileges?x=z.privileges.some(function(y){return-1<y.indexOf(":admin")}):"org_admin"===z.id&&(x=!0);return x};w.filterIncludedEntitlements=function(z){var x;return z.entitlements&&null!==(x=z.licenseType)&&void 0!==x&&x.apps?z.entitlements.filter(function(y){var u,t=!1;t=null===(u=z.licenseType)||void 0===u?void 0:u.apps.some(function(C){return C.isAppBundle?C.apps.some(function(E){return-1<E.entitlements.indexOf(y)}):-1<C.entitlements.indexOf(y)});
return!t}):z.entitlements};w.isIncludedThroughUserType=function(z,x){var y;return null===(y=z.licenseType)||void 0===y?void 0:y.apps.some(function(u){return u.isAppBundle?u.apps.some(function(t){return-1<t.entitlements.indexOf(x)}):-1<u.entitlements.indexOf(x)})};w.getAppTitle=function(z){var x,y=((null===(x=w._appSwitcherResponse)||void 0===x?void 0:x.apps)||[]).filter(function(u){return u.entitlement===z.entitlements[0]})[0];return 1===z.entitlements.length?(null===y||void 0===y?void 0:y.title)||
z.title||"":z.title||""};w.getClearEmptyFieldsStateForHelperService=function(z){return""===z?!0:void 0};w.adjustSanitizerForOrgSettingsUse=function(z){Object.keys(z._xssFilter.cssFilter.options.whiteList).forEach(function(x){z._xssFilter.cssFilter.options.whiteList[x]=!0});z._xssFilter.cssFilter.options.whiteList["-webkit-border-radius"]=!0;z._xssFilter.cssFilter.options.whiteList["-moz-border-radius"]=!0;z._xssFilter.cssFilter.options.whiteList["-o-border-radius"]=!0};w.sanitizeUrlOrgOverride=function(z){return z};
w.canShowDistributedCollaborations=function(z,x,y){if(z)return!0;var u=m["default"].isPersonalUse(y,z);z=m["default"].isDeveloperSubscription(y,z)||m["default"].isTrialSubscription(y,z);x=x>=(new Date("June 29, 2021")).getTime();return!(u||z&&x)};w.baKeys=["BusinessAnlyst","baStdN","businessanlyst"];w.droneKeys=["drone2MapStdN","drone2MapAdvN"];w._proKeys=["desktopBasicN","desktopStdN","desktopAdvN"];w._proExtensionKeys="spatialAnalystN 3DAnalystN networkAnalystN geostatAnalystN dataReviewerN workflowMgrN dataInteropN defenseN FMVN businessBasicN businessStdN roadsHighwaysN publisherN productionMapN schematicsN trackingN aviationN airportsN maritimeN bathymetryN smpNAmericaN smpEuropeN smpAsiaPacificN smpMidEAfricaN smpLAmericaN smpJapanN LocRefDesktopN imageAnalystN locateXTN indoorsN".split(" ");
w.orgSettingsSanitizerParams={whiteList:{a:"id class role target rel title".split(" "),blockquote:["cite","style"],center:[],col:["span","style","width","height"],colgroup:["style"],div:["align","id","class","role"],font:["face","class"],h1:["id","style"],h2:["id","style"],h3:["id","style"],h4:["id","style"],h5:["id","style"],iframe:["class","height","width","src"],img:["class"],input:["id","checked","class","name","type"],li:["style"],link:["href","rel","type"],meta:["name","content","http-equiv",
"charset"],p:["id","class"],span:["id","class","role"],strike:[],strong:["style"],style:[],sub:[],sup:[],table:["id","background"],td:["background"],tdbody:[],thead:[],title:[],address:["id","class","style"],article:["id","class","style"],aside:["id","class","style"],details:["id","class","style"],figcaption:["id","class","style"],figure:["id","class","style"],footer:["id","class","style"],header:["id","class","style"],main:["id","class","style"],mark:["id","class","style"],nav:["id","class","style"],
section:["id","class","style"],summary:["id","class","style"],time:["id","class","style"]}};return w}()})},"tslib/tslib":function(){var D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t;(function(C){function E(G,H){G!==F&&("function"===typeof Object.create?Object.defineProperty(G,"__esModule",{value:!0}):G.__esModule=!0);return function(L,J){return G[L]=H?H(L,J):J}}var F="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?
define("tslib",["exports"],function(G){C(E(F,E(G)))}):"object"===typeof module&&"object"===typeof module.exports?C(E(F,E(module.exports))):C(E(F))})(function(C){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,H){G.__proto__=H}||function(G,H){for(var L in H)Object.prototype.hasOwnProperty.call(H,L)&&(G[L]=H[L])};D=function(G,H){function L(){this.constructor=G}if("function"!==typeof H&&null!==H)throw new TypeError("Class extends value "+String(H)+" is not a constructor or null");
E(G,H);G.prototype=null===H?Object.create(H):(L.prototype=H.prototype,new L)};A=Object.assign||function(G){for(var H,L=1,J=arguments.length;L<J;L++){H=arguments[L];for(var S in H)Object.prototype.hasOwnProperty.call(H,S)&&(G[S]=H[S])}return G};a=function(G,H){var L={},J;for(J in G)Object.prototype.hasOwnProperty.call(G,J)&&0>H.indexOf(J)&&(L[J]=G[J]);if(null!=G&&"function"===typeof Object.getOwnPropertySymbols){var S=0;for(J=Object.getOwnPropertySymbols(G);S<J.length;S++)0>H.indexOf(J[S])&&Object.prototype.propertyIsEnumerable.call(G,
J[S])&&(L[J[S]]=G[J[S]])}return L};b=function(G,H,L,J){var S=arguments.length,P=3>S?H:null===J?J=Object.getOwnPropertyDescriptor(H,L):J,Q;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)P=Reflect.decorate(G,H,L,J);else for(var M=G.length-1;0<=M;M--)if(Q=G[M])P=(3>S?Q(P):3<S?Q(H,L,P):Q(H,L))||P;return 3<S&&P&&Object.defineProperty(H,L,P),P};g=function(G,H){return function(L,J){H(L,J,G)}};d=function(G,H){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(G,
H)};e=function(G,H,L,J){function S(P){return P instanceof L?P:new L(function(Q){Q(P)})}return new (L||(L=Promise))(function(P,Q){function M(X){try{K(J.next(X))}catch(da){Q(da)}}function N(X){try{K(J["throw"](X))}catch(da){Q(da)}}function K(X){X.done?P(X.value):S(X.value).then(M,N)}K((J=J.apply(G,H||[])).next())})};f=function(G,H){function L(K){return function(X){return J([K,X])}}function J(K){if(P)throw new TypeError("Generator is already executing.");for(;S;)try{if(P=1,Q&&(M=K[0]&2?Q["return"]:K[0]?
Q["throw"]||((M=Q["return"])&&M.call(Q),0):Q.next)&&!(M=M.call(Q,K[1])).done)return M;if(Q=0,M)K=[K[0]&2,M.value];switch(K[0]){case 0:case 1:M=K;break;case 4:return S.label++,{value:K[1],done:!1};case 5:S.label++;Q=K[1];K=[0];continue;case 7:K=S.ops.pop();S.trys.pop();continue;default:if(!(M=S.trys,M=0<M.length&&M[M.length-1])&&(6===K[0]||2===K[0])){S=0;continue}if(3===K[0]&&(!M||K[1]>M[0]&&K[1]<M[3]))S.label=K[1];else if(6===K[0]&&S.label<M[1])S.label=M[1],M=K;else if(M&&S.label<M[2])S.label=M[2],
S.ops.push(K);else{M[2]&&S.ops.pop();S.trys.pop();continue}}K=H.call(G,S)}catch(X){K=[6,X],Q=0}finally{P=M=0}if(K[0]&5)throw K[1];return{value:K[0]?K[1]:void 0,done:!0}}var S={label:0,sent:function(){if(M[0]&1)throw M[1];return M[1]},trys:[],ops:[]},P,Q,M,N;return N={next:L(0),"throw":L(1),"return":L(2)},"function"===typeof Symbol&&(N[Symbol.iterator]=function(){return this}),N};n=function(G,H){for(var L in G)"default"===L||Object.prototype.hasOwnProperty.call(H,L)||t(H,G,L)};t=Object.create?function(G,
H,L,J){void 0===J&&(J=L);Object.defineProperty(G,J,{enumerable:!0,get:function(){return H[L]}})}:function(G,H,L,J){void 0===J&&(J=L);G[J]=H[L]};h=function(G){var H="function"===typeof Symbol&&Symbol.iterator,L=H&&G[H],J=0;if(L)return L.call(G);if(G&&"number"===typeof G.length)return{next:function(){G&&J>=G.length&&(G=void 0);return{value:G&&G[J++],done:!G}}};throw new TypeError(H?"Object is not iterable.":"Symbol.iterator is not defined.");};k=function(G,H){var L="function"===typeof Symbol&&G[Symbol.iterator];
if(!L)return G;var J=L.call(G),S,P=[];try{for(;(void 0===H||0<H--)&&!(S=J.next()).done;)P.push(S.value)}catch(M){var Q={error:M}}finally{try{S&&!S.done&&(L=J["return"])&&L.call(J)}finally{if(Q)throw Q.error;}}return P};c=function(){for(var G=[],H=0;H<arguments.length;H++)G=G.concat(k(arguments[H]));return G};l=function(){for(var G=0,H=0,L=arguments.length;H<L;H++)G+=arguments[H].length;G=Array(G);var J=0;for(H=0;H<L;H++)for(var S=arguments[H],P=0,Q=S.length;P<Q;P++,J++)G[J]=S[P];return G};r=function(G,
H){for(var L=0,J=H.length,S=G.length;L<J;L++,S++)G[S]=H[L];return G};m=function(G){return this instanceof m?(this.v=G,this):new m(G)};q=function(G,H,L){function J(da){N[da]&&(K[da]=function(Y){return new Promise(function(aa,ca){1<X.push([da,Y,aa,ca])||S(da,Y)})})}function S(da,Y){try{var aa=N[da](Y);aa.value instanceof m?Promise.resolve(aa.value.v).then(P,Q):M(X[0][2],aa)}catch(ca){M(X[0][3],ca)}}function P(da){S("next",da)}function Q(da){S("throw",da)}function M(da,Y){(da(Y),X.shift(),X.length)&&
S(X[0][0],X[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var N=L.apply(G,H||[]),K,X=[];return K={},J("next"),J("throw"),J("return"),K[Symbol.asyncIterator]=function(){return this},K};v=function(G){function H(S,P){L[S]=G[S]?function(Q){return(J=!J)?{value:m(G[S](Q)),done:"return"===S}:P?P(Q):Q}:P}var L,J;return L={},H("next"),H("throw",function(S){throw S;}),H("return"),L[Symbol.iterator]=function(){return this},L};B=function(G){function H(P){S[P]=G[P]&&
function(Q){return new Promise(function(M,N){Q=G[P](Q);L(M,N,Q.done,Q.value)})}}function L(P,Q,M,N){Promise.resolve(N).then(function(K){P({value:K,done:M})},Q)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var J=G[Symbol.asyncIterator],S;return J?J.call(G):(G="function"===typeof h?h(G):G[Symbol.iterator](),S={},H("next"),H("throw"),H("return"),S[Symbol.asyncIterator]=function(){return this},S)};w=function(G,H){Object.defineProperty?Object.defineProperty(G,"raw",
{value:H}):G.raw=H;return G};var F=Object.create?function(G,H){Object.defineProperty(G,"default",{enumerable:!0,value:H})}:function(G,H){G["default"]=H};z=function(G){if(G&&G.__esModule)return G;var H={};if(null!=G)for(var L in G)"default"!==L&&Object.prototype.hasOwnProperty.call(G,L)&&t(H,G,L);F(H,G);return H};x=function(G){return G&&G.__esModule?G:{"default":G}};y=function(G,H,L,J){if("a"===L&&!J)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof H?G!==
H||!J:!H.has(G))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===L?J:"a"===L?J.call(G):J?J.value:H.get(G)};u=function(G,H,L,J,S){if("m"===J)throw new TypeError("Private method is not writable");if("a"===J&&!S)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof H?G!==H||!S:!H.has(G))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===J?S.call(G,L):
S?S.value=L:H.set(G,L),L};C("__extends",D);C("__assign",A);C("__rest",a);C("__decorate",b);C("__param",g);C("__metadata",d);C("__awaiter",e);C("__generator",f);C("__exportStar",n);C("__createBinding",t);C("__values",h);C("__read",k);C("__spread",c);C("__spreadArrays",l);C("__spreadArray",r);C("__await",m);C("__asyncGenerator",q);C("__asyncDelegator",v);C("__asyncValues",B);C("__makeTemplateObject",w);C("__importStar",z);C("__importDefault",x);C("__classPrivateFieldGet",y);C("__classPrivateFieldSet",
u)})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(D,A){D.cookie=function(a,b,g){var d=document.cookie;if(1==arguments.length)var e=(e=d.match(new RegExp("(?:^|; )"+A.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(e[1]):void 0;else{g=g||{};d=g.expires;if("number"==typeof d){var f=new Date;f.setTime(f.getTime()+864E5*d);d=g.expires=f}d&&d.toUTCString&&(g.expires=d.toUTCString());b=encodeURIComponent(b);d=a+"\x3d"+b;for(var n in g)d+="; "+n,f=g[n],!0!==f&&(d+="\x3d"+f);
document.cookie=d}return e};D.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return D.cookie})},"moment/moment":function(){(function(D,A){"object"===typeof exports&&"undefined"!==typeof module?module.exports=A():"function"===typeof define&&define.amd?define(A):D.moment=A()})(this,
function(){function D(){return md.apply(null,arguments)}function A(O){return O instanceof Array||"[object Array]"===Object.prototype.toString.call(O)}function a(O){return null!=O&&"[object Object]"===Object.prototype.toString.call(O)}function b(O,Z){return Object.prototype.hasOwnProperty.call(O,Z)}function g(O){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(O).length;for(var Z in O)if(b(O,Z))return!1;return!0}function d(O){return void 0===O}function e(O){return"number"===typeof O||
"[object Number]"===Object.prototype.toString.call(O)}function f(O){return O instanceof Date||"[object Date]"===Object.prototype.toString.call(O)}function n(O,Z){var oa=[],za;for(za=0;za<O.length;++za)oa.push(Z(O[za],za));return oa}function h(O,Z){for(var oa in Z)b(Z,oa)&&(O[oa]=Z[oa]);b(Z,"toString")&&(O.toString=Z.toString);b(Z,"valueOf")&&(O.valueOf=Z.valueOf);return O}function k(O,Z,oa,za){return Va(O,Z,oa,za,!0).utc()}function c(O){null==O._pf&&(O._pf={empty:!1,unusedTokens:[],unusedInput:[],
overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1});return O._pf}function l(O){if(null==O._isValid){var Z=c(O),oa=Mb.call(Z.parsedDateParts,function(za){return null!=za});oa=!isNaN(O._d.getTime())&&0>Z.overflow&&!Z.empty&&!Z.invalidEra&&!Z.invalidMonth&&!Z.invalidWeekday&&!Z.weekdayMismatch&&!Z.nullInput&&!Z.invalidFormat&&!Z.userInvalidated&&(!Z.meridiem||Z.meridiem&&
oa);O._strict&&(oa=oa&&0===Z.charsLeftOver&&0===Z.unusedTokens.length&&void 0===Z.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(O))return oa;O._isValid=oa}return O._isValid}function r(O){var Z=k(NaN);null!=O?h(c(Z),O):c(Z).userInvalidated=!0;return Z}function m(O,Z){var oa;d(Z._isAMomentObject)||(O._isAMomentObject=Z._isAMomentObject);d(Z._i)||(O._i=Z._i);d(Z._f)||(O._f=Z._f);d(Z._l)||(O._l=Z._l);d(Z._strict)||(O._strict=Z._strict);d(Z._tzm)||(O._tzm=Z._tzm);d(Z._isUTC)||(O._isUTC=Z._isUTC);
d(Z._offset)||(O._offset=Z._offset);d(Z._pf)||(O._pf=c(Z));d(Z._locale)||(O._locale=Z._locale);if(0<ia.length)for(oa=0;oa<ia.length;oa++){var za=ia[oa];var Qa=Z[za];d(Qa)||(O[za]=Qa)}return O}function q(O){m(this,O);this._d=new Date(null!=O._d?O._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Sa&&(Sa=!0,D.updateOffset(this),Sa=!1)}function v(O){return O instanceof q||null!=O&&null!=O._isAMomentObject}function B(O,Z){var oa=!0;return h(function(){null!=D.deprecationHandler&&D.deprecationHandler(null,
O);if(oa){var za=[],Qa,db;for(Qa=0;Qa<arguments.length;Qa++){var fb="";if("object"===typeof arguments[Qa]){fb+="\n["+Qa+"] ";for(db in arguments[0])b(arguments[0],db)&&(fb+=db+": "+arguments[0][db]+", ");fb=fb.slice(0,-2)}else fb=arguments[Qa];za.push(fb)}Array.prototype.slice.call(za).join("");oa=!1}return Z.apply(this,arguments)},Z)}function w(O,Z){null!=D.deprecationHandler&&D.deprecationHandler(O,Z);Pa[O]||(Pa[O]=!0)}function z(O){return"undefined"!==typeof Function&&O instanceof Function||"[object Function]"===
Object.prototype.toString.call(O)}function x(O,Z){var oa=h({},O),za;for(za in Z)b(Z,za)&&(a(O[za])&&a(Z[za])?(oa[za]={},h(oa[za],O[za]),h(oa[za],Z[za])):null!=Z[za]?oa[za]=Z[za]:delete oa[za]);for(za in O)b(O,za)&&!b(Z,za)&&a(O[za])&&(oa[za]=h({},oa[za]));return oa}function y(O){null!=O&&this.set(O)}function u(O,Z,oa){var za=""+Math.abs(O);return(0<=O?oa?"+":"":"-")+Math.pow(10,Math.max(0,Z-za.length)).toString().substr(1)+za}function t(O,Z,oa,za){var Qa=za;"string"===typeof za&&(Qa=function(){return this[za]()});
O&&(Oa[O]=Qa);Z&&(Oa[Z[0]]=function(){return u(Qa.apply(this,arguments),Z[1],Z[2])});oa&&(Oa[oa]=function(){return this.localeData().ordinal(Qa.apply(this,arguments),O)})}function C(O){return O.match(/\[[\s\S]/)?O.replace(/^\[|\]$/g,""):O.replace(/\\/g,"")}function E(O){var Z=O.match(Na),oa;var za=0;for(oa=Z.length;za<oa;za++)Z[za]=Oa[Z[za]]?Oa[Z[za]]:C(Z[za]);return function(Qa){var db="",fb;for(fb=0;fb<oa;fb++)db+=z(Z[fb])?Z[fb].call(Qa,O):Z[fb];return db}}function F(O,Z){if(!O.isValid())return O.localeData().invalidDate();
Z=G(Z,O.localeData());Ta[Z]=Ta[Z]||E(Z);return Ta[Z](O)}function G(O,Z){function oa(Qa){return Z.longDateFormat(Qa)||Qa}var za=5;for(Ua.lastIndex=0;0<=za&&Ua.test(O);)O=O.replace(Ua,oa),Ua.lastIndex=0,--za;return O}function H(O,Z){var oa=O.toLowerCase();Za[oa]=Za[oa+"s"]=Za[Z]=O}function L(O){return"string"===typeof O?Za[O]||Za[O.toLowerCase()]:void 0}function J(O){var Z={},oa,za;for(za in O)b(O,za)&&(oa=L(za))&&(Z[oa]=O[za]);return Z}function S(O){var Z=[],oa;for(oa in O)b(O,oa)&&Z.push({unit:oa,
priority:bb[oa]});Z.sort(function(za,Qa){return za.priority-Qa.priority});return Z}function P(O){return 0===O%4&&0!==O%100||0===O%400}function Q(O){return 0>O?Math.ceil(O)||0:Math.floor(O)}function M(O){O=+O;var Z=0;0!==O&&isFinite(O)&&(Z=Q(O));return Z}function N(O,Z){return function(oa){return null!=oa?(X(this,O,oa),D.updateOffset(this,Z),this):K(this,O)}}function K(O,Z){return O.isValid()?O._d["get"+(O._isUTC?"UTC":"")+Z]():NaN}function X(O,Z,oa){if(O.isValid()&&!isNaN(oa))if("FullYear"===Z&&P(O.year())&&
1===O.month()&&29===O.date())oa=M(oa),O._d["set"+(O._isUTC?"UTC":"")+Z](oa,O.month(),ba(oa,O.month()));else O._d["set"+(O._isUTC?"UTC":"")+Z](oa)}function da(O,Z,oa){Wc[O]=z(Z)?Z:function(za,Qa){return za&&oa?oa:Z}}function Y(O,Z){return b(Wc,O)?Wc[O](Z._strict,Z._locale):new RegExp(aa(O))}function aa(O){return ca(O.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(Z,oa,za,Qa,db){return oa||za||Qa||db}))}function ca(O){return O.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function I(O,
Z){var oa,za=Z;"string"===typeof O&&(O=[O]);e(Z)&&(za=function(Qa,db){db[Z]=M(Qa)});for(oa=0;oa<O.length;oa++)Sc[O[oa]]=za}function T(O,Z){I(O,function(oa,za,Qa,db){Qa._w=Qa._w||{};Z(oa,Qa._w,Qa,db)})}function ba(O,Z){if(isNaN(O)||isNaN(Z))return NaN;var oa=(Z%12+12)%12;return 1===oa?P(O+(Z-oa)/12)?29:28:31-oa%7%2}function pa(O,Z){if(!O.isValid())return O;if("string"===typeof Z)if(/^\d+$/.test(Z))Z=M(Z);else if(Z=O.localeData().monthsParse(Z),!e(Z))return O;var oa=Math.min(O.date(),ba(O.year(),Z));
O._d["set"+(O._isUTC?"UTC":"")+"Month"](Z,oa);return O}function ya(O){return null!=O?(pa(this,O),D.updateOffset(this,!0),this):K(this,"Month")}function Da(){function O(fb,qb){return qb.length-fb.length}var Z=[],oa=[],za=[],Qa;for(Qa=0;12>Qa;Qa++){var db=k([2E3,Qa]);Z.push(this.monthsShort(db,""));oa.push(this.months(db,""));za.push(this.months(db,""));za.push(this.monthsShort(db,""))}Z.sort(O);oa.sort(O);za.sort(O);for(Qa=0;12>Qa;Qa++)Z[Qa]=ca(Z[Qa]),oa[Qa]=ca(oa[Qa]);for(Qa=0;24>Qa;Qa++)za[Qa]=ca(za[Qa]);
this._monthsShortRegex=this._monthsRegex=new RegExp("^("+za.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+oa.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+Z.join("|")+")","i")}function Ha(O,Z,oa,za,Qa,db,fb){100>O&&0<=O?(Z=new Date(O+400,Z,oa,za,Qa,db,fb),isFinite(Z.getFullYear())&&Z.setFullYear(O)):Z=new Date(O,Z,oa,za,Qa,db,fb);return Z}function ta(O){if(100>O&&0<=O){var Z=Array.prototype.slice.call(arguments);Z[0]=O+400;Z=new Date(Date.UTC.apply(null,Z));isFinite(Z.getUTCFullYear())&&
Z.setUTCFullYear(O)}else Z=new Date(Date.UTC.apply(null,arguments));return Z}function xa(O,Z,oa){oa=7+Z-oa;return-((7+ta(O,0,oa).getUTCDay()-Z)%7)+oa-1}function ra(O,Z,oa,za,Qa){oa=(7+oa-za)%7;za=xa(O,za,Qa);za=1+7*(Z-1)+oa+za;0>=za?(Z=O-1,O=(P(Z)?366:365)+za):za>(P(O)?366:365)?(Z=O+1,O=za-(P(O)?366:365)):(Z=O,O=za);return{year:Z,dayOfYear:O}}function Aa(O,Z,oa){var za=xa(O.year(),Z,oa);za=Math.floor((O.dayOfYear()-za-1)/7)+1;1>za?(O=O.year()-1,Z=za+ua(O,Z,oa)):za>ua(O.year(),Z,oa)?(Z=za-ua(O.year(),
Z,oa),O=O.year()+1):(O=O.year(),Z=za);return{week:Z,year:O}}function ua(O,Z,oa){var za=xa(O,Z,oa);Z=xa(O+1,Z,oa);return((P(O)?366:365)-za+Z)/7}function Ja(O,Z){return O.slice(Z,7).concat(O.slice(0,Z))}function ha(O,Z,oa){var za;O=O.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],za=0;7>za;++za){var Qa=k([2E3,1]).day(za);this._minWeekdaysParse[za]=this.weekdaysMin(Qa,"").toLocaleLowerCase();this._shortWeekdaysParse[za]=this.weekdaysShort(Qa,
"").toLocaleLowerCase();this._weekdaysParse[za]=this.weekdays(Qa,"").toLocaleLowerCase()}if(oa)Z="dddd"===Z?Nb.call(this._weekdaysParse,O):"ddd"===Z?Nb.call(this._shortWeekdaysParse,O):Nb.call(this._minWeekdaysParse,O);else if("dddd"===Z){Z=Nb.call(this._weekdaysParse,O);if(-1!==Z)return Z;Z=Nb.call(this._shortWeekdaysParse,O);if(-1!==Z)return Z;Z=Nb.call(this._minWeekdaysParse,O)}else if("ddd"===Z){Z=Nb.call(this._shortWeekdaysParse,O);if(-1!==Z)return Z;Z=Nb.call(this._weekdaysParse,O);if(-1!==
Z)return Z;Z=Nb.call(this._minWeekdaysParse,O)}else{Z=Nb.call(this._minWeekdaysParse,O);if(-1!==Z)return Z;Z=Nb.call(this._weekdaysParse,O);if(-1!==Z)return Z;Z=Nb.call(this._shortWeekdaysParse,O)}return-1!==Z?Z:null}function ma(){function O(vb,Lb){return Lb.length-vb.length}var Z=[],oa=[],za=[],Qa=[],db;for(db=0;7>db;db++){var fb=k([2E3,1]).day(db);var qb=ca(this.weekdaysMin(fb,""));var Eb=ca(this.weekdaysShort(fb,""));fb=ca(this.weekdays(fb,""));Z.push(qb);oa.push(Eb);za.push(fb);Qa.push(qb);Qa.push(Eb);
Qa.push(fb)}Z.sort(O);oa.sort(O);za.sort(O);Qa.sort(O);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+Qa.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+za.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+oa.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+Z.join("|")+")","i")}function R(){return this.hours()%12||12}function Ea(O,Z){t(O,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),Z)})}
function Ia(O,Z){return Z._meridiemParse}function ea(O){return O?O.toLowerCase().replace("_","-"):O}function Ya(O){var Z=null;if(void 0===Hb[O]&&"undefined"!==typeof module&&module&&module.exports)try{Z=Cc._abbr;var oa=require;oa("./locale/"+O);Xa(Z)}catch(za){Hb[O]=null}return Hb[O]}function Xa(O,Z){var oa;O&&(oa=d(Z)?U(O):Ba(O,Z))&&(Cc=oa);return Cc._abbr}function Ba(O,Z){if(null!==Z){var oa=$b;Z.abbr=O;if(null!=Hb[O])w("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
oa=Hb[O]._config;else if(null!=Z.parentLocale)if(null!=Hb[Z.parentLocale])oa=Hb[Z.parentLocale]._config;else if(oa=Ya(Z.parentLocale),null!=oa)oa=oa._config;else return Dc[Z.parentLocale]||(Dc[Z.parentLocale]=[]),Dc[Z.parentLocale].push({name:O,config:Z}),null;Hb[O]=new y(x(oa,Z));Dc[O]&&Dc[O].forEach(function(za){Ba(za.name,za.config)});Xa(O);return Hb[O]}delete Hb[O];return null}function U(O){var Z;O&&O._locale&&O._locale._abbr&&(O=O._locale._abbr);if(!O)return Cc;if(!A(O)){if(Z=Ya(O))return Z;
O=[O]}a:{Z=0;for(var oa,za,Qa,db;Z<O.length;){db=ea(O[Z]).split("-");oa=db.length;for(za=(za=ea(O[Z+1]))?za.split("-"):null;0<oa;){if(Qa=Ya(db.slice(0,oa).join("-"))){O=Qa;break a}if(Qa=za&&za.length>=oa){b:{Qa=void 0;var fb=Math.min(db.length,za.length);for(Qa=0;Qa<fb;Qa+=1)if(db[Qa]!==za[Qa])break b;Qa=fb}Qa=Qa>=oa-1}if(Qa)break;oa--}Z++}O=Cc}return O}function la(O){var Z;(Z=O._a)&&-2===c(O).overflow&&(Z=0>Z[rc]||11<Z[rc]?rc:1>Z[oc]||Z[oc]>ba(Z[Wb],Z[rc])?oc:0>Z[Ob]||24<Z[Ob]||24===Z[Ob]&&(0!==
Z[Pb]||0!==Z[Qb]||0!==Z[cc])?Ob:0>Z[Pb]||59<Z[Pb]?Pb:0>Z[Qb]||59<Z[Qb]?Qb:0>Z[cc]||999<Z[cc]?cc:-1,c(O)._overflowDayOfYear&&(Z<Wb||Z>oc)&&(Z=oc),c(O)._overflowWeeks&&-1===Z&&(Z=Xc),c(O)._overflowWeekday&&-1===Z&&(Z=ed),c(O).overflow=Z);return O}function na(O){var Z;var oa=O._i;var za=fd.exec(oa)||gd.exec(oa);if(za){c(O).iso=!0;oa=0;for(Z=Kc.length;oa<Z;oa++)if(Kc[oa][1].exec(za[1])){var Qa=Kc[oa][0];var db=!1!==Kc[oa][2];break}if(null==Qa)O._isValid=!1;else{if(za[3]){oa=0;for(Z=Jb.length;oa<Z;oa++)if(Jb[oa][1].exec(za[3])){var fb=
(za[2]||" ")+Jb[oa][0];break}if(null==fb){O._isValid=!1;return}}if(db||null==fb){if(za[4])if(hd.exec(za[4]))var qb="Z";else{O._isValid=!1;return}O._f=Qa+(fb||"")+(qb||"");Fa(O)}else O._isValid=!1}}else O._isValid=!1}function V(O){var Z=Yc.exec(O._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(Z){var oa=Z[3],za=Z[2],Qa=Z[5],db=Z[6],fb=Z[7],qb=parseInt(Z[4],10);oa=[49>=qb?2E3+qb:999>=qb?1900+qb:qb,Lc.indexOf(oa),parseInt(za,10),parseInt(Qa,10),
parseInt(db,10)];fb&&oa.push(parseInt(fb,10));a:{if(fb=Z[1])if(fb=fc.indexOf(fb),za=(new Date(oa[0],oa[1],oa[2])).getDay(),fb!==za){c(O).weekdayMismatch=!0;fb=O._isValid=!1;break a}fb=!0}fb&&(O._a=oa,(fb=Z[8])?Z=Zc[fb]:Z[9]?Z=0:(Z=parseInt(Z[10],10),fb=Z%100,Z=(Z-fb)/100*60+fb),O._tzm=Z,O._d=ta.apply(null,O._a),O._d.setUTCMinutes(O._d.getUTCMinutes()-O._tzm),c(O).rfc2822=!0)}else O._isValid=!1}function fa(O){var Z=nd.exec(O._i);null!==Z?O._d=new Date(+Z[1]):(na(O),!1===O._isValid&&(delete O._isValid,
V(O),!1===O._isValid&&(delete O._isValid,O._strict?O._isValid=!1:D.createFromInputFallback(O))))}function qa(O,Z,oa){return null!=O?O:null!=Z?Z:oa}function va(O){var Z=[];if(!O._d){var oa=new Date(D.now());oa=O._useUTC?[oa.getUTCFullYear(),oa.getUTCMonth(),oa.getUTCDate()]:[oa.getFullYear(),oa.getMonth(),oa.getDate()];if(O._w&&null==O._a[oc]&&null==O._a[rc]){var za=O._w;if(null!=za.GG||null!=za.W||null!=za.E){var Qa=1;var db=4;var fb=qa(za.GG,O._a[Wb],Aa(Ma(),1,4).year);var qb=qa(za.W,1);var Eb=qa(za.E,
1);if(1>Eb||7<Eb)var vb=!0}else if(Qa=O._locale._week.dow,db=O._locale._week.doy,qb=Aa(Ma(),Qa,db),fb=qa(za.gg,O._a[Wb],qb.year),qb=qa(za.w,qb.week),null!=za.d){if(Eb=za.d,0>Eb||6<Eb)vb=!0}else if(null!=za.e){if(Eb=za.e+Qa,0>za.e||6<za.e)vb=!0}else Eb=Qa;1>qb||qb>ua(fb,Qa,db)?c(O)._overflowWeeks=!0:null!=vb?c(O)._overflowWeekday=!0:(vb=ra(fb,qb,Eb,Qa,db),O._a[Wb]=vb.year,O._dayOfYear=vb.dayOfYear)}if(null!=O._dayOfYear){vb=qa(O._a[Wb],oa[Wb]);if(O._dayOfYear>(P(vb)?366:365)||0===O._dayOfYear)c(O)._overflowDayOfYear=
!0;vb=ta(vb,0,O._dayOfYear);O._a[rc]=vb.getUTCMonth();O._a[oc]=vb.getUTCDate()}for(vb=0;3>vb&&null==O._a[vb];++vb)O._a[vb]=Z[vb]=oa[vb];for(;7>vb;vb++)O._a[vb]=Z[vb]=null==O._a[vb]?2===vb?1:0:O._a[vb];24===O._a[Ob]&&0===O._a[Pb]&&0===O._a[Qb]&&0===O._a[cc]&&(O._nextDay=!0,O._a[Ob]=0);O._d=(O._useUTC?ta:Ha).apply(null,Z);Z=O._useUTC?O._d.getUTCDay():O._d.getDay();null!=O._tzm&&O._d.setUTCMinutes(O._d.getUTCMinutes()-O._tzm);O._nextDay&&(O._a[Ob]=24);O._w&&"undefined"!==typeof O._w.d&&O._w.d!==Z&&(c(O).weekdayMismatch=
!0)}}function Fa(O){if(O._f===D.ISO_8601)na(O);else if(O._f===D.RFC_2822)V(O);else{O._a=[];c(O).empty=!0;var Z=""+O._i,oa,za,Qa=Z.length,db=0;var fb=G(O._f,O._locale).match(Na)||[];for(oa=0;oa<fb.length;oa++){var qb=fb[oa];if(za=(Z.match(Y(qb,O))||[])[0]){var Eb=Z.substr(0,Z.indexOf(za));0<Eb.length&&c(O).unusedInput.push(Eb);Z=Z.slice(Z.indexOf(za)+za.length);db+=za.length}if(Oa[qb]){if(za?c(O).empty=!1:c(O).unusedTokens.push(qb),Eb=O,null!=za&&b(Sc,qb))Sc[qb](za,Eb._a,Eb,qb)}else O._strict&&!za&&
c(O).unusedTokens.push(qb)}c(O).charsLeftOver=Qa-db;0<Z.length&&c(O).unusedInput.push(Z);12>=O._a[Ob]&&!0===c(O).bigHour&&0<O._a[Ob]&&(c(O).bigHour=void 0);c(O).parsedDateParts=O._a.slice(0);c(O).meridiem=O._meridiem;Z=O._a;oa=Ob;Qa=O._locale;fb=O._a[Ob];db=O._meridiem;null!=db&&(null!=Qa.meridiemHour?fb=Qa.meridiemHour(fb,db):null!=Qa.isPM&&((Qa=Qa.isPM(db))&&12>fb&&(fb+=12),Qa||12!==fb||(fb=0)));Z[oa]=fb;Z=c(O).era;null!==Z&&(O._a[Wb]=O._locale.erasConvertYear(Z,O._a[Wb]));va(O);la(O)}}function Ca(O){if(!O._d){var Z=
J(O._i);O._a=n([Z.year,Z.month,void 0===Z.day?Z.date:Z.day,Z.hour,Z.minute,Z.second,Z.millisecond],function(oa){return oa&&parseInt(oa,10)});va(O)}}function La(O){var Z=O._i,oa=O._f;O._locale=O._locale||U(O._l);if(null===Z||void 0===oa&&""===Z)return r({nullInput:!0});"string"===typeof Z&&(O._i=Z=O._locale.preparse(Z));if(v(Z))return new q(la(Z));if(f(Z))O._d=Z;else if(A(oa)){var za=!1;if(0===O._f.length)c(O).invalidFormat=!0,O._d=new Date(NaN);else{for(Z=0;Z<O._f.length;Z++){oa=0;var Qa=!1;var db=
m({},O);null!=O._useUTC&&(db._useUTC=O._useUTC);db._f=O._f[Z];Fa(db);l(db)&&(Qa=!0);oa+=c(db).charsLeftOver;oa+=10*c(db).unusedTokens.length;c(db).score=oa;if(za)oa<fb&&(fb=oa,qb=db);else if(null==fb||oa<fb||Qa){var fb=oa;var qb=db;Qa&&(za=!0)}}h(O,qb||db)}}else oa?Fa(O):Wa(O);l(O)||(O._d=null);return O}function Wa(O){var Z=O._i;d(Z)?O._d=new Date(D.now()):f(Z)?O._d=new Date(Z.valueOf()):"string"===typeof Z?fa(O):A(Z)?(O._a=n(Z.slice(0),function(oa){return parseInt(oa,10)}),va(O)):a(Z)?Ca(O):e(Z)?
O._d=new Date(Z):D.createFromInputFallback(O)}function Va(O,Z,oa,za,Qa){var db={};if(!0===Z||!1===Z)za=Z,Z=void 0;if(!0===oa||!1===oa)za=oa,oa=void 0;if(a(O)&&g(O)||A(O)&&0===O.length)O=void 0;db._isAMomentObject=!0;db._useUTC=db._isUTC=Qa;db._l=oa;db._i=O;db._f=Z;db._strict=za;O=new q(la(La(db)));O._nextDay&&(O.add(1,"d"),O._nextDay=void 0);return O}function Ma(O,Z,oa,za){return Va(O,Z,oa,za,!1)}function eb(O,Z){var oa;1===Z.length&&A(Z[0])&&(Z=Z[0]);if(!Z.length)return Ma();var za=Z[0];for(oa=1;oa<
Z.length;++oa)if(!Z[oa].isValid()||Z[oa][O](za))za=Z[oa];return za}function ib(O){var Z=J(O);O=Z.year||0;var oa=Z.quarter||0,za=Z.month||0,Qa=Z.week||Z.isoWeek||0,db=Z.day||0,fb=Z.hour||0,qb=Z.minute||0,Eb=Z.second||0,vb=Z.millisecond||0;a:{var Lb,tc=!1;for(Lb in Z)if(b(Z,Lb)&&(-1===Nb.call(Mc,Lb)||null!=Z[Lb]&&isNaN(Z[Lb]))){Z=!1;break a}for(Lb=0;Lb<Mc.length;++Lb)if(Z[Mc[Lb]]){if(tc){Z=!1;break a}parseFloat(Z[Mc[Lb]])!==M(Z[Mc[Lb]])&&(tc=!0)}Z=!0}this._isValid=Z;this._milliseconds=+vb+1E3*Eb+6E4*
qb+36E5*fb;this._days=+db+7*Qa;this._months=+za+3*oa+12*O;this._data={};this._locale=U();this._bubble()}function lb(O){return O instanceof ib}function rb(O){return 0>O?-1*Math.round(-1*O):Math.round(O)}function sb(O,Z){t(O,0,0,function(){var oa=this.utcOffset(),za="+";0>oa&&(oa=-oa,za="-");return za+u(~~(oa/60),2)+Z+u(~~oa%60,2)})}function tb(O,Z){var oa=(Z||"").match(O);if(null===oa)return null;oa=((oa[oa.length-1]||[])+"").match(od)||["-",0,0];var za=+(60*oa[1])+M(oa[2]);return 0===za?0:"+"===oa[0]?
za:-za}function Ab(O,Z){if(Z._isUTC){var oa=Z.clone();var za=(v(O)||f(O)?O.valueOf():Ma(O).valueOf())-oa.valueOf();oa._d.setTime(oa._d.valueOf()+za);D.updateOffset(oa,!1);return oa}return Ma(O).local()}function Cb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function nb(O,Z){var oa=O,za=null;lb(O)?oa={ms:O._milliseconds,d:O._days,M:O._months}:e(O)||!isNaN(+O)?(oa={},Z?oa[Z]=+O:oa.milliseconds=+O):(za=pd.exec(O))?(oa="-"===za[1]?-1:1,oa={y:0,d:M(za[oc])*oa,h:M(za[Ob])*oa,m:M(za[Pb])*oa,
s:M(za[Qb])*oa,ms:M(rb(1E3*za[cc]))*oa}):(za=Rb.exec(O))?(oa="-"===za[1]?-1:1,oa={y:yb(za[2],oa),M:yb(za[3],oa),w:yb(za[4],oa),d:yb(za[5],oa),h:yb(za[6],oa),m:yb(za[7],oa),s:yb(za[8],oa)}):null==oa?oa={}:"object"===typeof oa&&("from"in oa||"to"in oa)&&(za=Ma(oa.from),oa=Ma(oa.to),za.isValid()&&oa.isValid()?(oa=Ab(oa,za),za.isBefore(oa)?oa=Fb(za,oa):(oa=Fb(oa,za),oa.milliseconds=-oa.milliseconds,oa.months=-oa.months),za=oa):za={milliseconds:0,months:0},oa={},oa.ms=za.milliseconds,oa.M=za.months);oa=
new ib(oa);lb(O)&&b(O,"_locale")&&(oa._locale=O._locale);lb(O)&&b(O,"_isValid")&&(oa._isValid=O._isValid);return oa}function yb(O,Z){var oa=O&&parseFloat(O.replace(",","."));return(isNaN(oa)?0:oa)*Z}function Fb(O,Z){var oa={};oa.months=Z.month()-O.month()+12*(Z.year()-O.year());O.clone().add(oa.months,"M").isAfter(Z)&&--oa.months;oa.milliseconds=+Z-+O.clone().add(oa.months,"M");return oa}function gc(O,Z){return function(oa,za){if(null!==za&&!isNaN(+za)){w(Z,"moment()."+Z+"(period, number) is deprecated. Please use moment()."+
Z+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var Qa=oa;oa=za;za=Qa}Qa=nb(oa,za);Sb(this,Qa,O);return this}}function Sb(O,Z,oa,za){var Qa=Z._milliseconds,db=rb(Z._days);Z=rb(Z._months);O.isValid()&&(za=null==za?!0:za,Z&&pa(O,K(O,"Month")+Z*oa),db&&X(O,"Date",K(O,"Date")+db*oa),Qa&&O._d.setTime(O._d.valueOf()+Qa*oa),za&&D.updateOffset(O,db||Z))}function Kb(O){return"string"===typeof O||O instanceof String}function uc(O){var Z=A(O),oa=!1;Z&&(oa=
0===O.filter(function(za){return!e(za)&&Kb(O)}).length);return Z&&oa}function Ib(O,Z){if(O.date()<Z.date())return-Ib(Z,O);var oa=12*(Z.year()-O.year())+(Z.month()-O.month()),za=O.clone().add(oa,"months");if(0>Z-za){var Qa=O.clone().add(oa-1,"months");za=(Z-za)/(za-Qa)}else Qa=O.clone().add(oa+1,"months"),za=(Z-za)/(Qa-za);return-(oa+za)||0}function dc(O){if(void 0===O)return this._locale._abbr;O=U(O);null!=O&&(this._locale=O);return this}function hc(){return this._locale}function Zb(O,Z){return(O%
Z+Z)%Z}function vc(O,Z,oa){return 100>O&&0<=O?new Date(O+400,Z,oa)-Tc:(new Date(O,Z,oa)).valueOf()}function ic(O,Z,oa){return 100>O&&0<=O?Date.UTC(O+400,Z,oa)-Tc:Date.UTC(O,Z,oa)}function jc(O,Z){return Z.erasAbbrRegex(O)}function Ac(){var O=[],Z=[],oa=[],za=[],Qa,db=this.eras();var fb=0;for(Qa=db.length;fb<Qa;++fb)Z.push(ca(db[fb].name)),O.push(ca(db[fb].abbr)),oa.push(ca(db[fb].narrow)),za.push(ca(db[fb].name)),za.push(ca(db[fb].abbr)),za.push(ca(db[fb].narrow));this._erasRegex=new RegExp("^("+
za.join("|")+")","i");this._erasNameRegex=new RegExp("^("+Z.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+O.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+oa.join("|")+")","i")}function wc(O,Z){t(0,[O,O.length],0,Z)}function Ec(O,Z,oa,za,Qa){if(null==O)return Aa(this,za,Qa).year;var db=ua(O,za,Qa);Z>db&&(Z=db);O=ra(O,Z,oa,za,Qa);O=ta(O.year,0,O.dayOfYear);this.year(O.getUTCFullYear());this.month(O.getUTCMonth());this.date(O.getUTCDate());return this}function Nc(O,Z){Z[cc]=M(1E3*
("0."+O))}function Fc(O){return O}function kc(O,Z,oa,za){var Qa=U();Z=k().set(za,Z);return Qa[oa](Z,O)}function ac(O,Z,oa){e(O)&&(Z=O,O=void 0);O=O||"";if(null!=Z)return kc(O,Z,oa,"month");var za=[];for(Z=0;12>Z;Z++)za[Z]=kc(O,Z,oa,"month");return za}function Gc(O,Z,oa,za){"boolean"!==typeof O&&(oa=Z=O,O=!1);e(Z)&&(oa=Z,Z=void 0);Z=Z||"";var Qa=U();O=O?Qa._week.dow:0;Qa=[];if(null!=oa)return kc(Z,(oa+O)%7,za,"day");for(oa=0;7>oa;oa++)Qa[oa]=kc(Z,(oa+O)%7,za,"day");return Qa}function ec(O,Z,oa,za){Z=
nb(Z,oa);O._milliseconds+=za*Z._milliseconds;O._days+=za*Z._days;O._months+=za*Z._months;return O._bubble()}function Oc(O){return 0>O?Math.floor(O):Math.ceil(O)}function Vb(O){return function(){return this.as(O)}}function lc(O){return function(){return this.isValid()?this._data[O]:NaN}}function Xb(O,Z,oa,za,Qa){return Qa.relativeTime(Z||1,!!oa,O,za)}function Yb(O){return(0<O)-(0>O)||+O}function xc(){if(!this.isValid())return this.localeData().invalidDate();var O=$c(this._milliseconds)/1E3,Z=$c(this._days),
oa=$c(this._months),za=this.asSeconds();if(!za)return"P0D";var Qa=Q(O/60);var db=Q(Qa/60);O%=60;Qa%=60;var fb=Q(oa/12);oa%=12;var qb=O?O.toFixed(3).replace(/\.?0+$/,""):"";var Eb=0>za?"-":"";var vb=Yb(this._months)!==Yb(za)?"-":"";var Lb=Yb(this._days)!==Yb(za)?"-":"";za=Yb(this._milliseconds)!==Yb(za)?"-":"";return Eb+"P"+(fb?vb+fb+"Y":"")+(oa?vb+oa+"M":"")+(Z?Lb+Z+"D":"")+(db||Qa||O?"T":"")+(db?za+db+"H":"")+(Qa?za+Qa+"M":"")+(O?za+qb+"S":"")}var Mb=Array.prototype.some?Array.prototype.some:function(O){var Z=
Object(this),oa=Z.length>>>0,za;for(za=0;za<oa;za++)if(za in Z&&O.call(this,Z[za],za,Z))return!0;return!1};var ia=D.momentProperties=[],Sa=!1,Pa={};D.suppressDeprecationWarnings=!1;D.deprecationHandler=null;var Ka=Object.keys?Object.keys:function(O){var Z,oa=[];for(Z in O)b(O,Z)&&oa.push(Z);return oa};var Na=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,
Ua=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ta={},Oa={},Za={},bb={},cb=/\d/,jb=/\d\d/,$a=/\d{3}/,kb=/\d{4}/,mb=/[+-]?\d{6}/,ob=/\d\d?/,Ub=/\d\d\d\d?/,Hc=/\d\d\d\d\d\d?/,yc=/\d{1,3}/,Bc=/\d{1,4}/,Gb=/[+-]?\d{1,6}/,mc=/\d+/,bc=/[+-]?\d+/,Pc=/Z|[+-]\d\d:?\d\d/gi,Qc=/Z|[+-]\d\d(?::?\d\d)?/gi,Ic=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;var Wc={};var Sc={},Wb=0,rc=1,oc=2,Ob=3,Pb=4,Qb=5,cc=
6,Xc=7,ed=8;var Nb=Array.prototype.indexOf?Array.prototype.indexOf:function(O){var Z;for(Z=0;Z<this.length;++Z)if(this[Z]===O)return Z;return-1};t("M",["MM",2],"Mo",function(){return this.month()+1});t("MMM",0,0,function(O){return this.localeData().monthsShort(this,O)});t("MMMM",0,0,function(O){return this.localeData().months(this,O)});H("month","M");bb.month=8;da("M",ob);da("MM",ob,jb);da("MMM",function(O,Z){return Z.monthsShortRegex(O)});da("MMMM",function(O,Z){return Z.monthsRegex(O)});I(["M",
"MM"],function(O,Z){Z[rc]=M(O)-1});I(["MMM","MMMM"],function(O,Z,oa,za){za=oa._locale.monthsParse(O,za,oa._strict);null!=za?Z[rc]=za:c(oa).invalidMonth=O});var Lc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),id=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;t("Y",0,0,function(){var O=this.year();return 9999>=O?u(O,4):"+"+O});t(0,["YY",2],0,function(){return this.year()%100});t(0,["YYYY",4],0,"year");t(0,["YYYYY",5],0,"year");t(0,["YYYYYY",6,!0],0,"year");H("year","y");bb.year=1;da("Y",bc);da("YY",
ob,jb);da("YYYY",Bc,kb);da("YYYYY",Gb,mb);da("YYYYYY",Gb,mb);I(["YYYYY","YYYYYY"],Wb);I("YYYY",function(O,Z){Z[Wb]=2===O.length?D.parseTwoDigitYear(O):M(O)});I("YY",function(O,Z){Z[Wb]=D.parseTwoDigitYear(O)});I("Y",function(O,Z){Z[Wb]=parseInt(O,10)});D.parseTwoDigitYear=function(O){return M(O)+(68<M(O)?1900:2E3)};var Rc=N("FullYear",!0);t("w",["ww",2],"wo","week");t("W",["WW",2],"Wo","isoWeek");H("week","w");H("isoWeek","W");bb.week=5;bb.isoWeek=5;da("w",ob);da("ww",ob,jb);da("W",ob);da("WW",ob,
jb);T(["w","ww","W","WW"],function(O,Z,oa,za){Z[za.substr(0,1)]=M(O)});t("d",0,"do","day");t("dd",0,0,function(O){return this.localeData().weekdaysMin(this,O)});t("ddd",0,0,function(O){return this.localeData().weekdaysShort(this,O)});t("dddd",0,0,function(O){return this.localeData().weekdays(this,O)});t("e",0,0,"weekday");t("E",0,0,"isoWeekday");H("day","d");H("weekday","e");H("isoWeekday","E");bb.day=11;bb.weekday=11;bb.isoWeekday=11;da("d",ob);da("e",ob);da("E",ob);da("dd",function(O,Z){return Z.weekdaysMinRegex(O)});
da("ddd",function(O,Z){return Z.weekdaysShortRegex(O)});da("dddd",function(O,Z){return Z.weekdaysRegex(O)});T(["dd","ddd","dddd"],function(O,Z,oa,za){za=oa._locale.weekdaysParse(O,za,oa._strict);null!=za?Z.d=za:c(oa).invalidWeekday=O});T(["d","e","E"],function(O,Z,oa,za){Z[za]=M(O)});var fc="Sun Mon Tue Wed Thu Fri Sat".split(" ");t("H",["HH",2],0,"hour");t("h",["hh",2],0,R);t("k",["kk",2],0,function(){return this.hours()||24});t("hmm",0,0,function(){return""+R.apply(this)+u(this.minutes(),2)});t("hmmss",
0,0,function(){return""+R.apply(this)+u(this.minutes(),2)+u(this.seconds(),2)});t("Hmm",0,0,function(){return""+this.hours()+u(this.minutes(),2)});t("Hmmss",0,0,function(){return""+this.hours()+u(this.minutes(),2)+u(this.seconds(),2)});Ea("a",!0);Ea("A",!1);H("hour","h");bb.hour=13;da("a",Ia);da("A",Ia);da("H",ob);da("h",ob);da("k",ob);da("HH",ob,jb);da("hh",ob,jb);da("kk",ob,jb);da("hmm",Ub);da("hmmss",Hc);da("Hmm",Ub);da("Hmmss",Hc);I(["H","HH"],Ob);I(["k","kk"],function(O,Z,oa){O=M(O);Z[Ob]=24===
O?0:O});I(["a","A"],function(O,Z,oa){oa._isPm=oa._locale.isPM(O);oa._meridiem=O});I(["h","hh"],function(O,Z,oa){Z[Ob]=M(O);c(oa).bigHour=!0});I("hmm",function(O,Z,oa){var za=O.length-2;Z[Ob]=M(O.substr(0,za));Z[Pb]=M(O.substr(za));c(oa).bigHour=!0});I("hmmss",function(O,Z,oa){var za=O.length-4,Qa=O.length-2;Z[Ob]=M(O.substr(0,za));Z[Pb]=M(O.substr(za,2));Z[Qb]=M(O.substr(Qa));c(oa).bigHour=!0});I("Hmm",function(O,Z,oa){oa=O.length-2;Z[Ob]=M(O.substr(0,oa));Z[Pb]=M(O.substr(oa))});I("Hmmss",function(O,
Z,oa){oa=O.length-4;var za=O.length-2;Z[Ob]=M(O.substr(0,oa));Z[Pb]=M(O.substr(oa,2));Z[Qb]=M(O.substr(za))});var ad=N("Hours",!0),$b={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,
relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Lc,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:fc,
meridiemParse:/[ap]\.?m?\.?/i},Hb={},Dc={},Cc,fd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,hd=/Z|[+-]\d\d(?::?\d\d)?/,Kc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,
!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Jb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],nd=
/^\/?Date\((-?\d+)/i,Yc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Zc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};D.createFromInputFallback=B("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(O){O._d=new Date(O._i+(O._useUTC?" UTC":""))});D.ISO_8601=function(){};D.RFC_2822=function(){};var bd=B("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var O=Ma.apply(null,arguments);return this.isValid()&&O.isValid()?O<this?this:O:r()}),Uc=B("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var O=Ma.apply(null,arguments);return this.isValid()&&O.isValid()?O>this?
this:O:r()}),Mc="year quarter month week day hour minute second millisecond".split(" ");sb("Z",":");sb("ZZ","");da("Z",Qc);da("ZZ",Qc);I(["Z","ZZ"],function(O,Z,oa){oa._useUTC=!0;oa._tzm=tb(Qc,O)});var od=/([\+\-]|\d\d)/gi;D.updateOffset=function(){};var pd=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Rb=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;nb.fn=ib.prototype;
nb.invalid=function(){return nb(NaN)};var jd=gc(1,"add"),cd=gc(-1,"subtract");D.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";D.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var dd=B("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(O){return void 0===O?this.localeData():this.locale(O)}),Tc=126227808E5;t("N",0,0,"eraAbbr");t("NN",0,0,"eraAbbr");t("NNN",0,0,"eraAbbr");t("NNNN",0,0,"eraName");t("NNNNN",0,0,"eraNarrow");
t("y",["y",1],"yo","eraYear");t("y",["yy",2],0,"eraYear");t("y",["yyy",3],0,"eraYear");t("y",["yyyy",4],0,"eraYear");da("N",jc);da("NN",jc);da("NNN",jc);da("NNNN",function(O,Z){return Z.erasNameRegex(O)});da("NNNNN",function(O,Z){return Z.erasNarrowRegex(O)});I(["N","NN","NNN","NNNN","NNNNN"],function(O,Z,oa,za){(Z=oa._locale.erasParse(O,za,oa._strict))?c(oa).era=Z:c(oa).invalidEra=O});da("y",mc);da("yy",mc);da("yyy",mc);da("yyyy",mc);da("yo",function(O,Z){return Z._eraYearOrdinalRegex||mc});I(["y",
"yy","yyy","yyyy"],Wb);I(["yo"],function(O,Z,oa,za){var Qa;oa._locale._eraYearOrdinalRegex&&(Qa=O.match(oa._locale._eraYearOrdinalRegex));Z[Wb]=oa._locale.eraYearOrdinalParse?oa._locale.eraYearOrdinalParse(O,Qa):parseInt(O,10)});t(0,["gg",2],0,function(){return this.weekYear()%100});t(0,["GG",2],0,function(){return this.isoWeekYear()%100});wc("gggg","weekYear");wc("ggggg","weekYear");wc("GGGG","isoWeekYear");wc("GGGGG","isoWeekYear");H("weekYear","gg");H("isoWeekYear","GG");bb.weekYear=1;bb.isoWeekYear=
1;da("G",bc);da("g",bc);da("GG",ob,jb);da("gg",ob,jb);da("GGGG",Bc,kb);da("gggg",Bc,kb);da("GGGGG",Gb,mb);da("ggggg",Gb,mb);T(["gggg","ggggg","GGGG","GGGGG"],function(O,Z,oa,za){Z[za.substr(0,2)]=M(O)});T(["gg","GG"],function(O,Z,oa,za){Z[za]=D.parseTwoDigitYear(O)});t("Q",0,"Qo","quarter");H("quarter","Q");bb.quarter=7;da("Q",cb);I("Q",function(O,Z){Z[rc]=3*(M(O)-1)});t("D",["DD",2],"Do","date");H("date","D");bb.date=9;da("D",ob);da("DD",ob,jb);da("Do",function(O,Z){return O?Z._dayOfMonthOrdinalParse||
Z._ordinalParse:Z._dayOfMonthOrdinalParseLenient});I(["D","DD"],oc);I("Do",function(O,Z){Z[oc]=M(O.match(ob)[0])});var kd=N("Date",!0);t("DDD",["DDDD",3],"DDDo","dayOfYear");H("dayOfYear","DDD");bb.dayOfYear=4;da("DDD",yc);da("DDDD",$a);I(["DDD","DDDD"],function(O,Z,oa){oa._dayOfYear=M(O)});t("m",["mm",2],0,"minute");H("minute","m");bb.minute=14;da("m",ob);da("mm",ob,jb);I(["m","mm"],Pb);var qd=N("Minutes",!1);t("s",["ss",2],0,"second");H("second","s");bb.second=15;da("s",ob);da("ss",ob,jb);I(["s",
"ss"],Qb);var ld=N("Seconds",!1);t("S",0,0,function(){return~~(this.millisecond()/100)});t(0,["SS",2],0,function(){return~~(this.millisecond()/10)});t(0,["SSS",3],0,"millisecond");t(0,["SSSS",4],0,function(){return 10*this.millisecond()});t(0,["SSSSS",5],0,function(){return 100*this.millisecond()});t(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});t(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});t(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});t(0,["SSSSSSSSS",
9],0,function(){return 1E6*this.millisecond()});H("millisecond","ms");bb.millisecond=16;da("S",yc,cb);da("SS",yc,jb);da("SSS",yc,$a);var zc;for(zc="SSSS";9>=zc.length;zc+="S")da(zc,mc);for(zc="S";9>=zc.length;zc+="S")I(zc,Nc);var rd=N("Milliseconds",!1);t("z",0,0,"zoneAbbr");t("zz",0,0,"zoneName");var hb=q.prototype;hb.add=jd;hb.calendar=function(O,Z){if(1===arguments.length)if(arguments[0]){var oa=arguments[0],za;if(!(za=v(oa)||f(oa)||Kb(oa)||e(oa)||uc(oa))){za=a(oa)&&!g(oa);var Qa=!1,db="years year y months month M days day d dates date D hours hour h minutes minute m seconds second s milliseconds millisecond ms".split(" "),
fb;for(fb=0;fb<db.length;fb+=1){var qb=db[fb];Qa=Qa||b(oa,qb)}za=za&&Qa}if(za||null===oa||void 0===oa)O=arguments[0],Z=void 0;else{oa=arguments[0];za=a(oa)&&!g(oa);Qa=!1;db="sameDay nextDay lastDay nextWeek lastWeek sameElse".split(" ");for(fb=0;fb<db.length;fb+=1)qb=db[fb],Qa=Qa||b(oa,qb);za&&Qa&&(Z=arguments[0],O=void 0)}}else Z=O=void 0;oa=O||Ma();za=Ab(oa,this).startOf("day");za=D.calendarFormat(this,za)||"sameElse";Qa=Z&&(z(Z[za])?Z[za].call(this,oa):Z[za]);return this.format(Qa||this.localeData().calendar(za,
this,Ma(oa)))};hb.clone=function(){return new q(this)};hb.diff=function(O,Z,oa){if(!this.isValid())return NaN;O=Ab(O,this);if(!O.isValid())return NaN;var za=6E4*(O.utcOffset()-this.utcOffset());Z=L(Z);switch(Z){case "year":Z=Ib(this,O)/12;break;case "month":Z=Ib(this,O);break;case "quarter":Z=Ib(this,O)/3;break;case "second":Z=(this-O)/1E3;break;case "minute":Z=(this-O)/6E4;break;case "hour":Z=(this-O)/36E5;break;case "day":Z=(this-O-za)/864E5;break;case "week":Z=(this-O-za)/6048E5;break;default:Z=
this-O}return oa?Z:Q(Z)};hb.endOf=function(O){O=L(O);if(void 0===O||"millisecond"===O||!this.isValid())return this;var Z=this._isUTC?ic:vc;switch(O){case "year":var oa=Z(this.year()+1,0,1)-1;break;case "quarter":oa=Z(this.year(),this.month()-this.month()%3+3,1)-1;break;case "month":oa=Z(this.year(),this.month()+1,1)-1;break;case "week":oa=Z(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case "isoWeek":oa=Z(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case "day":case "date":oa=
Z(this.year(),this.month(),this.date()+1)-1;break;case "hour":oa=this._d.valueOf();oa+=36E5-Zb(oa+(this._isUTC?0:6E4*this.utcOffset()),36E5)-1;break;case "minute":oa=this._d.valueOf();oa+=6E4-Zb(oa,6E4)-1;break;case "second":oa=this._d.valueOf(),oa+=1E3-Zb(oa,1E3)-1}this._d.setTime(oa);D.updateOffset(this,!0);return this};hb.format=function(O){O||(O=this.isUtc()?D.defaultFormatUtc:D.defaultFormat);O=F(this,O);return this.localeData().postformat(O)};hb.from=function(O,Z){return this.isValid()&&(v(O)&&
O.isValid()||Ma(O).isValid())?nb({to:this,from:O}).locale(this.locale()).humanize(!Z):this.localeData().invalidDate()};hb.fromNow=function(O){return this.from(Ma(),O)};hb.to=function(O,Z){return this.isValid()&&(v(O)&&O.isValid()||Ma(O).isValid())?nb({from:this,to:O}).locale(this.locale()).humanize(!Z):this.localeData().invalidDate()};hb.toNow=function(O){return this.to(Ma(),O)};hb.get=function(O){O=L(O);return z(this[O])?this[O]():this};hb.invalidAt=function(){return c(this).overflow};hb.isAfter=
function(O,Z){var oa=v(O)?O:Ma(O);if(!this.isValid()||!oa.isValid())return!1;Z=L(Z)||"millisecond";return"millisecond"===Z?this.valueOf()>oa.valueOf():oa.valueOf()<this.clone().startOf(Z).valueOf()};hb.isBefore=function(O,Z){var oa=v(O)?O:Ma(O);if(!this.isValid()||!oa.isValid())return!1;Z=L(Z)||"millisecond";return"millisecond"===Z?this.valueOf()<oa.valueOf():this.clone().endOf(Z).valueOf()<oa.valueOf()};hb.isBetween=function(O,Z,oa,za){O=v(O)?O:Ma(O);Z=v(Z)?Z:Ma(Z);if(!(this.isValid()&&O.isValid()&&
Z.isValid()))return!1;za=za||"()";return("("===za[0]?this.isAfter(O,oa):!this.isBefore(O,oa))&&(")"===za[1]?this.isBefore(Z,oa):!this.isAfter(Z,oa))};hb.isSame=function(O,Z){var oa=v(O)?O:Ma(O);if(!this.isValid()||!oa.isValid())return!1;Z=L(Z)||"millisecond";if("millisecond"===Z)return this.valueOf()===oa.valueOf();oa=oa.valueOf();return this.clone().startOf(Z).valueOf()<=oa&&oa<=this.clone().endOf(Z).valueOf()};hb.isSameOrAfter=function(O,Z){return this.isSame(O,Z)||this.isAfter(O,Z)};hb.isSameOrBefore=
function(O,Z){return this.isSame(O,Z)||this.isBefore(O,Z)};hb.isValid=function(){return l(this)};hb.lang=dd;hb.locale=dc;hb.localeData=hc;hb.max=Uc;hb.min=bd;hb.parsingFlags=function(){return h({},c(this))};hb.set=function(O,Z){if("object"===typeof O){O=J(O);var oa=S(O),za;for(za=0;za<oa.length;za++)this[oa[za].unit](O[oa[za].unit])}else if(O=L(O),z(this[O]))return this[O](Z);return this};hb.startOf=function(O){O=L(O);if(void 0===O||"millisecond"===O||!this.isValid())return this;var Z=this._isUTC?
ic:vc;switch(O){case "year":var oa=Z(this.year(),0,1);break;case "quarter":oa=Z(this.year(),this.month()-this.month()%3,1);break;case "month":oa=Z(this.year(),this.month(),1);break;case "week":oa=Z(this.year(),this.month(),this.date()-this.weekday());break;case "isoWeek":oa=Z(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case "day":case "date":oa=Z(this.year(),this.month(),this.date());break;case "hour":oa=this._d.valueOf();oa-=Zb(oa+(this._isUTC?0:6E4*this.utcOffset()),36E5);
break;case "minute":oa=this._d.valueOf();oa-=Zb(oa,6E4);break;case "second":oa=this._d.valueOf(),oa-=Zb(oa,1E3)}this._d.setTime(oa);D.updateOffset(this,!0);return this};hb.subtract=cd;hb.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};hb.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};hb.toDate=
function(){return new Date(this.valueOf())};hb.toISOString=function(O){if(!this.isValid())return null;var Z=(O=!0!==O)?this.clone().utc():this;return 0>Z.year()||9999<Z.year()?F(Z,O?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):z(Date.prototype.toISOString)?O?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",F(Z,"Z")):F(Z,O?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};hb.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+
this._i+" */)";var O="moment",Z="";this.isLocal()||(O=0===this.utcOffset()?"moment.utc":"moment.parseZone",Z="Z");O="["+O+'("]';var oa=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(O+oa+"-MM-DD[T]HH:mm:ss.SSS"+(Z+'[")]'))};"undefined"!==typeof Symbol&&null!=Symbol["for"]&&(hb[Symbol["for"]("nodejs.util.inspect.custom")]=function(){return"Moment\x3c"+this.format()+"\x3e"});hb.toJSON=function(){return this.isValid()?this.toISOString():null};hb.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};
hb.unix=function(){return Math.floor(this.valueOf()/1E3)};hb.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};hb.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};hb.eraName=function(){var O,Z=this.localeData().eras();var oa=0;for(O=Z.length;oa<O;++oa){var za=this.clone().startOf("day").valueOf();if(Z[oa].since<=za&&za<=Z[oa].until||Z[oa].until<=za&&za<=Z[oa].since)return Z[oa].name}return""};hb.eraNarrow=function(){var O,
Z=this.localeData().eras();var oa=0;for(O=Z.length;oa<O;++oa){var za=this.clone().startOf("day").valueOf();if(Z[oa].since<=za&&za<=Z[oa].until||Z[oa].until<=za&&za<=Z[oa].since)return Z[oa].narrow}return""};hb.eraAbbr=function(){var O,Z=this.localeData().eras();var oa=0;for(O=Z.length;oa<O;++oa){var za=this.clone().startOf("day").valueOf();if(Z[oa].since<=za&&za<=Z[oa].until||Z[oa].until<=za&&za<=Z[oa].since)return Z[oa].abbr}return""};hb.eraYear=function(){var O,Z=this.localeData().eras();var oa=
0;for(O=Z.length;oa<O;++oa){var za=Z[oa].since<=Z[oa].until?1:-1;var Qa=this.clone().startOf("day").valueOf();if(Z[oa].since<=Qa&&Qa<=Z[oa].until||Z[oa].until<=Qa&&Qa<=Z[oa].since)return(this.year()-D(Z[oa].since).year())*za+Z[oa].offset}return this.year()};hb.year=Rc;hb.isLeapYear=function(){return P(this.year())};hb.weekYear=function(O){return Ec.call(this,O,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};hb.isoWeekYear=function(O){return Ec.call(this,O,this.isoWeek(),
this.isoWeekday(),1,4)};hb.quarter=hb.quarters=function(O){return null==O?Math.ceil((this.month()+1)/3):this.month(3*(O-1)+this.month()%3)};hb.month=ya;hb.daysInMonth=function(){return ba(this.year(),this.month())};hb.week=hb.weeks=function(O){var Z=this.localeData().week(this);return null==O?Z:this.add(7*(O-Z),"d")};hb.isoWeek=hb.isoWeeks=function(O){var Z=Aa(this,1,4).week;return null==O?Z:this.add(7*(O-Z),"d")};hb.weeksInYear=function(){var O=this.localeData()._week;return ua(this.year(),O.dow,
O.doy)};hb.weeksInWeekYear=function(){var O=this.localeData()._week;return ua(this.weekYear(),O.dow,O.doy)};hb.isoWeeksInYear=function(){return ua(this.year(),1,4)};hb.isoWeeksInISOWeekYear=function(){return ua(this.isoWeekYear(),1,4)};hb.date=kd;hb.day=hb.days=function(O){if(!this.isValid())return null!=O?this:NaN;var Z=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=O){var oa=this.localeData();"string"===typeof O&&(isNaN(O)?(O=oa.weekdaysParse(O),O="number"===typeof O?O:null):O=parseInt(O,
10));return this.add(O-Z,"d")}return Z};hb.weekday=function(O){if(!this.isValid())return null!=O?this:NaN;var Z=(this.day()+7-this.localeData()._week.dow)%7;return null==O?Z:this.add(O-Z,"d")};hb.isoWeekday=function(O){if(!this.isValid())return null!=O?this:NaN;if(null!=O){var Z=this.localeData();O="string"===typeof O?Z.weekdaysParse(O)%7||7:isNaN(O)?null:O;return this.day(this.day()%7?O:O-7)}return this.day()||7};hb.dayOfYear=function(O){var Z=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/
864E5)+1;return null==O?Z:this.add(O-Z,"d")};hb.hour=hb.hours=ad;hb.minute=hb.minutes=qd;hb.second=hb.seconds=ld;hb.millisecond=hb.milliseconds=rd;hb.utcOffset=function(O,Z,oa){var za=this._offset||0,Qa;if(!this.isValid())return null!=O?this:NaN;if(null!=O){if("string"===typeof O){if(O=tb(Qc,O),null===O)return this}else 16>Math.abs(O)&&!oa&&(O*=60);!this._isUTC&&Z&&(Qa=-Math.round(this._d.getTimezoneOffset()));this._offset=O;this._isUTC=!0;null!=Qa&&this.add(Qa,"m");za!==O&&(!Z||this._changeInProgress?
Sb(this,nb(O-za,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,D.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?za:-Math.round(this._d.getTimezoneOffset())};hb.utc=function(O){return this.utcOffset(0,O)};hb.local=function(O){this._isUTC&&(this.utcOffset(0,O),this._isUTC=!1,O&&this.subtract(-Math.round(this._d.getTimezoneOffset()),"m"));return this};hb.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var O=
tb(Pc,this._i);null!=O?this.utcOffset(O):this.utcOffset(0,!0)}return this};hb.hasAlignedHourOffset=function(O){if(!this.isValid())return!1;O=O?Ma(O).utcOffset():0;return 0===(this.utcOffset()-O)%60};hb.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};hb.isLocal=function(){return this.isValid()?!this._isUTC:!1};hb.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};hb.isUtc=Cb;hb.isUTC=Cb;hb.zoneAbbr=function(){return this._isUTC?
"UTC":""};hb.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};hb.dates=B("dates accessor is deprecated. Use date instead.",kd);hb.months=B("months accessor is deprecated. Use month instead",ya);hb.years=B("years accessor is deprecated. Use year instead",Rc);hb.zone=B("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(O,Z){return null!=O?("string"!==typeof O&&(O=-O),this.utcOffset(O,Z),this):-this.utcOffset()});
hb.isDSTShifted=B("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!d(this._isDSTShifted))return this._isDSTShifted;var O={};m(O,this);O=La(O);if(O._a){var Z=O._isUTC?k(O._a):Ma(O._a);var oa;if(oa=this.isValid()){O=O._a;Z=Z.toArray();oa=Math.min(O.length,Z.length);var za=Math.abs(O.length-Z.length),Qa=0,db;for(db=0;db<oa;db++)M(O[db])!==M(Z[db])&&Qa++;oa=0<Qa+za}this._isDSTShifted=oa}else this._isDSTShifted=!1;return this._isDSTShifted});
var zb=y.prototype;zb.calendar=function(O,Z,oa){O=this._calendar[O]||this._calendar.sameElse;return z(O)?O.call(Z,oa):O};zb.longDateFormat=function(O){var Z=this._longDateFormat[O],oa=this._longDateFormat[O.toUpperCase()];if(Z||!oa)return Z;this._longDateFormat[O]=oa.match(Na).map(function(za){return"MMMM"===za||"MM"===za||"DD"===za||"dddd"===za?za.slice(1):za}).join("");return this._longDateFormat[O]};zb.invalidDate=function(){return this._invalidDate};zb.ordinal=function(O){return this._ordinal.replace("%d",
O)};zb.preparse=Fc;zb.postformat=Fc;zb.relativeTime=function(O,Z,oa,za){var Qa=this._relativeTime[oa];return z(Qa)?Qa(O,Z,oa,za):Qa.replace(/%d/i,O)};zb.pastFuture=function(O,Z){var oa=this._relativeTime[0<O?"future":"past"];return z(oa)?oa(Z):oa.replace(/%s/i,Z)};zb.set=function(O){var Z;for(Z in O)if(b(O,Z)){var oa=O[Z];z(oa)?this[Z]=oa:this["_"+Z]=oa}this._config=O;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};
zb.eras=function(O,Z){var oa,za=this._eras||U("en")._eras;var Qa=0;for(oa=za.length;Qa<oa;++Qa){switch(typeof za[Qa].since){case "string":var db=D(za[Qa].since).startOf("day");za[Qa].since=db.valueOf()}switch(typeof za[Qa].until){case "undefined":za[Qa].until=Infinity;break;case "string":db=D(za[Qa].until).startOf("day").valueOf(),za[Qa].until=db.valueOf()}}return za};zb.erasParse=function(O,Z,oa){var za,Qa=this.eras();O=O.toUpperCase();var db=0;for(za=Qa.length;db<za;++db){var fb=Qa[db].name.toUpperCase();
var qb=Qa[db].abbr.toUpperCase();var Eb=Qa[db].narrow.toUpperCase();if(oa)switch(Z){case "N":case "NN":case "NNN":if(qb===O)return Qa[db];break;case "NNNN":if(fb===O)return Qa[db];break;case "NNNNN":if(Eb===O)return Qa[db]}else if(0<=[fb,qb,Eb].indexOf(O))return Qa[db]}};zb.erasConvertYear=function(O,Z){var oa=O.since<=O.until?1:-1;return void 0===Z?D(O.since).year():D(O.since).year()+(Z-O.offset)*oa};zb.erasAbbrRegex=function(O){b(this,"_erasAbbrRegex")||Ac.call(this);return O?this._erasAbbrRegex:
this._erasRegex};zb.erasNameRegex=function(O){b(this,"_erasNameRegex")||Ac.call(this);return O?this._erasNameRegex:this._erasRegex};zb.erasNarrowRegex=function(O){b(this,"_erasNarrowRegex")||Ac.call(this);return O?this._erasNarrowRegex:this._erasRegex};zb.months=function(O,Z){return O?A(this._months)?this._months[O.month()]:this._months[(this._months.isFormat||id).test(Z)?"format":"standalone"][O.month()]:A(this._months)?this._months:this._months.standalone};zb.monthsShort=function(O,Z){return O?
A(this._monthsShort)?this._monthsShort[O.month()]:this._monthsShort[id.test(Z)?"format":"standalone"][O.month()]:A(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};zb.monthsParse=function(O,Z,oa){var za;if(this._monthsParseExact){a:{O=O.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],za=0;12>za;++za){var Qa=k([2E3,za]);this._shortMonthsParse[za]=this.monthsShort(Qa,"").toLocaleLowerCase();this._longMonthsParse[za]=
this.months(Qa,"").toLocaleLowerCase()}if(oa)Z="MMM"===Z?Nb.call(this._shortMonthsParse,O):Nb.call(this._longMonthsParse,O);else if("MMM"===Z){Z=Nb.call(this._shortMonthsParse,O);if(-1!==Z)break a;Z=Nb.call(this._longMonthsParse,O)}else{Z=Nb.call(this._longMonthsParse,O);if(-1!==Z)break a;Z=Nb.call(this._shortMonthsParse,O)}Z=-1!==Z?Z:null}return Z}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(za=0;12>za;za++)if(Qa=k([2E3,za]),oa&&!this._longMonthsParse[za]&&
(this._longMonthsParse[za]=new RegExp("^"+this.months(Qa,"").replace(".","")+"$","i"),this._shortMonthsParse[za]=new RegExp("^"+this.monthsShort(Qa,"").replace(".","")+"$","i")),oa||this._monthsParse[za]||(Qa="^"+this.months(Qa,"")+"|^"+this.monthsShort(Qa,""),this._monthsParse[za]=new RegExp(Qa.replace(".",""),"i")),oa&&"MMMM"===Z&&this._longMonthsParse[za].test(O)||oa&&"MMM"===Z&&this._shortMonthsParse[za].test(O)||!oa&&this._monthsParse[za].test(O))return za};zb.monthsRegex=function(O){if(this._monthsParseExact)return b(this,
"_monthsRegex")||Da.call(this),O?this._monthsStrictRegex:this._monthsRegex;b(this,"_monthsRegex")||(this._monthsRegex=Ic);return this._monthsStrictRegex&&O?this._monthsStrictRegex:this._monthsRegex};zb.monthsShortRegex=function(O){if(this._monthsParseExact)return b(this,"_monthsRegex")||Da.call(this),O?this._monthsShortStrictRegex:this._monthsShortRegex;b(this,"_monthsShortRegex")||(this._monthsShortRegex=Ic);return this._monthsShortStrictRegex&&O?this._monthsShortStrictRegex:this._monthsShortRegex};
zb.week=function(O){return Aa(O,this._week.dow,this._week.doy).week};zb.firstDayOfYear=function(){return this._week.doy};zb.firstDayOfWeek=function(){return this._week.dow};zb.weekdays=function(O,Z){var oa=A(this._weekdays)?this._weekdays:this._weekdays[O&&!0!==O&&this._weekdays.isFormat.test(Z)?"format":"standalone"];return!0===O?Ja(oa,this._week.dow):O?oa[O.day()]:oa};zb.weekdaysMin=function(O){return!0===O?Ja(this._weekdaysMin,this._week.dow):O?this._weekdaysMin[O.day()]:this._weekdaysMin};zb.weekdaysShort=
function(O){return!0===O?Ja(this._weekdaysShort,this._week.dow):O?this._weekdaysShort[O.day()]:this._weekdaysShort};zb.weekdaysParse=function(O,Z,oa){var za;if(this._weekdaysParseExact)return ha.call(this,O,Z,oa);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(za=0;7>za;za++){var Qa=k([2E3,1]).day(za);oa&&!this._fullWeekdaysParse[za]&&(this._fullWeekdaysParse[za]=new RegExp("^"+this.weekdays(Qa,"").replace(".","\\.?")+
"$","i"),this._shortWeekdaysParse[za]=new RegExp("^"+this.weekdaysShort(Qa,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[za]=new RegExp("^"+this.weekdaysMin(Qa,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[za]||(Qa="^"+this.weekdays(Qa,"")+"|^"+this.weekdaysShort(Qa,"")+"|^"+this.weekdaysMin(Qa,""),this._weekdaysParse[za]=new RegExp(Qa.replace(".",""),"i"));if(oa&&"dddd"===Z&&this._fullWeekdaysParse[za].test(O)||oa&&"ddd"===Z&&this._shortWeekdaysParse[za].test(O)||oa&&"dd"===Z&&
this._minWeekdaysParse[za].test(O)||!oa&&this._weekdaysParse[za].test(O))return za}};zb.weekdaysRegex=function(O){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||ma.call(this),O?this._weekdaysStrictRegex:this._weekdaysRegex;b(this,"_weekdaysRegex")||(this._weekdaysRegex=Ic);return this._weekdaysStrictRegex&&O?this._weekdaysStrictRegex:this._weekdaysRegex};zb.weekdaysShortRegex=function(O){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||ma.call(this),O?this._weekdaysShortStrictRegex:
this._weekdaysShortRegex;b(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Ic);return this._weekdaysShortStrictRegex&&O?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};zb.weekdaysMinRegex=function(O){if(this._weekdaysParseExact)return b(this,"_weekdaysRegex")||ma.call(this),O?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;b(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ic);return this._weekdaysMinStrictRegex&&O?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};zb.isPM=
function(O){return"p"===(O+"").toLowerCase().charAt(0)};zb.meridiem=function(O,Z,oa){return 11<O?oa?"pm":"PM":oa?"am":"AM"};Xa("en",{eras:[{since:"0001-01-01",until:Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(O){var Z=O%10;Z=1===M(O%100/10)?"th":1===Z?"st":2===Z?"nd":3===Z?"rd":"th";return O+Z}});D.lang=B("moment.lang is deprecated. Use moment.locale instead.",
Xa);D.langData=B("moment.langData is deprecated. Use moment.localeData instead.",U);var sc=Math.abs,sd=Vb("ms"),td=Vb("s"),ud=Vb("m"),vd=Vb("h"),wd=Vb("d"),xd=Vb("w"),yd=Vb("M"),zd=Vb("Q"),Ad=Vb("y"),Bd=lc("milliseconds"),Cd=lc("seconds"),Dd=lc("minutes"),Ed=lc("hours"),Fd=lc("days"),Gd=lc("months"),Hd=lc("years"),pc=Math.round,Jc={ss:44,s:45,m:45,h:22,d:26,w:null,M:11},$c=Math.abs,wb=ib.prototype;wb.isValid=function(){return this._isValid};wb.abs=function(){var O=this._data;this._milliseconds=sc(this._milliseconds);
this._days=sc(this._days);this._months=sc(this._months);O.milliseconds=sc(O.milliseconds);O.seconds=sc(O.seconds);O.minutes=sc(O.minutes);O.hours=sc(O.hours);O.months=sc(O.months);O.years=sc(O.years);return this};wb.add=function(O,Z){return ec(this,O,Z,1)};wb.subtract=function(O,Z){return ec(this,O,Z,-1)};wb.as=function(O){if(!this.isValid())return NaN;var Z=this._milliseconds;O=L(O);if("month"===O||"quarter"===O||"year"===O){var oa=this._days+Z/864E5;oa=this._months+4800*oa/146097;switch(O){case "month":return oa;
case "quarter":return oa/3;case "year":return oa/12}}else switch(oa=this._days+Math.round(146097*this._months/4800),O){case "week":return oa/7+Z/6048E5;case "day":return oa+Z/864E5;case "hour":return 24*oa+Z/36E5;case "minute":return 1440*oa+Z/6E4;case "second":return 86400*oa+Z/1E3;case "millisecond":return Math.floor(864E5*oa)+Z;default:throw Error("Unknown unit "+O);}};wb.asMilliseconds=sd;wb.asSeconds=td;wb.asMinutes=ud;wb.asHours=vd;wb.asDays=wd;wb.asWeeks=xd;wb.asMonths=yd;wb.asQuarters=zd;
wb.asYears=Ad;wb.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*M(this._months/12):NaN};wb._bubble=function(){var O=this._milliseconds,Z=this._days,oa=this._months,za=this._data;0<=O&&0<=Z&&0<=oa||0>=O&&0>=Z&&0>=oa||(O+=864E5*Oc(146097*oa/4800+Z),oa=Z=0);za.milliseconds=O%1E3;O=Q(O/1E3);za.seconds=O%60;O=Q(O/60);za.minutes=O%60;O=Q(O/60);za.hours=O%24;Z+=Q(O/24);O=Q(4800*Z/146097);oa+=O;Z-=Oc(146097*O/4800);O=Q(oa/12);za.days=Z;za.months=
oa%12;za.years=O;return this};wb.clone=function(){return nb(this)};wb.get=function(O){O=L(O);return this.isValid()?this[O+"s"]():NaN};wb.milliseconds=Bd;wb.seconds=Cd;wb.minutes=Dd;wb.hours=Ed;wb.days=Fd;wb.weeks=function(){return Q(this.days()/7)};wb.months=Gd;wb.years=Hd;wb.humanize=function(O,Z){if(!this.isValid())return this.localeData().invalidDate();var oa=!1,za=Jc;"object"===typeof O&&(Z=O,O=!1);"boolean"===typeof O&&(oa=O);"object"===typeof Z&&(za=Object.assign({},Jc,Z),null!=Z.s&&null==Z.ss&&
(za.ss=Z.s-1));var Qa=this.localeData();var db=!oa;var fb=nb(this).abs(),qb=pc(fb.as("s")),Eb=pc(fb.as("m")),vb=pc(fb.as("h")),Lb=pc(fb.as("d")),tc=pc(fb.as("M")),Vc=pc(fb.as("w"));fb=pc(fb.as("y"));qb=qb<=za.ss&&["s",qb]||qb<za.s&&["ss",qb]||1>=Eb&&["m"]||Eb<za.m&&["mm",Eb]||1>=vb&&["h"]||vb<za.h&&["hh",vb]||1>=Lb&&["d"]||Lb<za.d&&["dd",Lb];null!=za.w&&(qb=qb||1>=Vc&&["w"]||Vc<za.w&&["ww",Vc]);qb=qb||1>=tc&&["M"]||tc<za.M&&["MM",tc]||1>=fb&&["y"]||["yy",fb];qb[2]=db;qb[3]=0<+this;qb[4]=Qa;db=Xb.apply(null,
qb);oa&&(db=Qa.pastFuture(+this,db));return Qa.postformat(db)};wb.toISOString=xc;wb.toString=xc;wb.toJSON=xc;wb.locale=dc;wb.localeData=hc;wb.toIsoString=B("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xc);wb.lang=dd;t("X",0,0,"unix");t("x",0,0,"valueOf");da("x",bc);da("X",/[+-]?\d+(\.\d{1,3})?/);I("X",function(O,Z,oa){oa._d=new Date(1E3*parseFloat(O))});I("x",function(O,Z,oa){oa._d=new Date(M(O))});D.version="2.29.1";var md=Ma;D.fn=hb;D.min=function(){var O=
[].slice.call(arguments,0);return eb("isBefore",O)};D.max=function(){var O=[].slice.call(arguments,0);return eb("isAfter",O)};D.now=function(){return Date.now?Date.now():+new Date};D.utc=k;D.unix=function(O){return Ma(1E3*O)};D.months=function(O,Z){return ac(O,Z,"months")};D.isDate=f;D.locale=Xa;D.invalid=r;D.duration=nb;D.isMoment=v;D.weekdays=function(O,Z,oa){return Gc(O,Z,oa,"weekdays")};D.parseZone=function(){return Ma.apply(null,arguments).parseZone()};D.localeData=U;D.isDuration=lb;D.monthsShort=
function(O,Z){return ac(O,Z,"monthsShort")};D.weekdaysMin=function(O,Z,oa){return Gc(O,Z,oa,"weekdaysMin")};D.defineLocale=Ba;D.updateLocale=function(O,Z){if(null!=Z){var oa=$b;if(null!=Hb[O]&&null!=Hb[O].parentLocale)Hb[O].set(x(Hb[O]._config,Z));else{var za=Ya(O);null!=za&&(oa=za._config);Z=x(oa,Z);null==za&&(Z.abbr=O);za=new y(Z);za.parentLocale=Hb[O];Hb[O]=za}Xa(O)}else null!=Hb[O]&&(null!=Hb[O].parentLocale?(Hb[O]=Hb[O].parentLocale,O===Xa()&&Xa(O)):null!=Hb[O]&&delete Hb[O]);return Hb[O]};D.locales=
function(){return Ka(Hb)};D.weekdaysShort=function(O,Z,oa){return Gc(O,Z,oa,"weekdaysShort")};D.normalizeUnits=L;D.relativeTimeRounding=function(O){return void 0===O?pc:"function"===typeof O?(pc=O,!0):!1};D.relativeTimeThreshold=function(O,Z){if(void 0===Jc[O])return!1;if(void 0===Z)return Jc[O];Jc[O]=Z;"s"===O&&(Jc.ss=Z-1);return!0};D.calendarFormat=function(O,Z){var oa=O.diff(Z,"days",!0);return-6>oa?"sameElse":-1>oa?"lastWeek":0>oa?"lastDay":1>oa?"sameDay":2>oa?"nextDay":7>oa?"nextWeek":"sameElse"};
D.prototype=hb;D.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return D})},"arcgisonline/esriGeowConfig":function(){define(["require","exports"],function(D,A){return window.esriGeowConfig||{}})},"arcgisonline/pages/utils/formatters":function(){define("require exports tslib ../pageUtil ./arrays ./icons dojo/i18n!../../nls/arcgisonline dojo/date/locale dojo/number dojo/text!../dijit/Card/_Owner.html dojo/text!../dijit/Card/_OwnerVerified.html dojo/string moment/moment".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);return function(){function r(){}r.timeFromPresent=function(m){return l["default"].utc(m).fromNow()};r.fullDate=function(m){return m&&-1<m?f["default"].format(new Date(m),{selector:"date",formatLength:"medium"}):""};r.timeOnly=function(m){return m&&
-1<m?f["default"].format(new Date(m),{selector:"time",formatLength:"short"}):""};r.dayOfWeek=function(m){return m&&-1<m?f["default"].format(new Date(m),{selector:"date",datePattern:"EEEE"}):""};r.fullDateEnhanced=function(m){var q=l["default"](new Date).diff(l["default"](m),"days"),v=l["default"](new Date).isSame(m,"day");return v?e["default"].filters.today:!v&&2>q?e["default"].myOrganization.membersTab.yesterday:15>q?c["default"].substitute(e["default"].myOrganization.membersTab.daysAgo,{num:q}):
this.fullDate(m)};r.completeDate=function(m){return m&&-1<m?f["default"].format(new Date(m),{formatLength:"long"}):""};r.capitalize=function(m){return m.charAt(0).toUpperCase()+m.slice(1)};r.shortenNumber=function(m){return 1E6<=m?n["default"].format(Math.round(m/1E5)/10)+"M":1E3<=m?n["default"].format(Math.round(m/100)/10)+"K":""+m};r.empty=function(m){return null!==m&&void 0!==m?m:""};r.hide=function(m){return m?"":"hide"};r.show=function(m){return m?"hide":""};r.firstChar=function(m){var q;return null!==
(q=null===m||void 0===m?void 0:m.charAt(0).toUpperCase())&&void 0!==q?q:""};r.stripHTML=function(m){var q,v;m=(new DOMParser).parseFromString(m,"text/html");return null!==(v=m.body&&(null!==(q=m.body.textContent)&&void 0!==q?q:m.body.innerText))&&void 0!==v?v:""};r.formatCategoryChip=function(m){var q=m;"/"===(null===m||void 0===m?void 0:m[0])&&(q=m.slice(1));return q=q.split("/").join(" / ")};r.lowerCase=function(m){var q;return null!==(q=(null===m||void 0===m?void 0:m.toLowerCase)&&m.toLowerCase())&&
void 0!==q?q:""};r.hyphenate=function(m){return(m||"").replace(/\s+/g,"-")};r.formatDisplayName=function(m,q,v){var B=(null===m||void 0===m?void 0:m.portal)&&m.portal.portalUser&&m.portal.portalUser.userRole;B=m&&(m.isAdminView?B&&B.canUpdateOrgItems():m.canUpdate);var w="Data Store"===(null===m||void 0===m?void 0:m.type);m&&B&&q&&!m.isUtilityNetwork&&(m.isHostedService?v+=" ("+(m.isDataView?e["default"].viewsWidget.hostedView:"Feature Service"===m.type?e["default"].viewsWidget.hostedData:e["default"].viewsWidget.hostedService)+
")":m.isLocatorView?v+=" ("+e["default"].viewsWidget.locatorView+")":m.isPhotoLocations&&(v+=" ("+e["default"].viewsWidget.photoLocations+")"));w&&(v=b["default"].formatDataStoreItem(v,m.typeKeywords));return v};r.formatNumViews=function(m){return n["default"].format(null!==m&&void 0!==m?m:0,{pattern:"#,###,###,##0"})};r.formatViewsLabel=function(m){m="file"!==m.classification||g["default"].includes(m.types,"is-views")||g["default"].includes(m.types,"is-pdf")?"viewsColon":"downloadsLbl";return e["default"].viewsWidget[m]};
r.formatOwnerText=function(m,q,v){var B,w,z;if(q)return null!==(w=null===(B=m.verified)||void 0===B?void 0:B.name)&&void 0!==w?w:m.owner;q=(null===(z=m.verified)||void 0===z?void 0:z.name)&&m.verified.url;z=c["default"].substitute(h["default"],{item:m,i18n:e["default"]});return q?(m=c["default"].substitute(k["default"],{item:m,i18n:e["default"]}),v?'\x3cspan class\x3d"js-owner-section inline-block"\x3e'+m.replace("js-owner-section","")+' \x3c/span\x3e\x3cdiv class\x3d"item__managed-by-wrapper"\x3e'+
e["default"].itemProperties.managedByOwner+" "+z.replace("js-owner-section","")+"\x3c/div\x3e":m):z};r.getAccess=function(m){return e["default"].itemSharingLabel[m]};r.getAccessIcon=function(m){return{"private":d["default"].lock["16"],shared:d["default"].users["16"],org:d["default"].organization["16"],"public":d["default"].globe["16"]}[m]};r.getGroupAccess=function(m){return{"public":e["default"].groupsPage.everyone,"private":e["default"].groupsPage.groupMembers,org:e["default"].groupsPage.organization}[m]};
r.getGroupAccessIcon=function(m){return{"public":d["default"].inline.globe["16"],"private":d["default"].inline.lock["16"],org:d["default"].inline.organization["16"]}[m]};return r}()})},"arcgisonline/pages/pageUtil":function(){define("require exports tslib ../esriGeowConfig ../map/core/canUseForPublish ./dijit/Alert ./utils/arrays ./utils/strings ./utils/dom ../sharing/util ../sharing/dijit/dialog/DownloadImageDlg dijit/registry dijit/Dialog dojo/_base/lang dojo/_base/kernel dojo/dom-attr dojo/dom-construct dojo/Deferred dojo/json dojo/on dojo/hash dojo/string dojo/number dojo/query dojo/sniff dojo/keys dojo/promise/all dojo/io-query esri/lang esri/arcgis/Portal esri/geometry/Point esri/tileUtils esri/urlUtils esri/tasks/Geoprocessor dojo/i18n!../nls/arcgisonline".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E,F,G,H,L,J,S,P,Q,M){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);z=a.__importDefault(z);x=a.__importDefault(x);y=a.__importDefault(y);
u=a.__importDefault(u);t=a.__importDefault(t);C=a.__importDefault(C);E=a.__importDefault(E);F=a.__importDefault(F);G=a.__importDefault(G);H=a.__importDefault(H);L=a.__importDefault(L);J=a.__importDefault(J);S=a.__importDefault(S);P=a.__importDefault(P);Q=a.__importDefault(Q);M=a.__importDefault(M);return function(){function N(){}N.editorDefaults=function(K){return{id:K,"aria-label":K,plugins:["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull",
"|","insertOrderedList","insertUnorderedList","|","createEsriLink","unlink","insertEsriImage","removeFormat","|","undo","redo","|","viewsourcesanitize","|",{name:"dijit._editor.plugins.FontChoice",command:"fontSize","class":"dijitFontSizeWrap",custom:["2","3","4","5","6"]}],style:"font-family: '"+("vi"===(b["default"].userInfo&&b["default"].userInfo.culture)?"SST Vietnamese":"Avenir Next")+"', 'Avenir', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif; font-size: 15px;",height:"140px"}};N.tagDefaults=
function(K){return{id:K,minWidth:"100%",maxWidth:"100%"}};N.getQueryParams=function(){return G["default"].queryToObject(window.location.search.slice(1))};N.setQueryParams=function(K,X){N[X?"pushCurrentLocation":"replaceCurrentLocation"](window.location.pathname+"?"+G["default"].objectToQuery(K)+window.location.hash)};N.updateQueryParams=function(K,X){N.setQueryParams(a.__assign(a.__assign({},N.getQueryParams()),K),X)};N.removeQueryParams=function(K,X){var da=N.getQueryParams();K.forEach(function(Y){return delete da[Y]});
N.setQueryParams(da,X)};N.clearAllQueryParams=function(){N.setQueryParams({})};N.replaceCurrentLocation=function(K){history&&history.replaceState&&history.replaceState({},document.title,K)};N.pushCurrentLocation=function(K){null===history||void 0===history?void 0:history.pushState({},document.title,K)};N.applyCSSClassToStringMatch=function(K,X,da){var Y=X.indexOf(K),aa=X.slice(0,Y),ca=X.slice(Y,Y+K.length),I=X.slice(Y+K.length);return-1<Y?0===Y?(K=X.slice(0,K.length),'\x3cspan class\x3d"'+da+'"\x3e'+
K+"\x3c/span\x3e"+I):aa+'\x3cspan class\x3d"'+da+'"\x3e'+ca+"\x3c/span\x3e"+I:X};N.isEmptyObject=function(K){for(var X in K)if(K.hasOwnProperty(X))return!1;return!0};N.isJson=function(K){try{w["default"].parse(K)}catch(X){return!1}return!0};N.extentToString=function(K){return K=K instanceof Array&&2===K.length&&2===K[0].length&&2===K[1].length?[K[0].join(","),K[1].join(",")].join():K&&K+""||""};N.getClosestValue=function(K,X,da){return da-K>=X-da?X:K};N.findClosestValue=function(K,X){if(X<=K[0])return K[0];
if(X>=K[K.length-1])return K[K.length-1];for(var da=0,Y=K.length,aa=0;da<Y;){aa=Math.floor((da+Y)/2);if(K[aa]===X)break;if(X<K[aa]){if(0<aa&&X>K[aa-1])return N.getClosestValue(K[aa-1],K[aa],X);Y=aa}else{if(aa<K.length-1&&X<K[aa+1])return N.getClosestValue(K[aa],K[aa+1],X);da=aa+1}}return K[aa]};N.isFavorite=function(K){var X=K.portal,da=X.getPortalUser();da=da&&da.favGroupId;var Y=new B["default"];H["default"].isDefined(K.isFavorite)?Y.resolve(K.isFavorite):da?(K.isFavorite=!1,X.queryItems('(group:"'+
da+'" AND id:"'+K.id+'")',!0).then(function(aa){K.isFavorite=aa&&0<aa.total;Y.resolve(K.isFavorite)},function(){Y.resolve(!1)})):(K.isFavorite=!1,Y.resolve(!1));return Y};N.isConfigurableApplication=function(K){var X=new B["default"],da=K.owner,Y=K.itemData||{},aa=K.itemControl&&-1<K.itemControl.indexOf("admin"),ca=K.typeKeywords||[],I=ca.some(function(T){return T.match(/(sourceId#).*/gi)});H["default"].isDefined(K.isConfigurableApp)?X.resolve(K.isConfigurableApp):K.portal.isPortal&&!K.isOwner&&aa&&
-1<da.indexOf("esri_")?(K.isConfigurableApp=!1,X.resolve(!1)):K.type&&(0===K.type.indexOf("Hub")&&"Hub Initiative Template"!==K.type&&"Hub Event"!==K.type||"Site Application"===K.type)?(K.isConfigurableApp=K.canUpdate,X.resolve(K.isConfigurableApp)):K.canUpdate&&"Web Mapping Application"===K.type?(K.isConfigurableApp=!1,e["default"].includes(ca,"WABTemplate")?(K.isConfigurableApp=!1,X.resolve(!1)):e["default"].includes(ca,"selfConfigured")?(K.isConfigurableApp=Y&&(Y.source||h["default"].isHostedTemplateItem(K.url)||
!I),X.resolve(K.isConfigurableApp)):e["default"].includes(ca,"configurableApp")?(K.isConfigurableApp=!0,X.resolve(K.isConfigurableApp)):Y&&Y.source?h["default"].request({url:K.portal.url+"content/items/"+Y.source+"/data"}).then(function(T){K.isConfigurableApp=!(!T||!T.configurationSettings);X.resolve(K.isConfigurableApp)},function(){K.isConfigurableApp=!1;X.resolve(K.isConfigurableApp)}):X.resolve(!1)):(K.isConfigurableApp=!1,X.resolve(!1));return X};N.isFilePublishableByUser=function(K){var X=new B["default"],
da=K.portal,Y=da.getPortalUser(),aa=null===Y||void 0===Y?void 0:Y.userRole,ca=da.supportsHostedServices;Y=da.helperServices&&da.helperServices.rasterAnalytics&&H["default"].isDefined(da.helperServices.rasterAnalytics.url);var I=aa&&aa.canCreateItem();I=(ca=ca&&I&&K.isAdmin)&&aa.canPublishTiles();var T=ca&&aa.canPublishFeatures();aa=ca&&aa.canPublishScenes();var ba=K.resultData&&K.resultData.length||null;Y=da.isPortal&&ca&&Y;da=!da.isPortal||da.supportsSceneServices;da=H["default"].isDefined(K.canPublishFile)?
K.canPublishFile:T&&(e["default"].includes(K.types,"is-feature")||e["default"].includes(K.types,"is-featureCollection")&&!ba&&!K.isMarkup)||I&&e["default"].includes(K.types,"is-tile")||aa&&da&&e["default"].includes(K.types,"is-scene-package")||I&&e["default"].includes(K.types,"is-vector-tile")||Y&&e["default"].includes(K.types,"is-image-collection")||ca&&e["default"].includes(K.typeKeywords,"Photo locations")||ca&&e["default"].includes(K.types,"is-notebook")?!0:!1;K.canPublishFile=da;X.resolve(da);
return X};N.isServicePublishableByUser=function(K,X){var da=new B["default"],Y=K.portal.getPortalUser();Y=(Y=null===Y||void 0===Y?void 0:Y.userRole)&&Y.canCreateItem();var aa=K.serviceInfo||{},ca=K.isSDS,I=K.isTable&&!X,T=K.isLocationTrackingService;Y=!(K.isMultiServicesView||aa.isMultiServicesView||!K.isHostedService||"Feature Service"!==K.type||!Y||!ca||I||T);K.canPublish=Y;da.resolve(Y);return da};N.canPublishTileServiceFromFeatureService=function(K){var X=new B["default"],da=K.portal.getPortalUser();
da=null===da||void 0===da?void 0:da.userRole;var Y=N.isServicePublishableByUser(K)&&K.isAdmin&&da.canPublishTiles(),aa=e["default"].includes(K.typeKeywords,"Spatiotemporal"),ca=(K.resultData||[]).filter(function(T){return"Map Service"===T.type});da=K.featureLayers;var I=K.isHostedService&&(da||[]).every(function(T){return N.canUseForPublish(K,T,!0)});N.isServicePublishableByUser(K).then(function(T){T=!(!(T&&Y&&I)||aa||ca&&ca.length);K.canPublishTiles=T;X.resolve(T)});return X};N.canPublishVectorTileServiceFromFeatureService=
function(K){var X=new B["default"],da=null===b["default"]||void 0===b["default"]?void 0:b["default"].publishVectorTilesFromFeaturesEnabled,Y=(K.resultData||[]).filter(function(aa){return"Vector Tile Service"===aa.type});N.isServicePublishableByUser(K).then(function(aa){aa=!(!da||!aa||Y&&Y.length);K.canPublishVectorTiles=aa;X.resolve(aa)});return X};N.canPublishWFSServiceFromFeatureService=function(K){var X=new B["default"],da=K.portal,Y=da.getPortalUser();Y=null===Y||void 0===Y?void 0:Y.userRole;
e["default"].includes(K.typeKeywords,"View Service");var aa=e["default"].includes(K.typeKeywords,"Spatiotemporal"),ca=N.isServicePublishableByUser(K),I=ca&&(!da.isPortal||da.isPortal&&!aa),T=ca&&K.isAdmin&&Y.canPublishFeatures(),ba=(K.resultData||[]).filter(function(pa){return"WFS"===pa.type});N.isServicePublishableByUser(K).then(function(pa){pa=!(!(pa&&I&&T)||!da.isPortal&&aa||ba&&ba.length);K.canPublishWFS=pa;X.resolve(pa)});return X};N.canPublishOGCFeatureServerFromFeatureService=function(K){var X=
new B["default"],da=K.portal.isPortal,Y=K.portal.getPortalUser();Y=null===Y||void 0===Y?void 0:Y.userRole;var aa=N.isServicePublishableByUser(K)&&!da&&K.isAdmin&&Y.canPublishFeatures(),ca=(K.resultData||[]).filter(function(T){return"OGCFeatureServer"===T.type}),I=e["default"].includes(K.typeKeywords,"Spatiotemporal");N.isServicePublishableByUser(K).then(function(T){T=!(!T||!aa||I||ca&&ca.length);K.canPublishOGCFeatures=T;X.resolve(T)});return X};N.canPublishSceneServiceFromFeatureService=function(K){var X=
this,da=new B["default"],Y=K.portal,aa=Y.getPortalUser();aa=null===aa||void 0===aa?void 0:aa.userRole;var ca=N.isServicePublishableByUser(K),I=Y&&!Y.isPortal&&ca&&K.isAdmin&&aa.canPublishScenes();Y=K.featureLayers||[];var T=K.isHostedService&&Y.every(function(Ha){return X.canUseForPublish(K,Ha,!0,"scene")}),ba=K.tables||[],pa=Y.every(function(Ha){return Ha&&"esriGeometryPoint"===Ha.geometryType}),ya=Y.every(function(Ha){return Ha&&"esriGeometryMultiPatch"===Ha.geometryType}),Da=(K.resultData||[]).filter(function(Ha){return"Scene Service"===
Ha.type});N.isServicePublishableByUser(K).then(function(Ha){Ha=!(!(Ha&&I&&T&&(pa||ya))||Da&&Da.length||ba.length||K.hasGeocodeReviewTable);K.canPublishScenes=Ha;da.resolve(Ha)});return da};N.canPublishViewServiceFromFeatureService=function(K){var X=new B["default"],da=K.portal||{},Y=da.getPortalUser();Y=null===Y||void 0===Y?void 0:Y.userRole;var aa=K.isAdmin&&Y.canPublishFeatures(),ca=N.isMultipatchFeatureService(K),I=K.isLocationTrackingService&&!da.isPortal,T=e["default"].includes(K.typeKeywords,
"View Service");N.isServicePublishableByUser(K,!0).then(function(ba){ba=ca||!ba||!aa||T||I?!1:!0;K.canPublishView=ba;X.resolve(ba)});return X};N.canPublishImageServiceAsTiled=function(K){var X,da=new B["default"],Y=N.canPublishFromImageService(K),aa=null===(X=K.portal.getPortalUser())||void 0===X?void 0:X.userRole.canPublishTiledImagery();K.canPublishImageServiceAsTiled=Y&&aa&&!N.isTiledOnlyImageryService(K.serviceInfo);da.resolve(K.canPublishImageServiceAsTiled);return da};N.canPublishImageServiceAsDynamic=
function(K){var X,da=new B["default"],Y=N.canPublishFromImageService(K),aa=null===(X=K.portal.getPortalUser())||void 0===X?void 0:X.userRole.canPublishDynamicImagery();K.canPublishImageServiceAsDynamic=Y&&aa&&N.isTiledOnlyImageryService(K.serviceInfo);da.resolve(K.canPublishImageServiceAsDynamic);return da};N.canEnableAttachments=function(K){var X=new B["default"],da=K.isDataView,Y=K.isLocationTrackingService;da=H["default"].isDefined(K.canEnableAttachments)?K.canEnableAttachments:!(!K.isHostedService||
da||Y||!K.canUpdate);K.canEnableAttachments=da;X.resolve(da);return X};N.canEditViewAttachments=function(K){H["default"].isDefined(K.canEditViewAttachments)||(K.canEditViewAttachments=!!(K.isHostedService&&K.isDataView&&K.canUpdate));return K.canEditViewAttachments};N.canAppendData=function(K){var X,da=new B["default"],Y=e["default"].includes(K.typeKeywords,"View Service"),aa=e["default"].includes(K.typeKeywords,"Cloud Drive"),ca=K.isLocationTrackingService;Y=!aa&&!Y&&!ca&&K.isAdmin&&K.isHostedService&&
(K.portal.isPortal&&(null===(X=K.serviceInfo)||void 0===X?void 0:X.supportsAppend)||!K.portal.isPortal&&(K.layers||[]).some(function(I){return I.supportsAppend}));K.canAppendData=Y;da.resolve(Y);return da};N.canUseForPublish=function(K,X,da,Y){K=e["default"].find(K.itemData&&K.itemData.layers||[],function(ca){return ca.id===X.id});var aa=r["default"].clone(X);K&&K.layerDefinition&&(aa.drawingInfo=r["default"].mixin(aa.drawingInfo||{},K.layerDefinition.drawingInfo||{}));return g["default"](r["default"].mixin({},
aa),da,Y)};N.canPublishFromImageService=function(K){var X,da=K.portal,Y=K.isAdmin,aa=K.isOwner,ca=K.isHostedService,I=K.serviceInfo;K=K.type;var T=null===(X=da.getPortalUser())||void 0===X?void 0:X.userRole;X=ca&&!da.isPortal;return"Image Service"===K&&(null===I||void 0===I?void 0:I.bandCount)&&(Y||aa)&&X&&(null===T||void 0===T?void 0:T.canCreateItem())&&(null===T||void 0===T?void 0:T.canPublishImageCollection())};N.isTiledOnlyImageryService=function(K){K=K.capabilities.split(",").map(function(X){return X.toLowerCase().trim()});
return e["default"].includes(K,"tilesonly")};N.isTiledImageryService=function(K){var X=new B["default"];K="Image Service"===K.type&&e["default"].includesSome(K.typeKeywords,["Elevation 3D Layer","Tiled Imagery"]);X.resolve(K);return X};N.isServiceEditableByUser=function(K){var X=K.isOrgItem,da=K.isHostedService,Y=K.serviceInfo,aa=K.canEditService,ca=K.portal,I=new B["default"],T=ca.getPortalUser();ca=(null===T||void 0===T?void 0:T.userRole)&&(null===T||void 0===T?void 0:T.userRole.canEditFeaturesFullControl());
X=T&&X;T=-1<((null===Y||void 0===Y?void 0:Y.capabilities)||"").indexOf("Editing");Y=null===Y||void 0===Y?void 0:Y.isMultiServicesView;H["default"].isDefined(aa)||(K.canEditService=!(!da||Y||!(K.canUpdate||T&&ca&&X)));I.resolve(K.canEditService);return I};N.isExportableByUser=function(K){var X,da=K.portal,Y=K.serviceInfo,aa=K.isLocationTrackingService,ca=K.isHostedService,I=K.isAdmin,T=K.type,ba=new B["default"],pa=da.getPortalUser();Y=!!(-1<(null===(X=null===Y||void 0===Y?void 0:Y.capabilities)||
void 0===X?void 0:X.indexOf("Extract")));X=(null===pa||void 0===pa?void 0:pa.userRole)&&pa.userRole.canCreateItem();X=pa&&Y&&(!pa.isOrgUser||X);H["default"].isDefined(K.canExport)||(K.canExport=!(!ca||!pa||da.isPortal&&(!da.isPortal||aa)||!("Feature Service"===T&&I||X)));ba.resolve(K.canExport);return ba};N.isOverwriteableService=function(K,X){var da,Y=K.type,aa=K.serviceInfo,ca=K.adminServiceInfo,I=K.isPortal,T=K.isSDS,ba=K.typeKeywords,pa=K.sourceData,ya=new B["default"],Da={shapefile:1,"file geodatabase":1,
geojson:1};ca=null===(da=I&&!T?aa:ca)||void 0===da?void 0:da.capabilities;da=f["default"].stringToArray(ca||"",",",!0);da=e["default"].includes(da,"ChangeTracking");!X&&e["default"].includes(ba,"Cloud Drive")&&ya.resolve(!1);K.isHostedService&&"Feature Service"===Y&&K.serviceInfo&&!1===K.serviceInfo.sourceSchemaChangesAllowed&&ya.resolve(!1);!K.isAdmin||!K.isHostedService||"Feature Service"!==Y||aa.syncEnabled||K.isDataView||da?ya.resolve(!1):pa&&pa.owner===K.owner&&(pa.type&&pa.type.toLowerCase())in
Da?ya.resolve(!0):!pa||"CSV"!==pa.type&&"Microsoft Excel"!==pa.type?ya.resolve(!1):N.fetchPublishParameters(K).then(function(Ha){K.publishParameters=Ha;ya.resolve(!!Ha)});return ya};N.isOverwriteableCloudService=function(K){var X=new B["default"],da=K.cloudProviderInfo,Y=K.sourceData;if(e["default"].includes(K.typeKeywords,"Cloud Drive")&&da&&da.mimeType){var aa=!Y;K.sourceData=Y||{type:-1!==da.mimeType.indexOf("csv")?"CSV":"Microsoft Excel"};N.isOverwriteableService(K,!0).then(function(ca){aa&&(K.sourceData=
null);X.resolve(!!ca)})}else X.resolve(!1);return X};N.isApplicationCreateableFromItem=function(K){var X=new B["default"],da=K.portal.getPortalUser(),Y=null===da||void 0===da?void 0:da.userRole;Y=Y&&Y.canCreateItem()||da&&!da.isOrgUser;var aa=!1;if(H["default"].isDefined(K.isApplicationCreateableFromItem))X.resolve(K.isApplicationCreateableFromItem);else{K.isApplicationCreateableFromItem=aa;if(Y)if(e["default"].includes(K.types,"is-map")||e["default"].includes(K.types,"is-scene"))K.isApplicationCreateableFromItem=
!0,K.privileges.push("can-create-app"),e["default"].includes(K.types,"is-map")&&b["default"].showCreateDashboard&&da&&da.isOrgUser&&K.privileges.push("can-create-dashboard-item"),aa=!0;else if(e["default"].includes(K.typeKeywords,"Configurable")&&e["default"].includes(K.typeKeywords,"createAppWithoutMap")&&!e["default"].includes(K.typeKeywords,"Web AppBuilder for ArcGIS")||e["default"].includes(K.typeKeywords,"Web AppBuilder for ArcGIS")&&da.isOrgUser)K.isApplicationCreateableFromItem=!0,K.types.push("is-hostedTemplate"),
aa=!0;X.resolve(aa)}return X};N.isMultipatchFeatureService=function(K){var X=K.isHostedService,da=K.typeKeywords,Y=K.serviceInfo;K="Feature Service"===K.type&&(X||e["default"].includes(da,"Hosted"));Y=((null===Y||void 0===Y?void 0:Y.layers)||[]).some(function(aa){return aa&&aa.geometryType&&"esriGeometryMultiPatch"===aa.geometryType});return K&&Y};N.registerItemActions=function(K,X,da,Y,aa){t["default"]("[class*\x3djs-action-]",X).forEach(function(ca){var I=q["default"].get(ca,"data-action");da[I]&&
K.own(z["default"](ca,"click",function(T){T.preventDefault();if(aa&&aa(I))T.stopPropagation();else da[I](r["default"].mixin({},{evt:T,item:K.item,user:K.portalUser,page:Y,scope:K}))}))},K)};N.calculateExpectedTiles=function(K,X,da){var Y=new J["default"](X.xmax,X.ymin,X.spatialReference);X=new J["default"](X.xmin,X.ymax,X.spatialReference);X=S["default"].getContainingTileCoords(K,X,da);K=S["default"].getContainingTileCoords(K,Y,da);K=(K.row+1-X.row)*(K.col+1-X.col);return 0>=K?1:K};N.sizeInMB=function(K){var X=
K||0;0<K&&(X=K/1048567);X=Math.round(100*X)/100;return u["default"].format(X)};N.getHashParts=function(){return x["default"]().split("/")};N.splitHashParts=function(K){return K?K.split("/"):[""]};N.removeUrlQueryParameter=function(K,X){if(K){var da=P["default"].urlToObject(K),Y=da.path,aa=x["default"]()?"#"+x["default"]():"";if(!(X&&da.query&&da.query[X]))return K;delete da.query[X];var ca=0,I;for(I in da.query)da.query.hasOwnProperty(I)&&I!==X&&(Y=""+Y+(0===ca?"?":"\x26")+I+"\x3d"+encodeURIComponent(da.query[I]),
ca++);return Y+aa}return K};N.needsToken=function(K,X){var da=K.portal&&K.portal.getPortalUser(),Y=K.serverToken||da&&da.token;return K&&"WFS"!==K.type&&"OGCFeatureServer"!==K.type&&da&&((K.isServiceProxy||K.hasKMLItemData)&&"public"!==K.access||K.isHostedService&&(K.isAdmin||"public"!==K.access)||K.isFeatureCollection&&"public"!==K.access)?X+(Y?"?token\x3d"+Y:""):X};N.getNeededToken=function(K){var X=K.portal&&K.portal.getPortalUser(),da=K.serverToken||X&&X.token;return K&&"WFS"!==K.type&&X&&((K.isServiceProxy||
K.hasKMLItemData)&&"public"!==K.access||K.isHostedService&&(K.isAdmin||"public"!==K.access)||K.isFeatureCollection&&"public"!==K.access)?da:null};N.addToken=function(K){return(K=N.needsToken(K,K.url))&&-1<K.indexOf("?token\x3d")};N.needsSSL=function(K,X){return K.portal.allSSL||-1<window.location.protocol.indexOf("https:")?h["default"].getSecureUrl(K.url):X};N.registerKeystrokeHandler=function(K,X){return z["default"](K,10>=C["default"]("ie")||7>C["default"]("trident")?"keydown":"keyup",X)};N.registerEnterSpaceKeystrokeHandler=
function(K,X){return z["default"](K,"keyup",function(da){da.keyCode!==E["default"].ENTER&&da.keyCode!==E["default"].SPACE||X(da)})};N.sendAllResources=function(K,X,da,Y,aa,ca){var I=new B["default"];da=r["default"].clone(da);var T=[],ba=da.splice(0,X);for(H["default"].isDefined(ca)||(ca=!0);ba&&0<ba.length;)T.push(h["default"].request({url:K,content:Y(ba)},r["default"].mixin({usePost:ca},aa||{}))),ba=da.splice(0,X);F["default"](T).then(function(pa){return I.resolve(pa)},function(pa){return I.reject(pa)});
return I};N.sendAllResourcesWithDelay=function(K,X,da,Y,aa){function ca(){setTimeout(function(){(Ha=T.splice(0,X))&&0<Ha.length&&(h["default"].request({url:K,content:Y(Ha)},{usePost:!0}).then(function(ta){ya++;ba.push(ta);ya>=I&&pa.resolve(ba)},function(ta){ya++;ya>=I&&pa.reject(ta)}),Da++,ca())},0===Da?0:aa)}var I=Math.ceil(da.length/X),T=r["default"].clone(da),ba=[],pa=new B["default"],ya=0,Da=0,Ha;ca();return pa};N.sendAllResourcesSerially=function(K,X,da,Y){function aa(){(pa=I.splice(0,X))&&0<
pa.length&&h["default"].request({url:K,content:Y(pa)},{usePost:!0}).then(function(Da){ya++;T.push(Da);ya>=ca?ba.resolve(T):aa()},function(Da){ya++;ya>=ca?ba.reject(Da):aa()})}var ca=Math.ceil(da.length/X),I=r["default"].clone(da),T=[],ba=new B["default"],pa,ya=0;aa();return ba};N.fetchAllResources=function(K,X,da){var Y=new B["default"],aa=1,ca=[],I=100,T,ba,pa,ya;X=X||{};da=da||"results";X.start=aa;!X.num||X.num>I?X.num=I:I=X.num;h["default"].request({url:K,content:X}).then(function(Da){if(Da&&Da[da]){ca=
ca.concat(Da[da]);aa=Da.nextStart;T=Da.total-ca.length;ba=Math.ceil(T/I);pa=[];if(-1<aa)for(ya=0;ya<ba;ya++)X.start=aa+ya*I,pa.push(h["default"].request({url:K,content:X}));F["default"](pa).then(function(Ha){Ha.forEach(function(ta){ca=ca.concat(ta[da])});Y.resolve(ca)},function(Ha){return Y.reject(Ha)})}else Y.resolve(ca)},function(Da){return Y.reject(Da)});return Y};N.deleteItem=function(K){var X=K.userItemUrl+"/delete";if(K&&"Deep Learning Package"===K.type){var da=new B["default"];N.uninstallDeepLearningPackage(K).then(function(Y){Y&&
"uninstallFail"===Y.messageCode?da.resolve(Y):h["default"].request({url:X},{usePost:!0}).then(function(aa){return da.resolve(aa)})});return da}return h["default"].request({url:X},{usePost:!0})};N.uninstallDeepLearningPackage=function(K){var X=K.portal,da=new B["default"],Y=X.helperServices&&X.helperServices.rasterAnalytics,aa=(K.portal.getPortalUser()||{}).token,ca={messageCode:"uninstallFail"},I={messageCode:"uninstallSuccess"};if(X&&X.isPortal&&Y&&H["default"].isDefined(Y.url)){X={modelItemId:w["default"].stringify({itemId:K.id})};
var T=Y.url+"/UninstallDeepLearningModel";da=(new Q["default"](T+(aa?"?token\x3d"+aa:""))).submitJob(X).then(function(ba){var pa=ba&&ba.results&&ba.results.uninstallSucceed&&ba.results.uninstallSucceed.paramUrl;ba=ba.jobId;return pa&&ba?h["default"].request({url:T+"/jobs/"+ba+"/"+pa},{usePost:!0}).then(function(ya){return(ya=ya&&ya.value)&&ya===K.id?I:ca}):ca},function(){return ca})}else da.resolve(I);return da};N.getUserProfile=function(K){K="string"===typeof K?{username:K}:K;var X=b["default"].restBaseUrl+
"community/users/"+K.username,da=h["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");return h["default"].request({url:X}).then(function(Y){return r["default"].mixin(Y,{thumbnailUrl:Y.thumbnail?L["default"].PortalUtil.formatUrl(X+"/info/"+Y.thumbnail):da},K)})};N.getItemSharing=function(K){var X=new B["default"],da=K.portal,Y=K.itemOwner,aa=K.access,ca=K.canUpdate,I=K.isOwner,T=K.userItemUrl,ba=da.getPortalUser(),pa={access:aa};ca&&(I||ba&&ba.canViewOthersOrgItems)?h["default"].request({url:T}).then(function(ya){var Da=
(pa=ya.sharing)&&pa.groups;"shared"===pa.access&&Da&&1===Da.length&&Da[0]===ba.favGroupId&&(pa={access:"private"});Da&&(ya={userGroups:ba.getGroups(),ownerGroups:K.isOwner?null:Y.getGroups()},F["default"](ya).then(function(Ha){(Ha=(Ha.userGroups||[]).concat(Ha.ownerGroups||[]).filter(function(ta){return e["default"].find(Da,function(xa){return ta.id===xa})}).map(function(ta){return'id: "'+ta.id+'"'}))&&Ha.length?da.queryGroups({q:Ha.join(" OR "),num:100},!0).then(function(ta){pa.groups=(ta.results||
[]).sort(function(xa,ra){return ra.title.localeCompare(xa.title)});pa.total=ta.total;K=r["default"].mixin(K,{sharing:pa});X.resolve(pa)}):(delete pa.groups,K=r["default"].mixin(K,{sharing:pa}),X.resolve(pa))}))}):(K=r["default"].mixin(K,{sharing:pa}),X.resolve(pa));return X};N.protectItem=function(K){return h["default"].request({url:K.userItemUrl+"/protect"},{usePost:!0})};N.unprotectItem=function(K){return h["default"].request({url:K.userItemUrl+"/unprotect"},{usePost:!0})};N.protectGroup=function(K){return h["default"].request({url:b["default"].restBaseUrl+
"community/groups/"+K.id+"/protect"},{usePost:!0})};N.unprotectGroup=function(K){return h["default"].request({url:b["default"].restBaseUrl+"community/groups/"+K.id+"/unprotect"},{usePost:!0})};N.fetchPublishParameters=function(K){var X=K.sourceData;K=K.itemUrl;var da=new B["default"];K+="/info/publishParameters.json";!X||"CSV"!==X.type&&"Microsoft Excel"!==X.type?da.resolve(!1):h["default"].request({url:K}).then(function(Y){return da.resolve(Y)},function(){return da.resolve(!1)});return da};N.fetchRegisteredAppInfo=
function(K){K=h["default"].getSecureUrl(K.userItemUrl+"/registeredAppInfo");return h["default"].request({url:K})};N.refreshAppSecret=function(K){K=h["default"].getSecureUrl(b["default"].restBaseUrl)+"oauth2/apps/"+K+"/resetSecret";return h["default"].request({url:K},{usePost:!0})};N.registerApp=function(K,X){var da=X?"apps/"+K.client_id+"/update":"registerApp";da=h["default"].getSecureUrl(b["default"].restBaseUrl)+"oauth2/"+da;return h["default"].request({url:da,content:K},{usePost:!0})};N.unregisterApp=
function(K){K=h["default"].getSecureUrl(b["default"].restBaseUrl)+"oauth2/apps/"+K+"/unregister";return h["default"].request({url:K},{usePost:!0})};N.enableAttachments=function(K,X,da){return h["default"].request({url:K.adminUrl+"/"+X.id+"/updateDefinition",content:{updateDefinition:w["default"].stringify({hasAttachments:!!da})}},{usePost:!0}).then(function(){return X.hasAttachments=da})};N.isItemListable=function(K){var X=K.portal.getPortalUser().userRole,da=X&&X.isCustom()&&X.canManageMarketplace();
X=X&&X.isAdmin()||da;da=e["default"].includes(K.typeKeywords,"Service Proxy")&&K.sourceUrl&&(-1<K.sourceUrl.indexOf(".arcgis.com")||-1<K.sourceUrl.indexOf(".esri.com"));var Y=b["default"].self,aa=Y.canListApps;Y=Y.canListData;!K.listed&&b["default"].self&&X?Y&&da?(X=new B["default"],X.resolve("Geoprocessing Service"===K.type)):aa&&(e["default"].includes(K.typeKeywords,"Registered App")||e["default"].includes(["ArcGIS Pro Add In","AppBuilder Widget Package"],K.type))?(X=new B["default"],X.resolve(!0)):
Y&&"Rule Package"===K.type?(X=new B["default"],X.resolve(!0)):Y?X=N.isServiceListable(K):(X=new B["default"],X.resolve(!1)):(X=new B["default"],X.resolve(!1));return X};N.isServiceListable=function(K){var X=b["default"].restBaseUrl+"portals/isServerRegistered",da=K.type?K.type.toLowerCase():"",Y=K.url&&h["default"].parseUrl(K.url);"web map"===da?(K=new B["default"],K.resolve(!0)):e["default"].includes(["feature service","map service","image service","scene service"],da)?h["default"].isHostedServiceItem(K)?
(K=new B["default"],K.resolve(!0)):Y&&H["default"].isDefined(Y.protocol)&&H["default"].isDefined(Y.host)?K=h["default"].request({url:X,content:{serverUrl:Y.protocol+"://"+Y.host}}).then(function(aa){return aa.registered}):(K=new B["default"],K.resolve(!1)):(K=new B["default"],K.resolve(!1));return K};N.findLayer=function(K,X){var da=parseInt(K,10);if(H["default"].isDefined(da))return(X||[]).filter(function(Y){return Y.id===da}).shift()};N.getServiceNameFromUrl=function(K){var X=K.url||"",da=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|WMServer|SceneServer|VectorTileServer|StreamServer)).*/gi,
Y=X.replace(da,"").replace(/^.*\//,"").replace(/\?.*$/,"");X=X.replace(/http.+\/(arcgis\/rest\/services|\/.*\/rest\/services|arcgis\/services)\/?/gi,"").match(da);try{return X?decodeURI(Y):K.title}catch(aa){return Y}};N.getAppPurpose=function(K){K=K.typeKeywords;if(e["default"].includes(K,"Ready To Use")||e["default"].includes(K,"Ready to Use"))return M["default"].itemProperties.readyToUse;if(e["default"].includes(K,"selfConfigured"))return M["default"].itemProperties.selfConfigurable;if(e["default"].includes(K,
"Configurable"))return M["default"].itemProperties.configurable;if(e["default"].includes(K,"Code Sample"))return M["default"].itemProperties.codeSample};N.getAppApi=function(K){var X={"Windows Mobile":M["default"].common.mobile,"ArcGIS for iPhone":M["default"].common.ios,"ArcGIS for Windows Phone":M["default"].common.windowsPhone,"ArcGIS for Windows Store":M["default"].common.windowsStore,"ArcGIS for Windows Universal":M["default"].common.windowsUniversal,"ArcGIS for Android":M["default"].common.Android,
Flex:M["default"].common.Flex,JavaScript:M["default"].common.JavaScript,Silverlight:M["default"].common.Silverlight,"Web ADF":M["default"].common.WebADF,Other:M["default"].common.other,Java:"Java",Qt:"Qt",".NET-Windows Desktop":".NET\u2013Windows Desktop",WPF:"WPF","OS X":"OS X"};return Object.keys(X).reduce(function(da,Y){e["default"].includes(K.typeKeywords,Y)&&(da=X[Y]);return da},"")};N.linkify=function(K){K=h["default"].htmlEncode(K);for(var X=K.indexOf("http"),da,Y;-1<X;){da=K.substring(X,X+
8);if(-1<da.indexOf("http://")||-1<da.indexOf("https://")){if(da=!0,6<X&&(Y=K.substring(X-6,X-1),"href\x3d"===Y.toLowerCase()&&(da=!1,X=X+K.toLowerCase().substring("/a",X).length+1)),da){da=K.indexOf(" ",X);-1===da&&(da=K.length);Y=K.substring(X,da);var aa='\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+Y+'" target\x3d"_blank"\x3e'+Y+"\x3c/a\x3e\x3c/span\x3e";K=K.substring(0,X)+aa+K.substring(da,K.length);X=X+aa.length-Y.length+5}}else X+=1;X=K.indexOf("http",X)}return K};N.includeTimestampInRequest=
function(K){if(10>=C["default"]("ie")||7>C["default"]("trident"))K.ts=(new Date).getTime();return K};N.fetchIDPConfig=function(){var K=h["default"].getSecureUrl(b["default"].restBaseUrl)+"portals/self/idp";return h["default"].request({url:K})};N.checkEnterpriseGroupStore=function(){var K=new B["default"],X=h["default"].getPortalAdminBaseUrl()+"/security/config";h["default"].request({url:X}).then(function(da){da=null===da||void 0===da?void 0:da.groupStoreConfig;var Y=!1,aa=null;if(null===da||void 0===
da?0:da.type)aa=null===da||void 0===da?void 0:da.type.toLowerCase(),"builtin"!==aa&&"saml"!==aa&&(Y=!0);K.resolve({storeType:aa,supportsEnterpriseGroups:Y})},function(){K.resolve({supportsEnterpriseGroups:!1})});return K};N.enterpriseGroupMatches=function(K,X){return!(!H["default"].isDefined(K)||!H["default"].isDefined(X)||K.toLowerCase()!==X.toLowerCase())};N.isAmazonBasedTileService=function(K){return!h["default"].isPortal()&&/tiles[\s\S]*.arcgis.com\//gi.test(K)};N.createDialogWrapper=function(K,
X){var da=(new l["default"](K)).placeAt(document.body);da.setContent(X);z["default"].once(da,"hide",function(){return da.destroyRecursive()});return da};N.createSpecifiedDialog=function(K,X,da){var Y=X?new K(X):new K,aa=Y._dialog||Y.dialog;if(aa)z["default"].once(aa,"hide",function(){var ca;aa.destroyRecursive();Y.destroyRecursive();null===(ca=null===da||void 0===da?void 0:da.focus)||void 0===ca?void 0:ca.call(da)});return Y};N.showAlert=function(K,X,da,Y){void 0===da&&(da="");void 0===Y&&(Y=!1);
N.clearAlerts();return new d["default"]({type:K,text:X,cssClasses:da,preventAutoDimiss:Y},v["default"].create("div",null,document.body))};N.clearAlerts=function(){n["default"].forEachNode(document.querySelectorAll(".alert"),function(K){(K=c["default"].byNode(K))&&K.destroy&&K.destroy()})};N.showAlertList=function(K,X){var da=X.reduce(function(Y,aa){return Y+"\x3cli\x3e"+aa+"\x3c/li\x3e"},"");return new d["default"]({type:K,text:"",listHTML:"\x3cul\x3e"+da+"\x3c/ul\x3e"},v["default"].create("div",
null,document.body))};N.getPageRangeString=function(K,X){var da=m["default"].locale?m["default"].locale.substring(0,2):"en",Y=X?X:M["default"].common.pageRange;K.total&&1E4<=K.total&&(K.total="10000+");return y["default"].substitute(Y["en"===da?"en":"other"],K)};N.sortListByStrProp=function(K,X,da){K.sort(function(Y,aa){var ca=Y[X].toLowerCase(),I=aa[X].toLowerCase();return da?ca<I?1:ca>I?-1:0:ca<I?-1:ca>I?1:0})};N.formatDataStoreItem=function(K,X){if((X||[]).length)if(X.some(function(da){return e["default"].includes(da.toLowerCase(),
"cloud")}))K+=" ("+M["default"].AddDatastoreDlg.cloud+")";else if(-1!==X.indexOf("egdb"))K+=" ("+M["default"].AddDatastoreDlg.database+")";else if(-1!==X.indexOf("folder"))K+=" ("+M["default"].AddDatastoreDlg.folder+")";else if(-1!==X.indexOf("fileShare")||-1!==X.indexOf("hdfs")||-1!==X.indexOf("hive")||-1!==X.indexOf("dataStore"))K+=" ("+M["default"].AddDatastoreDlg.bigdata+")";return K};N.downloadImage=function(K){var X;K=K.item;var da=K.portal,Y=new k["default"],aa=new B["default"],ca=null===(X=
da.helperServices)||void 0===X?void 0:X.rasterUtilities;X=(K.portal.getPortalUser()||{}).token;if((null===da||void 0===da?0:da.isPortal)&&(null===ca||void 0===ca?0:ca.url)){K={inputImageLayer:w["default"].stringify({itemId:K.id})};var I=ca.url+"/DownloadRaster",T=X?"?token\x3d"+X:"";aa=(new Q["default"](I+T)).submitJob(K,function(ba){var pa,ya="esriJobSucceeded"===(null===ba||void 0===ba?void 0:ba.jobStatus)&&(null===(pa=ba.results)||void 0===pa?void 0:pa.outputRaster);ba=ba.jobId;Y.updateMessage(M["default"].downloadImageDlg.succeeded);
return ya&&ba?(Y.hide(),h["default"].request({url:I+"/jobs/"+ba+"/results/outputRaster"},{usePost:!0}).then(function(Da){var Ha;return null===(Ha=null===Da||void 0===Da?void 0:Da.value)||void 0===Ha?void 0:Ha[0]})):""},function(ba){Y.setCancelUrl(ca.url+"/DownloadRaster/jobs/"+ba.jobId+"/cancel"+T)});Y.show();Y.updateMessage(M["default"].downloadImageDlg.message)}else aa.resolve("");return aa};N.cancelDownloadImage=function(K,X){(new Q["default"](K)).cancelJob(X,null,null)};N.goToPage=function(K,
X){var da=X.username,Y=X.orgId,aa=h["default"].getUser(),ca=null===aa||void 0===aa?void 0:aa.userRole,I=(null===aa||void 0===aa?void 0:aa.username)===da;da=("groups"===K&&(null===ca||void 0===ca?0:ca.canViewOrgGroups())||"content"===K&&(null===ca||void 0===ca?0:ca.canManageItems())||(null===ca||void 0===ca?0:ca.isAdmin())||I)&&Y===aa.orgId?""+b["default"].baseUrl+K+".html"+(I?"":"?user\x3d"+da):b["default"].baseUrl+"search.html?q\x3downer:%22"+da+"%22\x26t\x3d"+K+"\x26restrict\x3dfalse";window.open(da,
"_blank")};return N}()})},"arcgisonline/map/core/canUseForPublish":function(){define(["dojo/_base/array"],function(D){function A(b,g){if("esriGeometryMultiPatch"===b.geometryType)return!1;var d=b.drawingInfo.renderer,e=b.drawingInfo.labelingInfo,f=b.featureReduction,n=b.fields;if("heatmap"===d.type||"esriGeometryPolygon"===b.geometryType&&d.uniqueValueInfos&&d.visualVariables&&D.some(d.visualVariables,function(k){if("sizeInfo"===k.type&&!k.target)return!0}))return!1;var h=D.map(D.filter(n,function(k){return"esriFieldTypeDate"===
k.type}),function(k){return k.name});return h.length&&(-1<D.indexOf(h,d.field)||-1<D.indexOf(h,d.field1)||d.visualVariables&&D.some(d.visualVariables,function(k){if(k.field&&-1<D.indexOf(h,k.field))return!0}))||f||!g&&e&&e.length?!1:!0}function a(b,g){var d=b.drawingInfo.renderer,e=b.drawingInfo.labelingInfo,f=b.featureReduction,n=b.fields,h;if(-1===D.indexOf(["esriGeometryPoint","esriGeometryMultiPatch"],b.geometryType)||d.observationRenderer||d.latestObservationRenderer||"heatmap"===d.type||d.valueExpression&&
d.valueExpression.length)return!1;if(d.visualVariables)for(h=0;h<d.visualVariables.length;h++)if(d.visualVariables[h].valueExpression&&d.visualVariables[h].valueExpression.length)return!1;var k=D.map(D.filter(n,function(c){return"esriFieldTypeDate"===c.type}),function(c){return c.name});return k.length&&(-1<D.indexOf(k,d.field)||-1<D.indexOf(k,d.field1)||d.visualVariables&&D.some(d.visualVariables,function(c){if(c.field&&-1<D.indexOf(k,c.field))return!0}))||f||!g&&e&&e.length?!1:!0}return function(b,
g,d){return"Feature Layer"===b.type&&b.drawingInfo?"scene"===d?a(b,g):A(b,g):!1}})},"arcgisonline/pages/dijit/Alert":function(){define("require exports tslib ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/text!./Alert/Alert.html dojo/i18n!../../nls/arcgisonline ../utils/icons dojo/_base/lang".split(" "),function(D,A,a,b,g,d,e,f,n,h,k){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);
h=a.__importDefault(h);k=a.__importDefault(k);return function(){function c(l,r){this.templateString=f["default"];this.i18n=n["default"];this.icons=h["default"];this.cssClasses="";this.preventAutoDimiss=!1}c.prototype.postMixInProperties=function(){"success"===this.type?(this.modifier="green",this.icon=h["default"]["check-circle"]["32"],this.iconAltText=n["default"].GroupWidget.successIcon):"error"===this.type?(this.modifier="red",this.icon=h["default"]["exclamation-mark-circle"]["32"],this.iconAltText=
n["default"].GroupWidget.errorIcon):"warning"===this.type?(this.modifier="yellow",this.icon=h["default"]["exclamation-mark-triangle"]["32"],this.iconAltText=n["default"].GroupWidget.warningIcon):"info"===this.type&&(this.modifier="info",this.iconAltText=this.icon="")};c.prototype.postCreate=function(){var l=this;this.inherited(arguments);this.listHTML&&(this._listContainer.innerHTML=this.listHTML);this._addEventListeners();"success"!==this.type||this.preventAutoDimiss||this._setAlertTimer();setTimeout(function(){l.domNode&&
l.domNode.classList.add("is-active")},10)};c.prototype._addEventListeners=function(){"success"===this.type&&this.own(e["default"](this.domNode).on("mouseover",k["default"].hitch(this,this._clearAlertTimer)),e["default"](this.domNode).on("mouseout",k["default"].hitch(this,this._setAlertTimer)));this.own(e["default"](".js-alert-close",this.domNode).on("click",k["default"].hitch(this,this._dismiss)))};c.prototype._setAlertTimer=function(){var l=this;this._timeout||(this._timeout=window.setTimeout(function(){l._dismiss()},
4E3))};c.prototype._clearAlertTimer=function(){clearTimeout(this._timeout);this._timeout=null};c.prototype._dismiss=function(l){var r=this;l&&l.preventDefault();this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){r.destroy()},300)};c.prototype.dismiss=function(){var l=this;this.domNode&&this.domNode.classList.remove("is-active");setTimeout(function(){l.destroy()},300)};return c=a.__decorate([b["default"](g["default"],d["default"])],c)}()})},"arcgisonline/tsutils/declareDecorator":function(){define(["require",
"exports","tslib","dojo/_base/declare"],function(D,A,a,b){Object.defineProperty(A,"__esModule",{value:!0});b=a.__importDefault(b);A["default"]=function(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];return function(e){return b["default"](g,e.prototype)}}})},"arcgisonline/pages/utils/icons":function(){define(["require","exports","tslib","dojo/_base/kernel"],function(D,A,a,b){function g(n){var h,k,c=n.paths,l=n.size,r=n.direction,m=n.rtl,q=n.title,v=n.titleId;n=n.inline?"icon-inline--on-"+
(null!==r&&void 0!==r?r:"left"):"";r=null!==(k=null===(h=b["default"].locale)||void 0===h?void 0:h.split("-")[0])&&void 0!==k?k:"en";h="icon-inline "+n+" "+(!0===m||m===r?"icon-inline--flip-rtl":"");c=Array.isArray(c)?d(c):'\x3cpath d\x3d"'+c+'"/\x3e';k=q&&v;return'\x3csvg viewBox\x3d"0 0 '+l+" "+l+'" width\x3d"'+l+'" height\x3d"'+l+'" class\x3d"'+h+'" '+(k?'aria-labelledby\x3d"'+v+'"':'role\x3d"none" focusable\x3d"false" aria-hidden\x3d"true"')+"\x3e\n    "+(k?'\x3ctitle id\x3d"'+v+'" \x3e'+q+"\x3c/title\x3e":
"")+"\n    "+c+"\n  \x3c/svg\x3e"}function d(n){return n.reduce(function(h,k){return h+" \x3cpath "+(k.opacity?'opacity\x3d"'+k.opacity+'" ':"")+' d\x3d"'+k.d+'" /\x3e'},"")}b=a.__importDefault(b);var e={"app-launcher":{24:"M11.5 18.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 20h-1v-1h1zM3.5 2.05A1.45 1.45 0 104.95 3.5 1.45 1.45 0 003.5 2.05zM4 4H3V3h1zm7.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 12h-1v-1h1zm-8.5-1.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 12H3v-1h1zm-.5 6.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM4 20H3v-1h1zM19.5 4.95a1.45 1.45 0 10-1.45-1.45 1.45 1.45 0 001.45 1.45zM19 3h1v1h-1zm.5 7.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 12h-1v-1h1zm-8.5-9.95a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM12 4h-1V3h1zm7.5 14.05a1.45 1.45 0 101.45 1.45 1.45 1.45 0 00-1.45-1.45zM20 20h-1v-1h1z"},
apps:{16:"M6 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zm0 5H2V2h4zm4 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4V2h4zm-4 9h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1zm4-1h-4v-4h4zM6 9H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1zm0 5H2v-4h4z",24:"M9.5 2h-6A1.502 1.502 0 0 0 2 3.5v6A1.502 1.502 0 0 0 3.5 11h6A1.502 1.502 0 0 0 11 9.5v-6A1.502 1.502 0 0 0 9.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 2h-6A1.502 1.502 0 0 0 13 3.5v6a1.502 1.502 0 0 0 1.5 1.5h6A1.502 1.502 0 0 0 22 9.5v-6A1.502 1.502 0 0 0 20.5 2zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM9.5 13h-6A1.502 1.502 0 0 0 2 14.5v6A1.502 1.502 0 0 0 3.5 22h6a1.502 1.502 0 0 0 1.5-1.5v-6A1.502 1.502 0 0 0 9.5 13zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5zM20.5 13h-6a1.502 1.502 0 0 0-1.5 1.5v6a1.502 1.502 0 0 0 1.5 1.5h6a1.502 1.502 0 0 0 1.5-1.5v-6a1.502 1.502 0 0 0-1.5-1.5zm.5 7.5a.501.501 0 0 1-.5.5h-6a.501.501 0 0 1-.5-.5v-6a.501.501 0 0 1 .5-.5h6a.501.501 0 0 1 .5.5z",
32:"M13.25 3h-8.5A1.752 1.752 0 0 0 3 4.75v8.5A1.752 1.752 0 0 0 4.75 15h8.5A1.752 1.752 0 0 0 15 13.25v-8.5A1.752 1.752 0 0 0 13.25 3zM14 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5A.751.751 0 0 1 4.75 4h8.5a.751.751 0 0 1 .75.75zM27.25 3h-8.5A1.752 1.752 0 0 0 17 4.75v8.5A1.752 1.752 0 0 0 18.75 15h8.5A1.752 1.752 0 0 0 29 13.25v-8.5A1.752 1.752 0 0 0 27.25 3zM28 13.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM27.25 17h-8.5A1.752 1.752 0 0 0 17 18.75v8.5A1.752 1.752 0 0 0 18.75 29h8.5A1.752 1.752 0 0 0 29 27.25v-8.5A1.752 1.752 0 0 0 27.25 17zM28 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75zM13.25 17h-8.5A1.752 1.752 0 0 0 3 18.75v8.5A1.752 1.752 0 0 0 4.75 29h8.5A1.752 1.752 0 0 0 15 27.25v-8.5A1.752 1.752 0 0 0 13.25 17zM14 27.25a.751.751 0 0 1-.75.75h-8.5a.751.751 0 0 1-.75-.75v-8.5a.751.751 0 0 1 .75-.75h8.5a.751.751 0 0 1 .75.75z"},
"arcgis-online":{24:"M24 13.226a4.785 4.785 0 01-3.523 4.658L18.962 17h.633A3.694 3.694 0 0023 13.226a4.173 4.173 0 00-2.895-3.977l-.595-.193-.086-.62A6.164 6.164 0 0013.482 3a5.988 5.988 0 00-5.254 3.265l-.373.703-.769-.206a2.966 2.966 0 00-.763-.116 2.473 2.473 0 00-2.532 2.319l-.041.563-.503.255A4.026 4.026 0 001 13.37 3.614 3.614 0 004.405 17H6v1H4.405A4.606 4.606 0 010 13.37a5.04 5.04 0 012.795-4.479 3.47 3.47 0 013.528-3.244 3.952 3.952 0 011.02.15A6.971 6.971 0 0113.483 2a7.131 7.131 0 016.933 6.297A5.186 5.186 0 0124 13.226zm-6.764 4.78l.846.494-4.534 2.645L9.014 18.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm0-3l.846.494-4.534 2.645L9.014 15.5l.846-.493-.734-.428-1.578.92 6 3.501 6-3.5-1.579-.92zm2.312-2.506l-6 3.5-6-3.5 6-3.5zm-6 2.645l4.534-2.645-4.534-2.645L9.014 12.5z",
32:"M32 14.704a6.28 6.28 0 0 1-4.862 6.248l-.942-.55.738-.43A5.29 5.29 0 0 0 31 14.703a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 1a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 14.897C2 17.521 4.157 20 6.438 20H9v1H6.437C3.592 21 1 18.092 1 14.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 0a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 14.704zm-7.591 6.74l1.12.654-7.075 4.128-7.074-4.128 1.188-.694-.794-.463-1.982 1.157 8.662 5.054 8.663-5.054-1.915-1.117zm-.123-3.542l1.31.765-7.075 4.128-7.074-4.128 1.31-.765-.793-.463-2.105 1.228 8.663 5.054 8.663-5.054-2.105-1.228zm2.899-2.849l-8.663 5.054-8.663-5.054L18.522 10zm-1.588 0l-7.076-4.127-7.074 4.128 7.074 4.127z"},
"arrow-left":{24:"M9.11 6.32L4.43 11H20v1H4.43l4.68 4.68-.707.707L2.517 11.5l5.886-5.887z"},"arrow-right":{16:"M2 8h10.26l-1.585-1.585.707-.707 2.81 2.81-2.81 2.808-.707-.707L12.295 9H2z",24:"M15.646 14.646L18.293 12H4v-1h14.293l-2.647-2.646.707-.707 3.854 3.853-3.854 3.854z"},"arrow-down":{32:"M16.5 27.207l-4.854-4.854.707-.707L16 25.293V5h1v20.293l3.646-3.646.707.707z"},attachment:{16:"M3.991 15.92a3.913 3.913 0 0 1-2.767-6.68L9.552.912a2.92 2.92 0 0 1 4.031 0 2.854 2.854 0 0 1 0 4.031l-8.001 7.998a1.833 1.833 0 0 1-2.527 0 1.789 1.789 0 0 1 0-2.526L8.72 4.751l.566.566-5.665 5.665a.985.985 0 0 0 0 1.394 1.009 1.009 0 0 0 1.395 0l8-7.998a2.05 2.05 0 0 0 0-2.899 2.098 2.098 0 0 0-2.898 0L1.79 9.805a3.11 3.11 0 0 0 0 4.403 3.186 3.186 0 0 0 4.403 0l6.555-6.555.566.567-6.554 6.554a3.905 3.905 0 0 1-2.77 1.146z"},
browser:{32:"M2 28h28V5H2zm27-1H8V11h21zM3 6h26v4H3zm0 5h4v16H3zm24-3h-1V7h1z"},calculator:{16:"M14.5 16h-13A1.502 1.502 0 0 1 0 14.5v-13A1.502 1.502 0 0 1 1.5 0h13A1.502 1.502 0 0 1 16 1.5v13a1.502 1.502 0 0 1-1.5 1.5zM1.5 1a.501.501 0 0 0-.5.5v13a.501.501 0 0 0 .5.5h13a.501.501 0 0 0 .5-.5v-13a.501.501 0 0 0-.5-.5zM2 6V2h12v4zm11-1V3H3v2zm0 9h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1zm0-1V8h-2v5zm-5 1H7a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H7v1zm-4 1H3a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1v-1H3v1zm4-3H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H7v1zm-4 1H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1zm0-1V8H3v1z"},
calendar:{16:"M14 1v1h1v2H1V2h1V1H0v14h16V1zm1 13H1V5h14zM5 2V1h6v1zM4 0v2H3V0zm8 2V0h1v2z"},"caret-right":{16:"M5 1.5l7 7-7 7zm1 11.586L10.586 8.5 6 3.914z"},"caret-down":{16:"M13.1 6L8 11.1 2.9 6z"},check:{16:"M2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637L5.5 12z",24:"M6.218 13.64l3.288 3.098 10.073-9.92.637.637L9.506 18.01 5.58 14.276z",32:"M12.5 22.142L6.59 16.42l.636-.636L12.5 20.87 25.721 7.8l.637.637L12.5 22.142"},"check-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM3.735 8.346l.738-.738 2.084 2.088 4.97-4.97.738.737-5.708 5.705z",
24:"M7 13.689l.637-.636 2.863 2.674 7.022-6.87.637.637L10.5 17zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"},"check-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM6.557 11.592L3.31 8.346l1.163-1.162L6.557 9.27l5.172-5.17 1.162 1.162z",
24:"M23 11.5A11.5 11.5 0 1 1 11.5 0 11.5 11.5 0 0 1 23 11.5zm-5.5-6.018l-8.5 8.5-3.5-3.5-2 2L9.018 18l.018-.018L11.018 16l8.5-8.5z",32:"M30 16A14 14 0 1 1 16 2a14 14 0 0 1 14 14zm-6.11-7.72L12.823 19.346 8.36 14.883l-2.486 2.486 6.95 6.95 13.554-13.553z"},"chevron-down":{16:"M13 5.293v1.414l-4.5 4.5-4.5-4.5V5.293l4.5 4.5z",24:"M19 8.293v1.414l-7.5 7.5-7.5-7.5V8.293l7.5 7.5z"},"chevron-down-f":{16:"M14 4.217v2.766l-6 6-6-6V4.217l6 6z"},"chevron-left":{16:"M10.707 12H9.293l-4.5-4.5 4.5-4.5h1.414l-4.5 4.5z",
24:"M6.293 12l7-7h1.414l-7 7 7 7h-1.414z"},"chevron-right":{16:"M5.293 3h1.414l4.5 4.5-4.5 4.5H5.293l4.5-4.5z",24:"M8.293 5h1.414l7.5 7.5-7.5 7.5H8.293l7.5-7.5z"},"chevron-up":{24:"M11.5 8.207l-7.5 7.5v-1.414l7.5-7.5 7.5 7.5v1.414z"},clock:{16:"M8 7h3v1H7V3h1zm4.803 5.803a7.5 7.5 0 1 1 0-10.606 7.5 7.5 0 0 1 0 10.606zm-.636-9.97A6.591 6.591 0 0 0 .927 7H2v1H.927A6.567 6.567 0 0 0 7 14.073v-1.38h1v1.38a6.591 6.591 0 0 0 4.167-11.24z"},collection:{16:"M10 10V0H0v10zM9 9H6.416c.007-.188.011-.353.014-.453a1.206 1.206 0 0 0 .545-1.058 1.28 1.28 0 0 0 .092-.15 1.143 1.143 0 0 0 .163-.056A2.782 2.782 0 0 0 9 7.461zM1 9V1h5.098a1.276 1.276 0 0 0-.28 1.041 1.26 1.26 0 0 0-.206.466 1.256 1.256 0 0 0-.52 1.185.696.696 0 0 0-.06.062 1.236 1.236 0 0 0-1.175.418 1.352 1.352 0 0 0-1.779 1.571 1.235 1.235 0 0 0 .333 1.568 1.287 1.287 0 0 0 .568 1.34A2.11 2.11 0 0 0 2.962 9zm3.123-.857c0-.313-.595-.223-.688-.41-.234-.467.395-.587.395-.958 0-.09-.047-.277-.191-.293-.202-.021-.254.088-.454.088a.232.232 0 0 1-.25-.207c0-.22.174-.322.174-.543 0-.144-.06-.224-.06-.367 0-.36.397-.586.692-.06.19.342.808.176.808-.38a.271.271 0 0 1 .25-.28c.199 0 .272.205.47.205.327 0 .316-.432.604-.586.353-.192.25-.604.205-.823-.018-.1.165-.287.264-.281.41.031.236-.308.236-.469 0-.258.353-.302.353-.56 0-.158-.132-.235-.132-.397 0-.424.623-.42.78-.822H9v5.449c-.367.057-1.053.165-1.335-.082-.151-.13-.147-.396-.352-.396-.276 0-.297.412-.573.412-.125 0-.184-.088-.31-.088-.26 0-.22.206-.22.465 0 .242-.322.29-.322.535 0 .098.088.135.088.234 0 .33-.588.286-.588.617 0 .026.044.293.044.293 0 .052-.007.287-.019.56h-1.45c-.002-.341.16-.643.16-.856zM16 5v11H5v-1h10V5zm-3 8H2v-1h10V2h1z",
24:"M17 17V2H2v15zm-1-1h-4.874a8.585 8.585 0 0 0 .03-1.017 1.45 1.45 0 0 0 .897-1.63 1.557 1.557 0 0 0 .381-.659 1.376 1.376 0 0 0 .811-.3 3.207 3.207 0 0 0 2.755.42zM3 16V3h8.81a1.483 1.483 0 0 0-.194 1.43 1.461 1.461 0 0 0-.472 1.029 1.47 1.47 0 0 0-.826 1.501 3.333 3.333 0 0 1 .063.37 1.957 1.957 0 0 0-.602.616 1.417 1.417 0 0 0-1.99.87 1.577 1.577 0 0 0-2.517 1.76.033.033 0 0 0 .02-.016c-.609 1.132-.186 1.97.634 2.256a1.509 1.509 0 0 0 .944 2.189 2.551 2.551 0 0 0-.14.995zm5.001-1.447c0-.528-1.006-.378-1.164-.695-.393-.785.668-.987.668-1.612 0-.154-.08-.47-.323-.497-.338-.034-.426.15-.767.15a.39.39 0 0 1-.422-.348c0-.372.297-.545.297-.917 0-.243-.1-.38-.1-.62a.597.597 0 0 1 .57-.62c.312 0 .446.254.595.52.324.579 1.365.294 1.365-.644a.456.456 0 0 1 .422-.473c.334 0 .459.348.793.348.552 0 .532-.73 1.017-.99.596-.322.422-1.019.348-1.39-.033-.165.279-.483.446-.473.694.052.397-.518.397-.792 0-.435.596-.506.596-.943 0-.27-.224-.396-.224-.668 0-.33.4-.628.883-.889H16v8.782c-.29.075-.54.136-.584.136-.503 0-1.117.07-1.48-.249-.256-.22-.249-.669-.596-.669-.466 0-.501.696-.967.696-.21 0-.31-.151-.52-.151a.342.342 0 0 0-.372.305v.483c0 .409-.547.49-.547.9 0 .166.15.23.15.396 0 .559-.994.484-.994 1.042 0 .172.077.336.077.496 0 .103-.015.456-.043.833H7.73c-.003-.58.27-1.096.27-1.447zM20 20H5v-1h14V5h1zm3-12v15H8v-1h14V8z"},
"copy-to-clipboard":{16:"M16 10H8.767l1.558 1.558-.707.707-2.81-2.81 2.81-2.809.707.707L8.678 9H16zM7 6H3v1h4zm-2 4H3V9h2zm2 3H3v-1h4zm5-2v4H2V3h1v1h8V3h1v5h1V2h-2V1H8.723a1.984 1.984 0 0 0-3.446 0H3v1H1v14h12v-5zM4 2h2v-.318A.682.682 0 0 1 6.682 1h.636A.682.682 0 0 1 8 1.682V2h2v1H4z"},credits:{16:"M10.5 5.05a5.45 5.45 0 1 0 5.45 5.45 5.457 5.457 0 0 0-5.45-5.45zm0 10.05a4.6 4.6 0 1 1 4.6-4.6 4.605 4.605 0 0 1-4.6 4.6zm0-1.2a3.404 3.404 0 0 1-3.398-3.3h.8a2.6 2.6 0 0 0 5.196 0h.8a3.404 3.404 0 0 1-3.398 3.3zm1.597-3.5a1.6 1.6 0 0 0-3.194 0h-.801a2.4 2.4 0 0 1 4.796 0zm-8.19.253a5.397 5.397 0 1 1 6.747-6.747A2.698 2.698 0 0 0 10.5 3.9a6.505 6.505 0 0 0-.693.04A4.588 4.588 0 1 0 3.94 9.806a6.418 6.418 0 0 0-.04.694c0 .052.003.103.006.153zm.272-2.03A3.373 3.373 0 0 1 2.102 5.6h.8a2.583 2.583 0 0 0 1.55 2.274 6.55 6.55 0 0 0-.273.748zM3.102 5.4a2.396 2.396 0 0 1 4.59-.866 6.65 6.65 0 0 0-.708.386A1.585 1.585 0 0 0 5.5 3.9a1.602 1.602 0 0 0-1.597 1.5z"},
cube:{16:"M8.5 1.108L1 4.188v8.753L8.448 16h.104L16 12.94V4.189zM8 14.735l-6-2.464V5.197L8 7.65zM2.906 4.486L8.5 2.19l5.594 2.297L8.5 6.774zM15 12.271l-6 2.464V7.65l6-2.453z"},data:{24:"M11.5 2C5.702 2 1 3.566 1 5.5v12.808C1 20.346 5.702 22 11.5 22S22 20.346 22 18.308V5.5C22 3.566 17.298 2 11.5 2zm0 1C17.768 3 21 4.752 21 5.5S17.768 8 11.5 8 2 6.248 2 5.5 5.232 3 11.5 3zM2 6.983C3.676 8.173 7.294 9 11.5 9s7.824-.827 9.5-2.017V10.5c0 .748-3.232 2.5-9.5 2.5S2 11.248 2 10.5zM11.5 21C5.354 21 2 19.221 2 18.308v-6.325C3.676 13.173 7.294 14 11.5 14s7.824-.827 9.5-2.017v6.325C21 19.22 17.646 21 11.5 21z",
32:"M28.983 7.875C28.803 5.171 22.841 3 15.5 3S2.198 5.17 2.017 7.875H2v16.25C2 26.816 8.045 29 15.5 29S29 26.816 29 24.125V7.875zM28 24.125C28 25.705 23.13 28 15.5 28S3 25.705 3 24.125v-8.241C5.01 17.711 9.846 19 15.5 19s10.49-1.29 12.5-3.116zm0-9.24C25.99 16.71 21.154 18 15.5 18S5.01 16.71 3 14.884v-5C5.01 11.711 9.846 13 15.5 13S25.99 11.71 28 9.884zm-12.5-2.91C7.87 11.974 3 9.62 3 8s4.87-3.974 12.5-3.974S28 6.379 28 8s-4.87 3.974-12.5 3.974z"},download:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.563C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.438 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM17 28.278V14h-1v14.278l-4.332-4.332-.707.707 5.539 5.54 5.54-5.54-.708-.707z"},
"download-to":{16:"M12 13v1H3v-1zm-1.674-4.618l-.707-.707L8 9.295V1H7v8.26L5.415 7.675l-.707.707 2.81 2.81z",32:"M7 25h17v1H7zm13.354-8.646l-.707-.707L16 19.293V5h-1v14.293l-3.646-3.646-.707.707 4.853 4.853z"},drag:{16:"M5.95 1.5A1.45 1.45 0 1 1 4.5.05 1.45 1.45 0 0 1 5.95 1.5zM10.5.05a1.45 1.45 0 1 0 1.45 1.45A1.45 1.45 0 0 0 10.5.05zm-6 6A1.45 1.45 0 1 0 5.95 7.5 1.45 1.45 0 0 0 4.5 6.05zm6 0a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm-6 6a1.45 1.45 0 1 0 1.45 1.45 1.45 1.45 0 0 0-1.45-1.45zm7.45 1.45a1.45 1.45 0 1 0-1.45 1.45 1.45 1.45 0 0 0 1.45-1.45z"},
edit:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},"ellipsis-f":{16:"M3.55 8A1.55 1.55 0 1 1 2 6.45 1.55 1.55 0 0 1 3.55 8zm6 0A1.55 1.55 0 1 0 8 9.55 1.55 1.55 0 0 0 9.55 8zm6 0A1.55 1.55 0 1 0 14 9.55 1.55 1.55 0 0 0 15.55 8z"},
envelope:{16:"M14 11.434l-4.52-4.52L14 3.301v8.133zM1.566 12L6.15 7.418l1.35 1.08 1.351-1.08L13.434 12H1.566zM1 3.3l4.52 3.614L1 11.434V3.3zM13.095 3L7.5 7.475 1.904 3h11.191zM14 2H1a1.002 1.002 0 0 0-1 1v9a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z",24:"M22.5 4h-20A1.504 1.504 0 0 0 1 5.5v14A1.5 1.5 0 0 0 2.5 21h20a1.5 1.5 0 0 0 1.5-1.5v-14A1.5 1.5 0 0 0 22.5 4zm-.071 1L12.5 12.94 2.571 5zM2.026 19.63A.482.482 0 0 1 2 19.5V5.568l7.829 6.26zm.763.37l7.67-7.67 2.041 1.633 2.042-1.632L22.21 20zM23 19.5a.483.483 0 0 1-.026.13l-7.803-7.803L23 5.568z"},
"exclamation-mark-circle":{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zm.994-3.576a1 1 0 0 1-2 0v-.048a1 1 0 0 1 2 0zM7.995 8h-.977V4h.977z",24:"M12 7h1v7h-1zm1.5 9.5a1 1 0 1 0-1 1 1.002 1.002 0 0 0 1-1zm9.3-4A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm0-5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM15 8h1v11h-1z"},
"exclamation-mark-circle-f":{24:"M12.5 2.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zM12 7h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},"exclamation-mark-triangle":{16:"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z",
24:"M1.225 21.225A1.678 1.678 0 0 0 2.707 22H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656L13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656zm.859-1.143l9.82-17.773A.71.71 0 0 1 12.508 2a.73.73 0 0 1 .629.342l9.751 17.708a.626.626 0 0 1 .017.662.725.725 0 0 1-.626.288H2.708a.723.723 0 0 1-.623-.286.605.605 0 0 1-.001-.632zM13 15h-1V8h1zm-1.5 2.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1z",32:"M3.929 29h25.148a1.897 1.897 0 0 0 1.67-2.797L18.217 2.951a1.897 1.897 0 0 0-3.337-.005L2.261 26.198A1.897 1.897 0 0 0 3.93 29zm-.788-2.324L15.759 3.423a.896.896 0 0 1 1.577.002l12.531 23.253a.898.898 0 0 1-.79 1.322H3.93a.897.897 0 0 1-.788-1.324zM15.5 24.5a1 1 0 1 1 1 1 1.002 1.002 0 0 1-1-1zM17 21h-1V10h1z"},
"exclamation-mark-triangle-f":{16:"M14.894 12.552l-6-11.998a1 1 0 0 0-1.787 0l-6 11.998A.998.998 0 0 0 2 13.999h12a.998.998 0 0 0 .894-1.447zM9 12H7v-2h2zm0-3H7V4h2z",24:"M13.995 1.827a1.745 1.745 0 0 0-2.969 0l-9.8 17.742a1.603 1.603 0 0 0 0 1.656 1.678 1.678 0 0 0 1.48.775H22.28a1.68 1.68 0 0 0 1.484-.775 1.608 1.608 0 0 0 .003-1.656zM12 8h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z",32:"M29.733 27.06L17.734 3.191a2 2 0 0 0-3.463 0L2.268 27.061a2.003 2.003 0 0 0 0 2.001 1.941 1.941 0 0 0 1.73.938H28a1.944 1.944 0 0 0 1.731-.938 2.008 2.008 0 0 0 .002-2.002zM17 25h-2v-2h2zm0-4h-2V11h2z"},
file:{32:"M20.3 1H4v30h24V8.699zM27 30H5V2h14v8h8zM20 9V2l7 7z"},"file-image":{16:"M13 14H4v-1h9zm-9-2h9v-1.44l-1.527-1.472a.27.27 0 0 0-.37-.028l-1.224.824a.269.269 0 0 1-.35-.01L7.498 8.07a.27.27 0 0 0-.382.018L5.1 10.24a.27.27 0 0 1-.4 0 .27.27 0 0 0-.4 0l-.3.32zm1.752-1a1.38 1.38 0 0 0 .077-.076l1.534-1.636 1.501 1.334a1.267 1.267 0 0 0 1.64.041l.687-.458.809.78V11zM15 3.6V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3zm-3.5 3.06a.75.75 0 1 0 .75.75.75.75 0 0 0-.75-.75z",24:"M18 20H6v-1h12zM6 18h12v-2.8l-2.035-2.035a.377.377 0 0 0-.493-.035l-1.633 1.225a.377.377 0 0 1-.468-.012l-2.706-2.256a.377.377 0 0 0-.509.023l-2.69 2.69a.377.377 0 0 1-.533 0 .377.377 0 0 0-.533 0l-.4.4zm1-1v-1.104a1.376 1.376 0 0 0 1.174-.389l2.287-2.287 2.27 1.89a1.375 1.375 0 0 0 1.708.044l1.2-.9L17 15.614V17zM21 6.709V23H3V1h12.29zM20 8h-6V2H4v20h16zm0-1.2L15.2 2H15v5h5zM14.021 12a.979.979 0 0 0 .979-.979A1.021 1.021 0 0 0 13.979 10a.979.979 0 0 0-.979.979v.043a.981.981 0 0 0 .979.978z"},
"file-magnifying-glass":{16:"M12.4 0H6v3.232a5.4 5.4 0 0 1 1 .395V1h4v4h4v7h-3.7l1 1H16V3.6zM15 4h-3V1h.31L15 3.69zm-5.233 6H12v1h-1.714a1.66 1.66 0 0 0-.707-.385A5.485 5.485 0 0 0 9.767 10zM14 9H9.95c.016-.167.05-.33.05-.501 0-.17-.034-.332-.049-.499H14zm0-2H9.768a5.404 5.404 0 0 0-.395-1H14zm-4.358 4.754a.672.672 0 0 0-.951 0l-.115.115L8 11.294A4.484 4.484 0 0 0 4.499 4a4.5 4.5 0 1 0 2.795 8.001l.575.575-.115.114a.672.672 0 0 0 0 .951l2.16 2.159a.672.672 0 0 0 .95 0l.936-.933a.672.672 0 0 0 .001-.951zm-7.617-.78a3.5 3.5 0 1 1 4.95 0 3.5 3.5 0 0 1-4.95 0zm8.365 3.887l-1.697-1.695.473-.473 1.696 1.698z"},
"file-text":{16:"M13 7H4V6h9zm0 2H4v1h9zm-2 3H4v1h7zm4-8.4V16H2V0h9.4zM14 5h-4V1H3v14h11zm0-1.31L11.31 1H11v3h3z"},folder:{16:"M7.3 3.002L5.98 2H3L1.7 3H0v11h15V3zM14 6H1V4h1.04l1.3-1h2.304l1.319 1H14zm0 7H1V7h13z"},"folder-move":{16:"M5 12H1V6h13v2.352l.007.005.993.994V2l-7.7.002L5.98 1H3L1.7 2H0v11h5zM1 3h1.04l1.3-1h2.304l1.319 1H14v2H1zm14.284 9.563l-2.79 2.79-.708-.706L13.433 13H7v-1h6.308l-1.522-1.521.707-.707z"},"folder-open":{16:"M14 6V3l-6.7.002L5.98 2H3L1.7 3H0v11h14l2-8zM1 4h1.041L3.34 3h2.304l1.319 1.002L13 4v2H9L7.7 7h-5L1 11.408zm2.387 4H8.04l1.3-1h5.379l-1.5 6H1.458z"},
"folder-plus":{16:"M14 9h1v5H0V3h1.7L3 2h2.981l1.04.79A1.966 1.966 0 0 0 7 3v1h-.037L5.644 3H3.34l-1.3 1H1v2h9v1H1v6h13zm-1-6V0h-1v3H9v1h3v3h1V4h3V3z"},globe:{16:"M8 0a8 8 0 1 0 8 8 7.999 7.999 0 0 0-8-8zm3.83 3.162c.067.24.01.47-.273.47a.669.669 0 0 0 .16-.55c.039.027.08.055.112.08zm-.372-.95l.207.072a.803.803 0 0 0-.428.158.406.406 0 0 1 .222-.23zM7.792 1.01a2.963 2.963 0 0 1 .638.012l-.054.083c-.123-.004-.54-.027-.653-.01.073-.074.015-.021.07-.085zM2.527 12.357a7.018 7.018 0 0 1-.414-.58 6.759 6.759 0 0 1 .58.405.918.918 0 0 0-.166.175zm7.606 2.31a6.986 6.986 0 0 1-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.075-1.662-.082-.85-.662-2.313a2.123 2.123 0 0 0-.222-.427 6.967 6.967 0 0 1 1.911-4.701c.616.008.934.146 1.176-.473.015-.04.06-.16.073-.121.7.04.593.475 1.518-.9a1.156 1.156 0 0 0 .157-.36c.2-.065.405-.119.613-.166-.465.623-.137 1.095.319 1.095.141 0 .731-.33 1.07-.387.608.03.853.118 1.201-.337a2.112 2.112 0 0 1 .3-.416 6.936 6.936 0 0 1 1.548.498c-.508.388-.222.396-.56.838-.334.444-.017.803.425 1.138a2.056 2.056 0 0 0-.28.242.59.59 0 0 0-.223-.321.669.669 0 0 0-.735-.596.599.599 0 0 0-.147 1.122.573.573 0 0 0 .292.473c-.164.242-.081.414-.01.663-.052 0-.29-.069-.374-.069-.72 0-.785 1.215-.46 1.543-.79.68-.809.795-.917 1.017a1.921 1.921 0 0 0-1.248 1.686c0 .41-.25.36-.317.682-.102.485.146.728.435 1.006.32.311.152.587.628.973.572.477.863.374 1.603.268a2.339 2.339 0 0 1 1.257.134c.09.021.181.057.1.298a.596.596 0 0 0 .133.739.275.275 0 0 1 .11.19c.05.639-.197.474-.47 1.01zm.383-8.91l.2.098a.313.313 0 0 1 .255-.052c.37.233.57.424.93.066a2.055 2.055 0 0 1 .325.339.593.593 0 0 0 .914.493c.214.276.447.177.757.255a1.3 1.3 0 0 1 .088.284 1.486 1.486 0 0 1-.52.136c-.114-.03-.231-.125-.35-.125a.533.533 0 0 0-.656.356 1.398 1.398 0 0 1-.698-.416c.1-.693-.948-.767-1.63-.616.02-.025.108-.16.089-.185a.665.665 0 0 0 .094-.14.838.838 0 0 0 .315-.284zm-.996.222a.732.732 0 0 0-.064.138c0-.055.002-.102.005-.147l.059.01zm1.844 8.16a1.248 1.248 0 0 0-.241-1.173.955.955 0 0 0-.68-1.316c-.006-.002-.38-.081-.473-.113-1.052-.302-1.98.487-2.265-.484a2.546 2.546 0 0 0-.573-.79c.382-.424.237-.624.333-1.035.313-1.157.897-.378 1.276-1.376.017-.042.634-.564.768-.765.379.458.848.204 1.465.243.133.77 1.55 1.512 2.121.763.703.292 1.96-.216 1.646-1.118v.001a1.301 1.301 0 0 0-.112-.342.945.945 0 0 0-.935-.511.8.8 0 0 0-.72-.205c-.255-.554-.903-1.088-1.488-.733a.95.95 0 0 0-.705-.183.798.798 0 0 0-.36-.04 5.498 5.498 0 0 0-.033-.098.782.782 0 0 0 .065-.216.87.87 0 0 0 .691-.33c1.179.708 2.182-1.263.96-1.935.016 0 .03-.01.046-.011a6.994 6.994 0 0 1-.786 11.766z",
24:"M13.802 4.306a.683.683 0 01.708.76.528.528 0 01.357.467c.055.888-1.127.8-1.014-.09l-.005-.002a.575.575 0 01-.046-1.135zM11.5 23A11.5 11.5 0 010 11.5v-.021a11.738 11.738 0 012.057-6.534 12.15 12.15 0 014.12-3.637h.005A11.595 11.595 0 0113.618.202l.002.002a11.525 11.525 0 019.325 10.188v.004A11.497 11.497 0 0111.5 23zm9.795-7.748a7.604 7.604 0 01-.666-1.746 4.55 4.55 0 01-.651-1.655 1.383 1.383 0 01-.857-.063l-.332.46c-1.962 0-2.952-.953-3.048-1.636a2.144 2.144 0 00-.992.133l-.113.177-.794.021a2.538 2.538 0 01-.483-.213 7.396 7.396 0 00-.628.541 1.463 1.463 0 01-.941.97 1.544 1.544 0 00-.961 1.24 2.264 2.264 0 01-.449 1.34 2.446 2.446 0 01.811 1.108c.406 1.373 1.703.122 3.24.622.843.277 1.569.18 1.832 1.177a1.695 1.695 0 01.028.937 1.452 1.452 0 01-.025.098 2.11 2.11 0 01.327 1.883 10.447 10.447 0 004.702-5.394zm-1.709-7.096l.25.15c.058.072.16.194.208.265a1.699 1.699 0 011.517 2.251 3.648 3.648 0 01.435.592 10.477 10.477 0 00-3.824-8.016h-.103a1.768 1.768 0 01-1.938 2.838 4.716 4.716 0 01-.723.7 1.525 1.525 0 01.97.078l.183-.654a6.478 6.478 0 012.115 1.527c.295.369-.659 1.364.91.27zm2.17 5.578q.026-.121.049-.243a5.462 5.462 0 00-.843-1.825 18.554 18.554 0 00.793 2.068zM11.405 1.147c.155.004.424.03.574.029l.093-.147c-.189-.01-.375-.029-.566-.029a1.863 1.863 0 01-.102.147zm-8.209 16.74a1.557 1.557 0 01.244-.252c-.26-.196-.54-.372-.808-.545q.263.41.564.797zm11.737 3.525c.434-.81.812-.526.724-1.629a.802.802 0 00-.327-.551c-.2-.205-.155-.428-.051-.682.254-.64-.126-.81-.608-.914a3.809 3.809 0 00-2.22-.08 1.602 1.602 0 01-1.633-.391c-.608-.489-.383-.895-.91-1.416-1.3-1.218-.08-1.268-.08-2.268a2.63 2.63 0 011.416-2.11c.302-.106.437-.127.541-.427.236-.604.565-.578.988-1.055.145-.164.257-.285.48-.285a.723.723 0 01.384.135s.282.166.372.2l.074-.002a3.411 3.411 0 012.208-.269.557.557 0 01.432.7c.017.441 1.488 1.005 1.588.837a.745.745 0 00.066-.184.48.48 0 01.562-.362c.2.01.514.231.703.231a4.382 4.382 0 00.786-.238c.332-.095.21-.532.067-.847-.078-.207-.375-.237-.595-.237-.266.003-.498-.021-.616-.307a.433.433 0 00-.161-.218c.007.01-.022.034-.042.068a.52.52 0 01-.871.07c-.272-.394-.011-.289-.317-.67a3.283 3.283 0 00-.72-.63.545.545 0 01-.525.387c-.265 0-.36-.155-.594-.303-.245-.142-.625-.1-.929.324a2.663 2.663 0 01-.49.436c-.211.264-.036.313-.4.628-.342.317-.623.179-1.069.059-.477-.111-.42-.747-.347-1.246.078-.5.294-.712.802-.58.729.178.762.038.579-.475-.17-.378-.042-.636.215-.748.78-.317 1.183-1.443 1.906-1.125a.766.766 0 00.887-1.249.868.868 0 01-.316-.254.095.095 0 00-.07-.033c-.219 0-.155.495-.138.713a.492.492 0 01-.49.525c-.281 0-.753-.454-.953-.653-.385-.387-.119-.603.087-1.004a5.425 5.425 0 01.34-.69 1.71 1.71 0 01.588-.442 10.406 10.406 0 00-3.028-.996c-.332.335-.51.95-.954 1.01-.302.054-.912-.059-1.193-.006-.391.08-1.292.553-1.396.553-.57 0-.81-.74.197-1.574a10.398 10.398 0 00-1.884.475 7.258 7.258 0 01-1.042 1.57c-.299.372-.662.062-1.088.016-.565-.056-.325 1.011-1.198.915a5.775 5.775 0 00-.588-.039A10.467 10.467 0 001 11.5c0 .054.007.107.008.161.061.103.41.9.588 1.252.944 1.962.527 1.457.562 2.457.01.238.202.343.42.493a10.28 10.28 0 012.006 1.477.495.495 0 01.111.525c-.07.264-.346.34-.568.502a.431.431 0 00-.21.376 10.425 10.425 0 0011.017 2.669z"},
grid:{16:"M0 0v7h7V0zm6 6H1V1h5zm3-6v7h7V0zm6 6h-5V1h5zM0 9v7h7V9zm6 6H1v-5h5zm3-6v7h7V9zm6 6h-5v-5h5z",32:"M3 15h12V3H3zM4 4h10v10H4zm13 11h12V3H17zm1-11h10v10H18zM3 29h12V17H3zm1-11h10v10H4zm13 11h12V17H17zm1-11h10v10H18z"},group:{16:"M7.5 5h2a1.497 1.497 0 0 1 1.486 1.359 3.452 3.452 0 0 1 .969-.304 2.498 2.498 0 0 0-1.6-1.895 2.5 2.5 0 1 0-3.71 0 2.498 2.498 0 0 0-1.6 1.895 3.452 3.452 0 0 1 .97.304A1.497 1.497 0 0 1 7.5 5zm1-4A1.5 1.5 0 1 1 7 2.5 1.502 1.502 0 0 1 8.5 1zm5.855 10.16a2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 9 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34zM12.5 8A1.5 1.5 0 1 1 11 9.5 1.502 1.502 0 0 1 12.5 8zm2.5 7h-5v-1.5a1.517 1.517 0 0 1 1.5-1.5h2a1.517 1.517 0 0 1 1.5 1.5zM1 13.5V16h7v-2.5a2.5 2.5 0 0 0-1.645-2.34 2.5 2.5 0 1 0-3.71 0A2.5 2.5 0 0 0 1 13.5zM7 15H2v-1.5A1.517 1.517 0 0 1 3.5 12h2A1.517 1.517 0 0 1 7 13.5zM4.5 8A1.5 1.5 0 1 1 3 9.5 1.502 1.502 0 0 1 4.5 8z",
32:"M16 9a4 4 0 1 0-4-4 4.005 4.005 0 0 0 4 4zm0-7a3 3 0 1 1-3 3 3.003 3.003 0 0 1 3-3zm3.101 16a4.944 4.944 0 0 0 .323 1h-6.848a4.944 4.944 0 0 0 .323-1zm-8.588-5.297a4.945 4.945 0 0 0-.908-.415A4.485 4.485 0 0 1 13.5 10h5a4.485 4.485 0 0 1 3.895 2.288 4.945 4.945 0 0 0-.908.415A3.49 3.49 0 0 0 18.5 11h-5a3.49 3.49 0 0 0-2.987 1.703zM12 17a4 4 0 1 0-4 4 4.005 4.005 0 0 0 4-4zm-4 3a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm-7 6.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5h-5A4.505 4.505 0 0 0 1 26.5zm9.5-3.5a3.504 3.504 0 0 1 3.5 3.5V30H2v-3.5A3.504 3.504 0 0 1 5.5 23zM24 13a4 4 0 1 0 4 4 4.005 4.005 0 0 0-4-4zm0 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm2.5 2h-5a4.505 4.505 0 0 0-4.5 4.5V31h14v-4.5a4.505 4.505 0 0 0-4.5-4.5zm3.5 8H18v-3.5a3.504 3.504 0 0 1 3.5-3.5h5a3.504 3.504 0 0 1 3.5 3.5z"},
home:{16:"M8 0L6 2V0H3v5L0 8h1v8h5v-6h4v6h5V7.978h1zm6 15h-3V9H5v6H2V7.414l2-2V1h1v3.414l3.001-3L14 7.395z"},image:{16:"M1 2v12h14V2zm13 11H2V3h12zm-1-1H3v-1h10zM3 8.678l.333-.356a.3.3 0 0 1 .445 0 .3.3 0 0 0 .444 0l2.242-2.39a.3.3 0 0 1 .423-.021l2.255 2.005a.299.299 0 0 0 .39.01l1.361-.915a.3.3 0 0 1 .41.032L13 8.678V10H3zM11.894 9l-.89-.859-.846.565a1.299 1.299 0 0 1-1.68-.043L6.732 7.11 4.958 9zm-.644-4.5a.75.75 0 1 1-.75-.75.75.75 0 0 1 .75.75z",32:"M2 4v24h28V4zm27 23H3V5h26zm-9.5-17A1.5 1.5 0 1 1 21 8.5a1.502 1.502 0 0 1-1.5 1.5zm.5-1.5a.5.5 0 1 0-.5.5.5.5 0 0 0 .5-.5zM28 25H4v-1h24zM7.624 16.026l.827.39 5.138-4.267a.652.652 0 0 1 .857.013l.863.774c.864.771 2.71 2.382 3.845 3.357l2.923-2.748a.652.652 0 0 1 .926.033L28 19v4H4v-4.547l2.905-2.31a.642.642 0 0 1 .719-.117zM27 22v-2.61l-4.494-4.875-3.322 3.122-.682-.586a355.007 355.007 0 0 1-3.861-3.37l-.637-.573-5.4 4.487-1.184-.56L5 18.88V22z"},
info:{16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 5.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM7 7h1v5H7zm2 5H6v-1h3z",24:"M11.5 1A10.5 10.5 0 1 0 22 11.5 10.499 10.499 0 0 0 11.5 1zm0 20.1a9.6 9.6 0 1 1 9.6-9.6 9.61 9.61 0 0 1-9.6 9.6zM13 18h-3v-1h1V8h1v9h1zM11.5 6.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM12 9h-2V8h2z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm1.5-6h-3v-1h1V11h1v11h1zM15.5 8.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zM16 12h-2v-1h2z"},
"information-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zM9 12H7V6h2zm0-7H7V3h2z"},key:{16:"M10.075 1A4.926 4.926 0 0 0 5.15 5.925a4.874 4.874 0 0 0 .51 2.141L0 13.726V16h3.222l.022-.01.756-.756V14h1.233L6 13.233V12h1.232l1.393-1.393a4.869 4.869 0 0 0 1.45.243 4.925 4.925 0 1 0 0-9.85zM6.818 11H5v1.82l-.18.18H3v1.82l-.18.18H1v-.86l5.204-5.204a4.918 4.918 0 0 0 1.434 1.244zm3.257-1.15A3.925 3.925 0 1 1 14 5.925a3.93 3.93 0 0 1-3.925 3.925zM11.5 3A1.5 1.5 0 1 0 13 4.5 1.5 1.5 0 0 0 11.5 3zm0 2a.5.5 0 1 1 .5-.5.501.501 0 0 1-.5.5z"},
launch:{16:"M14 8h1v7H1V1h7v1H2v12h12zm-4-7v1h3.29L7.62 7.67l.71.71L14 2.71V6h1V1z",24:"M13 2v1H3v18h18V11h1v11H2V2zm9 6V2h-6v1h4.3l-8.41 8.403.707.707L21 3.714V8z"},layer:{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.205 8.205 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.213 7.213 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363z"},
"layer-basemap":{32:"M31.603 27.899l-4-24s-6-2-11 0a13.388 13.388 0 0 1-11 0L1.61 27.865c.752.17 7.816 2.427 14.994.034 8.04-2.68 15.96.48 15 0zm-7.927-2.091a23.33 23.33 0 0 0-7.389 1.142 21.34 21.34 0 0 1-6.756 1.04 28.2 28.2 0 0 1-6.785-.864L6.39 5.266a13.201 13.201 0 0 0 4.553.8 16.268 16.268 0 0 0 6.032-1.238 12.652 12.652 0 0 1 4.703-.818 20.298 20.298 0 0 1 5.043.674l3.651 21.908a29.998 29.998 0 0 0-6.696-.784zM1.609 27.865l-.006.034c-.103-.052-.084-.055.006-.034zm23.36-21.53a18.501 18.501 0 0 0-2.209-.284l-.011-.001a15.46 15.46 0 0 0-1.071-.04 10.688 10.688 0 0 0-3.961.675 18.243 18.243 0 0 1-6.774 1.382 15.075 15.075 0 0 1-2.927-.282v.001l-.018-.002-2.966 17.79.02.003H5.05a25.156 25.156 0 0 0 4.495.414h.004c.039 0 .075-.005.115-.006a21.638 21.638 0 0 0 3.946-.4v-.005c2.635-.535 4.778-1.771 10.065-1.771a30.81 30.81 0 0 1 4.253.299v-.001h.002zm-3.04 16.538a36.78 36.78 0 0 0-1.061.083 1.708 1.708 0 0 0 .73-1.412 1.502 1.502 0 0 0-.18-.71l.072-.066a2.025 2.025 0 0 0 .82-1.55v-.25a1.794 1.794 0 0 0 .602.105 1.999 1.999 0 0 0 1.63-.97 2.347 2.347 0 0 0 .514.676 2.616 2.616 0 0 0 1.067.564l.603 3.614a31.59 31.59 0 0 0-3.05-.15c-.036 0-.07.004-.106.005a27.32 27.32 0 0 0-1.64.06zM20.693 8.326a2.143 2.143 0 0 0-1.254.76 1.592 1.592 0 0 0-.417 1.319l.023.112c.196.96.153 1.307-.186 1.49a3.217 3.217 0 0 0-1.239 1.38 2.399 2.399 0 0 1-.276.43c.032-.03-.06-.1-.128-.15a2.19 2.19 0 0 0-1.366-.537 1.864 1.864 0 0 0-1.813 1.907c0 .32-.32.815-.48.815a.556.556 0 0 1-.26-.038 2.364 2.364 0 0 0-2.032-1.539 2.151 2.151 0 0 0-2.099 2.196 3.19 3.19 0 0 0 .128.849 1.341 1.341 0 0 1 .062.344.94.94 0 0 1-.164.406 2.694 2.694 0 0 0-.408 1.363 1.746 1.746 0 0 0 1.812 1.667 2.718 2.718 0 0 0 1.043-.213 4.21 4.21 0 0 1-.377.41 2.41 2.41 0 0 0-.75 3.023 1.469 1.469 0 0 0 .58.61c-.35.028-.7.033-1.052.042-.17.004-.336.018-.508.018a23.876 23.876 0 0 1-3.329-.24L8.838 8.932a16.49 16.49 0 0 0 2.123.135 19.256 19.256 0 0 0 7.146-1.454 9.276 9.276 0 0 1 2.658-.57h.016q-.032.073-.058.15a1.815 1.815 0 0 0-.095.583 3.228 3.228 0 0 0 .064.549zm-5.354 15.778a16.56 16.56 0 0 1-2.06.523c-.577-.338-1.65-.315-1.872-.755-.755-1.509 1.29-1.896 1.29-3.103 0-.3-.154-.909-.621-.956-.653-.067-.823.287-1.48.287a.751.751 0 0 1-.812-.667c0-.718.572-1.052.572-1.769 0-.466-.19-.729-.19-1.193a1.15 1.15 0 0 1 1.098-1.196c.598 0 .86.49 1.146 1.004a1.19 1.19 0 0 0 1.147.573c.907 0 1.48-1.133 1.48-1.815a.875.875 0 0 1 .813-.907c.644 0 .883.669 1.528.669 1.062 0 1.022-1.405 1.958-1.912 1.146-.62.812-1.956.668-2.672-.062-.319.54-.932.861-.91 1.337.097.764-1 .764-1.528a.824.824 0 0 1 .042-.263 1.218 1.218 0 0 1 .355-.49A16.23 16.23 0 0 1 24.1 7.2l1.83 10.981a1.527 1.527 0 0 1-.22-.154c-.456-.4-.446-1.2-1.068-1.2-.835 0-.901 1.246-1.736 1.246-.379 0-.557-.268-.935-.268a.616.616 0 0 0-.667.546v.868c0 .733-.978.879-.978 1.614 0 .299.266.41.266.71 0 .934-1.528.893-1.739 1.692a24.652 24.652 0 0 0-3.514.869z"},
"layer-feature":{32:"M27 4a20.57 20.57 0 0 0-4.061-.793 3.177 3.177 0 0 1 .061.6v.412a20.975 20.975 0 0 1 3.117.565l3.614 21.686a20.65 20.65 0 0 0-5.842-.803 25.953 25.953 0 0 0-8.205 1.385 23.961 23.961 0 0 1-7.573 1.281 18.036 18.036 0 0 1-5.993-.957L5.804 5.26A22.899 22.899 0 0 0 9 5.793V4.787A20.657 20.657 0 0 1 5 4L1 28s6 3 15 0 15 0 15 0zm-5 .608v10.665l-6 5.996-6-5.996V4.608C10 2.455 12.258 0 16 0s6 2.455 6 4.608zm-6 15.247l5-4.996V4.607C21 3.095 19.262 1 16 1s-5 2.095-5 3.607V14.86zM19 7a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2z"},
"layer-graphics":{32:"M31 27.9c.96.48-6.96-2.68-15 0s-15.96-.48-15 0l4-24a13.388 13.388 0 0 0 11 0c5-2 11 0 11 0zm-15.316-.949a23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04zm1.543-17.28a12.423 12.423 0 0 1 4.305-.773 20.349 20.349 0 0 1 2.964.229l-.132-.791a17.556 17.556 0 0 0-3.29-.327 10.623 10.623 0 0 0-3.96.774 16.71 16.71 0 0 1-6.188 1.303 23.281 23.281 0 0 1-3.488-.273l-.16.96a26.752 26.752 0 0 0 3.219.202 19.531 19.531 0 0 0 6.73-1.303zm6.41 12.159A26.767 26.767 0 0 0 16 23v-7.828A26.697 26.697 0 0 1 23.637 14c.58 0 1.13.023 1.658.06l1.327 7.965a23.502 23.502 0 0 0-2.985-.195zM17 21.688a27.149 27.149 0 0 1 6.637-.858c.592 0 1.182.023 1.784.068l-.98-5.883Q24.047 15 23.636 15a25.363 25.363 0 0 0-6.637.927zm-8 2.2a3.757 3.757 0 0 1-4-3.445A3.757 3.757 0 0 1 9 17a3.757 3.757 0 0 1 4 3.443 3.757 3.757 0 0 1-4 3.446zm3-3.445A2.768 2.768 0 0 0 9 18a2.768 2.768 0 0 0-3 2.443 2.769 2.769 0 0 0 3 2.446 2.769 2.769 0 0 0 3-2.446z"},
"layer-imagery":{32:[{d:"M23.463 23.2a26.071 26.071 0 0 0-3.463.224v-5.076a34.065 34.065 0 0 1 5.302-.251l.861 5.191c-.9-.059-1.804-.088-2.7-.088zM13 8.705v4.258c.456-.124.916-.253 1.392-.389A46.427 46.427 0 0 1 19 11.432V7.347a16.922 16.922 0 0 0-2.396.56A22.646 22.646 0 0 1 13 8.705z",opacity:.25},{d:"M13 13.999a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-4.463 11.8A16.675 16.675 0 0 0 12 25.477v-5.1a15.064 15.064 0 0 1-3.463.395 20.464 20.464 0 0 1-2.259-.142l-.796 4.796a13.024 13.024 0 0 0 3.055.375z",
opacity:.5},{d:"M23.462 27.2A33.153 33.153 0 0 1 31 28L27 3.9a26.401 26.401 0 0 0-5.926-.689c-5.144 0-5.927 1.657-10.735 1.657A14.99 14.99 0 0 1 5 3.9L1 28a16.273 16.273 0 0 0 7.538 1.8c6.876 0 8.048-2.6 14.924-2.6zm-21.355.234L5.795 5.217a15.6 15.6 0 0 0 4.544.651 17.42 17.42 0 0 0 5.445-.847 16.628 16.628 0 0 1 5.29-.81 26.164 26.164 0 0 1 5.05.518l3.651 21.999a37.286 37.286 0 0 0-6.313-.528 22.381 22.381 0 0 0-7.77 1.348A20.422 20.422 0 0 1 8.539 28.8a15.989 15.989 0 0 1-6.43-1.366zM24.384 6.456a23.558 23.558 0 0 0-3.31-.245 14.762 14.762 0 0 0-4.738.733 19.402 19.402 0 0 1-5.996.924 18.182 18.182 0 0 1-2.92-.228L4.349 26.146a14.096 14.096 0 0 0 4.188.654 18.525 18.525 0 0 0 6.541-1.154 24.357 24.357 0 0 1 8.385-1.446c1.448 0 2.763.078 3.896.188zM20 12.29a26.155 26.155 0 0 1 4.29-.29l.845 5.097a35.442 35.442 0 0 0-5.135.242zm3.519-4.935l.604 3.643a27.235 27.235 0 0 0-4.123.276V7.246c.33-.02.68-.035 1.074-.035a21.744 21.744 0 0 1 2.445.143zm-6.915.553A16.922 16.922 0 0 1 19 7.347v4.085a46.427 46.427 0 0 0-4.608 1.142c-.475.136-.936.265-1.392.389V8.705a22.646 22.646 0 0 0 3.604-.798zM13 14a84.02 84.02 0 0 0 1.666-.464c1.323-.378 2.741-.78 4.334-1.08v5.03a32.286 32.286 0 0 0-4.714 1.202c-.435.137-.86.267-1.286.391zm-2.66-5.13c.603 0 1.146-.027 1.66-.065v4.414a13.823 13.823 0 0 1-4.56.414l.808-4.872a19.724 19.724 0 0 0 2.092.108zM12 19.344a15.286 15.286 0 0 1-5.558.299l.832-5.012c.407.04.808.066 1.198.066A15.487 15.487 0 0 0 12 14.241zm-6.518 6.08l.796-4.796a20.464 20.464 0 0 0 2.26.143A15.064 15.064 0 0 0 12 20.376v5.1a16.675 16.675 0 0 1-3.463.324 13.024 13.024 0 0 1-3.055-.375zm9.289-.73a39.72 39.72 0 0 1-1.771.537V20.12a49.66 49.66 0 0 0 1.587-.48A31.896 31.896 0 0 1 19 18.5v5.077a30.389 30.389 0 0 0-4.23 1.117zM20 23.423v-5.076a34.138 34.138 0 0 1 5.302-.25l.861 5.19c-.9-.059-1.804-.088-2.7-.088a26.071 26.071 0 0 0-3.463.224z"}]},
"layer-points":{16:"M12.207 13.2A6.624 6.624 0 0 1 16 14.29L13.867 1.687a8.204 8.204 0 0 0-3.161-.674c-2.69 0-2.724.986-5.412.986a10.39 10.39 0 0 1-3.161-.512L0 14.09a9.158 9.158 0 0 0 3.793.711c3.665 0 4.749-1.6 8.414-1.6zM2.935 2.74A11.376 11.376 0 0 0 5.294 3a7.833 7.833 0 0 0 3.045-.552 5.895 5.895 0 0 1 2.367-.434 7.212 7.212 0 0 1 2.27.399l1.72 10.163a8.317 8.317 0 0 0-2.489-.376 12.79 12.79 0 0 0-4.526.852 10.962 10.962 0 0 1-3.888.748 9.54 9.54 0 0 1-2.668-.363zM4.5 5.5a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm6 3a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm-7 2a1 1 0 1 1 1 1 1 1 0 0 1-1-1z",
32:"M1.006 27.866L1 27.9c-.103-.051-.085-.055.006-.034zM16 27.9c-7.178 2.393-14.242.137-14.994-.034L5 3.9a13.387 13.387 0 0 0 11 0c5-2 11 0 11 0l4 24c.96.48-6.96-2.68-15 0zm13.769-1.307L26.117 4.685a20.301 20.301 0 0 0-5.043-.674 12.648 12.648 0 0 0-4.702.818 16.272 16.272 0 0 1-6.033 1.24 13.214 13.214 0 0 1-4.553-.8L2.143 27.126a28.17 28.17 0 0 0 6.784.864 21.342 21.342 0 0 0 6.757-1.04 23.333 23.333 0 0 1 7.389-1.142 29.997 29.997 0 0 1 6.696.784zM12.5 10.5a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm9 4a1 1 0 1 0 1 1 1 1 0 0 0-1-1zm-10 5a1 1 0 1 0 1 1 1 1 0 0 0-1-1z"},
"layer-tile":{32:"M31 28s-6-3-15 0-15 0-15 0l2.714-16.286.87.87-2.466 14.792a18.032 18.032 0 0 0 5.993.957 23.961 23.961 0 0 0 7.573-1.281 25.957 25.957 0 0 1 8.205-1.385 20.658 20.658 0 0 1 5.842.803L26.117 4.784a20.35 20.35 0 0 0-5.043-.673 12.939 12.939 0 0 0-4.286.677L16 4c5-2 11 0 11 0zM16 7h9v17H8v-9h8zM9 23h3.243l.04-.137a6.48 6.48 0 0 1 .546-1.23 3.236 3.236 0 0 0 .337-.757.575.575 0 0 0-.1-.327 1.52 1.52 0 0 1-.218-.787c0-1.236 1.963-2.573 2.619-2.573H16V16H9zm7 0v-4.812h-.533c-.347.075-1.62 1.022-1.62 1.574a.55.55 0 0 0 .1.313 1.545 1.545 0 0 1 .219.801 2.894 2.894 0 0 1-.454 1.227 6.684 6.684 0 0 0-.414.897zm8 0v-4.918a10.162 10.162 0 0 0-2.276.865c-1.58.79-3.622.08-4.724-.427V23zm0-7h-7v1.41c.751.388 2.867 1.345 4.276.643A10.442 10.442 0 0 1 24 17.058zm-7-1h7V8h-7zM6 14V5h9v9zm8-8H7v5.145a.824.824 0 0 0 .627-.21 2.075 2.075 0 0 0 .663-1.392 1.508 1.508 0 0 1 1.448-1.558 1.893 1.893 0 0 1 1.194.494 1.296 1.296 0 0 0 .467.255.517.517 0 0 0 .123.034c.316 0 .486-.183.738-.608.042-.07.08-.129.126-.212A2.776 2.776 0 0 1 14 6.428zm0 7V7.513a2.36 2.36 0 0 0-.743.926c-.334.592-.75 1.329-1.736 1.329a1.735 1.735 0 0 1-1.069-.403l-.124-.09a.997.997 0 0 0-.59-.29c-.257 0-.448.294-.448.558a2.6 2.6 0 0 1-.112.672 3.02 3.02 0 0 1-.908 1.487 1.854 1.854 0 0 1-1.205.46c-.021 0-.043-.005-.065-.006V13z"},
layers:{16:"M8.023 1.023l-8 4.5 8 4.5 8-4.5zm-5.96 4.5l5.96-3.352 5.96 3.352-5.96 3.353zm13.96 3l-8 4.5-8-4.5 1.02-.573 6.98 3.926 6.98-3.926zm-8 6.353l6.98-3.926 1.02.573-7.914 4.452a.175.175 0 0 1-.171 0L.023 11.523l1.02-.573z"},lightbulb:{24:"M16.337 3.055a6.057 6.057 0 0 0-4.675-2.051l-.162.002-.162-.002a6.057 6.057 0 0 0-4.675 2.05 6.46 6.46 0 0 0-1.63 4.802 11.406 11.406 0 0 0 2.014 4.465 6.703 6.703 0 0 1 .75 1.322 12.957 12.957 0 0 1 .113 1.333c.019.366.037.71.074.994a2.84 2.84 0 0 0 .704 1.576l-.525.458a.804.804 0 0 0 .066 1.264l.414.293-.364.263a.804.804 0 0 0-.333.689.794.794 0 0 0 .37.641l2.45 1.625a1.311 1.311 0 0 0 .723.22h.016a1.316 1.316 0 0 0 .73-.22l2.43-1.613a.803.803 0 0 0 .059-1.34l-.367-.265.418-.295a.806.806 0 0 0 .062-1.263l-.525-.458a2.87 2.87 0 0 0 .707-1.596c.034-.263.052-.607.07-.973a12.957 12.957 0 0 1 .114-1.333 6.703 6.703 0 0 1 .75-1.322 11.406 11.406 0 0 0 2.014-4.465 6.46 6.46 0 0 0-1.63-4.801zm-2.43 17.414l-2.225 1.476a.41.41 0 0 1-.185.053h-.002a.32.32 0 0 1-.177-.053L9.093 20.47l1.264-.923-1.35-.953.68-.594h3.626l.68.594-1.35.953zM12 17h-1v-3h1zm4.975-9.263a10.671 10.671 0 0 1-1.863 4.042 5.638 5.638 0 0 0-.895 1.7 13.401 13.401 0 0 0-.125 1.446c-.018.336-.033.65-.07.93A1.898 1.898 0 0 1 13.456 17H13v-3.421l1.075-3.325-.951-.309L12.136 13h-1.272l-.988-3.055-.951.309L10 13.579V17h-.456a1.93 1.93 0 0 1-.57-1.182c-.033-.243-.048-.557-.066-.893a13.401 13.401 0 0 0-.125-1.446 5.638 5.638 0 0 0-.895-1.7 10.671 10.671 0 0 1-1.863-4.042 5.49 5.49 0 0 1 1.386-4.02 5.083 5.083 0 0 1 3.927-1.713l.162.002.162-.002a5.083 5.083 0 0 1 3.927 1.714 5.49 5.49 0 0 1 1.386 4.02z"},
link:{16:"M5 9.5a4.505 4.505 0 0 0 .048.493c-.007-.007-.016-.011-.023-.018l-3-3a3.5 3.5 0 1 1 4.95-4.95l3 3a3.486 3.486 0 0 1-1.31 5.76l-.226-.225a1.484 1.484 0 0 1-.37-.631 2.495 2.495 0 0 0 1.199-4.197l-3-3a2.5 2.5 0 1 0-3.536 3.536L5.09 8.625A4.498 4.498 0 0 0 5 9.5zm11 3a3.475 3.475 0 0 0-1.025-2.475l-3-3c-.007-.007-.016-.011-.023-.018A4.505 4.505 0 0 1 12 7.5a4.498 4.498 0 0 1-.089.876l2.357 2.356a2.5 2.5 0 0 1-.009 3.544 2.561 2.561 0 0 1-3.527-.008l-3-3a2.5 2.5 0 0 1-.094-3.436 2.43 2.43 0 0 1 1.3-.74 1.485 1.485 0 0 0-.377-.652l-.222-.222a3.482 3.482 0 0 0-1.314 5.757l3 3a3.5 3.5 0 0 0 4.937.012l-.351-.355.352.355A3.476 3.476 0 0 0 16 12.5z",
24:"M7 14c0 .025.003.05.004.075l-3.54-3.54a5 5 0 0 1 7.072-7.07l4 4a4.992 4.992 0 0 1-1.713 8.187l-.237-.237a1.998 1.998 0 0 1-.413-.609 3.985 3.985 0 0 0 1.656-6.635l-4-4a4 4 0 0 0-5.369-.26l-.318-.387.318.386a4 4 0 0 0-.29 5.92l2.94 2.94A7.012 7.012 0 0 0 7 14zm16 4a4.97 4.97 0 0 0-1.464-3.536l-3.54-3.539c0 .025.004.05.004.075a7.087 7.087 0 0 1-.113 1.23l2.942 2.941a4 4 0 0 1-.128 5.78l.338.368-.338-.368a4 4 0 0 1-5.53-.122l-4-4a3.966 3.966 0 0 1 1.658-6.631 1.998 1.998 0 0 0-.415-.613l-.234-.234a5.004 5.004 0 0 0-1.907 1.315 5 5 0 0 0 .191 6.87l4 4A5 5 0 0 0 23 18z"},
list:{16:"M6 14h9v1H6zm-5-1h3v3H1zm1 2h1v-1H2zM6 2v1h9V2zm0 7h9V8H6zM1 1h3v3H1zm1 2h1V2H2zM1 7h3v3H1zm1 2h1V8H2z"},locator:{32:"M27 15h2l-4-4V3h-5v3l-4.5-4.5L2 15h2v14H2v1h27v-1h-2zM21 4h3v6l-3-3zm-5.5-1.086L26.586 14H4.414zM5 29V15h21v14zm4-4h13v-7H9zm12-6v5h-5v-5zm-11 0h5v5h-5z"},lock:{16:"M13 7V5A5 5 0 0 0 3 5v2a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1zM4 5a4 4 0 0 1 8 0v2h-1V5a3 3 0 0 0-6 0v2H4zm6 2H6V5a2 2 0 0 1 4 0zm3 8H3V8h10zm-5-1H7V9h1v1h1v1H8v1h1v1H8z",
32:"M26 14h-2v-3.5a8.5 8.5 0 0 0-17 0V14H5a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h21a2.006 2.006 0 0 0 2-2V16a2.006 2.006 0 0 0-2-2zM8 10.5a7.5 7.5 0 0 1 15 0V14h-1v-3.5a6.5 6.5 0 0 0-13 0V14H8zM21 14H10v-3.5a5.5 5.5 0 0 1 11 0zm6 16a1.001 1.001 0 0 1-1 1H5a1.001 1.001 0 0 1-1-1V16a1.001 1.001 0 0 1 1-1h21a1.001 1.001 0 0 1 1 1zM16 19h1v1h-1zm-1 1h1v1h1v1h-1v1h1v1h-1v1h1v1h-1v1h-1z"},line:{16:"M6 5v1.293L9.707 10h.328L14 3.657V2h2v2h-1.035L11 10.343V12H9v-1.293L5.293 7h-.492L2 12.383V14H0v-2h1.073L4 6.374V5z",
24:"M21 6h.046l-5.25 9h-.944L10 9.455V7H7v2.926L1.862 18H0v3h3v-2.926L8.138 10h1.01L14 15.545V18h3v-3h-.046l5.25-9H24V3h-3zM8 8h1v1H8zM2 20H1v-1h1zm14-3h-1v-1h1zm7-13v1h-1V4z"},"magnifying-glass-plus":{16:"M15.805 13.918l-3.067-3.068a.668.668 0 0 0-.943 0l-.124.124-.968-.968a5.5 5.5 0 1 0-.69.69l.968.968-.13.129a.667.667 0 0 0 0 .943l3.068 3.067a.665.665 0 0 0 .943 0l.943-.942a.666.666 0 0 0 0-.943zM9.683 9.68A4.47 4.47 0 0 1 6.5 10.999a4.502 4.502 0 1 1 3.183-1.318zm4.708 5.18l-2.597-2.596.473-.473 2.595 2.598zM7 6h2v1H7v2H6V7H4V6h2V4h1z"},
map:{16:"M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.498 1.498 0 0 0 .718-1.267 1.24 1.24 0 0 0-.053-.358 1.594 1.594 0 0 0 .326-.607c.03.002.062.003.093.003a1.415 1.415 0 0 0 .836-.266 1.517 1.517 0 0 0 .126.124 2.385 2.385 0 0 0 1.564.68H14v2h-3.183zM14 11h-.43a1.464 1.464 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375a1.545 1.545 0 0 0 .09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.619.619 0 0 1 .59-.643c.323 0 .464.264.618.54a.642.642 0 0 0 .617.308c.49 0 .798-.61.798-.977a.471.471 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823a.434.434 0 0 1 .022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.653.653 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44a1.496 1.496 0 0 0 .112.567 1.6 1.6 0 0 0-.422.643 1.428 1.428 0 0 0-.074.442 1.676 1.676 0 0 0-.536.43 1.317 1.317 0 0 0-.32 1.091 3.213 3.213 0 0 1 .066.414 1.987 1.987 0 0 0-.649.67 1.462 1.462 0 0 0-.674-.166 1.447 1.447 0 0 0-1.383 1.086 1.443 1.443 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.371 1.371 0 0 0 .984 1.29 1.583 1.583 0 0 0-.003 1.549c.143.286.636.774.534.774z",
24:"M22.82 15.995l-.02-.016V1.2H1.2v21.6h21.6v-6.78zM22 15.81a2.898 2.898 0 0 1-.749.147 2.476 2.476 0 0 1-.396.044c-.319 0-.746-.376-1.03-.625a1.32 1.32 0 0 1-.214-.39c-.145-.339-.39-.907-1.04-.907a1.585 1.585 0 0 0-1.062.414.625.625 0 0 1-.444.2.77.77 0 0 1-.237-.086 1.52 1.52 0 0 0-.66-.178 1.068 1.068 0 0 0-1.168.94v.752c0 .098-.05.161-.233.346a1.455 1.455 0 0 0-.526 1.055 1.146 1.146 0 0 0 .357.73c.036.042.086.1.11.105a1.85 1.85 0 0 1-.444.16c-.444.122-1.186.326-1.186 1.14a1.214 1.214 0 0 0 .318.73c.029.037.066.086.087.116-.048.124-.14.328-.235.547a15.9 15.9 0 0 0-.391.951h-2.58l-.002-.287a2.293 2.293 0 0 1 .184-.817l.053-.15a2.931 2.931 0 0 0 .186-.999c0-.871-.876-1.076-1.4-1.198-.172-.04-.432-.102-.464-.108-.174-.345-.088-.485.357-.93a1.925 1.925 0 0 0 .736-1.353 1.198 1.198 0 0 0-.951-1.267 1.626 1.626 0 0 0-.856.137.95.95 0 0 1-.39.091.28.28 0 0 1-.156-.039.974.974 0 0 1 .171-.475 1.898 1.898 0 0 0 .292-.955 2.3 2.3 0 0 0-.093-.608 1.337 1.337 0 0 1-.06-.355.434.434 0 0 1 .386-.464c.156 0 .246.118.488.55a1.44 1.44 0 0 0 1.363.721c1.035 0 1.696-1.164 1.696-1.965 0-.113.08-.232.157-.232.084 0 .157.049.315.169a1.468 1.468 0 0 0 .92.37 1.523 1.523 0 0 0 1.335-.997 1.485 1.485 0 0 1 .483-.607 2.175 2.175 0 0 0 .81-2.616c.049-.08.161-.199.152-.217a1.18 1.18 0 0 0 1.02-.32 1.325 1.325 0 0 0 .17-1.18 1.024 1.024 0 0 1-.03-.286 1.002 1.002 0 0 1 .282-.3 1.451 1.451 0 0 0 .637-1.114 1.487 1.487 0 0 0-.238-.764.583.583 0 0 1-.11-.276c0-.055.109-.404.996-.885.281-.152.445-.226.552-.274H22zM2 2h15.354a1.586 1.586 0 0 0-.634 1.16 1.488 1.488 0 0 0 .239.767.582.582 0 0 1 .11.272c0 .092-.069.165-.288.353a1.707 1.707 0 0 0-.58.743 1.173 1.173 0 0 0-.058.372 2.331 2.331 0 0 0 .053.419c.02.106.058.303.097.303h.001a.537.537 0 0 1-.235.012 1.244 1.244 0 0 0-.91.474 1.051 1.051 0 0 0-.293.94c.165.802.165 1.285-.304 1.538a2.313 2.313 0 0 0-.88.995c-.23.41-.305.488-.463.488-.085 0-.158-.049-.317-.169a1.462 1.462 0 0 0-.918-.37 1.197 1.197 0 0 0-1.157 1.232c0 .323-.3.965-.696.965-.375 0-.448-.134-.504-.233a1.569 1.569 0 0 0-1.347-1.038 1.428 1.428 0 0 0-1.386 1.464 2.3 2.3 0 0 0 .093.608 1.337 1.337 0 0 1 .06.355.974.974 0 0 1-.17.476 1.898 1.898 0 0 0-.293.954 1.103 1.103 0 0 0 1.156 1.04 1.936 1.936 0 0 0 .752-.16.874.874 0 0 1 .35-.09h.007a.537.537 0 0 1 .088.288c0 .19-.167.371-.442.646a1.645 1.645 0 0 0-.546 2.086 1.529 1.529 0 0 0 1.131.632c.199.046.568.132.628.225a1.957 1.957 0 0 1-.132.672l-.05.14a3.23 3.23 0 0 0-.24 1.154l.002.287H2zm11.927 20c.07-.168.156-.363.238-.55.297-.682.335-.775.335-.965a1.173 1.173 0 0 0-.31-.708c-.042-.054-.095-.141-.118-.127a1.528 1.528 0 0 1 .457-.17c.415-.115 1.188-.328 1.188-1.144a1.156 1.156 0 0 0-.359-.735c-.047-.054-.116-.132-.117-.08 0-.1.05-.165.235-.35A1.449 1.449 0 0 0 16 16.12v-.66a.498.498 0 0 1 .407.053 1.498 1.498 0 0 0 .658.178 1.587 1.587 0 0 0 1.063-.414.768.768 0 0 1 .4-.217 1.413 1.413 0 0 1 .165.32 1.965 1.965 0 0 0 .473.745 2.772 2.772 0 0 0 1.69.874 3.63 3.63 0 0 0 .551-.056 2.464 2.464 0 0 1 .395-.044.526.526 0 0 0 .198-.038V22z"},
"mega-phone":{32:"M28.97 4.36a2.06 2.06 0 0 0-2.06.002l-12.768 7.372a1.99 1.99 0 0 1-1 .267H4a2 2 0 0 0-2 2V18a2 2 0 0 0 2 2h4v3a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-1.083l9.91 5.722A2.06 2.06 0 0 0 30 25.857V6.144a2.06 2.06 0 0 0-1.03-1.784zM16 23a1.001 1.001 0 0 1-1 1h-5a1.001 1.001 0 0 1-1-1v-3h4.002a2.53 2.53 0 0 1 1.269.341L16 21.34zm13 2.856a1.06 1.06 0 0 1-1.59.916L14.641 19.4a3.015 3.015 0 0 0-1.5-.4H4a1 1 0 0 1-1-1v-4.01a1 1 0 0 1 1-.999h9.144a2.992 2.992 0 0 0 1.496-.4l12.77-7.362a1.067 1.067 0 0 1 .532-.144A1.06 1.06 0 0 1 29 6.145z"},
"minus-circle":{16:"M12 7v1H3V7zM7.5 0A7.5 7.5 0 1 0 15 7.5 7.5 7.5 0 0 0 7.5 0zm0 14A6.5 6.5 0 1 1 14 7.5 6.508 6.508 0 0 1 7.5 14z"},mobile:{16:"M10.983 0H6.017A2.017 2.017 0 0 0 4 2.017v11.966A2.017 2.017 0 0 0 6.017 16h4.966A2.017 2.017 0 0 0 13 13.983V2.017A2.017 2.017 0 0 0 10.983 0zM6.018 1h4.964a1.016 1.016 0 0 1 1.015 1H5.004a1.016 1.016 0 0 1 1.014-1zM12 13.983A1.018 1.018 0 0 1 10.982 15H9v-1H8v1H6.018A1.018 1.018 0 0 1 5 13.983V13h7zM12 12H5V3h7z",24:"M6 2.524v19.952A1.524 1.524 0 0 0 7.524 24h9.952A1.524 1.524 0 0 0 19 22.476V2.524A1.524 1.524 0 0 0 17.476 1H7.524A1.524 1.524 0 0 0 6 2.524zm12 19.953a.524.524 0 0 1-.524.523H14v-1h-3v1H7.524A.524.524 0 0 1 7 22.477V21h11zM18 20H7V4h11zm-.524-18a.524.524 0 0 1 .524.523V3H7v-.477A.524.524 0 0 1 7.524 2z"},
monitor:{16:"M15.167 1H.833A.834.834 0 0 0 0 1.833v10.334A.834.834 0 0 0 .833 13H6v1H5v1h6v-1h-1v-1h5.167a.834.834 0 0 0 .833-.834V1.834A.834.834 0 0 0 15.167 1zM9 14H7v-1h2zm6-2H1V2h14z",24:"M0 4v14a1.001 1.001 0 0 0 1 1h9v1H8v1h8v-1h-2v-1h9a1.001 1.001 0 0 0 1-1V4a1.001 1.001 0 0 0-1-1H1a1.001 1.001 0 0 0-1 1zm13 16h-2v-1h2zm10-2H1V4h22z"},notebook:{32:"M5 24H3v-1h1v-1h1zm0-5H4v1H3v1h2zm0 6H4v1H3v1h2zM28 2v28H4v-2h1v1h2V3H5v3H3V5h1V2zm-1 1H8v26h19zM5 13H4v1H3v1h2zm0 3H4v1H3v1h2zm0-6H4v1H3v1h2zm0-3H4v1H3v1h2zm10.5 14H13V11h2.5v-1H12v12h3.5zM23 10h-3.5v1H22v10h-2.5v1H23z"},
organization:{16:"M8 3V1H2v2H0v13h7v-4h1v4h7V3zm1 12v-4H6v4H1V4h2V2h4v2h7v11zM6 9h3V6H6zm1-2h1v1H7zm3-1v3h3V6zm2 2h-1V7h1zM2 9h3V6H2zm1-2h1v1H3z",24:"M22 4H12V2H5v2H2v18H0v1h11v-5h2v5h11v-1h-2zm-8 18v-5h-4v5H3V5h3V3h5v2h10v17zM5 11h4V7H5zm1-3h2v2H6zm4 3h4V7h-4zm1-3h2v2h-2zm4 3h4V7h-4zm1-3h2v2h-2zM5 16h4v-4H5zm1-3h2v2H6zm4 3h4v-4h-4zm1-3h2v2h-2zm4 3h4v-4h-4zm1-3h2v2h-2z"},"pause-f":{16:"M5 14H2a1.003 1.003 0 0 1-1-1V2a1.003 1.003 0 0 1 1-1h3a1.003 1.003 0 0 1 1 1v11a1.003 1.003 0 0 1-1 1zm9-1V2a1.003 1.003 0 0 0-1-1h-3a1.003 1.003 0 0 0-1 1v11a1.003 1.003 0 0 0 1 1h3a1.003 1.003 0 0 0 1-1z"},
pencil:{16:"M14.792 2.666l-1.414-1.413a.965.965 0 0 0-1.385-.03l-1.444 1.444-8.763 8.72L.03 15.481a.371.371 0 0 0 .488.488l4.096-1.756 8.763-8.72-.001-.001.002.002 1.443-1.444a.965.965 0 0 0-.03-1.385zM1.569 14.431l.554-1.293.74.739zm2.338-.924l-1.414-1.414 7.963-7.92 1.414 1.415zm8.67-8.626l-1.413-1.414 1.29-1.29a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .433z"},pin:{24:"M12 1C8.687 1 6 2.283 6 5.619v11.93l6 6.04 6-6.04V5.619C18 2.283 15.313 1 12 1zm5.1 16.238L12 22.37l-5.1-5.133V5.488c0-3.05 2.773-3.69 5.1-3.69s5.1.64 5.1 3.69zM15 8a3 3 0 1 1-3-3 3 3 0 0 1 3 3zm-1 0a2 2 0 1 0-2 2 2.003 2.003 0 0 0 2-2z"},
plus:{16:"M14 8H9v5H8V8H3V7h5V2h1v5h5z",24:"M22 13h-9v9h-1v-9H3v-1h9V3h1v9h9z",32:"M16 17H8v-1h8V8h1v8h8v1h-8v8h-1z"},"plus-circle":{24:"M11.5 1.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 11.5 1.2zm0 19.6a9.3 9.3 0 1 1 9.3-9.3 9.31 9.31 0 0 1-9.3 9.3zM12 11h5v1h-5v5h-1v-5H6v-1h5V6h1z",32:"M16.5 3.2a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm0 25.6a12.3 12.3 0 1 1 12.3-12.3 12.314 12.314 0 0 1-12.3 12.3zM17 16h7v1h-7v7h-1v-7H9v-1h7V9h1z"},"plus-f":{16:"M9 7h5v2H9v5H7V9H2V7h5V2h2z"},"plus-square":{16:"M13.071 1H1.93a.929.929 0 0 0-.93.929V13.07a.929.929 0 0 0 .929.929H13.07a.929.929 0 0 0 .929-.929V1.93a.929.929 0 0 0-.928-.93zM13 13H2V2h11zm-2-5H8v3H7V8H4V7h3V4h1v3h3z",
24:"M19.719 2H3.28A1.281 1.281 0 0 0 2 3.281v16.437A1.282 1.282 0 0 0 3.281 21h16.437A1.282 1.282 0 0 0 21 19.718V3.281A1.281 1.281 0 0 0 19.719 2zM20 19.719a.281.281 0 0 1-.281.281H3.28a.281.281 0 0 1-.28-.281V3.28A.281.281 0 0 1 3.281 3H19.72a.281.281 0 0 1 .281.281zM12 11h6v1h-6v6h-1v-6H5v-1h6V5h1z"},polygon:{16:"M15 1L6.833 7 1 4v11h14zm-1 13H2V5.639l4.927 2.534L14 2.976z",24:"M2 4.8V22h20V2l-11.538 8.4zm19-.835V21H3V6.661l7.489 4.956z"},point:{16:"M6 11h5V6H6zm1-4h3v3H7zm5 1h4v1h-4zM1 8h4v1H1zm8 8H8v-4h1zM9 5H8V1h1z",
24:"M16 12h7v1h-7zM2 13h7v-1H2zm10 10h1v-7h-1zm0-14h1V2h-1zm-2 1h5v5h-5zm1 4h3v-3h-3z"},portal:{24:"M11.994 1.115L3.628 5.356A4.8 4.8 0 0 0 1 9.633v7.596A4.732 4.732 0 0 0 5.4 22h11.141A6.786 6.786 0 0 0 23 15.17V6.104zM22 15.17A5.775 5.775 0 0 1 16.541 21H5.401A3.724 3.724 0 0 1 2 17.229V9.633a3.777 3.777 0 0 1 2.08-3.385l7.939-4.024L22 6.748zm-7.686-2.152l2.537 1.4-4.849 2.676-4.85-2.676 2.537-1.4.932.514-1.606.886 2.987 1.648 2.987-1.648-1.607-.886zM12.002 7.8l-4.85 2.676 4.85 2.676 4.85-2.676zm0 4.324l-2.987-1.648 2.987-1.648 2.987 1.648z"},
promote:{48:"M13.147 22.954l-7.021 2.167-.236-.765 7.021-2.167zm.52 1.686l-7.021 2.167.236.764 7.021-2.166zm24.084-4.995l-1.812.56 3.706 12.01a1.861 1.861 0 0 1-1.262 2.31 1.85 1.85 0 0 1-1.416-.152 1.847 1.847 0 0 1-.894-1.11l-.45-1.457c-1.123-.63-9.406-5.06-16.124-2.985l-.917.283-2.128.657c.094.282.188.565.283.842a7.906 7.906 0 0 0 2.858 1.61 1.423 1.423 0 0 1 .616 2.372l-1.252 1.256a26.572 26.572 0 0 0 3.062 4.561l.6-.185a2.224 2.224 0 0 1 2.778 1.469l.128.414a2.223 2.223 0 0 1-1.468 2.78l-5.163 1.592-.17-.166a29.572 29.572 0 0 1-8.8-14.531l-.613.189a6.55 6.55 0 0 1-3.862-12.516l9.269-2.86.916-.283c6.721-2.073 11.068-10.401 11.64-11.552l-.452-1.466a1.86 1.86 0 0 1 1.26-2.315 1.865 1.865 0 0 1 2.31 1.261l3.64 11.799 1.812-.559a3.23 3.23 0 0 1 1.905 6.173zm-19.788 8.812l-3.39-10.986-8.886 2.741A5.749 5.749 0 1 0 9.077 31.2zm1.411 4.526a8.179 8.179 0 0 1-2.9-1.567 7.292 7.292 0 0 0 1.202 3.414 1.309 1.309 0 0 0 .616.547l1.353-1.356a.622.622 0 0 0-.271-1.038zm-3.685-2.986l-5 1.542a28.411 28.411 0 0 0 8.427 14.028l4.706-1.452a1.423 1.423 0 0 0 .942-1.779l-.128-.414a1.426 1.426 0 0 0-1.78-.94l-1.106.34-.17-.2a27.468 27.468 0 0 1-3.354-4.954 1.696 1.696 0 0 1-1.108-.75c-.905-1.154-1.74-3.717-1.32-4.58a.692.692 0 0 1 .125-.146q-.118-.345-.234-.695zm19.598.719L27.613 5.845c-1.316 2.454-5.463 9.288-11.74 11.225l-.535.164 3.39 10.988.535-.165c6.278-1.935 13.554 1.374 16.024 2.659zm3.59 1.727l-9.25-29.979a1.061 1.061 0 1 0-2.037.592l9.249 29.977a1.061 1.061 0 1 0 2.039-.59zM37.516 18.88a2.43 2.43 0 1 0-1.433-4.643l-1.812.559 1.433 4.643zM43.39 3.96l-.567-.565-4.17 4.17.567.566zM43.235 15.5l4.869-1.305-.207-.772-4.869 1.305zm-1.25 8.108l5.911 1.583.207-.772-5.91-1.584z"},
question:{rtl:"ar",16:"M7.5 0A7.5 7.5 0 1 0 15 7.5 7.509 7.509 0 0 0 7.5 0zm.001 14.1A6.6 6.6 0 1 1 14.1 7.5a6.608 6.608 0 0 1-6.599 6.6zM7.5 10.5a1 1 0 1 1-1 1 1 1 0 0 1 1-1zM8 9H7a3.046 3.046 0 0 1 1.282-2.51c.47-.462.736-.746.732-1.217a1.324 1.324 0 0 0-1.46-1.27 1.418 1.418 0 0 0-1.548 1.394h-1c0-3.09 5.009-3.154 5.008-.128a2.617 2.617 0 0 1-1.032 1.935C8.462 7.715 8 7.995 8 9z",32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.517 14.517 0 0 0 15.5 1zm0 28A13.5 13.5 0 1 1 29 15.5 13.515 13.515 0 0 1 15.5 29zm.5-9h-1c0-2.959 1.227-3.919 2.371-5.207.916-1.031 1.639-1.846 1.629-3.264C19 9.104 17.08 8 15.167 8 13.16 8 11 9.194 11 11.817h-1a4.523 4.523 0 0 1 1.648-3.628A5.549 5.549 0 0 1 15.168 7C17.637 7 20 8.555 20 11.525a5.598 5.598 0 0 1-1.881 3.932C17.043 16.668 16 17.421 16 20zm-.5 4.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"},
"question-f":{24:"M12.5 19.5a1 1 0 1 1 1-1 1 1 0 0 1-1 1zm0-17.3a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zm2.144 9.9l-.113.11a3.321 3.321 0 0 0-1.33 2.79v.2H11.8V15a4.735 4.735 0 0 1 1.77-3.807l.092-.09c.664-.652 1.144-1.122 1.138-1.906A1.998 1.998 0 0 0 12.607 7.2a2.228 2.228 0 0 0-2.424 2.19v.2h-1.4v-.2a3.382 3.382 0 0 1 1.237-2.711 4.082 4.082 0 0 1 2.587-.88A3.36 3.36 0 0 1 16.2 9.194a3.937 3.937 0 0 1-1.556 2.908z",32:"M16.5 25.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1zm0-22.3a13.3 13.3 0 1 0 13.3 13.3A13.3 13.3 0 0 0 16.5 3.2zm2.77 13.388c-.137.155-.273.3-.406.443A4.936 4.936 0 0 0 17.2 21v.2h-1.4V21a6.202 6.202 0 0 1 2.039-4.92c.128-.138.256-.276.383-.42.922-1.038 1.588-1.787 1.578-3.13 0-2.3-1.824-3.33-3.632-3.33-1.911 0-3.968 1.132-3.968 3.617v.2h-1.4v-.2a4.715 4.715 0 0 1 1.721-3.782A5.741 5.741 0 0 1 16.168 7.8c2.424 0 5.032 1.478 5.032 4.725a5.76 5.76 0 0 1-1.93 4.063z"},
refresh:{16:"M13.91 9h1.01A6.987 6.987 0 0 1 2 11.587V14H1v-4h4v1H2.812A5.99 5.99 0 0 0 13.91 9zM14 2v2.413A6.987 6.987 0 0 0 1.08 7h1.01a5.99 5.99 0 0 1 11.098-2H11v1h4V2z"},reset:{16:"M.146 6.854L4 10.707l3.854-3.853-.707-.707L4.232 9.06a5.48 5.48 0 1 1 3.65 3.697l-.293.956A6.501 6.501 0 1 0 3 7.5a6.58 6.58 0 0 0 .061.854L.854 6.146z"},"road-sign":{32:"M30.927 14.615L17.386 1.076a1.957 1.957 0 0 0-2.77-.002L1.073 14.615a1.96 1.96 0 0 0 0 2.77l13.543 13.542a1.957 1.957 0 0 0 2.768 0l13.543-13.542a1.96 1.96 0 0 0 0-2.77zm-.707 2.063L16.677 30.22a.957.957 0 0 1-1.354 0L1.78 16.678a.96.96 0 0 1 0-1.356l13.543-13.54a.957.957 0 0 1 1.354 0l13.543 13.54a.96.96 0 0 1 0 1.356zM19.354 9.646l3.853 3.855-3.852 3.853-.707-.707L21.293 14h-4.639a4.68 4.68 0 0 0-4.674 4.674v3.282h-1v-3.282A5.68 5.68 0 0 1 16.654 13h4.64l-2.648-2.647z"},
save:{16:"M14.707 3.293l-2-2A.995.995 0 0 0 12 1H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4a.99.99 0 0 0-.293-.707zM9 2v2H8V2zM5 2h2v3h3V2h1v4H5zm6 12H5v-4h6zm3 0h-2V9H4v5H2V2l2 .001V6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V2l2 2z",24:"M22.969.844v21.312a.844.844 0 0 1-.844.844H5.25a.848.848 0 0 1-.506-.168L1.37 20.3a.847.847 0 0 1-.338-.676V.844A.845.845 0 0 1 1.875 0h20.25a.845.845 0 0 1 .844.844zM6 1v8h12V1zm3 21v-5H8v5zm9 0v-7H6v7h1v-6h3v6zm4-21h-3v9H5V1H2v18.548l3 2.278v-7.17A.769.769 0 0 1 5.844 14h12.312a.769.769 0 0 1 .844.656V22h3z"},
search:{16:"M9.85 9.153a5 5 0 1 0-.69.69l4.631 4.631.69-.69zm-1.02-.326A3.973 3.973 0 0 1 6 10a4.002 4.002 0 1 1 2.83-1.172z",24:"M21.995 21.288l-6.855-6.855a7.517 7.517 0 1 0-.707.707l6.855 6.855zm-17.092-7.19a6.501 6.501 0 1 1 9.6-.45l-.854.855a6.501 6.501 0 0 1-8.746-.405z"},"search-f":{24:"M22.289 20.91l-6.847-6.846a7.524 7.524 0 1 0-1.419 1.409l6.852 6.852zM4 9.5A5.5 5.5 0 1 1 9.5 15 5.506 5.506 0 0 1 4 9.5z"},"select-category":{16:"M5 8H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm7-5h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM13 0h-3a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1h-3a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zM5 0H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h3a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm1 5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1zm-4.265 6.646l.738-.738.784.788L4.962 10l.738.738-2.443 2.43z"},
settings:{16:"M2.17 6.06L0 6.862l.009 2.333 2.179.789a6.153 6.153 0 0 0 .317.764l-.966 2.104 1.655 1.643 2.1-.983a6.105 6.105 0 0 0 .765.318L6.863 16l2.333-.008.789-2.18a6.162 6.162 0 0 0 .764-.317l2.104.966 1.643-1.656-.983-2.099a6.097 6.097 0 0 0 .318-.765L16 9.137l-.009-2.333-2.179-.789a6.149 6.149 0 0 0-.318-.764l.967-2.104-1.656-1.643-2.099.983a6.106 6.106 0 0 0-.765-.318L9.137 0 6.804.009l-.789 2.179a6.163 6.163 0 0 0-.764.317L3.147 1.54 1.504 3.195l.983 2.099a6.093 6.093 0 0 0-.318.765zm3.709 1.592a2.15 2.15 0 1 1 1.773 2.47 2.15 2.15 0 0 1-1.773-2.47zm.951 5.382l-.454-.151a5.436 5.436 0 0 1-.644-.268l-.43-.21-1.899.889-.664-.66.876-1.905-.216-.428a5.223 5.223 0 0 1-.265-.64l-.155-.453-1.973-.715-.003-.935 1.963-.728.151-.454a5.436 5.436 0 0 1 .268-.644l.21-.43-.889-1.899.66-.664 1.904.876.43-.216a5.223 5.223 0 0 1 .639-.265l.453-.155.715-1.973.934-.003.728 1.963.455.151a5.368 5.368 0 0 1 .644.268l.43.21 1.899-.889.664.66-.876 1.905.216.428a5.223 5.223 0 0 1 .265.64l.155.453 1.973.715.003.935-1.962.727-.152.454a5.45 5.45 0 0 1-.268.645l-.21.43.889 1.899-.66.664-1.905-.876-.428.216a5.223 5.223 0 0 1-.64.265l-.453.156-.715 1.972-.935.003zM7.998 4.85a3.154 3.154 0 1 0 .512.042 3.138 3.138 0 0 0-.512-.042z"},
share:{16:"M14 9h1v6H1V1h8v1H2v12h12zm-8-.31V11h1V8.69A3.7 3.7 0 0 1 10.6 5h2.68l-1.4 1.42.71.71 2.61-2.61-2.61-2.61-.71.71L13.28 4H10.6A4.67 4.67 0 0 0 6 8.69z"},"sign-out":{16:"M15 1v14H6v-5h1v4h7V2H7v5H6V1zm-4 7H2.773l1.58-1.581-.706-.707-2.81 2.81 2.81 2.808.706-.707L2.73 9H11z"},sliders:{16:"M3 8h1v1H3v7H2V9H1V8h1V0h1zm6-8H8v4H7v1h1v11h1V5h1V4H9zm6 12V0h-1v12h-1v1h1v3h1v-3h1v-1z"},"sort-descending":{rtl:!0,16:"M4 5h11v1H4zM1 2h14V1H1zm6 8h8V9H7zm3 4h5v-1h-5z"},"speech-bubble":{16:"M8.666 12h4.084A2.253 2.253 0 0 0 15 9.75v-5.5A2.253 2.253 0 0 0 12.75 2h-9.5A2.253 2.253 0 0 0 1 4.25v5.5A2.253 2.253 0 0 0 3.25 12H4v3.5zM3.25 11A1.251 1.251 0 0 1 2 9.75v-5.5A1.251 1.251 0 0 1 3.25 3h9.5A1.251 1.251 0 0 1 14 4.25v5.5A1.251 1.251 0 0 1 12.75 11H8.334L5 13.5V11zM12 6H4V5h8zm-2 3H4V8h6z"},
star:{16:"M15.977 6.016H9.883L7.998.2 6.112 6.016H-.023l4.97 3.586-1.893 5.813 4.944-3.597 4.943 3.597-1.894-5.813zm-7.979 4.566l-3.038 2.21 1.164-3.573-3.052-2.203h3.767l1.159-3.573 1.158 3.573h3.746l-3.03 2.206 1.162 3.569z"},"star-f":{16:"M7.998.2l1.885 5.816h6.094l-4.93 3.586 1.894 5.813-4.943-3.597-4.944 3.597 1.893-5.813-4.97-3.586h6.135z"},table:{16:"M16 15H0V1h16zM5 9H1v2h4zm1-3v2h4V6zM5 6H1v2h4zm5 8v-2H6v2zm0-5H6v2h4zm1-3v2h4V6zm-6 6H1v2h4zm6-1h4V9h-4zm0 3h4v-2h-4zm4-12H1v3h14z",32:"M2 5v21h27V5zm5 20H3v-4h4zm0-5H3v-4h4zm0-5H3v-4h4zm10 10H8v-4h9zm0-5H8v-4h9zm0-5H8v-4h9zm11 10H18v-4h10zm0-5H18v-4h10zm0-5H18v-4h10zm0-5H3V6h25z"},
tablet:{16:"M15 2H1a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM1 3.25A.25.25 0 0 1 1.25 3H2v4H1zM1.25 12a.25.25 0 0 1-.25-.25V8h1v4zM3 12V3h10v9zm12-.25a.25.25 0 0 1-.25.25H14V3h.75a.25.25 0 0 1 .25.25z",24:"M22.75 4H1.25A1.25 1.25 0 0 0 0 5.25v13.5A1.25 1.25 0 0 0 1.25 20h21.5A1.25 1.25 0 0 0 24 18.75V5.25A1.25 1.25 0 0 0 22.75 4zM1.25 19a.25.25 0 0 1-.25-.25V13h1v-2H1V5.25A.25.25 0 0 1 1.25 5H3v14zM4 5h17v14H4zm19 13.75a.25.25 0 0 1-.25.25H22V5h.75a.25.25 0 0 1 .25.25z"},text:{24:"M22 5H12V4h10zm0 3h-8v1h8zm0 5v-1h-6v1zM2 17h20v-1H2zm0 4h20v-1H2zm.234-8L7.042 2.049h.916L12.766 13h-1.093L9.917 9H5.083l-1.756 4zm3.288-5h3.956L7.5 3.494z"},
trash:{16:"M2 4l1 12h9l1-12zm9.08 11H3.92L3.087 5h8.826zM5 6.4a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.46.46 0 0 1 .5-.4.46.46 0 0 1 .5.4v7.2a.46.46 0 0 1-.5.4.46.46 0 0 1-.5-.4zm2 0a.512.512 0 0 1 1 0v7.2a.512.512 0 0 1-1 0zM11 2V0H4v2H1v1h13V2zm-1 0H5V1h5z"},upload:{32:"M32 15.704C32 19.308 29.13 22 26.562 22H23v-1h3.562C28.372 21 31 18.937 31 15.704a5.561 5.561 0 0 0-3.742-5.287l-.872-.297-.13-.911A8.153 8.153 0 0 0 18.462 2a7.848 7.848 0 0 0-6.859 4.294l-.556 1.045-1.146-.298a3.684 3.684 0 0 0-.923-.135 3.105 3.105 0 0 0-3.224 2.956l-.046.86-.765.394A5.37 5.37 0 0 0 2 15.897C2 18.521 4.157 21 6.437 21H10v1H6.437C3.592 22 1 19.092 1 15.897a6.369 6.369 0 0 1 3.486-5.67l.255-.131.016-.287a4.128 4.128 0 0 1 4.222-3.903 4.61 4.61 0 0 1 1.175.168l.382.099.185-.349A8.845 8.845 0 0 1 18.463 1a9.157 9.157 0 0 1 8.782 8.068l.044.304.29.099A6.559 6.559 0 0 1 32 15.704zM10.96 18.3l.708.707L16 14.674V29h1V14.674l4.332 4.332.707-.707-5.539-5.54z"},
"upload-to":{16:"M12 2v1H3V2zM4.708 7.618l.707.707L7 6.74V15h1V6.705l1.62 1.62.706-.707-2.808-2.81z",24:"M11 20V8.707l-2.646 2.647-.707-.707L11.5 6.793l3.854 3.854-.707.707L12 8.707V20zM5 4h13V3H5z",32:"M24 6H7V5h17zm-8.5 3.793l-4.854 4.854.707.707L15 11.707V26h1V11.707l3.646 3.646.707-.707z"},"urban-model":{32:"M13 29V7h2V3h1.455L18 5.568V14h-2v1h3v6h1v-7h-1V5.29L17.02 2H14v4h-2v15H9V11H4v3H2v16h12v-1zm-1 0H3V15h2v-3h3v9H6v1h6zm18-16v17h-4v-1h3V14h-4v7h-1v-8zm-5 9h-6v3h-4v5h10zm-1 7h-8v-3h4v-3h4zM8 24h2v1H8zm0 2h2v1H8z"},
user:{16:"M11 3a3 3 0 1 0-3 3 3 3 0 0 0 3-3zM8 5a2 2 0 1 1 2-2 2 2 0 0 1-2 2zm3 1H5a2 2 0 0 0-2 2v6a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1V8a2 2 0 0 0-2-2zm1 3v5h-1V9h-1v6H6V9H5v5H4V8a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"},"user-plus":{24:"M13 4a4 4 0 1 0-4 4 4 4 0 0 0 4-4zM9 7a3 3 0 1 1 3-3 3.003 3.003 0 0 1-3 3zm4 16.25a.75.75 0 0 1-.75.75h-6.5a.75.75 0 0 1-.75-.75V21H3.5A1.5 1.5 0 0 1 2 19.5v-9.25A2.25 2.25 0 0 1 4.25 8h9.5A2.25 2.25 0 0 1 16 10.25V17h-1v-6.75A1.251 1.251 0 0 0 13.75 9h-9.5A1.251 1.251 0 0 0 3 10.25v9.25a.501.501 0 0 0 .5.5H5v-8h1v11h6V12h1m10 7v.999h-4V24h-1v-4.001h-4V19h4v-4h1v4z",
32:"M13.065 10a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm.002-9a4 4 0 1 1-4.002 4 4 4 0 0 1 4.002-4zM5 14v12a1 1 0 0 0 1 1h1V15h1v16h10V15h1v16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1v-3H6a2 2 0 0 1-2-2V14a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v10h-1V14a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2zm26 12v.999h-5V32h-1v-5.001h-5V26h5v-5h1v5z"},users:{16:"M6.5 7a3.49 3.49 0 0 1 .663.067A3.97 3.97 0 0 0 7.8 8.375 2.475 2.475 0 0 0 6.5 8h-3A2.503 2.503 0 0 0 1 10.5V12h4.068a4.642 4.642 0 0 0-.218 1H0v-2.5A3.504 3.504 0 0 1 3.5 7zm1.456-3.564a3.969 3.969 0 0 0-.857 1.702A2.996 2.996 0 1 1 8 3a2.964 2.964 0 0 1-.044.436zM7 3a2 2 0 1 0-2 2 2.002 2.002 0 0 0 2-2zm5.5 7a3.504 3.504 0 0 1 3.5 3.5V16H6v-2.5A3.504 3.504 0 0 1 9.5 10zm-3 1A2.503 2.503 0 0 0 7 13.5V15h8v-1.5a2.503 2.503 0 0 0-2.5-2.5zM8 6a3 3 0 1 1 3 3 3.003 3.003 0 0 1-3-3zm1 0a2 2 0 1 0 2-2 2.002 2.002 0 0 0-2 2z",
24:"M7.5 9A3.5 3.5 0 1 0 4 5.5 3.504 3.504 0 0 0 7.5 9zm0-6A2.5 2.5 0 1 1 5 5.5 2.503 2.503 0 0 1 7.5 3zm2.713 14a5.456 5.456 0 0 0-.188 1H2v-3.5A4.505 4.505 0 0 1 6.5 10h2a4.503 4.503 0 0 1 4.414 3.649 5.518 5.518 0 0 0-.936.632A3.495 3.495 0 0 0 8.5 11h-2A3.504 3.504 0 0 0 3 14.5V17zm6.287-4A3.5 3.5 0 1 0 13 9.5a3.504 3.504 0 0 0 3.5 3.5zm0-6A2.5 2.5 0 1 1 14 9.5 2.503 2.503 0 0 1 16.5 7zM22 18.5a4.505 4.505 0 0 0-4.5-4.5h-2a4.505 4.505 0 0 0-4.5 4.5V22h11zM21 21h-9v-2.5a3.504 3.504 0 0 1 3.5-3.5h2a3.504 3.504 0 0 1 3.5 3.5z",
32:"M10.5 11A4.5 4.5 0 1 0 6 6.5a4.505 4.505 0 0 0 4.5 4.5zm0-8A3.5 3.5 0 1 1 7 6.5 3.504 3.504 0 0 1 10.5 3zm1.166 19a6.98 6.98 0 0 0-.14 1H2v-5.5A5.506 5.506 0 0 1 7.5 12h6a5.464 5.464 0 0 1 2.65.683 5.985 5.985 0 0 0-.138 1.085A4.474 4.474 0 0 0 13.5 13h-6A4.505 4.505 0 0 0 3 17.5V22zm9.834-4a4.5 4.5 0 1 0-4.5-4.5 4.505 4.505 0 0 0 4.5 4.5zm0-8a3.5 3.5 0 1 1-3.5 3.5 3.504 3.504 0 0 1 3.5-3.5zm3 9h-6a5.506 5.506 0 0 0-5.5 5.5V30h17v-5.5a5.506 5.506 0 0 0-5.5-5.5zM29 29H14v-4.5a4.505 4.505 0 0 1 4.5-4.5h6a4.505 4.505 0 0 1 4.5 4.5z"},
web:{24:"M11.5 0A11.5 11.5 0 1 0 23 11.5 11.513 11.513 0 0 0 11.5 0zM1.025 12h3.989a18.969 18.969 0 0 0 .753 5H2.573a10.415 10.415 0 0 1-1.548-5zM12 5V1.05c1.51.274 2.862 1.77 3.779 3.95zm4.15 1a17.518 17.518 0 0 1 .836 5H12V6zM11 1.05V5H7.221C8.138 2.82 9.491 1.324 11 1.05zM11 6v5H6.014a17.518 17.518 0 0 1 .836-5zm-5.986 5H1.025a10.415 10.415 0 0 1 1.548-5h3.194a18.969 18.969 0 0 0-.753 5zm1 1H11v5H6.85a17.518 17.518 0 0 1-.836-5zM11 18v3.95c-1.51-.274-2.862-1.77-3.779-3.95zm1 3.95V18h3.779c-.917 2.18-2.27 3.676-3.779 3.95zM12 17v-5.01h5a17.58 17.58 0 0 1-.85 5.01zm5.986-5.01h3.989A10.453 10.453 0 0 1 20.427 17h-3.194a19.046 19.046 0 0 0 .753-5.01zm0-.99a18.969 18.969 0 0 0-.753-5h3.194a10.415 10.415 0 0 1 1.548 5zm1.744-6h-2.837a9.988 9.988 0 0 0-2.119-3.47A10.528 10.528 0 0 1 19.73 5zM8.226 1.53A9.988 9.988 0 0 0 6.107 5H3.27a10.528 10.528 0 0 1 4.956-3.47zM3.27 18h2.837a9.988 9.988 0 0 0 2.119 3.47A10.528 10.528 0 0 1 3.27 18zm11.504 3.47A9.988 9.988 0 0 0 16.893 18h2.837a10.528 10.528 0 0 1-4.956 3.47z",
32:"M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zM2.025 16h4.99a22.884 22.884 0 0 0 .898 6H3.669a13.424 13.424 0 0 1-1.644-6zM16 8V2.046C18.387 2.33 20.472 4.62 21.732 8zm6.07 1a22.167 22.167 0 0 1 .916 6H16V9zM15 2.046V8H9.268c1.26-3.38 3.345-5.669 5.732-5.954zM15 9v6H8.014a22.167 22.167 0 0 1 .916-6zm-7.985 6h-4.99A13.424 13.424 0 0 1 3.67 9h4.244a22.884 22.884 0 0 0-.898 6zm1 1H15v6H8.93a22.167 22.167 0 0 1-.916-6zM15 23v5.954C12.613 28.67 10.528 26.38 9.268 23zm1 5.954V23h5.732c-1.26 3.38-3.345 5.669-5.732 5.954zM16 22v-6h6.986a22.167 22.167 0 0 1-.916 6zm7.985-6h4.99a13.424 13.424 0 0 1-1.644 6h-4.244a22.884 22.884 0 0 0 .898-6zm0-1a22.884 22.884 0 0 0-.898-6h4.244a13.424 13.424 0 0 1 1.644 6zm2.739-7H22.76a12.808 12.808 0 0 0-3.455-5.447A13.52 13.52 0 0 1 26.724 8zm-15.03-5.447A12.808 12.808 0 0 0 8.239 8H4.276a13.52 13.52 0 0 1 7.418-5.447zM4.276 23H8.24a12.808 12.808 0 0 0 3.455 5.447A13.519 13.519 0 0 1 4.276 23zm15.03 5.447A12.808 12.808 0 0 0 22.761 23h3.963a13.519 13.519 0 0 1-7.418 5.447z"},
wrench:{32:"M23.875 8.884l-.938-2.327 4.145-3.224a.67.67 0 0 0 .264-.677l-.051-.215-.09-.11a.695.695 0 0 0-.441-.251 8.172 8.172 0 0 0-5.858 1.395 5.627 5.627 0 0 0-1.68 6.3l-.008.035a4.82 4.82 0 0 1-.769 1.144L3.124 24.33a3.957 3.957 0 0 0 .002 5.522A3.793 3.793 0 0 0 5.851 31a3.81 3.81 0 0 0 2.75-1.175L21.81 14.193a1.86 1.86 0 0 1 .771-.485 2.076 2.076 0 0 1 .366.022 5.244 5.244 0 0 0 5.196-.662 8.46 8.46 0 0 0 2.85-5.36.692.692 0 0 0-.126-.506l-.123-.138-.09-.054a.698.698 0 0 0-.786.056l-4.074 3.232zm5.992-.55a7.24 7.24 0 0 1-2.339 3.945 4.263 4.263 0 0 1-4.266.5l-.118-.031a3.31 3.31 0 0 0-.617-.038 2.616 2.616 0 0 0-1.435.79L7.862 29.152a2.803 2.803 0 0 1-2.01.848H5.85a2.802 2.802 0 0 1-2.012-.849 2.946 2.946 0 0 1-.03-4.093l15.354-13.409a5.294 5.294 0 0 0 1.018-1.57 1.989 1.989 0 0 0 .054-.288l.015-.118-.04-.112a4.648 4.648 0 0 1 1.31-5.297A6.938 6.938 0 0 1 25.627 3c.083 0 .166.001.25.004L22.321 5.77a.968.968 0 0 0-.306 1.105l.937 2.393a.904.904 0 0 0 .107.19.856.856 0 0 0 .195.193l1.938 1.446a.937.937 0 0 0 1.147-.018zM6.501 25H5.5a1.499 1.499 0 0 0-1.499 1.495L4 27.505a1.502 1.502 0 0 0 1.5 1.497l1.009-.001a1.503 1.503 0 0 0 1.495-1.504l-.003-1A1.5 1.5 0 0 0 6.501 25zm.005 3l-1.006.002a.5.5 0 0 1-.5-.5l.001-1.004A.5.5 0 0 1 5.5 26h1.001a.5.5 0 0 1 .5.5l.003.999a.502.502 0 0 1-.498.501z"},
x:{16:"M8.718 8l5.303 5.303-.707.707L8.01 8.707 2.707 14.01 2 13.303 7.303 8 2 2.697l.707-.707L8.01 7.293l5.304-5.303.707.707z",24:"M18.01 6.697L12.707 12l5.303 5.303-.707.707L12 12.707 6.697 18.01l-.707-.707L11.293 12 5.99 6.697l.707-.707L12 11.293l5.303-5.303z",32:"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z"},"x-circle":{32:"M25.753 5.247a14.5 14.5 0 1 0 0 20.506 14.5 14.5 0 0 0 0-20.506zm-.636 19.87a13.6 13.6 0 1 1 0-19.234 13.6 13.6 0 0 1 0 19.234zM21.864 9.843L16.207 15.5l5.657 5.657-.707.707-5.657-5.657-5.657 5.657-.707-.707 5.657-5.657-5.657-5.657.707-.707 5.657 5.657 5.657-5.657z",
24:"M17.45 8.257L13.207 12.5l4.243 4.243-.707.707-4.243-4.243-4.243 4.243-.707-.707 4.243-4.243L7.55 8.257l.707-.707 4.243 4.243 4.243-4.243zM22.8 12.5A10.3 10.3 0 1 1 12.5 2.2a10.297 10.297 0 0 1 10.3 10.3zm-1 0a9.3 9.3 0 1 0-9.3 9.3 9.31 9.31 0 0 0 9.3-9.3z"},"x-circle-f":{16:"M8 .15A7.85 7.85 0 1 0 15.85 8 7.85 7.85 0 0 0 8 .15zm4.95 11.386l-1.414 1.414L8 9.414 4.464 12.95 3.05 11.536 6.586 8 3.05 4.464 4.464 3.05 8 6.586l3.536-3.536 1.414 1.414L9.414 8z",24:"M19.632 3.368a11.5 11.5 0 1 0 0 16.264 11.5 11.5 0 0 0 0-16.264zM18.57 16.45l-2.12 2.12-4.95-4.95-4.95 4.95-2.12-2.12 4.95-4.95-4.95-4.95 2.12-2.12 4.95 4.95 4.95-4.95 2.12 2.12-4.95 4.95z",
32:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2zm9.192 20.364l-2.828 2.828L16 18.828l-6.364 6.364-2.828-2.828L13.172 16 6.808 9.636l2.828-2.828L16 13.172l6.364-6.364 2.828 2.828L18.828 16z"}},f={inline:{},"inline-end":{},getIconWithTitle:function(n,h,k,c){n=e[n];return g({paths:n[h],size:h,rtl:n.rtl,title:k,titleId:c})}};Object.keys(e).forEach(function(n){Object.keys(e[n]).filter(function(h){return"rtl"!==h}).forEach(function(h){var k,c,l,r=e[n],m=r.rtl;f[n]=null!==(k=f[n])&&void 0!==k?k:{};f.inline[n]=
null!==(c=f.inline[n])&&void 0!==c?c:{};f["inline-end"][n]=null!==(l=f["inline-end"][n])&&void 0!==l?l:{};f[n][h]=g({paths:r[h],size:h,rtl:m});f.inline[n][h]=g({paths:r[h],size:h,inline:!0,rtl:m});f["inline-end"][n][h]=g({paths:r[h],size:h,inline:!0,direction:"right",rtl:m})})});return f})},"arcgisonline/pages/utils/arrays":function(){define(["require","exports"],function(D,A){return function(){function a(){}a.includes=function(b,g){return-1<(null===b||void 0===b?void 0:b.indexOf(g))};a.find=function(b,
g){if(null===b||void 0===b?0:b.length)for(var d=void 0,e=0;e<b.length;e++)if(d=b[e],g(d))return d};a.findIndex=function(b,g){if(null===b||void 0===b?0:b.length)for(var d=0;d<b.length;d++)if(g(b[d]))return d;return-1};a.toArray=function(b){return Object.keys(b).map(function(g){return b[g]})};a.includesSome=function(b,g){return b&&(null===g||void 0===g?void 0:g.some(function(d){return-1<b.indexOf(d)}))};a.includesAll=function(b,g){return b&&(null===g||void 0===g?void 0:g.every(function(d){return-1<
b.indexOf(d)}))};a.filterOut=function(b,g){var d;return null!==(d=g&&(null===b||void 0===b?void 0:b.filter(function(e){return-1===g.indexOf(e)})))&&void 0!==d?d:[]};a.concatUnique=function(b,g){var d=[].concat(null!==b&&void 0!==b?b:[]);g&&g.forEach(function(e){e&&-1===d.indexOf(e)&&d.push(e)});return d};a.from=function(b){if(Array.from)return Array.from(b);for(var g=[],d=0;d<b.length;d++)g.push(b[d]);return g};a.batch=function(b,g){void 0===g&&(g=100);return(null!==b&&void 0!==b?b:[]).reduce(function(d,
e,f){0===f%g&&d.push(b.slice(f,f+g));return d},[])};return a}()})},"arcgisonline/pages/utils/strings":function(){define(["require","exports"],function(D,A){return function(){function a(){}a.isString=function(b){return(null===b||void 0===b?void 0:b.constructor)===String};a.startsWith=function(b,g){return g&&0===(null===b||void 0===b?void 0:b.indexOf(g))};a.endsWith=function(b,g){if(b&&g){var d=b.lastIndexOf(g);return-1<d&&b.length>=g.length&&d===b.length-g.length}return!1};a.includes=function(b,g){return g&&
-1<(null===b||void 0===b?void 0:b.indexOf(g))};a.isSet=function(b){return!!(0<(null===b||void 0===b?void 0:b.length))};a.areEqual=function(b,g){var d=this.isSet(b),e=this.isSet(g);return!d&&!e||d&&e&&b.trim()===g.trim()};a.replaceAll=function(b,g,d){return b.replace(new RegExp(this.escapeRegExp(g),"g"),d)};a.escapeRegExp=function(b){return b.replace(/[.*+?^${}()|[\]\\]/g,"\\$\x26")};a.escapeQuestionMarks=function(b){return b.replace(/[?\\]/g,"\\$\x26")};a.stringToArray=function(b,g,d){b=b instanceof
Array?b:b.split(g);return d?b.map(function(e){return e.trim()}):b};a.isValidHex=function(b){return/[0-9A-Fa-f]{6}/g.test(b)};a.stringToHex=function(b){for(var g=0,d=0;d<b.length;d++)g=b.charCodeAt(d)+((g<<5)-g);b="#";for(d=0;3>d;d++)b+=("00"+(g>>8*d&255).toString(16)).substr(-2);return b};a.hexToRgb=function(b){b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(g,d,e,f){return d+d+e+e+f+f});return(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?{r:parseInt(b[1],16),g:parseInt(b[2],16),
b:parseInt(b[3],16)}:null};a.htmlDecode=function(b){var g=document.createElement("textarea");g.innerHTML=b;return g.value};a.encodeWhitespace=function(b){return b?b.replace(/\s/g,"%20"):""};a.encodeAngleBrackets=function(b){var g;return null!==(g=null===b||void 0===b?void 0:b.replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"))&&void 0!==g?g:""};a.decodeAngleBrackets=function(b){var g;return null!==(g=null===b||void 0===b?void 0:b.replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e"))&&void 0!==g?g:""};a.shouldStripHTML=
function(b){var g;if(!b)return!1;b=null!==(g=null===b||void 0===b?void 0:b.split("\x3c"))&&void 0!==g?g:[];return 1<b.length&&b.some(function(d){return-1<d.search(/^[A-Za-z\/]+.*[>]+.*$/m)})};a.stripHTML=function(b){if(!b)return"";var g=document.createElement("div");g.innerHTML=b;return g.textContent};a.addHyperlinks=function(b){return b.replace(/(https?:\/\/[^\s]+)/g,function(g){return'\x3ca href\x3d"'+g+'" target\x3d"_blank"\x3e'+g+"\x3c/a\x3e"})};a.escapeNewlines=function(b){return null===b||void 0===
b?void 0:b.replace(/(?:\r)/g,"\x26#10;").replace(/(?:\n)/g,"\x26#13;")};a.restoreNewlines=function(b){return null===b||void 0===b?void 0:b.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")};a.insertHTMLLineBreaks=function(b){return null===b||void 0===b?void 0:b.replace(/(?:"&#10;&#13;|&#10;|&#13;|\r\n|\r|\n")/g,"\x3cbr\x3e")};a.containsHTTPProtocol=function(b){var g;return-1<(null!==(g=null===b||void 0===b?void 0:b.toLowerCase())&&void 0!==g?g:"").indexOf("http://")};return a}()})},"arcgisonline/pages/utils/dom":function(){define(["require",
"exports","tslib","./strings","dojo/dom-style"],function(D,A,a,b,g){b=a.__importDefault(b);g=a.__importDefault(g);return function(){function d(){}d.createElement=function(e,f,n){n||(n=document.createElement("div"),document.body.appendChild(n));var h=document.createElement(e);Object.keys(f||{}).forEach(function(k){h[k]=f[k]});n.appendChild(h);return h};d.addStylesheet=function(e){var f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=e;document.head.appendChild(f)};d.isHidden=
function(e){var f=["none","none !important","none!important"],n=["hidden","hidden !important","hidden!important"],h=""+g["default"].get(e,"visibility"),k=""+g["default"].get(e,"display");return e&&(-1<f.indexOf(k)||-1<n.indexOf(h))};d.hideNode=function(e){null===e||void 0===e?void 0:e.classList.add("hide")};d.hideNodes=function(e){if(e)if(e.forEach)e.forEach(this.hideNode);else for(var f=0;f<e.length;f++)this.hideNode(e[f])};d.showNode=function(e){null===e||void 0===e?void 0:e.classList.remove("hide")};
d.showNodes=function(e){if(e)if(e.forEach)e.forEach(this.showNode);else for(var f=0;f<e.length;f++)this.showNode(e[f])};d.showHide=function(e,f){null===e||void 0===e?void 0:e.classList[f?"remove":"add"]("hide")};d.showHideAll=function(e,f){var n=this;null===e||void 0===e?void 0:e.forEach(function(h){return n.showHide(h,f)})};d.addRemoveClass=function(e,f,n){null===e||void 0===e?void 0:e.classList[n?"add":"remove"](f)};d.addRemoveClassAll=function(e,f,n){var h=this;null===e||void 0===e?void 0:e.forEach(function(k){return h.addRemoveClass(k,
f,n)})};d.setVisibility=function(e,f){null===e||void 0===e?void 0:e.classList[f?"remove":"add"]("visibility-hidden")};d.toggleHide=function(e){null===e||void 0===e?void 0:e.classList.toggle("hide")};d.toggleHideAll=function(e){null===e||void 0===e?void 0:e.forEach(function(f){f.classList.toggle("hide")})};d.activateNode=function(e){null===e||void 0===e?void 0:e.classList.add("is-active")};d.deactivateNode=function(e){null===e||void 0===e?void 0:e.classList.remove("is-active")};d.canBeDisabled=function(e){return e instanceof
HTMLInputElement||e instanceof HTMLButtonElement||e instanceof HTMLFieldSetElement||e instanceof HTMLOptGroupElement||e instanceof HTMLOptionElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement};d.isDisabled=function(e){var f;return null!==(f=null===e||void 0===e?void 0:e.disabled)&&void 0!==f?f:!1};d.disableNode=function(e,f){e&&(e.disabled=f)};d.disableNodes=function(e,f){var n=this;null===e||void 0===e?void 0:e.forEach(function(h){n.disableNode(h,f)})};d.isNodeVisible=function(e){return 0!==
(null===e||void 0===e?void 0:e.offsetHeight)};d.isChecked=function(e){var f;return null!==(f=null===e||void 0===e?void 0:e.checked)&&void 0!==f?f:!1};d.checkNode=function(e,f){e&&(e.checked=f)};d.selectOption=function(e,f){if(e)for(var n=0;n<e.length;n++){var h=e[n];if(b["default"].areEqual(h.value,f)){h.selected=!0;break}}};d.getSelectedOption=function(e){if(e)for(var f=0;f<e.length;f++){var n=e[f];if(n.selected)return n}return null};d.addClasses=function(e,f){e&&(null===f||void 0===f?0:f.length)&&
f.forEach(function(n){e.classList.add(n)})};d.removeClasses=function(e,f){e&&(null===f||void 0===f?0:f.length)&&f.forEach(function(n){e.classList.remove(n)})};d.setModifierClass=function(e,f,n){var h,k=null===(h=e.className.match(new RegExp("(^| )"+f+"\\S+","g")))||void 0===h?void 0:h[0].replace(/ +/g,"");k&&e.classList.remove(k);e.classList.add(""+f+n)};d.appendChildren=function(e,f){var n=document.createDocumentFragment();null===e||void 0===e?void 0:e.forEach(function(h){n.appendChild(h)});null===
f||void 0===f?void 0:f.appendChild(n)};d.forEachNode=function(e,f,n){for(var h=0;h<e.length;h++)null===f||void 0===f?void 0:f.call(n,e[h],h)};d.nodeListToArray=function(e){return Array.prototype.slice.call(e)};d.querySelectorAllAsArray=function(e,f){return this.nodeListToArray(f.querySelectorAll(e))};return d}()})},"arcgisonline/sharing/util":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/dialog/GeneralDlg,arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg,dojo/request/xhr,arcgisonline/sharing/dijit/dialog/ConfirmDialog,arcgisonline/pages/utils/mapViewer,arcgisonline/pages/utils/storage,esri/IdentityManager,esri/libs/sanitizer/Sanitizer,dojo/sniff,dojo/has,dojo/json,dojo/cookie"],
function(D,A,a){D.provide("arcgisonline.sharing.util");D.require("arcgisonline.sharing.dijit.dialog.GeneralDlg");D.require("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");D.require("dojo.request.xhr");D.require("arcgisonline.sharing.dijit.dialog.ConfirmDialog");D.require("arcgisonline.pages.utils.mapViewer");D.require("arcgisonline.pages.utils.storage");D.require("esri.IdentityManager");D.require("esri.libs.sanitizer.Sanitizer");D.require("dojo.sniff");D.require("dojo.has");D.require("dojo.json");
D.require("dojo.cookie");arcgisonline.sharing.util={i18n:D.mixin({},D.i18n.getLocalization("arcgisonline","arcgisonline")),sanitizer:new esri.libs.sanitizer.Sanitizer,storageUtil:arcgisonline.pages.utils.storage,mapViewerUtil:arcgisonline.pages.utils.mapViewer,getSocialNetworkBadges:function(b,g){var d={},e=D.create,f=arcgisonline.sharing.util.socialNetworkTitle(b.title),n=unescape(window.location.href);if(!1===b.isOrganization||!0===b.isOrganization)n=arcgisonline.sharing.util.urlToObject(window.location.href).path+
"?id\x3d"+b.id;esriGeowConfig.self&&esriGeowConfig.self.customBaseUrl&&!arcgisonline.sharing.util.isPortal()&&-1<n.indexOf(esriGeowConfig.self.customBaseUrl)&&(n=n.replace(location.host,esriGeowConfig.self.portalHostname));var h=e("span",{"class":"esriItemLinks"}),k=encodeURI("socialnetwork.html?t\x3d"+f+"\x26n\x3dfb\x26u\x3d"+n),c=esri.i18nBundle.itemLinks.shareFacebook,l=e("a",{target:"_blank",onclick:D.partial(this._checkShare,b,"Facebook"),href:k,alt:c,title:c},h);e("span",{"class":"facebookBadge dijitInline"},
l);k=e("a",{target:"_blank",onclick:D.partial(this._checkShare,b,"Facebook"),href:k,alt:c,title:c},h);e("span",{innerHTML:esri.i18nBundle.itemLinks.facebook},k);d.facebook=h;h=e("span",{"class":"esriItemLinks"});k=encodeURI("socialnetwork.html?t\x3d"+f+"\x26n\x3dtw\x26u\x3d"+n);c=esri.i18nBundle.itemLinks.shareTwitter;l=e("a",{target:"_blank",onclick:D.partial(this._checkShare,b,"Twitter"),href:k,alt:c,title:c},h);e("span",{"class":"twitterBadge dijitInline"},l);k=e("a",{target:"_blank",onclick:D.partial(this._checkShare,
b,"Twitter"),href:k,alt:c,title:c},h);e("span",{innerHTML:esri.i18nBundle.itemLinks.twitter},k);d.twitter=h;g(d)},socialNetworkTitle:function(b){100<b.length&&(b=b.substring(0,97)+"...");return encodeURIComponent(b.replace(/ /g,"+"))},shortenUrl:function(b,g,d){var e=esriGeowConfig.bitlyUrl,f,n=new D.Deferred;this.request({url:e,content:{longUrl:b,format:"json"}}).then(function(h){(f=h&&h.data&&h.data.url||null)?g?g(f):n.resolve(f):d?d(h,args):n.reject(h,args)},function(h){d?d({},{}):n.reject(h)});
return n},_checkShare:function(b,g,d){g=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance();d=b&&esri.isDefined(b.isInvitationOnly);b.access&&"public"!==b.access&&g.show({title:esri.i18nBundle.itemLinks[d?"shareGroup":"shareItem"],message:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks[d?"shareGroupMsg":"shareItemMsg"])})},checkSession:function(){esriGeowConfig.userInfo=esriGeowConfig.userInfo||""},isLoggedIn:function(){return null==
this.getUser()?!1:!0},isSilverlightInstalled:function(){if(esriGeowConfig.isSilverlightInstalled)return esriGeowConfig.isSilverlightInstalled;esriGeowConfig.isSilverlightInstalled=!1;if(D.isIE)try{new ActiveXObject("AgControl.AgControl"),esriGeowConfig.isSilverlightInstalled=!0}catch(b){}else navigator.plugins["Silverlight Plug-In"]&&(esriGeowConfig.isSilverlightInstalled=!0);return esriGeowConfig.isSilverlightInstalled},couldHaveArcGISDesktop:function(){return-1!=navigator.userAgent.indexOf("Windows")&&
-1==navigator.userAgent.indexOf("Windows Phone")?!0:!1},requireAuthentication:function(){if(!0===this.isLoggedIn())return!0;var b="";-1==esriGeowConfig.signin.indexOf("http")&&(b=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(b=arcgisonline.sharing.util.getSecureUrl(b)));b+=esriGeowConfig.signin;window.location!==b&&(b+="?returnUrl\x3d"+escape(window.location));window.location=b+"\x26error\x3d403";return!1},htmlHasText:function(b){if(b&&0<b.length){b=D.trim(b);for(var g=!1,d=0;d<b.length;d++){var e=
b.charAt(d);if("\x3c"==e)g=!0;else if("\x3e"==e)g=!1;else if(!g&&""!==e)return!0}}return!1},endsWith:function(b,g){return null==b||null==g?!1:b.toLowerCase().lastIndexOf(g.toLowerCase())==b.length-g.length},toFullDateString:function(b){b=new Date(parseFloat(b));return D.date.locale.format(b,{selector:"date",formatLength:"long"})},toDateTimeString:function(b){b=new Date(parseFloat(b));return D.date.locale.format(b,{formatLength:"medium"})},capitalize:function(b){return b.charAt(0).toUpperCase()+b.substr(1).toLowerCase()},
getItemDetailsLinkInfo:function(b){var g=null,d=null,e=null;esri.isDefined(b.isInvitationOnly)?(g=esriGeowConfig.baseUrl+"group.html?owner\x3d"+b.owner+"\x26title\x3d"+encodeURIComponent(b.title),d=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewGroupDetails):(g=esriGeowConfig.baseUrl+"item.html?id\x3d"+b.id,d=esri.i18nBundle.itemLinks.details,e=esri.i18nBundle.itemLinks.viewDetails);return null!==g&&null!==d?{link:g,label:d,tip:e}:null},_isOperationsViewSupportedBrowser:function(b){var g=
navigator.userAgent.toLowerCase(),d=/Chrome\/[.0-9]* (?!Mobile)/i,e=/Chrome\/[.0-9]* Mobile/i;e=D.has("iphone")||D.has("ipod")||D.has("android")&&e.test(g)||-1<g.indexOf("android")&&-1<g.indexOf("mobile")||-1<g.indexOf("windows phone")||D.has("bb");b&&(e=e||g.match(/ipad/i)||D.has("android")&&d.test(g));return e?!1:void 0!==D.has("chrome")?(b=D.has("chrome"),!isNaN(b)&&19<=b):void 0!==D.has("ff")?4<=D.has("ff"):g.match(/fxios/i)?(b=parseFloat(g.split("fxios/")[1]),!isNaN(b)&&1<=b):void 0!==D.has("ie")?
9<=D.has("ie"):void 0!==D.has("edge")?1<=D.has("edge"):void 0!==D.has("trident")?5<=D.has("trident"):void 0!==D.has("safari")?(b=parseFloat(g.split("version/")[1]),g=parseFloat(g.split("crios/")[1]),isNaN(b)&&isNaN(g)||!isNaN(b)&&5.1>b||!isNaN(g)&&31>g?!1:!0):!1},_isPremiumService:function(b){return b.owner&&-1<b.owner.toLowerCase().indexOf("esri")&&(-1<D.indexOf(b.typeKeywords,"Requires Subscription")||-1<D.indexOf(b.typeKeywords,"Requires Credits"))},getGalleryMainLinkInfo:function(b){var g=b.type?
b.type:"",d="",e="",f="",n=null;e=this.getUser();d=!1;d=null;esriGeowConfig.portalHostname&&(d=esriGeowConfig.portalHostname);d&&(f=d.split("."),1<f.length&&(d=f[f.length-2]+"."+f[f.length-1]));if("Web Map"==g)d=!e&&this._isPremiumService(b),e='JavaScript:arcgisonline.map.mapUtil.openMap("'+b.id+'",'+d+")",f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),d=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===g)d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+b.id,e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPage",d),f=esri.i18nBundle.itemLinks.viewApp,d=esri.i18nBundle.itemLinks.open;else if("Web Scene"===g&&esriGeowConfig.sceneViewerEnabled)d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+b.id,e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPage",d,!0),f=esri.i18nBundle.itemLinks.openSceneViewer,
d=esri.i18nBundle.itemLinks.open;else if("Scene Service"===g&&esriGeowConfig.sceneViewerEnabled)d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+b.id,e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,d,!0),f=esri.i18nBundle.itemLinks.addToSceneViewer,d=esri.i18nBundle.itemLinks.open;else if("Operation View"===g){d=window.location;g=arcgisonline.sharing.util.isPortal();e=d.protocol+
"//"+(g?esriGeowConfig.self.portalHostname:d.host);d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+b.id;f=-1<D.indexOf(b.typeKeywords,"TabletLayout");D.indexOf(b.typeKeywords,"DesktopLayout");var h=-1<D.indexOf(b.typeKeywords,"V2");this.couldHaveArcGISDesktop()&&!h?n=D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,e+(g?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+b.id):
!h&&f&&this._isOperationsViewSupportedBrowser()&&(n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,d,!1));e="JavaScript:void(0)";f=esri.i18nBundle.itemLinks.openOperationViewDesktop;d=esri.i18nBundle.itemLinks.open}else"Map Service"==g||"Feature Service"==g||"Image Service"==g||"KML"==g||"Feature Collection"==g||"Stream Service"==g||"Vector Tile Service"===g?(f=b&&b.extraUrlParams?!0:!1,d=!e&&this._isPremiumService(b),e='JavaScript:arcgisonline.map.mapUtil.addToMap("'+b.id+'",'+d+","+f+
")",d=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),esriGeowConfig.sceneViewerEnabled&&"Image Service"===g&&-1<D.indexOf(b.typeKeywords,"Elevation 3D Layer")&&(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+b.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,d=esri.i18nBundle.itemLinks.open)):"WMS"==g||"WFS"===g||"WMTS"===
g?(e=b.noWebMercator?'JavaScript:arcgisonline.map.mapUtil.openOnGCSMap("'+b.id+'")':'JavaScript:arcgisonline.map.mapUtil.addToMap("'+b.id+'")',d=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==g?(e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url+"?f\x3dlyr\x26v\x3d9.3"),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):
this.couldHaveArcGISDesktop()&&("Map Package"==g||"Basemap Package"===g||"Mobile Map Package"==g||"Mobile Basemap Package"===g||"Layer Package"==g||"Pro Map"==g||"Layout"==g||-1<D.indexOf(b.typeKeywords,"lyrx"))?b&&b.name.indexOf(".mmpk")&&b.name.indexOf(".bpk")&&-1===b.name.indexOf(".bpkx")&&-1===b.name.indexOf(".lpkx")&&-1===b.name.indexOf(".mpkx")&&-1===b.name.indexOf(".lyrx")&&-1===b.name.indexOf(".mapx")&&-1===b.name.indexOf(".pagx")?(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,
this.getItemPkgPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=g&&"Geoprocessing Service"!=g&&"Locator Package"!=g&&"Tile Package"!=g&&"Vector Tile Package"!=g&&"Scene Package"!==g?!this.couldHaveArcGISDesktop()||"Map Document"!=g&&"Published Map"!=
g&&"Globe Document"!=g&&"Scene Document"!=g&&"Layer"!=g?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=g&&"ArcGIS Pro Add In"!==g?!this.isSilverlightInstalled()||"Explorer Map"!=g&&"Explorer Layer"!=g&&"Explorer Add In"!=g?"File Geodatabase"===g||"CSV Collection"===g||"KML Collection"===g||"Rule Package"===g||"GeoJson"===g||"Shapefile"===g||"CSV"===g||"Map Template"===g||"Code Sample"===g||"Geoprocessing Sample"===g||"Service Definition"===g||"Workflow Manager Package"===g||"Windows Viewer Add-in"===
g||"ArcPad Package"===g||"Operations Dashboard Addin"===g||"CAD Drawing"===g||"Microsoft Word"===g||"Raster function template"===g||"Microsoft PowerPoint"===g||"Microsoft Powerpoint"===g||"Microsoft Excel"===g||"iWork Pages"===g||"iWork Keynote"===g||"iWork Numbers"===g||"Image"===g||"Visio Document"===g||"PDF"===g||"Desktop Application"===g||"Task File"===g||"Project Package"===g||"ArcGIS Pro Configuration"===g||"Project Template"===g||"Desktop Style"===g||"Native Application Installer"===g||"360 VR Experience"==
g?(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"!=g&&"Application"!=g&&"Native Application"!==g&&"Native Application Template"!==g&&"Hub Initiative"!==g&&"Hub Page"!==g&&"Hub Site Application"!==g||-1!==D.indexOf(b.typeKeywords,"Web AppBuilder for ArcGIS")?"Desktop Application Template"==g?-1<D.indexOf(b.typeKeywords,"desktopApplicationTemplateUrl")&&b.url&&0<
b.url.length?(e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url),f=esri.i18nBundle.itemLinks.viewApp,d=esri.i18nBundle.itemLinks.open):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Mobile Application"==g?b.url&&0<b.url.length?(esriGeowConfig.urlKey&&(-1<b.url.indexOf(esriGeowConfig.urlKey)||d&&-1<b.url.indexOf(d))&&(b.originalUrl=b.originalUrl||
D.clone(b.url),b.url=esriGeowConfig.allSSL?b.url.replace("http:","https:"):b.url),e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.getApp):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+b.id,d=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==g?(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,
f=esri.i18nBundle.itemLinks.download):"Document Link"===g?(e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url),d=f=esri.i18nBundle.itemLinks.open):"Form"===g&&e&&e.accountId?(e="arcgis-survey123://?itemId\x3d"+b.id+"\x26username\x3d"+e.username,f=esri.i18nBundle.itemLinks.openInSurvey123,d=esri.i18nBundle.itemLinks.open):"Workforce Project"===g?(e=(g=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
e=window.location.protocol+"//"+e+((g?"/apps/workforce/#":"")+("/projects/"+b.id+"/dispatch/assignments")),f=esri.i18nBundle.itemLinks.openWorkforce,d=esri.i18nBundle.itemLinks.open):"Insights Workbook"===g||"Insights Page"===g||"Insights Model"===g?(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",e="Insights Model"===g?e+("?model\x3d"+b.id):"Insights Page"===g?e+("view/"+b.id):e+b.id,f=esri.i18nBundle.itemLinks.openInsights,d=
esri.i18nBundle.itemLinks.open):"Dashboard"===g?(n=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+b.id,e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,n),f=esri.i18nBundle.itemLinks.dashboardView,d=esri.i18nBundle.itemLinks.open):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+b.id,d=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):(g=arcgisonline.sharing.util.isHostedTemplateItem(b.url),
b.url&&0<b.url.length?(esriGeowConfig.urlKey&&(-1<b.url.indexOf(esriGeowConfig.urlKey)||d&&-1<b.url.indexOf(d))&&-1===b.url.indexOf(".opendata")&&(b.originalUrl=b.originalUrl||D.clone(b.url),b.url=esriGeowConfig.allSSL?b.url.replace("http:","https:"):b.url),b.access&&"public"!==b.access&&g&&!arcgisonline.sharing.util.isPortal()&&(n=arcgisonline.sharing.util.parseUrl(b.url),b.url=b.url.replace(n.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&b.url&&0===b.url.indexOf("/")&&(n=
esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===b.url.indexOf(n)&&(b.url=n+b.url)),e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url),f=esri.i18nBundle.itemLinks.viewApp,d=esri.i18nBundle.itemLinks.open):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+b.id,d=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails)):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),
d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openExplorer):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemPkgPath(b)),d=esri.i18nBundle.itemLinks.open,
f="Task File"!==g?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:d,href:e,target:"",tip:f,onclick:n}},getMapViewerLink:function(b){return b===this.mapViewerUtil.MapViewerType.Classic?esriGeowConfig.baseUrl+"webmap/viewer.html":esriGeowConfig.newMapViewerUrl},getHomePageGalleryLinkInfo:function(b){var g=b.type?b.type:"",d="",e="",f="",n=null;d=this.getUser();e=!1;f=this.mapViewerUtil.determineMapViewerSetting();e=null;esriGeowConfig.portalHostname&&(e=
esriGeowConfig.portalHostname);if(e){var h=e.split(".");1<h.length&&(e=h[h.length-2]+"."+h[h.length-1])}if("Web Map"==g)f=this.getMapViewerLink(f)+"?webmap\x3d"+b.id,h=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(f),e=(e=!d&&this._isPremiumService(b))?h:f,f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),d=esri.i18nBundle.itemLinks.open;else if("CityEngine Web Scene"===g)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+b.id,f=esri.i18nBundle.itemLinks.viewApp,d=esri.i18nBundle.itemLinks.open;else if("Web Scene"===g&&esriGeowConfig.sceneViewerEnabled)e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+b.id,f=esri.i18nBundle.itemLinks.openSceneViewer,d=esri.i18nBundle.itemLinks.open;else if("Scene Service"===g&&esriGeowConfig.sceneViewerEnabled)e=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+b.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,d=esri.i18nBundle.itemLinks.open;else if("Operation View"===g){e=window.location;g=arcgisonline.sharing.util.isPortal();d=-1<D.indexOf(b.typeKeywords,"V2");e=e.protocol+"//"+(g?esriGeowConfig.self.portalHostname:e.host);f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+b.id;h=this.couldHaveArcGISDesktop();
if(d)return null;if(h)e=e+(g?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+b.id;else if(this._isOperationsViewSupportedBrowser())e=f;else return null;f=esri.i18nBundle.itemLinks.openOperationViewDesktop;d=esri.i18nBundle.itemLinks.open}else if("Map Service"==g||"Feature Service"==g||"Image Service"==g||"KML"==g||"Stream Service"==g||"Vector Tile Service"===g||"Feature Collection"==g){f=this.getMapViewerLink(f)+"?layers\x3d"+b.id;if("KML"==g||"Stream Service"==
g||"Feature Collection"==g)f=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+b.id;h=esriGeowConfig.baseUrl+"signin.html?returnUrl\x3d"+encodeURIComponent(f);e=(e=!d&&this._isPremiumService(b))?h:f;d=esri.i18nBundle.itemLinks.open;f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer);esriGeowConfig.sceneViewerEnabled&&"Image Service"===g&&-1<D.indexOf(b.typeKeywords,"Elevation 3D Layer")&&(e=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+b.id,f=esri.i18nBundle.itemLinks.addToSceneViewer,d=esri.i18nBundle.itemLinks.open)}else"WMS"==g||"WFS"===g||"WMTS"===g?(e=esriGeowConfig.baseUrl+"webmap/viewer.html?layers\x3d"+b.id,d=esri.i18nBundle.itemLinks.open,f=esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer)):this.couldHaveArcGISDesktop()&&"Globe Service"==g?(e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,
"openPageAndCount",b.id,b.url+"?f\x3dlyr\x26v\x3d9.3"),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):this.couldHaveArcGISDesktop()&&("Map Package"==g||"Mobile Map Package"==g||"Basemap Package"===g||"Mobile Basemap Package"===g||"Layer Package"==g||"Pro Map"==g||"Layout"==g||-1<D.indexOf(b.typeKeywords,"lyrx"))?b&&-1===b.name.indexOf(".bpkx")&&-1===b.name.indexOf(".mmpk")&&-1===b.name.indexOf(".bpk")&&-1===b.name.indexOf(".lpkx")&&-1===b.name.indexOf(".mpkx")&&-1===b.name.indexOf(".lyrx")&&
-1===b.name.indexOf(".mapx")&&-1===b.name.indexOf(".pagx")?(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemPkgPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):!this.couldHaveArcGISDesktop()||"Geoprocessing Package"!=g&&"Locator Package"!=g&&"Tile Package"!=g&&"Vector Tile Package"!=g?
!this.couldHaveArcGISDesktop()||"Map Document"!=g&&"Published Map"!=g&&"Globe Document"!=g&&"Scene Document"!=g&&"Layer"!=g?!this.couldHaveArcGISDesktop()||"Desktop Add In"!=g&&"ArcGIS Pro Add In"!==g?!this.isSilverlightInstalled()||"Explorer Map"!=g&&"Explorer Layer"!=g&&"Explorer Add In"!=g?"File Geodatabase"===g||"CSV Collection"===g||"KML Collection"===g||"Rule Package"===g||"GeoJson"===g||"Shapefile"===g||"CSV"===g||"Map Template"===g||"Code Sample"===g||"Geoprocessing Sample"===g||"Service Definition"===
g||"Workflow Manager Package"===g||"Windows Viewer Add-in"===g||"ArcPad Package"===g||"Operations Dashboard Addin"===g||"Microsoft Word"===g||"CAD Drawing"===g||"Raster function template"===g||"Microsoft PowerPoint"===g||"Microsoft Powerpoint"===g||"Microsoft Excel"===g||"iWork Pages"===g||"iWork Keynote"===g||"iWork Numbers"===g||"Image"===g||"Visio Document"===g||"PDF"===g||"Desktop Application"===g||"Task File"===g||"Project Package"===g||"ArcGIS Pro Configuration"===g||"Project Template"===g||
"Desktop Style"===g||"Native Application Installer"===g||"360 VR Experience"==g?(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Desktop Application Template"==g?-1<D.indexOf(b.typeKeywords,"desktopApplicationTemplateUrl")&&b.url&&0<b.url.length?(e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url),d=f=esri.i18nBundle.itemLinks.open):(e="JavaScript:void(0)",
n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.downloadArchive):"Web Mapping Application"==g&&-1===D.indexOf(b.typeKeywords,"Web AppBuilder for ArcGIS")||"Hub Initiative"===g||"Hub Page"===g||"Hub Site Application"===g?(g=arcgisonline.sharing.util.isHostedTemplateItem(b.url),b.url&&0<b.url.length?(esriGeowConfig.urlKey&&(-1<b.url.indexOf(esriGeowConfig.urlKey)||e&&-1<b.url.indexOf(e))&&-1===b.url.indexOf(".opendata")&&(b.url=
esriGeowConfig.allSSL?b.url.replace("http:","https:"):b.url),b.access&&"public"!==b.access&&g&&!arcgisonline.sharing.util.isPortal()&&(n=arcgisonline.sharing.util.parseUrl(b.url),b.url=b.url.replace(n.host,window.location.hostname)),arcgisonline.sharing.util.isPortal()&&b.url&&0===b.url.indexOf("/")&&(n=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===b.url.indexOf(n)&&(b.url=n+b.url)),e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",
b.id,b.url),f=esri.i18nBundle.itemLinks.viewApp,d=esri.i18nBundle.itemLinks.open):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+b.id,d=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails)):"Mobile Application"==g?b.url&&0<b.url.length?(esriGeowConfig.urlKey&&(-1<b.url.indexOf(esriGeowConfig.urlKey)||e&&-1<b.url.indexOf(e))&&(b.url=esriGeowConfig.allSSL?b.url.replace("http:","https:"):b.url),e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url),
d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.getApp):(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+b.id,d=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):"Windows Mobile Package"==g?(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.download):"Document Link"===g?(e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url),d=f=esri.i18nBundle.itemLinks.open):
"Form"===g&&(!d||d&&d.accountId)?(e=(esriGeowConfig.surveyUrl||"https://survey123.arcgis.com")+"/share/"+b.id+"?portalUrl\x3d"+(location.protocol+"//"+(esriGeowConfig.self.urlKey?esriGeowConfig.self.urlKey+"."+esriGeowConfig.self.customBaseUrl:esriGeowConfig.self.portalHostname)),f=esri.i18nBundle.itemLinks.openSurvey123,d=esri.i18nBundle.itemLinks.open):"Workforce Project"===g?(d=(g=arcgisonline.sharing.util.isPortal())?window.location.host+arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",
e=window.location.protocol+"//"+d+((g?"/apps/workforce/#":"")+("/projects/"+b.id+"/dispatch/assignments")),f=esri.i18nBundle.itemLinks.openWorkforce,d=esri.i18nBundle.itemLinks.open):"Insights Workbook"===g||"Insights Page"===g||"Insights Model"===g?(d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",e=d="Insights Model"===g?d+("?model\x3d"+b.id):"Insights Page"===g?d+("view/"+b.id):d+b.id,f=esri.i18nBundle.itemLinks.openInsights,
d=esri.i18nBundle.itemLinks.open):"Dashboard"===g?(e=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/"+b.id,f=esri.i18nBundle.itemLinks.dashboardView,d=esri.i18nBundle.itemLinks.open):"StoryMap"===g?(e="JavaScript:void(0)",n=D.hitch(arcgisonline.sharing.util,"openPageAndCount",b.id,b.url),d=f=esri.i18nBundle.itemLinks.open):"Web Experience"===g&&b.webExperienceUrl?(e=b.webExperienceUrl,d=f=esri.i18nBundle.itemLinks.open):
(e=esriGeowConfig.baseUrl+"item.html?id\x3d"+b.id,d=esri.i18nBundle.itemLinks.details,f=esri.i18nBundle.itemLinks.viewDetails):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openExplorer,f=esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer)):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):
(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b)),d=esri.i18nBundle.itemLinks.open,f=esri.i18nBundle.itemLinks.openDesktop):(e="JavaScript:void(0)",n=D.hitch(this,"_fetchItemData",b,this.getItemPkgPath(b)),d=esri.i18nBundle.itemLinks.open,f="Task File"!==g?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional);return{label:d,href:e,target:"",tip:f,onclick:n}},getItemOpenLinkObjects:function(b,g){var d=this.isSilverlightInstalled(),e=[],f=
b.type?b.type:"",n=this.getUser(),h=!1;if("Web Map"==f&&-1==D.indexOf(b.typeKeywords,"ArcGIS Online")&&d&&esriGeowConfig.explorerOnline)e.push({label:esri.substitute({appTitle:""},esri.i18nBundle.itemLinks.openViewer),onClick:D.partial(arcgisonline.map.mapUtil.openMap,b.id,h)}),this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getItemPkgPath(b))});else if("Web Map"==f)h=!n&&this._isPremiumService(b),e.push({label:esri.substitute({appTitle:""},
esri.i18nBundle.itemLinks.openViewer),onClick:D.partial(arcgisonline.map.mapUtil.openMap,b.id,h)}),this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getItemPkgPath(b))}),f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/presentation/index.html?webmap\x3d"+b.id,-1<D.indexOf(b.typeKeywords,"Presentation Map")?(e.push({label:esri.i18nBundle.aboutPanel.viewPresentation,
onClick:D.partial(arcgisonline.sharing.util.openPage,f)}),g&&e.push({label:esri.i18nBundle.aboutPanel.editPresentation,onClick:D.partial(arcgisonline.sharing.util.openPage,f+"\x26builder",!0)})):g&&e.push({label:esri.i18nBundle.aboutPanel.createPresentation,onClick:D.partial(arcgisonline.sharing.util.openPage,f+"\x26builder",!0)});else if("Map Service"==f||"Vector Tile Service"===f)h=!n&&this._isPremiumService(b),e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),
onClick:D.partial(arcgisonline.map.mapUtil.addToMap,b.id,h)}),e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,b.id,h)}),esriGeowConfig.sceneViewerEnabled&&e.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+
"/home/webscene/viewer.html?layers\x3d"+b.id,!0)}),"Vector Tile Service"!==f?(this.couldHaveArcGISDesktop()&&!arcgisonline.sharing.util.isHostedServiceItem(b)&&(-1<D.indexOf(b.typeKeywords,"Hosted Service")&&arcgisonline.sharing.util.portalSupportsHostedServices()?e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getPItemPath(b))}):!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(b.url)||arcgisonline.sharing.util.isPortal()&&
arcgisonline.sharing.util.onFederatedServer(b.url)?e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getPItemPath(b))}):b.url&&-1!==b.url.indexOf(".arcgis.com/")&&-1!==b.url.indexOf("//landscape")?e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getPItemPath(b))}):e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,b.url+"?f\x3dlyr\x26v\x3d9.3")})),
this.couldHaveArcGISDesktop()&&arcgisonline.sharing.util.isHostedServiceItem(b)&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getPItemPath(b))})):(f=b.access&&"public"!==b.access&&n&&n.token?"\x26token\x3d"+n.token:"",n=(b&&b.hasResources?esriGeowConfig.restBaseUrl+"content/items/"+b.id:b.url)+"/resources/styles/root.json?f\x3dpjson",esri.isDefined(b.hasResources)&&(g&&b&&b.hasResources&&e.push({label:esri.i18nBundle.itemLinks.downloadStyle,onClick:D.partial(arcgisonline.sharing.util.openPage,
n+"\x26download\x3dtrue"+f,!0)}),(g&&b&&b.hasResources||b.url&&-1<b.url.indexOf("/VectorTileServer"))&&e.push({label:esri.i18nBundle.itemLinks.viewStyle,onClick:D.partial(arcgisonline.sharing.util.openPage,n+f,!1)})));else if(this.couldHaveArcGISDesktop()&&"Globe Service"==f)e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,b.url+"?f\x3dlyr\x26v\x3d9.3")});else if("Image Service"==f||"Feature Service"==f||"KML"==f||"Feature Collection"==
f||"Stream Service"==f){d=b&&b.extraUrlParams?!0:!1;h=!n&&this._isPremiumService(b);if("Image Service"!==f||"Image Service"===f&&-1===D.indexOf(b.typeKeywords,"Elevation 3D Layer"))e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:D.partial(arcgisonline.map.mapUtil.addToMap,b.id,h,d)}),e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,
b.id,h,d)});if("KML"==f)this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getPItemPath(b))}),e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if("Image Service"===f||"Feature Service"===f)esriGeowConfig.sceneViewerEnabled&&-1===D.indexOf(b.typeKeywords,"Table")&&("Feature Service"===f&&-1===D.indexOf(b.typeKeywords,"HasOnlyMultipatchGeometries")||"Image Service"===
f&&-1<D.indexOf(b.typeKeywords,"Elevation 3D Layer"))&&e.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+b.id,!0)}),this.couldHaveArcGISDesktop()&&"Image Service"===f&&(b.url&&-1!==b.url.indexOf(".arcgis.com/")||!arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onAGOLFederatedServer(b.url)||
arcgisonline.sharing.util.isPortal()&&arcgisonline.sharing.util.onFederatedServer(b.url)?e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getPItemPath(b))}):e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,b.url+"?f\x3dlyr\x26v\x3d9.3")})),this.couldHaveArcGISDesktop()&&"Feature Service"===f&&this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,
"_fetchItemData",b,this.getPItemPath(b))})}else if("Geoprocessing Service"===f&&this.couldHaveArcGISDesktop())e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getPItemPath(b))});else if("WMS"==f||"WFS"===f||"WMTS"===f)b.noWebMercator?e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnGCSMap,b.id)}):(e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||
"ArcGIS.com"},esri.i18nBundle.itemLinks.addToViewer),onClick:D.partial(arcgisonline.map.mapUtil.addToMap,b.id)}),e.push({label:esri.substitute({appTitle:esriGeowConfig.portalName||"ArcGIS.com"},esri.i18nBundle.itemLinks.addToNewViewer),onClick:D.partial(arcgisonline.map.mapUtil.openOnMap,b.id)})),esriGeowConfig.sceneViewerEnabled&&e.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+b.id,!0)}),this.couldHaveArcGISDesktop()&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getPItemPath(b))});else if("File Geodatabase"===f||"CSV Collection"===f||"KML Collection"===f||"Rule Package"==f||"CSV"==f||"GeoJson"===f||"Shapefile"==f||"Service Definition"==f||"ArcPad Package"===f||"Operations Dashboard Addin"===f)e.push({label:esri.i18nBundle.itemLinks.download,
onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if("Map Package"==f||"Mobile Map Package"===f||"Basemap Package"===f||"Mobile Basemap Package"===f||"Layer Package"==f||"Pro Map"==f||"Layout"==f||-1<D.indexOf(b.typeKeywords,"lyrx"))this.couldHaveArcGISDesktop()&&b&&-1===b.name.indexOf(".bpkx")&&-1===b.name.indexOf(".mmpk")&&-1===b.name.indexOf(".bpk")&&-1===b.name.indexOf(".lpkx")&&-1===b.name.indexOf(".mpkx")&&-1===b.name.indexOf(".lyrx")&&-1===b.name.indexOf(".mapx")&&-1===
b.name.indexOf(".pagx")&&e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getItemPkgPath(b))}),e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if("Geoprocessing Package"==f||"Locator Package"==f||"Tile Package"==f||"Vector Tile Package"==f||"Project Package"===f||"Project Template"===f)this.couldHaveArcGISDesktop()&&"Task File"!==f&&"Project Package"!==f&&"Project Template"!==f&&
e.push({label:"Task File"!==f?esri.i18nBundle.itemLinks.openDesktop:esri.i18nBundle.itemLinks.openProfessional,onClick:D.hitch(this,"_fetchItemData",b,this.getItemPkgPath(b))}),e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if("Scene Package"==f)e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if(!this.couldHaveArcGISDesktop()||"Map Document"!=f&&"Published Map"!=
f&&"Globe Document"!=f&&"Scene Document"!=f&&"Layer"!=f)if(!this.couldHaveArcGISDesktop()||"Desktop Add In"!=f&&"ArcGIS Pro Add In"!==f)if("Explorer Layer"==f||"Explorer Add In"==f||"Explorer Map"==f)e.push({label:esri.i18nBundle.itemLinks.openExplorer,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if("Map Template"===f||"Code Sample"===f||"Geoprocessing Sample"===f||"Workflow Manager Package"===f||"Windows Viewer Add In"===f||"Microsoft Word"===f||"CAD Drawing"===f||"Raster function template"===
f||"Microsoft PowerPoint"===f||"Microsoft Powerpoint"===f||"Microsoft Excel"===f||"iWork Pages"===f||"iWork Keynote"===f||"iWork Numbers"===f||"Image"===f||"Visio Document"===f||"PDF"===f||"Desktop Application"===f||"Task File"===f||"Desktop Style"===f||"Native Application Installer"===f||"360 VR Experience"==f||"ArcGIS Pro Configuration"===f)e.push({label:"PDF"!==f?esri.i18nBundle.itemLinks.download:esri.i18nBundle.itemLinks.open,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});
else if("Desktop Application Template"===f)(f=-1<D.indexOf(b.typeKeywords,"desktopApplicationTemplateUrl"))&&b.url&&b.url.length&&(f=!0,e.push({label:esri.i18nBundle.itemLinks.open,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,b.url)})),f||e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if("Web Mapping Application"==f&&-1===D.indexOf(b.typeKeywords,"Web AppBuilder for ArcGIS")||"Mobile Application"==f||"Application"==
f||"Native Application"===f||"Native Application Template"===f||"Hub Initiative"===f||"Hub Page"===f||"Hub Site Application"===f)arcgisonline.sharing.util.isHostedTemplateItem(b.url),n=esri.i18nBundle.itemLinks.viewApp,"Mobile Application"==f&&(n=esri.i18nBundle.itemLinks.getApp),arcgisonline.sharing.util.isPortal()&&b.url&&0===b.url.indexOf("/")&&(f=esriGeowConfig.self.portalHostname.substring(esriGeowConfig.self.portalHostname.indexOf("/")),-1===b.url.indexOf(f)&&(b.url=f+b.url)),b.url&&0<b.url.length&&
e.push({label:n,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,b.url)}),-1<D.indexOf(b.typeKeywords,"Web AppBuilder")&&g&&(f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/webappbuilder/index.html?id\x3d"+b.id,f="https:"===window.location.protocol?arcgisonline.sharing.util.getSecureUrl(f):arcgisonline.sharing.util.getHttpUrl(f),e.push({label:esri.i18nBundle.itemLinks.editApp,onClick:D.partial(arcgisonline.sharing.util.openPage,
f,!0)}));else if("Windows Mobile Package"==f)e.push({label:esri.i18nBundle.itemLinks.download,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if("CityEngine Web Scene"==f)f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/CEWebViewer/viewer.html?3dWebScene\x3d"+b.id,e.push({label:esri.i18nBundle.itemLinks.viewApp,onClick:D.partial(arcgisonline.sharing.util.openPage,f)}),e.push({label:esri.i18nBundle.itemLinks.download,
onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else if("Web Scene"===f&&esriGeowConfig.sceneViewerEnabled)f=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?webscene\x3d"+b.id,e.push({label:esri.i18nBundle.itemLinks.openSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPage,f,!0)});else if("Scene Service"===f&&esriGeowConfig.sceneViewerEnabled)f=window.location.protocol+"//"+window.location.host+
arcgisonline.sharing.util.getHomeAppContext()+"/home/webscene/viewer.html?layers\x3d"+b.id,e.push({label:esri.i18nBundle.itemLinks.addToSceneViewer,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,f,!0)});else if("Operation View"===f){f=window.location;n=arcgisonline.sharing.util.isPortal();h=f.protocol+"//"+(n?esriGeowConfig.self.portalHostname:f.host);d=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboard/index.html#/"+
b.id;var k=-1<D.indexOf(b.typeKeywords,"TabletLayout");D.indexOf(b.typeKeywords,"DesktopLayout");var c=-1<D.indexOf(b.typeKeywords,"V2"),l=this.couldHaveArcGISDesktop();f=this._isOperationsViewSupportedBrowser();l&&!c&&e.push({label:esri.i18nBundle.itemLinks.openOperationViewDesktop,onClick:D.partial(arcgisonline.sharing.util.openPage,h+(n?"/apps/dashboard-win/":"/opsdashboard/")+"OperationsDashboard.application?open\x3d"+b.id)});!c&&k&&f&&e.push({label:esri.i18nBundle.itemLinks.openOperationViewUrl,
onClick:D.partial(arcgisonline.sharing.util.openPage,d,!1)})}else"Document Link"===f?e.push({label:esri.i18nBundle.itemLinks.open,onClick:D.partial(arcgisonline.sharing.util.openPageAndCount,b.id,b.url)}):"Form"===f&&n&&n.accountId?e.push({label:esri.i18nBundle.itemLinks.openSurvey123,onClick:D.partial(arcgisonline.sharing.util.openPage,"arcgis-survey123://?itemId\x3d"+b.id+"\x26username\x3d"+n.username,!0)}):"Workforce Project"===f?(f=(n=arcgisonline.sharing.util.isPortal())?window.location.host+
arcgisonline.sharing.util.getHomeAppContext():"workforce.arcgis.com",e.push({label:esri.i18nBundle.itemLinks.openWorkforce,onClick:D.partial(arcgisonline.sharing.util.openPage,window.location.protocol+"//"+f+((n?"/apps/workforce/#":"")+("/projects/"+b.id+"/dispatch/assignments")),!0)})):"Insights Workbook"===f||"Insights Page"===f||"Insights Model"===f?(n=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/insights/#/",n="Insights Model"===f?n+("?model\x3d"+
b.id):"Insights Page"===f?n+("view/"+b.id):n+b.id,e.push({label:esri.i18nBundle.itemLinks.openInsights,onClick:D.partial(arcgisonline.sharing.util.openPage,n,!0)})):"Dashboard"===f&&(n=window.location.protocol+"//"+window.location.host+arcgisonline.sharing.util.getHomeAppContext()+"/apps/dashboards/index.html#/",f=this._isOperationsViewSupportedBrowser(!0),n+=b.id,h=n+"?edit\x3dtrue",e.push({label:esri.i18nBundle.itemLinks.dashboardView,onClick:D.partial(arcgisonline.sharing.util.openPage,n,!1)}),
g&&f&&e.push({label:esri.i18nBundle.itemLinks.dashboardEdit,onClick:D.partial(arcgisonline.sharing.util.openPage,h,!1)}));else e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});else e.push({label:esri.i18nBundle.itemLinks.openDesktop,onClick:D.hitch(this,"_fetchItemData",b,this.getItemDataPath(b))});return e},getGroupLinks:function(b){var g=D.create,d=g("span",{"class":"esriItemLinks",style:"white-space: nowrap"});g("a",{href:esriGeowConfig.baseUrl+
"group.html?id\x3d"+b.id,innerHTML:esri.i18nBundle.itemLinks.details,title:esri.i18nBundle.itemLinks.viewGroupDetails,alt:esri.i18nBundle.itemLinks.viewGroupDetails},d);return d},getItemDataPath:function(b){var g=arcgisonline.sharing.util.getToken(),d=g?"?token\x3d"+g:"",e=esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/data";return"KML"==b.type&&(d="public"!==b.access&&g?"?token\x3d"+g:"",b.url&&-1===b.url.indexOf(e))?b.url+d:e+d},getItemPkgPath:function(b){var g=arcgisonline.sharing.util.getToken();
return esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/item.pkinfo"+(g?"?token\x3d"+g:"")},getPItemPath:function(b){var g=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/item.pitem"+(g?"?token\x3d"+g:"")},getItemZipPath:function(b){var g=arcgisonline.sharing.util.getToken();return esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/data?f\x3dzip"+(g?"\x26token\x3d"+g:"")},getUser:function(){return esriGeowConfig.userInfo||null},meetsPasswordStrength:function(b){return 8<=
b.length&&b.match("^.*(?\x3d.*\\d)(?\x3d.*[a-zA-Z]).*$")},meetsPasswordPolicyStrength:function(b,g){var d={meetsRequirements:function(){return this.minLength&&this.minLetter&&this.minUpper&&this.minLower&&this.minDigit&&this.minOther},minLength:!0,minLetter:!0,minUpper:!0,minLower:!0,minDigit:!0,minOther:!0};if(g&&0<g.length){b.minLength&&(d.minLength=g.length>=b.minLength);if(b.minLetter){var e=g.match(/[A-Za-z]/g);d.minLetter=!!(e&&e.length>=b.minLetter)}b.minUpper&&(e=g.match(/[A-Z]/g),d.minUpper=
!!(e&&e.length>=b.minUpper));b.minLower&&(e=g.match(/[a-z]/g),d.minLower=!!(e&&e.length>=b.minLower));b.minDigit&&(e=g.match(/[0-9]/g),d.minDigit=!!(e&&e.length>=b.minDigit));b.minOther&&(e=g.match(/[\\!"#\$%&'\(\)\*\+,-\./:;<=>\?@\[\]\^_`\{\|}~]/g),d.minOther=!!(e&&e.length>=b.minOther))}else b.minLength&&(d.minLength=!1),b.minLetter&&(d.minLetter=!1),b.minUpper&&(d.minUpper=!1),b.minLower&&(d.minLower=!1),b.minDigit&&(d.minDigit=!1),b.minOther&&(d.minOther=!1);return d},userPreferences:function(b,
g,d){var e=D.cookie(g||"esri_prefs");if(b)e&&(b=D.mixin(D.json.parse(e),b)),D.cookie(g||"esri_prefs",D.json.stringify(b),{path:"/",expires:1E4,sameSite:"Strict"}),b.contentMode&&d&&this.getUser()?(e=D.create,d=e("form",{method:"POST"},D.body()),e("input",{type:"hidden",name:"preferredView",value:b.contentMode},d),e("input",{type:"hidden",name:"clearEmptyFields",value:"false"},d),arcgisonline.sharing.geow.Community.updateProfile(d,function(f){D.publish("esri/userPreferences"+(g||"user_prefs"),[b])})):
D.publish("esri/userPreferences"+(g||"user_prefs"),[b]);else return d="contentModePrefs"===g?esriGeowConfig.userInfo&&esriGeowConfig.userInfo.preferredView:null,null!=e?D.json.parse(e):d?{contentMode:d}:{}},getToken:function(){return!1===this.isLoggedIn()?"":esriGeowConfig.userInfo.token},callPage:function(b){window.location=arcgisonline.sharing.util.replaceSSL(esriGeowConfig.baseUrl+b)},openPageAndCount:function(b,g,d){b=esriGeowConfig.restBaseUrl+"content/items/"+b+"/data";var e=arcgisonline.sharing.util.getToken(),
f={f:"json"};null!=e&&""!==e&&(f.token=e);esri.request({url:b,content:f,callbackParamName:"callback"});arcgisonline.sharing.util.openPage(g,"boolean"===typeof d?d:!1)},openPage:function(b,g){g?window.location=b:window.open(b)},fix:function(b){null!=b&&1==b.length&&null!=b[0]&&0<b[0].length&&(b=b[0]);return b.replace(/&lt;/g,"\x3c")},stripHTML:function(b){return b?-1<b.indexOf("\x3c")&&-1<b.indexOf("\x3e")?b.replace(/<[^>]+>/g,""):b:b},urlToObject:function(b){b=esri.urlToObject(b);b.query=b.query||
{};for(var g in b.query)b.query.hasOwnProperty(g)&&(Array.isArray(b.query[g])||(b.query[g]=b.query[g].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return b},linkifyText:function(b){b=b.split(" ");for(var g=0;g<b.length;g++)if(0===b[g].indexOf("http://")||0===b[g].indexOf("https://"))b[g]="\x3ca href\x3d'"+b[g]+"' target\x3d'_blank'\x3e"+b[g]+"\x3c/a\x3e";return b.join(" ")},removeHTMLTags:function(b){if(null==b)return"";b=b.replace(/&(lt|gt);/g,function(g,d){return"lt"==d?"\x3c":"\x3e"});return b.replace(/<\/?[^>]+(>|$)/g,
"")},escapeHTML:function(b){var g={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};return String(b).replace(/[&<>"'\/]/g,function(d){return g[d]})},unescapeHTML:function(b){return String(b).replace("\x26lt;","\x3c").replace("\x26gt;","\x3e").replace("\x26quot;",'"').replace("\x26#39;","'").replace("\x26#x2F;","/").replace("\x26amp;","\x26")},getSnippet:function(b,g){if(null==b||0===b.length)g=arcgisonline.sharing.util.removeHTMLTags(g),b=180<g.length?
g.substring(0,180)+" ...":g;return b},trimTags:function(b){for(;-1<b.indexOf("  ");)b=b.replace(/  /g," ");for(;-1<b.indexOf(",,");)b=b.replace(/,,/g,",");return b=D.trim(b.replace(/, ,/,",").replace(/^,/,"").replace(/,$/,""))},postProcessUri:function(b){b=0<=b.indexOf("?")?b+"\x26f\x3djson":b+"?f\x3djson";var g=this.getToken();null!=g&&""!==g&&(b=b+"\x26token\x3d"+g);return this.useSSL(b)},replaceSSL:function(b){return!1===esriGeowConfig.useSSL?b:b.replace("http://","https://")},useSSL:function(b){return"https:"===
window.location.protocol||esriGeowConfig.self&&!0===esriGeowConfig.self.allSSL?b.replace("http:","https:"):b},errorHandler:function(b,g,d,e){b&&b.code&&"IdentityManagerBase.5"===b.code&&(b.code=498);if(-1<d.indexOf(esriGeowConfig.restBaseUrl)&&b.code&&498==b.code||403==b.code||400==b.code&&"Invalid account"==b.message)if(403==b.code&&!0===this.isLoggedIn())d&&-1<d.toLowerCase().indexOf("/generatetoken")?window.location.href=esriGeowConfig.baseUrl+"signin.html":d&&-1<d.indexOf("/invitations/")&&e?
e(b,g):0>window.location.href.indexOf(esriGeowConfig.baseUrl+"error.html")&&("Request not made over ssl"==b.message?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dSSLRequired":arcgisonline.sharing.util.checkSubscriptionStatus(b)&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccessDeniedResource"));else{if(!(403===b.code&&!arcgisonline.sharing.util.checkSubscriptionStatus(b)||403===b.code&&!1===esriGeowConfig.isMultiTenant&&-1<D.indexOf(["COM_0056","COM_0057","SB_0008"],b.messageCode))){esriGeowConfig.userInfo=
null;D.cookie("esri_auth",null,{expires:-1,path:"/",domain:document.domain});D.cookie("esri_auth",null,{expires:-1,path:"/",domain:".arcgis.com"});D.cookie("esri_auth",null,{expires:-1,path:"/",domain:".esri.com"});arcgisonline.sharing.util&&arcgisonline.sharing.util._cookies&&arcgisonline.sharing.util._cookies.arcgis_auth&&delete arcgisonline.sharing.util._cookies.arcgis_auth;g="";-1==esriGeowConfig.signin.indexOf("http")&&(g=esriGeowConfig.baseUrl,!1!==esriGeowConfig.useSSL&&(g=g.replace("http:",
"https:")));g+=esriGeowConfig.signin;d="";e=g+("?error\x3d"+b.code);var f=D.queryToObject(window.location.search.slice(1)).returnUrl;0>window.location.href.indexOf(e)?-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map&&arcgisonline.map.main&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?(arcgisonline.map.storage.saveMapInCookie(null,!1),d="\x26returnUrl\x3d"+encodeURIComponent(esriGeowConfig.baseUrl+esriGeowConfig.webmapViewerPath+"?useExisting\x3d1")):
d="\x26returnUrl\x3d"+encodeURIComponent(f?f:window.location):f&&(d="\x26returnUrl\x3d"+encodeURIComponent(f));e+=d;0>window.location.href.indexOf(e)?window.location=e:"User not part of this account"===b.message&&(window.location=g+"?error\x3d400"+d)}}else e&&e(b,g)},checkSubscriptionStatus:function(b){return-1!==D.indexOf(["SB_0001","SB_0002","SB_0003","SB_0004"],b.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().show(esriGeowConfig.self.subscriptionInfo),
!1):-1!==D.indexOf(["SB_0005","SB_0006","SB_0007"],b.messageCode)?(arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg.prototype.statics.getInstance().showOther(b.messageCode),!1):!0},isValidSubscriptionState:function(){var b=esriGeowConfig.self.subscriptionInfo,g=["cancelled","expired","suspended","restricted"];return!b||-1===g.indexOf(b.state)},checkError:function(b){var g;return-1!==D.indexOf("COM_0044 COM_0047 CONT_0046 CONT_0047 COM_1043 COM_1044 COM_1045 COM_1046".split(" "),b.messageCode)?
(b=(g=D.mixin({},D.i18n.getLocalization("arcgisonline","arcgisonline").common))&&g.errors&&g.errors[b.messageCode]?{message:g.errors[b.messageCode]}:b,b=D.mixin(D.mixin({},g.errors.genericError),b),esriGeowConfig.hideDefaultCheckErrorMessage||(g=arcgisonline.sharing.dijit.dialog.GeneralDlg.prototype.statics.getInstance(),g.show(b)),!1):!0},handler:function(b,g,d,e,f){b.error&&""!==b.error?arcgisonline.sharing.util.errorHandler(b.error,g,d,f):e&&e(b,g)},getJson:function(b,g,d){return arcgisonline.sharing.util._requestWithAppHandlers({url:b},
{},g,d)},getJsonWithContent:function(b,g,d,e){return arcgisonline.sharing.util._requestWithAppHandlers({url:b,content:g},{},d,e)},postJson:function(b,g,d,e){return arcgisonline.sharing.util._requestWithAppHandlers({url:g,content:b},{usePost:!0},d,e)},postJsonCheckProxy:function(b,g,d,e){return"http:"===window.location.protocol&&-1<g.indexOf("https://")?arcgisonline.sharing.util._requestWithAppHandlers({url:g,content:b},{usePost:!0,useProxy:!0},d,e):arcgisonline.sharing.util._requestWithAppHandlers({url:g,
content:b},{usePost:!0},d,e)},postForm:function(b,g,d,e){return arcgisonline.sharing.util._requestWithAppHandlers({url:g,form:b},{usePost:!0},d,e)},_requestWithAppHandlers:function(b,g,d,e){var f=arcgisonline.sharing.util.request(b,g);f.then(function(n,h){arcgisonline.sharing.util.handler(n||{},f.ioArgs,b.url,d,e);return n},function(n,h){arcgisonline.sharing.util.errorHandler(n||{},f.ioArgs,b.url,e);throw n;});return f},request:function(b,g){var d=b.url,e=b.content||{},f=arcgisonline.sharing.util.getToken();
g=g||{};var n=arcgisonline.sharing.util.urlToObject(d).query||{};e.f||n.f||g.removeFormatProp||(e=D.mixin(e,{f:"json"}));f&&!e.token&&!1!==g.addToken?esri.isDefined(esriGeowConfig.isMultiTenant)&&!1===esriGeowConfig.isMultiTenant&&esriGeowConfig.searchArcGISOnlineEnabled&&"www.arcgis.com"===arcgisonline.sharing.util.getFullDomain(b.url)||(e.token=f):!1===g.addToken&&delete e.token;b=D.mixin({},{url:!1===g.addSSL?d:arcgisonline.sharing.util.useSSL(d),content:e,form:b.form,callbackParamName:b.form?
b.callbackParamName||null:b.callbackParamName||"callback",timeout:g&&g.timeout||0});var h=esri.request(b,g);h.addErrback(function(k){"IdentityManagerBase.1"===k.code&&(k.code=k.httpCode);arcgisonline.sharing.util.checkSoftwareAuthError(k,h);arcgisonline.sharing.util.checkSubscriptionStatus(k)||(h.canceled=!0);arcgisonline.sharing.util.isUnlicensed(k)&&(h.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html"));arcgisonline.sharing.util.isInsufficientLevel(k)&&
(h.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#insufficient_level"));arcgisonline.sharing.util.isExpiredLicense(k)&&(h.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#expired_license"));arcgisonline.sharing.util.isOldLicense(k)&&(h.canceled=!0,-1===window.location.href.indexOf("unlicensed.html")&&(window.location=esriGeowConfig.baseUrl+"unlicensed.html#old_license"));
arcgisonline.sharing.util.isInvalidUser(k)&&(h.canceled=!0,arcgisonline.sharing.geow.Geow.signout(esriGeowConfig.baseUrl+"index.html"));arcgisonline.sharing.util.isDisabledEnterpriseUser(k)&&(h.canceled=!0,-1===window.location.href.indexOf("error.html")&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dAccountDisabled"));arcgisonline.sharing.util.checkError(k)||(h.canceled=!0);throw k;});return h},_fetchItemData:function(b,g){var d=this.getUser(),e=this.getItemDataPath(b);"admin"===b.itemControl||
d&&d.username===b.owner?this.openPage(g,!0):this._canAccessUrl(e).then(D.hitch(this,function(){this.openPage(g,!0)}),D.hitch(this,function(f){f&&403===f.status?this._showError({title:this.i18n.viewer.error.noPermissionTitle,message:this.i18n.errorWidget.accessDeniedResource}):this.openPage(g,!0)}))},_canAccessUrl:function(b){var g=new D.Deferred;D.xhr("HEAD",{url:b,handleAs:"text",headers:{"X-Requested-With":null},withCredentials:this.isPortal()?!0:!1}).then(function(d){g.resolve(!0)},function(d){g.reject(d)});
return g},_showError:function(b){var g=new arcgisonline.sharing.dijit.dialog.ConfirmDialog({showCancel:!1,style:{width:"375px",height:"auto"}}),d=b||{};d.code=b.code||0;d=D.mixin({},this.i18n.common.errors.genericError,this.i18n.common.errors[b.code]||b);g.show(d).then(D.hitch(this,function(){g.hide()}))},checkSoftwareAuthError:function(b,g){var d=["COM_0056","COM_0057"];!1===esriGeowConfig.isMultiTenant&&b.code&&403===b.code&&b.messageCode&&-1!==D.indexOf(d,b.messageCode)&&-1===window.location.href.indexOf("error.html")&&
(g.canceled=!0,"COM_0056"===b.messageCode?window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalCreateAccount":"COM_0057"===b.messageCode&&(window.location=esriGeowConfig.baseUrl+"error.html?c\x3dPortalSignIn"))},isExpiredLicense:function(b){return!1===esriGeowConfig.isMultiTenant&&b.code&&503===b.code&&b.messageCode&&"GWM_0006"===b.messageCode},isInsufficientLevel:function(b){return!1===esriGeowConfig.isMultiTenant&&b.code&&503===b.code&&b.messageCode&&"GWM_0012"===b.messageCode},isUnlicensed:function(b){return!1===
esriGeowConfig.isMultiTenant&&b.code&&503===b.code&&b.messageCode&&"GWM_0013"===b.messageCode},isOldLicense:function(b){return!1===esriGeowConfig.isMultiTenant&&b.code&&503===b.code&&b.messageCode&&"GWM_0014"===b.messageCode},isInvalidUser:function(b){return!1===esriGeowConfig.isMultiTenant&&b.code&&404===b.code&&b.messageCode&&"POR_205244"===b.messageCode},isDisabledEnterpriseUser:function(b){return!1===esriGeowConfig.isMultiTenant&&b.code&&403===b.code&&b.messageCode&&"SB_0008"===b.messageCode},
isNode:function(b){return"object"===typeof Node?b instanceof Node:b&&"object"===typeof b&&"number"===typeof b.nodeType&&"string"===typeof b.nodeName},isElement:function(b){return"object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName},isHostedService:function(b){if(!b)return!1;var g=(new D._Url(esriGeowConfig.restBaseUrl)).authority,d=!1===esriGeowConfig.isMultiTenant,e=-1!==b.indexOf(".arcgis.com/"),f=-1!==b.indexOf("//services")||
-1!==b.indexOf("//tiles")||-1!==b.indexOf("//features")||-1!==b.indexOf("//locationservices")||-1!==b.indexOf("//iservices")||-1!==b.indexOf("//tiledimageservices");b=esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.supportsHostedServices&&-1!==b.indexOf(g)&&!d;return e&&f||!e&&b},isHostedServiceItem:function(b){return arcgisonline.sharing.util.isHostedService(b.item)||arcgisonline.sharing.util.isHostedService(b.url)},isHostedTemplateItem:function(b){b=b?b.split("?")[0]:"";var g=b.match(/http.+(arcgis.com\/apps)\/?/ig);
b=b.match(/http.+(opendata)\/?/ig);return g&&g.length&&!b?!0:!1},isAgolService:function(b){return b?-1!==b.indexOf("/services.arcgisonline.com/")||-1!==b.indexOf("/server.arcgisonline.com/"):!1},supportsHttps:function(b){if(!b)return!1;var g=!1;D.forEach(esriGeowConfig.httpsDomains,function(e){if(-1<b.indexOf("."+e+"/")||-1<b.indexOf("/"+e+"/"))g=!0});if(!g){var d=esriGeowConfig.self.portalHostname;-1<d.indexOf("/")&&(d=d.substring(0,d.indexOf("/")));-1<b.indexOf(d)&&(g=!0)}return g},isArcGISServer:function(b){var g=
/http.+\/(arcgis\/rest\/services|arcgis\/services)\/?/ig,d=/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer)).*/ig;return(b=(b=b&&b.split("?")[0])&&b.replace(g,"").match(d))&&b.length?b[0].split("/")[1]:null},getStaticImagesUrl:function(){var b=esriGeowConfig.staticImagesUrl||esriGeowConfig.self&&esriGeowConfig.self.staticImagesUrl;return(esriGeowConfig.allSSL||"https:"===location.protocol)&&b?b.replace("http:","https:"):
b},getRedSphereUrl:function(){return arcgisonline.sharing.util.getStaticImagesUrl()+"/Symbols/Basic/RedSphere.png"},doNothing:function(){},parseUrl:function(b){var g=document.createElement("a");g.href=b;for(var d=g.protocol.replace(":",""),e=g.hostname||window.location.host,f=g.port,n=g.search,h={},k=g.search.replace(/^\?/,"").split("\x26"),c=k.length,l=0,r;l<c;l++)k[l]&&(r=k[l].split("\x3d"),h[r[0]]=r[1]);return{source:b,protocol:d,host:e,port:f,query:n,params:h,file:(g.pathname.match(/\/([^\/?#]+)$/i)||
[,""])[1],hash:g.hash.replace("#",""),path:g.pathname.replace(/^([^\/])/,"/$1"),relative:(g.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:g.pathname.replace(/^\//,"").split("/")}},getAbsoluteUrl:function(b){var g;return b?(g||(g=document.createElement("a")),g.href=b,g.href):b},ellipse:function(b,g){b&&b.length>g&&0<g-4&&(b=b.substring(0,g-4)+"...");return b},appendTags:function(b,g){var d=b.get("value");g=d?g.split(",").concat(d.split(",")):g.split(",");b.set("value",arcgisonline.sharing.util.getUniqueArray(g).join(","));
D.style(b.domNode,"color","#000000")},getUniqueArray:function(b){var g={};return D.filter(b,function(d){return g[d]?!1:g[d]=!0})},relativeToExplicitUrl:function(b){esriGeowConfig.cdnServerUrl=D.baseUrl.substring(0,D.baseUrl.indexOf("/js/"));return esriGeowConfig.cdnServerUrl.lastIndexOf("/")===esriGeowConfig.cdnServerUrl.length-1?esriGeowConfig.cdnServerUrl+b:esriGeowConfig.cdnServerUrl+"/"+b},getCookie:function(b,g){b="esri_auth"===b?"arcgis_auth":b;var d=this._cookies&&this._cookies[b]||null;if(!d||
g)(d=(d=D.cookie(b))?D.json.parse(d):-1)&&d.role&&(d.role=d.role?d.role.replace("org_","account_"):d.role),d&&(this._cookies||(this._cookies={}),this._cookies[b]=d);return-1===d||esriGeowConfig.ignoreCookie?null:d},canSharePublic:function(){return!esriGeowConfig.self||!0!==esriGeowConfig.self.canSharePublic&&!1!==esriGeowConfig.self.canSharePublic?!0:esriGeowConfig.self.canSharePublic},getSecureUrl:function(b){b||(b=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&
"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpsPort?(location.port?(b=b.replace(location.port,esriGeowConfig.self.httpsPort),arcgisonline.sharing.util.isPortal()&&(b=b.replace(esriGeowConfig.self.httpPort,esriGeowConfig.self.httpsPort))):b=b.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpsPort),b=b.replace("http:","https:"),arcgisonline.sharing.util.cleanPorts(b)):b.replace("http:","https:")},htmlEncode:function(b){return b?b.replace(/&/g,"\x26amp;").replace(/>/g,
"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):b},htmlDecode:function(b){return b?b.replace(/&amp;/g,"\x26").replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"'):b},getHttpUrl:function(b){b||(b=esriGeowConfig.baseUrl);return esriGeowConfig.self&&esriGeowConfig.self.portalMode&&"singletenant"===esriGeowConfig.self.portalMode&&esriGeowConfig.self.httpPort?(location.port?(b=b.replace(location.port,esriGeowConfig.self.httpPort),arcgisonline.sharing.util.isPortal()&&(b=
b.replace(esriGeowConfig.self.httpsPort,esriGeowConfig.self.httpPort))):b=b.replace(location.hostname,location.hostname+":"+esriGeowConfig.self.httpPort),b=b.replace("https:","http:"),arcgisonline.sharing.util.cleanPorts(b)):b.replace("https:","http:")},cleanPorts:function(b){return b.replace(/:80\//,"/").replace(/:443\//,"/")},usePortalSSL:function(){return(!1===esriGeowConfig.isMultiTenant||arcgisonline.sharing.util.isPortal())&&esriGeowConfig.self&&esriGeowConfig.self.portalHostname&&!esriGeowConfig.self.portalHostname.match(/:7080\//)&&
80!==esriGeowConfig.self.httpPort&&443!==esriGeowConfig.self.httpsPort&&"https:"===location.protocol},onAGOLFederatedServer:function(b){for(var g=!1,d=0;d<esriGeowConfig.httpsDomains.length;d++)if(b&&-1<b.indexOf(esriGeowConfig.httpsDomains[d])){g=!0;break}return g},onFederatedServer:function(b){var g=!1,d=!1;b&&0<b.length&&esriGeowConfig.federatedServers&&0<esriGeowConfig.federatedServers.length&&(g=D.some(esriGeowConfig.federatedServers,D.hitch(this,function(e){var f=-1<b.indexOf(":6080")?b.replace("http:",
"https:").replace(":6080",":6443"):b,n=e.url?arcgisonline.sharing.util.getUrlWithoutScheme(e.url):e.url,h=e.adminUrl?arcgisonline.sharing.util.getUrlWithoutScheme(e.adminUrl):e.adminUrl;n=-1<n.indexOf(":")?e.url:n;h=-1<h.indexOf(":")?e.adminUrl:h;d=f!==b;return-1<b.indexOf(n)||-1<b.indexOf(h)||d&&(-1<f.indexOf(n)||-1<f.indexOf(h))})));return g},getUrlWithoutScheme:function(b){if(esri.isDefined(b)){if(0===b.indexOf("http://"))return b.substring(7);if(0===b.indexOf("https://"))return b.substring(8)}return b},
isPortal:function(){return esri.isDefined(esriGeowConfig.self)&&esriGeowConfig.self.isPortal},isArcGISEnterpriseOnKubernetes:function(){return"ArcGISEnterpriseOnKubernetes"===(esriGeowConfig.self||{}).portalDeploymentType},portalSupportsHostedServices:function(){return arcgisonline.sharing.util.isPortal()&&esriGeowConfig.self.supportsHostedServices},getHomeAppContext:function(){if(arcgisonline.sharing.util.isPortal()){var b=window.location.pathname,g=b.indexOf("/home");if(0<g)return b.substring(0,
g)}return""},normalizeOrgRole:function(b){return b?b.replace("org_","account_"):b},checkForIAA:function(){var b=new D.Deferred,g=!!esriGeowConfig.isDebug,d=arcgisonline.sharing.util.getPortalAdminBaseUrl(),e=arcgisonline.sharing.util.getUser();D.xhrGet({url:d+"/",handleAs:"json",content:{f:"json",ts:(new Date).getTime()}}).then(D.hitch(this,function(f){f&&f.status&&"error"===f.status&&f.code&&503===f.code?b.resolve({hasIAA:!0,error:f}):f&&(!f.error&&!e||f.error&&f.error.code&&(!e&&499!==f.error.code&&
498!==f.error.code||e&&499!==f.error.code&&498!==f.error.code))?-1===window.location.href.indexOf("createadmin.html")?window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):b.resolve({hasIAA:!1}):b.resolve({hasIAA:!0})}),D.hitch(this,function(f){!g&&(f.status&&499!==f.status||f&&(!f.error&&!e||f.error&&f.error.code&&(!e&&499!==f.error.code&&498!==f.error.code||e&&499!==f.error.code&&498!==f.error.code)))?-1===window.location.href.indexOf("createadmin.html")?
window.location=arcgisonline.sharing.util.getSecureUrl("https://"+esriGeowConfig.self.portalHostname+"/home/createadmin.html"):b.resolve({hasIAA:!1}):b.resolve({hasIAA:!0,error:f})}));return b},getBridgeUrl:function(b,g){var d=esriGeowConfig.bridgeUrl+"?url\x3d"+encodeURIComponent(b);return g&&g.expires?d+"\x26exp\x3d"+Math.ceil((new Date(g.expires)-new Date)/1E3):d},getUserDisplayName:function(b){var g=b&&b.fullName||"";b=b.firstName||g;-1<g.indexOf("_")?b=g.split("_")[0]:-1<g.indexOf(",")?b=g.split(",").slice(1).join(" "):
-1<g.indexOf(" ")&&(b=g.split(" ")[0]);return b.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},isProApp:function(b){return b&&"ArcGIS Pro"===b.title&&"esri_apps"===b.owner&&b.tags&&-1<D.indexOf(b.tags,"pro")},findProListing:function(){var b=new D.Deferred,g=!1,d=!1,e;arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"portals/self/purchases"}).then(D.hitch(this,function(f){f.purchases?(D.forEach(f.purchases,D.hitch(this,function(n){!d&&n.listing&&"ArcGIS Pro"===n.listing.title&&
"esri_apps"===n.listing.owner&&"licenseByUser"===n.listing.licenseBy&&(g=D.some(n.listing.tags,D.hitch(this,function(h){return h&&"pro"===h.toLowerCase()})))&&(e=n,d=!0)})),b.resolve(d?e:null)):b.resolve(null)}),D.hitch(this,function(f){b.reject(f)}));return b},findLicenseByUserProducts:function(){var b=new D.Deferred,g=esriGeowConfig.restBaseUrl+"portals/self/purchases",d=!1,e=!1,f={pro:null,products:null};this.isPortal();var n=D.hitch(this,function(h){if(h.listing&&"licenseByUser"===h.listing.licenseBy)if(d=
!0,"ArcGIS Pro"===h.listing.title&&"esri_apps"===h.listing.owner){if(e=D.some(h.listing.tags,D.hitch(this,function(k){return k&&"pro"===k.toLowerCase()})))f.pro=h}else h&&h.provision&&(f.products?f.products.push(h):f.products=[h])});arcgisonline.sharing.util.request({url:g}).then(D.hitch(this,function(h){h.purchases||h.trials?(h.purchases&&D.forEach(h.purchases,n),h.trials&&D.forEach(h.trials,n),b.resolve(d?f:null)):b.resolve(null)}),D.hitch(this,function(h){b.reject(h)}));return b},isEsriWorldGeocoder:function(b){var g=
arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(b);b=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(b);return g||b},isEsriWorldGeocoderNoProxy:function(b){return(b=b.url||"")&&!!b.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/ig)},isEsriWorldGeocoderThroughProxy:function(b){var g=b.url||"";return b.isAGOWorldLocator||g&&!!g.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/ig)},filterBatchGeocoders:function(b,g){return D.filter(b,D.hitch(this,
function(d){var e=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(d),f=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(d);if(e||f)esri.isDefined(d.name)?"Esri World Geocoder"===d.name&&(d.name=esri.i18nBundle.common.esriWorldGeocoder):d.name=esri.i18nBundle.common.esriWorldGeocoder;return e&&(arcgisonline.sharing.util.isPortal()||g)?!1:esri.isDefined(d.batch)?!!d.batch:e||f}))},filterNonWorldGeocoders:function(b){return D.filter(b,D.hitch(this,function(g){var d=arcgisonline.sharing.util.isEsriWorldGeocoderNoProxy(g),
e=arcgisonline.sharing.util.isEsriWorldGeocoderThroughProxy(g);return!d&&!e&&g.url}))},downloadWebMappingApp:function(b){var g="Mobile Application"!==b.type?"WMA2Code":"MobileApp2Code",d=esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/relatedItems";g=b.relatedItems||arcgisonline.sharing.util.request({url:d,content:{relationshipType:g}}).then(D.hitch(this,function(e){b.relatedItems=e&&e.relatedItems||[];return b.relatedItems}));return D.when(g,D.hitch(this,function(e){var f=e||[],n,h=D.filter(f,
function(k){return k&&null!==k.url});e=h&&h.length?h[0]:f&&0<f.length?f[0]:e;e.id&&(n=e.url||arcgisonline.sharing.util.getItemDataPath(e));e.url?window.open(n):window.location=n;A.byId("share-map-stack")&&A.byId("share-map-stack").selectChild(A.byId("share-map-application-help"))}),D.hitch(this,function(e){}))},loadUserTags:function(b){var g=new D.Deferred;b?arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+b+"/tags",content:{ts:(new Date).getTime()}}).then(D.hitch(this,
function(d){var e=[];d&&d.tags&&(e=d.tags);e=e.map(function(f){f.tag=arcgisonline.sharing.util.sanitizer.sanitize(f.tag);return f}.bind(this));g.resolve(e)}),D.hitch(this,function(d){g.resolve([])})):g.resolve([]);return g},loadUserProperties:function(b){return arcgisonline.sharing.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+b+"/properties"})},isValidEmailAddress:function(b){var g=/(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?\.)+[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9](?:[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9-]*[\u00A0-\uD7FF\uE000-\uFFFF-a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/ig;
return!/(@.*@)|(\.\.)|(@\.)|(\.@)|(^\.)/.test(b)&&g.test(b)?!0:!1},groupUsedInOrgSettings:function(b){return(b=b?"id:"+b:null)&&esriGeowConfig.self&&(esriGeowConfig.self.basemapGalleryGroupQuery&&-1<esriGeowConfig.self.basemapGalleryGroupQuery.indexOf(b)||esriGeowConfig.self.colorSetsGroupQuery&&-1<esriGeowConfig.self.colorSetsGroupQuery.indexOf(b)||esriGeowConfig.self.featuredGroupsId&&-1<esriGeowConfig.self.featuredGroupsId.indexOf(b)||esriGeowConfig.self.featuredItemsGroupQuery&&-1<esriGeowConfig.self.featuredItemsGroupQuery.indexOf(b)||
esriGeowConfig.self.galleryTemplatesGroupQuery&&-1<esriGeowConfig.self.galleryTemplatesGroupQuery.indexOf(b)||esriGeowConfig.self.homePageFeaturedContent&&-1<esriGeowConfig.self.homePageFeaturedContent.indexOf(b)||esriGeowConfig.self.layerTemplatesGroupQuery&&-1<esriGeowConfig.self.layerTemplatesGroupQuery.indexOf(b)||esriGeowConfig.self.livingAtlasGroupQuery&&-1<esriGeowConfig.self.livingAtlasGroupQuery.indexOf(b)||esriGeowConfig.self.stylesGroupQuery&&-1<esriGeowConfig.self.stylesGroupQuery.indexOf(b)||
esriGeowConfig.self.symbolSetsGroupQuery&&-1<esriGeowConfig.self.symbolSetsGroupQuery.indexOf(b)||esriGeowConfig.self.templatesGroupQuery&&-1<esriGeowConfig.self.templatesGroupQuery.indexOf(b)||esriGeowConfig.self.analysisLayersGroupQuery&&-1<esriGeowConfig.self.analysisLayersGroupQuery.indexOf(b))},canShowSocialMediaLinks:function(){var b=arcgisonline.sharing.util.isPortal(),g=arcgisonline.sharing.util.canSharePublic(),d=!(!esriGeowConfig.self||!esriGeowConfig.self.portalProperties)&&esri.isDefined(esriGeowConfig.self.portalProperties.showSocialMediaLinks),
e=d&&!0===esriGeowConfig.self.portalProperties.showSocialMediaLinks;return esriGeowConfig.showSocialMediaLinks&&!0===esriGeowConfig.showSocialMediaLinks&&(b?g&&e:g&&(!d||e))},getPortalAdminBaseUrl:function(){var b=arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?esriGeowConfig.enterpriseAdminBaseUrl:esriGeowConfig.portalAdminBaseUrl;return arcgisonline.sharing.util.getSecureUrl(b)},formatPortalOrgUrl:function(b,g,d){return arcgisonline.sharing.util.isArcGISEnterpriseOnKubernetes()?b+"/orgs/"+
d+g:b+g},getLevelSpan:function(b,g){return'\x3cspan class\x3d"license-level-badge" aria-label\x3d"'+b+" "+g+'"\x3e'+g+"\x3c/span\x3e"},getLevelSpanProperties:function(b,g){return{"class":"license-level-badge",innerHTML:g,"aria-label":b+" "+g}},createLevelSpan:function(b,g,d,e){return D.create("span",D.mixin(arcgisonline.sharing.util.getLevelSpanProperties(b,g),e||{}),d)},createLevelSpanAndPlace:function(b,g,d,e,f){return D.create("span",D.mixin(arcgisonline.sharing.util.getLevelSpanProperties(b,g),
e||{}),d,f)},getFullDomain:function(b){b=b.match(/:\/\/([0-9]?\.)?(.[^/:]+)/i);return null!=b&&2<b.length&&"string"===typeof b[2]&&0<b[2].length?b[2]:null},isValidOnlineReturnUrl:function(b){var g=decodeURI(b),d=arcgisonline.sharing.util.parseUrl(window.location.href);b=arcgisonline.sharing.util.parseUrl(g);var e=(g=0===g.indexOf("http://")||0===g.indexOf("https://"))&&b.host?b.host.lastIndexOf(".arcgis.com"):-1,f=g&&b.host?b.host.lastIndexOf(".esri.com"):-1,n=g&&b.host?b.host.lastIndexOf(d.host):
-1;e=-1<e&&e+11-1===b.host.length-1;f=-1<f&&f+9-1===b.host.length-1;d=-1<n&&n+d.host.length-1===b.host.length-1;return g&&b.host&&(e||f||d)?!0:!1},isValidPortalReturnUrl:function(b){var g=decodeURI(b),d=arcgisonline.sharing.util.parseUrl(window.location.href);b=arcgisonline.sharing.util.parseUrl(g);g=0===g.indexOf("http://")||0===g.indexOf("https://");var e=b.host?b.host.lastIndexOf(d.host):-1;d=-1<e&&e+d.host.length-1===b.host.length-1;return g&&b.host&&d?!0:!1},isSameUrl:function(b,g,d){var e=b,
f=g;d&&b&&g&&(e=b.substring(b.indexOf("://")+3),f=g.substring(g.indexOf("://")+3));return e===f},overrideDojoAriaLabel:function(b,g){b&&(D.attr(b,"aria-label",g),b.removeAttribute("aria-labelledby"))},getStepProgressIndicatorProperties:function(b,g){return{"class":"stepProgressBar stepProgressBar--"+g+"-steps",innerHTML:'\x3cdiv class\x3d"stepProgressBar__value" style\x3d"width: '+Math.floor(b/g*100)+'%;"\x3e\x3c/div\x3e',"aria-hidden":"true"}},createStepProgressIndicatorAndPlace:function(b,g,d,e){d=
D.create("div",{"class":"progressBarContainer"},d,e);D.create("div",D.mixin(arcgisonline.sharing.util.getStepProgressIndicatorProperties(b,g)),d,"first");D.place('\x3cspan class\x3d"stepLabel"\x3e'+esri.i18nBundle.common.steppedProgress.step+"  "+b+"  "+esri.i18nBundle.common.steppedProgress.of+" "+g+"\x3c/span\x3e",d,"last");return d},clearProgressBars:function(){D.query(".progressBarContainer").forEach(function(b){D.destroy(b)})},isServiceProxyGeocoder:function(b){var g=(b||"").toLowerCase();b=
-1<g.indexOf("/geocodeserver")&&-1<g.indexOf("/servers/")&&-1<g.indexOf("/rest/services/");var d=arcgisonline.sharing.util.isPortal()&&-1<g.indexOf(esriGeowConfig.self.portalHostname.toLowerCase());g=!arcgisonline.sharing.util.isPortal()&&g.indexOf("utility")&&-1<g.indexOf(".arcgis.com");return b&&(d||g)},applyChrome62ButtonRepaintFix:function(b){D.has&&61<D.has("chrome")&&b&&(D.style(b,"display","none"),setTimeout(function(){D.style(b,"display","")},1))},isValidUrl:function(b){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(b)},
setFederatedServers:function(b){esriGeowConfig.federatedServers=b},shouldUseProxy:function(b){b=(((b||"").split("//")[1]||"").split("/")[0]||"").toLowerCase();return!!esriGeowConfig.self.isPortal&&b!==window.location.host.toLowerCase()}}})},"arcgisonline/sharing/dijit/dialog/GeneralDlg":function(){define("require esri/declare esri/Evented dojo/_base/lang dijit/Dialog dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/query dojo/dom-style dojo/dom-attr dojo/on dojo/i18n!../../../nls/arcgisonline dojo/text!arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){var m=A("arcgisonline.sharing.dijit.dialog.GeneralDlg",[d,e,f,a],{baseClass:"esriThumbnailDlg",templateString:r,widgetsInTemplate:!0,onCancel:function(){},onHide:function(){},postMixInProperties:function(){this.inherited(arguments);this.i18n=b.mixin({},l.common,l.generalDlg)},postCreate:function(){this.loadConnections()},show:function(q){this.clear();this.setTitle(q.title);this.setMessage(q.message);this.setContent(q.content);this.key=q.key;q.hideTitleBar&&h.set(n(".dijitDialogTitleBar")[0],
"display","none");q.error&&n("#general-dialog-content").addClass("error");q.buttonText&&(this._dialog.domNode.querySelector("#button_general-close_label").textContent=q.buttonText);this._dialog.show()},showWide:function(q){h.set(this._dialog,"width","700px");this.show(q)},destroy:function(){this.inherited(arguments);m.prototype.statics._instance&&(m.prototype.statics._instance=null)},clear:function(){this.setTitle("");n("#general-dialog-content").attr("innerHTML","");n("#general-dialog-content").removeClass("error")},
loadConnections:function(){n(".jevent").on("click",function(v){v.preventDefault()});n("#general-dialog .dijitDialogTitleBar .dijitDialogCloseIcon").forEach(b.hitch(this,function(v){k.set(v,"title",this.i18n.close)}));var q=this._dialog;this.own(c(q,"cancel",b.hitch(this,function(v){v&&v instanceof Event&&v.preventDefault();this.onCancel()})),c(q,"hide",b.hitch(this,function(v){v&&v instanceof Event&&v.preventDefault();this.onHide()})))},setTitle:function(q){q&&this._dialog.set("title",q)},setMessage:function(q){q&&
n("#general-dialog-content").attr("innerHTML","\x3cp style\x3d'word-wrap:break-word;'\x3e"+q+"\x3c/p\x3e")},setContent:function(q){q&&n("#general-dialog-content").attr("innerHTML",q)},hideTitle:function(){this._dialog.titleNode.classList.add("hide")},setButtonLabel:function(q){this._okBtn.setLabel(q)},hide:function(){this._dialog.hide()},onOkClick:function(q){this._dialog.hide()}});m.prototype.statics={getInstance:function(){this._instance||(this._instance=new m);return this._instance}};return m})},
"esri/declare":function(){define(["dojo/_base/declare","dojo/_base/lang","./extend"],function(D,A,a){return function(b,g,d){var e=A.isString(b);e?d.declaredClass=b:(d=g,g=b);g=D(g,d);e&&a(b,g);return g}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,A,a){return function(b,g){var d=b.substring(b.indexOf(".")+1);D.setObject(d,g,a)}})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(D,
A,a,b,g,d){D=D([b],{declaredClass:"esri.Evented",registerConnectEvents:function(){var e=this.constructor,f=this.constructor._meta.parents,n=[{}],h={},k,c=function(r,m){A.isArray(r)||(r=[r]);for(var q=0;q<r.length;q++){var v=r[q];v._meta&&v._meta.parents&&c(v._meta.parents,m);v.prototype._eventMap&&m.push(A.mixin({},v.prototype._eventMap))}return m};if(!e._onMap){c(f,n);n.push(this._eventMap);f=A.mixin.apply(this,n);for(l in this)/^on\w/.test(l)&&A.isFunction(this[l])&&(n=this._hyphenLower(l).toLowerCase(),
f[n]||(h[n]={method:l}));for(k in f){var l=this._onCamelCase(k);h[k]={method:l,argKeys:f[k]}}e._onMap=h;return e._onMap}},on:function(e,f){if(-1<e.indexOf(",")){for(var n=e.split(/\s*,\s*/),h=n.length,k=[];h--;)k.push(this.on(n[h],f));k.remove=function(){for(var r=0;r<k.length;r++)k[r].remove()};return k}n=this.constructor._onMap||this.registerConnectEvents();h="string"==typeof e&&e.toLowerCase();var c=this._onCamelCase(h),l=n&&n[h];return(c=l&&l.method||this[c]&&A.isFunction(this[c])&&c)?l&&A.isArray(l.argKeys)?
(n=this._onArr2Obj(f,n[h].argKeys),a.after(this,c,n,!0)):a.after(this,c,function(r){r=r||{};r.target||(r.target=this);f.call(this,r)},!0):this.inherited(arguments)},emit:function(e,f){var n,h,k=e.toLowerCase();var c=this._onCamelCase(e);var l=this.constructor._onMap||this.registerConnectEvents();c=(h=l&&l[k]&&l[k].method||A.isFunction(this[c])&&c)&&this[h];h&&l&&l[k]&&this._onObj2Arr(function(){n=Array.prototype.slice.call(arguments)},l[k].argKeys)(f);f=f||{};f.target||(f.target=this);if(c){var r=
n&&n.length?n:[f];r=c.apply(this,r)}this.inherited(arguments,[e,f]);return r},_onObj2Arr:function(e,f){if(f){var n=this;return function(h){var k,c=[],l=f.length;for(k=0;k<l;k++)c[k]=h[f[k]];e.apply(n,c)}}return e},_onArr2Obj:function(e,f){if(f){var n=this;return function(){var h,k={},c=arguments.length;for(h=0;h<c;h++)k[f[h]]=arguments[h];k.target||(k.target=n);e.call(n,k)}}return e},_hyphenLower:function(e){return e.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(f,n){return(n?"-":"")+f.toLowerCase()})},
_onCamelCase:function(e){return"on"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/\-([a-z])/g,function(f,n){return n.toUpperCase()})}});return d.Evented=D})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E,F,G,H,L,J){function S(){}var P=new g;P.resolve(!0);y=b("dijit._DialogBase"+(q("dojo-bidi")?"_NoBidi":""),[t,E,F,C],{templateString:J,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(K){this._set("draggable",K)},maxRatio:.9,
closable:!0,_setClosableAttr:function(K){this.closeButtonNode.style.display=K?"":"none";this._set("closable",K)},postMixInProperties:function(){var K=k.getLocalization("dijit","common");l.mixin(this,K);this.inherited(arguments)},postCreate:function(){n.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",l.hitch(this,"hide"),!0);a.after(this,"onCancel",l.hitch(this,"hide"),!0);r(this.closeButtonNode,
v.press,function(K){K.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&M.isTop(this)&&(this._getFocusItems(),x.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();x.focus(this._firstFocusItem)},_endDrag:function(){var K=f.position(this.domNode),X=B.getBox(this.ownerDocument);K.y=Math.min(Math.max(K.y,0),X.h-K.h);K.x=Math.min(Math.max(K.x,0),X.w-K.w);this._relativePosition=K;this._position()},_setup:function(){var K=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==q("ie")?z:w)(K,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",l.hitch(this,"_endDrag"),!0)):e.add(K,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":A.map(this["class"].split(/\s/),function(X){return X+"_underlay"}).join(" "),_onKeyDown:l.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!e.contains(this.ownerDocumentBody,"dojoMove")){var K=
this.domNode,X=B.getBox(this.ownerDocument),da=this._relativePosition,Y=f.position(K);n.set(K,{left:Math.floor(X.l+(da?Math.min(da.x,X.w-Y.w):(X.w-Y.w)/2))+"px",top:Math.floor(X.t+(da?Math.min(da.y,X.h-Y.h):(X.h-Y.h)/2))+"px"})}},_onKey:function(K){if(K.keyCode==c.TAB){this._getFocusItems();var X=K.target;this._firstFocusItem==this._lastFocusItem?(K.stopPropagation(),K.preventDefault()):X==this._firstFocusItem&&K.shiftKey?(x.focus(this._lastFocusItem),K.stopPropagation(),K.preventDefault()):X!=this._lastFocusItem||
K.shiftKey||(x.focus(this._firstFocusItem),K.stopPropagation(),K.preventDefault())}else this.closable&&K.keyCode==c.ESCAPE&&(this.onCancel(),K.stopPropagation(),K.preventDefault())},show:function(){if(this.open)return P.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),M.hide(this));var K=B.get(this.ownerDocument);this._modalconnects.push(r(K,"scroll",l.hitch(this,"resize",null)));this._modalconnects.push(r(this.domNode,
"keydown",l.hitch(this,"_onKey")));n.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new g(l.hitch(this,function(){X.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,S);K=this._fadeInDeferred.promise;var X=h.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:l.hitch(this,function(){M.show(this,this.underlayAttrs)}),onEnd:l.hitch(this,function(){this.autofocus&&M.isTop(this)&&(this._getFocusItems(),
x.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return K},hide:function(){if(!this._alreadyInitialized||!this.open)return P.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new g(l.hitch(this,function(){X.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,S);this._fadeOutDeferred.then(l.hitch(this,"onHide"));var K=this._fadeOutDeferred.promise;var X=h.fadeOut({node:this.domNode,duration:this.duration,
onEnd:l.hitch(this,function(){this.domNode.style.display="none";M.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var da;da=this._modalconnects.pop();)da.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return K},resize:function(K){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!K){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),A.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(aa){aa&&n.set(aa,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var X=B.getBox(this.ownerDocument);X.w*=this.maxRatio;X.h*=this.maxRatio;var da=f.position(this.domNode);this._shrunk=!1;da.w>=X.w&&(K={w:X.w},f.setMarginBox(this.domNode,K),da=f.position(this.domNode),
this._shrunk=!0);da.h>=X.h&&(K||(K={w:da.w}),K.h=X.h,this._shrunk=!0);K&&(K.w||(K.w=da.w),K.h||(K.h=da.h))}if(K){f.setMarginBox(this.domNode,K);X=[];this.titleBar&&X.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&X.push({domNode:this.actionBarNode,region:"bottom"});da={domNode:this.containerNode,region:"center"};X.push(da);var Y=L.marginBox2contentBox(this.domNode,K);L.layoutChildren(this.domNode,Y,X);this._singleChild?(X=L.marginBox2contentBox(this.containerNode,da),this._singleChild.resize({w:X.w,
h:X.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();q("touch")||K||this._position()}},_layoutChildren:function(){A.forEach(this.getChildren(),function(K){K.resize&&K.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var K;K=this._modalconnects.pop();)K.remove();M.hide(this);this.inherited(arguments)}});q("dojo-bidi")&&
(y=b("dijit._DialogBase",y,{_setTitleAttr:function(K){this._set("title",K);this.titleNode.innerHTML=K;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(K){this._created&&this.textDir!=K&&(this._set("textDir",K),this.set("title",this.title))}}));var Q=b("dijit.Dialog",[H,y],{});Q._DialogBase=y;var M=Q._DialogLevelManager={_beginZIndex:950,show:function(K,X){N[N.length-1].focus=x.curNode;var da=N[N.length-1].dialog?N[N.length-1].zIndex+2:Q._DialogLevelManager._beginZIndex;n.set(K.domNode,
"zIndex",da);G.show(X,da-1);N.push({dialog:K,underlayAttrs:X,zIndex:da})},hide:function(K){if(N[N.length-1].dialog==K){N.pop();var X=N[N.length-1];1==N.length?G.hide():G.show(X.underlayAttrs,X.zIndex-1);if(K.refocus&&(K=X.focus,!X.dialog||K&&d.isDescendant(K,X.dialog.domNode)||(X.dialog._getFocusItems(),K=X.dialog._firstFocusItem),K))try{K.focus()}catch(da){}}else X=A.indexOf(A.map(N,function(da){return da.dialog}),K),-1!=X&&N.splice(X,1)},isTop:function(K){return N[N.length-1].dialog==K}},N=Q._dialogStack=
[{dialog:null,focus:null,underlayAttrs:null}];x.watch("curNode",function(K,X,da){K=N[N.length-1].dialog;if(da&&K&&!K._fadeOutDeferred&&da.ownerDocument==K.ownerDocument){do if(da==K.domNode||e.contains(da,"dijitPopup"))return;while(da=da.parentNode);K.focus()}});q("dijit-legacy-requires")&&m(0,function(){D(["dijit/TooltipDialog"])});return Q})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(D,A){var a=A.prototype.onMove;return D("dojo.dnd.TimedMoveable",A,{timeout:40,
constructor:function(b,g){g||(g={});g.timeout&&"number"==typeof g.timeout&&0<=g.timeout&&(this.timeout=g.timeout)},onMoveStop:function(b){b._timer&&(clearTimeout(b._timer),a.call(this,b,b._leftTop));A.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,g){b._leftTop=g;if(!b._timer){var d=this;b._timer=setTimeout(function(){b._timer=null;a.call(d,b,b._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(D,A,a,b,g,d){return A("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(e){var f=[];D.forEach(e||this.getChildren(),function(n){"value"in n?f.push(n):f=f.concat(this._getDescendantFormWidgets(n.getChildren()))},this);return f},reset:function(){D.forEach(this._getDescendantFormWidgets(),function(e){e.reset&&e.reset()})},validate:function(){var e=!1;return D.every(D.map(this._getDescendantFormWidgets(),function(f){f._hasBeenBlurred=!0;var n=f.disabled||!f.validate||
f.validate();n||e||(d.scrollIntoView(f.containerNode||f.domNode),f.focus(),e=!0);return n}),function(f){return f})},setValues:function(e){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",e)},_setValueAttr:function(e){var f={};D.forEach(this._getDescendantFormWidgets(),function(c){c.name&&(f[c.name]||(f[c.name]=[])).push(c)});for(var n in f)if(f.hasOwnProperty(n)){var h=f[n],k=b.getObject(n,!1,e);void 0!==k&&(k=[].concat(k),
"boolean"==typeof h[0].checked?D.forEach(h,function(c){c.set("value",-1!=D.indexOf(k,c._get("value")))}):h[0].multiple?h[0].set("value",k):D.forEach(h,function(c,l){c.set("value",k[l])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var e={};D.forEach(this._getDescendantFormWidgets(),function(f){var n=f.name;if(n&&!f.disabled){var h=f.get("value");"boolean"==typeof f.checked?
/Radio/.test(f.declaredClass)?!1!==h?b.setObject(n,h,e):(h=b.getObject(n,!1,e),void 0===h&&b.setObject(n,null,e)):(f=b.getObject(n,!1,e),f||(f=[],b.setObject(n,f,e)),!1!==h&&f.push(h)):(f=b.getObject(n,!1,e),"undefined"!=typeof f?b.isArray(f)?f.push(h):b.setObject(n,[f,h],e):b.setObject(n,h,e))}});return e},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var e=D.map(this._descendants,function(f){return f.get("state")||""});return 0<=D.indexOf(e,"Error")?
"Error":0<=D.indexOf(e,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(e){this._descendants=this._getDescendantFormWidgets();D.forEach(this._descendants,function(f){f._started||f.startup()});e||this._onChildChange()},_onChildChange:function(e){e&&"state"!=e&&"disabled"!=e||this._set("state",this._getState());e&&"value"!=e&&"disabled"!=e&&"checked"!=e||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var e=this;this.own(g(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(f){f.target!=e.domNode&&e._onChildChange(f.type.replace("attrmodified-",""))}));this.watch("state",function(f,n,h){this.onValidStateChange(""==h)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(D,A){return D("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=A._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c){var l=D("dijit.DialogUnderlay",[f,n],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(r){b.set(this.node,"id",r+"_underlay");this._set("dialogId",r)},_setClassAttr:function(r){this.node.className="dijitDialogUnderlay "+r;this._set("class",r)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(d(this.domNode,"keydown",A.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var r=this.node.style,m=this.domNode.style;m.display="none";var q=e.getBox(this.ownerDocument);m.top=q.t+"px";m.left=q.l+"px";r.width=q.w+"px";r.height=q.h+"px";m.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new h(this.domNode);var r=e.get(this.ownerDocument);this._modalConnects=[k.on("resize",A.hitch(this,"layout")),d(r,"scroll",
A.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});l.show=function(r,m){var q=l._singleton;!q||q._destroyed?q=c._underlay=l._singleton=new l(r):r&&q.set(r);g.set(q.domNode,"zIndex",m);q.open||q.show()};l.hide=function(){var r=
l._singleton;r&&!r._destroyed&&r.hide()};return l})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q){return n("dijit.layout.ContentPane",[a,b,g],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:D._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(v,
B,w){var z=new w(v,B);return!z.href&&z._contentSetter&&z._contentSetter.parseDeferred&&!z._contentSetter.parseDeferred.isFulfilled()?z._contentSetter.parseDeferred.then(function(){return z}):z},create:function(v,B){if(!(v&&v.template||!B||"href"in v||"content"in v)){B=k.byId(B);for(var w=B.ownerDocument.createDocumentFragment();B.firstChild;)w.appendChild(B.firstChild);v=A.delegate(v,{content:w})}this.inherited(arguments,[v,B])},postMixInProperties:function(){this.inherited(arguments);var v=m.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=d.substitute(this.loadingMessage,v);this.errorMessage=d.substitute(this.errorMessage,v)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(v){v._started||v._destroyed||!A.isFunction(v.startup)||(v.startup(),v._started=!0)},this)},_startChildren:function(){f.forEach(this.getChildren(),
function(v){v._started||v._destroyed||!A.isFunction(v.startup)||(v.startup(),v._started=!0)});this._contentSetter&&f.forEach(this._contentSetter.parseResults,function(v){v._started||v._destroyed||!A.isFunction(v.startup)||(v.startup(),v._started=!0)},this)},setHref:function(v){D.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",v)},_setHrefAttr:function(v){this.cancel();this.onLoadDeferred=new h(A.hitch(this,"cancel"));this.onLoadDeferred.then(A.hitch(this,
"onLoad"));this._set("href",v);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(v){D.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",v)},_setContentAttr:function(v){this._set("href","");this.cancel();this.onLoadDeferred=new h(A.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(A.hitch(this,"onLoad"));this._setContent(v||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(v){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new h(A.hitch(this,"cancel"));this.onLoadDeferred.then(A.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var v=this,B={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};A.isObject(this.ioArgs)&&A.mixin(B,this.ioArgs);var w=this._xhrDfd=(this.ioMethod||r.get)(B),z;w.then(function(x){z=x;try{return v._isDownloaded=!0,v._setContent(x,!1)}catch(y){v._onError("Content",
y)}},function(x){w.canceled||v._onError("Download",x);delete v._xhrDfd;return x}).then(function(){v.onDownloadEnd();delete v._xhrDfd;return z});delete this._hrefChanged},_onLoadHandler:function(v){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(v)}catch(B){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(v){}},destroyDescendants:function(v){this.isLoaded&&this._onUnloadHandler();var B=this._contentSetter;f.forEach(this.getChildren(),function(w){w.destroyRecursive?
w.destroyRecursive(v):w.destroy&&w.destroy(v);w._destroyed=!0});B&&(f.forEach(B.parseResults,function(w){w._destroyed||(w.destroyRecursive?w.destroyRecursive(v):w.destroy&&w.destroy(v),w._destroyed=!0)}),delete B.parseResults);v||l.empty(this.containerNode);delete this._singleChild},_setContent:function(v,B){v=this.preprocessContent(v);this.destroyDescendants();var w=this._contentSetter;w&&w instanceof e._ContentSetter||(w=this._contentSetter=new e._ContentSetter({node:this.containerNode,_onError:A.hitch(this,
this._onError),onContentError:A.hitch(this,function(y){y=this.onContentError(y);try{this.containerNode.innerHTML=y}catch(u){}})}));var z=A.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!v.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});z=w.set(A.isObject(v)&&v.domNode?v.domNode:v,z);var x=this;return q(z&&z.then?z:w.parseDeferred,function(){delete x._contentSetterParams;
B||(x._started&&(x._startChildren(),x._scheduleLayout()),x._onLoadHandler(v))})},preprocessContent:function(v){return v},_onError:function(v,B,w){this.onLoadDeferred.reject(B);v=this["on"+v+"Error"].call(this,B);w||v&&this._setContent(v,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(D,A,a,b,g,d,e,f,n,h){return A("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var k=this.getParent();this._childOfLayoutWidget=k&&k.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(n.on("resize",d.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var k=[],c=!1;e("\x3e *",this.containerNode).some(function(l){var r=
f.byNode(l);r&&r.resize?k.push(r):!/script|link|style/i.test(l.nodeName)&&l.offsetHeight&&(c=!0)});this._singleChild=1!=k.length||c?null:k[0];a.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(k,c){this._resizeCalled=!0;this._scheduleLayout(k,c)},_scheduleLayout:function(k,c){this._isShown()?this._layout(k,c):(this._needLayout=!0,this._changeSize=k,this._resultSize=c)},_layout:function(k,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
k&&b.setMarginBox(this.domNode,k);var l=this.containerNode;if(l===this.domNode){var r=c||{};d.mixin(r,k||{});"h"in r&&"w"in r||(r=d.mixin(b.getMarginBox(l),r));this._contentBox=h.marginBox2contentBox(l,r)}else this._contentBox=b.getContentBox(l);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var k=this._contentBox||b.getContentBox(this.containerNode);this._singleChild.resize({w:k.w,h:k.h})}else{k=this.getChildren();for(var c,
l=0;c=k[l++];)c.resize&&c.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var k=this.domNode,c=this.domNode.parentNode;return"none"!=k.style.display&&"hidden"!=k.style.visibility&&!a.contains(k,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(D,A,a,b,g){function d(n){return n.substring(0,1).toUpperCase()+n.substring(1)}function e(n,h){var k=n.resize?n.resize(h):a.setMarginBox(n.domNode,h);k?g.mixin(n,k):(g.mixin(n,a.getMarginBox(n.domNode)),g.mixin(n,h))}var f={marginBox2contentBox:function(n,h){var k=b.getComputedStyle(n),c=a.getMarginExtents(n,k),l=a.getPadBorderExtents(n,k);return{l:b.toPixelValue(n,k.paddingLeft),t:b.toPixelValue(n,k.paddingTop),w:h.w-
(c.w+l.w),h:h.h-(c.h+l.h)}},layoutChildren:function(n,h,k,c,l){h=g.mixin({},h);A.add(n,"dijitLayoutContainer");k=D.filter(k,function(r){return"center"!=r.region&&"client"!=r.layoutAlign}).concat(D.filter(k,function(r){return"center"==r.region||"client"==r.layoutAlign}));D.forEach(k,function(r){var m=r.domNode,q=r.region||r.layoutAlign;if(!q)throw Error("No region setting for "+r.id);var v=m.style;v.left=h.l+"px";v.top=h.t+"px";v.position="absolute";A.add(m,"dijitAlign"+d(q));m={};c&&c==r.id&&(m["top"==
r.region||"bottom"==r.region?"h":"w"]=l);"leading"==q&&(q=r.isLeftToRight()?"left":"right");"trailing"==q&&(q=r.isLeftToRight()?"right":"left");"top"==q||"bottom"==q?(m.w=h.w,e(r,m),h.h-=r.h,"top"==q?h.t+=r.h:v.top=h.t+h.h+"px"):"left"==q||"right"==q?(m.h=h.h,e(r,m),h.w-=r.w,"left"==q?h.l+=r.w:v.left=h.l+h.w+"px"):"client"!=q&&"center"!=q||e(r,h)})}};g.setObject("dijit.layout.utils",f);return f})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(D,A,a,b,g,d,e){var f=0,n={_secureForInnerHtml:function(h){return h.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:d.empty,_setNodeContent:function(h,k){d.empty(h);if(k)if("number"==typeof k&&(k=k.toString()),"string"==typeof k&&(k=d.toDom(k,h.ownerDocument)),!k.nodeType&&A.isArrayLike(k))for(var c=k.length,l=0;l<k.length;l=c==k.length?l+1:0)d.place(k[l],h,"last");else d.place(k,h,"last");return h},_ContentSetter:b("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:D._scopeName,startup:!0,constructor:function(h,k){A.mixin(this,h||{});k=this.node=g.byId(this.node||k);this.id||(this.id=["Setter",k?k.id||k.tagName:"",f++].join("_"))},set:function(h,k){void 0!==h&&(this.content=h);"number"==typeof h&&(h=h.toString());k&&this._mixin(k);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var h=this.node;if(!h)throw Error(this.declaredClass+
": setContent given no node");try{h=n._setNodeContent(h,this.content)}catch(c){var k=this.onContentError(c);try{h.innerHTML=k}catch(l){}}this.node=h},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(h){h.destroy&&h.destroy()}),delete this.parseResults);d.empty(this.node)},onBegin:function(){var h=this.content;if(A.isString(h)&&(this.cleanContent&&
(h=n._secureForInnerHtml(h)),this.extractContent)){var k=h.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);k&&(h=k[1])}this.empty();this.content=h;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(h){return"Error occurred setting content: "+h},onExecError:function(h){return"Error occurred executing scripts: "+h},_mixin:function(h){var k=
{},c;for(c in h)c in k||(this[c]=h[c])},_parse:function(){var h=this.node;try{var k={};a.forEach(["dir","lang","textDir"],function(l){this[l]&&(k[l]=this[l])},this);var c=this;this.parseDeferred=e.parse({rootNode:h,noStart:!this.startup,inherited:k,scope:this.parserScope}).then(function(l){return c.parseResults=l},function(l){c._onError("Content",l,"Error parsing in _ContentSetter#"+c.id)})}catch(l){this._onError("Content",l,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(h,k,c){h=
this["on"+h+"Error"].call(this,k);c||h&&n._setNodeContent(this.node,h,!0)}}),set:function(h,k,c){void 0==k&&(k="");"number"==typeof k&&(k=k.toString());return c?(new n._ContentSetter(A.mixin(c,{content:k,node:h}))).set():n._setNodeContent(h,k,!0)}};A.setObject("dojo.html",n);return n})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q){function v(y){return eval("("+y+")")}function B(y){var u=y._nameCaseMap,t=y.prototype;if(!u||u._extendCnt<z){u=y._nameCaseMap={};for(var C in t)"_"!==C.charAt(0)&&(u[C.toLowerCase()]=C);u._extendCnt=z}return u}function w(y,u){u||(u=D);var t=u._dojoParserCtorMap||(u._dojoParserCtorMap={}),C=y.join();if(!t[C]){for(var E=[],F=0,G=y.length;F<G;F++){var H=y[F];E[E.length]=t[H]=t[H]||a.getObject(H)||~H.indexOf("/")&&u(H)}F=E.shift();t[C]=E.length?F.createSubclass?
F.createSubclass(E):F.extend.apply(F,E):F}return t[C]}new Date("X");var z=0;n.after(a,"extend",function(){z++},!0);var x={_clearCache:function(){z++;_ctorMap={}},_functionFromScript:function(y,u){var t="",C="",E=y.getAttribute(u+"args")||y.getAttribute("args"),F=y.getAttribute("with");E=(E||"").split(/\s*,\s*/);F&&F.length&&b.forEach(F.split(/\s*,\s*/),function(G){t+="with("+G+"){";C+="}"});return new Function(E,t+y.innerHTML+C)},instantiate:function(y,u,t){u=u||{};t=t||{};var C=(t.scope||A._scopeName)+
"Type",E="data-"+(t.scope||A._scopeName)+"-",F=E+"type",G=E+"mixins",H=[];b.forEach(y,function(L){var J=C in u?u[C]:L.getAttribute(F)||L.getAttribute(C);if(J){var S=L.getAttribute(G);J=S?[J].concat(S.split(/\s*,\s*/)):[J];H.push({node:L,types:J})}});return this._instantiate(H,u,t)},_instantiate:function(y,u,t,C){function E(F){u._started||t.noStart||b.forEach(F,function(G){"function"!==typeof G.startup||G._started||G.startup()});return F}y=b.map(y,function(F){var G=F.ctor||w(F.types,t.contextRequire);
if(!G)throw Error("Unable to resolve constructor for: '"+F.types.join()+"'");return this.construct(G,F.node,u,t,F.scripts,F.inherited)},this);return C?h(y).then(E):E(y)},construct:function(y,u,t,C,E,F){function G(T){N&&a.setObject(N,T);for(Q=0;Q<Y.length;Q++)n[Y[Q].advice||"after"](T,Y[Q].method,a.hitch(T,Y[Q].func),!0);for(Q=0;Q<aa.length;Q++)aa[Q].call(T);for(Q=0;Q<ca.length;Q++)T.watch(ca[Q].prop,ca[Q].func);for(Q=0;Q<I.length;Q++)m(T,I[Q].event,I[Q].func);return T}var H=y&&y.prototype;C=C||{};
var L={};C.defaults&&a.mixin(L,C.defaults);F&&a.mixin(L,F);if(l("dom-attributes-explicit"))var J=u.attributes;else l("dom-attributes-specified-flag")?J=b.filter(u.attributes,function(T){return T.specified}):(F=(/^input$|^img$/i.test(u.nodeName)?u:u.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),J=b.map(F.split(/\s+/),function(T){var ba=T.toLowerCase();return{name:T,value:"LI"==u.nodeName&&"value"==T||"enctype"==ba?u.getAttribute(ba):
u.getAttributeNode(ba).value}}));var S=C.scope||A._scopeName;F="data-"+S+"-";var P={};"dojo"!==S&&(P[F+"props"]="data-dojo-props",P[F+"type"]="data-dojo-type",P[F+"mixins"]="data-dojo-mixins",P[S+"type"]="dojotype",P[F+"id"]="data-dojo-id");var Q=0,M;S=[];for(var N,K;M=J[Q++];){var X=M.name,da=X.toLowerCase();M=M.value;switch(P[da]||da){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":K=M;break;case "data-dojo-id":case "jsid":N=M;break;case "data-dojo-attach-point":case "dojoattachpoint":L.dojoAttachPoint=
M;break;case "data-dojo-attach-event":case "dojoattachevent":L.dojoAttachEvent=M;break;case "class":L["class"]=u.className;break;case "style":L.style=u.style&&u.style.cssText;break;default:if(X in H||(X=B(y)[da]||X),X in H)switch(typeof H[X]){case "string":L[X]=M;break;case "number":L[X]=M.length?Number(M):NaN;break;case "boolean":L[X]="false"!=M.toLowerCase();break;case "function":""===M||-1!=M.search(/[^\w\.]+/i)?L[X]=new Function(M):L[X]=a.getObject(M,!1)||new Function(M);S.push(X);break;default:da=
H[X],L[X]=da&&"length"in da?M?M.split(/\s*,\s*/):[]:da instanceof Date?""==M?new Date(""):"now"==M?new Date:k.fromISOString(M):da instanceof f?A.baseUrl+M:v(M)}else L[X]=M}}for(J=0;J<S.length;J++)P=S[J].toLowerCase(),u.removeAttribute(P),u[P]=null;if(K)try{K=v.call(C.propsThis,"{"+K+"}"),a.mixin(L,K)}catch(T){throw Error(T.toString()+" in data-dojo-props\x3d'"+K+"'");}a.mixin(L,t);E||(E=y&&(y._noScript||H._noScript)?[]:r("\x3e script[type^\x3d'dojo/']",u));var Y=[],aa=[],ca=[],I=[];if(E)for(Q=0;Q<
E.length;Q++)P=E[Q],u.removeChild(P),t=P.getAttribute(F+"event")||P.getAttribute("event"),C=P.getAttribute(F+"prop"),K=P.getAttribute(F+"method"),S=P.getAttribute(F+"advice"),J=P.getAttribute("type"),P=this._functionFromScript(P,F),t?"dojo/connect"==J?Y.push({method:t,func:P}):"dojo/on"==J?I.push({event:t,func:P}):L[t]=P:"dojo/aspect"==J?Y.push({method:K,advice:S,func:P}):"dojo/watch"==J?ca.push({prop:C,func:P}):aa.push(P);y=(E=y.markupFactory||H.markupFactory)?E(L,u,y):new y(L,u);return y.then?y.then(G):
G(y)},scan:function(y,u){function t(Y){if(!Y.inherited){Y.inherited={};var aa=Y.node,ca=t(Y.parent);aa={dir:aa.getAttribute("dir")||ca.dir,lang:aa.getAttribute("lang")||ca.lang,textDir:aa.getAttribute(J)||ca.textDir};for(var I in aa)aa[I]&&(Y.inherited[I]=aa[I])}return Y.inherited}var C=[],E=[],F={},G=(u.scope||A._scopeName)+"Type",H="data-"+(u.scope||A._scopeName)+"-",L=H+"type",J=H+"textdir";H+="mixins";var S=y.firstChild,P=u.inherited;if(!P){P=function I(aa,ca){return aa.getAttribute&&aa.getAttribute(ca)||
aa.parentNode&&I(aa.parentNode,ca)};P={dir:P(y,"dir"),lang:P(y,"lang"),textDir:P(y,J)};for(var Q in P)P[Q]||delete P[Q]}P={inherited:P};for(var M,N;;)if(S)if(1!=S.nodeType)S=S.nextSibling;else if(M&&"script"==S.nodeName.toLowerCase())(K=S.getAttribute("type"))&&/^dojo\/\w/i.test(K)&&M.push(S),S=S.nextSibling;else if(N)S=S.nextSibling;else{var K=S.getAttribute(L)||S.getAttribute(G);Q=S.firstChild;if(K||Q&&(3!=Q.nodeType||Q.nextSibling)){N=null;if(K){var X=S.getAttribute(H);M=X?[K].concat(X.split(/\s*,\s*/)):
[K];try{N=w(M,u.contextRequire)}catch(Y){}N||b.forEach(M,function(Y){~Y.indexOf("/")&&!F[Y]&&(F[Y]=!0,E[E.length]=Y)});X=N&&!N.prototype._noScript?[]:null;P={types:M,ctor:N,parent:P,node:S,scripts:X};P.inherited=t(P);C.push(P)}else P={node:S,scripts:M,parent:P};M=X;N=S.stopParser||N&&N.prototype.stopParser&&!u.template;S=Q}else S=S.nextSibling}else{if(!P||!P.node)break;S=P.node.nextSibling;N=!1;P=P.parent;M=P.scripts}var da=new c;E.length?(u.contextRequire||D)(E,function(){da.resolve(b.filter(C,function(Y){if(!Y.ctor)try{Y.ctor=
w(Y.types,u.contextRequire)}catch(I){}for(var aa=Y.parent;aa&&!aa.types;)aa=aa.parent;var ca=Y.ctor&&Y.ctor.prototype;Y.instantiateChildren=!(ca&&ca.stopParser&&!u.template);Y.instantiate=!aa||aa.instantiate&&aa.instantiateChildren;return Y.instantiate}))}):da.resolve(C);return da.promise},_require:function(y,u){var t=v("{"+y.innerHTML+"}"),C=[],E=[],F=new c,G=u&&u.contextRequire||D,H;for(H in t)C.push(H),E.push(t[H]);G(E,function(){for(var L=0;L<C.length;L++)a.setObject(C[L],arguments[L]);F.resolve(arguments)});
return F.promise},_scanAmd:function(y,u){var t=new c,C=t.promise;t.resolve(!0);var E=this;r("script[type\x3d'dojo/require']",y).forEach(function(F){C=C.then(function(){return E._require(F,u)});F.parentNode.removeChild(F)});return C},parse:function(y,u){!y||"string"==typeof y||"nodeType"in y||(u=y,y=u.rootNode);var t=y?d.byId(y):e.body();u=u||{};var C=u.template?{template:!0}:{},E=[],F=this,G=this._scanAmd(t,u).then(function(){return F.scan(t,u)}).then(function(H){return F._instantiate(H,C,u,!0)}).then(function(H){return E=
E.concat(H)}).otherwise(function(H){throw H;});a.mixin(E,G);return E}};A.parser=x;g.parseOnLoad&&q(100,x,"parse");return x})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(D,A,a,b){var g=D.some;return function(d){var e,f;A.isArray(d)?f=d:d&&"object"===typeof d&&(e=d);var n=[];if(e){f=[];for(var h in e)Object.hasOwnProperty.call(e,h)&&(n.push(h),f.push(e[h]));var k={}}else f&&(k=[]);if(!f||!f.length)return(new a).resolve(k);var c=new a;c.promise.always(function(){k=
n=null});var l=f.length;g(f,function(r,m){e||n.push(m);b(r,function(q){c.isFulfilled()||(k[n[m]]=q,0===--l&&c.resolve(k))},c.reject);return c.isFulfilled()});return c.promise}})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(D,A,a,b,g){return a("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,contextRequire:null,_beforeFillContent:function(){if(/dojoType|data-dojo-type/i.test(this.domNode.innerHTML)){var d=
this.domNode;this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0);g.parse(d,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(b.hitch(this,function(e){this._startupWidgets=e;for(var f=0;f<e.length;f++)this._processTemplateNode(e[f],function(n,h){return n[h]},function(n,h,k){return h in n?n.connect(n,h,k):n.on(h,k,!0)});this.containerNode&&
this.containerNode.stopParser&&delete this.containerNode.stopParser}));if(!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}},_processTemplateNode:function(d,e,f){return e(d,"dojoType")||e(d,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){D.forEach(this._startupWidgets,function(d){d&&!d._started&&
d.startup&&d.startup()});this._startupWidgets=null;this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/dialog/SubscriptionStatusDlg":function(){define(["dojo","dijit","dojox","dojo/require!dijit/Dialog,dijit/_Widget,dijit/_Templated,dijit/form/Button,dojo/cookie"],function(D,A,a){D.provide("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg");D.require("dijit.Dialog");D.require("dijit._Widget");D.require("dijit._Templated");D.require("dijit.form.Button");D.require("dojo.cookie");D.declare("arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg",
[A._Widget,A._Templated],{widgetsInTemplate:!0,templateString:'\x3cdiv class\x3d"widgetContent" \x3e\r\n  \x3cdiv dojotype\x3d"dijit.Dialog" id\x3d"subscription-status-dialog" dojoAttachPoint\x3d"subscriptionStatusDlg" title\x3d"" execute\x3d""\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"subscriptionStateDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"actionNeededDiv"\x3e\x3c/div\x3e\r\n    \x3cbr/\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing"\x3e\x3cbutton dojoAttachPoint\x3d"closeButton" dojoAttachEvent\x3d"onClick:onOkClick" class\x3d"jevent primary" dojoType\x3d"dijit.form.Button"\x3e${i18n.ok}\x3c/button\x3e\x3c/div\x3e\r\n    \x3cbr style\x3d"clear:both;"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
statics:{_instance:null,getInstance:function(){null==this._instance&&(this._instance=new arcgisonline.sharing.dijit.dialog.SubscriptionStatusDlg);return this._instance}},subscriptionStatusDlg:null,subscriptionStateDiv:null,actionNeededDiv:null,closeButton:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this.i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").subscriptionStatusDlg)},postCreate:function(){this.loadConnections()},
show:function(b){this.clear();this.setSubscriptionState(b);this.setActionMessage(b);this.subscriptionStatusDlg.show()},showOther:function(b){this.clear();this.setOtherSubscriptionStatus(b);D.style(this.actionNeededDiv,"display","none");this.subscriptionStatusDlg.show()},setSubscriptionState:function(b){if(b&&b.state){var g=this.i18n.subscriptionStatusExpiredMsg;b=b.state.toLowerCase();"expired"===b?g=this.i18n.subscriptionStatusExpiredMsg:"cancelled"===b?g=this.i18n.subscriptionStatusCancelledMsg:
"suspended"===b?g=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://doc.arcgis.com/en/arcgis-online/administer/view-status.htm' target\x3d'_blank'\x3e",linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.subscriptionStatusSuspendedMsg):"restricted"===b&&(g=this.i18n.subscriptionStatusRestrictedMsgNoLink);D.attr(this.subscriptionStateDiv,"innerHTML",g)}},setOtherSubscriptionStatus:function(b){this.subscriptionStatusDlg.set("title",this.i18n.errorTitle);var g=this.i18n.expiredStatus;
b&&("SB_0005"===b?g=this.i18n.suspendedStatus:"SB_0006"===b?g=this.i18n.cancelledStatus:"SB_0007"===b&&(g=this.i18n.expiredStatus));b=esri.substitute({subscriptionState:g},this.i18n.otherSubscriptionStatusMsg);D.attr(this.subscriptionStateDiv,"innerHTML",b)},setActionMessage:function(b){var g=this.getUser();g&&g.role&&("org_admin"===g.role||"account_admin"===g.role)?((b.type||"").toLowerCase(),b.state.toLowerCase(),b=esri.substitute({linkStart:"\x3cspan class\x3d'esriItemLinks'\x3e\x3ca href\x3d'https://www.esri.com/en-us/contact#c\x3dus\x26t\x3d3' target\x3d'_blank'\x3e",
linkEnd:"\x3c/a\x3e\x3c/span\x3e"},this.i18n.contactCustomerService),D.attr(this.actionNeededDiv,"innerHTML",b)):D.attr(this.actionNeededDiv,"innerHTML",this.i18n.nonAdminActionMsg)},loadConnections:function(){D.query(".jevent").connect("onclick",function(b){b.preventDefault()});D.connect(this.subscriptionStatusDlg,"onCancel",D.hitch(this,function(b){this.onCancel(b)}));D.connect(this.subscriptionStatusDlg,"hide",D.hitch(this,function(b){this.onHide(b)}))},clear:function(){this.subscriptionStatusDlg.set("title",
this.i18n.subscriptionStatusTitle);D.attr(this.subscriptionStateDiv,"innerHTML","");D.attr(this.actionNeededDiv,"innerHTML","");D.style(this.actionNeededDiv,"display","")},hide:function(){this.subscriptionStatusDlg.hide()},onOkClick:function(b){A.byId("subscription-status-dialog").hide()},getUser:function(){var b=D.cookie("esri_auth");return esriGeowConfig.userInfo||JSON.parse(b)||null},onCancel:function(){},onHide:function(){}})})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),
function(D,A,a,b,g,d,e){d.extend(D,{waiRole:"",waiState:""});return g("dijit._Templated",[A,a],{constructor:function(){e.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(f,n){var h=this.inherited(arguments),k=n(f,"waiRole");k&&f.setAttribute("role",k);(k=n(f,"waiState"))&&b.forEach(k.split(/\s*,\s*/),function(c){-1!=c.indexOf("-")&&(c=c.split("-"),f.setAttribute("aria-"+c[0],c[1]))});
return h}})})},"arcgisonline/sharing/dijit/dialog/ConfirmDialog":function(){define(["dojo/_base/declare","dijit/Dialog","./_ConfirmDialogMixin"],function(D,A,a){return D("arcgisonline/sharing/dijit/dialog/ConfirmDialog",[A,a],{})})},"arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/on dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/query dojo/topic dojo/keys dijit/_WidgetsInTemplateMixin dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/actionBar.html dijit/form/Button".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){return D("arcgisonline/sharing/dijit/dialog/_ConfirmDialogMixin",c,{actionBarTemplate:r,buttonOkLabel:l.common.ok,_setButtonOkLabelAttr:function(m){this.okButton.set("label",m)},buttonCancelLabel:l.common.cancel,_setButtonCancelLabelAttr:function(m){this.cancelButton.set("label",m)},busyMessage:l.common.pleaseWait,_setBusyMessageAttr:{node:"busyMessageSpan",attribute:"innerHTML"},_setShowCancelAttr:function(m){e.set(this.cancelButton.domNode,"display",m?"":"none")},
_setHelpLinkInfoAttr:function(m){var q=n(".dijitDialogTitle",this.domNode).shift();d.create("a",{className:"icon-ui-question margin-left-half font-size--1",title:m.title,href:m.url||"#",target:"_blank"},q)},onOk:function(){},onCancel:function(){},onHide:function(){},show:function(m){var q=new a;m&&m.message&&(this._messageNode||(this._messageNode=d.create("p",{innerHTML:m,"class":"esriMessageNode trailer-0"},n(".dijitDialogPaneContent",this.domNode)[0],"first")),this.set("title",m.title||""),g.set(this._messageNode,
"innerHTML",m.message||""));this.closeButtonNode&&(this.closeButtonNode.tabIndex=0);this.own(b(this,"hide",A.hitch(this,function(v){q.isResolved()||q.resolve("onCancel");this.destroyRecursive()})),b(this.okButton,"click",A.hitch(this,function(v){v.preventDefault();h.publish("/dlg/onOk");q.isResolved()||q.resolve("onOk");this.onOk()})),b(this.cancelButton,"click",A.hitch(this,function(v){v.preventDefault();h.publish("/dlg/onCancel");q.isResolved()||q.resolve("onCancel");this.onCancel();this.hide()})),
b(this.domNode,"keypress",A.hitch(this,function(v){if(v&&v.keyCode===k.ENTER)this.okButton.onClick(v)})),h.subscribe("/dlg/busyMessage",A.hitch(this,function(v){this.set("busyMessage",v)})),h.subscribe("/esri/disable",A.hitch(this,function(v,B){this.set("busyMessage",B||this.busyMessage||l.common.pleaseWait);this.set("disabled",v)})));this.inherited(arguments);return q},_setDisabledAttr:function(m){n(".dijitButton",this.actionBarNode).map(dijit.byNode).forEach(function(q){q.set("disabled",m)});dojo[m?
"removeClass":"addClass"](this.busyMessageSpan,"hide")}})})},"arcgisonline/pages/utils/mapViewer":function(){define(["require","exports","tslib","../../esriGeowConfig","./subscription"],function(D,A,a,b,g){function d(c){return-1<[k.Modern,k.Classic].indexOf(c)}function e(c,l){var r=(new Date("April 13, 2021")).getTime();return l?!1:c>=r}function f(c){var l,r;if(c.isPortal)return c.mapViewer||k.Classic;if(d(c.mapViewer))return c.mapViewer;if(c.subscriptionInfo){var m=e(c.created,c.isPortal);return g.isTrialSubscription(null===
(l=c.subscriptionInfo)||void 0===l?void 0:l.type,c.isPortal)?k.Classic:g.isDeveloperSubscription(null===(r=c.subscriptionInfo)||void 0===r?void 0:r.type,c.isPortal)||m?k.Modern:k.Classic}}function n(c){var l;if(c.isSignedIn){var r=null===(l=c.properties)||void 0===l?void 0:l.mapViewer;if(d(r))return r;if(!c.isViewingOrg)return k.Classic}else if(!c.isViewingOrg)return k.Modern}function h(c){var l,r,m,q,v=!!b["default"].self,B=!(!b["default"].userInfo||!b["default"].userInfo.username&&!b["default"].userInfo.email);
c=n({isSignedIn:B,isViewingOrg:v&&!!b["default"].self.id,properties:c||b["default"].userProperties});var w=null===(r=null===(l=b["default"].self)||void 0===l?void 0:l.portalProperties)||void 0===r?void 0:r.mapViewer;l=b["default"].self.id&&f({mapViewer:w,created:null===(m=b["default"].self)||void 0===m?void 0:m.created,subscriptionInfo:v&&b["default"].self.subscriptionInfo,isPortal:null===(q=b["default"].self)||void 0===q?void 0:q.isPortal});return c||l||(B?k.Classic:k.Modern)}Object.defineProperty(A,
"__esModule",{value:!0});A.determineMapViewerSetting=A.determineUserMapViewer=A.determineOrgMapViewer=A.isOrgPastMapViewerCutOffDate=A.MapViewerType=void 0;b=a.__importDefault(b);var k;(function(c){c.Modern="modern";c.Classic="classic"})(k=A.MapViewerType||(A.MapViewerType={}));A.isOrgPastMapViewerCutOffDate=e;A.determineOrgMapViewer=f;A.determineUserMapViewer=n;A.determineMapViewerSetting=h;A["default"]={MapViewerType:k,isValidMapViewerType:d,isOrgPastMapViewerCutOffDate:e,determineOrgMapViewer:f,
determineUserMapViewer:n,determineMapViewerSetting:h}})},"arcgisonline/pages/utils/subscription":function(){define(["require","exports"],function(D,A){function a(d,e){return e?!1:-1<[A.SubscriptionTypes.TrialDeveloper,A.SubscriptionTypes.DeveloperSubscription,A.SubscriptionTypes.Developer].indexOf(null===d||void 0===d?void 0:d.toLowerCase())}function b(d,e){return e?!1:-1<[A.SubscriptionTypes.Trial,A.SubscriptionTypes.TrialPress].indexOf(d.toLowerCase())}function g(d,e){return e?!1:A.SubscriptionTypes.PersonalUse.toLowerCase()===
d.toLowerCase()}Object.defineProperty(A,"__esModule",{value:!0});A.isPersonalUse=A.isTrialSubscription=A.isDeveloperSubscription=A.SubscriptionTypes=void 0;A.SubscriptionTypes={Developer:"developer",DeveloperSubscription:"developer subscription",PersonalUse:"Personal Use",Trial:"trial",TrialDeveloper:"trial developer",TrialPress:"trial press"};A.isDeveloperSubscription=a;A.isTrialSubscription=b;A.isPersonalUse=g;A["default"]={isDeveloperSubscription:a,isPersonalUse:g,isTrialSubscription:b}})},"arcgisonline/pages/utils/storage":function(){define(["require",
"exports","tslib","./strings"],function(D,A,a,b){b=a.__importDefault(b);return function(){function g(){}g.setCookie=function(d,e,f,n){this.writeCookie(d,n?JSON.stringify(e):e,f)};g.getCookie=function(d,e){var f=this.readCookie(d);return f&&e?JSON.parse(f):f};g.setLocalStorageItem=function(d,e,f){window.localStorage.setItem(d,f?JSON.stringify(e):e)};g.getLocalStorageItem=function(d,e){var f=window.localStorage.getItem(d);return f&&e?JSON.parse(f):f};g.removeLocalStorageItem=function(d){window.localStorage.removeItem(d)};
g.setSessionStorageItem=function(d,e,f){window.sessionStorage.setItem(d,f?JSON.stringify(e):e)};g.getSessionStorageItem=function(d,e){var f=window.sessionStorage.getItem(d);return f&&e?JSON.parse(f):f};g.removeSessionStorageItem=function(d){window.sessionStorage.removeItem(d)};g.readCookie=function(d){var e=document.cookie;d=new RegExp("(?:^|; )"+b["default"].escapeRegExp(d)+"\x3d([^;]*)");return(e=e.match(d))?decodeURIComponent(e[1]):void 0};g.writeCookie=function(d,e,f){f=f||{};var n=null===f||
void 0===f?void 0:f.expires;if("number"===typeof n){var h=new Date;n*=864E5;h.setTime(Date.now()+n);n=f.expires=h}"string"!==typeof n&&(null===n||void 0===n?0:n.toUTCString)&&(f.expires=n.toUTCString());d=d+"\x3d"+encodeURIComponent(e);for(var k in f)d+="; "+k,e=f[k],!0!==e&&(d+="\x3d"+e);document.cookie=d};return g}()})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(D,A,a,b){D=new D;A.id=b.safeMixin(D,a);return A.id})},
"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q){A=A([m],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(v){g.mixin(this,
v);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(v,B,w){this._nls||(this._nls=q.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var z=this._loginDialog,x=w&&w.error,y=w&&w.token,u=new b(function(){z.onCancel()});if(z.open)return v=Error("BUSY"),v.name="identity-manager:busy",v.code="IdentityManager.1",v.log=!!a.isDebug,u.errback(v),u;l.hide(z.errMsg_);x&&403==x.code&&y&&(e.set(z.errMsg_,"innerHTML",this._nls.forbidden),
l.show(z.errMsg_));z.dfd_=u;z.serverInfo_=B;z.resUrl_=v;z.admin_=w&&w.isAdmin;e.set(z.resLink_,{title:v,innerHTML:"("+(this.getResourceName(v)||this._nls.lblItem)+")"});e.set(z.serverLink_,{title:B.server,innerHTML:(-1!==B.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":B.server)+" "});z.txtPwd_.set("value","");z.show();return u},_createLoginDialog:function(){var v=this._nls,B=c.substitute(v,this._dialogContent);B=c.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},B);var w=new h({title:v.title,content:B,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(z){z.charOrCode===f.ENTER&&this.execute_()},execute_:function(){var z=this.txtUser_.get("value"),x=this.txtPwd_.get("value"),y=this.dfd_,u=this;if(this.form_.validate()&&z&&x){this.btnSubmit_.set("label",v.lblSigning);var t=k.id.findCredential(u.resUrl_,z),C=function(E){u.btnSubmit_.set("label",
v.lblOk);u.btnSubmit_.set("disabled",!1);l.hide(u.errMsg_);u.hide();h._DialogLevelManager.hide(u);var F=u.serverInfo_;u.dfd_=u.serverInfo_=u.generateDfd_=u.resUrl_=null;var G=t;if(E){var H=E.token;var L=c.isDefined(E.expires)?Number(E.expires):null;var J=!!E.ssl;G?(G.userId=z,G.token=H,G.expires=L,G.validity=E.validity,G.ssl=J,G.creationTime=(new Date).getTime()):G=new r({userId:z,server:F.server,token:H,expires:L,ssl:J,isAdmin:u.admin_,validity:E.validity})}y.callback(G)};t&&!t._enqueued?C():(u.btnSubmit_.set("disabled",
!0),u.generateDfd_=k.id.generateToken(this.serverInfo_,{username:z,password:x},{isAdmin:this.admin_}).addCallback(C).addErrback(function(E){u.btnSubmit_.set("disabled",!1);u.generateDfd_=null;u.btnSubmit_.set("label",v.lblOk);e.set(u.errMsg_,"innerHTML",E&&E.code?v.invalidUser:v.noAuthService);l.show(u.errMsg_)}))}},cancel_:function(){w.generateDfd_&&w.generateDfd_.cancel();var z=w.dfd_,x=w.resUrl_,y=w.serverInfo_;w.btnSubmit_.set("disabled",!1);w.dfd_=w.serverInfo_=w.generateDfd_=w.resUrl_=null;
l.hide(w.errMsg_);h._DialogLevelManager.hide(w);w.esriIdMgr_.onDialogCancel({resourceUrl:x,serverInfo:y});x=Error("ABORTED");x.name="identity-manager:user-aborted";x.code="IdentityManager.2";x.log=!!a.isDebug;z.errback(x)}});B=w.domNode;w.form_=n.byNode(D.query(".esriIdForm",B)[0]);w.txtUser_=n.byNode(D.query(".esriIdUser",B)[0]);w.txtPwd_=n.byNode(D.query(".esriIdPwd",B)[0]);w.btnSubmit_=n.byNode(D.query(".esriIdSubmit",B)[0]);w.btnCancel_=n.byNode(D.query(".esriIdCancel",B)[0]);w.resLink_=D.query(".resLink",
B)[0];w.serverLink_=D.query(".serverLink",B)[0];w.errMsg_=D.query(".esriErrorMsg",B)[0];w.connect(w.txtUser_,"onKeyPress",w.keypressed_);w.connect(w.txtPwd_,"onKeyPress",w.keypressed_);w.connect(w.btnSubmit_,"onClick",w.execute_);w.connect(w.btnCancel_,"onClick",w.onCancel);w.connect(w,"onCancel",w.cancel_);return w}});return k.IdentityManagerDialog=k.IdentityManager=A})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(D,A,a,b){D=D(b.Credential,
{});return a.Credential=D})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w){var z={},x=function(E){var F=(new d(E.owningSystemUrl)).host;E=(new d(E.server)).host;var G=/.+\.arcgis\.com$/i;
return G.test(F)&&G.test(E)},y=function(E,F){return!!(x(E)&&F&&b.some(F,function(G){return G.test(E.server)}))},u=null,t=null;try{u=window.localStorage,t=window.sessionStorage}catch(E){}e=D(v,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthHash();n(window,"pageshow",a.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,
defaultTokenValidity:60,tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:r.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,
customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(E){var F=this.serverInfos;F?(E=b.filter(E,function(G){return!this.findServerInfo(G.server)},this),this.serverInfos=F.concat(E)):
this.serverInfos=E;b.forEach(E,function(G){G.owningSystemUrl&&this._portals.push(G.owningSystemUrl);if(G.hasPortal){this._portals.push(G.server);var H=k.defaults.io.corsEnabledServers,L=this._getOrigin(G.tokenServiceUrl);r.canUseXhr(G.server)||H.push(G.server.replace(/^https?:\/\//i,""));r.canUseXhr(L)||H.push(L.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(E){var F=this.oAuthInfos;F?(b.forEach(E,function(G){(G=this.findOAuthInfo(G.portalUrl))&&F.splice(F.indexOf(G),1)},this),
this.oAuthInfos=F.concat(E)):this.oAuthInfos=E},registerToken:function(E){E=c.mixin({},E);var F=this._sanitizeUrl(E.server),G=this.findServerInfo(F),H=!0,L;G||(G=new l,G.server=this._getServerInstanceRoot(F),G.tokenServiceUrl=this._getTokenSvcUrl(F),G.hasPortal=!0,this.registerServers([G]));(L=this.findCredential(F,E.userId))?(delete E.server,a.mixin(L,E),H=!1):(L=new C({userId:E.userId,server:G.server,token:E.token,expires:E.expires,ssl:E.ssl,scope:this._isServerRsrc(F)?"server":"portal"}),L.resources=
[F],this.credentials.push(L));L.onTokenChange(!1);H||L.refreshServerTokens()},toJson:function(){return c.fixJson({serverInfos:b.map(this.serverInfos,function(E){return E.toJson()}),oAuthInfos:b.map(this.oAuthInfos,function(E){return E.toJson()}),credentials:b.map(this.credentials,function(E){return E.toJson()})})},initialize:function(E){if(E){a.isString(E)&&(E=JSON.parse(E));var F=E.serverInfos,G=E.oAuthInfos;E=E.credentials;if(F){var H=[];b.forEach(F,function(J){J.server&&J.tokenServiceUrl&&H.push(J.declaredClass?
J:new l(J))});H.length&&this.registerServers(H)}if(G){var L=[];b.forEach(G,function(J){J.appId&&L.push(J.declaredClass?J:new w(J))});L.length&&this.registerOAuthInfos(L)}E&&b.forEach(E,function(J){J.userId&&J.server&&J.token&&J.expires&&J.expires>(new Date).getTime()&&(J=J.declaredClass?J:new C(J),J.onTokenChange(),this.credentials.push(J))},this)}},findServerInfo:function(E){var F;E=this._sanitizeUrl(E);b.some(this.serverInfos,function(G){this._hasSameServerInstance(G.server,E)&&(F=G);return!!F},
this);return F},findOAuthInfo:function(E){var F;E=this._sanitizeUrl(E);b.some(this.oAuthInfos,function(G){this._hasSameServerInstance(G.portalUrl,E)&&(F=G);return!!F},this);return F},findCredential:function(E,F){var G;E=this._sanitizeUrl(E);var H=this._isServerRsrc(E)?"server":"portal";F?b.some(this.credentials,function(L){this._hasSameServerInstance(L.server,E)&&F===L.userId&&L.scope===H&&(G=L);return!!G},this):b.some(this.credentials,function(L){this._hasSameServerInstance(L.server,E)&&-1!==this._getIdenticalSvcIdx(E,
L)&&L.scope===H&&(G=L);return!!G},this);return G},getCredential:function(E,F){var G=!0;if(c.isDefined(F))if(a.isObject(F)){var H=!!F.token;var L=F.error;G=!1!==F.prompt}else H=F;E=this._sanitizeUrl(E);var J=new g(m._dfdCanceller),S=this._isAdminResource(E);if((H=H?this.findCredential(E):null)&&L&&498===L.code)H.destroy();else if(H)return G=Error("You are currently signed in as: '"+H.userId+"'. You do not have access to this resource: "+E),G.name="identity-manager:not-authorized",G.code="IdentityManagerBase.1",
G.httpCode=L&&L.httpCode,G.messageCode=L?L.messageCode:null,G.subcode=L?L.subcode:null,G.details=L?L.details:null,G.log=!!A.isDebug,J.errback(G),J;if(L=this._findCredential(E,F))return J.callback(L),J;var P=this.findServerInfo(E);if(P)!P.hasServer&&this._isServerRsrc(E)&&(P._restInfoDfd=this._getTokenSvcUrl(E,!0),P.hasServer=!0);else{L=this._getTokenSvcUrl(E);if(!L)return G=Error("Unknown resource - could not find token service endpoint."),G.name="identity-manager:unknown-resource",G.code="IdentityManagerBase.2",
G.log=!!A.isDebug,J.errback(G),J;P=new l;P.server=this._getServerInstanceRoot(E);a.isString(L)?(P.tokenServiceUrl=L,P.hasPortal=!0):(P._restInfoDfd=L,P.hasServer=!0);this.registerServers([P])}P.hasPortal&&void 0===P._selfReq&&(G||r.hasSameOrigin(P.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(Q){return Q.tokenServiceUrl===P.tokenServiceUrl}))&&(P._selfReq={owningTenant:F&&F.owningTenant,selfDfd:this._getPortalSelf(P.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),
E)});return this._enqueue(E,P,F,J,S)},getResourceName:function(E){return this._isRESTService(E)?E.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(E)&&E.replace(this._gwUser,"$1")||this._gwItem.test(E)&&E.replace(this._gwItem,"$1")||this._gwGroup.test(E)&&E.replace(this._gwGroup,"$1")||""},generateToken:function(E,F,G){var H=this._rePortalTokenSvc.test(E.tokenServiceUrl),L=new d(window.location.href.toLowerCase()),J=!F;var S=E.shortLivedTokenValidity;if(F){var P=
h.id.tokenValidity||S||h.id.defaultTokenValidity;P>S&&(P=S)}if(G){var Q=G.isAdmin;var M=G.serverUrl;var N=G.token;var K=G.ssl;E.customParameters=G.customParameters}if(Q)S=E.adminTokenServiceUrl;else{S=E.tokenServiceUrl;var X=new d(S.toLowerCase());E.webTierAuth&&G&&G.serverUrl&&!K&&"http"===L.scheme&&(r.hasSameOrigin(L.uri,S,!0)||"https"===X.scheme&&L.host===X.host&&"7080"===L.port&&"7443"===X.port)&&(S=S.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));J&&H&&(S=S.replace(/\/rest/i,""))}Q=a.mixin({url:S,
content:a.mixin({request:"getToken",username:F&&F.username,password:F&&F.password,serverUrl:M,token:N,expiration:P,referer:Q||H?window.location.host:null,client:Q?"referer":null,f:"json"},E.customParameters),handleAs:"json",callbackParamName:J?"callback":void 0},G&&G.ioArgs);G={usePost:!J,disableIdentityLookup:!0,useProxy:this._useProxy(E,G)};H||(Q.withCredentials=!1);H=q(Q,G);H.addCallback(function(da){if(!da||!da.token)return da=Error("Unable to generate token"),da.name="identity-manager:authentication-failed",
da.code="IdentityManagerBase.3",da.log=!!A.isDebug,da;var Y=E.server;z[Y]||(z[Y]={});F&&(z[Y][F.username]=F.password);da.validity=P;return da});H.addErrback(function(da){});return H},isBusy:function(){return!!this._busy},checkSignInStatus:function(E){var F=new g;this.checkAppAccess(E,"").then(function(G){F.resolve(G.credential)})["catch"](function(G){F.reject(G)});return F},checkAppAccess:function(E,F,G){var H=this,L=!1;return this.getCredential(E,{prompt:!1}).then(function(J){var S={f:"json"};if("portal"===
J.scope)if(F&&(H._doPortalSignIn(E)||G&&G.force)){var P=J.server+"/sharing/rest/oauth2/validateAppAccess";S.client_id=F}else if(J.token)P=J.server+"/sharing/rest";else return{credential:J};else if(J.token)P=J.server+"/rest/services";else return{credential:J};J.token&&(S.token=J.token);return q({url:P,content:S,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(Q){if(!1===Q.valid){var M=Error("You are currently signed in as: '"+J.userId+"'.  You do not have access to this app: '"+
F+"'.");M.name="identity-manager:not-authorized";M.code="IdentityManagerBase.1";M.log=!!A.isDebug;M.details=Q;throw M;}L=!!Q.viewOnlyUserTypeApp;return{credential:J}})["catch"](function(Q){if("IdentityManagerBase.1"===Q.code||400===Q.code)throw 400===Q.code&&(Q.name="identity-manager:invalid-request"),Q;if(498===Q.code)throw J.destroy(),Q=Error("User is not signed in."),Q.name="identity-manager:not-authenticated",Q.code="IdentityManagerBase.6",Q.log=!!A.isDebug,Q;return{credential:J}})}).then(function(J){return{credential:J.credential,
viewOnly:L}})},setProtocolErrorHandler:function(E){this._protocolFunc=E},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var E=this.credentials.slice();b.forEach(E,function(F){F.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(E){E||(E="https://www.arcgis.com/sharing/rest");this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=
n(window,"message",function(F){(F.origin===window.location.origin||c.endsWith(F.origin,".arcgis.com"))&&F.data&&"arcgis:auth:requestCredential"===F.data.type&&this.getCredential(E).then(function(G){F.source.postMessage({type:"arcgis:auth:credential",credential:{expires:G.expires,server:G.server,ssl:G.ssl,token:G.token,userId:G.userId}},F.origin)})["catch"](function(G){F.source.postMessage({type:"arcgis:auth:error",error:{name:G.name,message:G.message}},F.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&
(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthHash:function(){var E=window.location.hash;if(E){"#"===E.charAt(0)&&(E=E.substring(1));E=f.queryToObject(E);var F=!1;if(E.access_token&&E.expires_in&&E.state&&E.hasOwnProperty("username"))try{E.state=JSON.parse(E.state),"object"===typeof E.state&&E.state.portalUrl&&(this._oAuthHash=E,F=!0)}catch(G){}else E.error&&E.error_description&&"access_denied"===E.error&&(F=!0);F&&(window.location.hash=E.state&&E.state.hash||"")}},
_pageShowHandler:function(E){E.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(E=Error("ABORTED"),E.name="identity-manager:user-aborted",E.code="IdentityManager.2",E.log=!!A.isDebug,this._errbackFunc(E))},_findCredential:function(E,F){var G=-1,H,L,J=F&&F.token;var S=F&&F.resource;var P=this._isServerRsrc(E)?"server":"portal",Q=b.filter(this.credentials,function(X){return this._hasSameServerInstance(X.server,E)&&X.scope===P},this);E=S||E;if(Q.length)if(1===Q.length){S=Q[0];var M=(H=(L=
this.findServerInfo(S.server))&&L.owningSystemUrl)&&this.findCredential(H,S.userId);G=this._getIdenticalSvcIdx(E,S);if(J)-1!==G&&(S.resources.splice(G,1),this._removeResource(E,M));else return-1===G&&S.resources.push(E),this._addResource(E,M),S}else{var N,K;b.some(Q,function(X){K=this._getIdenticalSvcIdx(E,X);return-1!==K?(N=X,M=(H=(L=this.findServerInfo(N.server))&&L.owningSystemUrl)&&this.findCredential(H,N.userId),G=K,!0):!1},this);if(J)N&&(N.resources.splice(G,1),this._removeResource(E,M));else if(N)return this._addResource(E,
M),N}},_findOAuthInfo:function(E){var F=this.findOAuthInfo(E);F||b.some(this.oAuthInfos,function(G){this._isIdProvider(G.portalUrl,E)&&(F=G);return!!F},this);return F},_addResource:function(E,F){F&&-1===this._getIdenticalSvcIdx(E,F)&&F.resources.push(E)},_removeResource:function(E,F){var G=-1;F&&(G=this._getIdenticalSvcIdx(E,F),-1<G&&F.resources.splice(G,1))},_useProxy:function(E,F){return F&&F.isAdmin&&!r.hasSameOrigin(E.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(E.tokenServiceUrl)&&
10.1==E.currentVersion&&!r.hasSameOrigin(E.tokenServiceUrl,window.location.href)},_getOrigin:function(E){E=new d(E);return E.scheme+"://"+E.host+(c.isDefined(E.port)?":"+E.port:"")},_getServerInstanceRoot:function(E){var F=E.toLowerCase(),G=F.indexOf(this._agsRest);-1===G&&this._isAdminResource(E)&&(G=this._agsAdmin.test(E)?E.replace(this._agsAdmin,"$1").length:E.search(this._adminSvcs));-1===G&&(G=F.indexOf("/sharing"));-1===G&&"/"===F.substr(-1)&&(G=F.length-1);return-1<G?E.substring(0,G):E},_hasSameServerInstance:function(E,
F){"/"===E.substr(-1)&&(E=E.slice(0,-1));E=E.toLowerCase();F=this._getServerInstanceRoot(F).toLowerCase();E=this._normalizeAGOLorgDomain(E);F=this._normalizeAGOLorgDomain(F);E=E.substr(E.indexOf(":"));F=F.substr(F.indexOf(":"));return E===F},_normalizeAGOLorgDomain:function(E){var F=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,G=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,H=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;F.test(E)?E=E.replace(F,"https://www.arcgis.com"):
G.test(E)?E=E.replace(G,"https://devext.arcgis.com"):H.test(E)&&(E=E.replace(H,"https://qaext.arcgis.com"));return E},_sanitizeUrl:function(E){var F=(k.defaults.io.proxyUrl||"").toLowerCase(),G=F?E.toLowerCase().indexOf(F+"?"):-1;-1!==G&&(E=E.substring(G+F.length+1));E=r.normalize(E);return r.urlToObject(E).path},_isRESTService:function(E){return-1<E.indexOf(this._agsRest)},_isAdminResource:function(E){return this._agsAdmin.test(E)||this._adminSvcs.test(E)},_isServerRsrc:function(E){return this._isRESTService(E)||
this._isAdminResource(E)},_isIdenticalService:function(E,F){if(this._isRESTService(E)&&this._isRESTService(F)){var G=this._getSuffix(E).toLowerCase(),H=this._getSuffix(F).toLowerCase();var L=G===H;L||(L=/(.*)\/(MapServer|FeatureServer).*/ig,L=G.replace(L,"$1")===H.replace(L,"$1"))}else this._isAdminResource(E)&&this._isAdminResource(F)?L=!0:this._isServerRsrc(E)||this._isServerRsrc(F)||!this._isPortalDomain(E)||(L=!0);return L},_isPortalDomain:function(E){var F=new d(E.toLowerCase()),G=this._portalConfig;
E=b.some(this._gwDomains,function(H){return H.regex.test(F.uri)});!E&&G&&(E=this._hasSameServerInstance(this._getServerInstanceRoot(G.restBaseUrl),F.uri));E||(!this._arcgisUrl&&(G=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new d(G)).authority),this._arcgisUrl&&(E=this._arcgisUrl.toLowerCase()===F.authority));E||(E=b.some(this._portals,function(H){return this._hasSameServerInstance(H,F.uri)},this));return E=E||this._agsPortal.test(F.path)},_isIdProvider:function(E,F){var G=-1,H=
-1;b.forEach(this._gwDomains,function(P,Q){-1===G&&P.regex.test(E)&&(G=Q);-1===H&&P.regex.test(F)&&(H=Q)});var L=!1;if(-1<G&&-1<H)if(0===G||4===G){if(0===H||4===H)L=!0}else if(1===G){if(1===H||2===H)L=!0}else 2===G?2===H&&(L=!0):3===G&&3===H&&(L=!0);if(!L){var J=this.findServerInfo(F),S=J&&J.owningSystemUrl;S&&x(J)&&this._isPortalDomain(S)&&this._isIdProvider(E,S)&&(L=!0)}return L},_isPublic:function(E){E=this._sanitizeUrl(E);return b.some(this._publicUrls,function(F){return F.test(E)})},_getIdenticalSvcIdx:function(E,
F){var G=-1;b.some(F.resources,function(H,L){return this._isIdenticalService(E,H)?(G=L,!0):!1},this);return G},_getSuffix:function(E){return E.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(E){if(this._isRESTService(E)||this._isAdminResource(E)){var F=this._getServerInstanceRoot(E);var G=F+"/admin/generateToken";E=F+"/rest/info";F=q({url:E,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});F.adminUrl_=G;return F}if(this._isPortalDomain(E)){var H=
"";b.some(this._gwDomains,function(L){L.regex.test(E)&&(H=L.tokenServiceUrl);return!!H});H||b.some(this._portals,function(L){this._hasSameServerInstance(L,E)&&(H=L+this._gwTokenUrl);return!!H},this);H||(G=E.toLowerCase().indexOf("/sharing"),-1!==G&&(H=E.substring(0,G)+this._gwTokenUrl));H||(H=this._getOrigin(E)+this._gwTokenUrl);H&&(G=(new d(E)).port,/^http:\/\//i.test(E)&&"7080"===G&&(H=H.replace(/:7080/i,":7443")),H=H.replace(/http:/i,"https:"));return H}if(-1!==E.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_exchangeToken:function(E,F,G){return q({url:E+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:F,token:G}},{disableIdentityLookup:!0,usePost:!0}).then(function(H){return H.token})},_getPlatformSelf:function(E,F){return q({url:E+"/sharing/rest/oauth2/platformSelf",content:{f:"json"},headers:{"X-Esri-Auth-Client-Id":F,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(E,F){var G="";
b.some(this._gwDomains,function(L){L.regex.test(E)&&(G=L.customBaseUrl);return!!G});if(G){var H=new g;H.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:G,portalMode:"multitenant",supportsOAuth:!0});return H}"https:"===window.location.protocol?E=E.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(F)&&(E=E.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return q({url:E,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},
_doPortalSignIn:function(E){var F=this._portalConfig,G=window.location.href,H=this.findServerInfo(E);return(F||this._isPortalDomain(G))&&(H?H.hasPortal||H.owningSystemUrl&&this._isPortalDomain(H.owningSystemUrl):this._isPortalDomain(E))&&(this._isIdProvider(G,E)||F&&(this._hasSameServerInstance(this._getServerInstanceRoot(F.restBaseUrl),E)||this._isIdProvider(F.restBaseUrl,E))||r.hasSameOrigin(G,E,!0))?!0:!1},_checkProtocol:function(E,F,G,H){var L=!0;H=H?F.adminTokenServiceUrl:F.tokenServiceUrl;0!==
a.trim(H).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||k.defaults.io.useCors&&(r.canUseXhr(H)||r.canUseXhr(r.getProxyUrl(!0).path))||(L=this._protocolFunc?!!this._protocolFunc({resourceUrl:E,serverInfo:F}):!1,L||(E=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),E.name="identity-manager:aborted",E.code="IdentityManagerBase.4",E.log=!!A.isDebug,G(E)));return L},_enqueue:function(E,F,G,H,L,J){H||(H=new g(m._dfdCanceller));
H.resUrl_=E;H.sinfo_=F;H.options_=G;H.admin_=L;H.refresh_=J;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(E),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(H)):this._xoReqs.push(H):this._doSignIn(H);return H},_doSignIn:function(E){this._busy=E;this._rejectOnPersistedPageShow=!1;var F=this,G=function(M){var N=E.options_&&E.options_.resource,K=E.resUrl_,X=E.refresh_,da=!1;-1===b.indexOf(F.credentials,M)&&(X&&-1!==
b.indexOf(F.credentials,X)?(X.userId=M.userId,X.token=M.token,X.expires=M.expires,X.validity=M.validity,X.ssl=M.ssl,X.creationTime=M.creationTime,da=!0,M=X):F.credentials.push(M));M.resources||(M.resources=[]);M.resources.push(N||K);M.scope=F._isServerRsrc(K)?"server":"portal";M.onTokenChange();N=F._soReqs;var Y={};F._soReqs=[];b.forEach(N,function(aa){if(!this._isIdenticalService(K,aa.resUrl_)){var ca=this._getSuffix(aa.resUrl_);Y[ca]||(Y[ca]=!0,M.resources.push(aa.resUrl_))}},F);E.callback(M);b.forEach(N,
function(aa){this._hasSameServerInstance(this._getServerInstanceRoot(K),aa.resUrl_)?aa.callback(M):this._soReqs.push(aa)},F);F._busy=E.resUrl_=E.sinfo_=E.refresh_=null;if(!da)F.onCredentialCreate({credential:M});F._soReqs.length?F._doSignIn(F._soReqs.shift()):F._xoReqs.length&&F._doSignIn(F._xoReqs.shift())},H=function(M){E.errback(M);F._busy=E.resUrl_=E.sinfo_=E.refresh_=null;F._soReqs.length?F._doSignIn(F._soReqs.shift()):F._xoReqs.length&&F._doSignIn(F._xoReqs.shift())},L=function(M,N,K,X){var da=
E.sinfo_,Y=!E.options_||!1!==E.options_.prompt,aa=da.hasPortal&&F._findOAuthInfo(E.resUrl_);if(M)G(new C({userId:M,server:da.server,token:K||null,expires:c.isDefined(X)?Number(X):null,ssl:!!N}));else if(window!==window.parent&&F._appUrlObj.query&&F._appUrlObj.query["arcgis-auth-origin"]&&F._appUrlObj.query["arcgis-auth-portal"]&&F._hasSameServerInstance(F._getServerInstanceRoot(F._appUrlObj.query["arcgis-auth-portal"]),E.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},F._appUrlObj.query["arcgis-auth-origin"]);
var ca=n(window,"message",function(ya){if(ya.source===window.parent&&ya.data)if("arcgis:auth:credential"===ya.data.type)ca.remove(),G(new C(ya.data.credential));else if("arcgis:auth:error"===ya.data.type){ca.remove();ya=ya.data.error;switch(ya.name){case "identity-manager:busy":case "identity-manager:not-authorized":var Da="IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":Da="IdentityManager.2";
break;case "identity-manager:authentication-failed":Da="IdentityManager.3";break;case "identity-manager:aborted":Da="IdentityManager.4";break;case "identity-manager:not-authenticated":Da="IdentityManager.6";break;case "identity-manager:invalid-request":Da=400}var Ha=Error(ya.message);Ha.name=ya.name;Ha.code=Da;Ha.log=!!A.isDebug;H(Ha)}})}else if(aa){var I=aa._oAuthCred;I||(M=new B(aa,u),N=new B(aa,t),M.isValid()&&N.isValid()?M.expires>N.expires?(I=M,N.destroy()):(I=N,M.destroy()):I=M.isValid()?M:
N,aa._oAuthCred=I);if(I.isValid()){var T=new C({userId:I.userId,server:da.server,token:I.token,expires:I.expires,ssl:I.ssl,_oAuthCred:I});aa.appId!==I.appId&&F._doPortalSignIn(E.resUrl_)?E._pendingDfd=F._exchangeToken(T.server,aa.appId,T.token).then(function(ya){T.token=ya;I.token=ya;I.save();G(T)})["catch"](function(){G(T)}):G(T)}else if(F._oAuthHash&&F._hasSameServerInstance(aa.portalUrl,F._oAuthHash.state.portalUrl))M=F._oAuthHash,T=new C({userId:M.username,server:da.server,token:M.access_token,
expires:(new Date).getTime()+1E3*Number(M.expires_in),ssl:"true"===M.ssl,oAuthState:M.state,_oAuthCred:I}),I.storage=M.persist?u:t,I.token=T.token,I.expires=T.expires,I.userId=T.userId,I.ssl=T.ssl,I.save(),F._oAuthHash=null,G(T);else{var ba=function(){Y?E._pendingDfd=F.oAuthSignIn(E.resUrl_,da,aa,E.options_).addCallbacks(G,H):(pa=Error("User is not signed in."),pa.name="identity-manager:not-authenticated",pa.code="IdentityManagerBase.6",pa.log=!!A.isDebug,H(pa))};F._doPortalSignIn(E.resUrl_)?E._pendingDfd=
F._getPlatformSelf(da.server,aa.appId).then(function(ya){var Da=ya.portalUrl;!Da||r.hasSameOrigin(Da,window.location.origin,!0)?(T=new C({server:da.server,userId:ya.username,token:ya.token}),G(T)):ba()})["catch"](ba):ba()}}else if(Y)F._checkProtocol(E.resUrl_,da,H,E.admin_)&&(M=E.options_,E.admin_&&(M=M||{},M.isAdmin=!0),E._pendingDfd=F.signIn(E.resUrl_,da,M).addCallbacks(G,H));else{var pa=Error("User is not signed in.");pa.name="identity-manager:not-authenticated";pa.code="IdentityManagerBase.6";
pa.log=!!A.isDebug;H(pa)}},J=function(){var M=E.sinfo_,N=M.owningSystemUrl,K=E.options_,X;if(K){var da=K.token;var Y=K.error;var aa=K.prompt}(X=F._findCredential(N,{token:da,resource:E.resUrl_}))||b.some(F.credentials,function(ca){this._isIdProvider(N,ca.server)&&(X=ca);return!!X},F);X?(K=F.findCredential(E.resUrl_,X.userId))?G(K):y(M,F._legacyFed)?(K=X.toJson(),K.server=M.server,K.resources=null,G(new C(K))):(E._pendingDfd=F.generateToken(F.findServerInfo(X.server),null,{serverUrl:E.resUrl_,token:X.token,
ssl:X.ssl})).addCallbacks(function(ca){G(new C({userId:X.userId,server:M.server,token:ca.token,expires:c.isDefined(ca.expires)?Number(ca.expires):null,ssl:!!ca.ssl,isAdmin:E.admin_,validity:ca.validity}))},H):(F._busy=null,da&&(E.options_.token=null),(E._pendingDfd=F.getCredential(N.replace(/\/?$/,"/sharing"),{resource:E.resUrl_,owningTenant:M.owningTenant,token:da,error:Y,prompt:aa})).addCallbacks(function(ca){F._enqueue(E.resUrl_,E.sinfo_,E.options_,E,E.admin_)},function(ca){H(ca)}))};this._errbackFunc=
H;var S=E.sinfo_.owningSystemUrl,P=this._isServerRsrc(E.resUrl_),Q=E.sinfo_._restInfoDfd;Q?Q.addCallbacks(function(M){var N=E.sinfo_;N._restInfoDfd&&(N.adminTokenServiceUrl=N._restInfoDfd.adminUrl_,N._restInfoDfd=null,N.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,M)||a.getObject("authInfo.tokenServiceUrl",!1,M)||a.getObject("tokenServiceUrl",!1,M),N.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,M),N.currentVersion=M.currentVersion,N.owningTenant=M.owningTenant,
(M=N.owningSystemUrl=M.owningSystemUrl)&&F._portals.push(M));P&&N.owningSystemUrl?J():L()},function(){E.sinfo_._restInfoDfd=null;var M=Error("Unknown resource - could not find token service endpoint.");M.name="identity-manager:server-identification-failed";M.code="IdentityManagerBase.2";M.log=!!A.isDebug;H(M)}):P&&S?J():E.sinfo_._selfReq?E.sinfo_._selfReq.selfDfd.then(function(M){var N={};if(M){var K=M.user&&M.user.username;N.username=K;N.allSSL=M.allSSL;var X=M.supportsOAuth;var da=M.currentVersion;
if("multitenant"===M.portalMode)var Y=M.customBaseUrl}E.sinfo_.webTierAuth=!!K;return K&&F.normalizeWebTierAuth?F.generateToken(E.sinfo_,null,{ssl:N.allSSL}).addBoth(function(aa){N.portalToken=aa&&aa.token;N.tokenExpiration=aa&&aa.expires;return N}):!K&&X&&4.4<=parseFloat(da)&&!F._findOAuthInfo(E.resUrl_)?F._generateOAuthInfo({portalUrl:E.sinfo_.server,customBaseUrl:Y,owningTenant:E.sinfo_._selfReq.owningTenant}).always(function(){return N}):N}).always(function(M){E.sinfo_._selfReq=null;M?L(M.username,
M.allSSL,M.portalToken,M.tokenExpiration):L()}):L()},_generateOAuthInfo:function(E){var F=this,G=E.portalUrl,H=E.customBaseUrl,L=E.owningTenant;if(E=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var J=window.location.href;var S=J.indexOf("?");-1<S&&(J=J.slice(0,S));S=J.search(/\/(apps|home)\//);J=-1<S?J.slice(0,S):null}E&&J?(this._hasTestedIfAppIsOnPortal=!0,E=q({url:J+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){F.defaultOAuthInfo=
new w({appId:"arcgisonline",popupCallbackUrl:J+"/home/oauth-callback.html"})})):(E=new g,E.resolve(),E=E.promise);return E.then(function(){if(F.defaultOAuthInfo)return G=G.replace(/^http:/i,"https:"),q({url:G+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:L,client_id:F.defaultOAuthInfo.appId,redirect_uri:r.getAbsoluteUrl(F.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(P){if(P.valid){var Q=F.defaultOAuthInfo.clone();Q.portalUrl=
P.urlKey&&H?"https://"+P.urlKey.toLowerCase()+"."+H:G;Q.popup=window!==window.top||!(r.hasSameOrigin(G,window.location.origin)||F._gwDomains.some(function(M){return M.regex.test(G)&&M.regex.test(window.location.origin)}));F.oAuthInfos.push(Q)}})})}});var C=D(v,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(E){a.mixin(this,E);this.resources=this.resources||[];c.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var E=
this,F=this.resources&&this.resources[0],G=h.id.findServerInfo(this.server),H=G&&G.owningSystemUrl,L=!!H&&"server"===this.scope,J=L&&y(G,h.id._legacyFed),S=L&&h.id.findServerInfo(H),P,Q=(P=G.webTierAuth)&&h.id.normalizeWebTierAuth,M=z[this.server];M=M&&M[this.userId];var N={username:this.userId,password:M};if(!P||Q)if(L&&!S&&b.some(h.id.serverInfos,function(da){h.id._isIdProvider(H,da.server)&&(S=da);return!!S}),P=S&&h.id.findCredential(S.server,this.userId),!L||P)if(J)P.refreshToken();else{if(L)var K=
{serverUrl:F,token:P&&P.token,ssl:P&&P.ssl};else if(Q)N=null,K={ssl:this.ssl};else if(M)this.isAdmin&&(K={isAdmin:!0});else{if(F){F=h.id._sanitizeUrl(F);this._enqueued=1;var X=h.id._enqueue(F,G,null,null,this.isAdmin,this);X.addCallback(function(){E._enqueued=0;E.refreshServerTokens()}).addErrback(function(){E._enqueued=0})}return X}return h.id.generateToken(L?S:G,L?null:N,K).addCallback(function(da){E.token=da.token;E.expires=c.isDefined(da.expires)?Number(da.expires):null;E.creationTime=(new Date).getTime();
E.validity=da.validity;E.onTokenChange();E.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&b.forEach(h.id.credentials,function(E){var F=h.id.findServerInfo(E.server),G=F&&F.owningSystemUrl;E!==this&&E.userId===this.userId&&G&&"server"===E.scope&&(h.id._hasSameServerInstance(this.server,G)||h.id._isIdProvider(G,this.server))&&(y(F,h.id._legacyFed)?(E.token=this.token,E.expires=this.expires,E.creationTime=this.creationTime,E.validity=this.validity,
E.onTokenChange()):E.refreshToken())},this)},onTokenChange:function(E){clearTimeout(this._refreshTimer);var F=this.server&&h.id.findServerInfo(this.server),G=(F=F&&F.owningSystemUrl)&&h.id.findServerInfo(F);!1!==E&&(!F||"portal"===this.scope||G&&G.webTierAuth&&!h.id.normalizeWebTierAuth)&&(c.isDefined(this.expires)||c.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=
null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var E=b.indexOf(h.id.credentials,this);-1<E&&h.id.credentials.splice(E,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var E=c.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),F=this.resources;F&&0<F.length&&(E.resources=F.slice());return E},
_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var E=6E4*this.tokenRefreshBuffer,F=Math.pow(2,31)-1,G=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>G?G=0:G>F&&(G=F);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),G>E?G-E:G)}});e.Credential=C;return h.IdentityManagerBase=e})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.ServerInfo",
constructor:function(d){A.mixin(this,d)},toJson:function(){return g.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return b.ServerInfo=D})},"esri/OAuthCredential":function(){define(["./kernel","dojo/_base/declare",
"dojo/has","dojo/json"],function(D,A,a,b){A=A(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,expires:null,ssl:null,token:null,userId:null,constructor:function(g,d){this.oAuthInfo=g;this.storage=d;this._init()},isValid:function(){var g=!1;if(this.oAuthInfo&&this.token&&this.userId){var d=(new Date).getTime();this.expires>d&&(this.expires-d)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(g=!0)}return g},save:function(){if(this.storage){var g=this._load(),d=this.oAuthInfo;
if(d&&d.authNamespace&&d.portalUrl){var e=g[d.authNamespace];e||(e=g[d.authNamespace]={});e[d.portalUrl]={appId:this.appId=d.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",b.stringify(g))}catch(f){}}}},destroy:function(){var g=this._load(),d=this.oAuthInfo;if(d&&d.appId&&d.portalUrl&&this.token&&this.expires>Date.now()){var e=d.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",f=new FormData;f.append("f",
"json");f.append("auth_token",this.token);f.append("client_id",d.appId);f.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(e,f);else{var n=new XMLHttpRequest;n.open("POST",e);n.send(f)}}if(d&&d.authNamespace&&d.portalUrl&&this.storage&&(e=g[d.authNamespace])){delete e[d.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",b.stringify(g))}catch(h){}}d&&(this.oAuthInfo=d._oAuthCred=null)},_init:function(){var g=this._load(),d=this.oAuthInfo;d&&
d.authNamespace&&d.portalUrl&&(g=g[d.authNamespace])&&(g=g[d.portalUrl])&&(this.appId=g.appId,this.expires=g.expires,this.ssl=g.ssl,this.token=g.token,this.userId=g.userId)},_load:function(){var g={};if(this.storage){var d=this.storage.getItem("esriJSAPIOAuth");if(d)try{g=b.parse(d)}catch(e){}}return g}});return D.OAuthCredential=A})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(D,A,a,b,g){var d=a(null,{declaredClass:"esri.arcgis.OAuthInfo",
constructor:function(e){b.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1},e)},_oAuthCred:null,toJson:function(){return A.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,
forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash})},clone:function(){return new d(this.toJson())}});b.setObject("arcgis.OAuthInfo",d,D);return d})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(D,A,a,b,g,d,e,f){return D("dijit.form.Form",
[g,d,e,f],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(n){A.set(this.domNode,"encType",n);b("ie")&&(this.domNode.encoding=
n);this._set("encType",n)},reset:function(n){var h={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:n?n.target:this.domNode,target:n?n.target:this.domNode};!1!==this.onReset(h)&&h.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(n){this.reset(n);n.stopPropagation();n.preventDefault();return!1},_onSubmit:function(n){var h=this.constructor.prototype;if(this.execute!=h.execute||this.onExecute!=h.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.",
"","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(n)&&(n.stopPropagation(),n.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){var m=null,q=null;try{m=window.localStorage,q=window.sessionStorage}catch(v){}return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(v){this._oAuthRedirectFunc=v},oAuthSignIn:function(v,B,w,z){var x=this._oAuthDfd=new f;x.resUrl_=v;x.sinfo_=B;x.oinfo_=w;var y=!z||!1!==z.oAuthPopupConfirmation;if(!w.popup||!y)return this._doOAuthSignIn(v,B,w),x;this._nls||(this._nls=k.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());v=this.oAuthDialog;w=z&&z.error;z=z&&z.token;A.hide(v.errMsg_);w&&403==w.code&&z&&(h.set(v.errMsg_,"innerHTML",this._nls.forbidden),A.show(v.errMsg_));h.set(v.serverLink_,
{title:B.server,innerHTML:-1!==B.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":B.server});v.show();return x},setOAuthResponseHash:function(v){var B=this._oAuthDfd;this._oAuthDfd=null;if(B&&v)if(clearInterval(this._oAuthIntervalId),"#"===v.charAt(0)&&(v=v.substring(1)),v=c.queryToObject(v),v.error){var w="access_denied"===v.error;v=Error(w?"ABORTED":"OAuth: "+v.error+" - "+v.error_description);v.name=w?"identity-manager:user-aborted":"identity-manager:authentication-failed";v.code="IdentityManagerBase."+
(w?2:3);v.log=!!e.isDebug;B.errback(v)}else{w=B.oinfo_._oAuthCred;var z=new D({userId:v.username,server:B.sinfo_.server,token:v.access_token,expires:(new Date).getTime()+1E3*Number(v.expires_in),ssl:"true"===v.ssl,_oAuthCred:w});w.storage=v.persist?m:q;w.token=z.token;w.expires=z.expires;w.userId=z.userId;w.ssl=z.ssl;w.save();B.callback(z)}},_createOAuthDialog:function(){var v=this._nls,B=a.substitute(v,this._oAuthDialogContent);B=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
B);var w=new g({title:v.title,content:B,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var z=w.esriIdMgr_._oAuthDfd;w.hide_();w.esriIdMgr_._doOAuthSignIn(z.resUrl_,z.sinfo_,z.oinfo_)},cancel_:function(){var z=w.esriIdMgr_._oAuthDfd;w.esriIdMgr_._oAuthDfd=null;w.hide_();var x=Error("ABORTED");x.code="IdentityManager.2";x.log=!!e.isDebug;z.errback(x)},hide_:function(){A.hide(w.errMsg_);w.hide();g._DialogLevelManager.hide(w)}});v=w.domNode;w.btnSubmit_=d.byNode(n.query(".esriIdSubmit",
v)[0]);w.btnCancel_=d.byNode(n.query(".esriIdCancel",v)[0]);w.serverLink_=n.query(".serverLink",v)[0];w.errMsg_=n.query(".esriErrorMsg",v)[0];w.connect(w.btnSubmit_,"onClick",w.execute_);w.connect(w.btnCancel_,"onClick",w.onCancel);w.connect(w,"onCancel",w.cancel_);return w},_doOAuthSignIn:function(v,B,w){var z=this,x={portalUrl:w.portalUrl};!w.popup&&w.preserveUrlHash&&window.location.hash&&(x.hash=window.location.hash);x={client_id:w.appId,response_type:"token",state:r.stringify(x),expiration:w.expiration,
locale:w.locale,redirect_uri:w.popup?b.getAbsoluteUrl(w.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};w.forceLogin&&(x.force_login=!0);!w.popup&&this._doPortalSignIn(v)&&(x.redirectToUserOrgUrl=!0);var y=w.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",u=y+"?"+c.objectToQuery(x);if(w.popup){if(7===l("ie")){var t=window.open(w.popupCallbackUrl,"esriJSAPIOAuth",w.popupWindowFeatures);t.location=u}else t=window.open(u,"esriJSAPIOAuth",w.popupWindowFeatures);t?(t.focus(),
this._oAuthDfd.oAuthWin_=t,this._oAuthIntervalId=setInterval(function(){if(t.closed){clearInterval(z._oAuthIntervalId);var C=z._oAuthDfd;if(C){var E=Error("ABORTED");E.code="IdentityManager.2";E.log=!!e.isDebug;C.errback(E)}}},500)):(v=Error("ABORTED"),v.name="identity-manager:user-aborted",v.code="IdentityManager.2",v.log=!!e.isDebug,this._oAuthDfd.errback(v))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:x,authorizeUrl:y,resourceUrl:v,serverInfo:B,
oAuthInfo:w}):window.location=u}}})},"arcgisonline/sharing/dijit/dialog/DownloadImageDlg":function(){define("dojo/_base/declare dojo/i18n!arcgisonline/nls/arcgisonline dojo/text!./templates/DownloadImageDlg.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ../../util".split(" "),function(D,A,a,b,g,d,e){return D([b,g,d],{templateString:a,widgetsInTemplate:!0,_i18nStrings:A,constructor:function(f,n){D.safeMixin(this,f)},show:function(){this.dialog.show();this.own(dojo.connect(this.dialog,
"onHide",dojo.hitch(this,function(){this.hide()})))},updateMessage:function(f){this.message.innerHTML=f},setCancelUrl:function(f){this.cancelUrl=f;this._cancelBtn.set("disabled",!1)},_handleCancelButtonClick:function(){this.hide()},hide:function(){this.cancelUrl&&e.request({url:this.cancelUrl});this.dialog.hide()}})})},"dojo/hash":function(){define("./_base/kernel require ./_base/config ./aspect ./_base/lang ./topic ./domReady ./sniff".split(" "),function(D,A,a,b,g,d,e,f){function n(w,z){var x=w.indexOf(z);
return 0<=x?w.substring(x+1):""}function h(){return n(location.href,"#")}function k(){d.publish("/dojo/hashchange",h())}function c(){h()!==m&&(m=h(),k())}function l(w){if(q)if(q.isTransitioning())setTimeout(g.hitch(null,l,w),B);else{var z=q.iframe.location.href,x=z.indexOf("?");q.iframe.location.replace(z.substring(0,x)+"?"+w)}else z=location.href.replace(/#.*/,""),location.replace(z+"#"+w),!v&&c()}function r(){function w(){m=h();y=E?m:n(F.href,"?");u=!1;t=null}var z=document.createElement("iframe"),
x=a.dojoBlankHtmlUrl||A.toUrl("./resources/blank.html");z.id="dojo-hash-iframe";z.src=x+"?"+h();z.style.display="none";document.body.appendChild(z);this.iframe=D.global["dojo-hash-iframe"];var y,u,t,C,E,F=this.iframe.location;this.isTransitioning=function(){return u};this.pollLocation=function(){if(!E)try{var G=n(F.href,"?");document.title!=C&&(C=this.iframe.document.title=document.title)}catch(L){E=!0}var H=h();if(u&&m===H)if(E||G===t)w(),k();else{setTimeout(g.hitch(this,this.pollLocation),0);return}else if(m!==
H||!E&&y!==G){if(m!==H){m=H;u=!0;t=H;z.src=x+"?"+t;E=!1;setTimeout(g.hitch(this,this.pollLocation),0);return}E||(location.href="#"+F.search.substring(1),w(),k())}setTimeout(g.hitch(this,this.pollLocation),B)};w();setTimeout(g.hitch(this,this.pollLocation),B)}D.hash=function(w,z){if(!arguments.length)return h();"#"==w.charAt(0)&&(w=w.substring(1));z?l(w):location.hash="#"+w;return w};var m,q,v,B=a.hashPollFrequency||100;e(function(){"onhashchange"in D.global&&(!f("ie")||8<=f("ie")&&"BackCompat"!=document.compatMode)?
v=b.after(D.global,"onhashchange",k,!0):document.addEventListener?(m=h(),setInterval(c,B)):document.attachEvent&&(q=new r)});return D.hash})},"esri/arcgis/Portal":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/_base/Deferred dojo/_base/array dojo/_base/sniff require ../kernel ../lang ../request ../urlUtils ../Evented ../IdentityManager".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c){var l={options:{disableIdentityLookup:!0},requestParams:{f:"json"}},r=function(t){function C(E){t[E]||
(t[E]=function(){var F=arguments;return b.when(t,function(G){Array.prototype.unshift.call(F,G.results||G);return r(g[E].apply(g,F))})})}if(!t)return t;t.then&&(t=A.delegate(t));t.total||(t.total=b.when(t,function(E){return n.isDefined(E.total)?E.total:E.length||0}));C("forEach");C("filter");C("map");C("some");C("every");return t},m={useSSL:function(t,C){var E=l&&l.self||{};if(E&&!E.isPortal)return-1!==t.indexOf("https:")||E.allSSL?C.replace("http:","https:"):C;var F=m.getLocation(C);if(-1<E.portalHostname.toLowerCase().indexOf(F.hostname.toLowerCase())&&
F.port&&"80"!==F.port&&"443"!==F.port){var G=F.pathname;G=0===G.indexOf("/")?G:"/"+G;return E.allSSL||-1<t.indexOf("https:")?"https://"+F.hostname+(E.httpsPort&&"443"!==E.httpsPort?":"+E.httpsPort:"")+G+F.search:"http://"+F.hostname+(E.httpPort&&"80"!==E.httpPort?":"+E.httpPort:"")+G+F.search}return-1!==t.indexOf("https:")||E.allSSL?C.replace("http:","https:"):C},formatUrl:function(t){var C=l.currentToken;return-1!==t.indexOf("null")?null:m.useSSL(window.location.protocol,C?t+(-1!==t.indexOf("?")?
"\x26":"?")+("token\x3d"+C):t)},getLocation:function(t){var C=document.createElement("a");C.href=t;return{protocol:C.protocol,hostname:C.hostname,port:C.port,pathname:C.pathname,search:C.search,hash:C.hash,host:C.host}},resultsToTypedArray:function(t,C,E){E=E?E.listings||E.notifications||E.userInvitations||E.tags||E.items||E.groups||E.comments||E.provisions||E.results||E:[];return g.map(E,function(F){F=A.mixin(F,C||{});return t?new t(F):F})},clearFieldsFromObject:function(t,C){var E,F=t.length;if(A.isArray(t))for(E=
0;E<F;E++)delete C[t[E]];else for(E in t)delete C[E];return C},requestToTypedArray:function(t,C,E,F,G){return r(m.request(t,C,E).then(A.partial(m.resultsToTypedArray,F,G)))},request:function(t,C,E){C&&C.portal&&delete C.portal;if(C&&C.form){var F=C.form;delete C.form}C=A.mixin(A.mixin({},C||{}),l.requestParams);E=A.mixin(E||{},l.options);return h({url:m.useSSL(window.location.protocol,t.url||t),content:C,callbackParamName:"callback",timeout:E&&E.timeout||0,form:F},E)},formatQueryParams:function(t,
C,E){t=A.mixin(A.mixin({},t),A.isString(C)?{q:C}:C||{});t.q=!E&&l.extraQuery?"("+t.q+")"+l.extraQuery:t.q;return t}},q=D([],{declaredClass:"esri.arcgis.PortalComment",constructor:function(t){A.mixin(this,t);this.url=this.item.itemUrl+"/comments/"+this.id;this.created=this.created?new Date(this.created):null}}),v=D([],{declaredClass:"esri.arcgis.PortalRating",constructor:function(t){A.mixin(this,t);this.url=this.item.itemUrl+"/rating";this.created=this.created?new Date(this.created):null}}),B=D([],
{declaredClass:"esri.arcgis.PortalItem",constructor:function(t){A.mixin(this,t);this.folderId=this.ownerFolder||this.folderId;this.itemUrl=(this.portal&&this.portal.portalUrl)+"content/items/"+this.id;this.userItemUrl=this.hasOwnProperty("ownerFolder")?this.itemUrl.replace("/content/","/content/users/"+this.owner+(this.folderId?"/"+this.folderId:"")+"/"):null;this.itemDataUrl=m.formatUrl(this.itemUrl+"/data");this.thumbnailUrl=m.formatUrl(this.itemUrl+"/info/"+this.thumbnail);this.displayName=this._getDisplayName();
this.iconUrl=this._getIconUrl();this.isPremiumContent=this._getIsPremiumContent();this.created=this.created?new Date(this.created):null;this.uploaded=this.uploaded?new Date(this.uploaded):null;this.modified=this.modified?new Date(this.modified):null},getTypeInfo:function(){var t=this.type;return{source:-1<g.indexOf(this.typeKeywords||[],"ArcGIS Server")||"Feature Collection"===t?t:null,displayName:this.displayName,iconUrl:this.iconUrl,isPremiumContent:this.isPremiumContent,premiumIconUrl:this._getPremiumIconUrl()}},
addComment:function(t){var C=A.isString(t)?{comment:t}:t;return m.request(this.itemUrl+"/addComment",C,{usePost:!0}).then(A.hitch(this,function(E){return new q(A.mixin(C,{id:E.commentId,item:this}))}))},updateComment:function(t){if(t&&t.url&&t.comment)return m.request(t.url+"/update",{comment:t.comment},{usePost:!0}).then(function(C){t.id=C.commentId;return t});throw Error();},getComments:function(){return m.requestToTypedArray(this.itemUrl+"/comments",null,null,q,{item:this})},deleteComment:function(t){if(t&&
t.url)return m.request(t.url+"/delete",null,{usePost:!0});throw Error();},addRating:function(t){var C=A.isObject(t)?t:{rating:parseFloat(t)};return m.request(this.itemUrl+"/addRating",C,{usePost:!0}).then(A.hitch(this,function(E){return new v(A.mixin(C,{id:E.ratingId,item:this}))}))},getRating:function(){return m.request(this.itemUrl+"/rating").then(A.hitch(this,function(t){return new v(A.mixin(t,{item:this}))}))},deleteRating:function(){return m.request(this.itemUrl+"/deleteRating",null,{usePost:!0})},
_getDisplayName:function(){var t=this.type,C=this.typeKeywords||[],E=t;"Feature Service"===t||"Feature Collection"===t?E=-1<g.indexOf(C,"Table")?"Table":-1<g.indexOf(C,"Route Layer")?"Route Layer":-1<g.indexOf(C,"Markup")?"Markup":"Feature Layer":"Image Service"===t?E=-1<g.indexOf(C,"Elevation 3D Layer")?"Elevation Layer":-1<g.indexOf(C,"Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":"Scene Service"===t?E="Scene Layer":"Scene Package"===t?E="Scene Layer Package":"Stream Service"===t?E="Feature Layer":
"Geoprocessing Service"===t&&this.portal&&this.portal.isPortal?E=-1<g.indexOf(C,"Web Tool")?"Tool":"Geoprocessing Service":"Geoenrichment Service"===t?E="GeoEnrichment Service":"Geocoding Service"===t?E="Locator":"Microsoft Powerpoint"===t?E="Microsoft PowerPoint":"GeoJson"===t?this.type=E="GeoJSON":"Globe Service"===t?E="Globe Layer":"Vector Tile Service"===t?E="Tile Layer":"netCDF"===t?E="NetCDF":"Map Service"===t?E=-1===g.indexOf(C,"Spatiotemporal")&&(-1<g.indexOf(C,"Hosted Service")||-1<g.indexOf(C,
"Tiled"))&&-1===g.indexOf(C,"Relational")?"Tile Layer":"Map Image Layer":t&&-1<t.toLowerCase().indexOf("add in")?E=t.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===t?E="Big Data File Share":"Compact Tile Package"===t?E="Tile Package (tpkx)":"Raster function template"===t?E="Raster Function Template":"OGCFeatureServer"===t&&(E="OGC Feature Layer");return E},_getIconUrl:function(){var t=this.type&&this.type.toLowerCase()||"",C=this.typeKeywords||[],E=!1,F=!1,G=!1,H=!1,L=!1,J=!1;F=!1;0<
t.indexOf("service")||"feature collection"===t||"kml"===t||"wms"===t||"wmts"===t||"wfs"===t?(E=-1<g.indexOf(C,"Hosted Service"),"feature service"===t||"feature collection"===t||"kml"===t||"wfs"===t?(H=-1<g.indexOf(C,"Table"),F=-1<g.indexOf(C,"Route Layer"),G=-1<g.indexOf(C,"Markup"),L=-1!==g.indexOf(C,"Spatiotemporal"),J=-1!==g.indexOf(C,"UtilityNetwork"),t=L&&H?"spatiotemporaltable":H?"table":F?"routelayer":G?"markup":L?"spatiotemporal":J?"utilitynetwork":E?"featureshosted":"features"):"map service"===
t||"wms"===t||"wmts"===t?(L=-1!==g.indexOf(C,"Spatiotemporal"),F=-1!==g.indexOf(C,"Relational"),t=L||F?"mapimages":E||-1<g.indexOf(C,"Tiled")||"wmts"===t?"maptiles":"mapimages"):t="scene service"===t?-1<g.indexOf(C,"Line")?"sceneweblayerline":-1<g.indexOf(C,"3DObject")?"sceneweblayermultipatch":-1<g.indexOf(C,"Point")?"sceneweblayerpoint":-1<g.indexOf(C,"IntegratedMesh")?"sceneweblayermesh":-1<g.indexOf(C,"PointCloud")?"sceneweblayerpointcloud":-1<g.indexOf(C,"Polygon")?"sceneweblayerpolygon":-1<
g.indexOf(C,"Building")?"sceneweblayerbuilding":-1<g.indexOf(C,"Voxel")?"sceneweblayervoxel":"sceneweblayer":"image service"===t?-1<g.indexOf(C,"Elevation 3D Layer")?"elevationlayer":-1<g.indexOf(C,"Tiled Imagery")?"tiledimagerylayer":"imagery":"stream service"===t?"streamlayer":"vector tile service"===t?"vectortile":"datastore catalog service"===t?"datastorecollection":"geocoding service"===t?"geocodeservice":"geoprocessing service"===t?-1<g.indexOf(C,"Web Tool")&&this.portal&&this.portal.isPortal?
"tool":"layers":"layers"):t="web map"===t||"cityengine web scene"===t?"maps":"web scene"===t?-1<g.indexOf(C,"ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===t||"mobile application"===t||"application"===t||"operation view"===t||"desktop application"===t?"apps":"map document"===t||"map package"===t||"published map"===t||"scene document"===t||"globe document"===t||"basemap package"===t||"mobile basemap package"===t||"mobile map package"===t||"project package"===t||"project template"===
t||"pro map"===t||"layout"===t||"layer"===t&&-1<g.indexOf(C,"ArcGIS Pro")||"explorer map"===t&&g.indexOf(C,"Explorer Document")?"mapsgray":"service definition"===t||"csv"===t||"shapefile"===t||"cad drawing"===t||"geojson"===t||"360 vr experience"===t||"netcdf"===t||"administrative report"===t?"datafiles":"explorer add in"===t||"desktop add in"===t||"windows viewer add in"===t||"windows viewer configuration"===t?"appsgray":"arcgis pro add in"===t||"arcgis pro configuration"===t?"addindesktop":"rule package"===
t||"file geodatabase"===t||"sqlite geodatabase"===t||"csv collection"===t||"kml collection"===t||"windows mobile package"===t||"map template"===t||"desktop application template"===t||"gml"===t||"arcpad package"===t||"code sample"===t||"form"===t||"document link"===t||"earth configuration"===t||"operations dashboard add in"===t||"rules package"===t||"image"===t||"workflow manager package"===t||"explorer map"===t&&-1<g.indexOf(C,"Explorer Mapping Application")||-1<g.indexOf(C,"Document")?"datafilesgray":
"network analysis service"===t||"geoprocessing service"===t||"geodata service"===t||"geometry service"===t||"geoprocessing package"===t||"locator package"===t||"geoprocessing sample"===t||"workflow manager service"===t?"toolsgray":"layer"===t||"layer package"===t||"explorer layer"===t?"layersgray":"scene package"===t?"scenepackage":"mobile scene package"===t?"mobilescenepackage":"tile package"===t||"compact tile package"===t?"tilepackage":"task file"===t?"taskfile":"report template"===t?"report-template":
"statistical data collection"===t?"statisticaldatacollection":"insights workbook"===t?"workbook":"insights model"===t?"insightsmodel":"insights page"===t?"insightspage":"insights theme"===t?"insightstheme":"hub initiative"===t?"hubinitiative":"hub page"===t?"hubpage":"hub site application"===t?"hubsite":"hub event"===t?"hubevent":"relational database connection"===t?"relationaldatabaseconnection":"big data file share"===t?"datastorecollection":"image collection"===t?"imagecollection":"desktop style"===
t?"desktopstyle":"style"===t?"style":"dashboard"===t?"dashboard":"raster function template"===t?"rasterprocessingtemplate":"vector tile package"===t?"vectortilepackage":"ortho mapping project"===t?"orthomappingproject":"ortho mapping template"===t?"orthomappingtemplate":"solution"===t?"solutions":"geopackage"===t?"geopackage":"deep learning package"===t?"deeplearningpackage":"real time analytic"===t?"realtimeanalytics":"big data analytic"===t?"bigdataanalytics":"feed"===t?"feed":"excalibur imagery project"===
t?"excaliburimageryproject":"notebook"===t?"notebook":"storymap"===t?"storymap":"survey123 add in"===t?"survey123addin":"mission"===t?"mission":"mission report"===t?"missionreport":"quickcapture project"===t?"quickcaptureproject":"pro report"===t?"proreport":"urban model"===t?"urbanmodel":"web experience"===t?"experiencebuilder":"web experience template"===t?"webexperiencetemplate":"workflow"===t?"workflow":"kernel gateway connection"===t?"kernelgatewayconnection":"insights script"===t?"insightsscript":
"hub initiative template"===t?"hubinitiativetemplate":"storymap theme"===t?"storymaptheme":"knowledge graph"===t?"knowledgegraph":"native application"===t?"nativeapp":"native application installer"===t?"nativeappinstaller":"link chart"===t?"linkchart":"investigation"===t?"investigation":"ogcfeatureserver"===t?"features":"pro project"===t?"proproject":"insights workbook package"===t?"insightsworkbookpackage":"apache parquet"===t?"apacheparquet":"maps";return t?e.toUrl("../css/images/item_type_icons/"+
t+"16.png"):null},_getIsPremiumContent:function(){var t=this.typeKeywords,C=!1;if(-1<g.indexOf(t,"Requires Subscription")||-1<g.indexOf(t,"Requires Credits"))C=!0;return C},_getPremiumIconUrl:function(){var t=this.typeKeywords,C;this.isPremiumContent&&(C=-1<g.indexOf(t,"Requires Credits")?"premiumcredits":"premiumitem");return C?e.toUrl("../css/images/item_type_icons/"+C+"16.png"):null},getThumbnailUrl:function(t){var C=this.thumbnailUrl;C&&t&&(C+=(-1===C.indexOf("?")?"?":"\x26")+"w\x3d"+t);return C}}),
w=D([],{declaredClass:"esri.arcgis.PortalListing",constructor:function(t){A.mixin(this,t);this.id=this.itemId;this.url=(this.portal&&this.portal.portalUrl)+"content/"+(this.userItemUrl?"items/":"listings/")+this.itemId;this.commentsUrl=this.url+"/comments";this.created=this.created?new Date(this.created):null;this.banner=this.banner?m.formatUrl(this.url+"/info/"+this.banner):"";this.thumbnail=this.thumbnail?m.formatUrl(this.url+"/info/"+this.thumbnail):"";this.largeThumbnail=this.largeThumbnail?m.formatUrl(this.url+
"/info/"+this.largeThumbnail):"";this.avgRating=this.avgRating||0;this.numRatings=this.numRatings||0;this.numComments=this.numComments||0;this.listingProperties=this.listingProperties||{priceDesc:"",creditsPerTransaction:0,licenseType:"free",trialSupported:!1,trialDuration:0,listingAccess:"private"};for(var C in this.listingProperties)this[C]&&(this.listingProperties[C]=this[C]);this.properties=this.properties||{systemRequirements:"",termsAndConditions:"",version:"1.0"};this.screenshots=g.map(this.screenshots,
A.hitch(this,function(E){return m.formatUrl(this.url+"/info/"+E)}));this.vendorName=this.vendor.name;this.vendor.thumbnail=this.vendor.thumbnail?this.userItemUrl?m.formatUrl(this.portal.portalUrl+"/portals/self/resources/"+this.vendor.thumbnail):m.formatUrl(this.url+"/vendorinfo/"+this.vendor.thumbnail):""},getComments:function(){return m.requestToTypedArray(this.commentsUrl,null,null,q,{item:this})},getVendor:function(){return this.vendor}}),z=D([],{declaredClass:"esri.arcgis.PortalProvision",constructor:function(t){A.mixin(this,
t);this.created=this.created?new Date(this.created):null;this.startDate=this.startDate?new Date(this.startDate):null;this.endDate=this.endDate&&-1!==this.endDate?new Date(this.endDate):null;this.listing=t.listing?new w(A.mixin(t.listing,{portal:this.portal})):null}}),x=D([],{declaredClass:"esri.arcgis.PortalGroup",constructor:function(t){A.mixin(this,t);this.url=(this.portal&&this.portal.portalUrl)+"community/groups/"+this.id;this.thumbnailUrl=m.formatUrl(this.url+"/info/"+this.thumbnail);this.modified=
this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getMembers:function(){return m.request(this.url+"/users")},queryItems:function(t,C){t=m.formatQueryParams({},t,C);t.q="group:"+this.id+(t.q?" "+t.q:"");return this.portal.queryItems(t)},getThumbnailUrl:function(t){var C=this.thumbnailUrl;C&&t&&(C+=(-1===C.indexOf("?")?"?":"\x26")+"w\x3d"+t);return C}}),y=D([],{declaredClass:"esri.arcgis.PortalFolder",constructor:function(t){A.mixin(this,t);this.url=(this.portal&&
this.portal.portalUrl)+"content/users/"+this.username+"/"+this.id;this.created=this.created?new Date(this.created):null},getItems:function(){return m.requestToTypedArray(this.url,null,null,B,{portal:this.portal,folderId:this.id})}}),u=D([],{declaredClass:"esri.arcgis.PortalUser",constructor:function(t){A.mixin(this,t);this.url=(this.portal&&this.portal.portalUrl)+"community/users/"+this.username;this.userContentUrl=(this.portal&&this.portal.portalUrl)+"content/users/"+this.username;this.thumbnailUrl=
this.thumbnail?m.formatUrl(this.url+"/info/"+this.thumbnail):null;this.modified=this.modified?new Date(this.modified):null;this.created=this.created?new Date(this.created):null},getGroups:function(){return r(m.request(this.url).then(A.hitch(this,function(t){return m.resultsToTypedArray(x,{portal:this.portal},t.groups)})))},getNotifications:function(){return m.requestToTypedArray(this.url+"/notifications",null,null,null,{portal:this.portal})},getGroupInvitations:function(){return m.requestToTypedArray(this.url+
"/invitations",null,null,null,{portal:this.portal})},getTags:function(){return m.requestToTypedArray(this.url+"/tags",null,null,null,{portal:this.portal})},getFolders:function(){return r(this.getContent(null,{num:1}).then(function(t){return t.folders}))},getItems:function(t){return r(this.getContent(t).then(function(C){return C.items}))},getItem:function(t){return m.request(this.portal.portalUrl+"content/items/"+t).then(A.hitch(this,function(C){return new B(A.mixin(C,{portal:this.portal}))}))},getContent:function(t,
C){var E=this.url.replace("/community/","/content/")+(t?"/"+t:"");return m.request(E,C).then(A.hitch(this,function(F){F.folders=m.resultsToTypedArray(y,{portal:this.portal},F.folders);F.items=m.resultsToTypedArray(B,{portal:this.portal,folderId:t},F.items);return F}))},getThumbnailUrl:function(t){var C=this.thumbnailUrl;C&&t&&(C+=(-1===C.indexOf("?")?"?":"\x26")+"w\x3d"+t);return C}});D={Portal:D([c],{declaredClass:"esri.arcgis.Portal",onLoad:function(){},onError:function(){},constructor:function(t){t=
A.isObject(t)?t:{url:t};this.registerConnectEvents();l={options:{disableIdentityLookup:!0},requestParams:{f:"json"}};t.self?(l.self=t.self,A.mixin(this,{url:t.url||k.getProtocolForWebResource()+"//"+(t.self.urlKey?t.self.urlKey+"."+t.self.customBaseUrl:t.self.portalHostname)}),this.portalUrl=-1!==this.url.indexOf("/sharing")?this.url+"/":this.url+"/sharing/rest/",t=t.self.user?this.signIn():this.init(this.url)):(t.url&&A.mixin(this,{url:t.url}),t=this.init(this.url));t.then(A.hitch(this,function(){this.emit("ready",
this);this.onLoad(this)}))},init:function(t,C){t=(t||this.portalUrl).replace(/\/+$/,"");this.portalUrl=-1!==t.indexOf("/sharing")?t+"/":t+"/sharing/rest/";return this._getSelf(this.portalUrl).then(A.hitch(this,function(E){l.self=A.mixin({},E);(E=E.user)&&C&&(l.currentToken=C&&C.token,l.loggedInUser=new u(A.mixin(E,{portal:this,credential:C})));l.self.id&&!1===l.self.canSearchPublic&&(l.extraQuery=" AND orgid:"+l.self.id);A.mixin(this,l.self);this.thumbnailUrl=m.formatUrl(this.portalUrl+"portals/self/resources/"+
this.thumbnail);this.isOrganization=this.access&&this.access.length?!0:!1;this.created=this.created?new Date(this.created):null;this.modified=this.modified?new Date(this.modified):null;return this}),A.hitch(this,function(E){this.onError(E);throw E;}))},signIn:function(){var t=new b,C=A.hitch(this,function(){this._onSignIn().then(A.hitch(this,function(){t.resolve(l.loggedInUser)}),A.hitch(this,function(E){t.reject(E)}))});if(l&&l.self)l&&l.loggedInUser?setTimeout(function(){t.resolve(l.loggedInUser)},
0):C();else this.on("load",A.hitch(this,function(){C()}));return t},signOut:function(){l.loggedInUser.credential&&l.loggedInUser.credential.destroy();l.loggedInUser=null;l.options.disableIdentityLookup=!0;m.clearFieldsFromObject(l.self,this);l.self=null;return this.init(this.url)},getPortalUser:function(){return l.loggedInUser},addResource:function(t,C){return m.request(this.portalUrl+"portals/self/addResource",{key:t,text:C},{usePost:!0})},update:function(t){return m.request(this.portalUrl+"portals/self/update",
t,{usePost:!0})},queryGroups:function(t,C){return this._queryPortal(this.portalUrl+"community/groups",m.formatQueryParams({},t,C),x)},queryItems:function(t,C){return this._queryPortal(this.portalUrl+"search",m.formatQueryParams({},t,C),B)},queryListings:function(t){t=m.formatQueryParams({},t,!0);var C="";t.q&&-1<t.q.toLowerCase().indexOf("mylistings:true")?(t.q=t.q.toLowerCase().replace("mylistings:true",""),C="?mylistings\x3dtrue"):t.q||(t.q='""');return this._queryPortal(this.portalUrl+"content/listings"+
C,t,w)},queryCustomerList:function(t,C){var E=m.formatQueryParams({},t,!0);return this._queryPortal(this.portalUrl+"portals/self/customersList",E)},getProvisions:function(){return this.getCustomers().then(A.hitch(this,function(t){return t.purchases}))},getInterests:function(){return this.getCustomers().then(A.hitch(this,function(t){return t.interests}))},getTrials:function(){return this.getCustomers().then(A.hitch(this,function(t){return t.trials}))},getCustomers:function(t){return m.request(this.portalUrl+
"portals/self/customers",{status:t||"all"})},getMyPurchases:function(){return this.getPurchases().then(function(t){return t.purchases})},getMyInterests:function(){return this.getPurchases().then(function(t){return t.interests})},getPurchases:function(){return m.request(this.portalUrl+"portals/self/purchases").then(A.hitch(this,function(t){t.interests=g.map(t.interests,function(C){return A.mixin(C.provision,{listing:C.listing})});t.purchases=g.map(t.purchases,function(C){return A.mixin(C.provision,
{listing:C.listing})});t.trials=g.map(t.trials,function(C){return A.mixin(C.provision,{listing:C.listing})});t.interests=m.resultsToTypedArray(z,{portal:this},t.interests);t.trials=m.resultsToTypedArray(z,{portal:this},t.trials);t.purchases=m.resultsToTypedArray(z,{portal:this},t.purchases);return t}))},queryUsers:function(t,C){return this._queryPortal(this.portalUrl+"community/users",m.formatQueryParams({sortField:"username"},t,C),u)},_onSignIn:function(){l.options.disableIdentityLookup=!1;l.self=
null;return f.id.getCredential(this.portalUrl).then(A.hitch(this,"init",this.url)).then(function(){return l.loggedInUser},A.hitch(this,function(t){l.options.disableIdentityLookup=!0;this.onError(t);throw t;}))},_getSelf:function(t){t+="portals/self";if(l.self){var C=new b;setTimeout(function(){C.resolve(l.self)},0)}else C=m.request(t,{culture:a.locale});return C},_queryPortal:function(t,C,E){var F=A.mixin({num:10,start:0,sortField:"title",sortOrder:"asc"},C),G=["start","query","num","nextStart"];
t=m.request(t,F).then(A.hitch(this,function(H){H.results=m.resultsToTypedArray(E,{portal:this},H);H.queryParams=A.mixin({},F);H.nextQueryParams=A.mixin(F,{start:H.nextStart});return m.clearFieldsFromObject(G,H)}));t=A.delegate(t);t.queryParams=A.mixin({},F);t.nextQueryParams=b.when(t,function(H){return H.nextQueryParams});return r(t)}}),PortalFolder:y,PortalGroup:x,PortalItem:B,PortalUser:u,PortalComment:q,PortalRating:v,PortalUtil:m,PortalResult:r,PortalListing:w};A.mixin(A.getObject("arcgis",!0,
f),D);return D})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query ../kernel ../request ../deferredUtils ../geometry/normalizeUtils ./Task ./FeatureSet ./JobInfo ./GPMessage ./LinearUnit ./DataFile ./RasterData ./Date ./ParameterValue ./GPResultImageLayer ../layers/ArcGISDynamicMapServiceLayer ../layers/MapImage".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u){D=D(c,{declaredClass:"esri.tasks.Geoprocessor",
_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(t){this._jobUpdateHandler=A.hitch(this,this._jobUpdateHandler);this._getJobStatus=A.hitch(this,this._getJobStatus);this._getResultDataHandler=A.hitch(this,this._getResultDataHandler);this._getResultImageHandler=A.hitch(this,
this._getResultImageHandler);this._executeHandler=A.hitch(this,this._executeHandler);this._updateTimers=[];this.registerConnectEvents()},updateDelay:1E3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(t){this.updateDelay=t},setProcessSpatialReference:function(t){this.processSpatialReference=t},setOutputSpatialReference:function(t){this._setOutSR(t)},setOutSpatialReference:function(t){this._setOutSR(t)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],
e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(t){this.outSpatialReference=this.outputSpatialReference=t},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(t,C,E){for(var F in t){var G=t[F];A.isArray(G)?t[F]=g.toJson(a.map(G,function(H){return this._gpEncode({item:H},!0).item},this)):G instanceof Date&&(t[F]=G.getTime())}return this._encode(t,C,E)},_decode:function(t){var C=t.dataType,E=new z(t);if(-1!==a.indexOf(["GPBoolean",
"GPDouble","GPLong","GPString"],C))return E;if("GPLinearUnit"===C)E.value=new q(E.value);else if("GPFeatureRecordSetLayer"===C||"GPRecordSet"===C)E.value=new l(E.value);else if("GPDataFile"===C)E.value=new v(E.value);else if("GPDate"===C)t=E.value,A.isString(t)?E.value=new w({date:t}):E.value=new Date(t);else if("GPRasterData"===C||"GPRasterDataLayer"===C)t=t.value.mapImage,E.value=t?new u(t):new B(E.value);else if(-1!==C.indexOf("GPMultiValue:")){var F=C.split(":")[1];t=E.value;E.value=a.map(t,function(G){return this._decode({paramName:"_name",
dataType:F,value:G}).value},this)}else E=null;return E},submitJob:function(t,C,E,F,G){var H=this._getOutSR(),L=G.assembly;t=this._gpEncode(A.mixin({},this._url.query,{f:"json","env:outSR":H?H.wkid||g.toJson(H.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||g.toJson(this.processSpatialReference.toJson()):null},t),null,L&&L[0]);var J=this._jobUpdateHandler,S=this._errorHandler;return n({url:this._url.path+"/submitJob",content:t,callbackParamName:"callback",
load:function(P,Q){J(P,Q,!1,C,E,G.dfd)},error:function(P){S(P,F,G.dfd)}})},_jobUpdateHandler:function(t,C,E,F,G,H){var L=t.jobId;C=new r(t);this._successHandler([C],"onStatusUpdate",G,E&&H);if(!E)switch(clearTimeout(this._updateTimers[L]),this._updateTimers[L]=null,H&&H.progress(C),t.jobStatus){case r.STATUS_SUBMITTED:case r.STATUS_EXECUTING:case r.STATUS_WAITING:case r.STATUS_NEW:var J=this._getJobStatus;this._updateTimers[L]=setTimeout(function(){J(L,E,F,G,H)},this.updateDelay);break;default:this._successHandler([C],
"onJobComplete",F,H)}},_getJobStatus:function(t,C,E,F,G){var H=this._jobUpdateHandler;n({url:this._url.path+"/jobs/"+t,content:A.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(L,J){H(L,J,C,E,F,G)},error:this._errorHandler})},_getResultDataHandler:function(t,C,E,F,G){try{var H=this._decode(t);this._successHandler([H],"onGetResultDataComplete",E,G)}catch(L){this._errorHandler(L,F,G)}},getResultData:function(t,C,E,F){var G=this._getResultDataHandler,H=this._errorHandler,
L=new b(h._dfdCanceller);L._pendingDfd=n({url:this._url.path+"/jobs/"+t+"/results/"+C,content:A.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(J,S){G(J,S,E,F,L)},error:function(J){H(J,F,L)}});return L},checkJobStatus:function(t,C,E){var F=this._jobUpdateHandler,G=this._errorHandler,H=new b(h._dfdCanceller);H._pendingDfd=n({url:this._url.path+"/jobs/"+t,content:A.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(L,J){F(L,
J,!0,null,C,H)},error:function(L){G(L,E,H)}});return H},cancelJob:function(t,C,E){var F=this._errorHandler,G=new b(h._dfdCanceller);G._pendingDfd=n({url:this._url.path+"/jobs/"+t+"/cancel",content:A.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:A.hitch(this,function(H,L){this._successHandler([H],"onJobCancel",C,G)}),error:function(H){F(H,E,G)}});return G},execute:function(t,C,E,F){var G=this._getOutSR(),H=F.assembly;t=this._gpEncode(A.mixin({},this._url.query,{f:"json","env:outSR":G?
G.wkid||g.toJson(G.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||g.toJson(this.processSpatialReference.toJson()):null},t),null,H&&H[0]);var L=this._executeHandler,J=this._errorHandler;return n({url:this._url.path+"/execute",content:t,callbackParamName:"callback",load:function(S,P){L(S,P,C,E,F.dfd)},error:function(S){J(S,E,F.dfd)}})},_executeHandler:function(t,C,E,F,G){try{var H=t.results,L,J=t.messages;var S=0;for(L=H.length;S<L;S++)H[S]=this._decode(H[S]);
S=0;for(L=J.length;S<L;S++)J[S]=new m(J[S]);this._successHandler([H,J],"onExecuteComplete",E,G)}catch(P){this._errorHandler(P,F,G)}},_getResultImageHandler:function(t,C,E,F,G){try{var H=this._decode(t);this._successHandler([H],"onGetResultImageComplete",E,G)}catch(L){this._errorHandler(L,F,G)}},getResultImage:function(t,C,E,F,G){var H=this._getResultImageHandler,L=this._errorHandler;E=this._gpEncode(A.mixin({},this._url.query,{f:"json"},E.toJson()));var J=new b(h._dfdCanceller);J._pendingDfd=n({url:this._url.path+
"/jobs/"+t+"/results/"+C,content:E,callbackParamName:"callback",load:function(S,P){H(S,P,F,G,J)},error:function(S){L(S,G,J)}});return J},cancelJobStatusUpdates:function(t){clearTimeout(this._updateTimers[t]);this._updateTimers[t]=null},getResultImageLayer:function(t,C,E,F){if(null==C){var G=this._url.path.indexOf("/GPServer/");t=this._url.path.substring(0,G)+"/MapServer/jobs/"+t}else t=this._url.path+"/jobs/"+t+"/results/"+C;this._url.query&&(t+="?"+e.objectToQuery(this._url.query));C=null==C?new y(t,
{imageParameters:E}):new x(t,{imageParameters:E},!0);this.onGetResultImageLayerComplete(C);F&&F(C);return C},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}});k._createWrappers(D);A.setObject("tasks.Geoprocessor",D,f);return D})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),
function(D,A,a,b,g,d,e,f){D=D(f,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(n,h){n&&A.isString(n)&&(this._url=e.urlToObject(this.url=n));h&&h.requestOptions&&(this.requestOptions=h.requestOptions);this.normalization=!0;this._errorHandler=A.hitch(this,this._errorHandler);this.registerConnectEvents()},_useSSL:function(){var n=this._url,h=/^http:/i;this.url&&(this.url=this.url.replace(h,"https:"));n&&n.path&&(n.path=n.path.replace(h,"https:"))},
_encode:function(n,h,k){var c={},l;for(l in n)if("declaredClass"!==l){var r=n[l];var m=typeof r;if(null!==r&&void 0!==r&&"function"!==m)if(A.isArray(r)){c[l]=[];var q=r.length;for(m=0;m<q;m++)c[l][m]=this._encode(r[m])}else"object"===m?r.toJson&&(m=r.toJson(k&&k[l]),"esri.tasks.FeatureSet"===r.declaredClass&&m.spatialReference&&(m.sr=m.spatialReference,delete m.spatialReference),c[l]=h?m:a.toJson(m)):c[l]=r}return c},_successHandler:function(n,h,k,c){h&&this[h].apply(this,n);k&&k.apply(null,n);c&&
d._resDfd(c,n)},_errorHandler:function(n,h,k){this.onError(n);h&&h(n);k&&k.errback(n)},setNormalization:function(n){this.normalization=n},onError:function(){}});return g.Task=D})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../graphic ../SpatialReference ../graphicsUtils ../geometry/Polygon ../geometry/jsonUtils ../symbols/jsonUtils".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c){D=D(null,{declaredClass:"esri.tasks.FeatureSet",
constructor:function(l,r){if(l){A.mixin(this,l);var m=this.features=this.features||[],q=l.spatialReference;q=this.spatialReference=k.createInstance(f.simpleConstructor,q);var v=k.getGeometryType(l.geometryType);this.geometryType=l.geometryType;l.fields&&(this.fields=l.fields);var B=k.supportsLazyUnquantization(this.geometryType),w=k.unquantizeFunction(this.geometryType,this.transform),z=!!(r&&B&&w),x=v&&(z?v.accessorConstructor:v.simpleConstructor);a.forEach(m,function(y,u){var t=k.createInstance(e.simpleConstructor),
C=y.geometry;if(v&&C){var E=t.geometry=k.createInstance(x,z?null:C);E.setSpatialReference(C.spatialReference?k.createInstance(f.simpleConstructor,C.spatialReference):q);z&&E.setupLazyUnquantization(w,C)}t.symbol=y.symbol?c.fromJson(y.symbol):null;t.attributes=y.attributes;m[u]=t});z||this._hydrate()}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(l){var r={};this.displayFieldName&&(r.displayFieldName=this.displayFieldName);this.fields&&
(r.fields=this.fields);this.spatialReference?r.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(r.spatialReference=this.features[0].geometry.spatialReference.toJson());this.features[0]&&(this.features[0].geometry&&(r.geometryType=k.getJsonType(this.features[0].geometry)),r.features=n._encodeGraphics(this.features,l));r.geometryType=r.geometryType||this.geometryType;r.exceededTransferLimit=this.exceededTransferLimit;r.transform=this.transform;return d.fixJson(r)},
_hydrate:function(){k.unquantize(this.features,this.geometryType,this.transform);this.transform=null},quantize:function(l){if(!this.geometryType)return this.transform=null,this;var r=l.translate[0],m=l.translate[1],q=l.scale[0],v=l.scale[1],B=this.features,w=function(u,t,C){var E,F=[];var G=0;for(E=u.length;G<E;G++){var H=u[G];if(0<G){var L=t(H[0]);H=C(H[1]);if(L!==J||H!==S){F.push([L-J,H-S]);var J=L;var S=H}}else J=t(H[0]),S=C(H[1]),F.push([J,S])}return 0<F.length?F:null},z=function(u,t,C){if("esriGeometryPoint"===
u)return function(E){E.x=t(E.x);E.y=C(E.y);return E};if("esriGeometryPolyline"===u||"esriGeometryPolygon"===u)return function(E){var F;var G=E.rings||E.paths;var H=[];var L=0;for(F=G.length;L<F;L++){var J=G[L];(J=w(J,t,C))&&H.push(J)}return 0<H.length?(E.rings?E.rings=H:E.paths=H,E):null};if("esriGeometryMultipoint"===u)return function(E){var F=w(E.points,t,C);return 0<F.length?(E.points=F,E):null};if("esriGeometryEnvelope"===u)return function(E){return E}}(this.geometryType,function(u){return Math.round((u-
r)/q)},function(u){return Math.round((m-u)/v)}),x;var y=0;for(x=B.length;y<x;y++)B[y].geometry&&(z(B[y].geometry)||B[y].setGeometry(null));this.transform=l;return this}});D.createGraphics=function(l){var r=l.geometryType,m=k.createInstance(f.simpleConstructor,l.spatialReference),q=k.getGeometryType(r).accessorConstructor,v=k.unquantizeFunction(r,l.transform);return a.map(l.features,function(B,w){var z=k.createInstance(e.simpleConstructor),x=B.geometry;if(x){var y=z.geometry=k.createInstance(q);y.setSpatialReference(m);
y.setupLazyUnquantization(v,x)}z.attributes=B.attributes;return z})};D.createPolygon=function(l,r,m){if(l){var q=k.createInstance(h.accessorConstructor);q.setSpatialReference(r);r=k.unquantizeFunction("esriGeometryPolygon",m);q.setupLazyUnquantization(r,l)}return q};A.setObject("tasks.FeatureSet",D,g);return D})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(D,A,
a,b,g,d,e,f,n){function h(){}D=D(null,{declaredClass:"esri.Graphic",constructor:function(k,c,l,r){this._construct();k&&!k.declaredClass?(this.geometry=k.geometry?f.fromJson(k.geometry):null,this.symbol=k.symbol?n.fromJson(k.symbol):null,this.attributes=k.attributes||null,this.infoTemplate=k.infoTemplate?new e(k.infoTemplate):null):(this.geometry=k,this.symbol=c,this.attributes=l,this.infoTemplate=r)},_geomVersion:0,_resolution:null,_shape:null,_bgShape:null,_dataAttrs:null,_layer:null,_sourceLayer:null,
_graphicsLayer:null,_parentGraphic:null,_suspended:!1,size:null,visible:!0,_aggregationSourceLayer:null,_aggregationInfo:null,_computedAttributes:null,_computedVersion:null,_computedGeomVersion:null,_isSnapTarget:!0,getParentGraphic:function(){return this._parentGraphic},setParentGraphic:function(k){this._parentGraphic=k},setSize:function(k){this.size=k;return this},getAggregationSourceLayer:function(){return this._aggregationSourceLayer},setAggregationSourceLayer:function(k){this._aggregationSourceLayer=
k;return this},isAggregate:function(){return!!this._aggregationInfo},getAggregationInfo:function(){return this._aggregationInfo},setAggregationInfo:function(k){this._aggregationInfo=k;return this},getChildGraphics:function(){var k=this.getAggregationSourceLayer();return k?k.getChildGraphics(this):[]},getDojoShape:function(){return this._shape},getShapes:function(){var k=[];this._shape&&k.push(this._shape);this._bgShape&&k.push(this._bgShape);return k},getNode:function(){var k=this._shape&&this._shape.getNode();
return k&&k.nodeType?k:null},getNodes:function(){var k=this.getShapes(),c,l,r=k.length,m=[];for(l=0;l<r;l++)(c=k[l]&&k[l].getNode())&&c.nodeType&&m.push(c);return m},getLayer:function(){return this._layer},getSourceLayer:function(){return this._sourceLayer||this._layer},clone:function(){var k=new this.constructor(this.toJson());k.visible=this.visible;k._layer=this._layer;k._sourceLayer=this._sourceLayer;k._aggregationSourceLayer=this._aggregationSourceLayer;k._aggregationInfo=this._aggregationInfo;
k._resolution=this._resolution;return k},draw:function(){var k=this._graphicsLayer;k&&k._draw(this,!0);return this},setGeometry:function(k){this.geometry=k;this._geomVersion++;var c=this._graphicsLayer;c&&(c._updateExtent(this),this.draw(),k&&"polyline"===k.type&&c._updateSVGMarkers());return this},setResolution:function(k){this._resolution=k;return this},getResolution:function(){return this._resolution},setSymbol:function(k,c){var l=this._graphicsLayer,r=this._shape;this.symbol=k;l&&(c&&r&&l._removeShape(this),
this.draw());return this},setAttributes:function(k){this.attributes=k;this.clearCache();return this},setInfoTemplate:function(k){this.infoTemplate=k;return this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var k=this.getLayer();return this.infoTemplate||k&&k.infoTemplate},getTitle:function(){var k=this.getInfoTemplate(),c=k&&k.title;if(A.isFunction(c))c=c.call(k,this);else if(A.isString(c)){var l=(k=this.getLayer())&&k._getDateOpts;c=d.substitute(this.attributes,
c,{first:!0,dateFormat:l&&l.call(k)})}return c},getContent:function(){var k=this.getInfoTemplate(),c=k&&k.content;if(A.isFunction(c))c=c.call(k,this);else if(A.isString(c)){var l=(k=this.getLayer())&&k._getDateOpts;c=d.substitute(this.attributes,c,{dateFormat:l&&l.call(k)})}return c},attr:function(k,c){null==c||this._dataAttrs||(this._dataAttrs={});this._dataAttrs&&(this._dataAttrs[k]=c,this._setDataAttr(k,c));return this},_isSuspended:function(){return this._suspended},_suspend:function(){this._suspended=
!0;this.draw()},_resume:function(){this._suspended=!1;this.draw()},show:function(){this.visible=!0;this.attr("data-hidden");var k;if(this.getShapes().length){var c=this.getNodes();var l=c.length;for(k=0;k<l;k++)g.show(c[k])}else this.draw();(c=this._graphicsLayer)&&c._graphicVisibilityChanged(this);return this},hide:function(){this.visible=!1;this.attr("data-hidden","");var k=this._graphicsLayer,c,l;if(k){if("canvas-2d"===k.surfaceType)k._removeShape(this);else{var r=this.getNodes();if(l=r.length)for(c=
0;c<l;c++)g.hide(r[c])}k._graphicVisibilityChanged(this)}return this},toJson:function(){var k={};this.geometry&&(k.geometry=this.geometry.toJson());this.attributes&&(k.attributes=A.mixin({},this.attributes));this.symbol&&(k.symbol=this.symbol.toJson());this.infoTemplate&&(k.infoTemplate=this.infoTemplate.toJson());return k},_setDataAttr:function(k,c){var l=this.getNodes(),r,m=l.length;for(r=0;r<m;r++)this._setDOMDataAttr(l[r],k,c)},_setDOMDataAttr:function(k,c,l){null==l?k.removeAttribute(c):k.setAttribute(c,
l)},_applyDataAttrs:function(){var k=this._dataAttrs;if(k){var c=this.getNodes(),l,r=c.length;for(l=0;l<r;l++)for(var m in k)this._setDOMDataAttr(c[l],m,k[m])}},_getViewInfo:function(k){return(k=(k=k||this.getLayer())&&k.getMap())&&k.getViewInfo()},evaluateExpression:function(k,c){return this._getDataValue(k._attributeDef,k._attributeCache,null,null,k,c)},_getDataValue:function(k,c,l,r,m,q){var v=c.id,B=this.attributes,w=k.field,z=c.isNumeric,x=null;if(v){var y=this._computedAttributes,u=this._computedVersion,
t=this._computedGeomVersion;r=this._getViewInfo(r);var C=!(!m||!m.async),E=q&&q.skipCache||C,F=!q||!1!==q.strictReturnType,G=c.dependsOnView||c.isJSFunc,H=c.dependsOnGeometry;y||(y=this._computedAttributes={});G&&!u&&(u=this._computedVersion={});H&&!t&&(t=this._computedGeomVersion={});var L=G&&u[v]!==r.version||H&&t[v]!==this._geomVersion;x=y[v];if(void 0===x||L||E)x=null,c.hasExpr?x=m?m.evaluate(q&&q.context):l.executeFunction(c.compiledFunc,l.createExecContext(this,r)):c.isJSFunc?x=w(this,k):B&&
(x=B[w],z&&this._isValidNumber(x)&&(c=k.normalizationType||"field",l=x,x=null,m=k.normalizationTotal,k=B[k.normalizationField],"log"===c&&0!==l?x=Math.log(l)*Math.LOG10E:"percent-of-total"===c&&this._isValidNumber(m)&&0!==m?x=l/m*100:"field"===c&&this._isValidNumber(k)&&0!==k&&(x=l/k))),F&&(C?z&&(this._construct(),x=x.then(this._sanitizeNumericValue)):x=this._sanitizeValue(x,z)),E||(y[v]=x,G&&(u[v]=r.version),H&&(t[v]=this._geomVersion))}else B&&(x=this._sanitizeValue(B[w],z));return x},_sanitizeValue:function(k,
c){c&&!this._isValidNumber(k)&&(k=null);return k},_sanitizeNumericValue:function(k){return this._sanitizeValue(k,!0)},_construct:function(){this._constructed||(this._sanitizeNumericValue=A.hitch(this,this._sanitizeNumericValue),this._constructed=!0)},_isValidNumber:function(k){return"number"===typeof k&&!isNaN(k)&&Infinity!==k&&-Infinity!==k},clearCache:function(k){if(null!=k){var c=this._computedAttributes,l=this._computedVersion,r=this._computedGeomVersion;c&&(c[k]=void 0);l&&(l[k]=void 0);r&&(r[k]=
void 0)}else this._computedAttributes=this._computedVersion=this._computedGeomVersion=null}});D.prototype.getShape=D.prototype.getDojoShape;h.prototype=D.prototype;D.simpleConstructor=h;return b.Graphic=D})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.InfoTemplate",constructor:function(d,e){d&&A.isObject(d)&&!A.isFunction(d)?A.mixin(this,d):(this.title=d||"${*}",this.content=e||"${*}")},
setTitle:function(d){this.title=d;return this},setContent:function(d){this.content=d;return this},toJson:function(){return g.fixJson({title:this.title,content:this.content})}});return b.InfoTemplate=D})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has ../kernel ./SimpleMarkerSymbol ./PictureMarkerSymbol ./SimpleLineSymbol ./CartographicLineSymbol ./SimpleFillSymbol ./PictureFillSymbol ./TextSymbol".split(" "),function(D,A,a,b,g,d,e,f,n,h,k){var c={createDefaultSymbol:function(l){switch(l){case "esriGeometryPoint":case "esriGeometryMultipoint":var r=
c.createDefaultMarkerSymbol();break;case "esriGeometryPolyline":r=c.createDefaultLineSymbol();break;case "esriGeometryPolygon":case "esriGeometryEnvelope":case "esriGeometryMultiPatch":r=c.createDefaultFillSymbol()}return r},createDefaultMarkerSymbol:function(){return new g},createDefaultLineSymbol:function(){return new e},createDefaultFillSymbol:function(){return new n},getFirstSupportedSymbol:function(l){var r;A.some(l,function(m){m&&-1<c.supportedSymbolTypes.indexOf(m.type)&&(r=m);return!!r});
return r},isPointSymbol:function(l){return l?-1<c.supportedPointSymbolTypes.indexOf(l.type):!1},supportedPointSymbolTypes:["esriSMS","esriPMS","esriTS"],supportedSymbolTypes:"esriSMS esriPMS esriTS esriSLS esriCLS esriSFS esriPFS".split(" "),fromJson:function(l,r){var m=null;switch(l.type){case "esriSMS":m=new g(l);break;case "esriPMS":m=new d(l);break;case "esriTS":m=new k(l);break;case "esriSLS":m=void 0!==l.cap?new f(l):new e(l);break;case "esriCLS":m=new f(l);break;case "esriSFS":m=new n(l);break;
case "esriPFS":m=new h(l);break;default:m=(m=r&&r.geometryType)?c.createDefaultSymbol(m):null}return m},getShapeDescriptors:function(l){return l&&l.getShapeDescriptors?l.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};D.mixin(D.getObject("symbol",!0,b),c);return c})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(D,A,a,b,g,d,
e,f,n){var h={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},k={style:h.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};D=D(f,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",triangle:"esriSMSTriangle",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},
constructor:function(c,l,r,m){c?A.isString(c)?(this.style=c,l&&(this.size=l),r&&(this.outline=r),m&&(this.color=m)):(this.style=e.valueOf(this._styles,this.style),c.outline&&(this.outline=new n(c.outline))):(A.mixin(this,k),this.size=g.pt2px(this.size),this.outline=new n(this.outline),this.color=new a(this.color));this.style||(this.style=h.STYLE_CIRCLE)},setStyle:function(c){this.style=c;return this},setPath:function(c){this.path=c;this.setStyle(h.STYLE_PATH);return this},setOutline:function(c){this.outline=
c;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(c,l,r){this._targetWidth=c;this._targetHeight=l;this._spikeSize=r},getShapeDescriptors:function(){var c,l=this.style,r=(this.size||g.pt2px(k.size))/2,m=0-r,q=0+r,v=0-r,B=0+r;switch(l){case h.STYLE_CIRCLE:var w={type:"circle",cx:0,cy:0,r:r};var z=this.getFill();if(c=this.getStroke())c.style=c.style||"Solid";break;case h.STYLE_CROSS:w={type:"path",path:"M "+m+",0 L "+
q+",0 M 0,"+v+" L 0,"+B+" E"};z=null;c=this.getStroke();break;case h.STYLE_DIAMOND:w={type:"path",path:"M "+m+",0 L 0,"+v+" L "+q+",0 L 0,"+B+" L "+m+",0 Z"};z=this.getFill();c=this.getStroke();break;case h.STYLE_SQUARE:w={type:"path",path:"M "+m+","+B+" L "+m+","+v+" L "+q+","+v+" L "+q+","+B+" L "+m+","+B+" Z"};z=this.getFill();c=this.getStroke();break;case h.STYLE_TRIANGLE:w={type:"path",path:"M "+m+","+B+" L 0,"+v+" L "+q+","+B+" L "+m+","+B+" Z"};z=this.getFill();c=this.getStroke();break;case h.STYLE_X:w=
{type:"path",path:"M "+m+","+B+" L "+q+","+v+" M "+m+","+v+" L "+q+","+B+" E"};z=null;c=this.getStroke();break;case h.STYLE_PATH:w={type:"path",path:this.path||""},z=this.getFill(),c=this.getStroke()}return{defaultShape:w,fill:z,stroke:c}},toJson:function(){var c=this.style,l=this.outline,r=A.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[c]||"esriSMSCircle"});l&&(r.outline=l.toJson());"x"===c||"cross"===c?delete r.color:"target"===c&&(r.style="esriSMSSquare",delete r.color,
0<this._targetHeight&&0<this._targetWidth&&(r.size=g.px2pt(Math.max(this._targetHeight,this._targetWidth))));r.path=this.path;return e.fixJson(r)}});A.mixin(D,h);D.defaultProps=k;A.setObject("symbol.SimpleMarkerSymbol",D,d);d.symbol.defaultSimpleMarkerSymbol=k;return D})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(D,A,a,b,g,d,e,f,n){var h=
A.getObject("dojox.gfx",!0),k=h._base={};h._hasClass=function(v,B){var w=v.getAttribute("className");return w&&0<=(" "+w+" ").indexOf(" "+B+" ")};h._addClass=function(v,B){var w=v.getAttribute("className")||"";(!w||0>(" "+w+" ").indexOf(" "+B+" "))&&v.setAttribute("className",w+(w?" ":"")+B)};h._removeClass=function(v,B){var w=v.getAttribute("className");w&&v.setAttribute("className",w.replace(new RegExp("(^|\\s+)"+B+"(\\s+|$)"),"$1$2"))};k._getFontMeasurements=function(){var v={"1em":0,"1ex":0,"100%":0,
"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},B;if(b("ie")){var w=g.doc.documentElement.style.fontSize||"";w||(g.doc.documentElement.style.fontSize="100%")}var z=f.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},g.body());for(B in v)z.style.fontSize=B,v[B]=16*Math.round(12*z.offsetHeight/16)/12/1E3;b("ie")&&(g.doc.documentElement.style.fontSize=
w);g.body().removeChild(z);return v};var c=null;k._getCachedFontMeasurements=function(v){if(v||!c)c=k._getFontMeasurements();return c};var l=null,r={};k._getTextBox=function(v,B,w){var z=arguments.length,x;l||(l=f.create("div",{style:{position:"absolute",top:"-10000px",left:"0",visibility:"hidden"}},g.body()));var y=l;y.className="";var u=y.style;u.borderWidth="0";u.margin="0";u.padding="0";u.outline="0";if(1<z&&B)for(x in B)x in r||(u[x]=B[x]);2<z&&w&&(y.className=w);y.innerHTML=v;y.getBoundingClientRect?
(u=y.getBoundingClientRect(),u={l:u.left,t:u.top,w:u.width||u.right-u.left,h:u.height||u.bottom-u.top}):u=n.getMarginBox(y);y.innerHTML="";return u};k._computeTextLocation=function(v,B,w,z){var x={};switch(v.align){case "end":x.x=v.x-B;break;case "middle":x.x=v.x-B/2;break;default:x.x=v.x}x.y=v.y-w*(z?.75:1);return x};k._computeTextBoundingBox=function(v){if(!h._base._isRendered(v))return{x:0,y:0,width:0,height:0};var B=v.getShape();var w=v.getFont()||h.defaultFont;v=v.getTextWidth();w=h.normalizedLength(w.size);
B=k._computeTextLocation(B,v,w,!0);return{x:B.x,y:B.y,width:v,height:w}};k._isRendered=function(v){for(v=v.parent;v&&v.getParent;)v=v.parent;return null!==v};var m=0;k._getUniqueId=function(){do var v=D._scopeName+"xUnique"+ ++m;while(e.byId(v));return v};var q=b("pointer-events")?"touchAction":b("MSPointer")?"msTouchAction":null;k._fixMsTouchAction=q?function(v){v.rawNode.style[q]="none"}:function(){};A.mixin(h,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",
x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,
cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var v={};return function(B){var w=v[B];if(w)return new w;w=v[B]=
function(){};w.prototype=h["default"+B];return new w}}(),normalizeColor:function(v){return v instanceof a?v:new a(v)},normalizeParameters:function(v,B){var w;if(B){var z={};for(w in v)w in B&&!(w in z)&&(v[w]=B[w])}return v},makeParameters:function(v,B){var w=null;if(!B)return A.delegate(v);var z={};for(w in v)w in z||(z[w]=A.clone(w in B?B[w]:v[w]));return z},formatNumber:function(v,B){var w=v.toString();if(0<=w.indexOf("e"))w=v.toFixed(4);else{var z=w.indexOf(".");0<=z&&5<w.length-z&&(w=v.toFixed(4))}return 0>
v?w:B?" "+w:w},makeFontString:function(v){return v.style+" "+v.variant+" "+v.weight+" "+v.size+" "+v.family},splitFontString:function(v){var B=h.getDefault("Font");v=v.split(/\s+/);if(!(5>v.length)){B.style=v[0];B.variant=v[1];B.weight=v[2];var w=v[3].indexOf("/");B.size=0>w?v[3]:v[3].substring(0,w);var z=4;0>w&&("/"==v[4]?z=6:"/"==v[4].charAt(0)&&(z=5));z<v.length&&(B.family=v.slice(z).join(" "))}return B},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return h._base._getCachedFontMeasurements()["12pt"]/
12},pt2px:function(v){return v*h.px_in_pt()},px2pt:function(v){return v/h.px_in_pt()},normalizedLength:function(v){if(0===v.length)return 0;if(2<v.length){var B=h.px_in_pt(),w=parseFloat(v);switch(v.slice(-2)){case "px":return w;case "pt":return w*B;case "in":return 72*w*B;case "pc":return 12*w*B;case "mm":return w*h.mm_in_pt*B;case "cm":return w*h.cm_in_pt*B}}return parseFloat(v)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,
equalSources:function(v,B){return v&&B&&v===B},switchTo:function(v){var B="string"==typeof v?h[v]:v;B&&(d.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath Surface createSurface fixTarget".split(" "),function(w){h[w]=B[w]}),"string"==typeof v?h.renderer=v:d.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(w){return h.renderer=h[w]&&h[w].Surface===h.Surface?w:null}))}});return h})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],
function(D,A,a){A.switchTo(a);return A})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(D,A,a,b,g){var d=null;a.add("vml",function(e,f,n){n.innerHTML='\x3cv:shape adj\x3d"1"/\x3e';e="adj"in n.firstChild;n.innerHTML="";return e});return{load:function(e,f,n){function h(){f(["dojox/gfx/"+k],function(r){D.renderer=k;d=r;n(r)})}if(d&&"force"!=e)n(d);else{var k=g.forceGfxRenderer;e=!k&&(A.isString(g.gfxRenderer)?
g.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var c,l;!k&&e.length;)switch(e.shift()){case "svg":"SVGAngle"in b.global&&(k="svg");break;case "vml":a("vml")&&(k="vml");break;case "silverlight":try{a("ie")?(c=new ActiveXObject("AgControl.AgControl"),c.IsVersionSupported("1.0"))&&(l=!0):navigator.plugins["Silverlight Plug-In"]&&(l=!0)}catch(r){l=!1}finally{c=null}l&&(k="silverlight");break;case "canvas":b.global.CanvasRenderingContext2D&&(k="canvas")}"canvas"===k&&!1!==g.canvasEvents&&(k=
"canvasWithEvents");"svg"==k&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(h):h()}}}})},"dojox/gfx/svg":function(){define("dojo/_base/lang dojo/_base/sniff dojo/_base/window dojo/dom dojo/_base/declare dojo/_base/array dojo/dom-geometry dojo/dom-attr dojo/_base/Color ./_base ./shape ./path".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c){function l(t,C){return a.doc.createElementNS?a.doc.createElementNS(t,C):a.doc.createElement(C)}function r(t,C,E,F){return t.setAttributeNS?t.setAttributeNS(C,
E,F):t.setAttribute(E,F)}function m(t){return q.useSvgWeb?a.doc.createTextNode(t,!0):a.doc.createTextNode(t)}var q=h.svg={};q.useSvgWeb="undefined"!=typeof window.svgweb;var v=navigator.userAgent,B=A("ios"),w=A("android"),z=A("chrome")||w&&4<=w?"auto":"optimizeLegibility";q.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"};q.getRef=function(t){return t&&"none"!=t?t.match(/^url\(#.+\)$/)?b.byId(t.slice(5,-1)):t.match(/^#dojoUnique\d+$/)?b.byId(t.slice(1)):null:null};q.dasharray=
{solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var x=0;q.Shape=g("dojox.gfx.svg.Shape",k.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var t=this.rawNode.getAttribute("fill");(t=q.getRef(t))&&t.parentNode.removeChild(t)}this.clip&&(t=this.rawNode.getAttribute("clip-path"))&&(t=b.byId(t.match(/gfx_clip[\d]+/)[0]))&&t.parentNode.removeChild(t);
k.Shape.prototype.destroy.apply(this,arguments)},setFill:function(t){if(!t)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var C=function(F){this.setAttribute(F,E[F].toFixed(8))};if("object"==typeof t&&"type"in t){switch(t.type){case "linear":var E=h.makeParameters(h.defaultLinearGradient,t);t=this._setFillObject(E,"linearGradient");d.forEach(["x1","y1","x2","y2"],C,t);break;case "radial":E=h.makeParameters(h.defaultRadialGradient,
t);t=this._setFillObject(E,"radialGradient");d.forEach(["cx","cy","r"],C,t);break;case "pattern":E=h.makeParameters(h.defaultPattern,t),t=this._setFillObject(E,"pattern"),d.forEach(["x","y","width","height"],C,t)}this.fillStyle=E;return this}this.fillStyle=E=h.normalizeColor(t);this.rawNode.setAttribute("fill",E.toCss());this.rawNode.setAttribute("fill-opacity",E.a);this.rawNode.setAttribute("fill-rule","evenodd");return this},setStroke:function(t){var C=this.rawNode;if(!t)return this.strokeStyle=
null,C.setAttribute("stroke","none"),C.setAttribute("stroke-opacity",0),this;if("string"==typeof t||D.isArray(t)||t instanceof n)t={color:t};t=this.strokeStyle=h.makeParameters(h.defaultStroke,t);t.color=h.normalizeColor(t.color);if(t){var E=0>t.width?0:t.width;C.setAttribute("stroke",t.color.toCss());C.setAttribute("stroke-opacity",t.color.a);C.setAttribute("stroke-width",E);C.setAttribute("stroke-linecap",t.cap);"number"==typeof t.join?(C.setAttribute("stroke-linejoin","miter"),C.setAttribute("stroke-miterlimit",
t.join)):C.setAttribute("stroke-linejoin",t.join);var F=t.style.toLowerCase();F in q.dasharray&&(F=q.dasharray[F]);if(F instanceof Array){F=D._toArray(F);var G;for(G=0;G<F.length;++G)F[G]*=E;if("butt"!=t.cap){for(G=0;G<F.length;G+=2)F[G]-=E,1>F[G]&&(F[G]=1);for(G=1;G<F.length;G+=2)F[G]+=E}F=F.join(",")}C.setAttribute("stroke-dasharray",F);C.setAttribute("dojoGfxStrokeStyle",t.style)}return this},_getParentSurface:function(){for(var t=this.parent;t&&!(t instanceof h.Surface);t=t.parent);return t},
_setFillObject:function(t,C){var E=q.xmlns.svg;this.fillStyle=t;var F=this._getParentSurface().defNode,G=this.rawNode.getAttribute("fill");if(G=q.getRef(G))if(G.tagName.toLowerCase()!=C.toLowerCase()){var H=G.id;G.parentNode.removeChild(G);G=l(E,C);G.setAttribute("id",H);F.appendChild(G)}else for(;G.childNodes.length;)G.removeChild(G.lastChild);else G=l(E,C),G.setAttribute("id",h._base._getUniqueId()),F.appendChild(G);if("pattern"==C)G.setAttribute("patternUnits","userSpaceOnUse"),E=l(E,"image"),
E.setAttribute("x",0),E.setAttribute("y",0),E.setAttribute("width",(0>t.width?0:t.width).toFixed(8)),E.setAttribute("height",(0>t.height?0:t.height).toFixed(8)),r(E,q.xmlns.xlink,"xlink:href",t.src),G.appendChild(E);else for(G.setAttribute("gradientUnits","userSpaceOnUse"),F=0;F<t.colors.length;++F){H=t.colors[F];var L=l(E,"stop"),J=H.color=h.normalizeColor(H.color);L.setAttribute("offset",H.offset.toFixed(8));L.setAttribute("stop-color",J.toCss());L.setAttribute("stop-opacity",J.a);G.appendChild(L)}this.rawNode.setAttribute("fill",
"url(#"+G.getAttribute("id")+")");this.rawNode.removeAttribute("fill-opacity");this.rawNode.setAttribute("fill-rule","evenodd");return G},_applyTransform:function(){if(this.matrix){var t=this.matrix;this.rawNode.setAttribute("transform","matrix("+t.xx.toFixed(8)+","+t.yx.toFixed(8)+","+t.xy.toFixed(8)+","+t.yy.toFixed(8)+","+t.dx.toFixed(8)+","+t.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(t){t=this.rawNode=t;"image"!=this.shape.type&&t.setAttribute("fill",
"none");t.setAttribute("fill-opacity",0);t.setAttribute("stroke","none");t.setAttribute("stroke-opacity",0);t.setAttribute("stroke-width",1);t.setAttribute("stroke-linecap","butt");t.setAttribute("stroke-linejoin","miter");t.setAttribute("stroke-miterlimit",4);t.__gfxObject__=this},setShape:function(t){this.shape=h.makeParameters(this.shape,t);for(var C in this.shape)if("type"!=C){t=this.shape[C];if("width"===C||"height"===C)t=0>t?0:t;this.rawNode.setAttribute(C,t)}this.bbox=null;return this},_moveToFront:function(){this.rawNode.parentNode.appendChild(this.rawNode);
return this},_moveToBack:function(){this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild);return this},setClip:function(t){this.inherited(arguments);var C=t?"width"in t?"rect":"cx"in t?"ellipse":"points"in t?"polyline":"d"in t?"path":null:null;if(t&&!C)return this;"polyline"===C&&(t=D.clone(t),t.points=t.points.join(","));var E,F=f.get(this.rawNode,"clip-path");F&&(E=b.byId(F.match(/gfx_clip[\d]+/)[0]))&&E.removeChild(E.childNodes[0]);t?(E?(C=l(q.xmlns.svg,C),E.appendChild(C)):
(F="gfx_clip"+ ++x,this.rawNode.setAttribute("clip-path","url(#"+F+")"),E=l(q.xmlns.svg,"clipPath"),C=l(q.xmlns.svg,C),E.appendChild(C),this.rawNode.parentNode.insertBefore(E,this.rawNode),f.set(E,"id",F)),f.set(C,t)):(this.rawNode.removeAttribute("clip-path"),E&&E.parentNode.removeChild(E));return this},_removeClipNode:function(){var t,C=f.get(this.rawNode,"clip-path");C&&(t=b.byId(C.match(/gfx_clip[\d]+/)[0]))&&t.parentNode.removeChild(t);return t}});q.Group=g("dojox.gfx.svg.Group",q.Shape,{constructor:function(){k.Container._init.call(this)},
setRawNode:function(t){this.rawNode=t;this.rawNode.__gfxObject__=this},destroy:function(){this.clear(!0);q.Shape.prototype.destroy.apply(this,arguments)}});q.Group.nodeType="g";q.Rect=g("dojox.gfx.svg.Rect",[q.Shape,k.Rect],{setShape:function(t){this.shape=h.makeParameters(this.shape,t);this.bbox=null;for(var C in this.shape)if("type"!=C&&"r"!=C){t=this.shape[C];if("width"===C||"height"===C)t=0>t?0:t;this.rawNode.setAttribute(C,t)}null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),
this.rawNode.setAttribute("rx",this.shape.r));return this}});q.Rect.nodeType="rect";q.Ellipse=g("dojox.gfx.svg.Ellipse",[q.Shape,k.Ellipse],{});q.Ellipse.nodeType="ellipse";q.Circle=g("dojox.gfx.svg.Circle",[q.Shape,k.Circle],{});q.Circle.nodeType="circle";q.Line=g("dojox.gfx.svg.Line",[q.Shape,k.Line],{});q.Line.nodeType="line";q.Polyline=g("dojox.gfx.svg.Polyline",[q.Shape,k.Polyline],{setShape:function(t,C){t&&t instanceof Array?(this.shape=h.makeParameters(this.shape,{points:t}),C&&this.shape.points.length&&
this.shape.points.push(this.shape.points[0])):this.shape=h.makeParameters(this.shape,t);this.bbox=null;this._normalizePoints();for(var E=[],F=this.shape.points,G=0;G<F.length;++G)E.push(F[G].x.toFixed(8),F[G].y.toFixed(8));this.rawNode.setAttribute("points",E.join(" "));return this}});q.Polyline.nodeType="polyline";q.Image=g("dojox.gfx.svg.Image",[q.Shape,k.Image],{setShape:function(t){this.shape=h.makeParameters(this.shape,t);this.bbox=null;t=this.rawNode;for(var C in this.shape)if("type"!=C&&"src"!=
C){var E=this.shape[C];if("width"===C||"height"===C)E=0>E?0:E;t.setAttribute(C,E)}t.setAttribute("preserveAspectRatio","none");r(t,q.xmlns.xlink,"xlink:href",this.shape.src);t.__gfxObject__=this;return this}});q.Image.nodeType="image";q.Text=g("dojox.gfx.svg.Text",[q.Shape,k.Text],{setShape:function(t){this.shape=h.makeParameters(this.shape,t);this.bbox=null;t=this.rawNode;var C=this.shape;t.setAttribute("x",C.x);t.setAttribute("y",C.y);t.setAttribute("text-anchor",C.align);t.setAttribute("text-decoration",
C.decoration);t.setAttribute("rotate",C.rotated?90:0);t.setAttribute("kerning",C.kerning?"auto":0);t.setAttribute("text-rendering",z);t.firstChild?t.firstChild.nodeValue=C.text:t.appendChild(m(C.text));return this},getTextWidth:function(){var t=this.rawNode,C=t.parentNode;t=t.cloneNode(!0);t.style.visibility="hidden";var E=0,F=t.firstChild.nodeValue;C.appendChild(t);if(""!=F)for(;!E;)E=t.getBBox?parseInt(t.getBBox().width):68;C.removeChild(t);return E},getBoundingBox:function(){var t=null;if(this.getShape().text)try{t=
this.rawNode.getBBox()}catch(C){t={x:0,y:0,width:0,height:0}}return t}});q.Text.nodeType="text";q.Path=g("dojox.gfx.svg.Path",[q.Shape,c.Path],{_updateWithSegment:function(t){this.inherited(arguments);"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(t){this.inherited(arguments);this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d");return this}});q.Path.nodeType="path";q.TextPath=g("dojox.gfx.svg.TextPath",
[q.Shape,c.TextPath],{_updateWithSegment:function(t){this.inherited(arguments);this._setTextPath()},setShape:function(t){this.inherited(arguments);this._setTextPath();return this},_setTextPath:function(){if("string"==typeof this.shape.path){var t=this.rawNode;if(!t.firstChild){var C=l(q.xmlns.svg,"textPath"),E=m("");C.appendChild(E);t.appendChild(C)}C=(C=t.firstChild.getAttributeNS(q.xmlns.xlink,"href"))&&q.getRef(C);if(!C&&(E=this._getParentSurface())){E=E.defNode;C=l(q.xmlns.svg,"path");var F=h._base._getUniqueId();
C.setAttribute("id",F);E.appendChild(C);r(t.firstChild,q.xmlns.xlink,"xlink:href","#"+F)}C&&C.setAttribute("d",this.shape.path)}},_setText:function(){var t=this.rawNode;if(!t.firstChild){var C=l(q.xmlns.svg,"textPath"),E=m("");C.appendChild(E);t.appendChild(C)}t=t.firstChild;C=this.text;t.setAttribute("alignment-baseline","middle");switch(C.align){case "middle":t.setAttribute("text-anchor","middle");t.setAttribute("startOffset","50%");break;case "end":t.setAttribute("text-anchor","end");t.setAttribute("startOffset",
"100%");break;default:t.setAttribute("text-anchor","start"),t.setAttribute("startOffset","0%")}t.setAttribute("baseline-shift","0.5ex");t.setAttribute("text-decoration",C.decoration);t.setAttribute("rotate",C.rotated?90:0);t.setAttribute("kerning",C.kerning?"auto":0);t.firstChild.data=C.text}});q.TextPath.nodeType="text";var y=534<function(){var t=/WebKit\/(\d*)/.exec(v);return t?t[1]:0}();q.Surface=g("dojox.gfx.svg.Surface",k.Surface,{constructor:function(){k.Container._init.call(this)},destroy:function(){k.Container.clear.call(this,
!0);this.defNode=null;this.inherited(arguments)},setDimensions:function(t,C){if(!this.rawNode)return this;var E=0>t?0:t,F=0>C?0:C;this.rawNode.setAttribute("width",E);this.rawNode.setAttribute("height",F);y&&(this.rawNode.style.width=E,this.rawNode.style.height=F);return this},getDimensions:function(){return this.rawNode?{width:h.normalizedLength(this.rawNode.getAttribute("width")),height:h.normalizedLength(this.rawNode.getAttribute("height"))}:null}});q.createSurface=function(t,C,E){var F=new q.Surface;
F.rawNode=l(q.xmlns.svg,"svg");F.rawNode.setAttribute("overflow","hidden");C&&F.rawNode.setAttribute("width",0>C?0:C);E&&F.rawNode.setAttribute("height",0>E?0:E);C=l(q.xmlns.svg,"defs");F.rawNode.appendChild(C);F.defNode=C;F._parent=b.byId(t);F._parent.appendChild(F.rawNode);h._base._fixMsTouchAction(F);return F};A={_setFont:function(){var t=this.fontStyle;this.rawNode.setAttribute("font-style",t.style);this.rawNode.setAttribute("font-variant",t.variant);this.rawNode.setAttribute("font-weight",t.weight);
this.rawNode.setAttribute("font-size",t.size);this.rawNode.setAttribute("font-family",t.family)}};var u=k.Container;g=q.Container={openBatch:function(){if(!this._batch){var t=q.useSvgWeb?a.doc.createDocumentFragment(!0):a.doc.createDocumentFragment();this.fragment=t}++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this.fragment&&!this._batch&&(this.rawNode.appendChild(this.fragment),delete this.fragment);return this},add:function(t){this!=t.getParent()&&(this.fragment?
this.fragment.appendChild(t.rawNode):this.rawNode.appendChild(t.rawNode),u.add.apply(this,arguments),t.setClip(t.clip));return this},remove:function(t,C){this==t.getParent()&&(this.rawNode==t.rawNode.parentNode&&this.rawNode.removeChild(t.rawNode),this.fragment&&this.fragment==t.rawNode.parentNode&&this.fragment.removeChild(t.rawNode),t._removeClipNode(),u.remove.apply(this,arguments));return this},clear:function(){for(var t=this.rawNode;t.lastChild;)t.removeChild(t.lastChild);var C=this.defNode;
if(C){for(;C.lastChild;)C.removeChild(C.lastChild);t.appendChild(C)}return u.clear.apply(this,arguments)},getBoundingBox:u.getBoundingBox,_moveChildToFront:u._moveChildToFront,_moveChildToBack:u._moveChildToBack};c=q.Creator={createObject:function(t,C){if(!this.rawNode)return null;var E=new t,F=l(q.xmlns.svg,t.nodeType);E.setRawNode(F);E.setShape(C);this.add(E);return E}};D.extend(q.Text,A);D.extend(q.TextPath,A);D.extend(q.Group,g);D.extend(q.Group,k.Creator);D.extend(q.Group,c);D.extend(q.Surface,
g);D.extend(q.Surface,k.Creator);D.extend(q.Surface,c);q.fixTarget=function(t,C){t.gfxTarget||(t.gfxTarget=B&&t.target.wholeText?t.target.parentElement.__gfxObject__:t.target.__gfxObject__);return!0};q.useSvgWeb&&(q.createSurface=function(t,C,E){var F=new q.Surface;C=0>C?0:C;E=0>E?0:E;if(!C||!E){var G=e.position(t);C=C||G.w;E=E||G.h}t=b.byId(t);G=t.id?t.id+"_svgweb":h._base._getUniqueId();var H=l(q.xmlns.svg,"svg");H.id=G;H.setAttribute("width",C);H.setAttribute("height",E);svgweb.appendChild(H,t);
H.addEventListener("SVGLoad",function(){F.rawNode=this;F.isLoaded=!0;var L=l(q.xmlns.svg,"defs");F.rawNode.appendChild(L);F.defNode=L;if(F.onLoad)F.onLoad(F)},!1);F.isLoaded=!1;return F},q.Surface.extend({destroy:function(){var t=this.rawNode;svgweb.removeChild(t,t.parentNode)}}),A={connect:function(t,C,E){"on"===t.substring(0,2)&&(t=t.substring(2));E=2==arguments.length?C:D.hitch(C,E);this.getEventSource().addEventListener(t,E,!1);return[this,t,E]},disconnect:function(t){this.getEventSource().removeEventListener(t[1],
t[2],!1);delete t[0]}},D.extend(q.Shape,A),D.extend(q.Surface,A));return q})},"dojox/gfx/shape":function(){define("./_base dojo/_base/lang dojo/_base/declare dojo/_base/kernel dojo/_base/sniff dojo/on dojo/_base/array dojo/dom-construct dojo/_base/Color ./matrix".split(" "),function(D,A,a,b,g,d,e,f,n,h){function k(l,r){for(var m=l.length-1;r<m;)l[r]=l[++r];l.length=m}var c=D.shape={};c.Shape=a("dojox.gfx.shape.Shape",null,{constructor:function(){this.parentMatrix=this.parent=this.bbox=this.strokeStyle=
this.fillStyle=this.matrix=this.shape=this.rawNode=null;if(g("gfxRegistry")){var l=c.register(this);this.getUID=function(){return l}}},destroy:function(){g("gfxRegistry")&&c.dispose(this);this.rawNode&&"__gfxObject__"in this.rawNode&&(this.rawNode.__gfxObject__=null);this.rawNode=null},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},
getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var l=this.getBoundingBox();if(!l)return null;var r=this._getRealMatrix();return[h.multiplyPoint(r,l.x,l.y),h.multiplyPoint(r,l.x+l.width,l.y),h.multiplyPoint(r,l.x+l.width,l.y+l.height),h.multiplyPoint(r,l.x,l.y+l.height)]},getEventSource:function(){return this.rawNode},setClip:function(l){this.clip=l},getClip:function(){return this.clip},setShape:function(l){this.shape=D.makeParameters(this.shape,l);this.bbox=null;
return this},setFill:function(l){if(!l)return this.fillStyle=null,this;var r=null;if("object"==typeof l&&"type"in l)switch(l.type){case "linear":r=D.makeParameters(D.defaultLinearGradient,l);break;case "radial":r=D.makeParameters(D.defaultRadialGradient,l);break;case "pattern":r=D.makeParameters(D.defaultPattern,l)}else r=D.normalizeColor(l);this.fillStyle=r;return this},setStroke:function(l){if(!l)return this.strokeStyle=null,this;if("string"==typeof l||A.isArray(l)||l instanceof n)l={color:l};l=
this.strokeStyle=D.makeParameters(D.defaultStroke,l);l.color=D.normalizeColor(l.color);return this},setTransform:function(l){this.matrix=h.clone(l?h.normalize(l):h.identity);return this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var l=this.getParent();l&&(l._moveChildToFront(this),this._moveToFront());return this},moveToBack:function(){var l=this.getParent();l&&(l._moveChildToBack(this),this._moveToBack());return this},_moveToFront:function(){},_moveToBack:function(){},
applyRightTransform:function(l){return l?this.setTransform([this.matrix,l]):this},applyLeftTransform:function(l){return l?this.setTransform([l,this.matrix]):this},applyTransform:function(l){return l?this.setTransform([this.matrix,l]):this},removeShape:function(l){this.parent&&this.parent.remove(this,l);return this},_setParent:function(l,r){this.parent=l;return this._updateParentMatrix(r)},_updateParentMatrix:function(l){this.parentMatrix=l?h.clone(l):null;return this._applyTransform()},_getRealMatrix:function(){for(var l=
this.matrix,r=this.parent;r;)r.matrix&&(l=h.multiply(r.matrix,l)),r=r.parent;return l}});c._eventsProcessing={on:function(l,r){return d(this.getEventSource(),l,c.fixCallback(this,D.fixTarget,r))},connect:function(l,r,m){"on"==l.substring(0,2)&&(l=l.substring(2));return this.on(l,m?A.hitch(r,m):r)},disconnect:function(l){return l.remove()}};c.fixCallback=function(l,r,m,q){q||(q=m,m=null);if(A.isString(q)){m=m||b.global;if(!m[q])throw['dojox.gfx.shape.fixCallback: scope["',q,'"] is null (scope\x3d"',
m,'")'].join("");return function(v){return r(v,l)?m[q].apply(m,arguments||[]):void 0}}return m?function(v){return r(v,l)?q.apply(m,arguments||[]):void 0}:function(v){return r(v,l)?q.apply(m,arguments):void 0}};A.extend(c.Shape,c._eventsProcessing);c.Container={_init:function(){this.children=[];this._batch=0},openBatch:function(){return this},closeBatch:function(){return this},add:function(l){var r=l.getParent();r&&r.remove(l,!0);this.children.push(l);return l._setParent(this,this._getRealMatrix())},
remove:function(l,r){for(var m=0;m<this.children.length;++m)if(this.children[m]==l){r||(l.parent=null,l.parentMatrix=null);k(this.children,m);break}return this},clear:function(l){for(var r,m=0;m<this.children.length;++m)r=this.children[m],r.parent=null,r.parentMatrix=null,l&&r.destroy();this.children=[];return this},getBoundingBox:function(){if(this.children){var l=null;e.forEach(this.children,function(r){var m=r.getBoundingBox();m&&((r=r.getTransform())&&(m=h.multiplyRectangle(r,m)),l?(l.x=Math.min(l.x,
m.x),l.y=Math.min(l.y,m.y),l.endX=Math.max(l.endX,m.x+m.width),l.endY=Math.max(l.endY,m.y+m.height)):l={x:m.x,y:m.y,endX:m.x+m.width,endY:m.y+m.height})});l&&(l.width=l.endX-l.x,l.height=l.endY-l.y);return l}return null},_moveChildToFront:function(l){for(var r=0;r<this.children.length;++r)if(this.children[r]==l){k(this.children,r);this.children.push(l);break}return this},_moveChildToBack:function(l){for(var r=0;r<this.children.length;++r)if(this.children[r]==l){k(this.children,r);this.children.unshift(l);
break}return this}};c.Surface=a("dojox.gfx.shape.Surface",null,{constructor:function(){this._parent=this.rawNode=null;this._nodes=[];this._events=[]},destroy:function(){e.forEach(this._nodes,f.destroy);this._nodes=[];e.forEach(this._events,function(l){l&&l.remove()});this._events=[];this.rawNode=null;if(g("ie"))for(;this._parent.lastChild;)f.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},
isLoaded:!0,onLoad:function(l){},whenLoaded:function(l,r){var m=A.hitch(l,r);if(this.isLoaded)m(this);else d.once(this,"load",function(q){m(q)})}});A.extend(c.Surface,c._eventsProcessing);c.Rect=a("dojox.gfx.shape.Rect",c.Shape,{constructor:function(l){this.shape=D.getDefault("Rect");this.rawNode=l},getBoundingBox:function(){return this.shape}});c.Ellipse=a("dojox.gfx.shape.Ellipse",c.Shape,{constructor:function(l){this.shape=D.getDefault("Ellipse");this.rawNode=l},getBoundingBox:function(){if(!this.bbox){var l=
this.shape;this.bbox={x:l.cx-l.rx,y:l.cy-l.ry,width:2*l.rx,height:2*l.ry}}return this.bbox}});c.Circle=a("dojox.gfx.shape.Circle",c.Shape,{constructor:function(l){this.shape=D.getDefault("Circle");this.rawNode=l},getBoundingBox:function(){if(!this.bbox){var l=this.shape;this.bbox={x:l.cx-l.r,y:l.cy-l.r,width:2*l.r,height:2*l.r}}return this.bbox}});c.Line=a("dojox.gfx.shape.Line",c.Shape,{constructor:function(l){this.shape=D.getDefault("Line");this.rawNode=l},getBoundingBox:function(){if(!this.bbox){var l=
this.shape;this.bbox={x:Math.min(l.x1,l.x2),y:Math.min(l.y1,l.y2),width:Math.abs(l.x2-l.x1),height:Math.abs(l.y2-l.y1)}}return this.bbox}});c.Polyline=a("dojox.gfx.shape.Polyline",c.Shape,{constructor:function(l){this.shape=D.getDefault("Polyline");this.rawNode=l},setShape:function(l,r){l&&l instanceof Array?(this.inherited(arguments,[{points:l}]),r&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[l]);return this},_normalizePoints:function(){var l=
this.shape.points,r=l&&l.length;if(r&&"number"==typeof l[0]){for(var m=[],q=0;q<r;q+=2)m.push({x:l[q],y:l[q+1]});this.shape.points=m}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var l=this.shape.points,r=l.length,m=l[0],q=m.x,v=m.y,B=m.x,w=m.y,z=1;z<r;++z)m=l[z],q>m.x&&(q=m.x),B<m.x&&(B=m.x),v>m.y&&(v=m.y),w<m.y&&(w=m.y);this.bbox={x:q,y:v,width:B-q,height:w-v}}return this.bbox}});c.Image=a("dojox.gfx.shape.Image",c.Shape,{constructor:function(l){this.shape=D.getDefault("Image");
this.rawNode=l},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}});c.Text=a(c.Shape,{constructor:function(l){this.fontStyle=null;this.shape=D.getDefault("Text");this.rawNode=l},getFont:function(){return this.fontStyle},setFont:function(l){this.fontStyle="string"==typeof l?D.splitFontString(l):D.makeParameters(D.defaultFont,l);this._setFont();return this},getBoundingBox:function(){var l=null;this.getShape().text&&(l=D._base._computeTextBoundingBox(this));
return l}});c.Creator={createShape:function(l){switch(l.type){case D.defaultPath.type:return this.createPath(l);case D.defaultRect.type:return this.createRect(l);case D.defaultCircle.type:return this.createCircle(l);case D.defaultEllipse.type:return this.createEllipse(l);case D.defaultLine.type:return this.createLine(l);case D.defaultPolyline.type:return this.createPolyline(l);case D.defaultImage.type:return this.createImage(l);case D.defaultText.type:return this.createText(l);case D.defaultTextPath.type:return this.createTextPath(l)}return null},
createGroup:function(){return this.createObject(D.Group)},createRect:function(l){return this.createObject(D.Rect,l)},createEllipse:function(l){return this.createObject(D.Ellipse,l)},createCircle:function(l){return this.createObject(D.Circle,l)},createLine:function(l){return this.createObject(D.Line,l)},createPolyline:function(l){return this.createObject(D.Polyline,l)},createImage:function(l){return this.createObject(D.Image,l)},createText:function(l){return this.createObject(D.Text,l)},createPath:function(l){return this.createObject(D.Path,
l)},createTextPath:function(l){return this.createObject(D.TextPath,{}).setText(l)},createObject:function(l,r){return null}};return c})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(D,A){var a=D.matrix={},b={};a._degToRad=function(g){return b[g]||(b[g]=Math.PI*g/180)};a._radToDeg=function(g){return g/Math.PI*180};a.Matrix2D=function(g){if(g)if("number"==typeof g)this.xx=this.yy=g;else if(g instanceof Array){if(0<g.length){for(var d=a.normalize(g[0]),e=1;e<g.length;++e){var f=
d,n=a.normalize(g[e]);d=new a.Matrix2D;d.xx=f.xx*n.xx+f.xy*n.yx;d.xy=f.xx*n.xy+f.xy*n.yy;d.yx=f.yx*n.xx+f.yy*n.yx;d.yy=f.yx*n.xy+f.yy*n.yy;d.dx=f.xx*n.dx+f.xy*n.dy+f.dx;d.dy=f.yx*n.dx+f.yy*n.dy+f.dy}A.mixin(this,d)}}else A.mixin(this,g)};A.extend(a.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});A.mixin(a,{identity:new a.Matrix2D,flipX:new a.Matrix2D({xx:-1}),flipY:new a.Matrix2D({yy:-1}),flipXY:new a.Matrix2D({xx:-1,yy:-1}),translate:function(g,d){return 1<arguments.length?new a.Matrix2D({dx:g,dy:d}):
new a.Matrix2D({dx:g.x,dy:g.y})},scale:function(g,d){return 1<arguments.length?new a.Matrix2D({xx:g,yy:d}):"number"==typeof g?new a.Matrix2D({xx:g,yy:g}):new a.Matrix2D({xx:g.x,yy:g.y})},rotate:function(g){var d=Math.cos(g);g=Math.sin(g);return new a.Matrix2D({xx:d,xy:-g,yx:g,yy:d})},rotateg:function(g){return a.rotate(a._degToRad(g))},skewX:function(g){return new a.Matrix2D({xy:Math.tan(g)})},skewXg:function(g){return a.skewX(a._degToRad(g))},skewY:function(g){return new a.Matrix2D({yx:Math.tan(g)})},
skewYg:function(g){return a.skewY(a._degToRad(g))},reflect:function(g,d){1==arguments.length&&(d=g.y,g=g.x);var e=g*g,f=d*d,n=e+f,h=2*g*d/n;return new a.Matrix2D({xx:2*e/n-1,xy:h,yx:h,yy:2*f/n-1})},project:function(g,d){1==arguments.length&&(d=g.y,g=g.x);var e=g*g,f=d*d,n=e+f,h=g*d/n;return new a.Matrix2D({xx:e/n,xy:h,yx:h,yy:f/n})},normalize:function(g){return g instanceof a.Matrix2D?g:new a.Matrix2D(g)},isIdentity:function(g){return 1==g.xx&&0==g.xy&&0==g.yx&&1==g.yy&&0==g.dx&&0==g.dy},clone:function(g){var d=
new a.Matrix2D,e;for(e in g)"number"==typeof g[e]&&"number"==typeof d[e]&&d[e]!=g[e]&&(d[e]=g[e]);return d},invert:function(g){g=a.normalize(g);var d=g.xx*g.yy-g.xy*g.yx;return g=new a.Matrix2D({xx:g.yy/d,xy:-g.xy/d,yx:-g.yx/d,yy:g.xx/d,dx:(g.xy*g.dy-g.yy*g.dx)/d,dy:(g.yx*g.dx-g.xx*g.dy)/d})},_multiplyPoint:function(g,d,e){return{x:g.xx*d+g.xy*e+g.dx,y:g.yx*d+g.yy*e+g.dy}},multiplyPoint:function(g,d,e){g=a.normalize(g);return"number"==typeof d&&"number"==typeof e?a._multiplyPoint(g,d,e):a._multiplyPoint(g,
d.x,d.y)},multiplyRectangle:function(g,d){var e=a.normalize(g);d=d||{x:0,y:0,width:0,height:0};if(a.isIdentity(e))return{x:d.x,y:d.y,width:d.width,height:d.height};var f=a.multiplyPoint(e,d.x,d.y),n=a.multiplyPoint(e,d.x,d.y+d.height),h=a.multiplyPoint(e,d.x+d.width,d.y);e=a.multiplyPoint(e,d.x+d.width,d.y+d.height);var k=Math.min(f.x,n.x,h.x,e.x),c=Math.min(f.y,n.y,h.y,e.y);return{x:k,y:c,width:Math.max(f.x,n.x,h.x,e.x)-k,height:Math.max(f.y,n.y,h.y,e.y)-c}},multiply:function(g){for(var d=a.normalize(g),
e=1;e<arguments.length;++e){var f=d,n=a.normalize(arguments[e]);d=new a.Matrix2D;d.xx=f.xx*n.xx+f.xy*n.yx;d.xy=f.xx*n.xy+f.xy*n.yy;d.yx=f.yx*n.xx+f.yy*n.yx;d.yy=f.yx*n.xy+f.yy*n.yy;d.dx=f.xx*n.dx+f.xy*n.dy+f.dx;d.dy=f.yx*n.dx+f.yy*n.dy+f.dy}return d},_sandwich:function(g,d,e){return a.multiply(a.translate(d,e),g,a.translate(-d,-e))},scaleAt:function(g,d,e,f){switch(arguments.length){case 4:return a._sandwich(a.scale(g,d),e,f);case 3:return"number"==typeof e?a._sandwich(a.scale(g),d,e):a._sandwich(a.scale(g,
d),e.x,e.y)}return a._sandwich(a.scale(g),d.x,d.y)},rotateAt:function(g,d,e){return 2<arguments.length?a._sandwich(a.rotate(g),d,e):a._sandwich(a.rotate(g),d.x,d.y)},rotategAt:function(g,d,e){return 2<arguments.length?a._sandwich(a.rotateg(g),d,e):a._sandwich(a.rotateg(g),d.x,d.y)},skewXAt:function(g,d,e){return 2<arguments.length?a._sandwich(a.skewX(g),d,e):a._sandwich(a.skewX(g),d.x,d.y)},skewXgAt:function(g,d,e){return 2<arguments.length?a._sandwich(a.skewXg(g),d,e):a._sandwich(a.skewXg(g),d.x,
d.y)},skewYAt:function(g,d,e){return 2<arguments.length?a._sandwich(a.skewY(g),d,e):a._sandwich(a.skewY(g),d.x,d.y)},skewYgAt:function(g,d,e){return 2<arguments.length?a._sandwich(a.skewYg(g),d,e):a._sandwich(a.skewYg(g),d.x,d.y)}});D.Matrix2D=a.Matrix2D;return a})},"dojox/gfx/path":function(){define(["./_base","dojo/_base/lang","dojo/_base/declare","./matrix","./shape"],function(D,A,a,b,g){g=a("dojox.gfx.path.Path",g.Shape,{constructor:function(d){this.shape=A.clone(D.defaultPath);this.segments=
[];this.tbbox=null;this.absolute=!0;this.last={};this.rawNode=d;this.segmented=!1},setAbsoluteMode:function(d){this._confirmSegmented();this.absolute="string"==typeof d?"absolute"==d:d;return this},getAbsoluteMode:function(){this._confirmSegmented();return this.absolute},getBoundingBox:function(){this._confirmSegmented();return this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){this._confirmSegmented();
if(this.tbbox)return this.tbbox;var d=this.bbox,e=this._getRealMatrix();this.bbox=null;for(var f=0,n=this.segments.length;f<n;++f)this._updateWithSegment(this.segments[f],e);e=this.bbox;this.bbox=d;return this.tbbox=e?[{x:e.l,y:e.t},{x:e.r,y:e.t},{x:e.r,y:e.b},{x:e.l,y:e.b}]:null},getLastPosition:function(){this._confirmSegmented();return"x"in this.last?this.last:null},_applyTransform:function(){this.tbbox=null;return this.inherited(arguments)},_updateBBox:function(d,e,f){f&&(e=b.multiplyPoint(f,
d,e),d=e.x,e=e.y);this.bbox&&"l"in this.bbox?(this.bbox.l>d&&(this.bbox.l=d),this.bbox.r<d&&(this.bbox.r=d),this.bbox.t>e&&(this.bbox.t=e),this.bbox.b<e&&(this.bbox.b=e)):this.bbox={l:d,b:e,r:d,t:e}},_updateWithSegment:function(d,e){var f=d.args,n=f.length,h;switch(d.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(h=0;h<n;h+=2)this._updateBBox(f[h],f[h+1],e);this.last.x=f[n-2];this.last.y=f[n-1];this.absolute=!0;break;case "H":for(h=0;h<n;++h)this._updateBBox(f[h],this.last.y,e);
this.last.x=f[n-1];this.absolute=!0;break;case "V":for(h=0;h<n;++h)this._updateBBox(this.last.x,f[h],e);this.last.y=f[n-1];this.absolute=!0;break;case "m":h=0;"x"in this.last||(this._updateBBox(this.last.x=f[0],this.last.y=f[1],e),h=2);for(;h<n;h+=2)this._updateBBox(this.last.x+=f[h],this.last.y+=f[h+1],e);this.absolute=!1;break;case "l":case "t":for(h=0;h<n;h+=2)this._updateBBox(this.last.x+=f[h],this.last.y+=f[h+1],e);this.absolute=!1;break;case "h":for(h=0;h<n;++h)this._updateBBox(this.last.x+=
f[h],this.last.y,e);this.absolute=!1;break;case "v":for(h=0;h<n;++h)this._updateBBox(this.last.x,this.last.y+=f[h],e);this.absolute=!1;break;case "c":for(h=0;h<n;h+=6)this._updateBBox(this.last.x+f[h],this.last.y+f[h+1],e),this._updateBBox(this.last.x+f[h+2],this.last.y+f[h+3],e),this._updateBBox(this.last.x+=f[h+4],this.last.y+=f[h+5],e);this.absolute=!1;break;case "s":case "q":for(h=0;h<n;h+=4)this._updateBBox(this.last.x+f[h],this.last.y+f[h+1],e),this._updateBBox(this.last.x+=f[h+2],this.last.y+=
f[h+3],e);this.absolute=!1;break;case "A":for(h=0;h<n;h+=7)this._updateBBox(f[h+5],f[h+6],e);this.last.x=f[n-2];this.last.y=f[n-1];this.absolute=!0;break;case "a":for(h=0;h<n;h+=7)this._updateBBox(this.last.x+=f[h+5],this.last.y+=f[h+6],e);this.absolute=!1}var k=[d.action];for(h=0;h<n;++h)k.push(D.formatNumber(f[h],!0));if("string"==typeof this.shape.path)this.shape.path+=k.join("");else for(h=0,n=k.length;h<n;++h)this.shape.path.push(k[h])},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},
_pushSegment:function(d,e){this.tbbox=null;var f=this._validSegments[d.toLowerCase()];"number"==typeof f&&(f?e.length>=f&&(f={action:d,args:e.slice(0,e.length-e.length%f)},this.segments.push(f),this._updateWithSegment(f)):(f={action:d,args:[]},this.segments.push(f),this._updateWithSegment(f)))},_collectArgs:function(d,e){for(var f=0;f<e.length;++f){var n=e[f];"boolean"==typeof n?d.push(n?1:0):"number"==typeof n?d.push(n):n instanceof Array?this._collectArgs(d,n):"x"in n&&"y"in n&&d.push(n.x,n.y)}},
moveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"M":"m",d);return this},lineTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"L":"l",d);return this},hLineTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"H":"h",d);return this},vLineTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);
this._pushSegment(this.absolute?"V":"v",d);return this},curveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"C":"c",d);return this},smoothCurveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"S":"s",d);return this},qCurveTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"Q":"q",d);return this},qSmoothCurveTo:function(){this._confirmSegmented();
var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"T":"t",d);return this},arcTo:function(){this._confirmSegmented();var d=[];this._collectArgs(d,arguments);this._pushSegment(this.absolute?"A":"a",d);return this},closePath:function(){this._confirmSegmented();this._pushSegment("Z",[]);return this},_confirmSegmented:function(){if(!this.segmented){var d=this.shape.path;this.shape.path=[];this._setPath(d);this.shape.path=this.shape.path.join("");this.segmented=!0}},_setPath:function(d){d=
A.isArray(d)?d:d.match(D.pathSvgRegExp);this.segments=[];this.absolute=!0;this.bbox={};this.last={};if(d){for(var e="",f=[],n=d.length,h=0;h<n;++h){var k=d[h],c=parseFloat(k);isNaN(c)?(e&&this._pushSegment(e,f),f=[],e=k):f.push(c)}this._pushSegment(e,f)}},setShape:function(d){this.inherited(arguments,["string"==typeof d?{path:d}:d]);this.segmented=!1;this.segments=[];D.lazyPathSegmentation||this._confirmSegmented();return this},_2PI:2*Math.PI});a=a("dojox.gfx.path.TextPath",g,{constructor:function(d){"text"in
this||(this.text=A.clone(D.defaultTextPath));"fontStyle"in this||(this.fontStyle=A.clone(D.defaultFont))},getText:function(){return this.text},setText:function(d){this.text=D.makeParameters(this.text,"string"==typeof d?{text:d}:d);this._setText();return this},getFont:function(){return this.fontStyle},setFont:function(d){this.fontStyle="string"==typeof d?D.splitFontString(d):D.makeParameters(D.defaultFont,d);this._setFont();return this}});return D.path={Path:g,TextPath:a}})},"dojox/gfx/filters":function(){define(["dojo/_base/lang",
"dojo/_base/array"],function(D,A){var a={},b={x:"0%",y:"0%",width:"100%",height:"100%"},g={};a.createFilter=function(c,l){var r=D.mixin({},b,c);r.primitives||(r.primitives=[]);l&&Array.prototype.push.apply(r.primitives,l);return r};var d=function(c,l,r){l instanceof Array&&(r=l,l=null);l=D.mixin({},l);l.children=r;l.tag=c;return l};A.forEach("feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feFlood feGaussianBlur feImage feMorphology feOffset feSpecularLighting feTile feTurbulence feDistantLight fePointLight feSpotLight feMergeNode feFuncA feFuncR feFuncG feFuncB".split(" "),
function(c){a[c]=function(l,r){return d(c,l,r)}});a.feMerge=function(c,l){if("string"===typeof c){for(var r=[],m=0;m<arguments.length;++m)r.push(a.feMergeNode({"in":arguments[m]}));return d("feMerge",{},r)}return d("feMerge",c,l)};var e=a.createFilter;g.convolutions=[e({_gfxName:"boxBlur3"},[a.feConvolveMatrix({"in":"SourceGraphic",order:3,divisor:9,kernelMatrix:"1,1,1,1,1,1,1,1,1"})]),e({_gfxName:"boxBlur5"},[a.feConvolveMatrix({"in":"SourceGraphic",order:5,divisor:25,kernelMatrix:"1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1"})]),
e({_gfxName:"verticalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 0 1 -1 0 1 -1 0 1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),e({_gfxName:"horizontalEdges",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"1 1 1 0 0 0 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",
tableValues:"1,1"})])]),e({_gfxName:"allEdges3",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:1,kernelMatrix:"-1 -1 -1 -1 8 -1 -1 -1 -1"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",tableValues:"1,1"})])]),e({_gfxName:"edgeEnhance",filterUnits:"objectBoundingBox"},[a.feConvolveMatrix({"in":"SourceGraphic",result:"kernel",order:3,divisor:-1,kernelMatrix:"0 1 0 1 -5 1 0 1 0"}),a.feComponentTransfer({"in":"kernel"},[a.feFuncA({type:"table",
tableValues:"1,1"})])])];A.forEach(g.convolutions,function(c){D.mixin(c,b)});g.shadows=[e({_gfxName:"fastSmallDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),a.feOffset({dx:3,dy:3,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"fastDropShadow"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.7,0"}),
a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"fastDropShadowLight"},[a.feColorMatrix({"in":"SourceAlpha",type:"matrix",result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,0.4,0"}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"dropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4}),a.feOffset({dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur",
"SourceGraphic")]),e({_gfxName:"dropShadowLight"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:4,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:5,dy:5,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"smallDropShadow"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3}),a.feOffset({dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")]),e({_gfxName:"smallDropShadowLight"},
[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:3,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:.5})]),a.feOffset({"in":"lessblur",dx:2,dy:2,result:"offsetBlur"}),a.feMerge("offsetBlur","SourceGraphic")])];var f={x:"-10%",y:"-10%",width:"125%",height:"125%"};A.forEach(g.shadows,function(c){D.mixin(c,f)});g.blurs=[e({_gfxName:"blur1",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:1})]),e({_gfxName:"blur2",
x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2})]),e({_gfxName:"blur4",x:"-15%",y:"-15%",width:"130%",height:"130%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:4})]),e({_gfxName:"blur8",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:8})]),e({_gfxName:"glow",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceGraphic",stdDeviation:2}),a.feComponentTransfer([a.feFuncA({type:"linear",
slope:10})])])];g.colors=[e({_gfxName:"negate"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"1,0"}),a.feFuncG({type:"table",tableValues:"1,0"}),a.feFuncB({type:"table",tableValues:"1,0"})])]),e({_gfxName:"sepia"},[a.feColorMatrix({result:"grey",values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"}),a.feComponentTransfer({"in":"grey"},[a.feFuncR({type:"linear",slope:.5,intercept:.5}),a.feFuncB({type:"table",tableValues:"0,0"})])]),e({_gfxName:"grayscale"},
[a.feColorMatrix({values:"0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0.2125,0.7154,0.0721,0,0,0,0,0,1,0"})]),e({_gfxName:"showRed"},[a.feComponentTransfer([a.feFuncG({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),e({_gfxName:"showGreen"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncB({type:"table",tableValues:"0,0"})])]),e({_gfxName:"showBlue"},[a.feComponentTransfer([a.feFuncR({type:"table",tableValues:"0,0"}),a.feFuncG({type:"table",
tableValues:"0,0"})])]),e({_gfxName:"hueRotate60"},[a.feColorMatrix({type:"hueRotate",values:60})]),e({_gfxName:"hueRotate120"},[a.feColorMatrix({type:"hueRotate",values:120})]),e({_gfxName:"hueRotate180"},[a.feColorMatrix({type:"hueRotate",values:180})]),e({_gfxName:"hueRotate270"},[a.feColorMatrix({type:"hueRotate",values:270})])];A.forEach(g.colors,function(c){D.mixin(c,b)});g.miscs=[e({_gfxName:"thinEmbossDropShadow",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:1,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"embossDropShadow",
x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"4",result:"blur"}),a.feOffset({"in":"blur",dx:4,dy:4,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:5,specularConstant:.75,specularExponent:20,"lighting-color":"#bbbbbb",result:"specOut"},[a.fePointLight({x:-5E3,y:-1E4,z:2E4})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,
k2:1,k3:1,k4:0,result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"largeEmbossDropShadow",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:5,result:"blur"}),a.feOffset({"in":"blur",dx:6,dy:6,result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:8,specularConstant:1,specularExponent:12,result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",in2:"SourceGraphic",operator:"in",result:"specOut"}),
a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",result:"litPaint",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"thinEmbossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:1,result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:8,
specularConstant:1,specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"embossDropShadowLight",x:"-5%",y:"-5%",width:"120%",height:"120%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",result:"blur"}),a.feComponentTransfer({"in":"blur",
result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"lessblur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",result:"litPaint",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"}),a.feMerge("offsetBlur",
"litPaint")]),e({_gfxName:"largeEmbossDropShadowLight",x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),a.feComponentTransfer({"in":"blur",result:"lessblur"},[a.feFuncA({type:"linear",slope:"0.5"})]),a.feOffset({"in":"lessblur",dx:"6",dy:"6",result:"offsetBlur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"spec"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"spec",
in2:"SourceGraphic",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"}),a.feMerge("offsetBlur","litPaint")]),e({_gfxName:"fuzzy",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]),e({_gfxName:"veryFuzzy",
x:"-20%",y:"-20%",width:"140%",height:"140%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"turb2"}),a.feDisplacementMap({"in":"SourceGraphic",in2:"turb2",result:"turb2",scale:"35",xChannelSelector:"R",yChannelSelector:"G"})]),e({_gfxName:"melting",x:"-10%",y:"-10%",width:"120%",height:"120%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"2",result:"turb"}),a.feDisplacementMap({result:"bended","in":"SourceGraphic",in2:"turb",scale:"25",xChannelSelector:"R",
yChannelSelector:"G"}),a.feGaussianBlur({"in":"bended",stdDeviation:"1",result:"bb"}),a.feComponentTransfer({"in":"bb",result:"BendedSource"},[a.feFuncA({type:"linear",slope:10,intercept:"-1"})]),a.feComponentTransfer({"in":"BendedSource",result:"BendedAlpha"},[a.feFuncR({type:"linear",slope:"0",intercept:"0"}),a.feFuncG({type:"linear",slope:"0",intercept:"0"}),a.feFuncB({type:"linear",slope:"0",intercept:"0"}),a.feFuncA({type:"linear",slope:"1",intercept:"0"})]),a.feGaussianBlur({"in":"BendedAlpha",
stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur","lighting-color":"rgb(80%, 80%, 80%)",surfaceScale:"5",specularConstant:"1",specularExponent:"10",result:"specularOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"20000"})]),a.feComposite({"in":"specularOut",in2:"BendedAlpha",operator:"in",result:"specularOut"}),a.feComposite({"in":"BendedSource",in2:"specularOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0",result:"litPaint"})]),e({_gfxName:"impressionist",x:"0%",y:"0%",width:"100%",
height:"100%"},[a.feMorphology({"in":"SourceGraphic",operator:"dilate",radius:"2"})]),e({_gfxName:"holes",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"0,1"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})]),e({_gfxName:"holesComplement",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"fractalNoise",
baseFrequency:"0.1",numOctaves:"1",result:"texture"}),a.feComponentTransfer({"in":"texture",result:"holes"},[a.feFuncA({type:"discrete",tableValues:"1,0"})]),a.feComposite({"in":"SourceGraphic",in2:"holes",operator:"out"})])];g.reliefs=[e({_gfxName:"bumpIn",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),a.feComponentTransfer({"in":"lumalpha",result:"invertedalpha"},[a.feFuncA({type:"table",tableValues:"1,0"})]),a.feDiffuseLighting({"in":"invertedalpha",
"lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"invertedalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),e({_gfxName:"bumpOut",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feColorMatrix({"in":"SourceGraphic",type:"luminanceToAlpha",result:"lumalpha"}),
a.feDiffuseLighting({"in":"lumalpha","lighting-color":"rgb(60%, 60%, 60%)",result:"diffuse",surfaceScale:"5"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"lumalpha",result:"specular",surfaceScale:"5",specularExponent:"6"},[a.feDistantLight({azimuth:"135",elevation:"30"})]),a.feComposite({"in":"diffuse",in2:"specular",operator:"arithmetic",k2:"1.0",k3:"1.0"})]),e({_gfxName:"thinEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",
stdDeviation:"1",result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),e({_gfxName:"emboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"3",
result:"blur"}),a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]),e({_gfxName:"largeEmboss",x:"-5%",y:"-5%",width:"110%",height:"110%"},[a.feGaussianBlur({"in":"SourceAlpha",stdDeviation:"5",result:"blur"}),
a.feSpecularLighting({"in":"blur",surfaceScale:"8",specularConstant:"1",specularExponent:"12",result:"specOut"},[a.fePointLight({x:"-5000",y:"-10000",z:"12000"})]),a.feComposite({"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"}),a.feComposite({"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})])];g.textures=[e({_gfxName:"paper",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.01",numOctaves:"5",result:"texture"}),
a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),e({_gfxName:"swirl",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.05",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),
a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),e({_gfxName:"swirl2",x:"0%",y:"0%",width:"100%",height:"100%"},[a.feTurbulence({type:"turbulence",baseFrequency:"0.15",numOctaves:"1",result:"texture"}),a.feDiffuseLighting({"in":"texture",result:"diffuse",surfaceScale:"-10"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"diffuse",in2:"SourceGraphic",operator:"arithmetic",k1:"1",k2:"0",k3:"0",k4:"0"})]),e({_gfxName:"gold",
x:"-5%",y:"-5%",width:"115%",height:"110%"},[a.feTurbulence({baseFrequency:"0.2",numOctaves:"1",type:"turbulence",result:"turb"}),a.feComposite({"in":"SourceGraphic",in2:"turb",operator:"arithmetic",k2:"0.6",k3:"0.4",result:"turb"}),a.feComposite({"in":"turb",in2:"SourceGraphic",operator:"in",result:"bump"}),a.feDiffuseLighting({"in":"turb",surfaceScale:"6.0","lighting-color":"rgb(60%, 50%, 0%)",diffuseConstant:"1.0",result:"diffuse"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feSpecularLighting({"in":"bump",
surfaceScale:"6.0",specularConstant:"1.0",specularExponent:"10.0",result:"specularOut"},[a.feDistantLight({azimuth:"135",elevation:"60"})]),a.feComposite({"in":"specularOut",in2:"SourceGraphic",operator:"in",result:"specularOut"}),a.feComposite({"in":"bump",in2:"diffuse",operator:"arithmetic",k1:"0.7",k2:"0.3",result:"litPaint"}),a.feComposite({"in":"litPaint",in2:"specularOut",operator:"arithmetic",k2:"1.0",k3:"0.7",result:"litPaint"})])];for(var n in g)if(g.hasOwnProperty(n)){a[n]={};for(var h=
g[n],k=0;k<h.length;++k)(function(){var c=h[k];a[n][c._gfxName]=function(l){return D.delegate(c,l)}})()}return a})},"dojox/gfx/svgext":function(){define(["dojo/dom","dojo/_base/array","dojo/_base/window","./_base","./svg"],function(D,A,a,b,g){function d(f,n){var h=n.ownerDocument.createElementNS(g.xmlns.svg,f.tag);n.appendChild(h);for(var k in f)k in e||h.setAttribute(k,f[k]);f.children&&A.forEach(f.children,function(c){d(c,h)});return h}a=b.svgext={};var e={primitives:null,tag:null,children:null};
g.Shape.extend({addRenderingOption:function(f,n){this.rawNode.setAttribute(f,n);return this},setFilter:function(f){if(!f)return this.rawNode.removeAttribute("filter"),this.filter=null,this;this.filter=f;f.id=f.id||b._base._getUniqueId();var n=D.byId(f.id);if(!n){n=this.rawNode.ownerDocument.createElementNS(g.xmlns.svg,"filter");n.setAttribute("filterUnits","userSpaceOnUse");for(var h in f)h in e||n.setAttribute(h,f[h]);A.forEach(f.primitives,function(k){d(k,n)});(h=this._getParentSurface())&&h.defNode.appendChild(n)}this.rawNode.setAttribute("filter",
"url(#"+f.id+")");return this},getFilter:function(){return this.filter}});return a})},"dojox/gfx/_gfxBidiSupport":function(){define("./_base dojo/_base/lang dojo/_base/sniff dojo/dom dojo/_base/html dojo/_base/array ./utils ./shape ./path dojox/string/BidiEngine".split(" "),function(D,A,a,b,g,d,e,f,n,h){function k(r,m){var q=c(m);q&&D.utils.forEach(r,function(v){if(v instanceof D.Surface||v instanceof D.Group)v.textDir=q;v instanceof D.Text&&v.setShape({textDir:q});v instanceof D.TextPath&&v.setText({textDir:q})},
r);return r}function c(r){var m=["ltr","rtl","auto"];return r&&(r=r.toLowerCase(),0>d.indexOf(m,r))?null:r}A.getObject("dojox.gfx._gfxBidiSupport",!0);switch(D.renderer){case "vml":D.isVml=!0;break;case "svg":D.isSvg=!0;D.svg.useSvgWeb&&(D.isSvgWeb=!0);break;case "silverlight":D.isSilverlight=!0;break;case "canvas":case "canvasWithEvents":D.isCanvas=!0}var l=new h;A.extend(D.shape.Surface,{textDir:"",setTextDir:function(r){k(this,r)},getTextDir:function(){return this.textDir}});A.extend(D.Group,{textDir:"",
setTextDir:function(r){k(this,r)},getTextDir:function(){return this.textDir}});A.extend(D.Text,{textDir:"",formatText:function(r,m){if(m&&r&&1<r.length){var q="ltr",v=m;if("auto"==v){if(D.isVml)return r;v=l.checkContextual(r)}if(D.isVml)return q=l.checkContextual(r),v!=q?"rtl"==v?l.hasBidiChar(r)?"\u200f\u200f"+r:l.bidiTransform(r,"IRNNN","ILNNN"):"\u200e"+r:r;if(D.isSvgWeb)return"rtl"==v?l.bidiTransform(r,"IRNNN","ILNNN"):r;if(D.isSilverlight)return"rtl"==v?l.bidiTransform(r,"IRNNN","VLYNN"):l.bidiTransform(r,
"ILNNN","VLYNN");if(D.isCanvas)return"rtl"==v?"\u202b"+r+"\u202c":"\u202a"+r+"\u202c";if(D.isSvg)return 4>a("ff")?"rtl"==v?l.bidiTransform(r,"IRYNN","VLNNN"):l.bidiTransform(r,"ILYNN","VLNNN"):"\u200e"+("rtl"==v?"\u202b":"\u202a")+r+"\u202c"}return r},bidiPreprocess:function(r){return r}});A.extend(D.TextPath,{textDir:"",formatText:function(r,m){if(m&&r&&1<r.length){var q="ltr",v=m;if("auto"==v){if(D.isVml)return r;v=l.checkContextual(r)}if(D.isVml)return q=l.checkContextual(r),v!=q?"rtl"==v?l.hasBidiChar(r)?
"\u200f\u200f"+r:l.bidiTransform(r,"IRNNN","ILNNN"):"\u200e"+r:r;if(D.isSvgWeb)return"rtl"==v?l.bidiTransform(r,"IRNNN","ILNNN"):r;D.isSvg&&(r=a("opera")||4<=a("ff")?"\u200e"+("rtl"==v?"\u202b":"\u202a")+r+"\u202c":"rtl"==v?l.bidiTransform(r,"IRYNN","VLNNN"):l.bidiTransform(r,"ILYNN","VLNNN"))}return r},bidiPreprocess:function(r){r&&"string"==typeof r&&(this.origText=r,r=this.formatText(r,this.textDir));return r}});e=function(r,m,q,v){var B=r.prototype[m];r.prototype[m]=function(){var w;q&&(w=q.apply(this,
arguments));w=B.call(this,w);v&&(w=v.call(this,w,arguments));return w}};f=function(r){r&&(r.textDir&&(r.textDir=c(r.textDir)),r.text&&r.text instanceof Array&&(r.text=r.text.join(",")));!r||void 0==r.text&&!r.textDir||this.textDir==r.textDir&&r.text==this.origText||(this.origText=void 0!=r.text?r.text:this.origText,r.textDir&&(this.textDir=r.textDir),r.text=this.formatText(this.origText,this.textDir));return this.bidiPreprocess(r)};e(D.Text,"setShape",f,null);e(D.TextPath,"setText",f,null);f=function(r){(r=
A.clone(r))&&this.origText&&(r.text=this.origText);return r};e(D.Text,"getShape",null,f);e(D.TextPath,"getText",null,f);f=function(r,m){var q;m&&m[0]&&(q=c(m[0]));r.setTextDir(q?q:this.textDir);return r};e(D.Surface,"createGroup",null,f);e(D.Group,"createGroup",null,f);f=function(r){if(r){var m=r.textDir?c(r.textDir):this.textDir;m&&(r.textDir=m)}return r};e(D.Surface,"createText",f,null);e(D.Surface,"createTextPath",f,null);e(D.Group,"createText",f,null);e(D.Group,"createTextPath",f,null);D.createSurface=
function(r,m,q,v){m=D[D.renderer].createSurface(r,m,q);v=c(v);if(D.isSvgWeb)return m.textDir=v?v:g.style(b.byId(r),"direction"),m;if(D.isVml||D.isSvg||D.isCanvas)m.textDir=v?v:g.style(m.rawNode,"direction");D.isSilverlight&&(m.textDir=v?v:g.style(m._nodes[1],"direction"));return m};return D})},"dojox/gfx/utils":function(){define("dojo/_base/kernel dojo/_base/lang ./_base dojo/_base/html dojo/_base/array dojo/_base/window dojo/_base/json dojo/_base/Deferred dojo/_base/sniff require dojo/_base/config".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k){var c=a.utils={};A.mixin(c,{forEach:function(l,r,m){m=m||D.global;r.call(m,l);(l instanceof a.Surface||l instanceof a.Group)&&g.forEach(l.children,function(q){c.forEach(q,r,m)})},serialize:function(l){var r={},m;if((m=l instanceof a.Surface)||l instanceof a.Group){if(r.children=g.map(l.children,c.serialize),m)return r.children}else r.shape=l.getShape();l.getTransform&&(m=l.getTransform())&&(r.transform=m);l.getStroke&&(m=l.getStroke())&&(r.stroke=m);l.getFill&&(m=l.getFill())&&
(r.fill=m);l.getFont&&(m=l.getFont())&&(r.font=m);return r},toJson:function(l,r){return e.toJson(c.serialize(l),r)},deserialize:function(l,r){if(r instanceof Array)return g.map(r,A.hitch(null,c.deserialize,l));var m="shape"in r?l.createShape(r.shape):l.createGroup();"transform"in r&&m.setTransform(r.transform);"stroke"in r&&m.setStroke(r.stroke);"fill"in r&&m.setFill(r.fill);"font"in r&&m.setFont(r.font);"children"in r&&g.forEach(r.children,A.hitch(null,c.deserialize,m));return m},fromJson:function(l,
r){return c.deserialize(l,e.fromJson(r))},toSvg:function(l){var r=new f;if("svg"===a.renderer)try{var m=c._cleanSvg(c._innerXML(l.rawNode));r.callback(m)}catch(v){r.errback(v)}else{c._initSvgSerializerDeferred||c._initSvgSerializer();var q=c.toJson(l);m=function(){try{var v=l.getDimensions(),B=v.width,w=v.height,z=c._gfxSvgProxy.document.createElement("div");c._gfxSvgProxy.document.body.appendChild(z);d.withDoc(c._gfxSvgProxy.document,function(){b.style(z,"width",B);b.style(z,"height",w)},this);c._gfxSvgProxy[dojox._scopeName].gfx.createSurface(z,
B,w).whenLoaded(null,function(x){try{c._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(x,q);var y=c._cleanSvg(z.innerHTML);x.clear();x.destroy();c._gfxSvgProxy.document.body.removeChild(z);r.callback(y)}catch(u){r.errback(u)}})}catch(x){r.errback(x)}};0<c._initSvgSerializerDeferred.fired?m():c._initSvgSerializerDeferred.addCallback(m)}return r},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){c._initSvgSerializerDeferred.callback(!0)},_initSvgSerializer:function(){if(!c._initSvgSerializerDeferred){c._initSvgSerializerDeferred=
new f;var l=d.doc.createElement("iframe");b.style(l,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var r;n("ie")?l.onreadystatechange=function(){"complete"==l.contentWindow.document.readyState&&(l.onreadystatechange=function(){},r=setInterval(function(){l.contentWindow[D.scopeMap.dojo[1]._scopeName]&&l.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx&&l.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(r),l.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=
l.contentWindow,l.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},50))}:l.onload=function(){l.onload=function(){};r=setInterval(function(){l.contentWindow[D.scopeMap.dojo[1]._scopeName]&&l.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx&&l.contentWindow[D.scopeMap.dojox[1]._scopeName].gfx.utils&&(clearInterval(r),l.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._gfxSvgProxy=l.contentWindow,l.contentWindow.parent[D.scopeMap.dojox[1]._scopeName].gfx.utils._svgSerializerInitialized())},
50)};var m=k.dojoxGfxSvgProxyFrameUrl||h.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html");l.setAttribute("src",m.toString());d.body().appendChild(l)}},_innerXML:function(l){return l.innerXML?l.innerXML:l.xml?l.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(l):null},_cleanSvg:function(l){l&&(-1==l.indexOf('xmlns\x3d"http://www.w3.org/2000/svg"')&&(l=l.substring(4,l.length),l='\x3csvg xmlns\x3d"http://www.w3.org/2000/svg"'+l),-1==l.indexOf('xmlns:xlink\x3d"http://www.w3.org/1999/xlink"')&&
(l=l.substring(4,l.length),l='\x3csvg xmlns:xlink\x3d"http://www.w3.org/1999/xlink"'+l),-1===l.indexOf("xlink:href")&&(l=l.replace(/href\s*=/g,"xlink:href\x3d")),l=l.replace(/<img\b([^>]*)>/gi,"\x3cimage $1 /\x3e"),l=l.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,""),l=l.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,""),l=l.replace(/[=]([^"']+?)(\s|>)/g,'\x3d"$1"$2'),l=l.replace(/\bstroke-opacity\w*\s*=\s*(['"])undefined\1/g,""));return l}});return c})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang",
"dojo/_base/declare","dojo/Stateful"],function(D,A,a){function b(na,V,fa,qa,va){var Fa=na;void 0===V&&(V=va.defInFormat);void 0===fa&&(fa=va.defOutFormat);void 0===qa&&(qa=va.defSwap);if(V!==fa){var Ca=V.substring(0,1);var La=V.substring(1,4);var Wa=fa.substring(0,1),Va=fa.substring(1,4);"C"===La.charAt(0)&&(La=g(Fa),La="ltr"===La||"rtl"===La?La.toUpperCase():"L"===V.charAt(2)?"LTR":"RTL",V=Ca+La);"C"===Va.charAt(0)&&(La=g(Fa),"rtl"===La?Va="RTL":"ltr"===La?(Fa=Fa.split(""),Fa.reverse(),La=g(Fa.join("")),
Va=La.toUpperCase()):Va="L"===fa.charAt(2)?"LTR":"RTL",fa=Wa+Va)}if(V===fa)return na;Wa=V.substring(0,1);Fa=V.substring(1,4);Ca=fa.substring(0,1);Va=fa.substring(1,4);va.inFormat=V;va.outFormat=fa;va.swap=qa;if("L"===Wa&&"VLTR"===fa){if("LTR"===Fa)return va.dir=t,d(na,va);if("RTL"===Fa)return va.dir=C,d(na,va)}if("V"===Wa&&"V"===Ca)return va.dir="RTL"===Fa?C:t,f(na,va);if("L"===Wa&&"VRTL"===fa)return va.dir="LTR"===Fa?t:C,na=d(na,va),f(na);if("VLTR"===V&&"LLTR"===fa)return va.dir=t,d(na,va);if("V"===
Wa&&"L"===Ca&&Fa!==Va)return na=f(na),"RTL"===Fa?b(na,"LLTR","VLTR",qa,va):b(na,"LRTL","VRTL",qa,va);if("VRTL"===V&&"LRTL"===fa)return b(na,"LRTL","VRTL",qa,va);if("L"===Wa&&"L"===Ca)return V=va.swap,va.swap=V.substr(0,1)+"N","RTL"===Fa?(va.dir=C,na=d(na,va),va.swap="N"+V.substr(1,2),va.dir=t,na=d(na,va)):(va.dir=t,na=d(na,va),va.swap="N"+V.substr(1,2),na=b(na,"VLTR","LRTL",va.swap,va)),na}function g(na){return(na=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(na))?
"z">=na[0]?"ltr":"rtl":""}function d(na,V){var fa=na.split(""),qa=[];e(fa,qa,V);if(0!==V.hiLevel&&V.swap.substr(0,1)!==V.swap.substr(1,2))for(var va=0;va<fa.length;va++)if(1===qa[va]){var Fa=va;b:{var Ca=void 0;for(var La=fa[va],Wa=0,Va=G.length-1;Wa<=Va;)if(Ca=Math.floor((Wa+Va)/2),La<G[Ca][0])Va=Ca-1;else if(La>G[Ca][0])Wa=Ca+1;else{Ca=G[Ca][1];break b}Ca=La}fa[Fa]=Ca}k(2,fa,qa,V);k(1,fa,qa,V);z=qa;return fa.join("")}function e(na,V,fa){var qa=na.length,va=fa.dir?ca:aa,Fa=null,Ca=null,La=null;Fa=
0;Ca=Ca=null;var Wa=-1,Va=Ca=null,Ma=[],eb=[];fa.hiLevel=fa.dir;fa.lastArabic=!1;fa.hasUbatAl=!1;fa.hasUbatB=!1;fa.hasUbatS=!1;for(Ca=0;Ca<qa;Ca++){Va=Ca;La=na[Ca].charCodeAt(0);var ib=U[La>>8];Ma[Va]=ib<Ja?ib:la[ib-Ja][La&255]}for(Va=0;Va<qa;Va++){eb[Va]=Ca=c(na,Ma,eb,Va,fa);Fa=va[Fa][Ca];Ca=Fa&240;Fa&=15;V[Va]=La=va[Fa][y];if(0<Ca){if(16===Ca)for(Ca=Wa;Ca<Va;Ca++)V[Ca]=1;Wa=-1}if(Ca=va[Fa][u])-1===Wa&&(Wa=Va);else if(-1<Wa){for(Ca=Wa;Ca<Va;Ca++)V[Ca]=La;Wa=-1}Ma[Va]===Da&&(V[Va]=0);fa.hiLevel|=
La}if(fa.hasUbatS)for(na=0;na<qa;na++)if(Ma[na]===Ha)for(V[na]=fa.dir,va=na-1;0<=va;va--)if(Ma[va]===xa)V[va]=fa.dir;else break}function f(na,V){var fa=na.split("");if(V){var qa=[];e(fa,qa,V);z=qa}fa.reverse();B.reverse();return fa.join("")}function n(na){for(var V=0;V<da.length;V++)if(na>=da[V]&&na<=Y[V])return!0;return!1}function h(na,V,fa,qa){for(;V*fa<qa&&r(na[V]);)V+=fa;return V*fa<qa&&n(na[V])?!0:!1}function k(na,V,fa,qa){if(!(qa.hiLevel<na))if(1!==na||qa.dir!==C||qa.hasUbatB){qa=V.length;for(var va=
0,Fa,Ca,La;va<qa;){if(fa[va]>=na){for(Fa=va+1;Fa<qa&&fa[Fa]>=na;)Fa++;for(Ca=Fa-1;va<Ca;va++,Ca--)La=V[va],V[va]=V[Ca],V[Ca]=La,La=B[va],B[va]=B[Ca],B[Ca]=La;va=Fa}va++}}else V.reverse(),B.reverse()}function c(na,V,fa,qa,va){return{UBAT_L:function(){va.lastArabic=!1;return I},UBAT_R:function(){va.lastArabic=!1;return T},UBAT_ON:function(){return ya},UBAT_AN:function(){return pa},UBAT_EN:function(){return va.lastArabic?pa:ba},UBAT_AL:function(){va.lastArabic=!0;va.hasUbatAl=!0;return T},UBAT_WS:function(){return ya},
UBAT_CS:function(){var Fa,Ca;if(1>qa||qa+1>=V.length||(Fa=fa[qa-1])!==ba&&Fa!==pa||(Ca=V[qa+1])!==ba&&Ca!==pa)return ya;va.lastArabic&&(Ca=pa);return Ca===Fa?Ca:ya},UBAT_ES:function(){return(0<qa?fa[qa-1]:Da)===ba&&qa+1<V.length&&V[qa+1]===ba?ba:ya},UBAT_ET:function(){if(0<qa&&fa[qa-1]===ba)return ba;if(va.lastArabic)return ya;for(var Fa=qa+1,Ca=V.length;Fa<Ca&&V[Fa]===ra;)Fa++;return Fa<Ca&&V[Fa]===ba?ba:ya},UBAT_NSM:function(){if("VLTR"===va.inFormat){for(var Fa=V.length,Ca=qa+1;Ca<Fa&&V[Ca]===
Aa;)Ca++;if(Ca<Fa&&(Fa=na[qa],Ca=V[Ca],(1425<=Fa&&2303>=Fa||64286===Fa)&&(Ca===T||Ca===ta)))return T}return 1>qa||V[qa-1]===Da?ya:fa[qa-1]},UBAT_B:function(){va.lastArabic=!0;va.hasUbatB=!0;return va.dir},UBAT_S:function(){va.hasUbatS=!0;return ya},UBAT_LRE:function(){va.lastArabic=!1;return ya},UBAT_RLE:function(){va.lastArabic=!1;return ya},UBAT_LRO:function(){va.lastArabic=!1;return ya},UBAT_RLO:function(){va.lastArabic=!1;return ya},UBAT_PDF:function(){va.lastArabic=!1;return ya},UBAT_BN:function(){return ya}}[ua[V[qa]]]()}
function l(na,V){for(var fa=0;fa<S.length;fa++)if(na===S[fa])return V[fa];return na}function r(na){return"\u064b"<=na&&"\u0655">=na?!0:!1}function m(na){if("L"===na)return"LTR";if("R"===na)return"RTL";if("C"===na)return"CLR";if("D"===na)return"CRL"}function q(na,V){for(var fa=0;fa<H.length;fa++)if(na===H[fa])return V[fa];return na}function v(na,V,fa,qa){for(var va=0;va<na.length;va++)if(na[va]>V||!fa&&na[va]===V)na[va]+=qa}D.getObject("string",!0,dojox);D=A("dojox.string.BidiEngine",a,{inputFormat:"ILYNN",
outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(na,V,fa){this.sourceToTarget=[];this.targetToSource=[];if(!na)return"";var qa=this.sourceToTarget,va=this.targetToSource,Fa=na.length;B=[];z=[];for(var Ca=0;Ca<Fa;Ca++)qa[Ca]=Ca,va[Ca]=Ca,B[Ca]=Ca;if(!this.checkParameters(V,fa))return na;V=this.inputFormat;fa=this.outputFormat;qa=na;qa=x;Ca=m(V.charAt(1));va=m(fa.charAt(1));var La="I"===V.charAt(0)?"L":V.charAt(0);Fa="I"===fa.charAt(0)?"L":fa.charAt(0);Ca=La+
Ca;va=Fa+va;Fa=V.charAt(2)+fa.charAt(2);qa.defInFormat=Ca;qa.defOutFormat=va;qa.defSwap=Fa;na=b(na,Ca,va,Fa,qa);qa=!1;if("R"===fa.charAt(1))qa=!0;else if("C"===fa.charAt(1)||"D"===fa.charAt(1))qa=this.checkContextual(na);va=this.sourceToTarget=B;Fa=Array(va.length);for(Ca=0;Ca<va.length;Ca++)Fa[va[Ca]]=Ca;w=this.targetToSource=Fa;if(V.charAt(3)===fa.charAt(3))qa=na;else if("S"===fa.charAt(3))if(V=qa,fa=!0,0===na.length)qa=void 0;else{void 0===V&&(V=!0);void 0===fa&&(fa=!0);na=String(na);na=na.split("");
var Wa=0;va=1;qa=na.length;V||(Wa=na.length-1,va=-1,qa=1);Fa=qa;Ca=fa;var Va=0;qa=[];for(La=0;Wa*va<Fa;Wa+=va)if(n(na[Wa])||r(na[Wa])){var Ma;if(Ma="\u0644"===na[Wa])b:{for(var eb=na,ib=Wa+va,lb=va,rb=Fa;ib*lb<rb&&r(eb[ib]);)ib+=lb;Ma=" ";if(ib*lb<rb)for(Ma=eb[ib],eb=0;eb<H.length;eb++)if(H[eb]===Ma){Ma=!0;break b}Ma=!1}if(Ma){na[Wa]=0===Va?q(na[Wa+va],L):q(na[Wa+va],J);Wa+=va;Va=na;Ma=Wa;eb=va;for(ib=Fa;Ma*eb<ib&&r(Va[Ma]);)Ma+=eb;Ma*eb<ib&&(Va[Ma]=" ");Ca&&(qa[La]=Wa,La++);Va=0}else{Ma=na[Wa];if(1===
Va){eb=Wa;if(h(na,Wa+va,va,Fa))b:for(ib=na[Wa],lb=0;lb<S.length;lb++){if(ib===S[lb]){ib=M[lb];break b}}else ib=l(na[Wa],Q);na[eb]=ib}else!0===h(na,Wa+va,va,Fa)?na[Wa]=l(na[Wa],N):na[Wa]=l(na[Wa],P);r(Ma)||(Va=1);b:{for(eb=0;eb<K.length;eb++)if(K[eb]===Ma){Ma=!0;break b}Ma=!1}!0===Ma&&(Va=0)}}else Va=0;va="";for(Fa=0;Fa<na.length;Fa++){if(Ca=fa){b:{for(Ca=0;Ca<qa.length;Ca++)if(qa[Ca]===Fa)break b;Ca=-1}Ca=-1<Ca}Ca?(v(w,Fa,!V,-1),B.splice(Fa,1)):va+=na[Fa]}qa=va}else if(V=na,fa=qa,na=!0,0===V.length)qa=
void 0;else for(void 0===na&&(na=!0),void 0===fa&&(fa=!0),V=String(V),qa="",va=[],va=V.split(""),Fa=0;Fa<V.length;Fa++)Ca=!1,"\ufe70"<=va[Fa]&&"\ufeff">va[Fa]?(La=V.charCodeAt(Fa),"\ufef5"<=va[Fa]&&"\ufefc">=va[Fa]?(fa?(0<Fa&&na&&" "===va[Fa-1]?qa=qa.substring(0,qa.length-1)+"\u0644":(qa+="\u0644",Ca=!0),qa+=H[(La-65269)/2]):(qa+=H[(La-65269)/2],qa+="\u0644",Fa+1<V.length&&na&&" "===va[Fa+1]?Fa++:Ca=!0),Ca&&(v(w,Fa,!0,1),B.splice(Fa,0,B[Fa]))):qa+=X[La-65136]):qa+=va[Fa];this.sourceToTarget=B;this.targetToSource=
w;this.levels=z;return qa},_inputFormatSetter:function(na){if(!E.test(na))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=na},_outputFormatSetter:function(na){if(!E.test(na))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=na},checkParameters:function(na,V){na?this.set("inputFormat",na):na=this.inputFormat;V?this.set("outputFormat",V):V=this.outputFormat;return na===V?!1:!0},checkContextual:function(na){na=g(na);if("ltr"!==
na&&"rtl"!==na){try{na=document.dir.toLowerCase()}catch(V){}"ltr"!==na&&"rtl"!==na&&(na="ltr")}return na},hasBidiChar:function(na){return F.test(na)}});var B=[],w=[],z=[],x={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},y=5,u=6,t=0,C=1,E=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,F=/[\u0591-\u06ff\ufb1d-\ufefc]/,G=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]",
"["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],H=["\u0622","\u0623","\u0625","\u0627"],L=["\ufef5","\ufef7","\ufef9","\ufefb"],
J=["\ufef6","\ufef8","\ufefa","\ufefc"],S="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),P="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
Q="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),M="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
N="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),K="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),X="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
da=["\u0621","\u0641"],Y=["\u063a","\u064a"],aa=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ca=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],I=0,T=1,ba=2,pa=3,ya=4,Da=5,Ha=6,ta=7,xa=8,ra=11,Aa=12,ua="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Ja=100;A=I;a=T;var ha=ba,ma=pa,R=ya,Ea=Da,Ia=Ha,ea=ta,Ya=
xa,Xa=ra,Ba=Aa,U=[Ja+0,A,A,A,A,Ja+1,Ja+2,Ja+3,a,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,Ja+4,R,R,R,A,R,A,R,A,R,R,R,A,A,R,R,A,A,A,A,A,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,A,A,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,A,A,R,R,A,A,R,R,A,A,R,R,R,R,R,R,R,R,R,
R,R,R,R,R,R,R,R,R,R,R,R,R,R,A,A,A,Ja+5,ea,ea,Ja+6,Ja+7],la=[[18,18,18,18,18,18,18,18,18,Ia,Ea,Ia,Ya,Ea,18,18,18,18,18,18,18,18,18,18,18,18,18,18,Ea,Ea,Ea,Ia,Ya,R,R,Xa,Xa,Xa,R,R,R,R,R,10,9,10,9,9,ha,ha,ha,ha,ha,ha,ha,ha,ha,ha,9,R,R,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,R,R,18,18,18,18,18,18,Ea,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,R,Xa,Xa,Xa,Xa,R,R,R,R,A,R,R,18,R,R,Xa,
Xa,ha,ha,R,A,R,R,R,ha,A,R,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,A,A,A,A,A,A,A,A],[A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,R,R,R,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,A,A,A,A,A,A,A,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,A,R,R,R,R,R,R,R,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,
Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,a,Ba,a,Ba,Ba,a,Ba,Ba,a,Ba,R,R,R,R,R,R,R,R,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,R,R,R,R,R,a,a,a,a,a,R,R,R,R,R,R,R,R,R,R,R],[ma,ma,ma,ma,R,R,R,R,ea,Xa,Xa,ea,9,ea,R,R,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,ea,R,R,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,
Ba,ma,ma,ma,ma,ma,ma,ma,ma,ma,ma,Xa,ma,ma,ea,ea,ea,Ba,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,Ba,Ba,Ba,Ba,Ba,Ba,Ba,ma,R,Ba,Ba,Ba,Ba,Ba,Ba,ea,ea,Ba,Ba,R,Ba,Ba,Ba,Ba,ea,ea,ha,ha,ha,ha,ha,ha,ha,ha,ha,ha,ea,ea,ea,ea,ea,ea],[ea,ea,ea,ea,ea,ea,
ea,ea,ea,ea,ea,ea,ea,ea,R,ea,ea,Ba,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,R,R,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,
Ba,Ba,Ba,ea,R,R,R,R,R,R,R,R,R,R,R,R,R,R,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,a,a,R,R,R,R,a,R,R,R,R,R],[Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,Ya,18,18,18,A,a,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Ya,Ea,13,14,15,16,17,9,Xa,Xa,Xa,Xa,Xa,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,9,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Ya,18,18,18,18,18,R,R,R,R,R,18,18,18,18,18,18,ha,A,R,R,ha,ha,ha,ha,ha,ha,10,10,R,R,R,A,ha,ha,ha,ha,ha,ha,ha,
ha,ha,ha,10,10,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,R,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,Xa,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R],[A,A,A,A,A,A,A,R,R,R,R,R,R,R,R,R,R,R,R,A,A,A,A,A,R,R,R,R,R,a,Ba,a,a,a,a,a,a,a,a,a,a,10,a,a,a,a,a,a,a,a,a,a,a,a,a,R,a,a,a,a,a,R,a,R,a,a,R,a,a,R,a,a,a,a,a,a,a,a,a,a,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,
ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea],[Ba,Ba,Ba,Ba,Ba,Ba,Ba,
Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,Ba,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,Ba,Ba,Ba,Ba,Ba,Ba,Ba,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,9,R,9,R,R,9,R,R,R,R,R,R,R,R,R,Xa,R,R,10,10,R,R,R,R,R,Xa,Xa,R,R,R,R,R,ea,ea,ea,ea,ea,R,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,
ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,ea,R,R,18],[R,R,R,Xa,Xa,Xa,R,R,R,R,R,10,9,10,9,9,ha,ha,ha,ha,ha,ha,ha,ha,ha,ha,9,R,R,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,R,R,R,R,R,R,R,R,R,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,
A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,R,R,R,A,A,A,A,A,A,R,R,A,A,A,A,A,A,R,R,A,A,A,A,A,A,R,R,A,A,A,R,R,R,Xa,Xa,R,R,R,Xa,Xa,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R,R]];return D})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(D,A,a,b,g,d){D=D(d,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(e){e&&A.isObject(e)&&(this.size="auto"===
this.size?this.size:b.pt2px(this.size),this.xoffset=b.pt2px(this.xoffset),this.yoffset=b.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(e){this.angle=e;return this},setSize:function(e){this.size=e;return this},setOffset:function(e,f){this.xoffset=e;this.yoffset=f;return this},toJson:function(){var e=b.px2pt(this.size);e=isNaN(e)?void 0:e;var f=b.px2pt(this.xoffset);f=isNaN(f)?void 0:f;var n=b.px2pt(this.yoffset);n=isNaN(n)?void 0:n;return A.mixin(this.inherited("toJson",arguments),
{size:"auto"===this.size?this.size:e,angle:this.angle&&-1*this.angle,xoffset:f,yoffset:n})}});A.setObject("symbol.MarkerSymbol",D,g);return D})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../Color".split(" "),function(D,A,a,b,g,d){D=D(null,{declaredClass:"esri.symbol.Symbol",color:new d([0,0,0,1]),type:null,constructor:function(e){e&&A.isObject(e)&&(A.mixin(this,e),this.color&&g.isDefined(this.color[0])&&(this.color=d.toDojoColor(this.color)),
(e=this.type)&&0===e.indexOf("esri")&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol",esriSHD:"shieldlabelsymbol"}[e]))},setColor:function(e){this.color=e;return this},toJson:function(){return{color:d.toJsonColor(this.color)}}});A.setObject("symbol.Symbol",D,b);return D})},"esri/Color":function(){define(["dojo/_base/declare","dojo/_base/Color",
"dojo/has","./kernel"],function(D,A,a,b){var g=D([A],{declaredClass:"esri.Color"});g.toJsonColor=function(d){return d&&[d.r,d.g,d.b,1<d.a?d.a:Math.round(255*d.a)]};g.toDojoColor=function(d){return d&&new g([d[0],d[1],d[2],d[3]/255])};a="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(D=0;D<a.length;D++)g[a[D]]=A[a[D]];return b.Color=g})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./LineSymbol".split(" "),
function(D,A,a,b,g,d,e,f){var n={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},h={color:[0,0,0,1],style:n.STYLE_SOLID,width:1};D=D(f,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",marker:null,_styles:{solid:"esriSLSSolid",
dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(k,c,l){k?A.isString(k)?(this.style=k,c&&(this.color=c),l&&(this.width=l)):(this.style=e.valueOf(this._styles,k.style)||n.STYLE_SOLID,this.marker=
k.marker):(A.mixin(this,h),this.color=new a(this.color),this.width=g.pt2px(this.width))},setStyle:function(k){this.style=k;return this},setMarker:function(k){this.marker=k},getStroke:function(){return this.style===n.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return e.fixJson(A.mixin(this.inherited("toJson",
arguments),{type:"esriSLS",style:this._styles[this.style],marker:this.marker?A.clone(this.marker):void 0}))}});A.mixin(D,n);D.defaultProps=h;A.setObject("symbol.SimpleLineSymbol",D,d);d.symbol.defaultSimpleLineSymbol=h;return D})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ./Symbol".split(" "),function(D,A,a,b,g,d){D=D(d,{declaredClass:"esri.symbol.LineSymbol",constructor:function(e){A.isObject(e)?this.width=b.pt2px(this.width):
this.width=12},setWidth:function(e){this.width=e;return this},toJson:function(){var e=b.px2pt(this.width);e=isNaN(e)?void 0:e;return A.mixin(this.inherited("toJson",arguments),{width:e})}});A.setObject("symbol.LineSymbol",D,g);return D})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol".split(" "),function(D,A,a,b,g,d,e,f){var n={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};D=
D(f,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(h,k,c){h?A.isString(h)?(this.url=h,k&&(this.width=k),c&&(this.height=c)):(this.width=b.pt2px(null==h.width?n.width:h.width),this.height=b.pt2px(null==h.height?n.height:h.height),k=h.imageData,9>a("ie")||!k||(c=this.url,this.url="data:"+(h.contentType||"image")+";base64,"+k,this.imageData=c)):(A.mixin(this,n),this.width=b.pt2px(this.width),this.height=b.pt2px(this.height))},getStroke:function(){return null},
getFill:function(){return null},setWidth:function(h){this.width=h;return this},setHeight:function(h){this.height=h;return this},setUrl:function(h){h!==this.url&&(delete this.imageData,delete this.contentType);this.url=h;return this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var h=this.url,k=this.imageData;if(0===h.indexOf("data:")){var c=
h;h=k;k=c.indexOf(";base64,")+8;k=c.substr(k)}!A.isString(h)||0!==h.indexOf("/")&&0!==h.indexOf("//")&&0!==h.indexOf("./")&&0!==h.indexOf("../")||(h=e.getAbsoluteUrl(h));c=b.px2pt(this.width);c=isNaN(c)?void 0:c;var l=b.px2pt(this.height);l=isNaN(l)?void 0:l;h=d.fixJson(A.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:h,imageData:k,contentType:this.contentType,width:c,height:l}));delete h.color;delete h.size;h.imageData||delete h.imageData;return h}});D.defaultProps=n;A.setObject("symbol.PictureMarkerSymbol",
D,g);g.symbol.defaultPictureMarkerSymbol=n;return D})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./SimpleLineSymbol".split(" "),function(D,A,a,b,g,d,e,f){var n={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",
STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},h={color:[0,0,0,1],style:n.STYLE_SOLID,width:1,cap:n.CAP_BUTT,join:n.JOIN_MITER,miterLimit:10};D=D(f,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",
bevel:"esriLJSBevel"},constructor:function(k,c,l,r,m,q){k?A.isString(k)?(this.style=k,c&&(this.color=c),void 0!==l&&(this.width=l),r&&(this.cap=r),m&&(this.join=m),void 0!==q&&(this.miterLimit=q)):(this.cap=e.valueOf(this._caps,k.cap),this.join=e.valueOf(this._joins,k.join),this.width=g.pt2px(k.width),this.miterLimit=g.pt2px(k.miterLimit)):(A.mixin(this,h),this.color=new a(this.color),this.width=g.pt2px(this.width),this.miterLimit=g.pt2px(this.miterLimit))},setCap:function(k){this.cap=k;return this},
setJoin:function(k){this.join=k;return this},setMiterLimit:function(k){this.miterLimit=k;return this},getStroke:function(){return A.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===n.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var k=g.px2pt(this.miterLimit);k=isNaN(k)?void 0:k;return e.fixJson(A.mixin(this.inherited("toJson",
arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:k}))}});A.mixin(D,n);D.defaultProps=h;A.setObject("symbol.CartographicLineSymbol",D,d);d.symbol.defaultCartographicLineSymbol=h;return D})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base ../kernel ../lang ./FillSymbol ./SimpleLineSymbol require".split(" "),function(D,A,a,b,g,d,e,f,n,h){var k={STYLE_SOLID:"solid",STYLE_NULL:"none",
STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},c={style:k.STYLE_SOLID,color:[0,0,0,.25]};D=D(f,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",
vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(l,r,m){l?A.isString(l)?(this.style=l,void 0!==r&&(this.outline=r),void 0!==m&&(this.color=m)):this.style=e.valueOf(this._styles,l.style):(A.mixin(this,c),this.outline=new n(this.outline),this.color=new a(this.color))},setStyle:function(l){this.style=l;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},
getFill:function(){var l=this.style;return l===k.STYLE_NULL?null:l===k.STYLE_SOLID?this.color:A.mixin({},g.defaultPattern,{src:h.toUrl("../images/symbol/sfs/"+l+".png"),width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return e.fixJson(A.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}});A.mixin(D,k);D.defaultProps=
c;A.setObject("symbol.SimpleFillSymbol",D,d);d.symbol.defaultSimpleFillSymbol=c;return D})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Symbol ./SimpleLineSymbol".split(" "),function(D,A,a,b,g,d){D=D(g,{declaredClass:"esri.symbol.FillSymbol",constructor:function(e){e&&A.isObject(e)&&e.outline&&(this.outline=new d(e.outline))},setOutline:function(e){this.outline=e;return this},toJson:function(){var e=this.inherited("toJson",arguments);this.outline&&
(e.outline=this.outline.toJson());return e}});A.setObject("symbol.FillSymbol",D,b);return D})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./FillSymbol".split(" "),function(D,A,a,b,g,d,e,f){var n={xoffset:0,yoffset:0,width:12,height:12};D=D(f,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(h,k,c,l){h?A.isString(h)?(this.url=
h,void 0!==k&&(this.outline=k),void 0!==c&&(this.width=c),void 0!==l&&(this.height=l)):(this.xoffset=b.pt2px(h.xoffset),this.yoffset=b.pt2px(h.yoffset),this.width=b.pt2px(h.width),this.height=b.pt2px(h.height),k=h.imageData,9>a("ie")||!k||(c=this.url,this.url="data:"+(h.contentType||"image")+";base64,"+k,this.imageData=c)):(A.mixin(this,n),this.width=b.pt2px(this.width),this.height=b.pt2px(this.height))},setWidth:function(h){this.width=h;return this},setHeight:function(h){this.height=h;return this},
setOffset:function(h,k){this.xoffset=h;this.yoffset=k;return this},setUrl:function(h){h!==this.url&&(delete this.imageData,delete this.contentType);this.url=h;return this},setXScale:function(h){this.xscale=h;return this},setYScale:function(h){this.yscale=h;return this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return A.mixin({},b.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",
path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var h=this.url,k=this.imageData;if(0===h.indexOf("data:")){var c=h;h=k;k=c.indexOf(";base64,")+8;k=c.substr(k)}!A.isString(h)||0!==h.indexOf("/")&&0!==h.indexOf("//")&&0!==h.indexOf("./")&&0!==h.indexOf("../")||(h=e.getAbsoluteUrl(h));c=b.px2pt(this.width);c=isNaN(c)?void 0:c;var l=b.px2pt(this.height);l=isNaN(l)?void 0:l;var r=b.px2pt(this.xoffset);r=isNaN(r)?void 0:r;var m=b.px2pt(this.yoffset);
m=isNaN(m)?void 0:m;h=d.fixJson(A.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:h,imageData:k,contentType:this.contentType,width:c,height:l,xoffset:r,yoffset:m,xscale:this.xscale,yscale:this.yscale}));h.imageData||delete h.imageData;return h}});D.defaultProps=n;A.setObject("symbol.PictureFillSymbol",D,g);g.symbol.defaultPictureFillSymbol=n;return D})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),
function(D,A,a,b,g,d,e,f,n){var h={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:b.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},k={start:"left",middle:"center",end:"right"},c={left:"start",center:"middle",right:"end",justify:"start"},l={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"},r=document.createElement("canvas");D=D(f,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(m,
q,v){A.mixin(this,h);this.font=new n(this.font);this.color=new e(this.color);m&&(A.isObject(m)?(A.mixin(this,m),this.color&&d.isDefined(this.color[0])&&(this.color=e.toDojoColor(this.color)),this.type="textsymbol",this.font=new n(this.font),this.xoffset=b.pt2px(this.xoffset),this.yoffset=b.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&(this.haloSize=b.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=e.toDojoColor(this.haloColor))):(this.text=m,q&&(this.font=q),v&&(this.color=
v)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(m){this.font=m;return this},setSize:function(m){this.font.size=m;return this},setAngle:function(m){this.angle=m;return this},setOffset:function(m,q){this.xoffset=m;this.yoffset=q;return this},setHaloColor:function(m){this.haloColor=m;return this},setHaloSize:function(m){this.haloSize=m;return this},setAlign:function(m){this.align=m;this.setHorizontalAlignment(m&&k[m.toLowerCase()]||"center");return this},setHorizontalAlignment:function(m){this.horizontalAlignment=
m;return this},getSVGAlign:function(){var m=this.horizontalAlignment;return m=m&&c[m.toLowerCase()]||"middle"},setVerticalAlignment:function(m){this.verticalAlignment=m;return this},getSVGBaseline:function(){var m=this.verticalAlignment;return m&&l[m.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(m){this.decoration=m;this.font||this.setFont(new n);this.font.setDecoration(m);return this},setRotated:function(m){this.rotated=
m;return this},setKerning:function(m){this.kerning=m;return this},setText:function(m){this.text=m;return this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var m=r&&r.getContext&&r.getContext("2d");if(m){var q=this.font;m.font=(q.style?q.style:b.defaultFont.style)+" "+(q.weight?q.weight:b.defaultFont.weight)+" "+(q.size?q.size:b.defaultFont.size)+"px "+(q.family?q.family:b.defaultFont.family);return m.measureText(this.text).width}m=this.getHeight();q=
0;var v;for(v=0;v<this.text.length;v++){var B=this.text.charAt(v);q=B==B.toUpperCase()?q+.7*m:q+.5*m}return q},getHeight:function(){return b.normalizedLength(this.font.size)},getShapeDescriptors:function(){var m=this.font;if(m){var q={};m.size&&(q.size=m.size);m.style&&(q.style=m.style);m.variant&&(q.variant=m.variant);m.decoration&&(q.decoration=m.decoration);m.weight&&(q.weight=m.weight);m.family&&(q.family=m.family)}return{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",
decoration:this.decoration||m&&m.decoration,rotated:this.rotated,kerning:this.kerning},font:q,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var m=b.px2pt(this.xoffset),q=b.px2pt(this.yoffset),v=b.px2pt(this.haloSize);m=isNaN(m)?void 0:m;q=isNaN(q)?void 0:q;v=isNaN(v)?void 0:v;return d.fixJson(A.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:v,haloColor:this.haloColor&&
e.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:m,yoffset:q,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});A.mixin(D,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});D.defaultProps=
h;A.setObject("symbol.TextSymbol",D,g);g.symbol.defaultTextSymbol=h;return D})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang".split(" "),function(D,A,a,b,g,d){D=D(null,{declaredClass:"esri.symbol.Font",constructor:function(e,f,n,h,k){e?A.isObject(e)?A.mixin(this,e):(this.size=e,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==f&&(this.style=f),void 0!==n&&(this.variant=n),void 0!==h&&(this.weight=h),void 0!==k&&
(this.family=k)):A.mixin(this,b.defaultFont);parseFloat(this.size)==this.size&&(this.size+="pt");9>a("ie")&&this.size&&A.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=b.pt2px(12*parseFloat(this.size))+"px");this.size=this._convert2PxSize(this.size)},setSize:function(e){this.size=this._convert2PxSize(e);return this},_convert2PxSize:function(e){var f;parseFloat(e)==e?f=e:A.isString(e)&&(-1<e.indexOf("pt")?f=b.pt2px(parseFloat(e)):-1<e.indexOf("px")?f=parseFloat(e):-1<e.indexOf("em")?f=
b.pt2px(12*parseFloat(e)):-1<e.indexOf("%")&&(f=b.pt2px(.12*parseFloat(e))));return f},setStyle:function(e){this.style=e;return this},setVariant:function(e){this.variant=e;return this},setWeight:function(e){this.weight=e;return this},setFamily:function(e){this.family=e;return this},setDecoration:function(e){this.decoration=e;return this},toJson:function(){return d.fixJson({size:b.px2pt(this.size),style:this.style,decoration:this.decoration,weight:this.weight,family:this.family})}});A.mixin(D,{STYLE_NORMAL:"normal",
STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});A.setObject("symbol.Font",D,g);return D})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./GPMessage"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(d){this.messages=[];A.mixin(this,d);d=this.messages;var e,f=d.length;
for(e=0;e<f;e++)d[e]=new g(d[e])},jobId:"",jobStatus:""});A.mixin(D,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"});A.setObject("tasks.JobInfo",D,b);return D})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(g){A.mixin(this,g)}});A.mixin(D,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"});
A.setObject("tasks.GPMessage",D,b);return D})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(g){g&&A.mixin(this,g)},distance:0,units:null,toJson:function(){var g={};this.distance&&(g.distance=this.distance);this.units&&(g.units=this.units);return g}});A.setObject("tasks.LinearUnit",D,b);return D})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.DataFile",constructor:function(g){g&&A.mixin(this,g)},url:null,itemID:null,toJson:function(){var g={};this.url&&(g.url=this.url);this.itemID&&(g.itemID=this.itemID);return g}});A.setObject("tasks.DataFile",D,b);return D})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.RasterData",constructor:function(g){g&&
A.mixin(this,g)},url:null,format:null,itemID:null,toJson:function(){var g={};this.url&&(g.url=this.url);this.format&&(g.format=this.format);this.itemID&&(g.itemID=this.itemID);return g}});A.setObject("tasks.RasterData",D,b);return D})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","../kernel"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.tasks.Date",constructor:function(d){d&&(d.format&&(this.format=d.format),this.date=a.parse(d.date,
{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:a.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}});A.setObject("tasks.Date",D,g);return D})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(g){A.mixin(this,g)}});A.setObject("tasks.ParameterValue",
D,b);return D})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query ../kernel ../layers/ArcGISDynamicMapServiceLayer".split(" "),function(D,A,a,b,g,d,e){D=D(e,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(f,n){n&&n.imageParameters&&n.imageParameters.extent&&(this.initialExtent=this.fullExtent=n.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference);this.getImageUrl=A.hitch(this,
this.getImageUrl);this.loaded=!0;this.onLoad(this)},getImageUrl:function(f,n,h,k){var c=f.spatialReference.wkid;k(this._url.path+"?"+g.objectToQuery(A.mixin(this._params,{f:"image",bbox:a.toJson(f.toJson()),bboxSR:c,imageSR:c,size:n+","+h})))}});A.setObject("tasks._GPResultImageLayer",D,d);return D})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query ../kernel ../config ../lang ../request ../urlUtils ../layerUtils ../geometry/scaleUtils ./DynamicMapServiceLayer ./ArcGISMapServiceLayer ./TimeInfo ./LayerTimeOptions ./ImageParameters ./DynamicLayerInfo ./LayerMapSource".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z){D=D([r,m],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"visible-layers-change":["visibleLayers"]},constructor:function(x,y,u){x=y&&y.imageParameters;var t=A.hitch;if(x){var C=x.layerDefinitions;C&&this.setLayerDefinitions(C);x.layerOption===B.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(x.layerIds),this.onVisibleLayersChange(this.visibleLayers))}this._setIsPNG32=t(this,this._setIsPNG32);this.dpi=x&&x.dpi||96;this.imageFormat=
x&&x.format||"png8";this.imageTransparency=x&&!1===x.transparent?!1:!0;this._setIsPNG32();this.gdbVersion=y&&y.gdbVersion;this._params.gdbVersion=this.gdbVersion;C=x&&x.layerDefinitions;A.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},x?x.toJson():{});C&&(this._params.layerDefs=C);this.getImageUrl=t(this,this.getImageUrl);this._initLayer=t(this,this._initLayer);this._load=t(this,this._load);this.useMapImage=y?y.useMapImage:!1;this._loadCallback=
y&&y.loadCallback;(y=y&&y.resourceInfo)?this._initLayer(y):(void 0===u||!1===u)&&this._load();this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(x,y){this.inherited(arguments);x.timeInfo&&(this.timeInfo=new q(x.timeInfo));this.loaded=!0;this.onLoad(this);var u=this._loadCallback;u&&(delete this._loadCallback,u(this))},getImageUrl:function(x,y,u,t){var C=this._url.path+"/export",E=this._params,F=E.token=this._getToken(),G=x.spatialReference.wkid||b.toJson(x.spatialReference.toJson()),
H=this._errorHandler;delete E._ts;A.mixin(E,{bbox:x.xmin+","+x.ymin+","+x.xmax+","+x.ymax,bboxSR:G,imageSR:G,size:y+","+u},this.disableClientCaching?{_ts:(new Date).getTime()}:{});E.layerDefs&&(x=c._serializeLayerDefinitions(E.layerDefs,10.5<=this.version),E=A.mixin({},E),delete E.layerDefs,E.layerDefs=x);x=k.addProxy(k.normalize(C)+"?"+d.objectToQuery(A.mixin({},E,{f:"image"})));x.length>f.defaults.io.postLength||this.useMapImage?this._jsonRequest=h({url:C,content:A.mixin(E,{f:"json"}),callbackParamName:"callback",
load:function(L){L.imageData?L="data:"+(L.contentType||"image")+";base64,"+L.imageData:(L=L.href,F&&(L+=-1===L.indexOf("?")?"?token\x3d"+F:"\x26token\x3d"+F),L=k.addProxy(L));t(L)},error:H}):t(x)},_setIsPNG32:function(){var x=this.imageFormat.toLowerCase(),y=g("ie");this.isPNG32=y&&6===y&&("png32"===x||"png24"===x)&&this.imageTransparency},_setTime:function(x){var y=this.timeInfo;x=this._params.time=x?x.toJson().join(","):null;if(10.02>this.version&&y)if(x)this._params.layerTimeOptions=c._serializeTimeOptions(this.layerTimeOptions);
else{var u=this.layerInfos;if(u){var t=this.layerTimeOptions,C=t?t.slice(0):[],E=[];a.forEach(u,function(F){F.subLayerIds||E.push(F.id)});E.length&&(a.forEach(E,function(F){if(!C[F]){var G=new v;G.useTime=!1;C[F]=G}}),this._params.layerTimeOptions=c._serializeTimeOptions(C,E))}}10.02<=this.version&&y&&!x&&!y.hasLiveData&&(this._params.time="null,null")},setDPI:function(x,y){this.dpi=this._params.dpi=x;y||this.refresh(!0)},setImageFormat:function(x,y){this.imageFormat=this._params.format=x;this._setIsPNG32();
y||this.refresh(!0)},setImageTransparency:function(x,y){this.imageTransparency=this._params.transparent=x;this._setIsPNG32();y||this.refresh(!0)},setVisibleLayers:function(x,y){this.visibleLayers=x;this._params.layers=B.LAYER_OPTION_SHOW+":"+(x.length?x.join():"-1");this._updateDynamicLayers();y||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},onVisibleLayersChange:function(){},setDefaultVisibleLayers:function(x){this.visibleLayers=this._defaultVisibleLayers;this._params.layers=null;
this._updateDynamicLayers();x||this.refresh(!0);this.onVisibleLayersChange(this.visibleLayers)},setLayerDefinitions:function(x,y){this.layerDefinitions=x;this._params.layerDefs=x;this._updateDynamicLayers();y||this.refresh(!0)},setDefaultLayerDefinitions:function(x){this.layerDefinitions=this._params.layerDefs=null;this._updateDynamicLayers();x||this.refresh(!0)},setDisableClientCaching:function(x){this.disableClientCaching=x},setLayerTimeOptions:function(x,y){this.layerTimeOptions=x;this._params.layerTimeOptions=
c._serializeTimeOptions(x);this._updateDynamicLayers();y||this.refresh(!0)},refresh:function(x){if(!0===x)this.inherited(arguments);else{var y=this.disableClientCaching;this.disableClientCaching=!0;this.inherited(arguments);this.disableClientCaching=y}},setLayerDrawingOptions:function(x,y){this.layerDrawingOptions=x;this._updateDynamicLayers();y||this.refresh(!0)},setDynamicLayerInfos:function(x,y){x&&0<x.length?(this.dynamicLayerInfos=x,this.visibleLayers=c._getDefaultVisibleLayers(x),this.onVisibleLayersChange(this.visibleLayers)):
this.dynamicLayerInfos=this.layerDrawingOptions=null;this._updateDynamicLayers();y||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var x=[],y;a.forEach(this.layerInfos,function(u){y=new w(u.toJson());y.source=new z({mapLayerId:u.id});x.push(y)});return x},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||
(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var x=this._map&&l.getScale(this._map);x=this._getDynLayerObjs(x);x=b.toJson(x);this._params.dynamicLayers&&this._params.dynamicLayers.length===x.length&&this._params.dynamicLayers===x||(this._params.dynamicLayers=x,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_getDynLayerObjs:function(x){var y=
this.dynamicLayerInfos,u=[],t=this.visibleLayers,C=x?c._getLayersForScale(x,y):t;a.forEach(y,function(E){if(!E.subLayerIds){var F=E.id;if(-1!==a.indexOf(t,F)&&-1!==a.indexOf(C,F)){var G={id:F,name:E.name};G.source=E.source&&E.source.toJson();var H;this.layerDefinitions&&this.layerDefinitions[F]&&(H=this.layerDefinitions[F]);H&&(G.definitionExpression=H);var L;this.layerDrawingOptions&&this.layerDrawingOptions[F]&&(L=this.layerDrawingOptions[F]);L&&(H=L.toJson(),this._fixMarkerColor(H.renderer),G.drawingInfo=
H);var J;this.layerTimeOptions&&this.layerTimeOptions[F]&&(J=this.layerTimeOptions[F]);J&&(G.layerTimeOptions=J.toJson());G.minScale=E.minScale||0;G.maxScale=E.maxScale||0;u.push(G)}}},this);return u},_fixMarkerColor:function(x){a.forEach(this._getAllSimpleMarkerSymbols(x),function(y){if(!y.color){var u=[0,0,0,0],t=y.outline&&y.outline.color;"esriSMSX"!==y.style&&"esriSMSCross"!==y.style||!t||(u=t.slice(0));y.color=u}})},_getAllSimpleMarkerSymbols:function(x){return a.filter(this._getAllSymbols(x),
function(y){return"esriSMS"===y.type})},_getAllSymbols:function(x){var y=[];x&&(y.push(x.symbol),y.push(x.defaultSymbol),a.forEach(x.uniqueValueInfos||x.classBreakInfos,function(u){y.push(u.symbol)}),y=a.filter(y,n.isDefined));return y},_onExtentChangeHandler:function(x,y,u){u&&this._updateDynamicLayers();this.inherited(arguments)},_setMap:function(x,y,u){this._map=x;this._updateDynamicLayers();return this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(x,y){this.gdbVersion=
x;this._params.gdbVersion=x;this.onGDBVersionChange();y||this.refresh(!0)},exportMapImage:function(x,y){var u=A.hitch(this,function(){var t=f.defaults.map,C=x&&x.layerDefinitions;x=x?x.toJson(this.normalization):{};C&&(x.layerDefs=C);x=A.mixin({size:t.width+","+t.height},this._params,x,{f:"json"});delete x._ts;x.layerDefs&&(t=c._serializeLayerDefinitions(x.layerDefs,10.5<=this.version),delete x.layerDefs,x.layerDefs=t);this._exportMapImage(this._url.path+"/export",x,y)});if(this.loaded)u();else this.on("load",
u)}});A.setObject("layers.ArcGISDynamicMapServiceLayer",D,e);return D})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(D,A,a,b,g){function d(c,l,r){return c&&l?c.getWidth()/l*(r||f)*39.37*n.screenDPI:0}function e(c,l,r,m,q){return c.expand(m*l/(39.37*((q?r:h.values[h[r]])||f)*n.screenDPI)/c.getWidth())}var f=6370997*Math.PI/180,n=b.defaults,h=g,k={getUnitValueForSR:function(c){return this.getUnitValue(c)||f},getUnitValue:function(c){if(c)if("object"===
typeof c){var l=c.wkid;var r=c.wkt}else"number"===typeof c?l=c:"string"===typeof c&&(r=c);if(l)var m=h.values[h[l]];else r&&-1!==r.search(/^PROJCS/i)&&(c=/UNIT\[([^\]]+)\]\]$/i.exec(r))&&c[1]&&(m=parseFloat(c[1].split(",")[1]));return m},getScale:function(c,l,r){if(1<arguments.length&&null!=l&&!l.declaredClass){var m=c;var q=l;l=null;var v=k.getUnitValue(r)}else m=l||c.extent,q=c.width,v=k.getUnitValue(m&&m.spatialReference);return d(m,q,v)},getExtentForScale:function(c,l,r){return e(r||c.extent,
c.width,k.getUnitValue(c.spatialReference),l,!0)}};D.mixin(D.getObject("geometry",!0,a),k);a.geometry._getScale=d;a.geometry._getExtentForScale=e;return k})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(D,A){var a,b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,
23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,
30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,
102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,
103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,
103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,
103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=
a;a++)b[a]=0;for(a=2056;2065>=a;a++)b[a]=0;for(a=2067;2135>=a;a++)b[a]=0;for(a=2137;2154>=a;a++)b[a]=0;for(a=2161;2170>=a;a++)b[a]=0;for(a=2172;2193>=a;a++)b[a]=0;for(a=2195;2198>=a;a++)b[a]=0;for(a=2200;2203>=a;a++)b[a]=0;for(a=2205;2217>=a;a++)b[a]=0;for(a=2222;2224>=a;a++)b[a]=1;for(a=2225;2250>=a;a++)b[a]=2;for(a=2251;2253>=a;a++)b[a]=1;for(a=2257;2264>=a;a++)b[a]=2;for(a=2274;2279>=a;a++)b[a]=2;for(a=2280;2282>=a;a++)b[a]=1;for(a=2283;2289>=a;a++)b[a]=2;for(a=2290;2292>=a;a++)b[a]=0;for(a=2308;2313>=
a;a++)b[a]=0;for(a=2315;2491>=a;a++)b[a]=0;for(a=2494;2866>=a;a++)b[a]=0;for(a=2867;2869>=a;a++)b[a]=1;for(a=2870;2888>=a;a++)b[a]=2;for(a=2891;2895>=a;a++)b[a]=2;for(a=2896;2898>=a;a++)b[a]=1;for(a=2902;2908>=a;a++)b[a]=2;for(a=2915;2920>=a;a++)b[a]=2;for(a=2921;2923>=a;a++)b[a]=1;for(a=2924;2930>=a;a++)b[a]=2;for(a=2931;2962>=a;a++)b[a]=0;for(a=2964;2968>=a;a++)b[a]=2;for(a=2969;2973>=a;a++)b[a]=0;for(a=2975;2991>=a;a++)b[a]=0;for(a=2995;3051>=a;a++)b[a]=0;for(a=3054;3079>=a;a++)b[a]=0;for(a=3081;3088>=
a;a++)b[a]=0;for(a=3092;3101>=a;a++)b[a]=0;for(a=3106;3138>=a;a++)b[a]=0;for(a=3146;3151>=a;a++)b[a]=0;for(a=3153;3166>=a;a++)b[a]=0;for(a=3168;3172>=a;a++)b[a]=0;for(a=3174;3203>=a;a++)b[a]=0;for(a=3294;3358>=a;a++)b[a]=0;for(a=3367;3403>=a;a++)b[a]=0;for(a=3408;3416>=a;a++)b[a]=0;for(a=3417;3438>=a;a++)b[a]=2;for(a=3441;3446>=a;a++)b[a]=2;for(a=3447;3450>=a;a++)b[a]=0;for(a=3451;3459>=a;a++)b[a]=2;for(a=3460;3478>=a;a++)b[a]=0;for(a=3554;3559>=a;a++)b[a]=0;for(a=3560;3570>=a;a++)b[a]=2;for(a=3571;3581>=
a;a++)b[a]=0;for(a=3594;3597>=a;a++)b[a]=0;for(a=3601;3604>=a;a++)b[a]=0;for(a=3637;3639>=a;a++)b[a]=0;for(a=3665;3667>=a;a++)b[a]=0;for(a=3693;3695>=a;a++)b[a]=0;for(a=3701;3727>=a;a++)b[a]=0;for(a=3728;3739>=a;a++)b[a]=2;for(a=3740;3751>=a;a++)b[a]=0;for(a=3753;3760>=a;a++)b[a]=2;for(a=3761;3773>=a;a++)b[a]=0;for(a=3775;3777>=a;a++)b[a]=0;for(a=3779;3781>=a;a++)b[a]=0;for(a=3783;3785>=a;a++)b[a]=0;for(a=3788;3791>=a;a++)b[a]=0;for(a=3797;3802>=a;a++)b[a]=0;for(a=3814;3816>=a;a++)b[a]=0;for(a=3825;3829>=
a;a++)b[a]=0;for(a=3832;3841>=a;a++)b[a]=0;for(a=3844;3852>=a;a++)b[a]=0;for(a=3873;3885>=a;a++)b[a]=0;for(a=3890;3893>=a;a++)b[a]=0;for(a=3907;3912>=a;a++)b[a]=0;for(a=3942;3950>=a;a++)b[a]=0;for(a=3968;3970>=a;a++)b[a]=0;for(a=3973;3976>=a;a++)b[a]=0;for(a=3986;3989>=a;a++)b[a]=0;for(a=3994;3997>=a;a++)b[a]=0;for(a=4048;4051>=a;a++)b[a]=0;for(a=4056;4063>=a;a++)b[a]=0;for(a=4093;4096>=a;a++)b[a]=0;for(a=4390;4398>=a;a++)b[a]=0;for(a=4399;4413>=a;a++)b[a]=2;for(a=4418;4433>=a;a++)b[a]=2;for(a=4455;4457>=
a;a++)b[a]=2;for(a=4484;4489>=a;a++)b[a]=0;for(a=4491;4554>=a;a++)b[a]=0;for(a=4568;4589>=a;a++)b[a]=0;for(a=4652;4656>=a;a++)b[a]=0;for(a=4766;4800>=a;a++)b[a]=0;for(a=5014;5016>=a;a++)b[a]=0;for(a=5069;5072>=a;a++)b[a]=0;for(a=5105;5130>=a;a++)b[a]=0;for(a=5173;5188>=a;a++)b[a]=0;for(a=5253;5259>=a;a++)b[a]=0;for(a=5269;5275>=a;a++)b[a]=0;for(a=5292;5311>=a;a++)b[a]=0;for(a=5329;5331>=a;a++)b[a]=0;for(a=5343;5349>=a;a++)b[a]=0;for(a=5355;5357>=a;a++)b[a]=0;for(a=5387;5389>=a;a++)b[a]=0;for(a=5459;5463>=
a;a++)b[a]=0;for(a=5479;5482>=a;a++)b[a]=0;for(a=5518;5520>=a;a++)b[a]=0;for(a=5530;5539>=a;a++)b[a]=0;for(a=5550;5552>=a;a++)b[a]=0;for(a=5562;5583>=a;a++)b[a]=0;for(a=5623;5625>=a;a++)b[a]=2;for(a=5631;5639>=a;a++)b[a]=0;for(a=5649;5653>=a;a++)b[a]=0;for(a=5663;5680>=a;a++)b[a]=0;for(a=5682;5685>=a;a++)b[a]=0;for(a=5875;5877>=a;a++)b[a]=0;for(a=5896;5899>=a;a++)b[a]=0;for(a=5921;5940>=a;a++)b[a]=0;for(a=6050;6125>=a;a++)b[a]=0;for(a=6244;6275>=a;a++)b[a]=0;for(a=6328;6348>=a;a++)b[a]=0;for(a=6350;6356>=
a;a++)b[a]=0;for(a=6366;6372>=a;a++)b[a]=0;for(a=6381;6387>=a;a++)b[a]=0;for(a=6393;6404>=a;a++)b[a]=0;for(a=6480;6483>=a;a++)b[a]=0;for(a=6511;6514>=a;a++)b[a]=0;for(a=6579;6581>=a;a++)b[a]=0;for(a=6619;6624>=a;a++)b[a]=0;for(a=6625;6627>=a;a++)b[a]=2;for(a=6628;6632>=a;a++)b[a]=0;for(a=6634;6637>=a;a++)b[a]=0;for(a=6669;6692>=a;a++)b[a]=0;for(a=6707;6709>=a;a++)b[a]=0;for(a=6720;6723>=a;a++)b[a]=0;for(a=6732;6738>=a;a++)b[a]=0;for(a=6931;6933>=a;a++)b[a]=0;for(a=6956;6959>=a;a++)b[a]=0;for(a=7005;7007>=
a;a++)b[a]=0;for(a=7057;7070>=a;a++)b[a]=2;for(a=7074;7082>=a;a++)b[a]=0;for(a=7109;7118>=a;a++)b[a]=0;for(a=7119;7127>=a;a++)b[a]=1;for(a=7374;7376>=a;a++)b[a]=0;for(a=7528;7586>=a;a++)b[a]=0;for(a=7587;7645>=a;a++)b[a]=2;for(a=7692;7696>=a;a++)b[a]=0;for(a=7755;7787>=a;a++)b[a]=0;for(a=7791;7795>=a;a++)b[a]=0;for(a=7799;7801>=a;a++)b[a]=0;for(a=7803;7805>=a;a++)b[a]=0;for(a=7825;7831>=a;a++)b[a]=0;for(a=7845;7859>=a;a++)b[a]=0;for(a=8013;8032>=a;a++)b[a]=0;for(a=8065;8068>=a;a++)b[a]=1;for(a=8518;8529>=
a;a++)b[a]=2;for(a=8533;8536>=a;a++)b[a]=2;for(a=8538;8540>=a;a++)b[a]=2;for(a=8677;8679>=a;a++)b[a]=0;for(a=8836;8840>=a;a++)b[a]=0;for(a=8857;8859>=a;a++)b[a]=0;for(a=8908;8910>=a;a++)b[a]=0;for(a=9154;9159>=a;a++)b[a]=0;for(a=9205;9218>=a;a++)b[a]=0;for(a=9271;9273>=a;a++)b[a]=0;for(a=9295;9297>=a;a++)b[a]=0;for(a=9356;9360>=a;a++)b[a]=0;for(a=9404;9407>=a;a++)b[a]=0;for(a=9476;9482>=a;a++)b[a]=0;for(a=9487;9494>=a;a++)b[a]=0;for(a=9697;9699>=a;a++)b[a]=0;for(a=20002;20032>=a;a++)b[a]=0;for(a=
20062;20092>=a;a++)b[a]=0;for(a=20135;20138>=a;a++)b[a]=0;for(a=20248;20258>=a;a++)b[a]=0;for(a=20348;20358>=a;a++)b[a]=0;for(a=20436;20440>=a;a++)b[a]=0;for(a=20822;20824>=a;a++)b[a]=0;for(a=20934;20936>=a;a++)b[a]=0;for(a=21035;21037>=a;a++)b[a]=0;for(a=21095;21097>=a;a++)b[a]=0;for(a=21148;21150>=a;a++)b[a]=0;for(a=21413;21423>=a;a++)b[a]=0;for(a=21453;21463>=a;a++)b[a]=0;for(a=21473;21483>=a;a++)b[a]=0;for(a=21780;21782>=a;a++)b[a]=0;for(a=21891;21894>=a;a++)b[a]=0;for(a=21896;21899>=a;a++)b[a]=
0;for(a=22171;22177>=a;a++)b[a]=0;for(a=22181;22187>=a;a++)b[a]=0;for(a=22191;22197>=a;a++)b[a]=0;for(a=22234;22236>=a;a++)b[a]=0;for(a=22521;22525>=a;a++)b[a]=0;for(a=22991;22994>=a;a++)b[a]=0;for(a=23028;23038>=a;a++)b[a]=0;for(a=23830;23853>=a;a++)b[a]=0;for(a=23866;23872>=a;a++)b[a]=0;for(a=23877;23884>=a;a++)b[a]=0;for(a=23886;23894>=a;a++)b[a]=0;for(a=23946;23948>=a;a++)b[a]=0;for(a=24311;24313>=a;a++)b[a]=0;for(a=24342;24347>=a;a++)b[a]=0;for(a=24370;24374>=a;a++)b[a]=10;for(a=24375;24381>=
a;a++)b[a]=0;for(a=24718;24721>=a;a++)b[a]=0;for(a=24817;24821>=a;a++)b[a]=0;for(a=24877;24882>=a;a++)b[a]=0;for(a=24891;24893>=a;a++)b[a]=0;for(a=25391;25395>=a;a++)b[a]=0;for(a=25828;25838>=a;a++)b[a]=0;for(a=26191;26195>=a;a++)b[a]=0;for(a=26391;26393>=a;a++)b[a]=0;for(a=26701;26722>=a;a++)b[a]=0;for(a=26729;26799>=a;a++)b[a]=2;for(a=26801;26803>=a;a++)b[a]=2;for(a=26811;26813>=a;a++)b[a]=2;for(a=26847;26870>=a;a++)b[a]=2;for(a=26891;26899>=a;a++)b[a]=0;for(a=26901;26923>=a;a++)b[a]=0;for(a=26929;26946>=
a;a++)b[a]=0;for(a=26948;26998>=a;a++)b[a]=0;for(a=27037;27040>=a;a++)b[a]=0;for(a=27205;27232>=a;a++)b[a]=0;for(a=27258;27260>=a;a++)b[a]=0;for(a=27391;27398>=a;a++)b[a]=0;for(a=27561;27564>=a;a++)b[a]=0;for(a=27571;27574>=a;a++)b[a]=0;for(a=27581;27584>=a;a++)b[a]=0;for(a=27591;27594>=a;a++)b[a]=0;for(a=28191;28193>=a;a++)b[a]=0;for(a=28348;28358>=a;a++)b[a]=0;for(a=28402;28432>=a;a++)b[a]=0;for(a=28462;28492>=a;a++)b[a]=0;for(a=29118;29122>=a;a++)b[a]=0;for(a=29168;29172>=a;a++)b[a]=0;for(a=29177;29185>=
a;a++)b[a]=0;for(a=29187;29195>=a;a++)b[a]=0;for(a=29900;29903>=a;a++)b[a]=0;for(a=30161;30179>=a;a++)b[a]=0;for(a=30491;30494>=a;a++)b[a]=0;for(a=30729;30732>=a;a++)b[a]=0;for(a=31251;31259>=a;a++)b[a]=0;for(a=31265;31268>=a;a++)b[a]=0;for(a=31275;31279>=a;a++)b[a]=0;for(a=31281;31297>=a;a++)b[a]=0;for(a=31461;31469>=a;a++)b[a]=0;for(a=31491;31495>=a;a++)b[a]=0;for(a=31917;31922>=a;a++)b[a]=0;for(a=31965;32E3>=a;a++)b[a]=0;for(a=32001;32003>=a;a++)b[a]=2;for(a=32005;32031>=a;a++)b[a]=2;for(a=32033;32060>=
a;a++)b[a]=2;for(a=32064;32067>=a;a++)b[a]=2;for(a=32074;32077>=a;a++)b[a]=2;for(a=32081;32086>=a;a++)b[a]=0;for(a=32107;32130>=a;a++)b[a]=0;for(a=32133;32158>=a;a++)b[a]=0;for(a=32164;32167>=a;a++)b[a]=2;for(a=32180;32199>=a;a++)b[a]=0;for(a=32201;32260>=a;a++)b[a]=0;for(a=32301;32360>=a;a++)b[a]=0;for(a=32601;32662>=a;a++)b[a]=0;for(a=32664;32667>=a;a++)b[a]=2;for(a=32701;32761>=a;a++)b[a]=0;for(a=53001;53004>=a;a++)b[a]=0;for(a=53008;53019>=a;a++)b[a]=0;for(a=53021;53032>=a;a++)b[a]=0;for(a=53034;53037>=
a;a++)b[a]=0;for(a=53042;53046>=a;a++)b[a]=0;for(a=53074;53080>=a;a++)b[a]=0;for(a=54001;54004>=a;a++)b[a]=0;for(a=54008;54019>=a;a++)b[a]=0;for(a=54021;54032>=a;a++)b[a]=0;for(a=54034;54037>=a;a++)b[a]=0;for(a=54042;54046>=a;a++)b[a]=0;for(a=54048;54053>=a;a++)b[a]=0;for(a=54074;54080>=a;a++)b[a]=0;for(a=54098;54101>=a;a++)b[a]=0;for(a=102001;102040>=a;a++)b[a]=0;for(a=102042;102063>=a;a++)b[a]=0;for(a=102065;102067>=a;a++)b[a]=0;for(a=102070;102117>=a;a++)b[a]=0;for(a=102122;102216>=a;a++)b[a]=
0;for(a=102221;102377>=a;a++)b[a]=0;for(a=102382;102388>=a;a++)b[a]=0;for(a=102389;102398>=a;a++)b[a]=2;for(a=102399;102444>=a;a++)b[a]=0;for(a=102445;102447>=a;a++)b[a]=2;for(a=102448;102458>=a;a++)b[a]=0;for(a=102459;102468>=a;a++)b[a]=2;for(a=102469;102499>=a;a++)b[a]=0;for(a=102500;102519>=a;a++)b[a]=1;for(a=102520;102524>=a;a++)b[a]=0;for(a=102525;102529>=a;a++)b[a]=2;for(a=102530;102588>=a;a++)b[a]=0;for(a=102590;102598>=a;a++)b[a]=0;for(a=102601;102603>=a;a++)b[a]=0;for(a=102605;102628>=a;a++)b[a]=
0;for(a=102629;102646>=a;a++)b[a]=2;for(a=102648;102700>=a;a++)b[a]=2;for(a=102701;102703>=a;a++)b[a]=0;for(a=102707;102730>=a;a++)b[a]=2;for(a=102733;102758>=a;a++)b[a]=2;for(a=102767;102900>=a;a++)b[a]=0;for(a=102965;102969>=a;a++)b[a]=0;for(a=102971;102973>=a;a++)b[a]=0;for(a=102975;102989>=a;a++)b[a]=0;for(a=102990;102992>=a;a++)b[a]=1;for(a=102997;103002>=a;a++)b[a]=0;for(a=103003;103008>=a;a++)b[a]=2;for(a=103009;103011>=a;a++)b[a]=0;for(a=103012;103014>=a;a++)b[a]=2;for(a=103019;103021>=a;a++)b[a]=
0;for(a=103022;103024>=a;a++)b[a]=2;for(a=103029;103031>=a;a++)b[a]=0;for(a=103032;103034>=a;a++)b[a]=2;for(a=103065;103068>=a;a++)b[a]=0;for(a=103074;103076>=a;a++)b[a]=0;for(a=103077;103079>=a;a++)b[a]=1;for(a=103080;103082>=a;a++)b[a]=0;for(a=103083;103085>=a;a++)b[a]=2;for(a=103090;103093>=a;a++)b[a]=0;for(a=103097;103099>=a;a++)b[a]=0;for(a=103100;103102>=a;a++)b[a]=2;for(a=103107;103109>=a;a++)b[a]=0;for(a=103110;103112>=a;a++)b[a]=2;for(a=103113;103116>=a;a++)b[a]=0;for(a=103117;103120>=a;a++)b[a]=
2;for(a=103153;103157>=a;a++)b[a]=0;for(a=103158;103162>=a;a++)b[a]=2;for(a=103163;103165>=a;a++)b[a]=0;for(a=103166;103168>=a;a++)b[a]=1;for(a=103169;103171>=a;a++)b[a]=2;for(a=103186;103188>=a;a++)b[a]=0;for(a=103189;103191>=a;a++)b[a]=2;for(a=103192;103195>=a;a++)b[a]=0;for(a=103196;103199>=a;a++)b[a]=2;for(a=103200;103224>=a;a++)b[a]=0;for(a=103225;103227>=a;a++)b[a]=1;for(a=103232;103237>=a;a++)b[a]=0;for(a=103238;103243>=a;a++)b[a]=2;for(a=103244;103246>=a;a++)b[a]=0;for(a=103247;103249>=a;a++)b[a]=
2;for(a=103254;103256>=a;a++)b[a]=0;for(a=103257;103259>=a;a++)b[a]=2;for(a=103264;103266>=a;a++)b[a]=0;for(a=103267;103269>=a;a++)b[a]=2;for(a=103300;103375>=a;a++)b[a]=0;for(a=103381;103383>=a;a++)b[a]=0;for(a=103384;103386>=a;a++)b[a]=1;for(a=103387;103389>=a;a++)b[a]=0;for(a=103390;103392>=a;a++)b[a]=2;for(a=103397;103399>=a;a++)b[a]=0;for(a=103400;103471>=a;a++)b[a]=2;for(a=103476;103478>=a;a++)b[a]=0;for(a=103479;103481>=a;a++)b[a]=2;for(a=103486;103488>=a;a++)b[a]=0;for(a=103489;103491>=a;a++)b[a]=
2;for(a=103492;103495>=a;a++)b[a]=0;for(a=103496;103499>=a;a++)b[a]=2;for(a=103528;103543>=a;a++)b[a]=0;for(a=103544;103548>=a;a++)b[a]=2;for(a=103549;103551>=a;a++)b[a]=0;for(a=103552;103554>=a;a++)b[a]=1;for(a=103555;103557>=a;a++)b[a]=2;for(a=103558;103560>=a;a++)b[a]=0;for(a=103571;103573>=a;a++)b[a]=0;for(a=103574;103576>=a;a++)b[a]=2;for(a=103577;103580>=a;a++)b[a]=0;for(a=103581;103583>=a;a++)b[a]=2;for(a=103595;103694>=a;a++)b[a]=0;for(a=103696;103699>=a;a++)b[a]=0;for(a=103700;103793>=a;a++)b[a]=
2;for(a=103794;103872>=a;a++)b[a]=0;for(a=103900;103971>=a;a++)b[a]=2;return A.WKIDUnitConversion=b})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/gfx/matrix ../kernel ../config ../sniff ../request ../domUtils ./layer ./MapImage".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l){var r=f.defaults.map.zoomDuration;D=D(c,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},
constructor:function(m,q){this.useMapTime=q&&q.hasOwnProperty("useMapTime")?!!q.useMapTime:!0;this.extentProcessor=q&&q.extentProcessor;var v=a.hitch;this._exportMapImageHandler=v(this,this._exportMapImageHandler);this._imgSrcFunc=v(this,this._imgSrcFunc);this._divAlphaImageFunc=v(this,this._divAlphaImageFunc);this._tileLoadHandler=v(this,this._tileLoadHandler);this._tileErrorHandler=v(this,this._tileErrorHandler);this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(m,q,v){this.inherited(arguments);
this._map=m;var B=this._div=b.create("div",null,q),w=e._css.names,z={position:"absolute",width:m.width+"px",height:m.height+"px",overflow:"visible",opacity:this.opacity},x=n("ie"),y=A.connect,u=m.__visibleDelta;8===x&&delete z.opacity;"css-transforms"===m.navigationMode?(this._isChildLayer||(z[w.transform]=e._css.translate(u.x,u.y),g.set(B,z)),this._left=u.x,this._top=u.y):(z.left="0px",z.top="0px",g.set(B,z),this._left=this._top=0);g.set(B,z);this._onResizeHandler_connect=y(m,"onResize",this,"_onResizeHandler");
this._opacityChangeHandler_connect=y(this,"onOpacityChange",this,"_opacityChangeHandler");this._img_loading=null;this._dragOrigin={x:0,y:0};this.evaluateSuspension();if(this.suspended&&!m.loaded)var t=A.connect(m,"onLoad",this,function(){A.disconnect(t);t=null;this.evaluateSuspension()});this.extentProcessor&&(this._panEndEvalHandle=A.connect(m,"onPanEnd",this,this.evaluateSuspension),this._zoomEndEvalHandle=A.connect(m,"onZoomEnd",this,this.evaluateSuspension));return B},_unsetMap:function(m,q){this._img&&
this._clearEventListeners(this._img);this._img_loading&&this._clearEventListeners(this._img_loading);b.destroy(this._div);this._map=this._div=this._img=this._img_loading=null;var v=A.disconnect;v(this._onResizeHandler_connect);v(this._opacityChangeHandler_connect);v(this._panEndEvalHandle);v(this._zoomEndEvalHandle);this._panEndEvalHandle=this._zoomEndEvalHandle=this._onResizeHandler_connect=this._opacityChangeHandler_connect=null;this._fireUpdateEnd();this._toggleTime();clearTimeout(this._wakeTimer);
this._wakeTimer=null;this._disableDrawConnectors();this.inherited(arguments)},_onResizeHandler:function(m,q,v){g.set(this._div,{width:q+"px",height:v+"px"});this._onExtentChangeHandler(m)},onSuspend:function(){this.inherited(arguments);this._fireUpdateEnd();this._toggleTime();k.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var m=this._map;this._toggleTime();"css-transforms"===m.navigationMode&&(m=m.__visibleDelta,
this._left=m.x,this._top=m.y,this._isChildLayer||g.set(this._div,e._css.names.transform,e._css.translate(this._left,this._top)));this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0)}),0)},canResume:function(){var m=this.inherited(arguments);if(m){var q=this._map.extent;this.extentProcessor&&q&&(m=!!this.extentProcessor({layer:this,extent:q,width:this._map.width}).extent)}return m},_enableDrawConnectors:function(){var m=
A.connect,q=this._map;q&&(this._onPanHandler_connect=m(q,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=m(q,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===q.navigationMode?this._onScaleHandler_connect=m(q,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=m(q,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var m=A.disconnect;m(this._onPanHandler_connect);m(this._onExtentChangeHandler_connect);m(this._onZoomHandler_connect);m(this._onScaleHandler_connect);
this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var m=this._map;this.timeInfo&&this.useMapTime&&m&&!this.suspended?(this._timeConnect||(this._timeConnect=A.connect(m,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(m.timeExtent)):(A.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(m){this._params&&(this._params.time=m?m.toJson().join(","):
null)},_onPanHandler:function(m,q){this._panDx=q.x;this._panDy=q.y;var v=this._dragOrigin,B=this._map.__visibleDelta,w=this._img;w&&("css-transforms"===this._map.navigationMode?(this._left=B.x+q.x,this._top=B.y+q.y,this._isChildLayer||g.set(this._div,e._css.names.transform,e._css.translate(this._left,this._top))):g.set(w,{left:v.x+q.x+"px",top:v.y+q.y+"px"}))},_onExtentChangeHandler:function(m,q,v){if(!this.suspended){clearTimeout(this._wakeTimer);this._wakeTimer=null;var B=this._map,w=this._img,
z=w&&w.style,x=this._dragOrigin;!q||v||!w||q.x===this._panDx&&q.y===this._panDy||("css-transforms"===B.navigationMode?(q=B.__visibleDelta,this._left=q.x,this._top=q.y,this._isChildLayer||g.set(this._div,e._css.names.transform,e._css.translate(this._left,this._top))):g.set(w,{left:x.x+q.x+"px",top:x.y+q.y+"px"}));w?(x.x=parseInt(z.left,10),x.y=parseInt(z.top,10)):x.x=x.y=0;"css-transforms"===B.navigationMode&&v&&w&&(g.set(w,e._css.names.transition,"none"),w._multiply=w._multiply?d.multiply(w._matrix,
w._multiply):w._matrix);this._fireUpdateStart();if(v=this._img_loading)if(this._clearEventListeners(v),b.destroy(v),this._img_loading=null,v=this._jsonRequest){try{v.cancel()}catch(G){}this._jsonRequest=null}var y=B.width;v=B.height;q=y;var u=0;10<=this.version&&B.wrapAround180&&(m=m._normalize(!0));this.extentProcessor&&(u=this.extentProcessor({layer:this,extent:m,width:q}),m=u.extent,q=u.width,u=u.marginLeft||0);if(this.isPNG32)w=this._img_loading=b.create("div"),w.id=B.id+"_"+this.id+"_"+(new Date).getTime(),
g.set(w,{position:"absolute",left:"0px",top:"0px",width:q+"px",height:v+"px"}),B=w.appendChild(b.create("div")),g.set(B,{opacity:0,width:q+"px",height:v+"px"}),this.getImageUrl(m,q,v,this._divAlphaImageFunc),w=null;else{var t=this._img_loading=b.create("img"),C=e._css.names,E=n("ie"),F={position:"absolute",width:q+"px",height:v+"px"};t.setAttribute("decoding","sync");8===E&&(F.opacity=this.opacity);null!=u&&0!==u&&(F.marginLeft=u+"px");"css-transforms"===B.navigationMode?(F[C.transform]=e._css.translate(-this._left,
-this._top),t._tdx=-this._left,t._tdy=-this._top,F[C.transition]=C.transformName+" "+r+"ms ease",this.extentProcessor&&(F[C.origin]=y/2-u+"px "+v/2+"px")):(F.left="0px",F.top="0px");t.id=B.id+"_"+this.id+"_"+(new Date).getTime();g.set(t,F);t._onload_connect=A.connect(t,"onload",this,"_onLoadHandler");t._onerror_connect=A.connect(t,"onerror",this,"_onErrorHandler");t._onabort_connect=A.connect(t,"onabort",this,"_onErrorHandler");this._startRect={left:x.x,top:x.y,width:w?parseInt(z.width,10):q,height:w?
parseInt(z.height,10):v,marginLeft:w?parseInt(z.marginLeft||"0",10):u,zoom:z&&z.zoom?parseFloat(z.zoom):1};this.getImageUrl(m,q,v,this._imgSrcFunc);t=null}}},_onTimeExtentChangeHandler:function(m){this.suspended||(this._setTime(m),this.refresh(!0))},getImageUrl:function(m,q,v,B){},_imgSrcFunc:function(m){this._img_loading.src=m},_divAlphaImageFunc:function(m){g.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+m+"', sizingMethod\x3d'scale')");this._onLoadHandler({currentTarget:this._img_loading})},
_onLoadHandler:function(m){m=m.currentTarget;var q=this._map;this._clearEventListeners(m);!q||q.__panning||q.__zooming?b.destroy(m):(this._img&&this._div.removeChild(this._img),this._img=m,q=m.style,this._startRect={left:0,top:0,width:parseInt(q.width,10),height:parseInt(q.height,10),marginLeft:parseInt(q.marginLeft||"0",10),zoom:1},this._div.appendChild(m),this.suspended||k.show(this._div),this._img_loading=null,m=this._dragOrigin,m.x=m.y=0,this.onUpdate());this._fireUpdateEnd()},_onErrorHandler:function(m){m=
m.currentTarget;g.set(m,"visibility","hidden");this._clearEventListeners(m);m=Error("Unable to load image: "+m.src);this.onError(m);this._fireUpdateEnd(m)},_clearEventListeners:function(m){A.disconnect(m._onload_connect);A.disconnect(m._onerror_connect);A.disconnect(m._onabort_connect);m._onload_connect=m._onerror_connect=m._onabort_connect=null},setUseMapTime:function(m,q){this.useMapTime=m;this._toggleTime();q||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},
_onScaleHandler:function(m,q){var v={},B=e._css.names,w=this._img;if(w){g.set(w,B.transition,q?"none":B.transformName+" "+r+"ms ease");w._matrix=m;m=w._multiply?d.multiply(m,w._multiply):m;if(w._tdx||w._tdy)m=d.multiply(m,{xx:1,xy:0,yx:0,yy:1,dx:w._tdx,dy:w._tdy});v[B.transform]=e._css.matrix(m);g.set(w,v)}},_onZoomHandler:function(m,q,v){m=this._startRect;var B=m.width*q,w=m.height*q,z=m.marginLeft*q,x=this._img,y=n("ie");x&&(y&&8>y?g.set(x,{left:m.left-(B-m.width)*(v.x-m.left)/m.width+"px",top:m.top-
(w-m.height)*(v.y-m.top)/m.height+"px",zoom:q*m.zoom}):g.set(x,{left:m.left-(B-m.width)*(v.x-m.left)/m.width+"px",top:m.top-(w-m.height)*(v.y-m.top)/m.height+"px",width:B+"px",height:w+"px"}),null!=z&&0!==z&&g.set(x,{marginLeft:z+"px"}))},_exportMapImage:function(m,q,v){var B=this._exportMapImageHandler;q.token=this._getToken();h({url:m,content:q,callbackParamName:"callback",load:function(w,z){B(w,z,v)},error:f.defaults.io.errorHandler})},_exportMapImageHandler:function(m,q,v){m=new l(m);this.onMapImageExport(m);
v&&v(m)},onMapImageExport:function(){},setOpacity:function(m){if(this.opacity!=m)this.onOpacityChange(this.opacity=m)},onOpacityChange:function(){},_opacityChangeHandler:function(m){var q=8===n("ie")?this._img:this._div;g.set(q,"opacity",m)}});a.setObject("layers.DynamicMapServiceLayer",D,e);return D})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m){var q=D([f],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(v,B){this._attrs={};v&&b.isString(v)?this._url=l.urlToObject(this.url=l.normalize(v)):(this.url=this._url=null,(B=B||v)&&(B.layerDefinition||B.query)&&(B=null));this.spatialReference=new r(4326);this.initialExtent=new m(-180,-90,180,90,new r(4326));this._map=this._div=
null;this.normalization=!0;B&&(B.id&&(this.id=B.id),this.arcgisProps=B.arcgisProps,this.parentLayer=B.parentLayer,!1===B.visible&&(this.visible=!1),h.isDefined(B.opacity)&&(this.opacity=B.opacity),h.isDefined(B.minScale)&&this.setMinScale(B.minScale),h.isDefined(B.maxScale)&&this.setMaxScale(B.maxScale),this.attributionDataUrl=B.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,h.isDefined(B.showAttribution)&&(this.showAttribution=B.showAttribution),this.className=B.className,
this.refreshInterval=B.refreshInterval||0);this._errorHandler=b.hitch(this,this._errorHandler);this._scheduledRefresh=b.hitch(this,this._scheduledRefresh);this.refresh=b.hitch(this,this.refresh);if(this.managedSuspension){var w=this._setMap;this._setMap=function(z){var x=w.apply(this,arguments);this._fireAttach(z);this.evaluateSuspension();if(this.suspended&&!z.loaded)var y=a.connect(z,"onLoad",this,function(){a.disconnect(y);y=null;this.evaluateSuspension()});return x}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(v){this.loaded||(this.loadError=v);this.onError(v)},_setMap:function(v,B,w,z){this._map=v;this._lyrZEHandle=a.connect(v,"onZoomEnd",this,this._processMapScale);if(v.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var x=a.connect(v,"onLoad",this,function(){a.disconnect(x);
x=null;this._processMapScale()})},_unsetMap:function(v,B){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(v)},_fireAttach:function(v){this.attached=!0;this.onAttach({map:v})},_fireDetach:function(v){this.attached=!1;this.onDetach({map:v})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(v,B){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(v,B),this._map&&this._map._decr())},_getToken:function(){var v=this._url,B=this.credential;return v&&v.query&&v.query.token||B&&B.token||void 0},_findCredential:function(){this.credential=n.id&&this._url&&n.id.findCredential(this._url.path)},_useSSL:function(){var v=this._url,B=/^http:/i;this.url&&(this.url=this.url.replace(B,"https:"));v&&v.path&&(v.path=v.path.replace(B,"https:"))},
refresh:function(v){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(v){this.setScaleRange(v)},setMaxScale:function(v){this.setScaleRange(null,v)},setScaleRange:function(v,B){var w=h.isDefined(v),z=h.isDefined(B);this.loaded||(this._hasMin=this._hasMin||w,this._hasMax=this._hasMax||z);var x=this.minScale,y=this.maxScale;this.minScale=(w?v:this.minScale)||0;this.maxScale=(z?B:this.maxScale)||0;if(x!==this.minScale||y!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var v=void 0===this._resumedOnce,B=this.className,w=this._attrs,z=this.getNode(),x;if(v){this._resumedOnce=!0;if(B&&z){var y=z.getAttribute("class")||"";(new RegExp("(^|\\s)"+B+"(\\s|$)","i")).test(y)||z.setAttribute("class",y+((y?" ":"")+B))}if(w&&z)for(x in w)w.hasOwnProperty(x)&&z.setAttribute(x,w[x])}this._refreshRT();this.onResume({firstOccurrence:v});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var v=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();v!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(v){return v?q.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(v,B){if(!(v||this._map&&this._map.loaded))return!1;var w=this._map;v=v||w.getScale();var z=this.minScale,x=this.maxScale,y=!z,u=!x,t;B&&(t=w.width>w.height?w.width:w.height);y||(v<=z?y=!0:B&&(y=Math.abs(z-v)/z<1/
t));u||(v>=x?u=!0:B&&(u=Math.abs(x-v)/x<1/t));return y&&u},getAttributionData:function(){var v=this.attributionDataUrl,B=new g(c._dfdCanceller);this.hasAttributionData&&v?(B._pendingDfd=k({url:v,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),B._pendingDfd.then(function(w){B.callback(w)},function(w){B.errback(w)})):(v=Error("Layer does not have attribution data"),v.log=!!A.isDebug,B.errback(v));return B},getResourceInfo:function(){var v=this.resourceInfo;return b.isString(v)?d.fromJson(v):
b.clone(v)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(v,B){var w=this.getNode();if("data-reference"===v&&11>e("ie"))return this;w&&(null==B?w.removeAttribute(v):w.setAttribute(v,B));this._attrs&&(null==B?delete this._attrs[v]:this._attrs[v]=B);return this},setRefreshInterval:function(v){var B=this.refreshInterval;this.refreshInterval=v;this._toggleRT(!1);v&&this._toggleRT(!0);if(B!==v)this.onRefreshIntervalChange();return this},_toggleRT:function(v){v&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(v){var B=
this._refreshTS;B&&(v=this._reCheckTS.test(v)?v.replace(this._reReplaceTS,"$$$1"+B):v+((-1===v.indexOf("?")?"?":"\x26")+"_ts\x3d"+B));return v},setNormalization:function(v){this.normalization=v},setVisibility:function(v){this.visible!==v&&(this.visible=v,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",v?null:"")},onLoad:function(){},onAttach:function(v){},onDetach:function(v){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});b.setObject("layers.Layer",q,n);return q})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/has ../kernel ../domUtils ../geometry/Extent".split(" "),function(D,A,a,b,g,d,e){D=D(null,{declaredClass:"esri.layers.MapImage",constructor:function(f){A.mixin(this,
f);this.extent=new e(this.extent)},visible:!0,opacity:1,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var f=this._node,n=this._layer,h;if(f){if(h=n&&n._div)n.suspended||n._setPos(f,h._left,h._top),(n._active||h).appendChild(f);d.show(f)}}},hide:function(){if(this.visible){this.visible=!1;var f=this._node;f&&(d.hide(f),f.parentNode&&f.parentNode.removeChild(f))}},setOpacity:function(f){var n=this._node;this.opacity=f;
n&&a.set(n,"opacity",f)}});A.setObject("layers.MapImage",D,g);return D})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../request ../SpatialReference ../geometry/Extent ./LayerInfo".split(" "),function(D,A,a,b,g,d,e,f,n,h){D=D(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",infoTemplates:null,constructor:function(k,c){this.layerInfos=[];c&&(this.infoTemplates=c.infoTemplates||null);var l=this._params=
{},r=this._url.query?this._url.query.token:null;r&&(l.token=r)},setInfoTemplates:function(k){this.infoTemplates=k},_load:function(){e({url:this._url.path,content:A.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(k,c){try{this._findCredential();(this.credential&&this.credential.ssl||k&&k._ssl)&&this._useSSL();this.description=k.description;
this.copyright=k.copyrightText;this.spatialReference=k.spatialReference&&new f(k.spatialReference);this.initialExtent=k.initialExtent&&new n(k.initialExtent);this.fullExtent=k.fullExtent&&new n(k.fullExtent);this.units=k.units;this.maxRecordCount=k.maxRecordCount;this.maxImageHeight=k.maxImageHeight;this.maxImageWidth=k.maxImageWidth;this.supportsDynamicLayers=k.supportsDynamicLayers;var l=this.layerInfos=[],r=k.layers,m=this._defaultVisibleLayers=[];a.forEach(r,function(q,v){l[v]=new h(q);q.defaultVisibility&&
m.push(q.id)});this.visibleLayers||(this.visibleLayers=m);this.version=k.currentVersion;this.cimVersion=k.cimVersion;this.version||(this.version="capabilities"in k||"tables"in k?10:"supportedImageFormatTypes"in k?9.31:9.3);this.capabilities=k.capabilities;d.isDefined(k.minScale)&&!this._hasMin&&this.setMinScale(k.minScale);d.isDefined(k.maxScale)&&!this._hasMax&&this.setMaxScale(k.maxScale)}catch(q){this._errorHandler(q)}}});A.setObject("layers.ArcGISMapServiceLayer",D,g);return D})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(d){A.mixin(this,d)},toJson:function(){return g.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}});A.setObject("layers.LayerInfo",D,b);return D})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../TimeExtent ./TimeReference ./LayerTimeOptions".split(" "),
function(D,A,a,b,g,d,e){D=D(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(f){null!==f&&(A.mixin(this,f),f.exportOptions&&(this.exportOptions=new e(f.exportOptions)),this.timeExtent=null,f.timeExtent&&2===f.timeExtent.length&&(this.timeExtent=new g(f.timeExtent)),this.timeReference=new d(f.timeReference))}});A.mixin(D,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",
UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"});A.setObject("layers.TimeInfo",D,b);return D})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel"],function(D,A,a,b){var g=D(null,{declaredClass:"esri.TimeExtent",constructor:function(d){if(1<arguments.length)this._create(arguments[0],arguments[1]);
else if(d)if(A.isArray(d)){var e=d[0],f=d[1];this.startTime=null===e||"null"===e?null:new Date(e);this.endTime=null===f||"null"===f?null:new Date(f)}else d instanceof Date&&this._create(d,null)},offset:function(d,e){var f=new g,n=this.startTime,h=this.endTime;n&&(f.startTime=this._getOffsettedDate(n,d,e));h&&(f.endTime=this._getOffsettedDate(h,d,e));return f},intersection:function(d){return this._intersection(this,d)},toJson:function(){var d=[],e=this.startTime;d.push(e?e.getTime():"null");e=this.endTime;
d.push(e?e.getTime():"null");return d},_create:function(d,e){this.startTime=d?new Date(d.getTime()):null;this.endTime=e?new Date(e.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",
setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(d,e){if(d&&e){var f=d.startTime,n=d.endTime,
h=e.startTime,k=e.endTime;f=f?f.getTime():-Infinity;h=h?h.getTime():-Infinity;n=n?n.getTime():Infinity;k=k?k.getTime():Infinity;var c,l;h>=f&&h<=n?c=h:f>=h&&f<=k&&(c=f);n>=h&&n<=k?l=n:k>=f&&k<=n&&(l=k);if(isNaN(c)||isNaN(l))return null;f=new g;f.startTime=-Infinity===c?null:new Date(c);f.endTime=Infinity===l?null:new Date(l);return f}return null},_getOffsettedDate:function(d,e,f){var n=this._refData;d=new Date(d.getTime());e&&f&&(n=n[f],d[n.setter](d[n.getter]()+e*n.multiplier));return d}});return b.TimeExtent=
g})},"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.layers.TimeReference",constructor:function(g){g&&A.mixin(this,g)}});A.setObject("layers.TimeReference",D,b);return D})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(d){d&&
A.mixin(this,d)},toJson:function(){return g.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}});A.setObject("layers.LayerTimeOptions",D,b);return D})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../lang ../layerUtils".split(" "),function(D,A,a,b,g,d,e,f){A=A(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=
[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(n){this.bbox&&D.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var h=this.bbox||this.extent;h=h&&n&&h._normalize(!0);n=this.layerOption;var k=h?h.spatialReference.wkid||b.toJson(h.spatialReference.toJson()):null,c=this.imageSpatialReference;h={dpi:this.dpi,format:this.format,
transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:h?h.xmin+","+h.ymin+","+h.xmax+","+h.ymax:null,bboxSR:k,layers:n?n+":"+this.layerIds.join(","):null,imageSR:c?c.wkid||b.toJson(c.toJson()):k};h.layerDefs=f._serializeLayerDefinitions(this.layerDefinitions);n=this.timeExtent;h.time=n?n.toJson().join(","):null;h.layerTimeOptions=f._serializeTimeOptions(this.layerTimeOptions);return e.filter(h,function(l){if(null!==l)return!0})}});a.mixin(A,{LAYER_OPTION_SHOW:"show",
LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"});a.setObject("layers.ImageParameters",A,d);return A})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerInfo ./LayerMapSource ./LayerDataSource".split(" "),function(D,A,a,b,g,d,e,f){D=D(d,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(n){n&&(n.source?n="mapLayer"===
n.source.type?new e(n.source):new f(n.source):(n=new e,n.mapLayerId=this.id),this.source=n)},toJson:function(){var n=this.inherited(arguments);n.source=this.source&&this.source.toJson();return g.fixJson(n)}});A.setObject("layers.DynamicLayerInfo",D,b);return D})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource".split(" "),function(D,A,a,b,g,d){D=D(d,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return g.fixJson({type:"mapLayer",
mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}});A.setObject("layers.LayerMapSource",D,b);return D})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(g){g&&A.mixin(this,g)},toJson:function(){}});A.setObject("layers.LayerSource",D,b);return D})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./LayerSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource".split(" "),
function(D,A,a,b,g,d,e,f,n,h){D=D(d,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(k){if(k&&k.dataSource){switch(k.dataSource.type){case "table":k=new e(k.dataSource);break;case "queryTable":k=new f(k.dataSource);break;case "joinTable":k=new n(k.dataSource);break;case "raster":k=new h(k.dataSource);break;default:k=k.dataSource}this.dataSource=k}},toJson:function(){var k={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return g.fixJson(k)}});
A.setObject("layers.LayerDataSource",D,b);return D})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(D,A,a,b,g,d){D=D(d,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return g.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}});A.setObject("layers.TableDataSource",D,b);return D})},"esri/layers/DataSource":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.layers.DataSource",constructor:function(g){g&&A.mixin(this,g)},toJson:function(){}});A.setObject("layers.DataSource",D,b);return D})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ../SpatialReference".split(" "),function(D,A,a,b,g,d,e){D=D(d,{declaredClass:"esri.layers.QueryDataSource",constructor:function(f){f&&(f.oidFields&&A.isString(f.oidFields)&&
(this.oidFields=f.oidFields.split(",")),f.spatialReference&&(this.spatialReference=new e(f.spatialReference)))},toJson:function(){var f={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var n="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?
"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType;f.geometryType=n}return g.fixJson(f)}});A.setObject("layers.QueryDataSource",D,b);return D})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource ./LayerMapSource ./TableDataSource ./QueryDataSource ./RasterDataSource".split(" "),function(D,A,a,b,g,d,e,f,n,h){var k=D(d,{declaredClass:"esri.layers.JoinDataSource",constructor:function(c){c&&
(c.leftTableSource&&(this.leftTableSource=this._createLayerSource(c.leftTableSource)),c.rightTableSource&&(this.rightTableSource=this._createLayerSource(c.rightTableSource)))},_createLayerSource:function(c){if("mapLayer"===c.type)var l=new e(c);else{l={type:"dataLayer"};switch(c.dataSource.type){case "table":var r=new f(c.dataSource);break;case "queryTable":r=new n(c.dataSource);break;case "joinTable":r=new k(c.dataSource);break;case "raster":r=new h(c.dataSource);break;default:r=c.dataSource}l.dataSource=
r;l.toJson=function(){var m={type:"dataLayer",dataSource:r.toJson()};return g.fixJson(m)}}return l},toJson:function(){var c={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};var l="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType;
c.joinType=l;return g.fixJson(c)}});A.setObject("layers.JoinDataSource",k,b);return k})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./DataSource".split(" "),function(D,A,a,b,g,d){D=D(d,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return g.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}});A.setObject("layers.RasterDataSource",D,b);return D})},"arcgisonline/sharing/geow/Roles":function(){define("require exports tslib ../../esriGeowConfig ../util dojo/Deferred dojo/promise/all".split(" "),
function(D,A,a,b,g,d,e){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);return function(){function f(){this.declaredClass="arcgisonline.sharing.geow.Roles"}f.exceedsRolePrivileges=function(n,h,k){h=h||[];var c;k&&(n=a.__spreadArray(a.__spreadArray([],n),f.extraLevelOnePrivileges));for(c=0;c<h.length;c++)if(k=h[c],-1===n.indexOf(k))return!0;return!1};f.prototype.createRole=function(n,h){return g["default"].request({url:b["default"].restBaseUrl+"portals/self/createRole",
content:{name:n,description:h}},{usePost:!0})};f.prototype.updateRole=function(n,h,k){return g["default"].request({url:b["default"].restBaseUrl+"portals/self/roles/"+n+"/update",content:{name:h,description:k}},{usePost:!0})};f.prototype.deleteRole=function(n){return g["default"].request({url:b["default"].restBaseUrl+"portals/self/roles/"+n+"/delete"},{usePost:!0})};f.prototype.setPrivileges=function(n,h){var k=b["default"].restBaseUrl+"portals/self/roles/"+n+"/setPrivileges",c={id:n,privileges:JSON.stringify({privileges:h})};
return g["default"].request({url:k,content:c},{usePost:!0})};f.prototype.getPrivileges=function(n){return g["default"].request({url:b["default"].restBaseUrl+"portals/self/roles/"+n+"/privileges"})};f.prototype.getAllUsersForRole=function(n){var h=this,k=new d["default"],c=[],l=[],r=1,m,q,v;h.getUsersForRole(1,100,n).then(function(B){if(B&&B.users){l=l.concat(B.users);r=B.nextStart;m=B.total-l.length;q=Math.ceil(m/100);for(v=0;v<q;v++)c.push(h.getUsersForRole(r+100*v,100,n));e["default"](c).then(function(w){w.forEach(function(z){l=
l.concat(z.users)});k.resolve(l)},function(){k.resolve(l)})}},function(){k.resolve(l)});return k};f.prototype.getUsersForRole=function(n,h,k){return g["default"].request({url:b["default"].restBaseUrl+"portals/self/users",content:{start:n,num:h,role:k}})};f.prototype.getAllRoles=function(n){var h=this,k=new d["default"],c=[],l=1,r=[],m,q,v;h.getRoles(l,100,n).then(function(B){if(B&&B.roles){r=r.concat(B.roles);l=B.nextStart;m=B.total-r.length;q=Math.ceil(m/100);for(v=0;v<q;v++)c.push(h.getRoles(l+
100*v,100,n));e["default"](c).then(function(w){w.forEach(function(z){r=r.concat(z.roles)});k.resolve(r)},function(){k.resolve(r)})}},function(){k.resolve(r)});return k};f.prototype.getRoles=function(n,h,k){var c=b["default"].restBaseUrl+"portals/self/roles";n={start:n,num:h,returnPrivileges:null};k&&(n.returnPrivileges=k);return g["default"].request({url:c,content:n})};f.prototype.getRole=function(n){return g["default"].request({url:b["default"].restBaseUrl+"portals/self/roles/"+n})};f.prototype.containsPrivilegesOutsideRole=
function(n,h,k){var c=new d["default"];n={roleResult:this.getPrivileges(n),compareResult:this.getPrivileges(h)};var l=!1,r,m;e["default"](n).then(function(q){r=q.roleResult&&q.roleResult.privileges||[];m=q.compareResult&&q.compareResult.privileges||[];k&&k instanceof Array?r=r.concat(k):k&&k instanceof String&&r.push(k);l=f.exceedsRolePrivileges(r,m);c.resolve(l)},function(){c.resolve(l)});return c};f.extraLevelOnePrivileges=["portal:user:joinNonOrgGroup","portal:user:viewTracks"];return f}()})},
"arcgisonline/pages/utils/user":function(){define("require exports tslib ../../esriGeowConfig ./resources ./arrays ../../sharing/util dojo/Deferred dojo/_base/kernel esri/lang".split(" "),function(D,A,a,b,g,d,e,f,n,h){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);return function(){function k(){}k.createFullName=function(c,l){var r=null===c||void 0===c?void 0:c.fullName;l||(l=n["default"].locale);
h["default"].isDefined(c.firstName)&&h["default"].isDefined(c.lastName)&&(r="ja"===l?c.lastName+" "+c.firstName:c.firstName+" "+c.lastName);return r};k.splitFullName=function(c){var l={first:void 0,last:void 0};c&&(c=c.split(" "),1===c.length?(l.first=c[0],l.last=""):1<c.length&&(l.last=c.splice(c.length-1,1)[0],l.first=c.join(" ")));return l};k.checkUsernames=function(c){var l=new f["default"],r={usernames:[]};g["default"].sendAllResources(b["default"].restBaseUrl+"community/checkUsernames",200,
c,function(m){return{usernames:m.join(",")}}).then(function(m){m.forEach(function(q){return r.usernames=r.usernames.concat(q.usernames)});l.resolve(r)},function(m){l.resolve(m)});return l};k.checkForFavorites=function(c,l,r){var m=new f["default"],q=(null===r||void 0===r?void 0:r.items)||[];c=null===c||void 0===c?void 0:c.favGroupId;var v=q.map(function(B){return B.id});c&&(null===v||void 0===v?0:v.length)?(c='(group:"'+c+'" AND id:('+v.join(" OR ")+"))",l.queryItems({q:c,num:q.length||1},!0).then(function(B){var w=
B.results||[];q.forEach(function(z){z.isFavorite=!!d["default"].find(w,function(x){return z.id===x.id})});m.resolve(r)},function(B){m.resolve(r)})):m.resolve(r);return m};k.createValidOrgUsername=function(c,l,r,m){var q,v=null!==(q=(null===c||void 0===c?void 0:c.length)+(null===l||void 0===l?void 0:l.length))&&void 0!==q?q:0;c=c.substring(0,c.length-(v>m?v%m:0))+l.replace(/-/g,"_");c.length<r&&(l=r-c.length,c&&0<l&&(r=""+(new Date).getTime(),c+=r.substring(r.length-l)));return c};k.stripOrgKeyFromUsername=
function(c,l){if(c){var r=c.lastIndexOf(l);if(-1<r&&r<c.length-1&&r===c.length-l.length-1)return c.substring(0,r)}return c};k.cleanUsername=function(c,l){var r=/[^[a-zA-Z0-9@_\.]]*/g,m=/[^[a-zA-Z0-9@_\.\-]]*/g;return 0<(null===c||void 0===c?void 0:c.length)?l?c.replace(m,"_"):c.replace(r,"_"):c};k.cleanUsernameDomain=function(c,l,r){return c&&(l||r)&&(l=c.indexOf("\\"),-1<l&&l<=c.length-2)?c.substring(l+1)+"@"+c.substring(0,l).toUpperCase():c};k.stripUsernameDomain=function(c,l,r){return c&&!l&&r?
c.split("@").shift():c};k.removeSAMLSuffix=function(c,l){var r="_"+l;return c.lastIndexOf(r)===c.length-r.length?c.substring(0,c.lastIndexOf(r)):c};k.addSAMLSuffix=function(c,l){var r=c&&l,m="_"+l,q=r&&-1===c.indexOf(m);r=r&&c.lastIndexOf(m)===c.length-m.length;return q||r?c+m:c};k.isStoryteller=function(c){var l;return"storytellerut"===(null===(l=c.userLicenseTypeId)||void 0===l?void 0:l.toLowerCase())};k.getUserProperties=function(c){var l=new f["default"];(null===c||void 0===c?0:c.username)?e["default"].request({url:b["default"].restBaseUrl+
"community/users/"+c.username+"/properties",content:{f:"json"}}).then(function(r){l.resolve(r.properties)},function(){l.resolve(null)}):l.resolve(null);return l};return k}()})},"arcgisonline/pages/utils/resources":function(){define("require exports tslib ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang esri/lang".split(" "),function(D,A,a,b,g,d,e,f){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);return function(){function n(){}
n.sendAllResources=function(h,k,c,l,r,m){var q=new d["default"];c=e["default"].clone(c);var v=[],B=c.splice(0,k);for(f["default"].isDefined(m)||(m=!0);0<(null===B||void 0===B?void 0:B.length);)v.push(b["default"].request({url:h,content:l(B)},e["default"].mixin({usePost:m},r||{}))),B=c.splice(0,k);g["default"](v).then(function(w){q.resolve(w)},function(w){q.reject(w)});return q};n.sendAllResourcesWithDelay=function(h,k,c,l,r){function m(){setTimeout(function(){(z=B.splice(0,k))&&0<z.length&&(b["default"].request({url:h,
content:l(z)},{usePost:!0}).then(function(u){x++;w.push(u);x>=v&&q.resolve(w)},function(u){x++;x>=v&&q.reject(u)}),y++,m())},0===y?0:r)}var q=new d["default"],v=Math.ceil(c.length/k),B=e["default"].clone(c),w=[],z,x=0,y=0;m();return q};n.sendAllResourcesSerially=function(h,k,c,l){function r(){w=v.splice(0,k);0<(null===w||void 0===w?void 0:w.length)&&b["default"].request({url:h,content:l(w)},{usePost:!0}).then(function(x){z++;B.push(x);z>=q?m.resolve(B):r()},function(x){z++;z>=q?m.reject(x):r()})}
var m=new d["default"],q=Math.ceil(c.length/k),v=e["default"].clone(c),B=[],w,z=0;r();return m};n.fetchAllResources=function(h,k,c){void 0===k&&(k={});void 0===c&&(c="results");var l=new d["default"],r=[],m=100,q=[],v=1,B,w,z;k.start=v;!k.num||k.num>m?k.num=m:m=k.num;b["default"].request({url:h,content:k}).then(function(x){if(null===x||void 0===x?0:x[c]){q=q.concat(x[c]);v=x.nextStart;B=x.total-q.length;w=Math.ceil(B/m);for(z=0;z<w;z++)k.start=v+z*m,r.push(b["default"].request({url:h,content:k}));
g["default"](r).then(function(y){y.forEach(function(u){q=q.concat(u[c])});l.resolve(q)},function(y){l.reject(y)})}else l.resolve(q)},function(x){l.reject(x)});return l};return n}()})},"arcgisonline/sharing/dijit/SiteHeader":function(){define("require exports tslib ../../agoNav ../../esriGeowConfig ../../pages/utils/signin ../../pages/utils/storage ../util ../geow/Account ../geow/Geow ../../tsutils/declareDecorator dijit/_WidgetBase dijit/_TemplatedMixin dojo/Deferred dojo/_base/url dojo/io-query dojo/_base/kernel dojo/sniff dojo/topic esri/config esri/lang dojo/i18n!../../nls/arcgisonline dojo/text!./templates/SiteHeaderSimple.html".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);z=a.__importDefault(z);x=a.__importDefault(x);y=a.__importDefault(y);u=a.__importDefault(u);
return function(){function t(C,E){this.declaredClass="arcgisonline.sharing.dijit.SiteHeader";this.templateString=u["default"];this.i18n=a.__assign(a.__assign({},y["default"].common),y["default"].siteHeader)}t.prototype.postMixInProperties=function(){this.inherited(arguments);this.webLabel=this.i18n.webOnly;this.webDescription=this.i18n.webDesc;this.desktopLabel=this.i18n.allContent;this.desktopDescription=this.i18n.allDesc;this.relativePath=g["default"].baseUrl||"./"};t.prototype.postCreate=function(){var C=
window.location.pathname.toLowerCase();this.isSignInPage=-1!==C.indexOf(g["default"].signin);this.isSignUpPage=-1!==C.indexOf(g["default"].signup);this.isJoinPage=-1!==C.indexOf(g["default"].join);this.isSetupPage=-1!==C.indexOf(g["default"].setup);this.isIEPage=-1!==C.indexOf("ie6.html");this.isTroubleshootPage=-1!==C.indexOf("troubleshoot.html");7>B["default"]("ie")&&!this.isIEPage&&(window.location.href="ie6.html");if(C=document.getElementById("page-border"))C.onclick=function(){}};t.prototype.startup=
function(){this.inherited(arguments);z["default"].defaults.io.corsEnabledServers.push("http://"+location.host);z["default"].defaults.io.corsEnabledServers.push("https://"+location.host);z["default"].defaults.io.proxyUrl=g["default"].proxyServer;return this._fetchSelf()};t.prototype._generateGlobalNav=function(C){this._agoNavIsLoaded||(this.agoNav=new b["default"],this.agoNav.init({config:g["default"].self,legacy:this.legacy,relativePath:this.relativePath}),this._agoNavIsLoaded=!0)};t.prototype._logCookieChange=
function(C){var E=this.telemetry;C&&(null===E||void 0===E?0:E.logEvent)&&E.logEvent({category:"cookie",label:"Organization changed",details:"Yes"})};t.prototype._fetchSelf=function(){var C=this,E=new r["default"];n["default"].getSelf(function(F){C._finishStartup(F);E.resolve(F);w["default"].publish("OnFetchSelf",F)},function(F){C._finishStartup();throw F;});return E};t.prototype._finishStartup=function(C){var E;h["default"].setCookies(C||{});if(C&&!C.code&&!C.message){var F=void 0,G=void 0;C.httpsPort&&
(g["default"].httpsPort=C.httpsPort,G=z["default"].defaults.io.corsEnabledServers.pop());C.httpPort&&(g["default"].httpPort=C.httpPort,F=z["default"].defaults.io.corsEnabledServers.pop());F&&z["default"].defaults.io.corsEnabledServers.push(f["default"].getHttpUrl("http://"+location.host).replace(/:80$/,""));G&&z["default"].defaults.io.corsEnabledServers.push(f["default"].getSecureUrl("http://"+location.host).replace(/:443$/,""));(C.authorizedCrossOriginDomains||[]).forEach(function(S){x["default"].isDefined(S)&&
0<S.length&&z["default"].defaults.io.corsEnabledServers.push({host:S,withCredentials:!0})});d["default"].checkForOrgUserOnOnlineBaseHostAndRedirect(C);this._generateGlobalNav({user:C.user});this.isLoggedIn=f["default"].isLoggedIn();C.isPortal&&f["default"]._cookies&&-1===f["default"]._cookies.arcgis_auth&&delete f["default"]._cookies.arcgis_auth;G=void 0;F=(null===(E=C.user)||void 0===E?void 0:E.culture)||C.culture||v["default"].locale;E=f["default"].getUser();G=q["default"].queryToObject(window.location.search.substring(1));
var H=-1<["hi"].indexOf(F);if(C.culture&&!E)C.culture=C.culture.toLowerCase(),this.updateLocaleCookie(C.culture,C.isPortal,C.allSSL),-1!==C.culture.indexOf("ar")?g["default"].isRightToLeft=!0:g["default"].isRightToLeft=!1,v["default"].locale.toLowerCase()!==C.culture.toLowerCase()&&window.location.reload();else if(!C.culture&&!E)this.hasLocaleCookie()&&(this.removeLocaleCookie(C.isPortal,C.allSSL),window.location.reload());else if(E&&F&&v["default"].locale!==F.toLowerCase()&&!H&&!G.locale&&E.username&&
E.username===C.user.username){var L=f["default"].getCookie("esri_auth");9>B["default"]("ie")&&C.isWebTierAuth&&(G=new Date,L.expires=new Date(G.setSeconds(G.getSeconds()+Number(7200))));!E.culture||E.culture&&E.culture!==F.toLowerCase()?(E.culture=F.toLowerCase(),this.updateLocaleCookie(E.culture.toLowerCase(),C.isPortal,C.allSSL)):E.culture&&E.culture===F.toLowerCase()&&v["default"].locale!==F.toLowerCase()&&this.updateLocaleCookie(F.toLowerCase(),C.isPortal,C.allSSL);window.location.reload()}if(C.isWebTierAuth)if(E&&
(E.username=E.username||E.email),(null===E||void 0===E?0:E.culture)&&E.culture.toLowerCase()!==F.toLowerCase()&&!H){var J=f["default"].getCookie("esri_auth")||{};9>B["default"]("ie")&&(G=new Date,J.expires=new Date(G.setSeconds(G.getSeconds()+Number(7200))));if(!E.culture||E.culture&&E.culture.toLowerCase()!==(null===F||void 0===F?void 0:F.toLowerCase()))E.culture=F.toLowerCase(),J.culture=E.culture,C.allSSL&&(J.allSSL=!0,J.secure=!0),E=a.__assign(a.__assign({},E),J);window.location.reload()}else(null===
(J=null===E||void 0===E?void 0:E.culture)||void 0===J?void 0:J.toLowerCase())!==F.toLowerCase()||v["default"].locale.toLowerCase()===F.toLowerCase()||H||window.location.reload();C.allSSL&&(this.allSSL=g["default"].allSSL=C.allSSL);x["default"].isDefined(g["default"].allSSL)&&g["default"].allSSL&&"http:"===location.protocol&&(window.location.href=f["default"].getSecureUrl(location.href));C.helpBase&&(g["default"].help=C.helpBase,g["default"].helpBase=C.helpBase,J=g["default"].self&&g["default"].self.helpBase||
"support.html",f["default"].isPortal()&&(J=location.protocol+"//"+location.host+C.helpBase,J=this.allSSL||f["default"].usePortalSSL()?f["default"].getSecureUrl(J):f["default"].getHttpUrl(J)));C.helpMap&&C.helpMap.m&&(g["default"].helpMap=C.helpMap.m);C.portalHostname&&(g["default"].portalHostname=C.portalHostname);C.urlKey&&(g["default"].urlKey=C.urlKey);C.staticImagesUrl&&(g["default"].staticImagesUrl=C.staticImagesUrl);J=!1===g["default"].isMultiTenant;J||(F=window.location.host,F===C.portalHostname||
-1===F.indexOf(C.customBaseUrl)||C.access||C.name||(window.location.href=window.location.href.replace(F,C.portalHostname)),!E||"account_admin"!==E.role&&"org_admin"!==E.role||!C.id||C.urlKey||this.isSetupPage||(window.location.href=g["default"].baseUrl+"setup.html"));J?("private"!==(null===C||void 0===C?void 0:C.access)||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||this.isSignUpPage||(window.location.href=""+f["default"].getSecureUrl()+g["default"].signin+"?returnUrl\x3d"+
encodeURIComponent(window.location.href)),!C.isPortal||"singletenant"!==C.portalMode||"7080"!==location.port&&"7443"!==location.port||f["default"].checkForIAA().then(function(S){if(null===S||void 0===S?0:S.hasIAA)if(C.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href=f["default"].getHttpUrl(g["default"].baseUrl)+"error.html?c\x3dWebAdaptorRequired"),!C.portalHostname.match(/:7080\//)&&80!==g["default"].httpPort&&443!==g["default"].httpsPort&&
"http:"===location.protocol&&-1===location.href.indexOf("error.html")){S=new m["default"](location.href);var P=S.path.indexOf("/home/");P=S.path.substring(P+6);S=x["default"].isDefined(S.query)?"?"+S.query:"";window.location.href=""+f["default"].getHttpUrl("http://"+C.portalHostname)+"/home/"+P+S}})):C.id||!C.urlKey||this.isLoggedIn||this.isSignInPage||this.isTroubleshootPage||this.isJoinPage||(window.location.href=""+g["default"].baseUrl.replace("http:","https:")+g["default"].signin+"?returnUrl\x3d"+
encodeURIComponent(window.location.href))}};t.prototype.hasLocaleCookie=function(){return!!e["default"].getCookie("arcgisLocale")||!!e["default"].getCookie("esri_locale")};t.prototype.removeLocaleCookie=function(C,E){e["default"].setCookie("arcgisLocale",null,{expires:-1});e["default"].setCookie("esri_locale",null,{path:"/",domain:C?window.location.hostname:".arcgis.com",secure:!C||E,expires:-1})};t.prototype.updateLocaleCookie=function(C,E,F){e["default"].setCookie("arcgisLocale",C,{sameSite:"Strict"});
e["default"].setCookie("esri_locale",C,{path:"/",domain:E?window.location.hostname:".arcgis.com",secure:!E||F})};t.prototype.updateEsriAccessLinks=function(C){var E=this;g["default"].self.user.userType=C;window.require(["arcgisonline/agoNav"],function(F){E.agoNav=F;F.updateHeaderComponent({config:g["default"].self})})};return t=a.__decorate([k["default"](c["default"],l["default"])],t)}()})},"arcgisonline/agoNav":function(){define("require exports tslib arcgis-components/wrappers/InfoBanner ./esriGeowConfig ./pages/portal/PortalItem ./pages/portal/PortalUser ./pages/portal/LicenseInfo ./pages/organization/widgets/GroupIcon ./pages/utils/notifications ./pages/utils/icons ./pages/utils/notebook ./pages/utils/mapViewer ./pages/utils/storage ./sharing/geow/Account ./sharing/geow/Geow ./sharing/dijit/Webworker/_AppLauncher ./sharing/util dojo/promise/all dojo/debounce dojo/string dojo/topic dojo/query dojo/io-query dojo/_base/kernel dojo/_base/lang dojo/Deferred dojo/on esri/arcgis/Portal esri/request esri/IdentityManager esri-global-nav/esri-global-nav dojo/i18n!./nls/arcgisonline".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E,F,G,H,L,J,S,P){Object.defineProperty(A,"__esModule",{value:!0});g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);z=a.__importDefault(z);x=a.__importDefault(x);
y=a.__importDefault(y);u=a.__importDefault(u);t=a.__importDefault(t);C=a.__importDefault(C);E=a.__importDefault(E);F=a.__importDefault(F);G=a.__importDefault(G);H=a.__importDefault(H);L=a.__importDefault(L);J=a.__importDefault(J);P=a.__importDefault(P);D=function(){function Q(){this.GlobalNavLink={label:void 0,href:void 0,data:void 0,active:void 0,newContext:void 0,init:function(M,N){this.label=M;var K=N.href,X=N.data,da=N.active,Y=N.openInNewTab;this.href=K?"function"===typeof K?K():K:"#";this.data=
X||void 0;this.active=da||void 0;this.newContext=Y||void 0;return this}}}Q.prototype.init=function(M){var N=this;this.legacy=M.legacy;w["default"]({orgSettings:this.getOrgSettings(),userProperties:this.getUserProperties()}).then(function(K){N.orgSettings=K.orgSettings;N.userProperties=K.userProperties;N.setup(M)});y["default"].subscribe("account-menu/close",this.closeAccountMenu.bind(this));y["default"].subscribe("portal-helpBase/update",this.updateHelpUrl.bind(this));y["default"].subscribe("top-nav/update",
this.updateMenu.bind(this));y["default"].subscribe("mapviewer/user-update",this.updateUserMapViewerPreference.bind(this));y["default"].subscribe("mapviewer/org-update",this.updateOrgMapViewerPreference.bind(this))};Q.prototype.setup=function(M){var N=this,K,X,da=this.orgSettings;if(da&&da.anonymousAccessNotice&&da.anonymousAccessNotice.enabled&&!r["default"].getCookie("ago_conditions_accepted"))return window.location.href=g["default"].baseUrl+"pages/Account/accept_conditions.html#client_id\x3darcgisonline\x26redirect_url\x3d"+
window.location.href;(null===(K=null===da||void 0===da?void 0:da.informationalBanner)||void 0===K?0:K.enabled)&&this.createClassificationBanner(da.informationalBanner);this.relativePath=M.relativePath||"./";g["default"].self=M.config;this.customNavStructure=M.customNavStructure;this.isOrgUser=null===(X=g["default"].userInfo)||void 0===X?void 0:X.orgId;this.userIsSignedIn=!(!g["default"].userInfo||!g["default"].userInfo.username&&!g["default"].userInfo.email);this.defaultNavStructure={header:{theme:"web",
brand:{label:"ArcGIS Online",href:"../features/features.html",brandText:"ArcGIS"},menus:[[{label:"Features",href:"../features/features.html"},{label:"Plans",href:"../features/plans/pricing.html"},{label:"Map",href:this.relativePath+"webmap/viewer.html?useExisting\x3d1"},{label:"Scene",href:"webscene/viewer.html"},{label:"Help",href:"http://doc.arcgis.com/en/arcgis-online/"}]],search:{label:P["default"].common.search,hide:"search.html"===window.location.pathname.split("/")[2],inline:!0,dialog:{prefix:"esri-header-search-dialog",
action:g["default"].baseUrl+"search.html",label:"ArcGIS Online",submitLabel:P["default"].common.search,cancelLabel:P["default"].common.cancel,queryLabel:P["default"].siteHeader.searchAgo}},account:{label:P["default"].siteHeader.yourProfile,controls:{signin:P["default"].siteHeader.signIn,signout:P["default"].siteHeader.signOut,"switch":P["default"].siteHeader.switchAccounts},menus:[{label:"profile \x26 settings",href:this.relativePath+"user.html"},{label:"my esri",href:"#",data:{agoMethod:"goMyesri"}},
{label:"training",href:"#",data:{agoMethod:"goTraining"}},{label:"community \x26 forums",href:"#",data:{agoMethod:"goEsriCommunity"}},{label:"help",href:"http://doc.arcgis.com/en/arcgis-online/"}]}}};this.createPortalInstance().then(function(){var Y=t["default"].queryToObject(window.location.search.slice(1));(-1<window.location.pathname.indexOf("user.html")||-1<window.location.pathname.indexOf("userprofile.html"))&&(null===Y||void 0===Y?0:Y.hideNav)?(document.body.classList.add("is-embedded"),Y=document.querySelector(".esri-header-barrier"),
Y.parentNode.removeChild(Y)):(N.navLinks=N.buildNavLinks(N,g["default"]),N.createGlobalNav(g["default"].userInfo,M.customNavStructure));(Y=window.esri)&&!Y.i18nBundle&&(Y.i18nBundle=P["default"])})};Q.prototype.closeAccountMenu=function(){this.updateComponent("header:menu:close",document.getElementById("esri-header-account-menu"))};Q.prototype.updateUserMapViewerPreference=function(M){var N,K;this.userProperties.mapViewer=M;M=null===(K=null===(N=g["default"].self)||void 0===N?void 0:N.portalProperties)||
void 0===K?void 0:K.topNav;this.updateMenu(M||{})};Q.prototype.updateOrgMapViewerPreference=function(M){var N=g["default"].self;N&&(N.portalProperties=N.portalProperties||{},N.portalProperties.mapViewer=M,this.updateMenu(N.portalProperties.topNav||{}))};Q.prototype.getMapViewerLink=function(M){return M===l["default"].MapViewerType.Classic?this.relativePath+"webmap/viewer.html?useExisting\x3d1":g["default"].newMapViewerUrl};Q.prototype.updateHelpUrl=function(M){this.updateHeaderComponent({config:M})};
Q.prototype.updateMenu=function(M){var N=g["default"].self.portalProperties||{};N.topNav=M;g["default"].self.portalProperties=N;this.navLinks=this.buildNavLinks(this,g["default"]);M=this.getNavStructure(g["default"].userInfo,this.customNavStructure);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-desktop"),M.header.menus);this.updateComponent("header:update:menus",document.querySelector("#esri-header-menus-mobile"),M.header.menus)};Q.prototype.createClassificationBanner=
function(M){var N=document.createElement("div"),K=document.createElement("div");document.body.insertBefore(N,document.body.childNodes[0]);document.body.appendChild(K);new b.InfoBanner({bannerConfig:M,topContainer:N,bottomContainer:K});setTimeout(function(){var X=document.getElementById("esri-header-menus-content-mobile");X&&(X.style.height="calc(var(--esri-vh) - "+(56+N.clientHeight)+"px)")},1E3)};Q.prototype.createPortalInstance=function(){var M=this,N=new F["default"];(this.portal=g["default"]&&
g["default"].portal)?N.resolve(!0):m["default"].getSelf(function(K){M.portal=new H["default"].Portal({url:g["default"].restBaseUrl.replace("http://","https://"),self:E["default"].clone(K)});G["default"].once(M.portal,"load",function(X){M.portal.portalUser=M.portal.getPortalUser();f["default"].isOrgUser=M.isOrgUser;f["default"].portal=M.portal;f["default"].getLicenseInfo().then(function(da){g["default"].userInfo&&(g["default"].userInfo=a.__assign(a.__assign({},g["default"].userInfo),f["default"]));
M.portal.portalUser?J["default"].checkAppAccess(M.portal.portalUrl,"arcgisonline").always(function(Y){if(Y=!(!Y||!Y.viewOnly))M.portal.user.cookie=M.getUserCookie(),M.portal.user.credential=M.portal.portalUser.credential,M.portal.user.portal=M.portal,M.portal.user.viewOnly=Y,M.portal.portalUser=new e["default"](M.portal.user);N.resolve(!0)}):N.resolve(!0)})})});return N};Q.prototype.createGlobalNav=function(M,N){var K,X,da,Y=this.getNavStructure(M,N),aa=((null===(X=null===(K=g["default"].self)||void 0===
K?void 0:K.portalProperties)||void 0===X?void 0:X.topNav)||{}).search;K=this.isOrgUser&&g["default"].self&&g["default"].userInfo.orgId===g["default"].self.id;"members"!==aa||K||delete Y.header.search;S.createHeader({targetElm:".esri-header-barrier",menuData:Y});this.setupInlineSearch();this.userIsSignedIn?(this.setupAccountSwitcherLink(),this.setupSignOutLink(),this.setupNotifications(M),this.isOrgUser&&(g["default"].self.isPortal||"active"===(null===(da=g["default"].self.subscriptionInfo)||void 0===
da?void 0:da.state))&&(g["default"].self.isPortal||(this.defaultNavStructure.header.apps=this._getAppsLoadingJson(),this.updateAppLauncherComponent()),this.createAppLauncher())):this.setupSignInLink();this.addLegacyClasses()};Q.prototype.addLegacyClasses=function(){if(this.legacy){var M=window.location.pathname.toLowerCase();if(-1!==M.indexOf("index.html")||-1===M.indexOf(".html"))u["default"](".siteHeader").addClass("top-nav"),u["default"](".-desktop .esri-header-menus-link,.esri-header-brand-text,.esri-header-menus-toggle,.esri-header-notifications-control,.esri-header-inlineSearch-control,.esri-header-account-control,.esri-header-apps-control").addClass("top-nav-link"),
u["default"](".top-nav-link.-is-active").removeClass("-is-active").addClass("is-active")}};Q.prototype.getNavStructure=function(M,N){var K=(this.userCookie=this.userIsSignedIn&&this.getUserCookie())?this.getSignedInNavStructure(M,this.userCookie):this.getSignedOutNavStructure();return E["default"].mixin(g["default"].self.isPortal?this.modifyStructureForPortal(K):K,N||{})};Q.prototype.getSignedOutNavStructure=function(){var M=g["default"].self.isPortal,N=this.showProductLinks()?["overview","pricing",
"map","scene","help"]:["home_link","gallery","map","scene","groups"].concat(M?["help"]:[]);this.defaultNavStructure.header.menus=[this.filterAndCreateLinks(N,P["default"].siteHeader)];this.defaultNavStructure.header.brand.href=""+this.relativePath+(M?"index.html":"../features/features.html");return this.defaultNavStructure};Q.prototype.getSignedInNavStructure=function(M,N){var K={name:M.fullName,id:M.username,group:"",image:this.getUserProfileImage(M.username,M.thumbnail,N.token)},X=this.isPublicAccount()?
"ArcGIS overview pricing map scene groups myContent".split(" "):"home_link gallery map scene notebook groups myContent myAccount".split(" ");this.defaultNavStructure.header.account.user=K;this.defaultNavStructure.header.menus=[this.filterAndCreateLinks(X,P["default"].siteHeader)];this.defaultNavStructure.header.account.menus=this.filterAndCreateLinks("myProfile mySettings myEsri training trialDownload esriCommunity arcgisBlog help".split(" "),P["default"].siteHeader);this.defaultNavStructure.header.brand.href=
""+this.relativePath+(g["default"].self.isPortal?"index.html":"../features/features.html");this.userIsSignedIn&&(this.defaultNavStructure.header.notifications=this._getDefaultNotifications());return this.defaultNavStructure};Q.prototype.modifyStructureForPortal=function(M){M.header.search.dialog.queryLabel=P["default"].siteHeader.searchAgoEnterprise;return M};Q.prototype.getFooterLinks=function(){var M=this,N,K,X,da;this.i18n=a.__assign(a.__assign(a.__assign({},P["default"].siteFooter),P["default"].common),
{helpLabel:P["default"].supportPage.helpLabel});var Y=g["default"].footerLinks.reduce(function(aa,ca){var I=ca.title.indexOf("${");I=-1<I?M._evalString(ca.title,I):ca.title;return"ArcGIS Marketplace"===ca.title?g["default"].self&&M.userIsSignedIn?aa.concat({label:I,href:g["default"].marketplaceUrl.replace("http://","https://")}):aa:"contactUs"===ca.type?aa.concat({label:I,href:M._constructContactUsUrl(ca)}):"reportAbuse"===ca.type?aa.concat({label:I,href:M._constructReportAbuseUrl(ca)}):ca.url?aa.concat({label:I,
href:ca.url}):aa},[]);(null===(da=null===(X=null===(K=null===(N=g["default"].self)||void 0===N?void 0:N.portalProperties)||void 0===K?void 0:K.links)||void 0===X?void 0:X.contactUs)||void 0===da?0:da.visible)&&Y.push({label:this.i18n.customContactUs,href:g["default"].self.portalProperties.links.contactUs.url});return Y};Q.prototype.updateComponent=function(M,N,K){var X=document.createEvent("CustomEvent");X.initCustomEvent(M,!0,!0,K);N.dispatchEvent(X)};Q.prototype.updateAppLauncherComponent=function(M){this.updateComponent("header:update:apps",
document.querySelector(".esri-header-apps"),this._appsJson(M))};Q.prototype.updateHeaderComponent=function(M){g["default"].self=M.config;this.navLinks=this.buildNavLinks(this,g["default"]);M=this.getNavStructure(g["default"].userInfo,M.customNavStructure);this.updateComponent("header:update:account",document.querySelector(".esri-header-client").lastChild,M.header.account)};Q.prototype.updateNotificationsComponent=function(M){this.defaultNavStructure.header.notifications.messages=M;this.updateComponent("header:update:notifications",
document.querySelector(".esri-header-notifications"),this._getDefaultNotifications(M));0===M.length&&this.updateComponent("header:menu:close",document.querySelector(".esri-header-notifications"))};Q.prototype.updateSearchComponent=function(M,N){this.updateComponent("header:search:update:suggestions",document.querySelector(".esri-header-inlineSearch"),this._searchJson(M,N))};Q.prototype.createAppLauncher=function(){var M=this;this.portal.token=this.userCookie.token;this.appLauncher=new v["default"](this.portal,
this.userProperties);this.appLauncher.getApps({noStrings:!0}).then(function(N){if(N.primary.length||N.secondary.length)M.fixRelativeAppUrls(N.primary),M.fixRelativeAppUrls(N.secondary),M.updateAppLauncherComponent(N),document.querySelector(".esri-header-barrier").addEventListener("header:apps:reorder",function(K){M.appLauncher.setApps(JSON.stringify(K.detail.icons),!0)}),y["default"].subscribe("appLauncher/app/updated",M._restartAppLauncherApp.bind(M)),y["default"].subscribe("appLauncher/app/deleted",
M._restartAppLauncherApp.bind(M)),y["default"].subscribe("appLauncher/restart",M._restartAppLauncherApp.bind(M,!0)),y["default"].subscribe("appLauncher-license/refresh",M._refreshLicenseAndRestartAppLauncher.bind(M)),M.addLegacyClasses()})};Q.prototype.fixRelativeAppUrls=function(M){if(-1!==window.location.pathname.indexOf("/home/notebook/")){var N=window.location.protocol+"//"+window.location.host+B["default"].getHomeAppContext()+"/";(M||[]).forEach(function(K){K.url=(K.url||"").replace("../",N)})}};
Q.prototype._restartAppLauncherApp=function(M){var N=this;this.appLauncher&&this.appLauncher.refreshApps(M).then(function(K){return N.updateAppLauncherComponent(K)})};Q.prototype._refreshLicenseAndRestartAppLauncher=function(){var M=this;this.appLauncher&&(f["default"].licenses={arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},opsdashboard:{valid:!1,
className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},this.appLauncher.fetchAndSetupLicenseInfo().then(function(){return M.appLauncher.refreshApps(!0)}).then(function(N){return M.updateAppLauncherComponent(N)}))};Q.prototype._appsJson=function(M){return a.__assign(a.__assign({},{label:P["default"].appSwitcher.appLauncher,
disableDragDrop:!1,loading:!M,text:{title:P["default"].appSwitcher.appLauncher,confirm:P["default"].appSwitcher.gotIt,dragAppsHere:P["default"].appSwitcher.dragAppsHere,intro:P["default"].appSwitcher.dragAndDropIntroText,removed:P["default"].appSwitcher.noLongerAvailable,removedMessage:P["default"].appSwitcher.removedApp,showMore:P["default"].appSwitcher.showMore}}),M)};Q.prototype._getAppsLoadingJson=function(M){return{label:P["default"].appSwitcher.appLauncher,disableDragDrop:!1,loading:M}};Q.prototype._searchJson=
function(M,N){var K;return null!==(K=null===N||void 0===N?void 0:N.results)&&void 0!==K&&K.length?{minIconWidth:"44",suggestions:[this._generateSuggestionsSection({searchTerm:M,category:"item",data:N.results})]}:{suggestions:[]}};Q.prototype._disabledSearchJson=function(){return{minIconWidth:"44",disabled:!0,suggestions:[{hideHR:!0,links:[{text:P["default"].search.error.wildCardSearchError,secondary:null,href:null,htmlIcon:'\x3cspan class\x3d"esri-header-inlineSearch-suggestion-error-icon"\x3e'+k["default"]["exclamation-mark-circle"]["16"]+
"\x3c/span\x3e"}]}]}};Q.prototype._generateSuggestionsSection=function(M){return{hideHR:!0,links:M.data.map(this._generateSuggestionLink.bind(this,M.category))}};Q.prototype._generateSuggestionLink=function(M,N,K){K={text:N.title,secondary:this._getSecondaryOwnerText(M,N),href:""+this.relativePath+M+".html?id\x3d"+N.id,iconSize:"group"===M?"28":"22"};M=N.icon||"group"!==M?{icon:N.icon}:{htmlIcon:this._getGroupIcon(N)};return a.__assign(a.__assign({},K),M)};Q.prototype._getGroupIcon=function(M){return(new n["default"]({portal:this.portal,
group:M,size:"28",letterSize:"1",tooltipClass:"",cssClasses:"org-member-card__group-title esri-header-inlineSearch-suggestion-icon"})).domNode.outerHTML};Q.prototype._getSecondaryOwnerText=function(M,N){var K=N.owner;return"item"===M?x["default"].substitute(P["default"].siteHeader.itemTypeBy,{itemType:N.type,owner:K}):x["default"].substitute(P["default"].siteHeader.groupOwner,{owner:K})};Q.prototype._generateSearchLink=function(M){return this._constructSecureBaseUrl("search.html?start\x3d1\x26sortOrder\x3dtrue\x26sortField\x3drelevance\x26"+
M)};Q.prototype._constructSearchQ=function(M,N){var K;return""+M+(N&&(null===(K=g["default"].userInfo)||void 0===K?0:K.orgId)?" orgid:"+g["default"].userInfo.orgId:"")};Q.prototype._getSuggestFilters=function(){return(g["default"].self.id?'accountid:"'+g["default"].self.id+'"':"")+(g["default"].viewQueries.none||"")};Q.prototype.fetchSuggestionResults=function(M){M=M.substring(0,409).replace(/(\/)/g,"\\/").replace(/(\?)/g,"\\?");return L["default"]({url:g["default"].restBaseUrl.replace("http://",
"https://")+"search/suggest",content:{suggest:M,filters:this._getSuggestFilters(),searchFields:"title",f:"json"},handleAs:"json",callbackParamName:"callback"})};Q.prototype.fetchItemSearchResults=function(M){return L["default"]({url:g["default"].restBaseUrl.replace("http://","https://")+"search",content:{q:this._constructSearchQ(M,!0),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};Q.prototype.fetchGroupSearchResults=function(M){return L["default"]({url:g["default"].restBaseUrl.replace("http://",
"https://")+"/community/groups",content:{q:this._constructSearchQ(M,!1),start:1,num:3,f:"json"},handleAs:"json",callbackParamName:"callback"})};Q.prototype.mixinItemIcon=function(M){this.portal.portalUser&&!this.portal.portalUser.userRole&&(this.portal.portalUser.userRole=g["default"].userRole);var N=new d["default"](a.__assign(a.__assign({},M),{portal:this.portal}));return a.__assign(a.__assign({},M),{type:N.displayName,icon:""+g["default"].baseUrl+N.svgIconUrl32})};Q.prototype.mixinGroupIcon=function(M){return a.__assign(a.__assign({},
M),{icon:M.thumbnail?this._constructRestUrlWithToken("community/groups/"+M.id+"/info/"+M.thumbnail):null})};Q.prototype._constructRestUrlWithToken=function(M){return""+this.portal.portalUrl+M+(this.userCookie?"?token\x3d"+this.userCookie.token:"")};Q.prototype._constructSecureBaseUrl=function(M){return""+g["default"].baseUrl.replace("http://","https://")+M};Q.prototype.buildNavLinks=function(M,N){var K,X,da,Y,aa=!!g["default"].self,ca=window.location.pathname.toLowerCase(),I=aa&&(null===(K=g["default"].self.portalProperties)||
void 0===K?void 0:K.topNav)||{};K=I.gallery;var T=I.map,ba=I.scene;I=I.groups;aa=this.isOrgUser&&aa&&g["default"].userInfo.orgId===g["default"].self.id;var pa=g["default"].notebookLandingEnabled?"notebookhome.html":"notebook.html",ya=l["default"].determineMapViewerSetting(this.userProperties);return{myProfile:{href:this.relativePath+"user.html"},mySettings:{href:this.relativePath+"user.html#settings"},pricing:{href:this.relativePath+"../features/plans/pricing.html"},overview:{href:this.relativePath+
"../features/features.html"},ArcGIS:{href:""+this.relativePath+(M.isPublicAccount()?"index.html":"../features/features.html")},groups:{show:!I||"all"===I||"members"===I&&aa,href:this.relativePath+"groups.html",active:-1<ca.indexOf("groups.html")},myContent:{href:this.relativePath+"content.html",active:-1<ca.indexOf("content.html")},map:{show:f["default"].isLicensed("arcgisWebApps")&&(!T||"all"===T||"members"===T&&aa||"mapCreators"===T&&aa&&(null===(X=g["default"].userRole)||void 0===X?void 0:X.canCreateItem())),
href:this.getMapViewerLink(ya)},help:{href:M._getHelpUrl.bind(M),openInNewTab:!0},gallery:{show:"noOne"!==K&&(!K||"all"===K||"members"===K&&aa)&&g["default"].self.id,href:this.relativePath+"gallery.html",active:-1<ca.indexOf("gallery.html")},home_link:{show:!M.isPublicAccount(),href:this.relativePath+"index.html",active:-1<ca.indexOf("index.html")||0>ca.indexOf(".html")},scene:{show:N.sceneViewerEnabled&&f["default"].isLicensed("arcgisWebApps")&&(!ba||"all"===ba||"members"===ba&&aa||"sceneCreators"===
ba&&aa&&(null===(da=g["default"].userRole)||void 0===da?void 0:da.canCreateItem())),href:this.relativePath+"webscene/viewer.html"},notebook:{show:c["default"].notebookServerConfigured()&&(null===(Y=g["default"].userRole)||void 0===Y?void 0:Y.canCreateNotebooks()),href:this.relativePath+"notebook/"+pa,openInNewTab:!g["default"].notebookLandingEnabled},myAccount:{show:M.canViewOrgUsers()&&M.orgPageRestrictionsDoNotApply(),href:this.relativePath+"organization.html",active:-1<ca.indexOf("organization.html")},
marketplace:{show:!M.isPublicAccount(),href:M._getMarketplaceUrl.bind(M)},features:{show:M.isPublicAccount()&&!g["default"].self.isPortal,href:this.relativePath+"../features/features.html"},esriCommunity:{show:M.showEsriLinks(),href:M._getEsriCommunityUrl.bind(M),openInNewTab:!0},myEsri:{show:M.showEsriLinks(),href:M._getMyEsriUrl.bind(M),openInNewTab:!0},arcgisBlog:{show:M.showEsriLinks(),href:"https://www.esri.com/arcgis-blog/arcgis-online/",openInNewTab:!0},training:{show:M.showEsriLinks(),href:M._getEsriTrainingUrl.bind(M),
openInNewTab:!0},trialDownload:{show:M.subscriptionIsTrial(),href:M._getTrialDownloadUrl.bind(M),openInNewTab:!0}}};Q.prototype.filterAndCreateLinks=function(M,N){var K=this,X=[];M.forEach(function(da){var Y=K.navLinks[da];!Y||"show"in Y&&!Y.show||X.push(K.createGlobalNavLink(N[da]||da,Y))},this);return X};Q.prototype.createGlobalNavLink=function(M,N){return Object.create(this.GlobalNavLink).init(M,N)};Q.prototype.getUserProfileImage=function(M,N,K){return N?g["default"].restBaseUrl.replace("http://",
"https://")+"community/users/"+M+"/info/"+N+"?token\x3d"+K:this.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")};Q.prototype.getUserCookie=function(){return g["default"].userInfo||null};Q.prototype.getOrgSettings=function(){return B["default"].request({url:g["default"].restBaseUrl+"portals/self/settings",content:{f:"json"}})};Q.prototype.getUserProperties=function(){var M,N=new F["default"];(null===(M=g["default"].userInfo)||void 0===M?0:M.username)?B["default"].request({url:g["default"].restBaseUrl+
"community/users/"+g["default"].userInfo.username+"/properties",content:{f:"json"}}).then(function(K){N.resolve(K.properties)},function(){N.resolve(null)}):N.resolve(null);return N};Q.prototype.setupSignInLink=function(){var M;if(this.hideSignInLink())return null===(M=document.querySelector(".esri-header-account-control--signin"))||void 0===M?void 0:M.classList.add("hide");u["default"](".esri-header-account-control--signin").on("click",function(N){N=g["default"].baseUrl+"signin.html?";-1<window.location.href.indexOf("item.html")?
window.location.href=N+"useLandingPage\x3dfalse\x26returnUrl\x3d"+window.location.href:window.location.href=N+"useLandingPage\x3dtrue"})};Q.prototype.setupSignOutAndAccountSwitcherLinks=function(){var M=this,N;g["default"].showAccountSwitcher&&(null===(N=document.querySelector(".esri-header-account-signin-control.-switch"))||void 0===N?void 0:N.classList.add("hide"));G["default"](document.querySelector(".esri-header-account-control-logout"),"click",function(K){M._selectLogOut(K)});G["default"](document.querySelector(".esri-header-account-control.-switch"),
"click",function(){M._openSwitchAccounts()})};Q.prototype.setupSignOutLink=function(){var M=this,N,K=r["default"].getCookie("arcgis_auth");K&&JSON.parse(K);if(null===(N=this.portal)||void 0===N?0:N.isWebTierAuth)return document.querySelector(".esri-header-account-signin-control.-logout").classList.add("hide");G["default"](document.querySelector(".esri-header-account-signin-control.-logout"),"click",function(X){M._selectLogOut(X)})};Q.prototype.setupAccountSwitcherLink=function(){var M=this,N;if("showAccountSwitcher"in
g["default"]&&!g["default"].showAccountSwitcher)return null===(N=document.querySelector(".esri-header-account-signin-control.-switch"))||void 0===N?void 0:N.classList.add("hide");G["default"](document.querySelector(".esri-header-account-signin-control.-switch"),"click",function(K){M._openSwitchAccounts()})};Q.prototype.setupInlineSearch=function(){var M=this;document.querySelector(".esri-header-barrier").addEventListener("header::search:typing",z["default"](function(N){-1<N.detail.indexOf("*")?M.updateComponent("header:search:update:suggestions",
document.querySelector(".esri-header-inlineSearch"),M._disabledSearchJson()):2<=N.detail.length&&M.fetchSuggestionResults(N.detail).then(function(K){K.results=K.results.map(M.mixinItemIcon.bind(M));M.updateSearchComponent(N.detail,K)})},280))};Q.prototype.setupNotifications=function(M){var N=this;h["default"].fetchNotifications(M,this.portal).then(this.updateNotificationsComponent.bind(this));document.addEventListener("header:click:notifications:dismiss",function(K){h["default"].deleteNotifications(M,
K.detail).then(function(X){var da=X.filter(function(Y){return Y.success}).map(function(Y){return Y.notificationId});X=(N.defaultNavStructure.header.notifications.messages||[]).filter(function(Y){return 0>da.indexOf(Y.id)});N.updateNotificationsComponent(X)})})};Q.prototype._getDefaultNotifications=function(M){var N=P["default"].notifications;return{label:N.label,dismissAllLabel:N.dismissAllLabel,dismissLabel:N.dismissLabel,emptyMessage:{image:{path:["M15.5 1A14.5 14.5 0 1 0 30 15.5 14.5 14.5 0 0 0 15.5 1zm0 28.1a13.6 13.6 0 1 1 13.6-13.6 13.615 13.615 0 0 1-13.6 13.6zM8.581 17.276l.637-.636 3.288 3.098 10.073-9.92.637.637-10.71 10.556z"],
viewBox:"0 0 32 32"},text:N.noNotifications},messages:M||[]}};Q.prototype._evalString=function(M,N){var K=M.indexOf("}",N),X=M.substring(N+2,K);return""+M.substring(0,N)+this[X]+M.substring(K+1,M.length)};Q.prototype._constructContactUsUrl=function(M){var N=g["default"].portalName||"ArcGIS.com",K=encodeURIComponent(window.location.href);return"mailto:"+M.email+"?subject\x3dA comment about "+N+"\x26body\x3dI have the following comment about the "+N+" Web site. %0AReferring page: "+K+" %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"};
Q.prototype._constructReportAbuseUrl=function(M){var N=encodeURIComponent(window.location.href);return"mailto:"+M.email+"?subject\x3dConcerns about an item\x26body\x3dI have concerns about the following. %0AReferring page: "+N+" %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)"};Q.prototype._selectLogOut=function(M){M.preventDefault();
g["default"].self.isPortal?this._standardLogOut():this._agolLogOut()};Q.prototype._agolLogOut=function(){r["default"].setCookie("esri_webmap","",{expires:-1,path:"/"});var M=(g["default"].isDebug?g["default"].baseUrl:g["default"].baseUrl.replace("http://","https://"))+"pages/Account/manage_accounts.html#client_id\x3darcgisonline\x26signout\x3dtrue";window.location.href=M};Q.prototype._standardLogOut=function(){r["default"].setCookie("esri_webmap","",{expires:-1,path:"/"});var M=B["default"].getHttpUrl()+
"index.html";"private"===g["default"].self.access&&(M=""+B["default"].getSecureUrl()+g["default"].signin);"public"===g["default"].self.access&&(M=(g["default"].self.allSSL||this.usePortalSSL()?B["default"].getSecureUrl():B["default"].getHttpUrl())+"index.html");q["default"].signout(M)};Q.prototype._openSwitchAccounts=function(){window.open(g["default"].baseUrl+"pages/Account/manage_accounts.html#client_id\x3darcgisonline","_blank").focus()};Q.prototype.relativeToExplicitUrl=function(M){g["default"].cdnServerUrl=
C["default"].baseUrl.substring(0,C["default"].baseUrl.indexOf("/js/"));return g["default"].cdnServerUrl.lastIndexOf("/")===g["default"].cdnServerUrl.length-1?""+g["default"].cdnServerUrl+M:g["default"].cdnServerUrl+"/"+M};Q.prototype._getHelpUrl=function(){var M;return g["default"].self.isPortal?this._getPortalHelpUrl():(null===(M=g["default"].self)||void 0===M?void 0:M.helpBase)||"support.html"};Q.prototype._getPortalHelpUrl=function(){if(-1<g["default"].self.helpBase.indexOf("enterprise.arcgis.com"))return g["default"].self.helpBase+
"portal/";var M=g["default"].self.helpBase;"ArcGISEnterpriseOnKubernetes"!==(g["default"].self||{}).portalDeploymentType&&(M+="portal/");return g["default"].self.allSSL||"https:"===window.location.protocol||this.usePortalSSL()||"7443"===window.location.port?""+B["default"].getSecureUrl(window.location.protocol+"//"+window.location.host)+M:M};Q.prototype._getEsriTrainingUrl=function(){return this.generateEsriLoginHandlerUrl(window.location.protocol+"//www.esri.com/training/arcgis-online-training")};
Q.prototype._getMyEsriUrl=function(){return this.generateEsriLoginHandlerUrl(g["default"].myEsriLink)};Q.prototype._getEsriCommunityUrl=function(){return this.generateEsriLoginHandlerUrl(g["default"].esriCommunityLink)};Q.prototype._getMarketplaceUrl=function(){var M=this.getDevEnviroment();return window.location.protocol+"//marketplace"+(M?M+"ext":"")+".arcgis.com"};Q.prototype._getTrialDownloadUrl=function(){var M,N,K={"pt-br":1,"pt-pt":1,"zh-cn":1,"zh-hk":1,"zh-tw":1},X=((null===(M=g["default"].userInfo)||
void 0===M?void 0:M.culture)||(null===(N=g["default"].self)||void 0===N?void 0:N.culture)||C["default"].locale||"en").toLowerCase();M={nl:1}[X]?"en":X in K?X:X.split("-")[0].toLowerCase();return g["default"].learnArcGIS+"/"+M+"/trial"};Q.prototype.generateEsriLoginHandlerUrl=function(M){var N=this.getDevEnviroment();N="https://accounts"+(N?"dev"===N?"-dev":"-stg":"")+".esri.com/";var K="\x26authBaseUrl\x3d"+B["default"].getSecureUrl(g["default"].restBaseUrl.replace("/sharing/rest/",""));return N+
"LoginHandler/switchuser?username\x3d"+(g["default"].userInfo.username+"\x26redirect_uri\x3d"+M+K)};Q.prototype.getDevEnviroment=function(){var M=g["default"].self.portalHostname;return-1!==M.indexOf("dev")?"dev":-1!==M.indexOf("qa")?"qa":null};Q.prototype._getOriginOfUrl=function(M){var N=window.location;M=M?M+":":N.protocol;return M+"//"+N.hostname+(N.port?":"+N.port:"")+"/"};Q.prototype.hideSignInLink=function(){return g["default"].self.isPortal&&"singletenant"===g["default"].self.portalMode&&
g["default"].self.isWebTierAuth&&"7443"!==window.location.port};Q.prototype.showProductLinks=function(){var M=g["default"].self,N=M.access,K=M.isPortal;return!M.id&&!N&&!K};Q.prototype.isPublicAccount=function(){var M=g["default"].self,N=M.isPortal;return!M.urlKey&&!N&&!!g["default"].userInfo};Q.prototype.canViewOrgUsers=function(){var M;return null===(M=g["default"].userRole)||void 0===M?void 0:M.canViewOrgUsers()};Q.prototype.orgPageRestrictionsDoNotApply=function(){var M=g["default"].userInfo,
N=!M.accountId;M=M.role&&("org_admin"===M.role||"account_admin"===M.role)&&!M.roleId;return!g["default"].restrictOrganizationPageToAdmin||N||M};Q.prototype.showEsriLinks=function(){var M;return!g["default"].self.isPortal&&"both"===(null===(M=g["default"].userInfo)||void 0===M?void 0:M.userType)};Q.prototype.subscriptionIsTrial=function(){return!g["default"].self.isPortal&&g["default"].self.subscriptionInfo&&("Trial"===g["default"].self.subscriptionInfo.type||"Trial Press"===g["default"].self.subscriptionInfo.type)};
Q.prototype.usePortalSSL=function(){var M;return(!1===g["default"].isMultiTenant||B["default"].isPortal())&&(null===(M=g["default"].self)||void 0===M?void 0:M.portalHostname)&&!g["default"].self.portalHostname.match(/:7080\//)&&80!==g["default"].self.httpPort&&443!==g["default"].self.httpsPort&&"https:"===window.location.protocol};return Q}();A["default"]=D})},"arcgis-components/wrappers/InfoBanner":function(){define(["../Component","../InfoBanner/index"],function(D,A){return function(a){function b(d){if(g[d])return g[d].exports;
var e=g[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var g={};return b.m=a,b.c=g,b.d=function(d,e,f){b.o(d,e)||Object.defineProperty(d,e,{enumerable:!0,get:f})},b.r=function(d){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"});Object.defineProperty(d,"__esModule",{value:!0})},b.t=function(d,e){if((1&e&&(d=b(d)),8&e)||4&e&&"object"==typeof d&&d&&d.__esModule)return d;var f=Object.create(null);if(b.r(f),
Object.defineProperty(f,"default",{enumerable:!0,value:d}),2&e&&"string"!=typeof d)for(var n in d)b.d(f,n,function(h){return d[h]}.bind(null,n));return f},b.n=function(d){var e=d&&d.__esModule?function(){return d["default"]}:function(){return d};return b.d(e,"a",e),e},b.o=function(d,e){return Object.prototype.hasOwnProperty.call(d,e)},b.p="",b(b.s=940)}({0:function(a,b,g){function d(r,m){function q(){this.constructor=r}c(r,m);r.prototype=null===m?Object.create(m):(q.prototype=m.prototype,new q)}function e(r,
m){var q={},v;for(v in r)Object.prototype.hasOwnProperty.call(r,v)&&0>m.indexOf(v)&&(q[v]=r[v]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var B=0;for(v=Object.getOwnPropertySymbols(r);B<v.length;B++)0>m.indexOf(v[B])&&Object.prototype.propertyIsEnumerable.call(r,v[B])&&(q[v[B]]=r[v[B]])}return q}function f(r,m,q,v){var B,w=arguments.length,z=3>w?m:null===v?v=Object.getOwnPropertyDescriptor(m,q):v;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)z=Reflect.decorate(r,
m,q,v);else for(var x=r.length-1;0<=x;x--)(B=r[x])&&(z=(3>w?B(z):3<w?B(m,q,z):B(m,q))||z);return 3<w&&z&&Object.defineProperty(m,q,z),z}function n(r,m,q,v){return new (q||(q=Promise))(function(B,w){function z(u){try{y(v.next(u))}catch(t){w(t)}}function x(u){try{y(v["throw"](u))}catch(t){w(t)}}function y(u){var t;u.done?B(u.value):(t=u.value,t instanceof q?t:new q(function(C){C(t)})).then(z,x)}y((v=v.apply(r,m||[])).next())})}function h(r,m){function q(y){return function(u){return function(t){if(v)throw new TypeError("Generator is already executing.");
for(;x;)try{if(v=1,B&&(w=2&t[0]?B["return"]:t[0]?B["throw"]||((w=B["return"])&&w.call(B),0):B.next)&&!(w=w.call(B,t[1])).done)return w;switch(B=0,w&&(t=[2&t[0],w.value]),t[0]){case 0:case 1:w=t;break;case 4:return x.label++,{value:t[1],done:!1};case 5:x.label++;B=t[1];t=[0];continue;case 7:t=x.ops.pop();x.trys.pop();continue;default:if(!(w=x.trys,(w=0<w.length&&w[w.length-1])||6!==t[0]&&2!==t[0])){x=0;continue}if(3===t[0]&&(!w||t[1]>w[0]&&t[1]<w[3]))x.label=t[1];else if(6===t[0]&&x.label<w[1])x.label=
w[1],w=t;else if(w&&x.label<w[2])x.label=w[2],x.ops.push(t);else{w[2]&&x.ops.pop();x.trys.pop();continue}}t=m.call(r,x)}catch(C){t=[6,C],B=0}finally{v=w=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([y,u])}}var v,B,w,z,x={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return z={next:q(0),"throw":q(1),"return":q(2)},"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z}function k(){for(var r=0,m=0,q=arguments.length;m<q;m++)r+=arguments[m].length;
r=Array(r);var v=0;for(m=0;m<q;m++)for(var B=arguments[m],w=0,z=B.length;w<z;w++,v++)r[v]=B[w];return r}g.d(b,"d",function(){return d});g.d(b,"a",function(){return l});g.d(b,"f",function(){return e});g.d(b,"c",function(){return f});g.d(b,"b",function(){return n});g.d(b,"e",function(){return h});g.d(b,"g",function(){return k});var c=function(r,m){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,v){q.__proto__=v}||function(q,v){for(var B in v)v.hasOwnProperty(B)&&(q[B]=v[B])})(r,
m)},l=function(){return(l=Object.assign||function(r){for(var m,q=1,v=arguments.length;q<v;q++)for(var B in m=arguments[q])Object.prototype.hasOwnProperty.call(m,B)&&(r[B]=m[B]);return r}).apply(this,arguments)}},15:function(a,b){a.exports=D},161:function(a,b){var g=function(){return this}();try{g=g||(new Function("return this"))()}catch(d){"object"==typeof window&&(g=window)}a.exports=g},183:function(a,b){function g(){throw Error("setTimeout has not been defined");}function d(){throw Error("clearTimeout has not been defined");
}function e(w){if(l===setTimeout)return setTimeout(w,0);if((l===g||!l)&&setTimeout)return l=setTimeout,setTimeout(w,0);try{return l(w,0)}catch(z){try{return l.call(null,w,0)}catch(x){return l.call(this,w,0)}}}function f(){v&&m&&(v=!1,m.length?q=m.concat(q):B=-1,q.length&&n())}function n(){if(!v){var w=e(f);v=!0;for(var z=q.length;z;){m=q;for(q=[];++B<z;)m&&m[B].run();B=-1;z=q.length}m=null;v=!1;(function(x){if(r===clearTimeout)return clearTimeout(x);if((r===d||!r)&&clearTimeout)return r=clearTimeout,
clearTimeout(x);try{r(x)}catch(y){try{return r.call(null,x)}catch(u){return r.call(this,x)}}})(w)}}function h(w,z){this.fun=w;this.array=z}function k(){}var c=a.exports={};try{var l="function"==typeof setTimeout?setTimeout:g}catch(w){l=g}try{var r="function"==typeof clearTimeout?clearTimeout:d}catch(w){r=d}!0;var m,q=[],v=!1,B=-1;c.nextTick=function(w){var z=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)z[x-1]=arguments[x];q.push(new h(w,z));1!==q.length||v||e(n)};
h.prototype.run=function(){this.fun.apply(null,this.array)};c.title="browser";c.browser=!0;c.env={};c.argv=[];c.version="";c.versions={};c.on=k;c.addListener=k;c.once=k;c.off=k;c.removeListener=k;c.removeAllListeners=k;c.emit=k;c.prependListener=k;c.prependOnceListener=k;c.listeners=function(w){return[]};c.binding=function(w){throw Error("process.binding is not supported");};c.cwd=function(){return"/"};c.chdir=function(w){throw Error("process.chdir is not supported");};c.umask=function(){return 0}},
28:function(a,b,g){(function(d,e){a.exports=function(){function f(){var aa=setTimeout;return function(){return aa(n,1)}}function n(){for(var aa=0;aa<u;aa+=2)(0,J[aa])(J[aa+1]),J[aa]=void 0,J[aa+1]=void 0;u=0}function h(aa,ca){var I=this,T=new this.constructor(c);void 0===T[K]&&x(T);var ba=I._state;if(ba){var pa=arguments[ba-1];E(function(){return z(ba,T,pa,I._result)})}else B(I,T,aa,ca);return T}function k(aa){if(aa&&"object"==typeof aa&&aa.constructor===this)return aa;var ca=new this(c);return r(ca,
aa),ca}function c(){}function l(aa,ca,I){ca.constructor===aa.constructor&&I===h&&ca.constructor.resolve===k?function(T,ba){1===ba._state?q(T,ba._result):2===ba._state?v(T,ba._result):B(ba,void 0,function(pa){return r(T,pa)},function(pa){return v(T,pa)})}(aa,ca):void 0===I?q(aa,ca):"function"==typeof I?function(T,ba,pa){E(function(ya){var Da=!1,Ha=function(ta,xa,ra,Aa){try{ta.call(xa,ra,Aa)}catch(ua){return ua}}(pa,ba,function(ta){Da||(Da=!0,ba!==ta?r(ya,ta):q(ya,ta))},function(ta){Da||(Da=!0,v(ya,
ta))},ya._label);!Da&&Ha&&(Da=!0,v(ya,Ha))},T)}(aa,ca,I):q(aa,ca)}function r(aa,ca){if(aa===ca)v(aa,new TypeError("You cannot resolve a promise with itself"));else if(T=typeof(I=ca),null===I||"object"!==T&&"function"!==T)q(aa,ca);else{I=void 0;try{I=ca.then}catch(ba){return void v(aa,ba)}l(aa,ca,I)}var I,T}function m(aa){aa._onerror&&aa._onerror(aa._result);w(aa)}function q(aa,ca){void 0===aa._state&&(aa._result=ca,aa._state=1,0!==aa._subscribers.length&&E(w,aa))}function v(aa,ca){void 0===aa._state&&
(aa._state=2,aa._result=ca,E(m,aa))}function B(aa,ca,I,T){var ba=aa._subscribers,pa=ba.length;aa._onerror=null;ba[pa]=ca;ba[pa+1]=I;ba[pa+2]=T;0===pa&&aa._state&&E(w,aa)}function w(aa){var ca=aa._subscribers,I=aa._state;if(0!==ca.length){for(var T=void 0,ba=void 0,pa=aa._result,ya=0;ya<ca.length;ya+=3)T=ca[ya],ba=ca[ya+I],T?z(I,T,ba,pa):ba(pa);aa._subscribers.length=0}}function z(aa,ca,I,T){var ba="function"==typeof I,pa=void 0,ya=void 0,Da=!0;if(ba){try{pa=I(T)}catch(Ha){Da=!1,ya=Ha}if(ca===pa)return void v(ca,
new TypeError("A promises callback cannot return that same promise."))}else pa=T;void 0!==ca._state||(ba&&Da?r(ca,pa):!1===Da?v(ca,ya):1===aa?q(ca,pa):2===aa&&v(ca,pa))}function x(aa){aa[K]=X++;aa._state=void 0;aa._result=void 0;aa._subscribers=[]}var y=Array.isArray?Array.isArray:function(aa){return"[object Array]"===Object.prototype.toString.call(aa)},u=0,t=void 0,C=void 0,E=function(aa,ca){J[u]=aa;J[u+1]=ca;2===(u+=2)&&(C?C(n):N())},F="undefined"!=typeof window?window:void 0,G=F||{};G=G.MutationObserver||
G.WebKitMutationObserver;var H="undefined"==typeof self&&void 0!==d&&"[object process]"==={}.toString.call(d),L="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=Array(1E3),S,P,Q,M,N=void 0;H?N=function(){return d.nextTick(n)}:G?(P=0,Q=new G(n),M=document.createTextNode(""),Q.observe(M,{characterData:!0}),N=function(){M.data=P=++P%2}):L?((S=new MessageChannel).port1.onmessage=n,N=function(){return S.port2.postMessage(0)}):N=void 0===F?function(){try{var aa=
Function("return this")().require("vertx");return void 0!==(t=aa.runOnLoop||aa.runOnContext)?function(){t(n)}:f()}catch(ca){return f()}}():f();var K=Math.random().toString(36).substring(2),X=0,da=function(){function aa(ca,I){this._instanceConstructor=ca;this.promise=new ca(c);this.promise[K]||x(this.promise);y(I)?(this.length=I.length,this._remaining=I.length,this._result=Array(this.length),0===this.length?q(this.promise,this._result):(this.length=this.length||0,this._enumerate(I),0===this._remaining&&
q(this.promise,this._result))):v(this.promise,Error("Array Methods must be provided an Array"))}return aa.prototype._enumerate=function(ca){for(var I=0;void 0===this._state&&I<ca.length;I++)this._eachEntry(ca[I],I)},aa.prototype._eachEntry=function(ca,I){var T=this._instanceConstructor,ba=T.resolve;if(ba===k){var pa=ba=void 0,ya=!1;try{ba=ca.then}catch(Da){ya=!0,pa=Da}ba===h&&void 0!==ca._state?this._settledAt(ca._state,I,ca._result):"function"!=typeof ba?(this._remaining--,this._result[I]=ca):T===
Y?(T=new T(c),ya?v(T,pa):l(T,ca,ba),this._willSettleAt(T,I)):this._willSettleAt(new T(function(Da){return Da(ca)}),I)}else this._willSettleAt(ba(ca),I)},aa.prototype._settledAt=function(ca,I,T){var ba=this.promise;void 0===ba._state&&(this._remaining--,2===ca?v(ba,T):this._result[I]=T);0===this._remaining&&q(ba,this._result)},aa.prototype._willSettleAt=function(ca,I){var T=this;B(ca,void 0,function(ba){return T._settledAt(1,I,ba)},function(ba){return T._settledAt(2,I,ba)})},aa}(),Y=function(){function aa(ca){this[K]=
X++;this._result=this._state=void 0;this._subscribers=[];if(c!==ca){if("function"!=typeof ca)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof aa)(function(I,T){try{T(function(ba){r(I,ba)},function(ba){v(I,ba)})}catch(ba){v(I,ba)}})(this,ca);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}}return aa.prototype["catch"]=function(ca){return this.then(null,
ca)},aa.prototype["finally"]=function(ca){var I=this.constructor;return"function"==typeof ca?this.then(function(T){return I.resolve(ca()).then(function(){return T})},function(T){return I.resolve(ca()).then(function(){throw T;})}):this.then(ca,ca)},aa}();return Y.prototype.then=h,Y.all=function(aa){return(new da(this,aa)).promise},Y.race=function(aa){var ca=this;return y(aa)?new ca(function(I,T){for(var ba=aa.length,pa=0;pa<ba;pa++)ca.resolve(aa[pa]).then(I,T)}):new ca(function(I,T){return T(new TypeError("You must pass an array to race."))})},
Y.resolve=k,Y.reject=function(aa){var ca=new this(c);return v(ca,aa),ca},Y._setScheduler=function(aa){C=aa},Y._setAsap=function(aa){E=aa},Y._asap=E,Y.polyfill=function(){var aa=void 0;if(void 0!==e)aa=e;else if("undefined"!=typeof self)aa=self;else try{aa=Function("return this")()}catch(T){throw Error("polyfill failed because global object is unavailable in this environment");}var ca=aa.Promise;if(ca){var I=null;try{I=Object.prototype.toString.call(ca.resolve())}catch(T){}if("[object Promise]"===
I&&!ca.cast)return}aa.Promise=Y},Y.Promise=Y,Y}()}).call(this,g(183),g(161))},32:function(a,b,g){function d(L){return L.reduce(function(J,S){return S&&S.relatedItems?J.concat(S.relatedItems.map(function(P){return P})):J},[])}function e(L,J,S){return L(J,{query:Object(h.a)({f:"json"},S)}).then(function(P){return P.data})}function f(L,J){void 0===J&&(J=100);for(var S=[],P=0;P<Math.ceil(L.length/J);P++)S.push(L.slice(P*J,(P+1)*J));return S.filter(function(Q){return 0<Q.length})}function n(L){var J=L.itemIds,
S=L.request,P=L.groupIds,Q=L.portal.restUrl+"/content/itemsgroups";return new k.Promise(function(M,N){S(Q,{method:"get",query:{f:"json",items:J,groups:P}}).then(function(K){M(K.data)},N)})}g.d(b,"t",function(){return c});g.d(b,"n",function(){return l});g.d(b,"h",function(){return r});g.d(b,"e",function(){return m});g.d(b,"f",function(){return q});g.d(b,"j",function(){return v});g.d(b,"l",function(){return B});g.d(b,"k",function(){return w});g.d(b,"m",function(){return z});g.d(b,"c",function(){return x});
g.d(b,"d",function(){return y});g.d(b,"q",function(){return u});g.d(b,"r",function(){return t});g.d(b,"s",function(){return C});g.d(b,"g",function(){return E});g.d(b,"o",function(){return F});g.d(b,"p",function(){return G});g.d(b,"u",function(){return e});g.d(b,"a",function(){return f});g.d(b,"i",function(){return n});g.d(b,"b",function(){return H});var h=g(0),k=g(28),c=function(L){return function(J,S){return L({url:J,content:S.query},{usePost:"post"===S.method}).then(function(P){return{data:P}})}},
l=function(L,J,S){return e(L,J.restUrl+"/portals/self",{culture:S,"default":!0})},r=function(L,J,S){return e(L,J.restUrl+"/content/items/"+S+"/data")},m=function(L,J,S,P){return e(L,J.restUrl+"/community/groups",Object(h.a)({q:S},P))},q=function(L,J,S){return e(L,J.restUrl+"/community/groups/"+S+"/categorySchema")},v=function(L,J,S){return e(L,J.restUrl+"/portals/"+(S||J.id)+"/categorySchema")},B=function(L,J,S,P){return L(J.restUrl+"/portals/"+(S||J.id)+"/collaborationsSummary",P)},w=function(L,
J,S,P){return L(J.restUrl+"/portals/"+(S||J.id)+"/collaboratedItems",P)},z=function(L,J,S){return e(L,location.protocol+"//"+J.portalHostname+"/sharing/rest/portals/"+(S||"self"))},x=function(L,J,S){return L(J.restUrl+"/community/groups",{query:{f:"json",q:"orgid:"+J.id+" AND access:public",num:100,start:S||1,sortField:"title",sortOrder:"asc"}}).then(function(P){return P.data.total>P.data.start+P.data.num?x(L,J,P.data.start+P.data.num).then(function(Q){return Object(h.a)(Object(h.a)({},Q),{data:Object(h.a)(Object(h.a)({},
Q.data),{results:P.data.results.concat(Q.data.results)})})}):P})},y=function(L,J,S,P){return L(J.restUrl+"/community/users/"+S+"/provisionedListings",{query:{f:"json",num:100,start:P||1}}).then(function(Q){var M=k.Promise.all(Q.data.provisionedListings.filter(function(K){return K.itemId}).map(function(K){return(new k.Promise(function(X,da){L(J.restUrl+"/content/items/"+K.itemId,{method:"get",query:{f:"json"}}).then(function(Y){X(Y.data)},da)}))["catch"](function(X){return 0})})),N=Q.data.provisionedListings.map(function(K){return e(L,
J.restUrl+"/content/items/"+(K.id||K.itemId)+"/relatedItems?relationshipType\x3dListed2ImplicitlyListed\x26direction\x3dforward").then(function(X){return X},function(X){})});return Q.data.total>Q.data.start+Q.data.num?y(L,J,S,Q.data.start+Q.data.num).then(function(K){return k.Promise.all([M].concat(N)).then(function(X){return X[0].results.concat(d(X.slice(1))).concat(K)})}):k.Promise.all([M].concat(N)).then(function(K){return K[0].filter(function(X){return void 0!==X}).concat(d(K.slice(1)))})})},
u=function(L,J,S){return e(L,J.restUrl+"/community/users/"+(S||J.user.username))},t=function(L,J,S){return e(L,J.restUrl+"/content/users/"+(S||J.user.username),{num:1})},C=function(L,J,S){return e(L,J.restUrl+"/content/groups/"+S)},E=function(L,J,S){return e(L,J.restUrl+"/community/groups",S)},F=function(L,J){return e(L,J.restUrl+"/portals/self/settings")},G=function(L,J){return e(L,J.restUrl+"/portals/self/trustedOrgs",{num:100})},H=function(L,J){return void 0===J&&(J=","),L.map(function(S){return S.id}).join(J)}},
682:function(a,b){a.exports=A},940:function(a,b,g){g.r(b);g.d(b,"InfoBanner",function(){return h});var d=g(0),e=g(15);a=g(682);var f=g.n(a),n=g(32),h=function(){function k(c){var l=this;this.options=c;var r=c.bottomContainer;(this.topContainer=c.topContainer,this.bottomContainer=r,c.bannerConfig)?this.setupBanners(c.bannerConfig):c.request&&c.portal&&c.apiVersion&&(r=4===c.apiVersion?c.request:this.shimmedRequest.bind(this),c=4===c.apiVersion?c.portal:Object(d.a)(Object(d.a)({},c.portal),{restUrl:c.portal.portalUrl.slice(0,
-1),credential:c.portal.user&&c.portal.user.credential?c.portal.user.credential:void 0}),Object(n.o)(r,c).then(function(m){l.setupBanners(m.informationalBanner)}))}return k.prototype.destroy=function(){this.topContainer&&(this.topProjector.stop(),this.topContainer.remove?this.topContainer.remove():this.topContainer.parentNode&&this.topContainer.parentNode.removeChild(this.topContainer));this.bottomContainer&&(this.bottomProjector.stop(),this.bottomContainer.remove?this.bottomContainer.remove():this.bottomContainer.parentNode&&
this.bottomContainer.parentNode.removeChild(this.bottomContainer))},k.prototype.setupBanners=function(c){c&&c.enabled&&(this.topContainer&&(this.topProjector=this.createProjector(this.topContainer,"top-info-banner","top",c)),this.bottomContainer&&(this.bottomProjector=this.createProjector(this.bottomContainer,"bottom-info-banner","bottom",c)))},k.prototype.createProjector=function(c,l,r,m){var q={key:l,position:r,bannerConfig:m};return this.store=Object(e.createStore)(function(v,B){B.type;B.payload;
return Object(d.a)({},q)},q),Object(e.createProjector)(this.store,function(v){return v(f.a,Object(d.a)({},q))},c)},k.prototype.shimmedRequest=function(c,l){var r=Object(d.a)({},l.query);return this.options.portal&&this.options.portal.user&&this.options.portal.user.credential&&-1<c.indexOf(this.options.portal.restUrl)&&(r.token=this.options.portal.user.credential.token),this.options.request({url:c,content:l.query},{usePost:"post"===l.method}).then(function(m){return{data:m}})},k}()}})})},"arcgis-components/Component":function(){define(function(){return function(D){function A(b){if(a[b])return a[b].exports;
var g=a[b]={i:b,l:!1,exports:{}};return D[b].call(g.exports,g,g.exports,A),g.l=!0,g.exports}var a={};return A.m=D,A.c=a,A.d=function(b,g,d){A.o(b,g)||Object.defineProperty(b,g,{enumerable:!0,get:d})},A.r=function(b){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(b,Symbol.toStringTag,{value:"Module"});Object.defineProperty(b,"__esModule",{value:!0})},A.t=function(b,g){if((1&g&&(b=A(b)),8&g)||4&g&&"object"==typeof b&&b&&b.__esModule)return b;var d=Object.create(null);if(A.r(d),
Object.defineProperty(d,"default",{enumerable:!0,value:b}),2&g&&"string"!=typeof b)for(var e in b)A.d(d,e,function(f){return b[f]}.bind(null,e));return d},A.n=function(b){var g=b&&b.__esModule?function(){return b["default"]}:function(){return b};return A.d(g,"a",g),g},A.o=function(b,g){return Object.prototype.hasOwnProperty.call(b,g)},A.p="",A(A.s=773)}({0:function(D,A,a){function b(c,l){function r(){this.constructor=c}h(c,l);c.prototype=null===l?Object.create(l):(r.prototype=l.prototype,new r)}function g(c,
l){var r={},m;for(m in c)Object.prototype.hasOwnProperty.call(c,m)&&0>l.indexOf(m)&&(r[m]=c[m]);if(null!=c&&"function"==typeof Object.getOwnPropertySymbols){var q=0;for(m=Object.getOwnPropertySymbols(c);q<m.length;q++)0>l.indexOf(m[q])&&Object.prototype.propertyIsEnumerable.call(c,m[q])&&(r[m[q]]=c[m[q]])}return r}function d(c,l,r,m){var q,v=arguments.length,B=3>v?l:null===m?m=Object.getOwnPropertyDescriptor(l,r):m;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)B=Reflect.decorate(c,
l,r,m);else for(var w=c.length-1;0<=w;w--)(q=c[w])&&(B=(3>v?q(B):3<v?q(l,r,B):q(l,r))||B);return 3<v&&B&&Object.defineProperty(l,r,B),B}function e(c,l,r,m){return new (r||(r=Promise))(function(q,v){function B(x){try{z(m.next(x))}catch(y){v(y)}}function w(x){try{z(m["throw"](x))}catch(y){v(y)}}function z(x){var y;x.done?q(x.value):(y=x.value,y instanceof r?y:new r(function(u){u(y)})).then(B,w)}z((m=m.apply(c,l||[])).next())})}function f(c,l){function r(z){return function(x){return function(y){if(m)throw new TypeError("Generator is already executing.");
for(;w;)try{if(m=1,q&&(v=2&y[0]?q["return"]:y[0]?q["throw"]||((v=q["return"])&&v.call(q),0):q.next)&&!(v=v.call(q,y[1])).done)return v;switch(q=0,v&&(y=[2&y[0],v.value]),y[0]){case 0:case 1:v=y;break;case 4:return w.label++,{value:y[1],done:!1};case 5:w.label++;q=y[1];y=[0];continue;case 7:y=w.ops.pop();w.trys.pop();continue;default:if(!(v=w.trys,(v=0<v.length&&v[v.length-1])||6!==y[0]&&2!==y[0])){w=0;continue}if(3===y[0]&&(!v||y[1]>v[0]&&y[1]<v[3]))w.label=y[1];else if(6===y[0]&&w.label<v[1])w.label=
v[1],v=y;else if(v&&w.label<v[2])w.label=v[2],w.ops.push(y);else{v[2]&&w.ops.pop();w.trys.pop();continue}}y=l.call(c,w)}catch(u){y=[6,u],q=0}finally{m=v=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([z,x])}}var m,q,v,B,w={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return B={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(B[Symbol.iterator]=function(){return this}),B}function n(){for(var c=0,l=0,r=arguments.length;l<r;l++)c+=arguments[l].length;
c=Array(c);var m=0;for(l=0;l<r;l++)for(var q=arguments[l],v=0,B=q.length;v<B;v++,m++)c[m]=q[v];return c}a.d(A,"d",function(){return b});a.d(A,"a",function(){return k});a.d(A,"f",function(){return g});a.d(A,"c",function(){return d});a.d(A,"b",function(){return e});a.d(A,"e",function(){return f});a.d(A,"g",function(){return n});var h=function(c,l){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,m){r.__proto__=m}||function(r,m){for(var q in m)m.hasOwnProperty(q)&&(r[q]=m[q])})(c,
l)},k=function(){return(k=Object.assign||function(c){for(var l,r=1,m=arguments.length;r<m;r++)for(var q in l=arguments[r])Object.prototype.hasOwnProperty.call(l,q)&&(c[q]=l[q]);return c}).apply(this,arguments)}},16:function(D,A,a){function b(d){return function f(){for(var n=this,h=[],k=0;k<arguments.length;k++)h[k]=arguments[k];return h.length>=d.length?d.call.apply(d,Object(g.g)([this],h)):function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return f.call.apply(f,Object(g.g)([n],
h,c))}}}a.d(A,"a",function(){return b});var g=a(0)},418:function(D,A,a){!function(b){var g=[],d=function(E,F){var G={};return Object.keys(E).forEach(function(H){G[H]=E[H]}),F&&Object.keys(F).forEach(function(H){G[H]=F[H]}),G},e=function(E,F){return E.vnodeSelector===F.vnodeSelector&&(E.properties&&F.properties?E.properties.key===F.properties.key&&E.properties.bind===F.properties.bind:!E.properties&&!F.properties)},f=function(E){if("string"!=typeof E)throw Error("Style values must be strings");},n=
function(E,F,G,H){var L=E[F];if(""!==L.vnodeSelector){var J=L.properties;if(!(J&&(void 0===J.key?J.bind:J.key)))for(J=0;J<E.length;J++)if(J!==F&&e(E[J],L))throw Error(G.vnodeSelector+" had a "+L.vnodeSelector+" child "+("added"===H?H:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},h=[],k=!1,c=function(E){(E.children||[]).forEach(c);E.properties&&E.properties.afterRemoved&&E.properties.afterRemoved.apply(E.properties.bind||E.properties,
[E.domNode])},l=function(){k=!1;h.forEach(c);h.length=0},r=function(E){h.push(E);k||(k=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(l,{timeout:16}):setTimeout(l,16))},m=function(E){var F=E.domNode;if(E.properties){var G=E.properties.exitAnimation;if(G)return F.style.pointerEvents="none",void G(F,function(){F.parentNode&&(F.parentNode.removeChild(F),r(E))},E.properties)}F.parentNode&&(F.parentNode.removeChild(F),r(E))},q=function(E,F,G){!function(H,L,J){if(L)for(var S=
0;S<L.length;S++)v(L[S],H,void 0,J)}(E,F.children,G);F.text&&(E.textContent=F.text);(function(H,L,J){if(L)for(var S=J.eventHandlerInterceptor,P=Object.keys(L),Q=P.length,M=function(K){var X,da=P[K];K=L[da];if("className"===da)throw Error('Property "className" is not supported, use "class".');if("class"===da)B(H,K,!0);else if("classes"===da){var Y=Object.keys(K),aa=Y.length;for(da=0;da<aa;da++){var ca=Y[da];K[ca]&&H.classList.add(ca)}}else if("styles"===da)for(Y=Object.keys(K),aa=Y.length,da=0;da<
aa;da++){ca=Y[da];var I=K[ca];I&&(f(I),J.styleApplyer(H,ca,I))}else"key"!==da&&null!=K&&(Y=typeof K,"function"===Y?0===da.lastIndexOf("on",0)&&(S&&(K=S(da,K,H,L)),"oninput"===da&&(X=K,K=function(T){X.apply(this,[T]);T.target["oninput-value"]=T.target.value}),H[da]=K):"http://www.w3.org/2000/svg"===J.namespace?"href"===da?H.setAttributeNS("http://www.w3.org/1999/xlink",da,K):H.setAttribute(da,K):"string"===Y&&"value"!==da&&"innerHTML"!==da?H.setAttribute(da,K):H[da]=K)},N=0;N<Q;N++)M(N)})(E,F.properties,
G);F.properties&&F.properties.afterCreate&&F.properties.afterCreate.apply(F.properties.bind||F.properties,[E,G,F.vnodeSelector,F.properties,F.children])},v=function(E,F,G,H){var L=0,J=E.vnodeSelector,S=F.ownerDocument;if(""===J){var P=E.domNode=S.createTextNode(E.text);void 0!==G?F.insertBefore(P,G):F.appendChild(P)}else{for(var Q=0;Q<=J.length;++Q){var M=J.charAt(Q);if(Q===J.length||"."===M||"#"===M)M=J.charAt(L-1),L=J.slice(L,Q),"."===M?P.classList.add(L):"#"===M?P.id=L:("svg"===L&&(H=d(H,{namespace:"http://www.w3.org/2000/svg"})),
void 0!==H.namespace?P=E.domNode=S.createElementNS(H.namespace,L):(P=E.domNode=E.domNode||S.createElement(L),"input"===L&&E.properties&&void 0!==E.properties.type&&P.setAttribute("type",E.properties.type)),void 0!==G?F.insertBefore(P,G):P.parentNode!==F&&F.appendChild(P)),L=Q+1}q(P,E,H)}},B=function(E,F,G){F&&F.split(" ").forEach(function(H){H&&E.classList.toggle(H,G)})};var w=function(E,F,G){var H=E.domNode,L=!1;if(E===F)return!1;var J=!1;if(""===F.vnodeSelector){if(F.text!==E.text)return E=H.ownerDocument.createTextNode(F.text),
H.parentNode.replaceChild(E,H),F.domNode=E,L=!0;F.domNode=H}else 0===F.vnodeSelector.lastIndexOf("svg",0)&&(G=d(G,{namespace:"http://www.w3.org/2000/svg"})),E.text!==F.text&&(J=!0,void 0===F.text?H.removeChild(H.firstChild):H.textContent=F.text),F.domNode=H,J=function(S,P,Q,M,N){if(Q===M)return!1;M=M||g;for(var K,X=(Q=Q||g).length,da=M.length,Y=K=0,aa=!1;Y<da;){var ca=K<X?Q[K]:void 0,I=M[Y];if(void 0!==ca&&e(ca,I))aa=w(ca,I,N)||aa,K++;else{a:{ca=Q;var T=I;if(""!==T.vnodeSelector)for(var ba=K+1;ba<
ca.length;ba++)if(e(ca[ba],T)){ca=ba;break a}ca=-1}if(0<=ca){for(;K<ca;K++)m(Q[K]),n(Q,K,S,"removed");aa=w(Q[ca],I,N)||aa;K=ca+1}else v(I,P,K<X?Q[K].domNode:void 0,N),I.properties&&(ca=I.properties.enterAnimation)&&ca(I.domNode,I.properties),n(M,Y,S,"added")}Y++}if(X>K)for(;K<X;K++)m(Q[K]),n(Q,K,S,"removed");return aa}(F,H,E.children,F.children,G)||J,J=function(S,P,Q,M){if(Q){for(var N=!1,K=Object.keys(Q),X=K.length,da=0;da<X;da++){var Y=K[da],aa=Q[Y],ca=P[Y];if("class"===Y)ca!==aa&&(B(S,ca,!1),B(S,
aa,!0));else if("classes"===Y){var I=S.classList,T=Object.keys(aa),ba=T.length;for(Y=0;Y<ba;Y++){var pa=T[Y],ya=!!aa[pa];ya!==!!ca[pa]&&(N=!0,ya?I.add(pa):I.remove(pa))}}else if("styles"===Y)for(I=Object.keys(aa),T=I.length,Y=0;Y<T;Y++)ba=I[Y],pa=aa[ba],pa!==ca[ba]&&(N=!0,pa?(f(pa),M.styleApplyer(S,ba,pa)):M.styleApplyer(S,ba,""));else(aa||"string"!=typeof ca||(aa=""),"value"===Y)?(I=S[Y],I!==aa&&(S["oninput-value"]?I===S["oninput-value"]:aa!==ca)&&(S[Y]=aa,S["oninput-value"]=void 0),aa!==ca&&(N=
!0)):aa!==ca&&(ca=typeof aa,"function"===ca&&M.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===M.namespace?"href"===Y?S.setAttributeNS("http://www.w3.org/1999/xlink",Y,aa):S.setAttribute(Y,aa):"string"===ca&&"innerHTML"!==Y?"role"===Y&&""===aa?S.removeAttribute(Y):S.setAttribute(Y,aa):S[Y]!==aa&&(S[Y]=aa),N=!0))}return N}}(H,E.properties,F.properties,G)||J,F.properties&&F.properties.afterUpdate&&F.properties.afterUpdate.apply(F.properties.bind||F.properties,[H,G,F.vnodeSelector,F.properties,
F.children]);return J&&F.properties&&F.properties.updateAnimation&&F.properties.updateAnimation(H,F.properties,E.properties),L};var z=function(E,F){return{getLastRender:function(){return E},update:function(G){if(E.vnodeSelector!==G.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var H=E;E=G;w(H,G,F)},domNode:E.domNode}},x={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,
styleApplyer:function(E,F,G){"-"===F.charAt(0)?E.style.setProperty(F,G):E.style[F]=G}},y={create:function(E,F){return F=d(x,F),v(E,document.createElement("div"),void 0,F),z(E,F)},append:function(E,F,G){return G=d(x,G),v(F,E,void 0,G),z(F,G)},insertBefore:function(E,F,G){return G=d(x,G),v(F,E.parentNode,E,G),z(F,G)},merge:function(E,F,G){return G=d(x,G),F.domNode=E,q(E,F,G),z(F,G)},replace:function(E,F,G){return G=d(x,G),v(F,E.parentNode,E,G),E.parentNode.removeChild(E),z(F,G)}},u=function(E,F,G){for(var H=
0,L=F.length;H<L;H++){var J=F[H];Array.isArray(J)?u(E,J,G):null!=J&&!1!==J&&("string"==typeof J&&(J={vnodeSelector:"",properties:void 0,children:void 0,text:J.toString(),domNode:null}),G.push(J))}};var t=Array.prototype.find?function(E,F){return E.find(F)}:function(E,F){return E.filter(F)[0]};var C=function(E,F){var G=E;return F.forEach(function(H){G=G&&G.children?t(G.children,function(L){return L.domNode===H}):void 0}),G};b.createCache=function(){var E,F;return{invalidate:function(){E=F=void 0},
result:function(G,H){if(E)for(var L=0;L<G.length;L++)E[L]!==G[L]&&(F=void 0);return F||(F=H(),E=G),F}}};b.createMapping=function(E,F,G){var H=[],L=[];return{results:L,map:function(J){for(var S=J.map(E),P=L.slice(),Q=0,M=0;M<J.length;M++){var N=J[M],K=S[M];if(K===H[Q])L[M]=P[Q],G(N,P[Q],M),Q++;else{for(var X=!1,da=1;da<H.length+1;da++){var Y=(Q+da)%H.length;if(H[Y]===K){L[M]=P[Y];G(J[M],P[Y],M);Q=Y+1;X=!0;break}}X||(L[M]=F(N,M))}}L.length=J.length;H=S}}};b.createProjector=function(E){var F,G,H=d(x,
E),L=H.performanceLogger,J=!0,S=!1,P=[],Q=[],M=function(K,X,da){H.eventHandlerInterceptor=function(aa,ca,I){var T=function(ba){I("domEvent",ba);for(var pa=ca(),ya=ba.currentTarget,Da=pa.domNode,Ha=[];ya&&ya!==Da;)Ha.push(ya),ya=ya.parentNode;Ha.reverse();var ta;pa=C(pa.getLastRender(),Ha);return aa.scheduleRender(),pa&&(ta=pa.properties["on"+ba.type].apply(pa.properties.bind||this,arguments)),I("domEventProcessed",ba),ta};return function(ba,pa,ya,Da){return T}}(F,function(){return Y},L);var Y=K(X,
da(),H);P.push(Y);Q.push(da)},N=function(){if(G=void 0,J){J=!1;L("renderStart",void 0);for(var K=0;K<P.length;K++){var X=Q[K]();L("rendered",void 0);P[K].update(X);L("patched",void 0)}L("renderDone",void 0);J=!0}};return F={renderNow:N,scheduleRender:function(){G||S||(G=requestAnimationFrame(N))},stop:function(){G&&(cancelAnimationFrame(G),G=void 0);S=!0},resume:function(){S=!1;J=!0;F.scheduleRender()},append:function(K,X){M(y.append,K,X)},insertBefore:function(K,X){M(y.insertBefore,K,X)},merge:function(K,
X){M(y.merge,K,X)},replace:function(K,X){M(y.replace,K,X)},detach:function(K){for(var X=0;X<Q.length;X++)if(Q[X]===K)return Q.splice(X,1),P.splice(X,1)[0];throw Error("renderFunction was not found");}}};b.dom=y;b.h=function(E,F,G){if(Array.isArray(F))G=F,F=void 0;else if(F&&("string"==typeof F||F.hasOwnProperty("vnodeSelector"))||G&&("string"==typeof G||G.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var H,L;return G&&1===G.length&&"string"==typeof G[0]?H=G[0]:G&&
(u(E,G,L=[]),0===L.length&&(L=void 0)),{vnodeSelector:E,properties:F,children:L,text:""===H?void 0:H,domNode:null}};Object.defineProperty(b,"__esModule",{value:!0})}(A)},59:function(D,A,a){function b(){for(var g=[],d=0;d<arguments.length;d++)g[d]=arguments[d];return function(e){return g.reduceRight(function(f,n){return n(f)},e)}}a.d(A,"a",function(){return b})},6:function(D,A,a){function b(c){return 0===Object.keys(c).length&&c.constructor===Object}function g(c){return null!=c}function d(c,l){return h.apply(null,
arguments)}function e(c,l){return k.apply(null,arguments)}a.d(A,"b",function(){return b});a.d(A,"a",function(){return g});a.d(A,"e",function(){return n});a.d(A,"c",function(){return d});a.d(A,"d",function(){return e});var f=a(0);D=a(16);var n=Object(D.a)(function(c,l){var r=Object(f.a)({},l);return delete r[c],r}),h=Object(D.a)(function(c,l){return Object.keys(l).reduce(function(r,m){return r[m]=c(l[m],m,l),r},{})}),k=Object(D.a)(function(c,l){return Object.keys(l).reduce(function(r,m){return c(l[m],
m,l)&&(r[m]=l[m]),r},{})})},773:function(D,A,a){function b(B,w,z,x){var y=new q({key:"root"},w);B&&(y.store=B);var u=Object(c.createProjector)(x);w=Object(k.a)(Object(k.a)({},u),{append:function(t){return u.append(t,function(){return y.render.bind(y)(y.tsx.bind(y))})}});return w.append(z),B&&B.subscribe(function(){return u.scheduleRender()}),w}function g(B,w){return function(z){return function(x,y){return function(u,t){return y(z,Object(k.a)(Object(k.a)(Object(k.a)({},x),B(t(),x)),w(u,x)))}}}}function d(){for(var B=
[],w=0;w<arguments.length;w++)B[w]=arguments[w];return function(z){return function(x,y){var u=z(x,y),t=l.a,C=u.dispatch,E=B.map(function(F){return F({dispatch:function(G){return C(G)},getState:u.getState})});return C=t.apply(void 0,E)(u.dispatch),Object(k.a)(Object(k.a)({},u),{dispatch:C})}}}function e(B){return function(w){return function(z,x){return w(function(y,u){if("@@shunt/SETSTATE"===u.type)return u.payload;var t=z(y,u);return-1===u.type.indexOf("@@component/INIT")&&B(u,t),t},x)}}}function f(B){return function(w){w.dispatch;
var z=w.getState;return function(x){return function(y){var u=x(y);return B(y,z()),u}}}}function n(B){var w=Object(r.d)(function(z){return"function"==typeof z},B);return function(z,x){return void 0===z&&(z={}),Object(r.c)(function(y,u){return y(z[u],x)},w)}}function h(B,w){var z=w,x=[],y={dispatch:function(u){return z=B(z,u),x.forEach(function(t){return t()}),u},subscribe:function(u){return x.push(u),function(){x.splice(x.indexOf(u),1)}},getState:function(){return z}};return y.dispatch({type:"@@component/INIT"+
Math.random().toString(36).substring(7)}),y}a.r(A);a.d(A,"createProjector",function(){return b});a.d(A,"Component",function(){return m});a.d(A,"RootComponent",function(){return q});a.d(A,"connect",function(){return g});a.d(A,"applyMiddleware",function(){return d});a.d(A,"shunt",function(){return e});a.d(A,"thunk",function(){return v});a.d(A,"addListener",function(){return f});a.d(A,"combineReducers",function(){return n});a.d(A,"createStore",function(){return h});var k=a(0),c=a(418),l=a(59),r=a(6),
m=function(){function B(w){this.childComponents={};this.state={};this.props=w}return B.prototype.componentDidConnect=function(){},B.prototype.componentWillReceiveProps=function(w){},B.prototype.setState=function(w){this.state=Object(k.a)(Object(k.a)({},this.state),w);this.store&&this.store.dispatch({type:this.props.key+"_COMPONENT_STATE_UPDATE"})},B.prototype.tsx=function(w,z,x){var y=Array.prototype.slice.call(arguments).slice(2);if("string"==typeof w)var u=c.h.apply(this,[w,z,y]);else if(w.prototype&&
w.prototype.constructor.name){var t=w;y=Object(k.a)(Object(k.a)({},z),{children:y});var C=this.childComponents[y.key];C?(C.componentWillReceiveProps(y),C.props=y,u=C.render(C.tsx.bind(C))):((C=this.childComponents[y.key]=new t(y)).store=this.store,C.componentDidConnect(),u=C.render(C.tsx.bind(C)))}else u=(t=w)(Object(k.a)(Object(k.a)({},z),{children:y}),this.tsx.bind(this));return"function"==typeof u?u(this.store.dispatch,this.store.getState):u},B}(),q=function(B){function w(z,x){var y=B.call(this,
z)||this;return y.renderRoot=x,y}return Object(k.d)(w,B),w.prototype.render=function(z){var x=this;return z(function(y,u){return x.renderRoot(u)})},w}(m);void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var B=/function\s([^(]{1,})\(/.exec(this.toString());return B&&1<B.length?B[1].trim():""},set:function(B){}});var v=function(B){var w=B.dispatch,z=B.getState;return function(x){return function(y){return"function"==typeof y?
y(w,z):x(y)}}}}})})},"arcgis-components/InfoBanner/index":function(){define(["../Component"],function(D){return function(A){function a(g){if(b[g])return b[g].exports;var d=b[g]={i:g,l:!1,exports:{}};return A[g].call(d.exports,d,d.exports,a),d.l=!0,d.exports}var b={};return a.m=A,a.c=b,a.d=function(g,d,e){a.o(g,d)||Object.defineProperty(g,d,{enumerable:!0,get:e})},a.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"});Object.defineProperty(g,
"__esModule",{value:!0})},a.t=function(g,d){if((1&d&&(g=a(g)),8&d)||4&d&&"object"==typeof g&&g&&g.__esModule)return g;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:g}),2&d&&"string"!=typeof g)for(var f in g)a.d(e,f,function(n){return g[n]}.bind(null,f));return e},a.n=function(g){var d=g&&g.__esModule?function(){return g["default"]}:function(){return g};return a.d(d,"a",d),d},a.o=function(g,d){return Object.prototype.hasOwnProperty.call(g,d)},a.p="",a(a.s=
822)}({0:function(A,a,b){function g(l,r){function m(){this.constructor=l}k(l,r);l.prototype=null===r?Object.create(r):(m.prototype=r.prototype,new m)}function d(l,r){var m={},q;for(q in l)Object.prototype.hasOwnProperty.call(l,q)&&0>r.indexOf(q)&&(m[q]=l[q]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var v=0;for(q=Object.getOwnPropertySymbols(l);v<q.length;v++)0>r.indexOf(q[v])&&Object.prototype.propertyIsEnumerable.call(l,q[v])&&(m[q[v]]=l[q[v]])}return m}function e(l,r,m,q){var v,
B=arguments.length,w=3>B?r:null===q?q=Object.getOwnPropertyDescriptor(r,m):q;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)w=Reflect.decorate(l,r,m,q);else for(var z=l.length-1;0<=z;z--)(v=l[z])&&(w=(3>B?v(w):3<B?v(r,m,w):v(r,m))||w);return 3<B&&w&&Object.defineProperty(r,m,w),w}function f(l,r,m,q){return new (m||(m=Promise))(function(v,B){function w(y){try{x(q.next(y))}catch(u){B(u)}}function z(y){try{x(q["throw"](y))}catch(u){B(u)}}function x(y){var u;y.done?v(y.value):(u=y.value,
u instanceof m?u:new m(function(t){t(u)})).then(w,z)}x((q=q.apply(l,r||[])).next())})}function n(l,r){function m(x){return function(y){return function(u){if(q)throw new TypeError("Generator is already executing.");for(;z;)try{if(q=1,v&&(B=2&u[0]?v["return"]:u[0]?v["throw"]||((B=v["return"])&&B.call(v),0):v.next)&&!(B=B.call(v,u[1])).done)return B;switch(v=0,B&&(u=[2&u[0],B.value]),u[0]){case 0:case 1:B=u;break;case 4:return z.label++,{value:u[1],done:!1};case 5:z.label++;v=u[1];u=[0];continue;case 7:u=
z.ops.pop();z.trys.pop();continue;default:if(!(B=z.trys,(B=0<B.length&&B[B.length-1])||6!==u[0]&&2!==u[0])){z=0;continue}if(3===u[0]&&(!B||u[1]>B[0]&&u[1]<B[3]))z.label=u[1];else if(6===u[0]&&z.label<B[1])z.label=B[1],B=u;else if(B&&z.label<B[2])z.label=B[2],z.ops.push(u);else{B[2]&&z.ops.pop();z.trys.pop();continue}}u=r.call(l,z)}catch(t){u=[6,t],v=0}finally{q=B=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([x,y])}}var q,v,B,w,z={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},
trys:[],ops:[]};return w={next:m(0),"throw":m(1),"return":m(2)},"function"==typeof Symbol&&(w[Symbol.iterator]=function(){return this}),w}function h(){for(var l=0,r=0,m=arguments.length;r<m;r++)l+=arguments[r].length;l=Array(l);var q=0;for(r=0;r<m;r++)for(var v=arguments[r],B=0,w=v.length;B<w;B++,q++)l[q]=v[B];return l}b.d(a,"d",function(){return g});b.d(a,"a",function(){return c});b.d(a,"f",function(){return d});b.d(a,"c",function(){return e});b.d(a,"b",function(){return f});b.d(a,"e",function(){return n});
b.d(a,"g",function(){return h});var k=function(l,r){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,q){m.__proto__=q}||function(m,q){for(var v in q)q.hasOwnProperty(v)&&(m[v]=q[v])})(l,r)},c=function(){return(c=Object.assign||function(l){for(var r,m=1,q=arguments.length;m<q;m++)for(var v in r=arguments[m])Object.prototype.hasOwnProperty.call(r,v)&&(l[v]=r[v]);return l}).apply(this,arguments)}},15:function(A,a){A.exports=D},822:function(A,a,b){b.r(a);var g=b(0);A=function(d){function e(f){return d.call(this,
f)||this}return Object(g.d)(e,d),e.prototype.render=function(f){var n=this.props.position,h=this.props.bannerConfig;return f("div",{classes:{"info-banner":!0,"info-banner--top":"top"===n,"info-banner--bottom":"bottom"===n},style:"background-color: "+h.bgColor+"; color: "+h.fontColor},f("p",{"class":"info-banner-text"},h.text))},e}(b(15).Component);a["default"]=A}})})},"arcgisonline/pages/portal/PortalItem":function(){define("require exports tslib ../pageUtil ../getThumbnail ./CommentsUtil ../item/_Info ../utils/arrays ../utils/item ../utils/socialMedia ../../sharing/util ../../esriGeowConfig ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/promise/all dojo/Stateful esri/lang esri/arcgis/Portal ../utils/url".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);return function(){function y(t){var C,E,F,G,H,L;this.portalUser=null!==(E=null===
(C=this.portal)||void 0===C?void 0:C.getPortalUser())&&void 0!==E?E:null;this.title=null!==(F=this.title)&&void 0!==F?F:"";this.snippet=null!==(G=this.snippet)&&void 0!==G?G:"";this.type=this.type||"Unknown";this.displayName=null!==(H=this.displayName)&&void 0!==H?H:"";this.commentsInfo={sortField:"created",sortOrder:"desc",start:0,num:5,comments:[],item:this};this.screenshots=(null===(L=this.screenshots)||void 0===L?0:L.length)?this.screenshots:null;this.thumbnailUrl="Image"!==this.type||this.thumbnail?
this.thumbnailUrl:this.itemDataUrl;this.sourceLabel=this._getSourceLabel();this.scoreCompleteness=this.setScoreCompleteness(this.scoreCompleteness);this.url=this._getAdjustedUrl();this._setAdminFlags();this.setTypeKeywordFlags();this.tags instanceof Array&&-1<this.tags.length&&(this.tags=this.tags.join(","));this.size=this._getAdjustedSize();q["default"].mixin(this,{extent:b["default"].extentToString(this.extent)});q["default"].mixin(this,e["default"].getItemInfo(this))}var u=y;y.prototype.postscript=
function(){};y.prototype.getOwnerProfile=function(t,C){var E=this,F=this.owner,G=new r["default"];this.ownerProfile?G.resolve(this.ownerProfile):(this.isOwner?(F=new r["default"],F.resolve(this.portalUser)):F=this.portal.getUserProfile(F),F.then(function(H){E.isOwner||H.orgId===E.portal.id||(C=t=!1);v["default"]({folders:E.isAdmin&&C?H.getFolders():null,tags:E.isAdmin&&t?H.getTags():null,contentTags:E.isAdmin&&t?H.getContentTags():null}).then(function(L){q["default"].mixin(E,{ownerProfile:H,itemOwner:H});
E._setAdminFlags();G.resolve(H)},function(L){q["default"].mixin(E,{ownerProfile:H,itemOwner:H});E._setAdminFlags();G.resolve(H)})}));return G};y.prototype.getComments=function(t,C){var E=this,F=new r["default"];this.commentsEnabled&&this.numComments?d["default"].fetchComments(t,C,this.commentsInfo).then(function(G){E.commentsInfo=q["default"].mixin(E.commentsInfo,G.commentsInfo);E.comments=E.commentsInfo.comments;F.resolve(E.comments)}):F.resolve([]);return F};y.prototype.getRelatedItems=function(t,
C){var E=this,F={WMA2Code:1,MobileApp2Code:1},G,H,L=new r["default"];this.relatedItems=this.relatedItems||{};w["default"].isDefined(this.relatedItems[t+"_"+C])?L.resolve(this.relatedItems[t+"_"+C].slice(0)):k["default"].request({url:this.itemUrl+"/relatedItems",content:{relationshipType:t,direction:C}}).then(function(J){G=(null===J||void 0===J?0:J.relatedItems)?J.relatedItems:null!==J&&void 0!==J?J:[];G=G.map(function(S){return new u(a.__assign(a.__assign({},S),{portal:E.portal}))});H=t in F?(G||
[]).shift():G||[];E.relatedItems[t+"_"+C]=H;L.resolve((null===H||void 0===H?0:H.length)?H.slice(0):H)},function(J){L.reject(J)});return L};y.prototype.getSourceData=function(){var t=this,C=new r["default"],E="Scene Service"===this.type||"Map Service"===this.type||"WFS"===this.type||"OGCFeatureServer"===this.type,F="Map Service"===this.type,G=E?"Service2Service":this.isRouteLayer?"Service2Route":"Service2Data",H="Service2Service"===G||"Service2Route"===G?"reverse":"forward",L;-1<this.typeKeywords.indexOf("Bulk Published Service")&&
(G="DataStore2BPService",H="reverse");this.sourceData?C.resolve(this.sourceData):this.getRelatedItems(G,H).then(function(J){L=(null===J||void 0===J?0:J.length)?J.shift():null;E?F&&!t._isView(L)||!L?t.getRelatedItems("Service2Data","forward").then(function(S){S=(null===S||void 0===S?0:S.length)?S.shift():L;C.resolve(S)}):C.resolve(L):C.resolve(L)},function(J){C.reject(J)});return C};y.prototype._isView=function(t){return t&&f["default"].includes(t.typeKeywords,"View Service")||!1};y.prototype.getResultData=
function(){var t=new r["default"],C=this.isHostedService?"Service2Service":"Service2Data";this.getRelatedItems(C,"Service2Service"===C?"forward":"reverse").then(function(E){return t.resolve((null===E||void 0===E?0:E.length)?E:null)});return t};y.prototype.getThumbnail=function(t){var C=this,E=new r["default"];this._fetchingThumbnail?setTimeout(function(){C.getThumbnail(!1).then(function(F){return E.resolve(F)})},50):(this._fetchingThumbnail=!0,g["default"](this,t).then(function(F){delete C._fetchingThumbnail;
F.dataURL?C._updateThumbnail(F).then(function(G){C.set("thumbnailUrl",G);E.resolve(G)}):(C.set("thumbnailUrl",F),E.resolve(F))}));return E};y.prototype.getData=function(){var t=new r["default"];k["default"].request({url:this.itemDataUrl}).then(function(C){return t.resolve(C)});return t};y.prototype.canBeDeleted=function(){var t=new r["default"];k["default"].request({url:this.userItemUrl+"/canDelete"}).then(function(C){return t.resolve(C)},function(C){return t.resolve(C)});return t};y.prototype.resetTypeKeywordInfo=
function(){this.setTypeKeywordFlags();this.set("displayName",this._getDisplayName())};y.prototype.setTypeKeywordFlags=function(){var t,C,E,F=this.typeKeywords;this.isViewOnly=f["default"].includes(F,"useOnly");this.isOfflineEnabled=f["default"].includes(F,"Offline");this.isHostedService=f["default"].includes(F,"Hosted Service")&&"Insights Workbook"!==this.type&&"Insights Page"!==this.type;this.isServiceProxy=f["default"].includes(F,"Service Proxy");this.isAppProxy=f["default"].includes(F,"App Proxy");
this.isAppCollector=f["default"].includes(["Web Map","Web Scene"],this.type);this.useInCollector=f["default"].includes(F,"Collector");this.disableInCollector=f["default"].includes(F,"CollectorDisabled");this.isFeatureCollection="Feature Collection"===this.type||f["default"].includes(F,"Feature Collection");this.isMapNotes="Feature Collection"===this.type&&f["default"].includes(F,"Map Notes");this.isTable=f["default"].includes(F,"Table");this.hasMetadata=f["default"].includes(F,"Metadata");this.isSDS=
!this.portal.isPortal||this.portal.isPortal&&f["default"].includes(F,"providerSDS");this.isBDS=this.portal.isPortal&&f["default"].includes(F,"providerBDS");this.isRegisteredApp=f["default"].includes(F,"Registered App");this.hasGeocodeReviewTable=f["default"].includes(F,"Involved Lookup");this.isHostedTemplate=f["default"].includes(F,"configurableApp")||f["default"].includes(F,"Configurable")&&f["default"].includes(F,"createAppWithoutMap");this.isPremium=-1<this.owner.toLowerCase().indexOf("esri")&&
this.isPremiumContent;this.requiresCredits=f["default"].includes(this.typeKeywords,"Requires Credits");this.typeInfo=q["default"].mixin({},this.getTypeInfo(),{premiumTitle:m["default"].common[(this.requiresCredits?"premiumcontentcreditstitle":"premiumcontenttitle")+(this.portal.isPortal?"portal":"")],premiumLabel:m["default"].common[this.requiresCredits?"premiumcontent":"subscriptioncontent"]});this.hasKMLItemData="KML"===this.type&&-1<(null===(t=this.url)||void 0===t?void 0:t.indexOf("rest/content/items/"+
this.id+"/data"));this.isDataView=f["default"].includes(F,"View Service");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(C=this.portalUser)||void 0===C?void 0:C.userRole.canDeleteOrgItems())||!1;this.isLocatorView=this.isServiceProxy&&f["default"].includes(F,"Geocoding filter");this.isRouteLayer=f["default"].includes(F,"Route Layer");this.isSpatiotemporal=f["default"].includes(F,"Spatiotemporal");this.isMarkup=f["default"].includes(F,"Markup");this.isMultiServicesView=f["default"].includes(F,
"Multi Services View");this.isPhotoLocations="Image Collection"===this.type&&f["default"].includes(F,"Photo locations");this.isLocationTrackingView=(this.isLocationTrackingService="Feature Service"===this.type&&f["default"].includes(F,"Location Tracking Service"))&&f["default"].includes(F,"Location Tracking View");this.canShowSocialMediaLinks=h["default"].canShowSocialMediaLinksOnItems(this.portal);this.isVectorTileService=f["default"].includes(F,"Vector Tile Service");this.isUtilityNetwork="Feature Service"===
this.type&&f["default"].includes(this.typeKeywords,"UtilityNetwork");t=w["default"].isDefined(c["default"].newMapViewerEnabled)&&!0===c["default"].newMapViewerEnabled;C=!c["default"].self.portalProperties||!w["default"].isDefined(c["default"].self.portalProperties.newMapViewerEnabled)||!0===c["default"].self.portalProperties.newMapViewerEnabled;t&&C&&(this.canOpenInNewMapViewer=this._canOpenInNewMapViewer());this.userItemUrl=null===(E=this.itemUrl)||void 0===E?void 0:E.replace("/content/","/content/users/"+
this.owner+(this.folderId?"/"+this.folderId:"")+"/")};y.prototype.addBlockClasses=function(t){var C=this,E,F,G,H;this.blockedApps||(this.blockedApps=null===(E=this.portal)||void 0===E?void 0:E.blockedApps);if(null!==(F=this.blockedApps)&&void 0!==F&&F.length&&(-1<this.blockedApps.indexOf("survey123")&&t.some(function(L){return-1<["is-surveyForm","is-surveyFormBrowser"].indexOf(L)})&&-1===t.indexOf("survey-blocked")&&t.push("survey-blocked"),-1<this.blockedApps.indexOf("webappbuilder"))){t.some(function(L){return"can-edit-wab"===
L})&&-1===t.indexOf("wab-blocked")&&t.push("wab-blocked");if(["Web AppBuilder","WABTemplate"].some(function(L){return C.typeKeywords.some(function(J){return J===L})})||-1<(null===(G=this.url)||void 0===G?void 0:G.indexOf("webappviewer")))E=t.indexOf("has-url"),-1<E&&t.splice(E,1);-1<(null===(H=this.configureUrl)||void 0===H?void 0:H.indexOf("webappviewer"))&&(t=this.privileges.indexOf("can-configure"),-1<t&&this.privileges.splice(t,1))}};y.prototype.removeBlockedTypes=function(t){var C=this,E;if((null===
t||void 0===t?0:t.length)||(null===(E=this.blockedApps)||void 0===E?0:E.length)){(null===t||void 0===t?0:t.length)?this.blockedApps=t:t=this.blockedApps;var F={arcgis360vr:{types:["is-vrExperience"],blockedType:"vrExperience-blocked",openIn:["vrExperienceViewer"]},arcgisInsights:{types:["is-insights"],blockedType:"insights-blocked",texts:[m["default"].itemLinks.openInsights],openIn:["insightsViewer"]},arcgisstorymaps:{types:["is-published-storymap","is-editable-storymap"],blockedType:"storymap-blocked",
openIn:["storyMapViewer","configureStoryMap"]},experienceBuilder:{types:["is-published-webExperience","is-published-webExperienceTemplate"],blockedType:"exp-builder-blocked",openIn:["webExperienceViewer"]},HubforArcGIS:{types:["is-hubInitiative","is-hubEvent"],blockedType:"hub-blocked",texts:[m["default"].itemLinks.viewInHub,m["default"].itemLinks.openHubInitiative],openIn:["hubEventViewer","hubInitiative"]},opsdashboard:{types:["is-dashboard"],blockedType:"dashboard-blocked",texts:[m["default"].itemLinks.dashboardView],
openIn:["dashboard"]},survey123:{types:["is-surveyForm","is-surveyFormBrowser"],blockedType:"survey-blocked",openIn:["surveyViewer"],texts:[m["default"].itemLinks.openSurvey123]},webappbuilder:{types:["can-edit-wab"],blockedType:"wab-blocked"},Workforce:{types:["is-workforceProject"],blockedType:"workforce-blocked",texts:[m["default"].itemLinks.openWorkforce],openIn:["workforceViewer"]}};Object.keys(F).forEach(function(G){var H;if(-1<t.indexOf(G)){var L=F[G],J=L.types,S=L.blockedType,P=L.texts;L=
L.openIn;"arcgisstorymaps"===G&&"StoryMap"===C.type&&(C.defaultOpenText=void 0);J&&(C.types.some(function(Q){return J.some(function(M){return M===Q})})||(null===(H=C.privileges)||void 0===H?0:H.some(function(Q){return J.some(function(M){return M===Q})})))&&-1===C.types.indexOf(S)&&(C.types=a.__spreadArray(a.__spreadArray([],C.types),[S]));if(null===P||void 0===P?0:P.some(function(Q){return Q===C.defaultOpenText}))C.defaultOpenText=C.defaultOpenIcon=void 0;L&&L.forEach(function(Q){Q=C.openIn.indexOf(Q);
-1<Q&&C.openIn.splice(Q,1)})}});-1<t.indexOf("webappbuilder")&&-1<this.typeKeywords.indexOf("Web AppBuilder")&&(this.defaultOpenText=void 0,this.openIn=[])}};y.prototype.isVelocity=function(){return-1<this.typeKeywords.indexOf("IoTFeatureLayer")};y.prototype._getAdjustedSize=function(){var t=this.isHostedService&&"Feature Service"===this.type&&0<=this.subInfo,C=this.isHostedService&&"Image Service"===this.type&&!f["default"].includes(this.typeKeywords,"Tiled Imagery Layer")&&!f["default"].includes(this.typeKeywords,
"Elevation 3D Layer")&&0<=this.subInfo;return this.size&&(t||C)?this.size-this.subInfo:this.size};y.prototype._canOpenInNewMapViewer=function(){var t,C=this.type,E=e["default"][C],F={"Feature Service":1,"Map Service":1,"Vector Tile Service":1,"Image Service":1,"Imagery Layer":1,KML:1,OGCFeatureServer:1,WFS:1,WMS:1,WMTS:1};return-1<(null===(t=null===E||void 0===E?void 0:E.openIn)||void 0===t?void 0:t.indexOf("mapViewer"))?"Web Map"===C?!0:C in F&&this._canOpenServiceInNewMapViewer()?!0:!1:!1};y.prototype._canOpenServiceInNewMapViewer=
function(){var t=this.type,C=this.typeKeywords,E="Map Service;Vector Tile Service;Imagery Layer;Image Service;Feature Service;KML;WFS;WMS;WMTS;OGCFeatureServer".split(";");return this.isTable||E.includes(t)||C.includes("Hosted Service")};y.prototype._getAdjustedUrl=function(){var t;if(this.url){var C=/^(?:[a-z]+:)?\/\//i.test(this.url)||-1!==this.url.indexOf("../");if(!this.portal.isPortal){var E=void 0;try{E=k["default"].parseUrl(this.url)}catch(F){E=this.url}if("public"!==this.access&&k["default"].isHostedTemplateItem(this.url))return this.url.replace(E.host,
window.location.hostname);if("KML"===this.type)return this.url.includes("/sharing/rest/content/items/")?(null===(t=this.itemDataUrl)||void 0===t?void 0:t.replace(E.host,this.portal.portalHostname),this.url.replace(E.host,this.portal.portalHostname)):this.url}return this.portal.isPortal&&!C&&(t=k["default"].getHomeAppContext(),-1===this.url.indexOf(t))?t+this.url:x.sanitizeServerURL(this.url)}return null};y.prototype._getSourceLabel=function(){var t=this.type,C=this.typeKeywords,E=f["default"].includes(C,
"Service")||"Feature Collection"===t?m["default"].itemProperties.source+" ":"";return"Web Scene"===t?f["default"].includes(C,"ViewingMode-Local")?m["default"].common.localWebScene:m["default"].common.globalWebScene:E?E+t:t};y.prototype._setAdminFlags=function(){var t,C,E,F,G;this.isOwnedByMyOrg=this.isOwner||(null===(t=this.itemOwner)||void 0===t?void 0:t.orgId)===this.portal.id||this.portalUser&&(null===(C=this.itemOwner)||void 0===C?void 0:C.orgId)&&this.portal&&this.portalUser.orgId===this.portal.id||
!1;t=this.isAdminView||(null===(F=null===(E=this.portal)||void 0===E?void 0:E.portalUser)||void 0===F?void 0:F.isOrgAdmin)&&this.isOwnedByMyOrg;this.isOwner=this.portalUser&&this.owner===this.portalUser.username;this.canUpdate=(this.isAdmin=this.portalUser?this.isOwner||n["default"].isItemAdmin(this,this.portal)||t:!1)||this.itemControl&&-1<this.itemControl.indexOf("update");this.canDelete=this.isOwner||this.isAdmin||this.isOwnedByMyOrg&&(null===(G=this.portalUser)||void 0===G?void 0:G.userRole.canDeleteOrgItems())||
!1};y.prototype._setContentStatusTo=function(t){return k["default"].request({url:this.itemUrl+"/setContentStatus",content:{status:t,clearEmptyFields:!t}},{usePost:!0})};y.prototype.setScoreCompleteness=function(t){t=parseInt(t,10);return this.scoreCompleteness=10*Math.ceil(t/10)};y.prototype._updateThumbnail=function(t){var C=this,E=new r["default"],F=this.itemUrl,G;k["default"].request({url:this.userItemUrl+"/updateThumbnail",content:{data:t.dataURL,filename:"ago_downloaded.png"}},{usePost:!0}).then(function(){k["default"].request({url:F}).then(function(H){G=
new u(a.__assign(a.__assign({},H),{portal:C.portal}));E.resolve(G.thumbnailUrl)})});return E};return y=u=a.__decorate([l["default"](z.PortalItem,B["default"])],y)}()})},"arcgisonline/pages/getThumbnail":function(){define("require exports tslib dojo/Deferred dojo/_base/lang ../map/core/buildExportCall ../map/thumbnail/buildThumbnailURLFromKMLItem ../map/thumbnail/buildThumbnailURLFromFSItem ../map/thumbnail/buildThumbnailURLFromImageryItem ../map/thumbnail/createHiddenMap ../sharing/util ./utils/arrays".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c){function l(m,q,v){var B=new b["default"];m=d["default"](m,q,"4326",null,"800,532",null,"json",null,v||null);k["default"].request({url:m},{addToken:!1}).then(function(w){B.resolve(w)},function(){B.resolve(k["default"].getAbsoluteUrl("images/transparent.gif"))});return B}function r(m){return 2===(null===m||void 0===m?void 0:m.length)&&2===m[0].length&&2===m[1].length?Math.round(1E3*m[0][0])/1E3+","+Math.round(1E3*m[0][1])/1E3+","+Math.round(1E3*m[1][0])/1E3+","+Math.round(1E3*
m[1][1])/1E3:null}Object.defineProperty(A,"__esModule",{value:!0});b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);A["default"]=function(m,q){var v,B,w=new b["default"],z=m.portal,x=z.getPortalUser();x=(null===x||void 0===x?0:x.token)?"?token\x3d"+x.token:"";var y=k["default"].getAbsoluteUrl("images/transparent.gif"),u=k["default"].getAbsoluteUrl("images/arcgis-transparent-background-div.png"),
t=k["default"].getStaticImagesUrl(),C=m.itemUrl||m.url,E=m.itemDataUrl,F=m.serviceInfo||{},G=m.itemData||{},H=m.type.toLowerCase(),L=m.typeKeywords||[],J=-1===(null===(v=m.thumbnail)||void 0===v?void 0:v.indexOf("thumbnail/ago_downloaded."));v=c["default"].includes(L,"Tiled Imagery");var S="image service"===H&&!v;J=q&&("Feature Service"===m.type&&!J||"Vector Tile Service"===m.type&&!J);var P=g["default"].isArray(m.extent)?r(m.extent):m.extent||"-180,-90,180,90",Q;m||w.resolve(u);m.thumbnail&&!J||
"Image"===m.type||m.thumbnailUrl&&!J?w.resolve(m.thumbnail?C+"/info/"+m.thumbnail+x:m.thumbnailUrl):m.isAdmin&&("image service"===H&&!v||"map service"===H)?"image service"===H?n["default"](m,[800,532]).then(function(M){w.resolve(M.dataURL?M:M.url||u)},function(){return w.resolve(u)}):m.isHostedService?m.getSourceData().then(function(M){(Q=null===M||void 0===M?void 0:M.thumbnailUrl)?(m.thumbnail=Q,w.resolve(Q)):(m.thumbnail=t+"/desktopapp.png",w.resolve(m.thumbnail))},function(){m.thumbnail=t+"/desktopapp.png";
w.resolve(m.thumbnail)}):l(C,P,F).then(function(M){w.resolve(M&&M.href||u)}):m.isLocationTrackingService?(m.thumbnail=t+"/locationtrackingservice.png",w.resolve(m.thumbnail)):m.isAdmin&&"feature service"===H?m.isTable?(m.thumbnail=t+"/desktopapp.png",w.resolve(m.thumbnail)):f["default"](m,null,G.layers).then(function(M){w.resolve(M)},function(){w.resolve(y)}):"vector tile service"===H?(z=[[-180,-90],[180,90]],x=void 0,"string"===typeof m.extent?(x=m.extent.split(","),z=[[parseFloat(x[0]),parseFloat(x[1])],
[parseFloat(x[2]),parseFloat(x[3])]]):0<(null===(B=m.extent)||void 0===B?void 0:B.length)&&(z=m.extent),h["default"]({operationalLayers:[],baseMap:{baseMapLayers:[{id:m.id,type:"VectorTileLayer",layerType:"VectorTileLayer",title:m.title,styleUrl:m.itemUrl+"/resources/styles/root.json",visibility:!0,opacity:1}],title:"Topographic"},spatialReference:{wkid:102100,latestWkid:3857},authoringApp:"WebMapViewer",authoringAppVersion:"5.3",version:"2.10"},z,function(M){(M=M.layerIds.map(M.getLayer.bind(M)).shift())?
M.takeScreenshot({format:"png",width:800,height:532}).then(function(N){(null===N||void 0===N?0:N.dataURL)?w.resolve(N):w.resolve(y)},function(){w.resolve(y)}):w.resolve(y)},function(){return w.resolve(y)})):m.isAdmin&&"kml"===H?e["default"](m).then(function(M){return w.resolve(M)}):"web mapping application"===H?w.resolve(t+"/webapp.png"):"mobile application"===H?w.resolve(t+"/mobileapp.png"):"image"===H?(B=2097134<m.size?k["default"].relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):
E,w.resolve(B)):"workforce project"===H?w.resolve(t+"/workforceproject.png"):"hub initiative"===H?w.resolve(t+"/hubinitiative.png"):"hub page"===H?w.resolve(t+"/hubpage.png"):"hub site application"===H?w.resolve(t+"/hubsite.png"):"hub event"===H?w.resolve(t+"/hubevent.png"):"dashboard"===H?(B=c["default"].includes(L,"ArcGIS Dashboards"),w.resolve(t+(B?"/dashboards.png":"/opsdashboard.png"))):"geoprocessing service"===H&&(null===z||void 0===z?0:z.isPortal)?w.resolve(t+"/webtool.png"):"web scene"===
H||"scene service"===H?w.resolve(t+"/scene.png"):"ortho mapping project"===H?w.resolve(t+"/orthomappingproject.png"):"ortho mapping template"===H?w.resolve(t+"/orthomappingtemplate.png"):"insights theme"===H?w.resolve(t+"/insightstheme.png"):"insights workbook package"===H?w.resolve(t+"/insightsworkbookpackage.png"):"solution"===H?w.resolve(t+"/solution.png"):"mobile scene package"===H?w.resolve(t+"/mobilescenepackage.png"):"deep learning package"===H?w.resolve(t+"/deeplearningpackage.png"):"big data analytic"===
H?w.resolve(t+"/bigdataanalytic.png"):"real time analytic"===H?w.resolve(t+"/realtimeanalytic.png"):"feed"===H?w.resolve(t+"/feed.png"):"excalibur imagery project"===H?w.resolve(t+"/excaliburimageryproject.png"):"notebook"===H?w.resolve(k["default"].relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png")):"storymap"===H?w.resolve(t+"/storymap.png"):"survey123 add in"===H?w.resolve(t+"/survey123addin.png"):"mission"===H?w.resolve(t+"/mission.png"):"quickcapture project"===H?w.resolve(t+
"/quickcaptureproject.png"):"pro report"===H?w.resolve(t+"/proreport.png"):"pro package"===H?w.resolve(t+"/propackage.png"):"urban model"===H?w.resolve(t+"/urbanmodel.png"):"web experience"===H?w.resolve(t+"/webexperience.png"):"web experience template"===H?w.resolve(t+"/webexperiencetemplate.png"):"workflow"===H?w.resolve(t+"/workflow.png"):"insights script"===H?w.resolve(t+"/insightsscript.png"):"kernel gateway connection"===H?w.resolve(t+"/kernelgatewayconnection.png"):"hub initiative template"===
H?w.resolve(t+"/hubinitiativetemplate.png"):v?w.resolve(t+"/tiledimagerylayer.png"):S?w.resolve(t+"/imagerylayer.png"):"mission report"===H?w.resolve(t+"/missionreport.png"):"administrative report"===H?w.resolve(t+"/administrativereport.png"):"storymap theme"===H?w.resolve(t+"/storymaptheme.png"):"knowledge graph"===H?w.resolve(t+"/knowledgegraph.png"):"earth configuration"===H?w.resolve(t+"/earthconfiguration.png"):"raster function template"===H?w.resolve(t+"/rasterfunctiontemplate.png"):"link chart"===
H?w.resolve(t+"/linkchart.png"):"investigation"===H?w.resolve(t+"/investigation.png"):"apache parquet"===H?w.resolve(t+"/apacheparquet.png"):w.resolve(t+"/desktopapp.png");return w}})},"arcgisonline/map/core/buildExportCall":function(){define([],function(){return function(D,A,a,b,g,d,e,f,n){if(!f&&-1<D.indexOf("/MapServer/")){d=D.indexOf("/MapServer/");var h=D.indexOf("?");-1<h?(f=D.substring(d+11,h),D=D.substring(0,d+10)+D.substring(h)):(f=D.substring(d+11),D=D.substring(0,d+10))}h=-1<D.indexOf("/MapServer");
!h&&n&&(h=n.capabilities?-1<n.capabilities.toLowerCase().indexOf("map"):n.supportedImageFormatTypes);d=D.indexOf("?");if(-1==d)if(h)D+="/export?";else{if("undefined"!==typeof n.currentVersion&&10.1<=n.currentVersion)return D+"/info/thumbnail";D+="/exportImage?"}else if(h)D=D.substring(0,d)+"/export"+D.substring(d,D.length)+"\x26";else{if("undefined"!==typeof n.currentVersion&&10.1<=n.currentVersion)return D=D.substring(0,d)+"/info/thumbnail"+D.substring(d,D.length);D=D.substring(0,d)+"/exportImage"+
D.substring(d,D.length)+"\x26"}D+="size\x3d"+g+"\x26bbox\x3d"+A;null!==a&&0<a.length&&(D+="\x26bboxSR\x3d"+a);null!==b&&0<b.length&&(D+="\x26imageSR\x3d"+b);D=h&&n&&n.supportedImageFormatTypes&&-1<n.supportedImageFormatTypes.indexOf("PNG32")?D+("\x26format\x3dpng32\x26f\x3d"+e):h?D+("\x26format\x3dpng24\x26f\x3d"+e):D+("\x26format\x3djpgpng\x26f\x3d"+e);h?null!==f&&0<f.length&&(D+="\x26layers\x3dshow:"+f):D+="\x26interpolation\x3dRSP_NearestNeighbor\x26bandIds\x3dnull";return D}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromKMLItem":function(){define("dojo/Deferred dojo/_base/url dojo/_base/lang arcgisonline/sharing/util esri/SpatialReference arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap".split(" "),
function(D,A,a,b,g,d){var e=window.esriGeowConfig;return function(f,n){var h={};h.baseMap=e.defaultBasemap||e.self.defaultBasemap;h.baseMap.title="basemap";h.operationalLayers=[];var k=f.url;k||"KML"!==f.type||(k=e.restBaseUrl+"content/items/"+f.id+"/data");var c=(new A(e.restBaseUrl)).authority;-1<k.indexOf(c)&&(c=b.getToken())&&(k+="?token\x3d"+c);h.operationalLayers.push({url:k,id:"KML_"+Math.random(),opacity:1,title:f.title,visibility:!0,type:"KML"});var l=new D;k=n;k||("string"==typeof f.extent?
(k=f.extent.split(","),k=[[parseFloat(k[0]),parseFloat(k[1])],[parseFloat(k[2]),parseFloat(k[3])]]):k=f.extent&&0<f.extent.length?f.extent:[[-180,-90],[180,90]]);d(h,k,new g({wkid:4326}),a.hitch(this,function(r){l.resolve(r)}),a.hitch(this,function(r){l.reject(r)}));return l}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromItemWebMap":function(){define(["dojo/json","dojo/_base/lang","dojo/_base/array","esri/tasks/Geoprocessor"],function(D,A,a,b){var g=window.esriGeowConfig;return function(d,e,
f,n,h){d=A.clone(d);a.forEach(d.baseMap.baseMapLayers,function(k){delete k.resourceInfo});d.mapOptions={showAttribution:!1,extent:{xmin:e[0][0],ymin:e[0][1],xmax:e[1][0],ymax:e[1][1],spatialReference:{wkid:4326}},spatialReference:f};d.exportOptions={dpi:96,outputSize:[600,400]};d.layoutOptions={};e=new b(g.self.helperServices.printTask.url);f={Web_Map_as_JSON:D.stringify(d),Format:"PNG32",Layout_Template:"MAP_ONLY"};e.execute(f).then(A.hitch(this,function(k){if(k){for(var c=!1,l=0;l<k.length;l++)if("Output_File"==
k[l].paramName){n(k[l].value.url);c=!0;break}!c&&h&&h()}else h&&h()}),A.hitch(this,function(k){h&&h()}))}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromFSItem":function(){define("dojo/on dojo/Deferred dojo/DeferredList dojo/_base/connect dojo/_base/array dojo/_base/lang esri/kernel esri/layers/FeatureLayer esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap arcgisonline/map/thumbnail/getExtentWithFeatures arcgisonline/map/thumbnail/getItemData arcgisonline/map/layer/getServiceInfo".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){return function(m,q,v){var B={};B.baseMap=d.clone(esriGeowConfig.defaultBasemap||esriGeowConfig.self.defaultBasemap);B.baseMap.title="basemap";for(var w=B.baseMap.baseMapLayers.length,z=!1===m.itemData?{}:m.itemData,x=0;x<w;x++){var y=B.baseMap.baseMapLayers[x];if(!y.isReference){!esriGeowConfig.allSSL&&"https:"!=location.protocol||!h.isHostedService(y.url)&&!h.supportsHttps(y.url)||(y.url=y.url.replace("http:","https:"));y.visibility=!1;B.baseMap.baseMapLayers=
[y];break}}B.operationalLayers=[];var u=new A;w=function(t,C){C?t&&g.forEach(t,function(G){g.forEach(C,function(H,L){H.id===G.id&&(H[L]=G)})}):C=[];var E=function(G,H){for(var L=G&&G.layers||[],J=L.length-1;0<=J;J--){var S=L[J],P=e.id.findCredential(h.urlToObject(m.url).path);P={url:m.url+"/"+S.id+(P?"?token\x3d"+P.token:""),id:(m.id||Math.random())+"_"+S.id,opacity:1,title:(m.title||"title")+"_"+S.id,visibility:!0};for(var Q=!1,M=0;M<L.length;M++)if(L[M].id===S.id){Q=!0;P.layerDefinition=L[M].layerDefinition;
break}(!L.length||L.length&&Q)&&B.operationalLayers.push(P)}var N=function(aa){u.resolve(aa)},K=function(aa){u.reject(aa)},X=[[-180,-90],[180,90]];"string"==typeof m.extent?(J=m.extent.split(","),X=[[parseFloat(J[0]),parseFloat(J[1])],[parseFloat(J[2]),parseFloat(J[3])]]):m.extent&&0<m.extent.length&&(X=m.extent);if(1===B.operationalLayers.length)P=new f(B.operationalLayers[0].url),D(P,"load",d.hitch(this,function(aa){aa.layer&&(aa=aa.layer);c({layer:aa},q||X).then(d.hitch(this,function(ca,I){k(ca,
I,d.hitch(this,N),d.hitch(this,K))},B))}));else{J=q||m.extent;X=new n(J[0][0],J[0][1],J[1][0],J[1][1]);var da=function(aa,ca){var I=20015077/180,T=e.config.defaults,ba=e.WKIDUnitConversion,pa=aa.spatialReference;if(pa){var ya=pa.wkid;var Da=pa.wkt}pa=null;ya?pa=ba.values[ba[ya]]:Da&&-1!==Da.search(/^PROJCS/i)&&(ba=/UNIT\[([^\]]+)\]\]$/i.exec(Da))&&ba[1]&&(pa=parseFloat(ba[1].split(",")[1]));return aa.getWidth()/ca*(pa||I)*39.37*T.screenDPI}(X,200),Y=[];L=[];for(J=0;J<B.operationalLayers.length;J++)P=
B.operationalLayers[J],S=new A,L.push(S),P=new f(P.url),Y.push(P),b.connect(P,"onLoad",d.hitch(this,function(aa,ca){ca.minScale<=da&&ca.maxScale>da?aa.resolve(!0):aa.resolve(!1)},S));(new a(L)).addCallback(function(aa){for(var ca=!1,I=0;I<aa.length;I++)if(!0===aa[I][1]){ca=!0;break}ca?k(B,q||m.extent,d.hitch(this,N),d.hitch(this,K)):c({layer:Y[Y.length-1]},q||m.extent).then(d.hitch(this,function(T,ba){k(T,ba,d.hitch(this,N),d.hitch(this,K))},B))})}},F=function(G){u.reject(G)};m.serviceInfo?E(m.serviceInfo):
r(m.url,"",d.hitch(this,E),d.hitch(this,F))};v?z?w(v,z):l(m.id,d.hitch(this,w,v),d.hitch(this,w)):m.id?z?w(null,z):l(m.id,d.hitch(this,w,null),d.hitch(this,w)):w();return u}})},"esri/layers/FeatureLayer":function(){define("require module dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/date/locale dojo/io-query dojo/dom-construct dojo/i18n dojo/when dojo/global dojo/promise/all ../sniff ../kernel ../lang ../request ../config ../deferredUtils ../promiseList ../SpatialReference ../urlUtils ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/jsonUtils ../support/expressionUtils ../arcadeProfiles/labelingProfile ../tasks/QueryTask ../tasks/query ../tasks/FeatureSet ../tasks/StatisticDefinition ../geometry/Extent ../geometry/jsonUtils ../geometry/normalizeUtils ../geometry/scaleUtils ./GraphicsLayer ./Field ./TimeInfo ./TimeReference ./FeatureType ./FeatureTemplate ./FeatureSubtype ./FeatureEditResult ./LabelClass ./support/domainUtils ./SnapshotMode ./OnDemandMode ./SelectionMode ./StreamMode ./GridLayout ./TrackManager ./HeatmapManager ./clustering/ClusterManager dojo/i18n!../nls/jsapi ./agscommon".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E,F,G,H,L,J,S,P,Q,M,N,K,X,da,Y,aa,ca,I,T,ba,pa,ya,Da,Ha,ta,xa,ra,Aa,ua,Ja,ha,ma,R,Ea,Ia){var ea=z.defaults,Ya=!!q("esri-pbf"),Xa=!!q("esri-featurelayer-pbf"),Ba=a(ca,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",reSQLCurrentTimestamp:/current_timestamp|current_date|current_time/i,reHostedFS:/(https?:)?\/\/services.*\.arcgis\.com/i,maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,
maxVertexCountForAuto:25E4,generalizeForScale:4E3,_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error",
"info"]},constructor:function(U,la){this._preventInit||this._initFeatureLayer(U,la)},_initFeatureLayer:function(U,la){la=la||{};this._tileWidth=la.tileWidth||512;this._tileHeight=la.tileHeight||512;this.i18n=Ia;this._featureReduction=this._featureReduction||la.featureReduction;this._featureReductionEnabled=null!=la.featureReductionEnabled?la.featureReductionEnabled:!0;this._featureUpdatesCheckEnabled=null!=la.featureUpdatesCheckEnabled?la.featureUpdatesCheckEnabled:!0;this.showLabels=null!=la.showLabels?
la.showLabels:!0;this._outFields=la.outFields;this._defnExpr=la.definitionExpression;this._loadCallback=la.loadCallback;this._trackIdField=la.trackIdField;this.objectIdField=la.objectIdField;var na=null!=la.resolution,V=null!=la.maxAllowableOffset;this._maxOffset=this._optMaxOffset=na||V?na?la.resolution:la.maxAllowableOffset:this.maxAllowableOffset;this.quantize=null!=la.quantize?la.quantize:!0;this._optEditable=la.editable;this._optAutoGen=la.autoGeneralize;this.editSummaryCallback=la.editSummaryCallback;
this.userId=la.userId;this.userIsAdmin=la.userIsAdmin;this.useMapTime=la.hasOwnProperty("useMapTime")?!!la.useMapTime:!0;this.source=la.source;this.gdbVersion=la.gdbVersion;this.orderByFields=la.orderByFields;this.maxPointCountForAuto=null!=la.maxPointCountForAuto?la.maxPointCountForAuto:this.maxPointCountForAuto;this.maxRecordCountForAuto=null!=la.maxRecordCountForAuto?la.maxRecordCountForAuto:this.maxRecordCountForAuto;this.maxVertexCountForAuto=null!=la.maxVertexCountForAuto?la.maxVertexCountForAuto:
this.maxVertexCountForAuto;this.generalizeForScale=null!=la.generalizeForScale?la.generalizeForScale:this.generalizeForScale;this.queryPagination=this._optQueryPagination=null!=la.queryPagination?la.queryPagination:!0;this.multipatchOption=la.multipatchOption;this.subtypeSublayerInfo=la.subtypeSublayerInfo;this._selectedFeatures={};this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();na=B.isDefined(la.mode)?la.mode:Ba.MODE_ONDEMAND;this._isStream&&(na=Ba.MODE_STREAM);this.mode=
na;switch(na){case Ba.MODE_SNAPSHOT:this.currentMode=Ba.MODE_SNAPSHOT;this._mode=new ra(this);break;case Ba.MODE_ONDEMAND:case Ba.MODE_AUTO:this.currentMode=Ba.MODE_ONDEMAND;this._mode=new Aa(this);this.latticeTiling=la.latticeTiling;break;case Ba.MODE_SELECTION:this.currentMode=Ba.MODE_SELECTION;this._mode=new ua(this);this._isSelOnly=!0;break;case Ba.MODE_STREAM:this.currentMode=Ba.MODE_STREAM,this._mode=new Ja(this),this._isStream=!0}this._initLayer=g.hitch(this,this._initLayer);this._selectHandler=
g.hitch(this,this._selectHandler);this._editable=!1;if(g.isObject(U)&&U.layerDefinition)return this._collection=!0,this.mode=this._isStream?Ba.MODE_STREAM:Ba.MODE_SNAPSHOT,this._isStream||this._outFields||(this._outFields=["*"]),this._initLayer(U),this;this.source&&(na={source:this.source.toJson()},this._url.query=g.mixin(this._url.query,{layer:e.toJson(na)}));this.gdbVersion&&(this._url.query=g.mixin(this._url.query,{gdbVersion:this.gdbVersion}));this._task=new Q(this.url,{source:this.source,gdbVersion:this.gdbVersion});
na=this._url.path;this._fserver=!1;-1!==na.search(/\/FeatureServer\//i)&&(this._fserver=!0);this._checkFeatureLimit();(V=la.resourceInfo)?this._initLayer(V):w({url:na,content:g.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});this.registerConnectEvents()},_initLayer:function(U,la){if(U||la){this._json=U;var na=this.subtypeSublayerInfo;this._findCredential();if(this.credential&&this.credential.ssl||U&&U._ssl)this._useSSL(),this._task._useSSL();
this._collection&&(this._isStream||(this.currentMode=Ba.MODE_SNAPSHOT,this._mode=new ra(this)),this._featureSet=U.featureSet,this._nextId=U.nextObjectId,U=U.layerDefinition);this.version=U.currentVersion;this.version||(this.version="capabilities"in U||"drawingInfo"in U||"hasAttachments"in U||"htmlPopupType"in U||"relationships"in U||"timeInfo"in U||"typeIdField"in U||"types"in U?10:9.3);this.geometryType=U.geometryType;U.bandCount&&U.fields&&1<U.fields.length&&(this.geometryType="esriGeometryPolygon",
this._isImageService=!0);"string"!==typeof this.multipatchOption&&"esriGeometryMultiPatch"===this.geometryType&&(this.multipatchOption="xyFootprint");if(U.hasOwnProperty("capabilities")){var V=this.capabilities=U.capabilities;V&&-1!==V.toLowerCase().indexOf("editing")?this._editable=!0:this._editable=!1}else this._collection||(this._editable=this._fserver);B.isDefined(this._optEditable)?(this._editable=this._optEditable,delete this._optEditable):"esriGeometryMultiPatch"===this.geometryType&&(this._editable=
!1);this._isImageService&&(this._editable=!1);this._json=e.toJson(this._json);this.isEditable()?this._setMaxOffset(null):this._canAutoGeneralize()&&(this._autoGeneralize=B.isDefined(this._optAutoGen)?this._optAutoGen:this.mode===Ba.MODE_ONDEMAND||this.mode===Ba.MODE_AUTO,delete this._optAutoGen);V=U.effectiveMinScale||U.minScale;var fa=U.effectiveMaxScale||U.maxScale;!this._hasMin&&V&&this.setMinScale(V);!this._hasMax&&fa&&this.setMaxScale(fa);this.layerId=U.id;this.name=na&&na.title||U.name;this.description=
U.description;this.copyright=U.copyrightText;this.type=U.type;this.displayField=U.displayField;this.defaultDefinitionExpression=U.definitionExpression||(U.isView?U.viewDefinitionQuery:U.definitionQuery);this.fullExtent=new X(U.extent);this.initialExtent=new X(this.fullExtent.toJson());this.fullExtent.spatialReference&&(this.spatialReference=new u(this.fullExtent.spatialReference.toJson()));this.defaultVisibility=U.defaultVisibility;this.editingInfo=U.editingInfo;this.supportsLastEditDate=!(!this.editingInfo||
null==this.editingInfo.lastEditDate);if("esriGeometryPoint"===this.geometryType||"esriGeometryMultipoint"===this.geometryType)this.latticeTiling=!1;this.hasM=U.hasM||!1;this.hasZ=U.hasZ||!1;this.indexedFields=U.indexedFields;this.indexes=U.indexes;this.maxRecordCount=U.maxRecordCount;this.canModifyLayer=U.canModifyLayer;this.supportsStatistics=U.supportsStatistics;this.supportsAdvancedQueries=this._collection?!1:U.supportsAdvancedQueries;this.supportsCalculate=U.supportsCalculate;this.supportsASyncCalculate=
U.supportsASyncCalculate;this.supportsAttachmentsByUploadId=U.supportsAttachmentsByUploadId;this.supportsCoordinatesQuantization=U.supportsCoordinatesQuantization;this.supportsQuantizationEditMode=U.supportsQuantizationEditMode;this.supportsFieldDescription=U.supportsFieldDescriptionProperty;this.supportsFormatPBF=U.supportedQueryFormats?-1!==d.map(U.supportedQueryFormats.toLowerCase().split(","),g.trim).indexOf("pbf"):!1;this.quantize=this.quantize&&this.supportsCoordinatesQuantization;this.hasLabels=
U.hasLabels;this.canScaleSymbols=U.canScaleSymbols;this.supportsRollbackOnFailureParameter=this.supportsRollbackOnFailure=U.supportsRollbackOnFailure;this.syncCanReturnChanges=U.syncCanReturnChanges;this.isDataVersioned=U.isDataVersioned;this.editFieldsInfo=U.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=U.ownershipBasedAccessControlForFeatures;this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures&&(this.creatorField=this.editFieldsInfo.creatorField);this.relationships=U.relationships;
this.allowGeometryUpdates=B.isDefined(U.allowGeometryUpdates)?U.allowGeometryUpdates:!0;this.allowUpdateWithoutMValues=!!U.allowUpdateWithoutMValues;this.enableZDefaults=!!U.enableZDefaults;this.zDefault=B.isDefined(U.zDefault)?U.zDefault:null;this.advancedQueryCapabilities=U.advancedQueryCapabilities||{supportsStatistics:this.supportsStatistics,supportsOrderBy:this.supportsAdvancedQueries,supportsDistinct:this.supportsAdvancedQueries};this.geometryProperties=U.hasGeometryProperties&&U.geometryProperties||
null;this.url&&(this.advancedQueryCapabilities.supportsPagination=this.advancedQueryCapabilities.supportsPagination&&(this.reHostedFS.test(this.url)||10.3<this.version));this.queryPagination=this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination;this.useStandardizedQueries=U.useStandardizedQueries;this.tileMaxRecordCount=U.tileMaxRecordCount;this.standardMaxRecordCount=U.standardMaxRecordCount;if(V=U.dateFieldsTimeReference)this.dateFieldsTimeReference=new ba(V);this._setMaxOffset(this._maxOffset,
!0);this._isTable="Table"===this.type;fa=U.fields;this._createFields(fa);if(!this.objectIdField&&(this.objectIdField=U.objectIdField,!this.objectIdField))for(fa=U.fields,V=0;V<fa.length;V++){var qa=fa[V];if("esriFieldTypeOID"===qa.type){this.objectIdField=qa.name;break}}if(!B.isDefined(this._nextId)){fa=this.objectIdField;qa=-1;if(this._collection&&fa){var va=(V=this._featureSet)&&V.features,Fa=va?va.length:0;for(V=0;V<Fa;V++){var Ca=(Ca=va[V].attributes)&&Ca[fa];Ca>qa&&(qa=Ca)}}this._nextId=qa+1}this.globalIdField=
U.globalIdField;if(V=this.typeIdField=U.typeIdField)if(V=!this._getField(V)&&this._getField(V,!0))this.typeIdField=V.name;this.visibilityField=U.visibilityField;if(fa=U.defaultSymbol)this.defaultSymbol=G.fromJson(fa);var La=this.types=[],Wa=U.types;qa=(V=this.editFieldsInfo)&&V.creatorField;va=V&&V.editorField;Ca=qa||va;Fa=[];if(Wa)for(V=0;V<Wa.length;V++){var Va=new pa(Wa[V]);var Ma=Va.templates;Ca&&Ma&&Ma.length&&(Fa=Fa.concat(Ma));La.push(Va)}Wa=U.templates;Va=this.templates=[];if(Wa)for(V=0;V<
Wa.length;V++)La=new ya(Wa[V]),Ca&&Fa.push(La),Va.push(La);for(V=0;V<Fa.length;V++)if(Ca=g.getObject("prototype.attributes",!1,Fa[V]))qa&&delete Ca[qa],va&&delete Ca[va];if(V=U.subtypeField)this.subtypeField=(V=this.getField(V))?V.name:null;this.defaultSubtypeCode=U.defaultSubtypeCode;this.subtypes=d.map(U.subtypes,function(tb){return new Da(tb)});this._applySTSublayerInfo(na);if(na=U.timeInfo)this.timeInfo=new T(na),this._startTimeField=na.startTimeField,this._endTimeField=na.endTimeField,this._startTimeField&&
this._endTimeField&&(this._twoTimeFields=!0),this._trackIdField?na.trackIdField=this._trackIdField:this._trackIdField=na.trackIdField;this.hasAttachments=!this._collection&&U.hasAttachments?!0:!1;this.htmlPopupType=U.htmlPopupType;na=U.drawingInfo;(V=na&&na.labelingInfo)&&!this.labelingInfo&&(this.labelingInfo=d.map(V,function(tb){return new ta(tb)}),this._fixLabelExpr());if(!this.renderer)if(na&&na.renderer){var eb=na.renderer;this.setRenderer(J.fromJson(eb,{geometryType:this.geometryType}));"classBreaks"===
eb.type&&this.renderer.setMaxInclusive(!0);if(!this._collection){var ib=eb.type;V=[];eb=this.renderer;switch(ib){case "simple":V.push(eb.symbol);break;case "uniqueValue":case "classBreaks":V.push(eb.defaultSymbol),V=V.concat(d.map(eb.infos,function(tb){return tb.symbol}))}V=d.filter(V,B.isDefined);var lb=this._url.path+"/images/",rb=this._getToken();d.forEach(V,function(tb){var Ab=tb.url;Ab&&(-1===Ab.search(/https?:/)&&-1===Ab.indexOf("data:")&&(tb.url=lb+Ab),rb&&-1!==tb.url.search(/https?:/)&&(tb.url+=
"?token\x3d"+rb))})}}else if(fa)Wa=this.types,0<Wa.length?(eb=new L(this.defaultSymbol,this.typeIdField),d.forEach(Wa,function(tb){eb.addValue(tb.id,tb.symbol)})):eb=new H(this.defaultSymbol),this.setRenderer(eb);else if(!this._isTable){switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":ib=new C;break;case "esriGeometryPolyline":ib=new E;break;case "esriGeometryPolygon":ib=new F;break;default:this.hasXYFootprint()&&(ib=new F)}this.setRenderer(ib?new H(ib):null)}ib=na&&
na.transparency||0;!this.hasOwnProperty("opacity")&&0<ib&&(this.opacity=1-ib/100);(q("ie")||7<=q("trident")||q("safari"))&&this.isEditable()&&10.02>this.version&&(this._ts=!0);this.statistics=U.statistics;this._fixRendererFields();this._updateRequiredFieldsFromLabelingInfo();this._checkFields();this._updateCaps();var sb=function(){null==this._maxOffset||this._isFractionalOffsetAllowed()||this._setMaxOffset(this._maxOffset);this.loaded=!0;this.setFeatureReduction(this.getFeatureReduction());this.currentMode!==
Ba.MODE_SNAPSHOT&&(this.queryPagination=!1);this.onLoad(this);var tb=this._loadCallback;tb&&(delete this._loadCallback,tb(this))};ib=[];this._collection?(na=this._featureSet,this._featureSet=null,this._mode._drawFeatures(new N(na)),this._fcAdded=!0):(ib.push(this._forceIdentity()),this._limitPromise&&ib.push(this._limitPromise));ib.push(this._evalArcadeSupport());ib.length?y(ib).then(g.hitch(this,function(){sb.call(this)})):sb.call(this)}},_applySTSublayerInfo:function(U){U&&this.subtypeField&&(this.subtypeCode=
U.subtypeCode,this._applySTSublayerDefinitionExpression(U),this._filterSubtypes(U),this._applySTTemplates(U),this._applySTFieldOverrides(U))},_applySTSublayerDefinitionExpression:function(U){var la=[],na=this.getDefinitionExpression();na&&la.push(na);(U=U.layerDefinition&&U.layerDefinition.definitionExpression)&&la.push(U);1<la.length&&(la=d.map(la,function(V){return"("+V+")"}));this.setDefinitionExpression(la.length?la.join(" AND "):null)},_applySTTemplates:function(U){if(U=U.layerDefinition&&U.layerDefinition.templates)this.templates=
d.map(U,function(la){return new ya(la)})},_filterSubtypes:function(){this.subtypes&&(this.subtypes=d.filter(this.subtypes,function(U){return U.code===this.subtypeCode},this))},_applySTFieldOverrides:function(U){var la=U.layerDefinition&&U.layerDefinition.fieldOverrides;if(la){this.fields=d.filter(this.fields,function(V){return d.some(la,function(fa){return fa.name===V.name})});var na=this.getSubtypeByCode(this.subtypeCode).domains;this.fields.forEach(function(V){var fa=d.filter(la,function(qa){return qa.name===
V.name})[0];fa.alias&&(V.alias=fa.alias);if(!1===fa.editable||V.name===this.subtypeField)V.editable=!1;na&&(fa=na[V.name])&&"inherited"!==fa.type&&(V.domain=xa.fromJson(fa.toJson()))},this)}},setShowLabels:function(U){var la=this.showLabels;this.showLabels=U;la!==this.showLabels&&(this._evalSurfaceType(),this.onShowLabelsChange())},onShowLabelsChange:function(){},onRendererChange:function(U){this.inherited(arguments);var la=this._map;this._ager=!!(U&&U.observationAger&&U.observationRenderer);U&&"colors"in
U&&"blurRadius"in U&&"maxPixelIntensity"in U?(this._evalSurfaceType(!0),"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&la&&(this._heatmapManager=new R(this),this._heatmapManager.initialize(la))):this.renderer&&this.renderer.getRendererInfo?d.some(this.renderer.rendererInfos,function(fa){return fa.renderer&&"colors"in fa.renderer&&"blurRadius"in fa.renderer})||(this._heatmapManager=null):this._heatmapManager=null;this.timeInfo&&la&&(U&&(U.latestObservationRenderer||U.trackRenderer)?
this._trackManager||(this._trackManager=new ma(this),this._trackManager.initialize(la),this._childLayer=this._trackManager.container,this._mode._applyTimeFilter()):this._trackManager&&!this._isStream&&(this._trackManager.destroy(),this._trackManager=null));if(U){var na=[];la=d.filter([U,U.observationRenderer,U.latestObservationRenderer,U.trackRenderer],B.isDefined);var V=function(fa){return null!=fa&&"function"!=typeof fa&&fa};d.forEach(la,function(fa){var qa=V(fa.attributeField),va=V(fa.attributeField2);
fa=V(fa.attributeField3);!1!==qa&&na.push(qa);!1!==va&&na.push(va);!1!==fa&&na.push(fa)});this._requiredFields=na}else this._requiredFields=[];this.loaded&&(this._fixRendererFields(),this._checkFields(this._requiredFields),this._collection&&(this._typesDirty=!0))},setFeatureReduction:function(U){U&&(U=g.mixin({},U),null!=U.clusterSize&&null==U.clusterRadius&&(U.clusterRadius=U.clusterSize),delete U.clusterSize);this.loaded?this._isFeatureReductionSupported(U)?this._featureReduction=U:this._featureReduction=
null:this._featureReduction=U;this._evalFeatureReduction(this._featureReduction)},hasFeatureReduction:function(){return!!this._featureReduction},getFeatureReduction:function(){var U=this._featureReduction;if(U){U=g.mixin({},U);var la=this._clusterManager;if(la=la&&la.aggregationInfo)U.clusterRadius=la.clusterRadius,U.infoTemplate=la.infoTemplate}return U},isFeatureReductionActive:function(){var U=this._clusterManager;return!!(U&&U.isClusteringEnabled()&&U.isClusteringActive())},isFeatureReductionEnabled:function(){return this._featureReductionEnabled},
enableFeatureReduction:function(){this._featureReductionEnabled||(this._featureReductionEnabled=!0,this._evalFeatureReduction(this._featureReduction))},disableFeatureReduction:function(){this._featureReductionEnabled&&(this._featureReductionEnabled=!1,this._evalFeatureReduction(this._featureReduction))},isFeatureReductionApplied:function(){return this.hasFeatureReduction()&&this.isFeatureReductionEnabled()&&this._canCluster(this.getFeatureReduction())},getAggregateGraphics:function(){return this._clusterManager?
this._clusterManager.getAggregateGraphics():[]},getChildGraphics:function(U){return this._clusterManager?this._clusterManager.getFeaturesInCluster(U):[]},getSingleGraphics:function(){return this._clusterManager?this._clusterManager.getSingleGraphics():[]},getFeatureReductionRenderer:function(){return this.isFeatureReductionActive()?this._clusterManager.getClusterRenderer():null},getFeatureReductionLayer:function(){return this._clusterManager?this._clusterManager.container:null},getFeatureReductionField:function(U){var la,
na=this._clusterManager?this._clusterManager.getClusterFields():null;U=U?U.toLowerCase():"";d.some(na,function(V){U===V.name.toLowerCase()&&(la=V);return!!la});return la},_isFeatureReductionSupported:function(U){return U&&"cluster"===U.type&&"esriGeometryPoint"===this.geometryType&&(this._collection||this._isStream||this._optQueryPagination&&this.advancedQueryCapabilities.supportsPagination)},_isReductionCompatibleRenderer:function(U){U=U&&U.declaredClass||"";U=U.toLowerCase();return-1<U.indexOf("simplerenderer")||
-1<U.indexOf("classbreaksrenderer")||-1<U.indexOf("uniquevaluerenderer")},_evalFeatureReduction:function(U){this.loaded&&this.getMap()&&(U=U||this.getFeatureReduction(),this._evalModeFromFReduction(U),U&&this.isFeatureReductionEnabled()?this._canCluster(U)?this._clusterManager?this._updateClusterManager(U):(this._clusterManager=this._createClusterManager(U),this.onFeatureReductionChange()):this._destroyClusterManager():this._destroyClusterManager())},_canCluster:function(U){var la=this._map;if(!la)return!1;
la=la.spatialReference;return this._isFeatureReductionSupported(U)&&this._isReductionCompatibleRenderer(this.renderer)&&(la.isWebMercator()||4326===la.wkid)},_createClusterManager:function(U){U=new Ea({layer:this,aggregationInfo:U});this._clusterHandles=[U.on("renderer-change",g.hitch(this,function(){this.onFeatureReductionRendererChange()}))];U.initialize(this._map);return U},_updateClusterManager:function(U){var la=this._clusterManager;la&&la.setAggregationInfo(U)},_destroyClusterManager:function(U){d.forEach(this._clusterHandles,
function(la){la.remove()});this._clusterHandles=null;this._clusterManager&&(this._clusterManager.destroy(U),this._clusterManager=null,this.onFeatureReductionChange())},redraw:function(){this.inherited(arguments);this._clusterManager&&this._clusterManager.redraw();this._trackManager&&this._trackManager.container&&this._trackManager.container.redraw()},_evalSDRenderer:function(U){this.inherited(arguments);var la=this._getRenderer();this._ager=!!(la&&la.observationAger&&la.observationRenderer);this._trackManager&&
this._trackManager.container&&this._trackManager.container.setRenderer(la&&la.trackRenderer);U&&this._evalFeatureReduction()},_graphicVisibilityChanged:function(U){this._clusterManager?this._clusterManager.toggleFeatureVisibility(U):this._heatmapManager&&this._heatmapManager.redraw()},setWebGLFetchOptions:function(U){this._hasOnDemandDrillMode()&&(U=U||{},null!=U.maxDrillLevel&&(this._mode.maxDrillLevel=U.maxDrillLevel),null!=U.maxRecordCountFactor&&(this._mode.maxRecordCountFactor=U.maxRecordCountFactor),
null!=U.enablePBFQuery&&(this._mode.enablePBFQuery=U.enablePBFQuery))},_isWebGLCompatible:function(){return this.loaded&&!this.isEditable()&&!this.isFeatureReductionApplied()&&(!this.labelingInfo||!1===this.showLabels)&&!this._isGeometryOperationsUsed()&&this._isRendererSupportedInWebGL()&&this.supportsCoordinatesQuantization&&("esriGeometryPolygon"!==this.geometryType||this.advancedQueryCapabilities.supportsReturningGeometryCentroid)&&this.currentMode===Ba.MODE_ONDEMAND&&(!this._preSurfaceChangeState||
this._preSurfaceChangeState.currentMode===Ba.MODE_ONDEMAND)},_isRendererSupportedInWebGL:function(){if(!this.renderer)return!1;var U=this.renderer,la=U.declaredClass?U.declaredClass.toLowerCase():"";return(-1<la.indexOf("simplerenderer")||-1<la.indexOf("classbreaksrenderer")||-1<la.indexOf("uniquevaluerenderer"))&&this._hasWebGLCompatibleSymbols(U)&&this._hasWebGLCompatibleVVs(U)},_hasWebGLCompatibleSymbols:function(U){U=this._getAllSymbolsInRenderer(U);return!(this._hasSLSWithMarker(U)||this._hasIncompatibleSMSStyles(U)||
this._hasGIFMarker(U))},_hasWebGLCompatibleVVs:function(U){return!d.some(U&&U.visualVariables,function(la){var na=la.type;return("colorInfo"===na||"opacityInfo"===na)&&la.stops&&8<la.stops.length||"sizeInfo"===na&&(la.field||la.valueExpression&&"$view.scale"!==la.valueExpression||la.expression&&"view.scale"!==la.expression)&&la.stops&&6<la.stops.length?!0:!1})},_hasSLSWithMarker:function(U){return d.some(U,function(la){return la&&"simplelinesymbol"===la.type&&!!la.marker})},_hasIncompatibleSMSStyles:function(U){var la=
void 0===q("ie")&&7==q("trident");return d.some(U,function(na){return na&&"simplemarkersymbol"===na.type&&("triangle"===na.style||"path"===na.style&&la)})},_hasGIFMarker:function(U){var la=/\.gif$/,na=/^image\/gif$/;return d.some(U,function(V){return V&&"picturemarkersymbol"===V.type?la.test(V.url)||na.test(V.contentType):!1})},_getAllSymbolsInRenderer:function(U){var la=[];U&&(la.push(U.symbol),la.push(U.defaultSymbol),d.forEach(U.infos,function(na){la.push(na.symbol)}),la=d.filter(la,function(na){return!!na}));
return la},_setMap:function(U){var la=this.inherited(arguments),na=this._mode,V=this;na&&U.loaded&&na.initialize(U);this.geometryType&&this.attr("data-geometry-type",this.geometryType.replace(/esriGeometry/i,"").toLowerCase());this._addHandle=this.on("graphic-node-add",function(fa){fa=fa.graphic.attributes;(fa=V._selectedFeatures[fa&&fa[V.objectIdField]])&&fa.attr("data-selected","")});return la},_unsetMap:function(U){this._suspendImpl(!0);this._destroyClusterManager(!1);this._trackManager&&(this._trackManager.destroy(),
this._trackManager=null);b.disconnect(this._zoomConnect);b.disconnect(this._addHandle);this._zoomConnect=this._addHandle=null;this.inherited("_unsetMap",arguments)},onAttach:function(){this._evalModeFromSurface()},onRefreshTick:function(){this.isFeatureUpdatesCheckActive()&&this._evalFeatureUpdates()},refresh:function(U){!this._needsRefresh&&U&&U.scheduled&&this.isFeatureUpdatesCheckActive()||(this._needsRefresh=!1,(U=this._mode)&&U.refresh())},setFeatureUpdatesCheckEnabled:function(U){this._featureUpdatesCheckEnabled=
U},isFeatureUpdatesCheckEnabled:function(){return!!this._featureUpdatesCheckEnabled},isFeatureUpdatesCheckActive:function(){return this.supportsLastEditDate&&this.isFeatureUpdatesCheckEnabled()&&!!this.refreshInterval&&!!g.getObject("onFeatureUpdatesResult.after",!1,this)},hasFeatureUpdates:function(){var U=new f;if(!this.supportsLastEditDate)return U.reject(Error("FeatureLayer does not support supportsLastEditDate")),U.promise;if(!this._fetchMetadataPromise||this._fetchMetadataPromise.isFulfilled())this._fetchMetadataPromise=
w({url:this._url.path,content:g.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(g.hitch(this,function(la){la=la.editingInfo.lastEditDate;var na=this.editingInfo.lastEditDate!==la;this.editingInfo.lastEditDate=la;return na}));this._fetchMetadataPromise.then(function(la){U.isFulfilled()||U.resolve(la)}).otherwise(function(la){U.isFulfilled()||U.reject(la)});return U.promise},hasXYFootprint:function(){return"esriGeometryMultiPatch"===this.geometryType&&"xyFootprint"===this.multipatchOption},
getOutFields:function(){return d.filter(this._getOutFields(),function(U){return"*"===U||!!this._getField(U)},this)},getField:function(U){return this._getField(U,!0)},isOutField:function(U){U=this.getField(U);if(!U)return!1;var la=this.getOutFields();return-1<d.indexOf(la,"*")||-1<d.indexOf(la,U.name)},getFieldLabel:function(U){var la=this.infoTemplate;la=la&&la.getFieldInfo&&la.getFieldInfo(U);U=g.isFunction(U)?null:this.getField(U);var na=la||U,V="";na&&(V=la&&la.label||U&&U.alias||na.name||na.fieldName);
return V},getDomain:function(U,la){var na,V,fa=la&&la.feature,qa=fa&&this.typeIdField&&fa.attributes&&fa.attributes[this.typeIdField];null!=qa&&d.some(this.types,function(va){return va.id==qa?((na=va.domains&&va.domains[U])&&"inherited"===na.type&&(na=this._getLayerDomain(U),V=!0),!0):!1},this);V||na||(na=this._getLayerDomain(U));return na},_getLayerDomain:function(U){this._createFieldsIndex();var la=this._fieldsIndex;if(la)return la=la.caseSensitive,(la=la.get(U))?la.domain:null;var na;d.some(this.fields,
function(V){V.name===U&&(na=V.domain);return!!na});return na},getType:function(U){return this.getTypeById(U&&this.typeIdField&&U.attributes&&U.attributes[this.typeIdField])},getTypeById:function(U){var la;d.some(this.types,function(na){na.id==U&&(la=na);return!!la});return la},getSubtypeByCode:function(U){var la;d.some(this.subtypes,function(na){na.code==U&&(la=na);return!!la});return la},setEditable:function(U){if(!this._collection||this._isImageService)return this;if(!this.loaded)return this._optEditable=
U,this;var la=this._editable;this._editable=U;this._updateCaps();if(la!==U)this.onCapabilitiesChange();return this},getEditCapabilities:function(U){var la={canCreate:!1,canUpdate:!1,canDelete:!1,canUpdateGeometry:!1};if(!this.loaded||!this.isEditable())return la;var na=U&&U.feature;U=U&&U.userId||this.getUserId();var V=d.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],g.trim),fa=(la=-1<d.indexOf(V,"editing"))&&-1<d.indexOf(V,"create"),qa=la&&-1<d.indexOf(V,"update");V=la&&-1<d.indexOf(V,
"delete");var va=this.ownershipBasedAccessControlForFeatures,Fa=this.editFieldsInfo,Ca=Fa&&Fa.creatorField;Fa=Fa&&Fa.realm;na=(na=na&&na.attributes)&&Ca?na[Ca]:void 0;var La=!!this.userIsAdmin;Ca=!va||La||!(!va.allowOthersToUpdate&&!va.allowUpdateToOthers);var Wa=!va||La||!(!va.allowOthersToDelete&&!va.allowDeleteToOthers),Va=!va||La||!va.hasOwnProperty("allowAnonymousToUpdate")||va.allowAnonymousToUpdate;va=!va||La||!va.hasOwnProperty("allowAnonymousToDelete")||va.allowAnonymousToDelete;U&&Fa&&(U=
U+"@"+Fa);if(La||la&&!(fa||qa||V))fa=qa=V=!0;la={canCreate:fa,canUpdate:qa,canDelete:V,canUpdateGeometry:La||this.allowGeometryUpdates};U||(la.canUpdate=la.canUpdate&&Va,la.canDelete=la.canDelete&&va);null===na?(la.canUpdate=la.canUpdate&&Ca,la.canDelete=la.canDelete&&Wa):""!==na&&na&&U.toLowerCase()!==na.toLowerCase()&&(la.canUpdate=la.canUpdate&&Ca,la.canDelete=la.canDelete&&Wa);return la},getUserId:function(){var U;this.loaded&&(U=this.credential&&this.credential.userId||this.userId||"");return U},
setUserIsAdmin:function(U){this.userIsAdmin=U},setEditSummaryCallback:function(U){this.editSummaryCallback=U},getEditSummary:function(U,la,na){na=B.isDefined(na)?na:(new Date).getTime();var V="";na=this.getEditInfo(U,la,na);(la=la&&la.callback||this.editSummaryCallback)&&(na=la(U,na)||"");if(g.isString(na))V=na;else{if(na){U=na.action;la=na.userId;var fa=na.timeValue,qa=0;U&&qa++;la&&qa++;B.isDefined(fa)&&qa++;1<qa&&(V=("edit"===U?"edit":"create")+(la?"User":"")+(B.isDefined(fa)?na.displayPattern:
""))}V=V&&B.substitute(na,this.i18n.layers.FeatureLayer[V])}return V},getEditInfo:function(U,la,na){if(this.loaded){na=B.isDefined(na)?na:(new Date).getTime();la=la&&la.action||"last";var V=this.editFieldsInfo,fa=V&&V.creatorField,qa=V&&V.creationDateField,va=V&&V.editorField;V=V&&V.editDateField;va=(U=U&&U.attributes)&&va?U[va]:void 0;V=U&&V?U[V]:null;fa=this._getEditData(U&&fa?U[fa]:void 0,U&&qa?U[qa]:null,na);na=this._getEditData(va,V,na);switch(la){case "creation":var Fa=fa;break;case "edit":Fa=
na;break;case "last":Fa=na||fa}Fa&&(Fa.action=Fa===na?"edit":"creation");return Fa}},_getEditData:function(U,la,na){if(B.isDefined(la)){var V=na-la;var fa=0>V?"Full":6E4>V?"Seconds":12E4>V?"Minute":36E5>V?"Minutes":72E5>V?"Hour":864E5>V?"Hours":6048E5>V?"WeekDay":"Full"}if(void 0!==U||fa){var qa=qa||{};qa.userId=U;fa&&(U=n.format,na=new Date(la),qa.minutes=Math.floor(V/6E4),qa.hours=Math.floor(V/36E5),qa.weekDay=U(na,{datePattern:"EEEE",selector:"date"}),qa.formattedDate=U(na,{selector:"date"}),qa.formattedTime=
U(na,{selector:"time"}),qa.displayPattern=fa,qa.timeValue=la)}return qa},isEditable:function(){return!(!this._editable&&!this.userIsAdmin)},isQueryable:function(){var U=d.map(this.capabilities?this.capabilities.toLowerCase().split(","):[],g.trim);return this._isStream||this.userIsAdmin||this._collection||-1!==d.indexOf(U,"query")||-1!==d.indexOf(U,"catalog")},setResolution:function(U){return this.setMaxAllowableOffset(U)},setMaxAllowableOffset:function(U){this.isEditable()||(this._optMaxOffset=U,
this._setMaxOffset(U,!0));return this},_resetMaxAllowableOffset:function(){this.setMaxAllowableOffset(this._optMaxOffset);this._prevScale=null;this._refreshMaxAllowableOffset()},_refreshMaxAllowableOffset:function(){this._calcMaxOffsetForAutoSnapshot();this._updateMaxOffset();this._needsRefresh=!1},getResolution:function(){return this.getMaxAllowableOffset()},getMaxAllowableOffset:function(){var U=this._quantizationParameters?this._quantizationParameters.tolerance:void 0;return null!=this._maxOffset?
this._maxOffset:U},_setMaxOffset:function(U,la){if(null==U)return delete this._maxOffset,delete this._quantizationParameters,this;this.quantize&&this.supportsCoordinatesQuantization?("esriGeometryPolyline"===this.geometryType?this._maxOffset=U:delete this._maxOffset,this._quantizationParameters=U?{mode:"view",originPosition:"upperLeft",tolerance:U,extent:this.fullExtent}:null):(this._isFractionalOffsetAllowed()&&la||(U=Math.floor(U)),isNaN(U)||0===U?delete this._maxOffset:this._maxOffset=U,delete this._quantizationParameters);
return this},_isFractionalOffsetAllowed:function(){return null==this.version||10.1<=this.version||navigator.languages&&this._isLangWithDot(navigator.languages[0])},_isLangWithDot:function(U){U=(U=U&&U.split("-"))&&U[0]&&U[0].toLowerCase();return-1!==d.indexOf(this._langsWithDot,U)},_langsWithDot:"ar en et fr he ja ko th vi zh".split(" "),setAutoGeneralize:function(U){this.loaded?this._canAutoGeneralize()&&((this._autoGeneralize=U)?(this._isAutoSnapshotMode()&&(this._prevScale=null),this._updateMaxOffset()):
this._setMaxOffset(null)):this._optAutoGen=U;return this},_canAutoGeneralize:function(){return!this.isEditable()&&this.mode!==Ba.MODE_SNAPSHOT},setGDBVersion:function(U){this._collection||U===this.gdbVersion||!U&&!this.gdbVersion||(this.gdbVersion=U,this._task.gdbVersion=U,this._url.query=g.mixin(this._url.query,{gdbVersion:U}),this.loaded&&(this.clearSelection(),this._map&&this.refresh()),this.onGDBVersionChange());return this},hasAllFeatures:function(){return this._mode?this._mode.hasAllFeatures():
!0},hasUpdateError:function(){return this._mode?this._mode.hasUpdateError():!1},setDefinitionExpression:function(U){this._defnExpr=U;this._hasPendingLimitQuery()||((U=this._checkFeatureLimit())?this._evalModeAndApplyDefnExpr(U):this._applyDefnExpr());return this},_applyDefnExpr:function(){var U=this._mode;U&&U.propertyChangeHandler(1)},_evalModeAndApplyDefnExpr:function(U){U.then(g.hitch(this,function(la){la&&(la instanceof Error||!la.modeChanged)&&this._applyDefnExpr()}))},getDefinitionExpression:function(){return this._defnExpr},
hasDefinitionExpressionWithCurrentTimestamp:function(){return this.reSQLCurrentTimestamp.test(this.getDefinitionExpression())},setTimeDefinition:function(U){this._isSnapshotMode()&&(this._timeDefn=U,(U=this._mode)&&U.propertyChangeHandler(2));return this},getTimeDefinition:function(){return this._timeDefn},setTimeOffset:function(U,la){this._timeOffset=U;this._timeOffsetUnits=la;var na=this._mode;na&&na.propertyChangeHandler(0);return this},setUseMapTime:function(U){this.useMapTime=U;this._toggleTime(!this.suspended);
(U=this._mode)&&U.propertyChangeHandler(0)},selectFeatures:function(U,la,na,V){la=la||Ba.SELECTION_NEW;this._hasSelectionError=this._hasPartialSelectedFeatures=!1;U=this._getShallowClone(U);var fa=this._map,qa=this,va=x._fixDfd(new f(x._dfdCanceller));U.outFields=this.getOutFields();U.returnGeometry=!0;U.multipatchOption=this.multipatchOption;fa&&(U.outSpatialReference=new u(fa.spatialReference.toJson()));if(!this._applyQueryFilters(U,!0)){var Fa={features:[]};this._selectHandler(Fa,la,na,V,va);return va}if(fa=
this._canDoClientSideQuery(U))va._pendingDfd=l(this._doQuery(U,fa)),va._pendingDfd.then(function(La){Fa={features:La};qa._selectHandler(Fa,la,na,V,va)});else{if(this._collection)return this._resolve([Error("FeatureLayer::selectFeatures - "+this.invalidParams)],null,V,va,!0),va;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,V,va,!0),va;var Ca=this;this._ts&&(U._ts=(new Date).getTime());fa=this._canFetchPBFForQuery(U);this._enableEditModeQuantization(U,
fa);(va._pendingDfd=this._task.execute(U,null,null,fa?{format:"pbf"}:null)).addCallbacks(function(La){Ca._selectHandler(La,la,na,V,va)},function(La){Ca._hasPartialSelectedFeatures=!0;Ca._hasSelectionError=!0;Ca._resolve([La],null,V,va,!0)})}return va},getSelectedFeatures:function(){var U=this._selectedFeatures,la=[],na;for(na in U)U.hasOwnProperty(na)&&la.push(U[na]);return la},clearSelection:function(U){var la=this._selectedFeatures,na=this._mode,V;for(V in la)la.hasOwnProperty(V)&&(this._unSelectFeatureIIf(V,
na),na._removeFeatureIIf(V));this._selectedFeatures={};this._isSelOnly&&na._applyTimeFilter(!0);if(!U)this.onSelectionClear();return this},setSelectionSymbol:function(U){if(this._selectionSymbol=U){var la=this._selectedFeatures,na;for(na in la)la.hasOwnProperty(na)&&la[na].setSymbol(U)}return this},getSelectionSymbol:function(){return this._selectionSymbol},setLabelingInfo:function(U){U?(this.labelingInfo=U,this._fixLabelExpr()):delete this.labelingInfo;this._collection&&(this._typesDirty=!0);this._evalSurfaceType();
this.onLabelingInfoChange()},_fixLabelExpr:function(){var U=/\[([^\[\]]+)\]/ig,la,na=this,V=function(fa,qa){var va=na._getField(qa,!0);return"["+(va&&va.name||qa)+"]"};d.forEach(this.labelingInfo,function(fa){if(la=fa.labelExpression)fa.labelExpression=la.replace(U,V)})},_updateRequiredFieldsFromLabelingInfo:function(){var U=[];d.forEach(this.labelingInfo,function(la){var na=la.labelExpressionInfo;if(la.labelExpression){var V=/[\[\]]/ig;la=la.labelExpression.match(/\[[^\[\]]+\]/ig);(la=d.map(la,function(qa){return qa.replace(V,
"")}))&&(U=U.concat(la))}if(na){if(na.value){var fa=/[\{\}]/ig;la=na.value.match(/\{[^\{\}]+\}/ig);(la=d.map(la,function(qa){return qa.replace(fa,"")}))&&(U=U.concat(la))}na.expression&&(la=d.map(this.fields,function(qa){return qa.name},this),U=U.concat(S.extractFieldNames(na.expression,la)))}},this);U=d.map(U,function(la){var na=this.getField(la);return na?na.name:la},this);this._requiredFields&&(this._requiredFields=this._requiredFields.concat(U))},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],
e:4,f:1}],applyEdits:function(U,la,na,V,fa,qa){var va=qa.assembly,Fa=qa.dfd;this._applyNormalized(U,va&&va[0]);this._applyNormalized(la,va&&va[1]);this.onBeforeApplyEdits(U,la,na);var Ca={},La=this.objectIdField;va={f:"json"};var Wa=!1;if(this._collection)qa={},qa.addResults=U?d.map(U,function(){Wa=!0;return{objectId:this._nextId++,success:!0}},this):null,qa.updateResults=la?d.map(la,function(eb){Wa=!0;var ib=eb.attributes[La];Ca[ib]=eb;return{objectId:ib,success:!0}},this):null,qa.deleteResults=
na?d.map(na,function(eb){Wa=!0;return{objectId:eb.attributes[La],success:!0}},this):null,Wa?this._editHandler(qa,U,Ca,V,fa,Fa):this._resolve([qa.addResults,qa.updateResults,qa.deleteResults],null,V,Fa);else{U&&0<U.length&&(va.adds=this._convertFeaturesToJson(U,0,1),Wa=!0);if(la&&0<la.length){for(qa=0;qa<la.length;qa++){var Va=la[qa];Ca[Va.attributes[La]]=Va}va.updates=this._convertFeaturesToJson(la,0,0,1);Wa=!0}if(na&&0<na.length){la=[];for(qa=0;qa<na.length;qa++)la.push(na[qa].attributes[La]);va.deletes=
la.join(",");Wa=!0}if(Wa){var Ma=this;return w({url:this._url.path+"/applyEdits",content:g.mixin(va,this._url.query),callbackParamName:"callback",load:function(eb){Ma._editHandler(eb,U,Ca,V,fa,Fa)},error:function(eb){Ma._resolve([eb],null,fa,Fa,!0)}},{usePost:!0})}this._resolve([],null,V,Fa)}},queryFeatures:function(U,la,na,V){return this._query("execute","onQueryFeaturesComplete",U,la,na,V)},queryRelatedFeatures:function(U,la,na){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",
U,la,na)},queryIds:function(U,la,na,V){return this._query("executeForIds","onQueryIdsComplete",U,la,na,V)},queryCount:function(U,la,na,V){return this._query("executeForCount","onQueryCountComplete",U,la,na,V)},queryExtent:function(U,la,na,V){return this._query("executeForExtent","onQueryExtentComplete",U,la,na,V)},queryAttachmentInfos:function(U,la,na){var V=this._url.path+"/"+U+"/attachments",fa=new f(x._dfdCanceller),qa=this;V=t.normalize(V);fa._pendingDfd=w({url:V,content:g.mixin({f:"json"},this._url.query),
callbackParamName:"callback",load:function(va){va=va.attachmentInfos;var Fa;d.forEach(va,function(Ca){Fa=h.objectToQuery({gdbVersion:qa._url.query&&qa._url.query.gdbVersion,layer:qa._url.query&&qa._url.query.layer,token:qa._getToken()});Ca.url=V+"/"+Ca.id+(Fa?"?"+Fa:"");Ca.objectId=U});qa._resolve([va],"onQueryAttachmentInfosComplete",la,fa)},error:function(va){qa._resolve([va],null,na,fa,!0)}});return fa},addAttachment:function(U,la,na,V){return this._sendAttachment("add",U,la,na,V)},updateAttachment:function(U,
la,na,V,fa){na.appendChild(k.create("input",{type:"hidden",name:"attachmentId",value:la}));return this._sendAttachment("update",U,na,V,fa)},deleteAttachments:function(U,la,na,V){var fa=this._url.path+"/"+U+"/deleteAttachments",qa=new f(x._dfdCanceller),va=this;la={f:"json",attachmentIds:la.join(",")};qa._pendingDfd=w({url:fa,content:g.mixin(la,this._url.query),callbackParamName:"callback",load:g.hitch(this,function(Fa){Fa=Fa.deleteAttachmentResults;Fa=d.map(Fa,function(Ca){Ca=new Ha(Ca);Ca.attachmentId=
Ca.objectId;Ca.objectId=U;return Ca});va._resolve([Fa],"onDeleteAttachmentsComplete",na,qa)}),error:function(Fa){va._resolve([Fa],null,V,qa,!0)}},{usePost:!0});return qa},addType:function(U){var la=this.types;if(la){if(d.some(la,function(na){return na.id==U.id?!0:!1}))return!1;la.push(U)}else this.types=[U];return this._typesDirty=!0},deleteType:function(U){if(this._collection){var la=this.types;if(la){var na=-1;d.some(la,function(V,fa){return V.id==U?(na=fa,!0):!1});if(-1<na)return this._typesDirty=
!0,la.splice(na,1)[0]}}},toJson:function(){var U=this._cloneJson();if(U){U=U.layerDefinition?U:{layerDefinition:U};var la=U.layerDefinition,na=this._collection;this._updateLayerDefinition(la);var V=null;if(!na||this._fcAdded)V={geometryType:la.geometryType,features:this._convertFeaturesToJson(this.graphics,!0)};U.featureSet=g.mixin({},U.featureSet||{},V);if(U.featureSet.transform){var fa=U.featureSet.transform;delete U.featureSet.transform;V=new N(U.featureSet);V.quantize(fa);U.featureSet=V.toJson()}na&&
(U.nextObjectId=this._nextId,la.capabilities=this.capabilities);return U}},getLayerDefinition:function(){var U=this._cloneJson();(U=U?U.layerDefinition||U:null)&&this._updateLayerDefinition(U);return U},getFeatureCollectionLayer:function(U){var la=new f,na=this.getLayerDefinition();if(!na)return la.reject(Error("layerDefinition not available")),la.promise;U=U||[];var V=new Ba({layerDefinition:na,featureSet:{geometryType:na.geometryType,features:d.map(U,function(va){return va.toJson()})}}),fa=V.on("load",
function(){fa.remove();qa.remove();la.resolve(V)}),qa=V.on("error",function(){V.loaded||(fa.remove(),qa.remove(),la.reject(V.loadError))});return la.promise},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryExtentComplete:function(){},onQueryAttachmentInfosComplete:function(){},
onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},onLabelingInfoChange:function(){},onFeatureReductionRendererChange:function(){},onFeatureReductionChange:function(){},onFeatureUpdatesResult:function(){},_cloneJson:function(){var U=this._json;return g.isString(U)?e.fromJson(U):g.clone(U)},_updateLayerDefinition:function(U){if(this._collection&&
this._typesDirty){U.types=d.map(this.types||[],function(fa){return fa.toJson()});var la=this.renderer,na=this.labelingInfo,V=U.drawingInfo;!la&&!na||V||(V=U.drawingInfo={});V&&la&&-1===la.declaredClass.indexOf("TemporalRenderer")&&(V.renderer=la.toJson());na&&(V.labelingInfo=d.map(na,function(fa){return fa.toJson()}))}},_evalFeatureUpdates:function(){if(!this._featureUpdatesPromise||this._featureUpdatesPromise.isFulfilled())this._featureUpdatesPromise=this.hasFeatureUpdates().otherwise(function(U){return!(U&&
"cancel"===U.dojoType)}).always(g.hitch(this,function(U){this._featureUpdatesPromise=null;this.onFeatureUpdatesResult({hasUpdates:U})}))},_evalRefresh:function(U){(U.hasUpdates||this.hasDefinitionExpressionWithCurrentTimestamp())&&this.refresh()},_evalArcadeSupport:function(){var U=new f;setTimeout(g.hitch(this,function(){this._initializeArcadeEngine().always(function(){U.resolve()})}),0);return U.promise},_initializeArcadeEngine:function(){var U=[],la=this.infoTemplate;la&&la.initializeArcadeEngine&&
U.push(la.initializeArcadeEngine());(la=this.renderer)&&la.initializeArcadeEngine&&U.push(la.initializeArcadeEngine());var na=[];d.forEach(this.labelingInfo,function(V){(V=V.labelExpressionInfo)&&V.expression&&na.push(V.expression)});U.push(P.initialize(na));return y(U)},_isGeometryOperationsUsed:function(){var U=this.infoTemplate,la=this.renderer,na=this.labelingInfo;return U&&U.hasGeometryOperations&&U.hasGeometryOperations()||la&&la.hasGeometryOperations&&la.hasGeometryOperations()||d.some(na,
function(V){return S.hasGeometryOperations(V.labelExpressionInfo&&V.labelExpressionInfo.expression)})?!0:!1},_forceIdentity:function(){var U=new f,la=this,na=this._url&&this._url.path;var V=na&&na.toLowerCase().indexOf("/rest/services");var fa=this.editFieldsInfo;fa=fa&&(fa.creatorField||fa.editorField);(this.userIsAdmin||fa)&&!this._getToken()&&-1<V&&v.id?(V=na.substring(0,V)+"/rest/info",w({url:V,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(qa){if(qa.owningSystemUrl)return v.id.checkSignInStatus(qa.owningSystemUrl+
"/sharing")}).then(function(qa){if(qa)return v.id.getCredential(na)}).then(function(qa){qa&&la._findCredential()}).always(function(){U.resolve()})):U.resolve();return U.promise},_isSnapshotMode:function(){return this._mode?this._mode.isInstanceOf(ra):!1},_isOnDemandMode:function(){return this._mode?this._mode.isInstanceOf(Aa):!1},_isAutoSnapshotMode:function(){return this._isAutoModeEnabled()&&this.currentMode===Ba.MODE_SNAPSHOT},_getMaxFeaturesForAutoSnapshotMode:function(){var U=this.geometryType;
if("esriGeometryPolyline"===U||"esriGeometryPolygon"===U||"esriGeometryMultipoint"===U||this.hasXYFootprint())var la=this.maxRecordCountForAuto;else"esriGeometryPoint"===U&&(la=this.maxPointCountForAuto);return la},getLastExceedsLimitResult:function(){return this._lastExceedsLimitResult},_canUseSnapshotMode:function(U){this._lastExceedsLimitResult=U=(U=U&&U.features&&U.features[0])&&U.attributes&&U.attributes.exceedslimit;return!(this.mode!==Ba.MODE_AUTO||this.isEditable()||0!==U||!(this._isPaginationAllowed()||
this.maxRecordCount>=this._getMaxFeaturesForAutoSnapshotMode()))},_evalModeFromFLimit:function(U){this._canUseSnapshotMode(U)?this._enableAutoSnapshotMode():this._enableAutoOnDemandMode()},_enableAutoSnapshotMode:function(){var U=Ba.MODE_SNAPSHOT;this.isFeatureReductionApplied()?this._updatePreFReductionState(U):this._preSurfaceChangeState?(this._updatePreSurfaceChangeState(U),this._evalSurfaceType(!0)):this.currentMode!==U&&this._setFetchMode(Ba.MODE_AUTO,U)},_enableAutoOnDemandMode:function(){var U=
Ba.MODE_ONDEMAND;this.isFeatureReductionApplied()?this._updatePreFReductionState(U):this._preSurfaceChangeState?this._updatePreSurfaceChangeState(U):this.currentMode!==U&&(this._setFetchMode(Ba.MODE_AUTO,U),this._evalSurfaceType())},_evalModeFromFReduction:function(U){this.loaded&&(U&&this.isFeatureReductionEnabled()&&this._canCluster(U)?this._enableFReductionMode():this._disableFReductionMode())},_enableFReductionMode:function(){this._evalSurfaceType(!0);if(!this._preFReductionState){var U=this.currentMode;
U!==Ba.MODE_SNAPSHOT&&U!==Ba.MODE_STREAM&&U!==Ba.MODE_SELECTION&&(this._preFReductionState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ba.MODE_AUTO?Ba.MODE_AUTO:Ba.MODE_SNAPSHOT,Ba.MODE_SNAPSHOT))}},_disableFReductionMode:function(){var U=this._preFReductionState;this._preFReductionState=null;!U||U.mode===this.mode&&U.currentMode===this.currentMode||(this._setFetchMode(U.mode,U.currentMode),this._evalSurfaceType())},_updatePreFReductionState:function(U){this._preFReductionState=
this._preFReductionState||{};this._preFReductionState.mode=Ba.MODE_AUTO;this._preFReductionState.currentMode=U},_evalModeFromSurface:function(){this.hasWebGLSurface()?this._enableWebGLSurfaceMode():this._disableWebGLSurfaceMode()},_enableWebGLSurfaceMode:function(){this._preSurfaceChangeState||(this._preSurfaceChangeState={mode:this.mode,currentMode:this.currentMode},this._setFetchMode(this.mode===Ba.MODE_AUTO?Ba.MODE_AUTO:Ba.MODE_ONDEMAND,Ba.MODE_ONDEMAND,this.webglDeps.OnDemandDrillMode))},_disableWebGLSurfaceMode:function(){var U=
this._preSurfaceChangeState;U&&(this._preSurfaceChangeState=null,this._setFetchMode(U.mode,U.currentMode))},_updatePreSurfaceChangeState:function(U){this._preSurfaceChangeState=this._preSurfaceChangeState||{};this._preSurfaceChangeState.mode=Ba.MODE_AUTO;this._preSurfaceChangeState.currentMode=U},_setFetchMode:function(U,la,na){this.clearSelection();this._mode.suspend();this._mode.destroy();this.mode=U;this.currentMode=la;na=na||this._getModeConstructor(la);this._mode=new na(this);this.queryPagination=
la===Ba.MODE_ONDEMAND&&-1===na.prototype.declaredClass.toLowerCase().indexOf("ondemanddrillmode")?!1:this._isPaginationAllowed();(U=this.getMap())&&U.loaded&&(this._resetMaxAllowableOffset(),this._mode.initialize(U),this._mode.startup())},_isPaginationAllowed:function(){return!(!this._optQueryPagination||this.loaded&&!this.advancedQueryCapabilities.supportsPagination)},_getModeConstructor:function(U){var la;U===Ba.MODE_SNAPSHOT?la=ra:U===Ba.MODE_ONDEMAND&&(la=Aa);return la},_hasOnDemandDrillMode:function(){var U=
this._mode;U=U&&U.declaredClass;return!!(U&&-1<U.toLowerCase().indexOf("ondemanddrillmode"))},_checkFeatureLimit:function(){this._limitPromise&&(this._limitPromise.cancel(),this._limitPromise=null);var U=this._queryLimit();U&&(this._lastExceedsLimitResult=null,this._limitPromise=U.then(g.hitch(this,function(la){var na=this.currentMode;this._evalModeFromFLimit(la);return{modeChanged:this.currentMode!==na}})).always(g.hitch(this,function(la){this._limitPromise=null;return la})));return this._limitPromise},
_hasPendingLimitQuery:function(){return!!this._exceedsLimitTimer},_queryLimit:function(){if(this._isAutoModeEnabled()){var U,la,na=new f(function(){clearTimeout(U);U=null;la&&!la.isFulfilled()&&la.cancel();la=null});this._exceedsLimitTimer=U=setTimeout(g.hitch(this,function(){this._exceedsLimitTimer=null;var V=new M,fa=new K;fa.statisticType="exceedslimit";fa.maxPointCount=this.maxPointCountForAuto;fa.maxRecordCount=this.maxRecordCountForAuto;fa.maxVertexCount=this.maxVertexCountForAuto;fa.outStatisticFieldName=
"exceedslimit";V.outStatistics=[fa];la=this.queryFeatures(V).promise.then(function(qa){na.resolve(qa)}).otherwise(function(qa){na.reject(qa)})}),0);return na.promise}},_isAutoModeEnabled:function(){return this.mode===Ba.MODE_AUTO&&this.reHostedFS.test(this.url)},_updateCaps:function(){var U=this._editable,la=g.trim(this.capabilities||""),na=d.map(la?la.split(","):[],g.trim),V=d.map(la?la.toLowerCase().split(","):[],g.trim);la=d.indexOf(V,"editing");var fa;V={Create:d.indexOf(V,"create"),Update:d.indexOf(V,
"update"),Delete:d.indexOf(V,"delete")};if(U&&-1===la)na.push("Editing");else if(!U&&-1<la){U=[la];for(fa in V)-1<V[fa]&&U.push(V[fa]);U.sort();for(fa=U.length-1;0<=fa;fa--)na.splice(U[fa],1)}this.capabilities=na.join(",")},_counter:{value:0},_getUniqueId:function(){return this._counter.value++},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(U){this._toggleTime(!1);this._refreshHandle&&(this._refreshHandle.remove(),this._refreshHandle=null);var la=this._mode;
la&&(la.suspend(),U&&la.destroy())},onResume:function(U){this.inherited(arguments);this._toggleTime(!0);this._refreshHandle=this.on("feature-updates-result",g.hitch(this,this._evalRefresh));var la=this._map,na=this._getRenderer();if(U.firstOccurrence){if(this._fixRendererFields(),this._updateRequiredFieldsFromLabelingInfo(),this._checkFields(),this.clearSelection(),this._evalFeatureReduction(),this.timeInfo&&!this._trackManager&&(this._trackIdField||na&&(na.latestObservationRenderer||na.trackRenderer))&&
(this._trackManager=new ma(this),this._trackManager.initialize(la),this._childLayer=this._trackManager.container),na&&"colors"in na&&"blurRadius"in na&&"maxPixelIntensity"in na&&"esriGeometryPoint"==this.geometryType&&!this._heatmapManager&&(this._heatmapManager=new R(this),this._heatmapManager.initialize(la)),this._zoomConnect=b.connect(la,"onZoomEnd",this,this._zoomEndHandler),this._refreshMaxAllowableOffset(),na=this._mode)na._init||na.initialize(la),na.startup()}else this._zoomEndHandler(),this._mode&&
this._mode.resume()},_zoomEndHandler:function(){var U=this._map;this._updateMaxOffset();this._prevScale=U.getScale();!this.suspended&&this._needsRefresh&&this.refresh()},_updateMaxOffset:function(){var U=this._map;U&&U.loaded&&this._autoGeneralize&&(this._isAutoSnapshotMode()?(U=this.getMaxAllowableOffset(),this._setMaxOffset(this._getMaxOffsetForScale(),!0),this._needsRefresh||(this._needsRefresh=U!=this.getMaxAllowableOffset())):this._setMaxOffset(U.extent.getWidth()/U.width,!U.extent.spatialReference.isWebMercator()))},
_getMaxOffsetForScale:function(){if(this._map){var U=this._map.getScale(),la=this._calculatedScale,na=this._calcMaxOffset,V=this._prevScale;return U>=la&&(null==V||V<la)?na:U<la&&(null==V||V>=la)?null:this.getMaxAllowableOffset()}},_calcMaxOffsetForAutoSnapshot:function(){var U=this._map;if(U&&this._canAutoGeneralize()&&this._isAutoSnapshotMode()&&this._autoGeneralize&&null==this.getMaxAllowableOffset()){var la=this.generalizeForScale;this._calculatedScale=la=this.maxScale?this.maxScale:this.minScale?
Math.min(la,this.minScale):Math.min(la,aa.getScale(U,this.initialExtent));this._calcMaxOffset=U.extent.getWidth()/U.width/U.getScale()*la}else this._calculatedScale=this._calcMaxOffset=void 0},_toggleTime:function(U){var la=this._map;U&&this.timeInfo&&this.useMapTime&&la?(this._mapTimeExtent=la.timeExtent,this._timeConnect||(this._timeConnect=b.connect(la,"onTimeExtentChange",this,this._timeChangeHandler))):(this._mapTimeExtent=null,b.disconnect(this._timeConnect),this._timeConnect=null)},_timeChangeHandler:function(U){this._mapTimeExtent=
U;(U=this._mode)&&U.propertyChangeHandler(0)},_getOffsettedTE:function(U){var la=this._timeOffset,na=this._timeOffsetUnits;return U&&la&&na?U.offset(-1*la,na):U},_getTimeOverlap:function(U,la){return U&&la?U.intersection(la):U||la},_getTimeFilter:function(U){var la=this.getTimeDefinition();if(la){var na=this._getTimeOverlap(la,null);if(!na)return[!1]}if(U){if(U=na?this._getTimeOverlap(U,na):U,!U)return[!1]}else U=na;return[!0,U]},_getAttributeFilter:function(U){var la=[],na=this.getDefinitionExpression();
na&&la.push(na);U&&la.push(U);this.subtypeField&&this.subtypeCode&&la.push(this.subtypeField+" \x3d "+this.subtypeCode);1<la.length&&(la=d.map(la,function(V){return"("+V+")"}));return la.length?la.join(" AND "):null},_applyQueryFilters:function(U,la){U.where=this._getAttributeFilter(U.where);U.returnGeometry&&null==U.maxAllowableOffset&&!U.quantizationParameters&&(U.maxAllowableOffset=this._maxOffset,U.quantizationParameters=this._quantizationParameters);la&&this.supportsAdvancedQueries&&(U.orderByFields=
U.orderByFields||this.getOrderByFields());if(this.timeInfo){var na=this._getTimeFilter(U.timeExtent);if(na[0])U.timeExtent=na[1];else return!1}return!0},_add:function(U){var la=this._selectionSymbol,na=U.attributes,V=this.visibilityField;la&&this._isSelOnly&&U.setSymbol(la);if(V&&na&&na.hasOwnProperty(V))U[na[V]?"show":"hide"]();return this.add.apply(this,arguments)},_remove:function(){return this.remove.apply(this,arguments)},_canDoClientSideQuery:function(U,la){var na=[],V=this._map,fa;if((this._collection||
!this._isTable&&V)&&!(U.text||U.where&&U.where!==this.getDefinitionExpression()||U.orderByFields&&U.orderByFields.length&&(fa=this.getOrderByFields()||[])&&U.orderByFields.join()!==fa.join()||U.outStatistics||U.returnDistinctValues)){fa=this._isSnapshotMode();var qa=this._isSelOnly;V=fa?null:la?this._getExtentOfTiles(V.extent):V.extent;var va=U.geometry;if(va){if(qa||U.spatialRelationship!==M.SPATIAL_REL_INTERSECTS||"extent"!==va.type||!fa&&!V.contains(va))return;na.push(1)}if(V=U.objectIds)if(fa)na.push(2);
else{va=V.length;var Fa=this._mode,Ca=0,La;for(La=0;La<va;La++)Fa._getFeature(V[La])&&Ca++;if(Ca===va)na.push(2);else return}if(this.timeInfo)if(V=U.timeExtent,va=this._mapTimeExtent,fa)V&&na.push(3);else if(qa){if(V)return}else if(va)if(-1!==d.indexOf(na,2))V&&na.push(3);else if(-1!==d.indexOf(na,1))V==va&&na.push(3);else return;else if(0<na.length)V&&na.push(3);else if(V)return;return 0<na.length?na:null}},_getAbsMid:function(U){return D.toAbsMid?D.toAbsMid(U):A.id.replace(/\/[^\/]*$/ig,"/")+U},
_doQuery:function(U,la,na){var V=[],fa=this.objectIdField,qa=this,va=new f,Fa=new f,Ca=this.graphics;if(-1!==d.indexOf(la,1)){var La=this.spatialIndex||this._map&&this._map.spatialIndex,Wa,Va=U.geometry._normalize(null,!0);null==La&&ea.autoSpatialIndexing?Wa=(this._map||this).addPlugin(this._getAbsMid("../plugins/spatialIndex")).then(g.hitch(this,g.partial(this._getFromIndex,Va,La)),function(Ma){Fa.resolve(g.hitch(this,g.partial(this._filterByExtent,Ca,Va)))}):La&&(Wa=this._getFromIndex(Va,La));Wa?
Wa.then(function(Ma){for(var eb=0;eb<Ma.length;eb++)Ma[eb].results&&(V=V.concat(Ma[eb].results));Fa.resolve(V)}).otherwise(function(Ma){Fa.reject(Ma)}):Fa.resolve(this._filterByExtent(Ca,Va))}else Fa.resolve(Ca);Fa.then(function(Ma){V=Ma;if(-1!==d.indexOf(la,2)){var eb=U.objectIds;V=d.filter(V,function(ib){return-1<d.indexOf(eb,ib.attributes[fa])})}-1!==d.indexOf(la,3)&&qa.timeInfo&&(Ma=U.timeExtent,V=qa._filterByTime(V,Ma.startTime,Ma.endTime).match);na&&(V=d.map(V,function(ib){return ib.attributes[fa]},
this));va.resolve(V)});return va},_getFromIndex:function(U,la){la=la||this.spatialIndex||this._map.spatialIndex;U instanceof Array||(U=[U]);var na=this.id;return m(d.map(U,function(V){return la.intersects(V,na)}))},_filterByExtent:function(U,la){for(var na=[],V=0,fa=U.length;V<fa;V++){var qa=U[V],va=qa.geometry;va&&(this.normalization&&la.length?(la[0].intersects(va)||la[1].intersects(va))&&na.push(qa):la.intersects(va)&&na.push(qa))}return na},_filterByTime:function(U,la,na){var V=this._startTimeField,
fa=this._endTimeField,qa;this._twoTimeFields||(qa=V||fa);var va=B.isDefined,Fa=[],Ca=[],La,Wa=U.length;la=la?la.getTime():-Infinity;na=na?na.getTime():Infinity;if(qa)for(La=0;La<Wa;La++){var Va=U[La];var Ma=Va.attributes;V=Ma[qa];V>=la&&V<=na?Fa.push(Va):Ca.push(Va)}else for(La=0;La<Wa;La++)Va=U[La],Ma=Va.attributes,qa=Ma[V],Ma=Ma[fa],qa=va(qa)?qa:-Infinity,Ma=va(Ma)?Ma:Infinity,qa>=la&&qa<=na||Ma>=la&&Ma<=na||la>=qa&&na<=Ma?Fa.push(Va):Ca.push(Va);return{match:Fa,noMatch:Ca}},_getSizeVariables:function(U){return U&&
d.filter(U.getVisualVariablesForType("sizeInfo",!1),function(la){return!(!la.field&&!la.valueExpression)})},_needClientSideSorting:function(U){return this._collection?!(!U||!U.length):d.some(U,function(la){return!!la.valueExpression})},_sortFeatures:function(U){var la=this.renderer,na=this._getSizeVariables(la);if(U&&1<U.length&&this._needClientSideSorting(na)){var V=na[0],fa=this;U.sort(function(qa,va){qa._layer||(qa._layer=fa);va._layer||(va._layer=fa);var Fa=la._getDataValue(qa,V,"sizeInfo"),Ca=
la._getDataValue(va,V,"sizeInfo");return null==Fa?-1:null==Ca?1:Ca-Fa})}return U},_resolve:function(U,la,na,V,fa){la&&this[la].apply(this,U);na&&na.apply(null,U);V&&x._resDfd(V,U,fa)},_getShallowClone:function(U){var la=new M,na;for(na in U)U.hasOwnProperty(na)&&(la[na]=U[na]);return la},_canFetchPBF:function(){return!!(Ya&&Xa&&this.supportsFormatPBF)},_canFetchPBFForQuery:function(U){return!(!this._canFetchPBF()||!this._isCacheHintEnabled(U)&&this._isAutoSnapshotMode()||!(U.quantizationParameters||
!this.isEditable()&&this.supportsQuantizationEditMode)||U.outStatistics)},_enableEditModeQuantization:function(U,la){U&&la&&!U.quantizationParameters&&(U.quantizationParameters={mode:"edit"})},_enableCacheHint:function(U,la){var na=this.advancedQueryCapabilities;na&&na.supportsQueryWithCacheHint?null==U.cacheHint&&(U.cacheHint=!0):na&&na.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&!U.resultType&&(U.resultType=la||"coherent")},_isCacheHintSupported:function(){var U=this.advancedQueryCapabilities;
return U?!!(U.supportsQueryWithCacheHint||U.supportsQueryWithResultType&&this.reHostedFS.test(this.url)):!1},_isCacheHintEnabled:function(U){var la=this.advancedQueryCapabilities;return U&&la?!!(la.supportsQueryWithCacheHint&&U.cacheHint||la.supportsQueryWithResultType&&this.reHostedFS.test(this.url)&&("coherent"===U.resultType||"tile"===U.resultType)):!1},_query:function(U,la,na,V,fa,qa){var va=this,Fa=this._map;qa=qa&&qa.snapToTiles;var Ca=new f(x._dfdCanceller),La=na,Wa,Va,Ma;if("executeRelationshipQuery"!==
U){La=this._getShallowClone(na);var eb=this.getOutFields();La.outFields||(La.outFields=eb);La.outFields&&La.outFields.length&&(Va=-1<d.indexOf(eb,"*")?!1:!d.every(La.outFields,function(lb){return-1<d.indexOf(eb,lb)}));La.returnGeometry=na.hasOwnProperty("returnGeometry")?na.returnGeometry:!na.outStatistics;La.returnGeometry&&(La.multipatchOption=this.multipatchOption,null!=La.maxAllowableOffset||La.quantizationParameters)&&(na=null!=La.maxAllowableOffset?La.maxAllowableOffset:La.quantizationParameters.tolerance,
null!=na&&na!==this.getMaxAllowableOffset()&&(Ma=!0));Fa&&(Fa=Fa&&Fa.spatialReference,(na=La.outSpatialReference)?Wa=!na.equals(Fa):La.outSpatialReference=new u(Fa.toJson()));qa&&(Fa=La.geometry)&&"extent"===Fa.type&&(La.geometry=this._getExtentOfTiles(Fa),Fa!==La.geometry&&this._enableCacheHint(La));if(!this._applyQueryFilters(La,"execute"===U&&!La.outStatistics)){switch(U){case "execute":var ib=new N({features:[]});break;case "executeForIds":ib=[];break;case "executeForCount":ib=0;break;case "executeForExtent":ib=
{}}this._resolve([ib],la,V,Ca);return Ca}if(qa="executeForExtent"!==U&&!Wa&&!Va&&!Ma&&this._canDoClientSideQuery(La,qa))return Ca._pendingDfd=l(this._doQuery(La,qa,"executeForIds"===U||"executeForCount"===U)),Ca._pendingDfd.then(function(lb){switch(U){case "execute":ib=new N;ib.features=lb;break;case "executeForIds":ib=lb;break;case "executeForCount":ib=lb.length}va._resolve([ib],la,V,Ca)}),Ca}if(this._collection)return this._resolve([Error("FeatureLayer::_query - "+this.invalidParams)],null,fa,Ca,
!0),Ca;if(this.loaded&&!this.isQueryable())return this._resolve([Error("Layer does not support query capability.")],null,fa,Ca,!0),Ca;this._ts&&(La._ts=(new Date).getTime());qa="execute"===U&&this._canFetchPBFForQuery(La);this._enableEditModeQuantization(La,qa);(Ca._pendingDfd=this._task[U](La,null,null,qa?{format:"pbf"}:null)).addCallbacks(function(lb){var rb=!!La.outStatistics||Wa||Va||Ma;if("execute"===U||"executeRelationshipQuery"===U)if("execute"===U){var sb=lb.features;var tb=sb.length;for(--tb;0<=
tb;tb--)if(sb[tb]._layer=va,!rb&&!va._isTable){var Ab=va._mode._getFeature(sb[tb].attributes[va.objectIdField]);Ab&&sb.splice(tb,1,Ab)}}else for(Ab in lb)if(lb.hasOwnProperty(Ab))for(sb=lb[Ab].features,tb=sb.length,--tb;0<=tb;tb--)sb[tb]._layer=va;va._resolve([lb],la,V,Ca)},function(lb){va._resolve([lb],null,fa,Ca,!0)});return Ca},_getExtentOfTiles:function(U){var la=this._isOnDemandMode()&&this._mode._gridLayer||ha.createFromFeatureLayer({layer:this}),na=this.getMap();na=na&&na.getTargetExtent(U);
return la&&na&&la.getExtentOfIntersectingCells(na)||U},_convertFeaturesToJson:function(U,la,na,V){var fa=[],qa=this._selectionSymbol,va=this.visibilityField,Fa,Ca=this.objectIdField;this.loaded&&(na||V)&&(Fa=d.filter(this.fields,function(ib){return!1===ib.editable&&(!V||ib.name!==Ca)}));for(na=0;na<U.length;na++){var La=U[na],Wa={},Va=La.geometry,Ma=La.attributes,eb=La.symbol;!Va||V&&this.loaded&&!this.allowGeometryUpdates||(Wa.geometry=Va.toJson());va?(Wa.attributes=Ma=g.mixin({},Ma),Ma[va]=La.visible?
1:0):Ma&&(Wa.attributes=g.mixin({},Ma));Wa.attributes&&Fa&&Fa.length&&d.forEach(Fa,function(ib){delete Wa.attributes[ib.name]});eb&&eb!==qa&&(Wa.symbol=eb.toJson());fa.push(Wa)}return la?fa:e.toJson(fa)},_selectHandler:function(U,la,na,V,fa){switch(la){case Ba.SELECTION_NEW:this.clearSelection(!0);var qa=!0;break;case Ba.SELECTION_ADD:qa=!0;break;case Ba.SELECTION_SUBTRACT:qa=!1}V=U.features;var va=this._mode,Fa=[],Ca=this.objectIdField;if(qa)for(qa=0;qa<V.length;qa++){var La=V[qa];var Wa=La.attributes[Ca];
La=va._addFeatureIIf(Wa,La);Fa.push(La);this._selectFeatureIIf(Wa,La,va)}else for(qa=0;qa<V.length;qa++)La=V[qa],Wa=La.attributes[Ca],this._unSelectFeatureIIf(Wa,va),Wa=va._removeFeatureIIf(Wa),Fa.push(Wa||La);this._isSelOnly&&va._applyTimeFilter(!0);this._isImageService&&10.7>this.version&&void 0===U.exceededTransferLimit&&(U.exceededTransferLimit=V.length===this.maxRecordCount);this._hasPartialSelectedFeatures=!!U.exceededTransferLimit;this._resolve([Fa,la,U.exceededTransferLimit?{queryLimitExceeded:!0}:
null],"onSelectionComplete",na,fa);if(U.exceededTransferLimit)this.onQueryLimitExceeded()},_selectFeatureIIf:function(U,la,na){var V=this._selectedFeatures,fa=V[U];fa||(na._incRefCount(U),V[U]=la,this._isTable||(this._setSelectSymbol(la),la.attr("data-selected","")));return fa||la},_unSelectFeatureIIf:function(U,la){var na=this._selectedFeatures[U];na&&(la._decRefCount(U),delete this._selectedFeatures[U],this._isTable||(this._setUnSelectSymbol(na),na.attr("data-selected")));return na},_setSelectSymbol:function(U){var la=
this._selectionSymbol;la&&!this._isSelOnly&&U.setSymbol(la)},_setUnSelectSymbol:function(U){var la=this._selectionSymbol;la&&!this._isSelOnly&&la===U.symbol&&U.setSymbol(null,!0)},_getOutFields:function(){var U=[this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._requiredFields).concat(this.dataAttributes);U=d.filter(U,function(na,V,fa){return!!na&&d.indexOf(fa,na)===V});var la=g.clone(this._outFields);if(la){if(-1!==d.indexOf(la,
"*"))return la;d.forEach(U,function(na){-1===d.indexOf(la,na)&&la.push(na)});return la}return U},_checkFields:function(U){var la=U||this._getOutFields();d.forEach(la,function(na){"*"!==na&&this._getField(na)},this);U||this._isTable||this._fserver||this._collection||this._isStream||d.some(this.fields,function(na){return na&&"esriFieldTypeGeometry"===na.type?!0:!1})},_fixFieldCase:function(U,la,na){var V=U&&U[la],fa;if(V&&!g.isFunction(V)){if(fa=!this._getField(V)&&this._getField(V,!0))V=U[la]=fa.name;
na&&na.push(V)}return V},_fixRendererFields:function(){var U=this.renderer;this._orderBy=null;this._requiredFields=[];if(U&&0<this.fields.length){var la=[],na;U=d.filter([U,U.observationRenderer,U.latestObservationRenderer,U.trackRenderer],B.isDefined);var V=[].concat(U);d.forEach(U,function(fa){d.forEach(fa.rendererInfos,function(qa){qa.renderer&&V.push(qa.renderer)})});d.forEach(V,function(fa){this._fixFieldCase(fa,"attributeField",la);this._fixFieldCase(fa,"attributeField2",la);this._fixFieldCase(fa,
"attributeField3",la);this._fixFieldCase(fa.rotationInfo,"field",la);(na=this._fixFieldCase(fa.sizeInfo,"field",la))&&!this._orderBy&&(this._orderBy=[na+" DESC"]);this._fixFieldCase(fa.sizeInfo,"normalizationField",la);this._fixFieldCase(fa.colorInfo,"field",la);this._fixFieldCase(fa.colorInfo,"normalizationField",la);this._fixFieldCase(fa.field,"field",la);this._fixFieldCase(fa.opacityInfo,"field",la);this._fixFieldCase(fa.opacityInfo,"normalizationField",la);d.forEach(fa.visualVariables,function(va){na=
this._fixFieldCase(va,"field",la);"sizeInfo"===va.type&&na&&!this._orderBy&&(this._orderBy=[na+" DESC"]);this._fixFieldCase(va,"normalizationField",la)},this);var qa=d.map(this.fields,function(va){return va.name},this);qa=d.map(fa.getFieldsUsedInExpressions(qa),function(va){var Fa=this.getField(va);return Fa?Fa.name:va},this);la=la.concat(qa);this._orderBy||!fa.addBreak||g.isFunction(fa.attributeField)||!fa.backgroundFillSymbol&&!this._hasSizeDiff(fa)||(this._orderBy=[fa.attributeField+" DESC"])},
this);this._requiredFields=d.filter(la,B.isDefined)}},_hasSizeDiff:function(U){var la=Number.MAX_VALUE,na=-Number.MAX_VALUE,V,fa;d.forEach(U.infos,function(qa){if(fa=qa.symbol){V=0;switch(fa.type){case "simplemarkersymbol":V=fa.size;break;case "picturemarkersymbol":V=(fa.width+fa.height)/2;break;case "simplelinesymbol":case "cartographiclinesymbol":V=fa.width;break;case "simplefillsymbol":case "picturefillsymbol":V=fa.outline&&fa.outline.width}V&&(la=Math.min(la,V),na=Math.max(na,V))}});return la!==
Number.MAX_VALUE&&na!==-Number.MAX_VALUE&&1<Math.abs(na-la)},getOrderByFields:function(){var U=this.orderByFields||this._orderBy;return this.supportsAdvancedQueries&&U?d.filter(U,function(la){la=la.split(" ")[0];return!!this._getField(la,!0)},this):null},_createFields:function(U){var la=U?U.length:0,na,V=[];for(na=0;na<la;na++)V.push(new I(U[na]));this.fields=V},_createFieldsIndex:function(){if(this._fieldsIndexDirty){var U=this.fields,la=U?U.length:0;if(50<la&&this._canUseFieldsIndex()){var na=new Map;
for(var V=new Map,fa=0;fa<la;fa++){var qa=U[fa];na.set(qa.name,qa);V.set(qa.name.toLowerCase(),qa)}na={caseSensitive:na,caseInsensitive:V}}this._fieldsIndex=na;this._fieldsIndexDirty=!1}},_canUseFieldsIndex:function(){var U=r.Map;return!("function"!==typeof r.Proxy||"function"!==typeof r.Proxy.revocable||"function"!==typeof U||!U.prototype||"function"!==typeof U.prototype.set)},_getField:function(U,la){var na=this.fields;if(!na||0===na.length)return null;la&&(U=U.toLowerCase());this._createFieldsIndex();
var V=this._fieldsIndex;if(V)return V=la?V.caseInsensitive:V.caseSensitive,V.get(U);var fa;d.some(na,function(qa){var va=!1;(va=la?qa&&qa.name.toLowerCase()===U?!0:!1:qa&&qa.name===U?!0:!1)&&(fa=qa);return va});return fa},_getDateOpts:function(){this._dtOpts||(this._dtOpts={properties:d.map(d.filter(this.fields,function(U){return!(!U||"esriFieldTypeDate"!==U.type)}),function(U){return U.name})});return this._dtOpts},_applyNormalized:function(U,la){U&&la&&d.forEach(U,function(na,V){na&&la[V]&&na.setGeometry(la[V])})},
_editHandler:function(U,la,na,V,fa,qa){fa=U.addResults;var va=U.updateResults;U=U.deleteResults;var Fa,Ca=this.objectIdField,La=this._mode,Wa=this._isTable;var Va=this.editFieldsInfo;var Ma=this.getOutFields()||[];var eb=Va&&Va.creatorField,ib=Va&&Va.creationDateField,lb=Va&&Va.editorField,rb=Va&&Va.editDateField;Va=Va&&Va.realm;-1===d.indexOf(Ma,"*")&&(eb&&-1===d.indexOf(Ma,eb)&&(eb=null),ib&&-1===d.indexOf(Ma,ib)&&(ib=null),lb&&-1===d.indexOf(Ma,lb)&&(lb=null),rb&&-1===d.indexOf(Ma,rb)&&(rb=null));
var sb=ib||rb?(new Date).getTime():null,tb=eb||lb?this.getUserId():void 0;tb&&Va&&(tb=tb+"@"+Va);if(fa){var Ab=this.globalIdField;for(Va=0;Va<fa.length;Va++)if(fa[Va]=new Ha(fa[Va]),!Wa){var Cb=fa[Va];if(Cb.success){var nb=Cb.objectId;Ma=la[Va];(Fa=Ma._graphicsLayer)&&Fa!==this&&Fa.remove(Ma);Fa=Ma.attributes||{};Fa[Ca]=nb;nb=Cb.globalId;Ab&&nb&&(Fa[Ab]=nb);eb&&(Fa[eb]=tb);lb&&(Fa[lb]=tb);ib&&(Fa[ib]=sb);rb&&(Fa[rb]=sb);Ma.setAttributes(Fa);La._init&&La.drawFeature(Ma)}}}if(va)for(Va=0;Va<va.length;Va++)if(va[Va]=
new Ha(va[Va]),!Wa&&(Cb=va[Va],Cb.success)){nb=Cb.objectId;Ma=na[nb];if(la=La._getFeature(nb))la.geometry!==Ma.geometry&&Ma.geometry&&la.setGeometry(da.fromJson(Ma.geometry.toJson())),la.attributes!==Ma.attributes&&Ma.attributes&&la.setAttributes(g.mixin(la.attributes,Ma.attributes)),this._repaint(la,nb);Ma=la||Ma;Fa=Ma.attributes||{};lb&&(Fa[lb]=tb);rb&&(Fa[rb]=sb);Ma.setAttributes(Fa)}if(U){na=[];for(Va=0;Va<U.length;Va++)if(U[Va]=new Ha(U[Va]),!Wa&&(Cb=U[Va],Cb.success&&(nb=Cb.objectId,Ma=La._getFeature(nb))))this._unSelectFeatureIIf(nb,
La)&&na.push(Ma),Ma._count=0,La._removeFeatureIIf(nb);if(0<na.length)this.onSelectionComplete(na,Ba.SELECTION_SUBTRACT)}this._resolve([fa,va,U],"onEditsComplete",V,qa)},_sendAttachment:function(U,la,na,V,fa){var qa=this;return w({url:this._url.path+"/"+la+"/"+("add"===U?"addAttachment":"updateAttachment"),form:na,content:g.mixin(this._url.query,{f:"json",token:this._getToken()||void 0}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(va){var Fa="add"===U?"onAddAttachmentComplete":
"onUpdateAttachmentComplete";va=new Ha(va["add"===U?"addAttachmentResult":"updateAttachmentResult"]);va.attachmentId=va.objectId;va.objectId=la;qa._resolve([va],Fa,V);return va}).addErrback(function(va){qa._resolve([va],null,fa,null,!0)})},_repaint:function(U,la,na){la=B.isDefined(la)?la:U.attributes[this.objectIdField];la in this._selectedFeatures&&this._selectionSymbol||U.setSymbol(U.symbol,na)},_getKind:function(U){var la=this._trackManager;return la?la.isLatestObservation(U)?1:0:0}});g.mixin(Ba,
{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,MODE_AUTO:6,MODE_STREAM:7,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});Y._createWrappers(Ba);Object.defineProperty(Ba.prototype,"graphics",{get:function(){return this._hasOnDemandDrillMode()?this._mode.graphics:this._graphicsVal},set:function(U){this._graphicsVal=U}});Object.defineProperty(Ba.prototype,"name",
{get:function(){return this.arcgisProps&&this.arcgisProps.title?this.arcgisProps.title:this._name},set:function(U){this._name=U;this.loaded&&this.arcgisProps&&(this.arcgisProps.title=null)}});Object.defineProperty(Ba.prototype,"fields",{get:function(){return this._fields},set:function(U){U&&this._canUseFieldsIndex()&&(U=new Proxy(U,{set:g.hitch(this,function(la,na,V){if(na)if("length"===na)this._fieldsIndexDirty=!0;else{var fa=Number(na);"number"!==typeof fa||isNaN(fa)||(this._fieldsIndexDirty=!0)}la[na]=
V;return!0})}));this._fields=U;this._fieldsIndexDirty=!0}});g.setObject("layers.FeatureLayer",Ba,v);return Ba})},"esri/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(D,A,a){var b=D.forEach;return function(g){function d(r,m){k[m]=r;c.progress([r,m]);0===--l&&c.resolve(k)}var e,f;g instanceof Array?f=g:g&&"object"===typeof g&&(e=g);var n=[];if(e){f=[];for(var h in e)Object.hasOwnProperty.call(e,h)&&(n.push(h),f.push(e[h]));var k={}}else f&&(k=[]);if(!f||!f.length)return(new A).resolve(k);
var c=new A;c.promise.always(function(){k=n=null});var l=f.length;b(f,function(r,m){e||n.push(m);a(r,function(q){c.isFulfilled()||d(q,n[m])},function(q){c.isFulfilled()||d(q,n[m])})});return c.promise}})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(D,A,a,b,g,d,e){D=D(e,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(f,n){if(f&&!f.declaredClass){var h=f;this.symbol=
(f=h.symbol)&&(f.declaredClass?f:d.fromJson(f,n));this.label=h.label;this.description=h.description}else this.symbol=f},getSymbol:function(f){return this.symbol},toJson:function(){var f=A.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return g.fixJson(f)}});A.setObject("renderer.SimpleRenderer",D,b);return D})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojox/gfx/_base ../kernel ../Color ../layers/support/attributeUtils ../support/expressionUtils ../arcadeProfiles/visualizationProfile".split(" "),
function(D,A,a,b,g,d,e,f,n,h){var k=Math.PI;D=D(null,{declaredClass:"esri.renderer.Renderer",constructor:function(c){this._cache={};if(c&&!c.declaredClass){this.rotationInfo=c.rotationInfo;if(!this.rotationInfo){var l=c.rotationType,r=c.rotationExpression;if(l||r)this.rotationInfo={type:l,expression:r}}this.setRotationInfo(this.rotationInfo);this.setSizeInfo(this._readSizeInfo(c.sizeInfo));this.setColorInfo(this._readColorInfo(c.colorInfo));this.setOpacityInfo(this._readOpacityInfo(c.transparencyInfo));
this.setVisualVariables(this._readVariables(c.visualVariables));this.setAuthoringInfo(c.authoringInfo)}this.getSymbol=A.hitch(this,this.getSymbol)},getSymbol:function(c){},_readSizeInfo:function(c){if(c){var l=c.minSize,r=c.maxSize;l&&(c.minSize="number"===typeof l?g.pt2px(l):this._readSizeInfo(l));r&&(c.maxSize="number"===typeof r?g.pt2px(r):this._readSizeInfo(r));c.stops&&a.forEach(c.stops,function(m){m.size&&"number"===typeof m.size&&(m.size=g.pt2px(m.size))})}return c},_readColorInfo:function(c){c&&
(a.forEach(c.colors,function(l,r){A.isArray(l)&&(c.colors[r]=e.toDojoColor(l))}),a.forEach(c.stops,function(l,r){l.color&&A.isArray(l.color)&&(c.stops[r].color=e.toDojoColor(l.color))}));return c},_readOpacityInfo:function(c){if(c){var l=A.mixin({},c);l.transparencyValues&&(l.opacityValues=a.map(l.transparencyValues,function(r){return 1-r/100}),delete l.transparencyValues);l.stops&&(l.stops=a.map(l.stops,function(r){r=A.mixin({},r);r.opacity=1-r.transparency/100;delete r.transparency;return r}))}return l},
_readVariables:function(c){c&&(c=a.map(c,function(l){"sizeInfo"===l.type?l=this._readSizeInfo(l):"colorInfo"===l.type?l=this._readColorInfo(l):"transparencyInfo"===l.type&&(l=this._readOpacityInfo(l),l.type="opacityInfo");return l},this));return c},setAuthoringInfo:function(c){this.authoringInfo=c},setRotationInfo:function(c){if(c=this.rotationInfo="string"===typeof c?{field:c}:c){if(c.expression&&!A.isFunction(c.expression)&&!c.field){var l=c.expression.match(this.rotationRE);l&&l[1]&&(c.field=l[1])}c.rotationType=
c.type}this._cache.rotationInfo=this._processRotationInfo(c);return this},rotationRE:/^\[([^\]]+)\]$/i,_processRotationInfo:function(c){c&&!c.rotationType&&(c.rotationType="geographic");return this._createCache(c)},getRotationAngle:function(c,l){var r=this._getVarInfo(l&&l.rotationInfo,"rotationInfo"),m=r.variable;r=this._cache[r.cacheKey];var q="arithmetic"===this._getRotationType(m),v=r&&r.hasExpr,B=null;if(m.field||v)B=this._getDataValue(c,m,null,r),null!=B&&(B=(B+(q?-90:0))*(q?-1:1));return B},
_getRotationType:function(c){return c&&("rotationInfo"===c.type?c.rotationType:c.type)},_getDataValue:function(c,l,r,m,q){m||(m=this._getVarInfo(l,r),l=m.variable,m=this._cache[m.cacheKey],"sizeInfo"===r&&(m=m.root));return c._getDataValue(l,m,n,q)},setVisualVariables:function(c){var l=this._cache;a.forEach(this.visualVariables,function(r,m){l.hasOwnProperty(m)&&(l[m]=null)},this);this.visualVariables=c;a.some(c,function(r){return!!r.target})&&c.sort(function(r,m){return r.target===m.target?0:r.target?
1:-1});a.forEach(c,function(r,m){"colorInfo"===r.type?l[m]=this._processColorInfo(r):"opacityInfo"===r.type?l[m]=this._processOpacityInfo(r):"sizeInfo"===r.type?l[m]=this._processSizeInfo(r):"rotationInfo"===r.type&&(l[m]=this._processRotationInfo(r))},this);return this},getVisualVariableValues:function(c){var l=this.visualVariables,r;l&&(r=a.map(l,function(m){switch(m.type){case "sizeInfo":var q=this.getSize(c,{sizeInfo:m});break;case "colorInfo":q=this.getColor(c,{colorInfo:m});break;case "opacityInfo":q=
this.getOpacity(c,{opacityInfo:m});break;case "rotationInfo":q=this.getRotationAngle(c,{rotationInfo:m})}return{variable:m,value:q}},this));return r},getFieldsUsedInExpressions:function(c){var l=[];a.forEach(this._getCacheObjects(),function(r){r.syntaxTree&&(l=l.concat(n.extractFieldNames(r.syntaxTree,c)))});l.sort();return a.filter(l,function(r,m){return 0===m||l[m-1]!==r})},hasGeometryOperations:function(){return a.some(this._getCacheObjects(),function(c){return c.syntaxTree?n.hasGeometryOperations(c.syntaxTree):
!1})},initializeArcadeEngine:function(){var c=[];a.forEach(this._getCacheObjects(),function(l){l.syntaxTree&&c.push(l.syntaxTree)});return h.initialize(c)},hasVisualVariables:function(c,l){return c?!!this.getVisualVariablesForType(c,l):!!(this.getVisualVariablesForType("sizeInfo",l)||this.getVisualVariablesForType("colorInfo",l)||this.getVisualVariablesForType("opacityInfo",l)||this.getVisualVariablesForType("rotationInfo",l))},getVisualVariablesForType:function(c,l){var r=this.visualVariables;if(!l&&
this[c]){"rotationInfo"===c&&(this[c].rotationType=this[c].type);var m=[this[c]]}else r&&(m=a.filter(r,function(q){return q.type===c&&("string"===typeof l?q.target===l:!1===l?!q.target:!0)}))&&0===m.length&&(m=void 0);return m},setSizeInfo:function(c){this.sizeInfo=this.proportionalSymbolInfo=c;this._cache.sizeInfo=this._processSizeInfo(c);return this},_processSizeInfo:function(c){return c&&{root:this._createCache(c),minSize:this._createCache(c.minSize),maxSize:this._createCache(c.maxSize)}},_convertExpressionToArcade:function(c){c&&
c.expression&&(c.valueExpression="$view.scale")},_getVarInfo:function(c,l){if(c&&c.type===l){var r=a.indexOf(this.visualVariables,c);c=this.visualVariables[r]}else r=l,c=this[l];return{variable:c,cacheKey:r}},setProportionalSymbolInfo:function(c){this.setSizeInfo(c);return this},getSize:function(c,l){var r=this._getVarInfo(l&&l.sizeInfo,"sizeInfo"),m=r.variable;r=this._cache[r.cacheKey];var q=null;if(m){var v=m.minSize;q=m.maxSize;v="object"===typeof v&&v?this._getSize(c,v,r&&r.minSize,l):v;q="object"===
typeof q&&q?this._getSize(c,q,r&&r.maxSize,l):q;q=this._getSize(c,m,r&&r.root,l,[v,q])}return q},_getSize:function(c,l,r,m,q){var v=l.stops,B=0,w=r&&r.hasExpr,z=r&&r.ipData,x=r&&r.isScaleDriven,y="object"===typeof c&&!!c,u="number"===typeof c?c:null;if(l.field||x||w){var t=m&&m.scale;w=q?q[0]:l.minSize;q=q?q[1]:l.maxSize;var C=l.minDataValue,E=l.maxDataValue,F=l.valueUnit||"unknown",G=l.valueRepresentation,H=l.scaleBy,L=m&&m.shape;x?u=t:"number"!==typeof u&&y&&(u=this._getDataValue(c,l,null,r));if(!this._isValidNumber(u))return null;
if(v)w=this._lookupData(u,z),u=w[0],q=w[1],u===q?B=v[u].size:(u=v[u].size,v=v[q].size,B=u+(v-u)*w[2]);else if(null!=w&&null!=q&&null!=C&&null!=E)u<=C?B=w:u>=E?B=q:(v=(u-C)/(E-C),"area"===H&&L?(w=(u="circle"===L)?k*Math.pow(w/2,2):w*w,v=w+v*((u?k*Math.pow(q/2,2):q*q)-w),B=u?2*Math.sqrt(v/k):Math.sqrt(v)):B=w+v*(q-w));else if("unknown"===F)null!=w&&null!=C&&(w&&C?(v=u/C,B="circle"===L?2*Math.sqrt(v*Math.pow(w/2,2)):"square"===L||"diamond"===L||"image"===L?Math.sqrt(v*Math.pow(w,2)):v*w):B=u+(w||C),
B=B<w?w:B,null!=q&&B>q&&(B=q));else{v=(m&&m.resolution?m.resolution:1)*this._meterIn[F];if("area"===G)B=Math.sqrt(u/k)/v,B*=2;else if(B=u/v,"radius"===G||"distance"===G)B*=2;null!=w&&B<w&&(B=w);null!=q&&B>q&&(B=q)}}else B=v&&v[0]&&v[0].size,null==B&&(B=l.minSize);return B=isNaN(B)?0:B},getSizeRangeAtScale:function(c,l){var r=this._getVarInfo(c,"sizeInfo"),m=this._cache[r.cacheKey],q={scale:l};if((c=r.variable)&&l){r=c.minSize;var v=c.maxSize,B=c.stops;B&&B.length?(r=B[0].size,m=B[B.length-1].size):
(r="object"===typeof r&&r?this._getSize({},r,m&&m.minSize,q):r,m="object"===typeof v&&v?this._getSize({},v,m&&m.maxSize,q):v);if(null!=r||null!=m){if(r>m){var w=m;m=r;r=w}w={minSize:r,maxSize:m}}}return w},setColorInfo:function(c){this.colorInfo=c;this._cache.colorInfo=this._processColorInfo(c);return this},_createCache:function(c,l){var r=f.createAttributeCache(c,l);r&&(r.ipData=this._interpolateData(c));return r},_getCacheObjects:function(c){var l;c=c||this._cache;var r=[];for(l in c){var m=c[l];
c.hasOwnProperty(l)&&m&&"object"===typeof m&&(m.hasOwnProperty("idSource")?r.push(m):r=r.concat(this._getCacheObjects(m)))}return r},_processColorInfo:function(c){c&&(a.forEach(c.colors,function(l,r){A.isArray(l)&&(c.colors[r]=new e(l))}),a.forEach(c.stops,function(l,r){l.color&&A.isArray(l.color)&&(c.stops[r].color=new e(l.color))}));return this._createCache(c)},getColor:function(c,l){var r=this._getVarInfo(l&&l.colorInfo,"colorInfo");return this._getColorComponent(c,r.variable,this._cache[r.cacheKey])},
setOpacityInfo:function(c){this.opacityInfo=c;this._cache.opacityInfo=this._processOpacityInfo(c);return this},_processOpacityInfo:function(c){return this._createCache(c)},getOpacity:function(c,l){var r=this._getVarInfo(l&&l.opacityInfo,"opacityInfo");return this._getColorComponent(c,r.variable,this._cache[r.cacheKey],!0)},_getColorComponent:function(c,l,r,m,q){var v="number"===typeof c?c:null,B=r&&r.hasExpr,w=r&&r.ipData,z;l&&l.field||B?("number"!==typeof v&&"object"===typeof c&&c&&(v=this._getDataValue(c,
l,null,r)),this._isValidNumber(v)||(v=null),null!=v&&(z=m?this._getOpacity(v,l,w):this._getColor(v,l,w))):l&&(c=l.stops,m?(z=c&&c[0]&&c[0].opacity,null==z&&(z=l.opacityValues&&l.opacityValues[0])):z=c&&c[0]&&c[0].color||l.colors&&l.colors[0]);q&&(q.data=v,q.value=z);return q||z},_isValidNumber:function(c){return"number"===typeof c&&!isNaN(c)&&Infinity!==c&&-Infinity!==c},_interpolateData:function(c){if(c)if(c.colors||c.opacityValues){var l=(c.colors||c.opacityValues).length,r=c.minDataValue,m=(c.maxDataValue-
r)/(l-1);var q=[];for(c=0;c<l;c++)q[c]=r+c*m}else c.stops&&(q=a.map(c.stops,function(v){return v.value}));return q},_getOpacity:function(c,l,r){c=this._lookupData(c,r);l=l||this.opacityInfo;if(c){r=c[0];var m=c[1];r===m?m=this._getOpacValue(l,r):(r=this._getOpacValue(l,r),l=this._getOpacValue(l,m),m=r+(l-r)*c[2])}return m},_getOpacValue:function(c,l){return c.opacityValues?c.opacityValues[l]:c.stops[l].opacity},_getColor:function(c,l,r){c=this._lookupData(c,r);l=l||this.colorInfo;if(c){var m=c[0];
r=c[1];m=m===r?this._getColorObj(l,m):e.blendColors(this._getColorObj(l,m),this._getColorObj(l,r),c[2])}return m},_getColorObj:function(c,l){return c.colors?c.colors[l]:c.stops[l].color},_lookupData:function(c,l){if(l){var r=0,m=l.length-1;a.some(l,function(v,B){if(c<v)return m=B,!0;r=B;return!1});var q=[r,m,(c-l[r])/(l[m]-l[r])]}return q},_meterIn:{inches:1/.0254,feet:1/.3048,yards:1/.9144,miles:1/1609.344,"nautical-miles":1/1852,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:.001,
"decimal-degrees":180/20015077},_writeSizeInfo:function(c){if(c){c=A.mixin({},c);this._convertExpressionToArcade(c);var l=c.minSize,r=c.maxSize;l&&(c.minSize="number"===typeof l?g.px2pt(l):this._writeSizeInfo(l));r&&(c.maxSize="number"===typeof r?g.px2pt(r):this._writeSizeInfo(r));if(l=c.legendOptions)if(c.legendOptions=A.mixin({},l),l=l.customValues)c.legendOptions.customValues=l.slice(0);c.stops&&(c.stops=a.map(c.stops,function(m){m=A.mixin({},m);m.size&&"number"===typeof m.size&&(m.size=g.px2pt(m.size));
return m}))}return c},_writeColorInfo:function(c){c&&(c=A.mixin({},c),c.colors&&(c.colors=a.map(c.colors,function(l){return e.toJsonColor(l)})),c.stops&&(c.stops=a.map(c.stops,function(l){l=A.mixin({},l);l.color&&(l.color=e.toJsonColor(l.color));return l})),c.legendOptions&&(c.legendOptions=A.mixin({},c.legendOptions)));return c},_writeOpacityInfo:function(c){if(c){var l=A.mixin({},c);l.opacityValues&&(l.transparencyValues=a.map(l.opacityValues,function(r){return 100*(1-r)}),delete l.opacityValues);
l.stops&&(l.stops=a.map(l.stops,function(r){r=A.mixin({},r);r.transparency=100*(1-r.opacity);delete r.opacity;return r}));l.legendOptions&&(l.legendOptions=A.mixin({},l.legendOptions))}return l},toJson:function(c){var l=this.visualVariables,r=A.clone(this.authoringInfo),m=c&&c.useLegacyRotationProperties,q=(c=(c=this.getVisualVariablesForType("rotationInfo",!1))&&c[0])&&c.field,v;c&&(c===this.rotationInfo||m)&&(v=c.expression||q&&(A.isFunction(q)?q:"["+q+"]"));l&&(l=a.map(l,function(B){"sizeInfo"===
B.type?B=this._writeSizeInfo(B):"colorInfo"===B.type?B=this._writeColorInfo(B):"opacityInfo"===B.type?(B=this._writeOpacityInfo(B),B.type="transparencyInfo"):"rotationInfo"===B.type&&(B=m?null:A.mixin({},B));return B},this),l=a.filter(l,function(B){return null!=B}));r&&a.forEach(r.visualVariables,function(B){"opacityInfo"===B.type&&(B.type="transparencyInfo")});return{rotationType:v&&(this._getRotationType(c)||"geographic"),rotationExpression:v,colorInfo:this._writeColorInfo(this.colorInfo),transparencyInfo:this._writeOpacityInfo(this.opacityInfo),
sizeInfo:this._writeSizeInfo(this.sizeInfo),visualVariables:l,authoringInfo:r}}});A.setObject("renderer.Renderer",D,d);return D})},"esri/layers/support/attributeUtils":function(){define("dojo/_base/lang dojo/has dojox/encoding/digests/_base dojox/encoding/digests/MD5 ../../kernel ../../support/expressionUtils".split(" "),function(D,A,a,b,g,d){var e={viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,getAttributeId:function(f){return"string"===typeof f?b(f,a.outputTypes.Hex):null},getAttributeIdSource:function(f){if(!f)return null;
var n=f.field,h=f.valueExpression,k=null;if(h)k=h;else if(D.isFunction(n))k=n.toString();else if(n){var c=(h=f.normalizationField)?"field":f.normalizationType;f=parseFloat(f.normalizationTotal);c&&(c=c.toLowerCase(),k=n.toLowerCase()+",norm:"+c,h?k+=","+h.toLowerCase():"percent-of-total"===c&&(n=f,"number"===typeof n&&!isNaN(n)&&Infinity!==n&&-Infinity!==n&&0!==f||(f=null),k+=","+f))}return k},createAttributeCache:function(f,n){if(!f)return null;var h=f.valueExpression,k=d.createSyntaxTree(h),c=e.getAttributeIdSource(f);
return{attributeInfo:f,isNumeric:!n,idSource:c,id:e.getAttributeId(c),hasExpr:!!h,compiledFunc:d.createFunction(k),syntaxTree:k,isScaleDriven:!!f.expression||e.viewScaleRE.test(h),dependsOnView:k?d.dependsOnView(k):!1,dependsOnGeometry:k?d.hasGeometryOperations(k):!1,isJSFunc:D.isFunction(f.field)}}};D.setObject("layers.support.attributeUtils",e,g);return e})},"dojox/encoding/digests/_base":function(){define(["dojo/_base/lang"],function(D){D=D.getObject("dojox.encoding.digests",!0);D.outputTypes=
{Base64:0,Hex:1,String:2,Raw:3};D.addWords=function(A,a){var b=(A&65535)+(a&65535);return(A>>16)+(a>>16)+(b>>16)<<16|b&65535};D.stringToWord=function(A){for(var a=[],b=0,g=8*A.length;b<g;b+=8)a[b>>5]|=(A.charCodeAt(b/8)&255)<<b%32;return a};D.wordToString=function(A){for(var a=[],b=0,g=32*A.length;b<g;b+=8)a.push(String.fromCharCode(A[b>>5]>>>b%32&255));return a.join("")};D.wordToHex=function(A){for(var a=[],b=0,g=4*A.length;b<g;b++)a.push("0123456789abcdef".charAt(A[b>>2]>>b%4*8+4&15)+"0123456789abcdef".charAt(A[b>>
2]>>b%4*8&15));return a.join("")};D.wordToBase64=function(A){for(var a=[],b=0,g=4*A.length;b<g;b+=3)for(var d=(A[b>>2]>>b%4*8&255)<<16|(A[b+1>>2]>>(b+1)%4*8&255)<<8|A[b+2>>2]>>(b+2)%4*8&255,e=0;4>e;e++)8*b+6*e>32*A.length?a.push("\x3d"):a.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6*(3-e)&63));return a.join("")};D.stringToUtf8=function(A){for(var a="",b=-1,g,d;++b<A.length;)g=A.charCodeAt(b),d=b+1<A.length?A.charCodeAt(b+1):0,55296<=g&&56319>=g&&56320<=d&&57343>=
d&&(g=65536+((g&1023)<<10)+(d&1023),b++),127>=g?a+=String.fromCharCode(g):2047>=g?a+=String.fromCharCode(192|g>>>6&31,128|g&63):65535>=g?a+=String.fromCharCode(224|g>>>12&15,128|g>>>6&63,128|g&63):2097151>=g&&(a+=String.fromCharCode(240|g>>>18&7,128|g>>>12&63,128|g>>>6&63,128|g&63));return a};return D})},"dojox/encoding/digests/MD5":function(){define(["./_base"],function(D){function A(f,n){return f<<n|f>>>32-n}function a(f,n,h,k,c,l){return D.addWords(A(D.addWords(D.addWords(n,f),D.addWords(k,l)),
c),h)}function b(f,n,h,k,c,l,r){return a(n&h|~n&k,f,n,c,l,r)}function g(f,n,h,k,c,l,r){return a(n&k|h&~k,f,n,c,l,r)}function d(f,n,h,k,c,l,r){return a(h^(n|~k),f,n,c,l,r)}function e(f,n){f[n>>5]|=128<<n%32;f[(n+64>>>9<<4)+14]=n;for(var h=1732584193,k=-271733879,c=-1732584194,l=271733878,r=0;r<f.length;r+=16){var m=h,q=k,v=c,B=l;h=b(h,k,c,l,f[r+0],7,-680876936);l=b(l,h,k,c,f[r+1],12,-389564586);c=b(c,l,h,k,f[r+2],17,606105819);k=b(k,c,l,h,f[r+3],22,-1044525330);h=b(h,k,c,l,f[r+4],7,-176418897);l=b(l,
h,k,c,f[r+5],12,1200080426);c=b(c,l,h,k,f[r+6],17,-1473231341);k=b(k,c,l,h,f[r+7],22,-45705983);h=b(h,k,c,l,f[r+8],7,1770035416);l=b(l,h,k,c,f[r+9],12,-1958414417);c=b(c,l,h,k,f[r+10],17,-42063);k=b(k,c,l,h,f[r+11],22,-1990404162);h=b(h,k,c,l,f[r+12],7,1804603682);l=b(l,h,k,c,f[r+13],12,-40341101);c=b(c,l,h,k,f[r+14],17,-1502002290);k=b(k,c,l,h,f[r+15],22,1236535329);h=g(h,k,c,l,f[r+1],5,-165796510);l=g(l,h,k,c,f[r+6],9,-1069501632);c=g(c,l,h,k,f[r+11],14,643717713);k=g(k,c,l,h,f[r+0],20,-373897302);
h=g(h,k,c,l,f[r+5],5,-701558691);l=g(l,h,k,c,f[r+10],9,38016083);c=g(c,l,h,k,f[r+15],14,-660478335);k=g(k,c,l,h,f[r+4],20,-405537848);h=g(h,k,c,l,f[r+9],5,568446438);l=g(l,h,k,c,f[r+14],9,-1019803690);c=g(c,l,h,k,f[r+3],14,-187363961);k=g(k,c,l,h,f[r+8],20,1163531501);h=g(h,k,c,l,f[r+13],5,-1444681467);l=g(l,h,k,c,f[r+2],9,-51403784);c=g(c,l,h,k,f[r+7],14,1735328473);k=g(k,c,l,h,f[r+12],20,-1926607734);h=a(k^c^l,h,k,f[r+5],4,-378558);l=a(h^k^c,l,h,f[r+8],11,-2022574463);c=a(l^h^k,c,l,f[r+11],16,1839030562);
k=a(c^l^h,k,c,f[r+14],23,-35309556);h=a(k^c^l,h,k,f[r+1],4,-1530992060);l=a(h^k^c,l,h,f[r+4],11,1272893353);c=a(l^h^k,c,l,f[r+7],16,-155497632);k=a(c^l^h,k,c,f[r+10],23,-1094730640);h=a(k^c^l,h,k,f[r+13],4,681279174);l=a(h^k^c,l,h,f[r+0],11,-358537222);c=a(l^h^k,c,l,f[r+3],16,-722521979);k=a(c^l^h,k,c,f[r+6],23,76029189);h=a(k^c^l,h,k,f[r+9],4,-640364487);l=a(h^k^c,l,h,f[r+12],11,-421815835);c=a(l^h^k,c,l,f[r+15],16,530742520);k=a(c^l^h,k,c,f[r+2],23,-995338651);h=d(h,k,c,l,f[r+0],6,-198630844);l=
d(l,h,k,c,f[r+7],10,1126891415);c=d(c,l,h,k,f[r+14],15,-1416354905);k=d(k,c,l,h,f[r+5],21,-57434055);h=d(h,k,c,l,f[r+12],6,1700485571);l=d(l,h,k,c,f[r+3],10,-1894986606);c=d(c,l,h,k,f[r+10],15,-1051523);k=d(k,c,l,h,f[r+1],21,-2054922799);h=d(h,k,c,l,f[r+8],6,1873313359);l=d(l,h,k,c,f[r+15],10,-30611744);c=d(c,l,h,k,f[r+6],15,-1560198380);k=d(k,c,l,h,f[r+13],21,1309151649);h=d(h,k,c,l,f[r+4],6,-145523070);l=d(l,h,k,c,f[r+11],10,-1120210379);c=d(c,l,h,k,f[r+2],15,718787259);k=d(k,c,l,h,f[r+9],21,-343485551);
h=D.addWords(h,m);k=D.addWords(k,q);c=D.addWords(c,v);l=D.addWords(l,B)}return[h,k,c,l]}D.MD5=function(f,n){var h=n||D.outputTypes.Base64,k=e(D.stringToWord(f),8*f.length);switch(h){case D.outputTypes.Raw:return k;case D.outputTypes.Hex:return D.wordToHex(k);case D.outputTypes.String:return D.wordToString(k);default:return D.wordToBase64(k)}};D.MD5._hmac=function(f,n,h){h=h||D.outputTypes.Base64;var k=D.stringToWord(n);16<k.length&&(k=e(k,8*n.length));var c=[];n=[];for(var l=0;16>l;l++)c[l]=k[l]^
909522486,n[l]=k[l]^1549556828;f=e(c.concat(D.stringToWord(f)),512+8*f.length);f=e(n.concat(f),640);switch(h){case D.outputTypes.Raw:return f;case D.outputTypes.Hex:return D.wordToHex(f);case D.outputTypes.String:return D.wordToString(f);default:return D.wordToBase64(f)}};return D.MD5})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(D,A,a,b,g,d,e){function f(c){return c.replace(/[|\\{}()[\]^$+*?.]/g,
"\\$\x26")}var n={vars:{$feature:"any",$view:"any"}},h=/^\$(feature|aggregatedFeatures)\./i,k={_getSyntaxTree:function(c){return"string"===typeof c?k.createSyntaxTree(c):c},createSyntaxTree:function(c){try{var l=c?d.parseScript(c):null}catch(r){l=null}return l},createFunction:function(c,l){l=l||D.clone(n);var r=k._getSyntaxTree(c);try{var m=r?d.compileScript(r,l):null}catch(q){m=null}return m},createExecContext:function(c,l){return{vars:{$feature:c?e.createFromGraphic(c):new e,$view:l&&l.view},spatialReference:l&&
l.sr}},evalSyntaxTree:function(c,l){try{var r=d.executeScript(c,l)}catch(m){r=null}return r},executeFunction:function(c,l){try{var r=c?c(l):null}catch(m){r=null}return r},executeAsyncFunction:function(c,l){try{var r=c?c(l):(new b).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(m){r=(new b).reject(m)}return r},extractFieldNames:function(c,l){var r=k._getSyntaxTree(c);r=d.extractExpectedFieldLiterals(r);var m=[];A.forEach(r,function(v){h.test(v)&&
(v=v.replace(h,""),m.push(v))});var q=A.filter(m,function(v){return-1!==v.indexOf("*")});m=A.filter(m,function(v){return-1===q.indexOf(v)});l&&A.forEach(q,function(v){var B=new RegExp("^"+v.split(/\*+/).map(f).join(".*")+"$","i");A.forEach(l,function(w){B.test(w)&&m.push(w)})});m.sort();return A.filter(m,function(v,B){return 0===B||m[B-1]!==v})},dependsOnView:function(c){return k.hasVariable(c,"$view")},hasGeometryFunctions:function(c){return(c=k._getSyntaxTree(c))?d.scriptTouchesGeometry(c):!1},
hasGeometryOperations:function(c){return(c=k._getSyntaxTree(c))?d.scriptUsesGeometryEngine(c):!1},enableGeometryOperations:function(){return d.enableGeometrySupport()},hasVariable:function(c,l){var r=k._getSyntaxTree(c);return r?d.referencesMember(r,l):!1},hasFunction:function(c,l){var r=k._getSyntaxTree(c);return r?d.referencesFunction(r,l):!1},createFeatureSetFromLayer:function(c,l){l=l||{};var r=d.featureSetUtils();return r?r.constructFeatureSet(c,l.spatialReference,l.outFields,l.returnGeometry,
l.cache):null},createFeatureSetFromLayerUrl:function(c,l){l=l||{};var r=d.featureSetUtils();return r?r.constructFeatureSetFromUrlRaw(c,l.spatialReference,l.outFields,l.returnGeometry,l.cache):null},createFeatureSetCollectionFromMap:function(c,l){var r=d.featureSetUtils();return r?r.createFeatureSetCollectionFromMap(c,c.spatialReference,l&&l.cache):null},createFeatureSetCollectionFromServiceUrl:function(c,l){l=l||{};var r=d.featureSetUtils();return r?r.createFeatureSetCollectionFromService(c,l.spatialReference,
l.cache):null},hasFeatureSetOperations:function(c){return(c=k._getSyntaxTree(c))?d.scriptUsesFeatureSet(c):!1},enableFeatureSetOperations:function(){return d.enableFeatureSetSupport().then(function(){var c=d.featureSetUtils();c&&c.initialiseMetaDataCache()})},enableAsyncOperations:function(){return d.enableAsyncSupport()}};D.setObject("support.expressionUtils",k,g);return k})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils".split(" "),
function(D,A,a,b,g,d,e,f){function n(L,J){if(null===t)throw Error("Async Arcade must be enabled for this script");return e("csp-restrictions")||!1===x?function(S){return t.executeScript(L,S)}:a.compileScript(L,J,!0)}function h(L,J){void 0===J&&(J=[]);return g.parseScript(L,J)}function k(L,J){if(!0===J.useAsync||!0===L.isAsync){if(null===t)throw Error("Async Arcade must be enabled for this script");return t.executeScript(L,J)}return b.executeScript(L,J)}function c(L,J){return b.referencesMember(L,
J)}function l(L,J){void 0===J&&(J=[]);void 0===L.usesGeometry&&d.findScriptDependencies(L,J);return!0===L.usesGeometry}function r(){return E?E:E=f.create(function(L,J){D(["../geometry/geometryEngine","./functions/geomsync"],function(S,P){u=!0;P.setGeometryEngine(S);L(!0)},function(S){J(S)})})}function m(){return null!==F?F:F=a.enableAsyncSupport().then(function(){return f.create(function(L,J){D(["./arcadeAsyncRuntime"],function(S){try{t=S;S=0;for(var P=C;S<P.length;S++){var Q=P[S];t.extend(Q);a.extend(Q,
"async")}C=null;L(!0)}catch(M){J(M)}},J)})})}function q(){return t?!0:!1}function v(){return G?G:G=m().then(function(){return f.create(function(L,J){D(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(S,P,Q,M,N){try{H=S,t.extend([P,Q,M,N]),a.extend([P,Q,M,N],"async"),y=!0,L(!0)}catch(K){J(K)}},J)})})}function B(L,J){void 0===J&&(J=[]);void 0===L.usesFeatureSet&&d.findScriptDependencies(L,J);return!0===
L.usesFeatureSet}function w(L,J){if(J)for(var S=0;S<J.length;S++)if(c(L,J[S]))return!0;return!1}Object.defineProperty(A,"__esModule",{value:!0});A.featureSetUtils=A.scriptTouchesGeometry=A.loadScriptDependencies=A.scriptIsAsync=A.scriptUsesFeatureSet=A.enableFeatureSetSupport=A.isGeometryEnabled=A.isAsyncEnabled=A.isFeatureSetSupportEnabled=A.enableAsyncSupport=A.enableGeometrySupport=A.scriptUsesGeometryEngine=A.extractExpectedFieldLiterals=A.extractFieldLiterals=A.referencesFunction=A.referencesMember=
A.executeScript=A.parseAndExecuteScript=A.scriptCheck=A.validateScript=A.parseScript=A.extend=A.compileScript=void 0;var z="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),x=function(){if(e("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(L){return!1}}(),y=!1,u=!1,t=null,C=[];A.compileScript=function(L,J){return!0===J.useAsync||!0===L.isAsync?n(L,J):e("csp-restrictions")?function(S){return b.executeScript(L,
S)}:a.compileScript(L,J)};A.extend=function(L){b.extend(L);a.extend(L,"sync");null===t?C.push(L):(a.extend(L,"async"),t.extend(L))};A.parseScript=h;A.validateScript=function(L,J,S){void 0===S&&(S="");return g.validateScript(L,J,S)};A.scriptCheck=function(L,J,S,P){void 0===P&&(P="");return g.scriptCheck(L,J,S,P)};A.parseAndExecuteScript=function(L,J,S){void 0===S&&(S=[]);L=g.parseScript(L,S);return k(L,J)};A.executeScript=k;A.referencesMember=c;A.referencesFunction=function(L,J){return b.referencesFunction(L,
J)};A.extractFieldLiterals=function(L,J){void 0===J&&(J=!1);return g.extractFieldLiterals(L,J)};A.extractExpectedFieldLiterals=function(L){return g.extractExpectedFieldLiterals(L)};A.scriptUsesGeometryEngine=l;var E=null;A.enableGeometrySupport=r;var F=null;A.enableAsyncSupport=m;A.isFeatureSetSupportEnabled=function(){return y};A.isAsyncEnabled=q;A.isGeometryEnabled=function(){return u};var G=null;A.enableFeatureSetSupport=v;A.scriptUsesFeatureSet=B;A.scriptIsAsync=function(L,J){void 0===J&&(J=[]);
void 0===L.isAsync&&d.findScriptDependencies(L,J);return!0===L.isAsync};A.loadScriptDependencies=function(L,J,S,P){void 0===S&&(S=[]);void 0===P&&(P=!1);return f.create(function(Q,M){var N="string"===typeof L?h(L):L,K=[];N&&(!1===u&&(l(N)||P)&&K.push(r()),!1===q()&&(!0===N.isAsync||J)&&K.push(m()),!1===y&&(B(N)||w(N,S))&&K.push(v()));K.length?f.all(K).then(function(){Q(!0)},M):Q(!0)})};A.scriptTouchesGeometry=function(L){if(l(L))return!0;L=d.findFunctionCalls(L);for(var J=!1,S=0;S<L.length;S++)if(-1<
z.indexOf(L[S])){J=!0;break}return J};var H=null;A.featureSetUtils=function(){return H}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C){function E(ha,ma,R){try{return R(ha,null,ma)}catch(Ea){throw Ea;}}function F(ha){return ha instanceof Error?B.reject(ha):B.reject(Error(ha))}function G(ha,ma){try{switch(ma.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return P(ha,ma);case "VariableDeclaration":for(var R=[],Ea=0;Ea<ma.declarations.length;Ea++)R.push(G(ha,ma.declarations[Ea]));return R.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";
case "BlockStatement":return S(ha,ma);case "FunctionDeclaration":var Ia=ma.id.name.toLowerCase(),ea={isAsync:ha.isAsync,spatialReference:ha.spatialReference,console:ha.console,lrucache:ha.lrucache,interceptor:ha.interceptor,services:ha.services,symbols:ha.symbols,mangleMap:ha.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:ha.depthCounter+1,globalScope:ha.globalScope};if(64<ea.depthCounter)throw Error("Exceeded maximum function depth");R="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(Ea=0;Ea<ma.params.length;Ea++){var Ya=ma.params[Ea].name.toLowerCase(),Xa=ca(ha);ea.localScope._SymbolsMap[Ya]=Xa;ea.mangleMap[Ya]=Xa;R+="lscope['"+Xa+"']\x3darguments["+Ea.toString()+"];\n"}!0===ha.isAsync?(R=R+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(S(ea,ma.body)+"\n return lastStatement; "),R+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(R+=S(ea,ma.body)+"\n return lastStatement; }, runtimeCtx))",R+="\n lastStatement \x3d lc.voidOperation; \n");
if(void 0!==ha.globalScope[Ia])var Ba="gscope['"+Ia+"']\x3d"+R;else void 0!==ha.globalScope._SymbolsMap[Ia]?Ba="gscope['"+ha.globalScope._SymbolsMap[Ia]+"']\x3d"+R:(Xa=ca(ha),ha.globalScope._SymbolsMap[Ia]=Xa,ha.mangleMap[Ia]=Xa,Ba="gscope['"+Xa+"']\x3d"+R);return Ba;case "ReturnStatement":var U=null===ma.argument?"return lc.voidOperation":"return "+G(ha,ma.argument);return U;case "IfStatement":if("AssignmentExpression"===ma.test.type||"UpdateExpression"===ma.test.type)throw Error(h.nodeErrorMessage(ma.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var la=G(ha,ma.test),na=I(ha),V="var "+na+" \x3d "+la+";\n if ("+na+" \x3d\x3d\x3d true) {\n"+J(ha,ma.consequent)+"\n }\n";V=null!==ma.alternate?V+("else if ("+na+"\x3d\x3d\x3dfalse)   { \n"+J(ha,ma.alternate)+"}\n"):V+("else if ("+na+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return V+="else { lang.error({type: '"+ma.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var fa="AssignmentExpression"===
ma.expression.type?"lastStatement \x3d lc.voidOperation; "+G(ha,ma.expression)+"; \n ":"lastStatement \x3d "+G(ha,ma.expression)+"; ";return fa;case "AssignmentExpression":return L(ha,ma);case "UpdateExpression":return H(ha,ma);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var qa=[];Ia=Ba=0;for(Ea=ma.quasis;Ia<Ea.length;Ia++){var va=Ea[Ia];qa.push(va.value?JSON.stringify(va.value.cooked):JSON.stringify(""));!1===va.tail&&(qa.push(ma.expressions[Ba]?
"lang.castString(lang.aCheck("+G(ha,ma.expressions[Ba])+", 'TemplateLiteral'))":""),Ba++)}R="(["+qa.join(",")+"]).join('')"}catch(Fb){throw Fb;}return R;case "TemplateElement":return JSON.stringify(ma.value?ma.value.cooked:"");case "ForStatement":R="lastStatement \x3d lc.voidOperation; \n";null!==ma.init&&(R+=G(ha,ma.init)+"; ");var Fa=I(ha),Ca=I(ha);R+="var "+Fa+" \x3d true; \n do { ";null!==ma.update&&(R+=" if ("+Fa+"\x3d\x3d\x3dfalse) {\n "+G(ha,ma.update)+"  \n}\n "+Fa+"\x3dfalse; \n");null!==
ma.test&&(R+="var "+Ca+" \x3d "+G(ha,ma.test)+"; ",R+="if ("+Ca+"\x3d\x3d\x3dfalse) { break; } else if ("+Ca+"!\x3d\x3dtrue) { lang.error({type: '"+ma.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");R+=G(ha,ma.body);null!==ma.update&&(R+="\n "+G(ha,ma.update));return R+("\n"+Fa+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var La=I(ha),Wa=I(ha),Va=I(ha),Ma="var "+La+" \x3d "+G(ha,ma.right)+";\n";"VariableDeclaration"===ma.left.type&&
(Ma+=G(ha,ma.left));var eb="VariableDeclaration"===ma.left.type?ma.left.declarations[0].id.name:ma.left.name;eb=eb.toLowerCase();R="";null!==ha.localScope&&(void 0!==ha.localScope[eb]?R="lscope['"+eb+"']":void 0!==ha.localScope._SymbolsMap[eb]&&(R="lscope['"+ha.localScope._SymbolsMap[eb]+"']"));""===R&&(void 0!==ha.globalScope[eb]?R="gscope['"+eb+"']":void 0!==ha.globalScope._SymbolsMap[eb]&&(R="gscope['"+ha.globalScope._SymbolsMap[eb]+"']"));Ma=Ma+("if ("+La+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(La+") || lc.isString("+La+")) {var ")+(Wa+"\x3d"+La+".length; \nfor(var ")+(Va+"\x3d0; "+Va+"\x3c"+Wa+"; "+Va+"++) {\n");Ma+=R+"\x3d"+Va+";\n";Ma+=G(ha,ma.body);Ma+="\n}\n";Ma+=" lastStatement \x3d lc.voidOperation; \n";Ma+=" \n}\n";Ma+="else if (lc.isImmutableArray("+La+")) {";Ma=Ma+("var "+Wa+"\x3d"+La+".length(); \nfor(var ")+(Va+"\x3d0; "+Va+"\x3c"+Wa+"; "+Va+"++) {\n");Ma+=R+"\x3d"+Va+";\n";Ma+=G(ha,ma.body);Ma+="\n}\n";Ma+=" lastStatement \x3d lc.voidOperation; \n";Ma+=" \n}\n";Ma+="else if (( "+
La+" instanceof lang.Dictionary) || ( "+La+" instanceof lang.Feature)) {";Ma=Ma+("var "+Wa+"\x3d"+La+".keys(); \nfor(var ")+(Va+"\x3d0; "+Va+"\x3c"+Wa+".length; "+Va+"++) {\n");Ma+=R+"\x3d"+Wa+"["+Va+"];\n";Ma+=G(ha,ma.body);Ma+="\n}\n";Ma+=" lastStatement \x3d lc.voidOperation; \n";Ma+=" \n}\n";ha.isAsync&&(Ma+="else if (lc.isFeatureSet("+La+")) {",Ma=Ma+("var "+Wa+"\x3d"+La+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Va+"\x3dlang. graphicToFeature( yield "+Wa+".next(),"+La+"); "+Va+"!\x3dnull; "+
Va+"\x3dlang. graphicToFeature( yield "+Wa+".next(),"+La+")) {\n")+(R+"\x3d"+Va+";\n"),Ma+=G(ha,ma.body),Ma+="\n}\n",Ma+=" lastStatement \x3d lc.voidOperation; \n",Ma+=" \n}\n");return Ma+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return M(ha,ma);case "MemberExpression":try{R=void 0;R=!0===ma.computed?G(ha,ma.property):"'"+ma.property.name+"'";var ib="lang.member("+G(ha,ma.object)+","+R+")"}catch(Fb){throw Fb;}return ib;case "Literal":return null===ma.value||void 0===ma.value?
"null":JSON.stringify(ma.value);case "ThisExpression":throw Error(h.nodeErrorMessage(ma,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==ma.callee.type)throw Error(h.nodeErrorMessage(ma,"RUNTIME","ONLYNODESSUPPORTED"));var lb=ma.callee.name.toLowerCase();R="";null!==ha.localScope&&(void 0!==ha.localScope[lb]?R="lscope['"+lb+"']":void 0!==ha.localScope._SymbolsMap[lb]&&(R="lscope['"+ha.localScope._SymbolsMap[lb]+"']"));""===R&&(void 0!==ha.globalScope[lb]?R="gscope['"+lb+"']":
void 0!==ha.globalScope._SymbolsMap[lb]&&(R="gscope['"+ha.globalScope._SymbolsMap[lb]+"']"));if(""!==R){Ea="[";for(va=0;va<ma.arguments.length;va++)0<va&&(Ea+=", "),Ea+=G(ha,ma.arguments[va]);Ea+="]";qa=ha.isAsync?"(yield lang.callfunc("+R+","+Ea+",runtimeCtx) )":"lang.callfunc("+R+","+Ea+",runtimeCtx)"}else throw Error(h.nodeErrorMessage(ma,"RUNTIME","NOTFOUND"));}catch(Fb){throw Fb;}return qa;case "UnaryExpression":try{var rb="lang.unary("+G(ha,ma.argument)+",'"+ma.operator+"')"}catch(Fb){throw Fb;
}return rb;case "BinaryExpression":try{var sb="lang.binary("+G(ha,ma.left)+","+G(ha,ma.right)+",'"+ma.operator+"')"}catch(Fb){throw Fb;}return sb;case "LogicalExpression":try{if("AssignmentExpression"===ma.left.type||"UpdateExpression"===ma.left.type)throw Error(h.nodeErrorMessage(ma.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===ma.right.type||"UpdateExpression"===ma.right.type)throw Error(h.nodeErrorMessage(ma.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("\x26\x26"===ma.operator||"||"===ma.operator)var tb="(lang.logicalCheck("+G(ha,ma.left)+") "+ma.operator+" lang.logicalCheck("+G(ha,ma.right)+"))";else throw Error(h.nodeErrorMessage(ma,"RUNTIME","ONLYORORAND"));}catch(Fb){throw Fb;}return tb;case "ConditionalExpression":throw Error(h.nodeErrorMessage(ma,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{R=[];for(Ea=0;Ea<ma.elements.length;Ea++)"Literal"===ma.elements[Ea].type?R.push(G(ha,ma.elements[Ea])):R.push("lang.aCheck("+G(ha,ma.elements[Ea])+
",'ArrayExpression')");var Ab="["+R.join(",")+"]"}catch(Fb){throw Fb;}return Ab;case "ObjectExpression":R="lang.dictionary([";for(Ea=0;Ea<ma.properties.length;Ea++){var Cb=ma.properties[Ea],nb="Identifier"===Cb.key.type?"'"+Cb.key.name+"'":G(ha,Cb.key),yb=G(ha,Cb.value);0<Ea&&(R+=",");R+="lang.strCheck("+nb+",'ObjectExpression'),lang.aCheck("+yb+", 'ObjectExpression')"}return R+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(h.nodeErrorMessage(ma,"RUNTIME","NOTSUPPORTED"));
default:throw Error(h.nodeErrorMessage(ma,"RUNTIME","UNREOGNISED"));}}catch(Fb){throw Fb;}}function H(ha,ma){var R=null,Ea="";if("MemberExpression"===ma.argument.type)return R=G(ha,ma.argument.object),Ea=!0===ma.argument.computed?G(ha,ma.argument.property):"'"+ma.argument.property.name+"'","lang.memberupdate("+R+","+Ea+",'"+ma.operator+"',"+ma.prefix+")";R=ma.argument.name.toLowerCase();if(null!==ha.localScope){if(void 0!==ha.localScope[R])return"lang.update(lscope, '"+R+"','"+ma.operator+"',"+ma.prefix+
")";if(void 0!==ha.localScope._SymbolsMap[R])return"lang.update(lscope, '"+ha.localScope._SymbolsMap[R]+"','"+ma.operator+"',"+ma.prefix+")"}if(void 0!==ha.globalScope[R])return"lang.update(gscope, '"+R+"','"+ma.operator+"',"+ma.prefix+")";if(void 0!==ha.globalScope._SymbolsMap[R])return"lang.update(gscope, '"+ha.globalScope._SymbolsMap[R]+"','"+ma.operator+"',"+ma.prefix+")";throw Error("Variable not recognised");}function L(ha,ma){var R=G(ha,ma.right),Ea=null,Ia="";if("MemberExpression"===ma.left.type)return Ea=
G(ha,ma.left.object),Ia=!0===ma.left.computed?G(ha,ma.left.property):"'"+ma.left.property.name+"'","lang.assignmember("+Ea+","+Ia+",'"+ma.operator+"',"+R+")";Ea=ma.left.name.toLowerCase();if(null!==ha.localScope){if(void 0!==ha.localScope[Ea])return"lscope['"+Ea+"']\x3dlang.assign("+R+",'"+ma.operator+"', lscope['"+Ea+"'])";if(void 0!==ha.localScope._SymbolsMap[Ea])return"lscope['"+ha.localScope._SymbolsMap[Ea]+"']\x3dlang.assign("+R+",'"+ma.operator+"', lscope['"+ha.localScope._SymbolsMap[Ea]+"'])"}if(void 0!==
ha.globalScope[Ea])return"gscope['"+Ea+"']\x3dlang.assign("+R+",'"+ma.operator+"', gscope['"+Ea+"'])";if(void 0!==ha.globalScope._SymbolsMap[Ea])return"gscope['"+ha.globalScope._SymbolsMap[Ea]+"']\x3dlang.assign("+R+",'"+ma.operator+"', gscope['"+ha.globalScope._SymbolsMap[Ea]+"'])";throw Error("Variable not recognised");}function J(ha,ma){return"BlockStatement"===ma.type?G(ha,ma):"ReturnStatement"===ma.type||"BreakStatement"===ma.type||"ContinueStatement"===ma.type?G(ha,ma)+"; ":"UpdateExpression"===
ma.type?"lastStatement \x3d "+G(ha,ma)+"; ":"ExpressionStatement"===ma.type?G(ha,ma):"ObjectExpression"===ma.type?"lastStatement \x3d "+G(ha,ma)+"; ":G(ha,ma)+"; "}function S(ha,ma){for(var R="",Ea=0;Ea<ma.body.length;Ea++)R="ReturnStatement"===ma.body[Ea].type?R+(G(ha,ma.body[Ea])+"; \n"):"BreakStatement"===ma.body[Ea].type?R+(G(ha,ma.body[Ea])+"; \n"):"ContinueStatement"===ma.body[Ea].type?R+(G(ha,ma.body[Ea])+"; \n"):"UpdateExpression"===ma.body[Ea].type?R+("lastStatement \x3d "+G(ha,ma.body[Ea])+
"; \n"):"ObjectExpression"===ma.body[Ea].type?R+("lastStatement \x3d "+G(ha,ma.body[Ea])+"; \n"):R+(G(ha,ma.body[Ea])+" \n");return R}function P(ha,ma){var R=null===ma.init?null:G(ha,ma.init);R===n.voidOperation&&(R=null);var Ea=ma.id.name.toLowerCase();if(null!==ha.localScope){if(void 0!==ha.localScope[Ea])return"lscope['"+Ea+"']\x3d"+R+"; ";if(void 0!==ha.localScope._SymbolsMap[Ea])return"lscope['"+ha.localScope._SymbolsMap[Ea]+"']\x3d"+R+"; ";var Ia=ca(ha);ha.localScope._SymbolsMap[Ea]=Ia;ha.mangleMap[Ea]=
Ia;return"lscope['"+Ia+"']\x3d"+R+"; "}if(void 0!==ha.globalScope[Ea])return"gscope['"+Ea+"']\x3d"+R+"; ";if(void 0!==ha.globalScope._SymbolsMap[Ea])return"gscope['"+ha.globalScope._SymbolsMap[Ea]+"']\x3d"+R+"; ";Ia=ca(ha);ha.globalScope._SymbolsMap[Ea]=Ia;ha.mangleMap[Ea]=Ia;return"gscope['"+Ia+"']\x3d"+R+"; "}function Q(ha,ma,R){ma=ma.toLowerCase();switch(ma){case "hasz":return ha=ha.hasZ,void 0===ha?!1:ha;case "hasm":return ha=ha.hasM,void 0===ha?!1:ha;case "spatialreference":return ma=ha.spatialReference._arcadeCacheId,
void 0===ma&&(R=!0,Object.freeze&&Object.isFrozen(ha.spatialReference)&&(R=!1),R&&(Da++,ma=ha.spatialReference._arcadeCacheId=Da)),ha=new g({wkt:ha.spatialReference.wkt,wkid:ha.spatialReference.wkid}),void 0!==ma&&(ha._arcadeCacheId="SPREF"+ma.toString()),ha}switch(ha.type){case "extent":switch(ma){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ha=ha[ma],void 0!==ha?ha:null;case "type":return"Extent"}break;case "polygon":switch(ma){case "rings":return ma=
ha.getCacheValue("_arcadeCacheId"),void 0===ma&&(Da++,ma=Da,ha.setCacheValue("_arcadeCacheId",ma)),ha=new e(ha.rings,ha.spatialReference,!0===ha.hasZ,!0===ha.hasM,ma);case "type":return"Polygon"}break;case "point":switch(ma){case "x":case "y":case "z":case "m":return void 0!==ha[ma]?ha[ma]:null;case "type":return"Point"}break;case "polyline":switch(ma){case "paths":return ma=ha.getCacheValue("_arcadeCacheId"),void 0===ma&&(Da++,ma=Da,ha.setCacheValue("_arcadeCacheId",ma)),ha=new e(ha.paths,ha.spatialReference,
!0===ha.hasZ,!0===ha.hasM,ma);case "type":return"Polyline"}break;case "multipoint":switch(ma){case "points":return ma=ha.getCacheValue("_arcadeCacheId"),void 0===ma&&(Da++,ma=Da,ha.setCacheValue("_arcadeCacheId",ma)),ha=new f(ha.points,ha.spatialReference,!0===ha.hasZ,!0===ha.hasM,ma,1);case "type":return"Multipoint"}}throw Error(h.nodeErrorMessage(R,"RUNTIME","PROPERTYNOTFOUND"));}function M(ha,ma){try{var R=ma.name.toLowerCase();if(null!==ha.localScope){if(void 0!==ha.localScope[R])return"lscope['"+
R+"']";if(void 0!==ha.localScope._SymbolsMap[R])return"lscope['"+ha.localScope._SymbolsMap[R]+"']"}if(void 0!==ha.globalScope[R])return"gscope['"+R+"']";if(void 0!==ha.globalScope._SymbolsMap[R])return"gscope['"+ha.globalScope._SymbolsMap[R]+"']";throw Error(h.nodeErrorMessage(ma,"RUNTIME","VARIABLENOTFOUND"));}catch(Ea){throw Ea;}}function N(ha){return null===ha?"":n.isArray(ha)||n.isImmutableArray(ha)?"Array":n.isDate(ha)?"Date":n.isString(ha)?"String":n.isBoolean(ha)?"Boolean":n.isNumber(ha)?"Number":
ha instanceof b?"Attachment":ha instanceof a?"Portal":ha instanceof g?"Dictionary":ha instanceof d?"Feature":ha instanceof y?"Point":ha instanceof u?"Polygon":ha instanceof t?"Polyline":ha instanceof x?"Multipoint":ha instanceof w?"Extent":n.isFunctionParameter(ha)?"Function":n.isFeatureSet(ha)?"FeatureSet":n.isFeatureSetCollection(ha)?"FeatureSetCollection":ha===n.voidOperation?"":"number"===typeof ha&&isNaN(ha)?"Number":"Unrecognised Type"}function K(ha,ma,R,Ea){try{if(n.equalityTest(ma[R],Ea))return ma[R+
1];var Ia=ma.length-R;return 1===Ia?ma[R]:2===Ia?null:3===Ia?ma[R+2]:K(ha,ma,R+2,Ea)}catch(ea){throw ea;}}function X(ha,ma,R,Ea){try{if(!0===Ea)return ma[R+1];if(3===ma.length-R)return ma[R+2];var Ia=ma[R+2];if(!1===n.isBoolean(Ia))throw Error("WHEN needs boolean test conditions");return X(ha,ma,R+2,Ia)}catch(ea){throw ea;}}function da(ha,ma){var R=ha.length,Ea=Math.floor(R/2);if(0===R)return[];if(1===R)return[ha[0]];var Ia=da(ha.slice(0,Ea),ma);R=da(ha.slice(Ea,R),ma);for(Ea=[];0<Ia.length||0<R.length;)if(0<
Ia.length&&0<R.length){var ea=ma(Ia[0],R[0]);isNaN(ea)&&(ea=0);0>=ea?(Ea.push(Ia[0]),Ia=Ia.slice(1)):(Ea.push(R[0]),R=R.slice(1))}else 0<Ia.length?(Ea.push(Ia[0]),Ia=Ia.slice(1)):0<R.length&&(Ea.push(R[0]),R=R.slice(1));return Ea}function Y(ha,ma){try{var R=ha.length,Ea=Math.floor(R/2);if(0===R)return B.resolve([]);if(1===R)return B.resolve([ha[0]]);var Ia=[Y(ha.slice(0,Ea),ma),Y(ha.slice(Ea,R),ma)];return B.all(Ia).then(function(ea){return aa(ea[0],ea[1],ma,[])})}catch(ea){return B.reject(ea)}}function aa(ha,
ma,R,Ea){return B.create(function(Ia,ea){0<ha.length||0<ma.length?0<ha.length&&0<ma.length?R(ha[0],ma[0]).then(function(Ya){try{isNaN(Ya)&&(Ya=1),0>=Ya?(Ea.push(ha[0]),ha=ha.slice(1)):(Ea.push(ma[0]),ma=ma.slice(1)),aa(ha,ma,R,Ea).then(function(Xa){Ia(Xa)},ea)}catch(Xa){ea(Xa)}},ea):0<ha.length?(Ea.push(ha[0]),ha=ha.slice(1),aa(ha,ma,R,Ea).then(function(Ya){Ia(Ya)},ea)):0<ma.length&&(Ea.push(ma[0]),ma=ma.slice(1),aa(ha,ma,R,Ea).then(function(Ya){Ia(Ya)},ea)):Ia(Ea)})}function ca(ha){ha.symbols.symbolCounter++;
return"_T"+ha.symbols.symbolCounter.toString()}function I(ha){ha.symbols.symbolCounter++;return"_Tvar"+ha.symbols.symbolCounter.toString()}function T(ha,ma,R){var Ea={};ha||(ha={});R||(R={});Ea._SymbolsMap={};Ea.textformatting=1;Ea.infinity=1;Ea.pi=1;for(var Ia in ma)Ea[Ia]=1;for(Ia in R)Ea[Ia]=1;for(Ia in ha)Ea[Ia]=1;return Ea}function ba(ha,ma){for(var R={mode:ma,compiled:!0,functions:{},signatures:[],failDefferred:F,standardFunction:E,standardFunctionAsync:E,evaluateIdentifier:pa},Ea=0;Ea<ha.length;Ea++)ha[Ea].registerFunctions(R);
if("sync"===ma){for(var Ia in R.functions)Ha[Ia]=new n.NativeFunction(R.functions[Ia]),ra.prototype[Ia]=Ha[Ia];for(Ea=0;Ea<R.signatures.length;Ea++)h.addFunctionDeclaration(R.signatures[Ea],"sync")}else{for(Ia in R.functions)ta[Ia]=new n.NativeFunction(R.functions[Ia]),Aa.prototype[Ia]=ta[Ia];for(Ea=0;Ea<R.signatures.length;Ea++)h.addFunctionDeclaration(R.signatures[Ea],"async")}}function pa(ha,ma){var R=ma.name;if("_SymbolsMap"===R)throw"Illegal";if(0<ha.localStack.length){if("_t"!==R.substr(0,2).toLowerCase()&&
void 0!==ha.localStack[ha.localStack.length-1][R])return ha.localStack[ha.localStack.length-1][R];var Ea=ha.mangleMap[R];if(void 0!==Ea&&void 0!==ha.localStack[ha.localStack.length-1][Ea])return ha.localStack[ha.localStack.length-1][Ea]}if("_t"!==R.substr(0,2).toLowerCase()&&void 0!==ha.globalScope[R]||1===ha.globalScope._SymbolsMap[R])return ha.globalScope[R];R=ha.mangleMap[R];if(void 0!==R)return ha.globalScope[R]}function ya(ha){}Object.defineProperty(A,"__esModule",{value:!0});A.enableAsyncSupport=
A.compileScript=A.referencesFunction=A.referencesMember=A.validateScript=A.extractExpectedFieldLiterals=A.extractFieldLiterals=A.executeScript=A.extend=A.functionHelper=void 0;var Da=0,Ha={};k.registerFunctions(Ha,E);c.registerFunctions(Ha,E);v.registerFunctions(Ha,E);m.registerFunctions(Ha,E);l.registerFunctions(Ha,E);q.registerFunctions(Ha,E);Ha["typeof"]=function(ha,ma){return E(ha,ma,function(R,Ea,Ia){n.pcCheck(Ia,1,1);R=N(Ia[0]);if("Unrecognised Type"===R)throw Error("Unrecognised Type");return R})};
Ha.iif=function(ha,ma){try{return E(ha,ma,function(R,Ea,Ia){n.pcCheck(Ia,3,3);if(!1===n.isBoolean(Ia[0]))throw Error("IF Function must have a boolean test condition");return Ia[0]?Ia[1]:Ia[2]})}catch(R){throw R;}};Ha.decode=function(ha,ma){try{return E(ha,ma,function(R,Ea,Ia){if(2>Ia.length)throw Error("Missing Parameters");if(2===Ia.length)return Ia[1];if(0===(Ia.length-1)%2)throw Error("Must have a default value result.");return K(ha,Ia,1,Ia[0])})}catch(R){throw R;}};Ha.when=function(ha,ma){try{return E(ha,
ma,function(R,Ea,Ia){if(3>Ia.length)throw Error("Missing Parameters");if(0===Ia.length%2)throw Error("Must have a default value result.");R=Ia[0];if(!1===n.isBoolean(R))throw Error("WHEN needs boolean test conditions");return X(ha,Ia,0,R)})}catch(R){throw R;}};Ha.top=function(ha,ma){return E(ha,ma,function(R,Ea,Ia){n.pcCheck(Ia,2,2);if(n.isArray(Ia[0]))return n.toNumber(Ia[1])>=Ia[0].length?Ia[0].slice(0):Ia[0].slice(0,n.toNumber(Ia[1]));if(n.isImmutableArray(Ia[0]))return n.toNumber(Ia[1])>=Ia[0].length()?
Ia[0].slice(0):Ia[0].slice(0,n.toNumber(Ia[1]));throw Error("Top cannot accept this parameter type");})};Ha.first=function(ha,ma){return E(ha,ma,function(R,Ea,Ia){n.pcCheck(Ia,1,1);return n.isArray(Ia[0])?0===Ia[0].length?null:Ia[0][0]:n.isImmutableArray(Ia[0])?0===Ia[0].length()?null:Ia[0].get(0):null})};Ha.sort=function(ha,ma){return E(ha,ma,function(R,Ea,Ia){n.pcCheck(Ia,1,2);Ea=Ia[0];n.isImmutableArray(Ea)&&(Ea=Ea.toArray());if(!1===n.isArray(Ea))throw Error("Illegal Argument");if(1<Ia.length){if(!1===
n.isFunctionParameter(Ia[1]))throw Error("Illegal Argument");var ea=function(la,na){return Ja.callfunc(Ia[1],[la,na],R)};return ha.isAsync?Y(Ea,ea):Ea=da(Ea,function(la,na){return ea(la,na)})}if(0===Ea.length)return[];for(var Ya={},Xa=0;Xa<Ea.length;Xa++){var Ba=N(Ea[Xa]);""!==Ba&&(Ya[Ba]=!0)}if(!0===Ya.Array||!0===Ya.Dictionary||!0===Ya.Feature||!0===Ya.Point||!0===Ya.Polygon||!0===Ya.Polyline||!0===Ya.Multipoint||!0===Ya.Extent||!0===Ya.Function)return Ea.slice(0);Xa=0;Ba="";for(var U in Ya)Xa++,
Ba=U;return Ea=1<Xa||"String"===Ba?da(Ea,function(la,na){if(null===la||void 0===la||la===n.voidOperation)return null===na||void 0===na||na===n.voidOperation?0:1;if(null===na||void 0===na||na===n.voidOperation)return-1;var V=n.toString(la),fa=n.toString(na);return V<fa?-1:V===fa?0:1}):"Number"===Ba?da(Ea,function(la,na){return la-na}):"Boolean"===Ba?da(Ea,function(la,na){return la===na?0:na?-1:1}):"Date"===Ba?da(Ea,function(la,na){return na-la}):Ea.slice(0)})};var ta={},xa;for(xa in Ha)ta[xa]=new n.NativeFunction(Ha[xa]);
r.registerFunctions(Ha,E);for(xa in Ha)Ha[xa]=new n.NativeFunction(Ha[xa]);var ra=function(){};ra.prototype=Ha;var Aa=function(){};Aa.prototype=ta;A.functionHelper={fixSpatialReference:n.fixSpatialReference,parseArguments:function(ha,ma){for(var R=[],Ea=0;Ea<ma.arguments.length;Ea++)R.push(G(ha,ma.arguments[Ea]));return R},standardFunction:E};A.extend=ba;A.executeScript=function(ha,ma){return ha(ma)};A.extractFieldLiterals=function(ha,ma){void 0===ma&&(ma=!1);return h.findFieldLiterals(ha)};A.extractExpectedFieldLiterals=
function(ha){return h.findExpectedFieldLiterals(ha)};A.validateScript=function(ha,ma){return h.validateScript(ha,ma,"sync")};A.referencesMember=function(ha,ma){return h.referencesMember(ha,ma)};A.referencesFunction=function(ha,ma){return h.referencesFunction(ha,ma)};var ua=0,Ja={error:function(ha,ma,R){throw Error(h.nodeErrorMessage(ha,ma,R));},__awaiter:function(ha,ma,R,Ea){return B.create(function(Ia,ea){function Ya(U){try{Ba(Ea.next(U))}catch(la){ea(la)}}function Xa(U){try{Ba(Ea["throw"](U))}catch(la){ea(la)}}
function Ba(U){U.done?Ia(U.value):U.value&&U.value.then?U.value.then(Ya,Xa):(ua++,0===ua%100?setTimeout(function(){ua=0;Ya(U.value)},0):Ya(U.value))}Ba((Ea=Ea.apply(ha,ma||[])).next())})},functionDepthchecker:function(ha,ma){return function(){ma.depthCounter++;ma.localStack.push([]);if(64<ma.depthCounter)throw Error("Exceeded maximum function depth");var R=ha.apply(this,arguments);if(B.isPromiseLike(R))return R.then(function(Ea){ma.depthCounter--;--ma.localStack.length;return Ea});ma.depthCounter--;
--ma.localStack.length;return R}},castString:function(ha){return n.toString(ha)},aCheck:function(ha,ma){if(n.isFunctionParameter(ha))throw Error(h.nodeErrorMessage({type:ma},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return ha===n.voidOperation?null:ha},Dictionary:g,Feature:d,dictionary:function(ha){for(var ma={},R=0;R<ha.length;R+=2){if(n.isFunctionParameter(ha[R+1]))throw Error("Illegal Argument");if(!1===n.isString(ha[R]))throw Error("Illegal Argument");ma[ha[R].toString()]=ha[R+1]===n.voidOperation?
null:ha[R+1]}ha=new g(ma);ha.immutable=!1;return ha},strCheck:function(ha){if(!1===n.isString(ha))throw Error("Illegal Argument");return ha},unary:function(ha,ma){if(n.isBoolean(ha)){if("!"===ma)return!ha;if("-"===ma)return-1*n.toNumber(ha);if("+"===ma)return 1*n.toNumber(ha);if("~"===ma)return~n.toNumber(ha);throw Error(h.nodeErrorMessage({type:"UnaryExpression",operator:ma,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===ma)return-1*n.toNumber(ha);if("+"===ma)return 1*
n.toNumber(ha);if("~"===ma)return~n.toNumber(ha);throw Error(h.nodeErrorMessage({type:"UnaryExpression",operator:ma,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(ha){if(!1===n.isBoolean(ha))throw Error(h.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return ha},logical:function(ha,ma,R){if(n.isBoolean(ha)&&n.isBoolean(ma))switch(R){case "||":return ha||ma;case "\x26\x26":return ha&&ma}throw Error(h.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(ha,ma,R){switch(R){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return n.binaryOperator(n.toNumber(ha),n.toNumber(ma),R);case "\x3d\x3d":return n.equalityTest(ha,ma);case "\x3d":return n.equalityTest(ha,ma);case "!\x3d":return!n.equalityTest(ha,ma);case "\x3c":return n.greaterThanLessThan(ha,ma,R);case "\x3e":return n.greaterThanLessThan(ha,ma,R);case "\x3c\x3d":return n.greaterThanLessThan(ha,
ma,R);case "\x3e\x3d":return n.greaterThanLessThan(ha,ma,R);case "+":return n.isString(ha)||n.isString(ma)?n.toString(ha)+n.toString(ma):n.toNumber(ha)+n.toNumber(ma);case "-":return n.toNumber(ha)-n.toNumber(ma);case "*":return n.toNumber(ha)*n.toNumber(ma);case "/":return n.toNumber(ha)/n.toNumber(ma);case "%":return n.toNumber(ha)%n.toNumber(ma);default:throw Error(h.nodeErrorMessage({type:"BinaryExpression",operator:R,left:ha,right:ma},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(ha,
ma,R){switch(ma){case "\x3d":return ha===n.voidOperation?null:ha;case "/\x3d":return n.toNumber(R)/n.toNumber(ha);case "*\x3d":return n.toNumber(R)*n.toNumber(ha);case "-\x3d":return n.toNumber(R)-n.toNumber(ha);case "+\x3d":return n.isString(R)||n.isString(ha)?n.toString(R)+n.toString(ha):n.toNumber(R)+n.toNumber(ha);case "%\x3d":return n.toNumber(R)%n.toNumber(ha);default:throw Error(h.nodeErrorMessage({type:"AssignmentExpression",operator:ma,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));
}},update:function(ha,ma,R,Ea){var Ia=n.toNumber(ha[ma]);ha[ma]="++"===R?Ia+1:Ia-1;return!1===Ea?Ia:"++"===R?Ia+1:Ia-1},graphicToFeature:function(ha,ma){return null===ha?null:d.createFromGraphicLikeObject(ha.geometry,ha.attributes,ma)},memberupdate:function(ha,ma,R,Ea){if(n.isArray(ha))if(n.isNumber(ma)){0>ma&&(ma=ha.length+ma);if(0>ma||ma>=ha.length)throw Error("Assignment outside of array bounds");var Ia=n.toNumber(ha[ma]);ha[ma]="++"===R?Ia+1:Ia-1}else throw Error("Invalid Parameter");else if(ha instanceof
g){if(!1===n.isString(ma))throw Error("Dictionary accessor must be a string");if(!0===ha.hasField(ma))Ia=n.toNumber(ha.field(ma)),ha.setField(ma,"++"===R?Ia+1:Ia-1);else throw Error("Invalid Parameter");}else if(ha instanceof d){if(!1===n.isString(ma))throw Error("Feature accessor must be a string");if(!0===ha.hasField(ma))Ia=n.toNumber(ha.field(ma)),ha.setField(ma,"++"===R?Ia+1:Ia-1);else throw Error("Invalid Parameter");}else{if(n.isImmutableArray(ha))throw Error("Array is Immutable");throw Error("Invalid Parameter");
}return!1===Ea?Ia:"++"===R?Ia+1:Ia-1},assignmember:function(ha,ma,R,Ea){if(n.isArray(ha))if(n.isNumber(ma)){0>ma&&(ma=ha.length+ma);if(0>ma||ma>ha.length)throw Error("Assignment outside of array bounds");if(ma===ha.length&&"\x3d"!==R)throw Error("Invalid Parameter");ha[ma]=this.assign(Ea,R,ha[ma])}else throw Error("Invalid Parameter");else if(ha instanceof g){if(!1===n.isString(ma))throw Error("Dictionary accessor must be a string");if(!0===ha.hasField(ma))ha.setField(ma,this.assign(Ea,R,ha.field(ma)));
else{if("\x3d"!==R)throw Error("Invalid Parameter");ha.setField(ma,this.assign(Ea,R,null))}}else if(ha instanceof d){if(!1===n.isString(ma))throw Error("Feature accessor must be a string");if(!0===ha.hasField(ma))ha.setField(ma,this.assign(Ea,R,ha.field(ma)));else{if("\x3d"!==R)throw Error("Invalid Parameter");ha.setField(ma,this.assign(Ea,R,null))}}else{if(n.isImmutableArray(ha))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(ha,ma){if(null===ha)throw Error(h.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(ha instanceof g||ha instanceof d){if(n.isString(ma))return ha.field(ma);throw Error(h.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(ha instanceof z){if(n.isString(ma))return Q(ha,ma,"MemberExpression");throw Error(h.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(n.isArray(ha)){if(n.isNumber(ma)&&isFinite(ma)&&
Math.floor(ma)===ma){0>ma&&(ma=ha.length+ma);if(ma>=ha.length||0>ma)throw Error(h.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ha[ma]}throw Error(h.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(n.isString(ha)){if(n.isNumber(ma)&&isFinite(ma)&&Math.floor(ma)===ma){0>ma&&(ma=ha.length+ma);if(ma>=ha.length||0>ma)throw Error(h.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ha[ma]}throw Error(h.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(n.isImmutableArray(ha)&&n.isNumber(ma)&&isFinite(ma)&&Math.floor(ma)===ma){0>ma&&(ma=ha.length()+ma);if(ma>=ha.length()||0>ma)throw Error(h.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return ha.get(ma)}throw Error(h.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(ha,ma,R){return ha instanceof n.NativeFunction?ha.fn(R,ma):ha instanceof n.SizzleFunction?ha.fn.apply(this,ma):ha.apply(this,ma)}};A.compileScript=function(ha,ma,R){void 0===ma&&(ma=null);void 0===R&&(R=!1);null===ma&&(ma={vars:{},customfunctions:{}});ma={isAsync:R,globalScope:T(ma.vars,R?ta:Ha,ma.customfunctions),localScope:null,mangleMap:{},console:ya,lrucache:ma.lrucache,interceptor:ma.interceptor,services:ma.services,
symbols:{symbolCounter:0}};ha=G(ma,ha.body[0].body);""===ha&&(ha="lc.voidOperation; ");ma={lc:n,lang:Ja,mangles:ma.mangleMap,postProcess:function(Ea){Ea instanceof n.ReturnResult&&(Ea=Ea.value);Ea instanceof n.ImplicitResult&&(Ea=Ea.value);Ea===n.voidOperation&&(Ea=null);if(Ea===n.breakResult)throw Error("Cannot return BREAK");if(Ea===n.continueResult)throw Error("Cannot return CONTINUE");if(n.isFunctionParameter(Ea))throw Error("Cannot return FUNCTION");return Ea},prepare:function(Ea,Ia){var ea=
Ea.spatialReference;if(null===ea||void 0===ea)ea=new C({wkid:102100});var Ya=Ea.vars,Xa=Ea.customfunctions,Ba=Ia?new Aa:new ra;Ya||(Ya={});Xa||(Xa={});var U=new g({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});U.immutable=!1;Ba._SymbolsMap={textformatting:1,infinity:1,pi:1};Ba.textformatting=U;Ba.infinity=Number.POSITIVE_INFINITY;Ba.pi=Math.PI;for(var la in Xa)Ba[la]=Xa[la],Ba._SymbolsMap[la]=1;for(la in Ya)Ba._SymbolsMap[la]=1,Ba[la]=Ya[la]&&"esri.Graphic"===
Ya[la].declaredClass?d.createFromGraphic(Ya[la]):Ya[la];return{localStack:[],isAsync:Ia,mangleMap:this.mangles,spatialReference:ea,globalScope:Ba,abortSignal:void 0===Ea.abortSignal||null===Ea.abortSignal?{aborted:!1}:Ea.abortSignal,localScope:null,services:Ea.services,console:Ea.console?Ea.console:ya,lrucache:Ea.lrucache,interceptor:Ea.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};return(new Function("context","spatialReference",R?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+
ha+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+ha+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(ma)};A.enableAsyncSupport=function(){return B.create(function(ha,ma){D(["./functions/geomasync"],function(R){ba([R],"async");ha(!0)},
function(R){ma(R)})})}})},"esri/arcade/ArcadePortal":function(){var D=this&&this.__extends||function(){var A=function(a,b){A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(g[e]=d[e])};return A(a,b)};return function(a,b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");A(a,b);a.prototype=
null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./Dictionary"],function(A,a,b){return function(g){function d(e){var f=g.call(this)||this;f.immutable=!1;f.setField("url",e);f.immutable=!0;return f}D(d,g);return d}(b)})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(D,A,a,b,g){function d(f,n){void 0===n&&(n=!1);if(null===f||void 0===f)return null;if(b.isNumber(f))return b.toNumber(f);
if(b.isBoolean(f))return b.toBoolean(f);if(b.isString(f))return b.toString(f);if(b.isDate(f))return b.toDate(f);if(b.isArray(f)){for(var h=[],k=0;k<f.length;k++)h.push(d(f[k],n));return h}k=new e;k.immutable=!1;for(var c=0,l=Object.keys(f);c<l.length;c++){var r=l[c];h=f[r];void 0!==h&&k.setField(r,d(h,n))}k.immutable=n;return k}var e=function(){function f(n){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=n instanceof f?n.attributes:
void 0===n?{}:null===n?{}:n}f.prototype.field=function(n){var h=n.toLowerCase(),k=this.attributes[n];if(void 0!==k)return k;for(var c in this.attributes)if(c.toLowerCase()===h)return this.attributes[c];throw Error("Field not Found : "+n);};f.prototype.setField=function(n,h){if(this.immutable)throw Error("Dictionary is Immutable");var k=n.toLowerCase();if(void 0===this.attributes[n])for(var c in this.attributes)if(c.toLowerCase()===k){this.attributes[c]=h;return}this.attributes[n]=h};f.prototype.hasField=
function(n){var h=n.toLowerCase();if(void 0!==this.attributes[n])return!0;for(var k in this.attributes)if(k.toLowerCase()===h)return!0;return!1};f.prototype.keys=function(){var n=[],h;for(h in this.attributes)n.push(h);return n=n.sort()};f.prototype.castToText=function(){var n="",h;for(h in this.attributes){""!==n&&(n+=",");var k=this.attributes[h];null==k?n+=JSON.stringify(h)+":null":b.isBoolean(k)||b.isNumber(k)||b.isString(k)?n+=JSON.stringify(h)+":"+JSON.stringify(k):k instanceof g?n+=JSON.stringify(h)+
":"+b.toStringExplicit(k):k instanceof a?n+=JSON.stringify(h)+":"+b.toStringExplicit(k):k instanceof Array?n+=JSON.stringify(h)+":"+b.toStringExplicit(k):k instanceof Date?n+=JSON.stringify(h)+":"+JSON.stringify(k):null!==k&&"object"===typeof k&&void 0!==k.castToText&&(n+=JSON.stringify(h)+":"+k.castToText())}return"{"+n+"}"};f.convertObjectToArcadeDictionary=function(n,h){void 0===h&&(h=!0);var k=new f;k.immutable=!1;for(var c in n){var l=n[c];void 0!==l&&k.setField(c.toString(),d(l))}k.immutable=
h;return k};f.convertJsonToArcade=function(n,h){void 0===h&&(h=!1);return d(n,h)};return f}();return e})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(D,A){return function(){function a(b){void 0===b&&(b=[]);this._elements=b}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(b){return this._elements[b]};a.prototype.toArray=function(){for(var b=[],g=0;g<this.length();g++)b.push(this.get(g));return b};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q){function v(I,T,ba){return""===T||null===T||void 0===T||T===ba||T===ba?I:I=I.split(T).join(ba)}function B(I){return I instanceof Y||I instanceof a||I instanceof aa}function w(I){return z(I)||y(I)||C(I)||x(I)||null===I||I===A.voidOperation||"number"===typeof I?!0:!1}function z(I){return"string"===typeof I||I instanceof String}function x(I){return"boolean"===typeof I}function y(I){return"number"===typeof I}function u(I){return I instanceof Array}function t(I){return I instanceof
b}function C(I){return I instanceof Date}function E(I,T){if(!1===isNaN(I)){if(void 0===T||null===T||""===T)return I.toString();T=v(T,"\u2030","");T=v(T,"\u00a4","");return m.format(I,{pattern:T})}return I.toString()}function F(I,T){var ba=r.DateTime.fromJSDate(I);return void 0===T||null===T||""===T?ba.toISO({suppressMilliseconds:!0}):ba.toFormat(G(T),{locale:q.locale,numberingSystem:"latn"})}function G(I){I=I.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var T="",ba=0;for(I=I.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);ba<
I.length;ba++){var pa=I[ba];switch(pa){case "D":T+="d";break;case "DD":T+="dd";break;case "DDD":T+="o";break;case "d":T+="c";break;case "ddd":T+="ccc";break;case "dddd":T+="cccc";break;case "M":T+="L";break;case "MM":T+="LL";break;case "MMM":T+="LLL";break;case "MMMM":T+="LLLL";break;case "YY":T+="yy";break;case "Y":case "YYYY":T+="yyyy";break;case "Q":T+="q";break;case "Z":T+="ZZ";break;case "ZZ":T+="ZZZ";break;case "S":T+="'S'";break;case "SS":T+="'SS'";break;case "SSS":T+="u";break;case "A":case "a":T+=
"a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":T+=pa;break;default:T=2<=pa.length&&"["===pa.slice(0,1)&&"]"===pa.slice(-1)?T+("'"+pa.slice(1,-1)+"'"):T+("'"+pa+"'")}}return T}function H(I,T,ba){switch(ba){case "\x3e":return I>T;case "\x3c":return I<T;case "\x3e\x3d":return I>=T;case "\x3c\x3d":return I<=T}return!1}function L(I,T){if(I===T||null===I&&T===A.voidOperation||null===T&&I===A.voidOperation)return!0;if(C(I)&&C(T))return I.getTime()===
T.getTime();if(I instanceof g||I instanceof d)return I.equalityTest(T);if(I instanceof k&&T instanceof k){var ba=I.getCacheValue("_arcadeCacheId"),pa=T.getCacheValue("_arcadeCacheId");if(void 0!==ba&&null!==ba)return ba===pa}return void 0!==I&&void 0!==T&&null!==I&&null!==T&&"object"===typeof I&&"object"===typeof T&&(I._arcadeCacheId===T._arcadeCacheId&&void 0!==I._arcadeCacheId&&null!==I._arcadeCacheId||I._underlyingGraphic===T._underlyingGraphic&&void 0!==I._underlyingGraphic&&null!==I._underlyingGraphic)?
!0:!1}function J(I,T){if(z(I))return I;if(null===I)return"";if(y(I))return E(I,T);if(x(I))return I.toString();if(C(I))return F(I,T);if(I instanceof n)return JSON.stringify(I.toJson());if(u(I)){for(var ba=[],pa=0;pa<I.length;pa++)ba[pa]=P(I[pa]);return"["+ba.join(",")+"]"}if(I instanceof b){ba=[];for(pa=0;pa<I.length();pa++)ba[pa]=P(I.get(pa));return"["+ba.join(",")+"]"}return null!==I&&"object"===typeof I&&void 0!==I.castToText?I.castToText():B(I)?"object, Function":""}function S(I,T){if(z(I))return I;
if(null===I)return"";if(y(I))return E(I,T);if(x(I))return I.toString();if(C(I))return F(I,T);if(I instanceof n)return I instanceof f?'{"xmin":'+I.xmin.toString()+',"ymin":'+I.ymin.toString()+","+(I.hasZ?'"zmin":'+I.zmin.toString()+",":"")+(I.hasM?'"mmin":'+I.mmin.toString()+",":"")+'"xmax":'+I.xmax.toString()+',"ymax":'+I.ymax.toString()+","+(I.hasZ?'"zmax":'+I.zmax.toString()+",":"")+(I.hasM?'"mmax":'+I.mmax.toString()+",":"")+'"spatialReference":'+K(I.spatialReference)+"}":K(I.toJson(),function(ya,
Da){return ya.key===Da.key?0:"spatialReference"===ya.key?1:"spatialReference"===Da.key||ya.key<Da.key?-1:ya.key>Da.key?1:0});if(u(I)){for(var ba=[],pa=0;pa<I.length;pa++)ba[pa]=P(I[pa]);return"["+ba.join(",")+"]"}if(I instanceof b){ba=[];for(pa=0;pa<I.length();pa++)ba[pa]=P(I.get(pa));return"["+ba.join(",")+"]"}return null!==I&&"object"===typeof I&&void 0!==I.castToText?I.castToText():B(I)?"object, Function":""}function P(I){return null===I?"null":x(I)||y(I)||z(I)?JSON.stringify(I):I instanceof n||
I instanceof b||I instanceof Array?S(I):I instanceof Date?JSON.stringify(F(I,"")):null!==I&&"object"===typeof I&&void 0!==I.castToText?I.castToText():"null"}function Q(I,T){return y(I)?I:null===I||""===I?0:C(I)?NaN:x(I)?I?1:0:u(I)||""===I||void 0===I?NaN:void 0!==T&&z(I)?(T=v(T,"\u2030",""),T=v(T,"\u00a4",""),m.parse(I,{pattern:T})):I===A.voidOperation?0:Number(I)}function M(I){var T=/ (\d\d)/,ba=r.DateTime.fromISO(I);return ba.isValid||T.test(I)&&(I=I.replace(T,"T$1"),ba=r.DateTime.fromISO(I),ba.isValid)?
ba:null}function N(I,T){var ba;T.fields.some(function(pa){pa.name.toLowerCase()===I.toLowerCase()&&(ba=pa.domain);return!!ba});return ba}function K(I,T){T||(T={});"function"===typeof T&&(T={cmp:T});var ba="boolean"===typeof T.cycles?T.cycles:!1,pa=T.cmp&&function(Da){return function(Ha){return function(ta,xa){return Da({key:ta,value:Ha[ta]},{key:xa,value:Ha[xa]})}}}(T.cmp),ya=[];return function ta(Ha){Ha&&Ha.toJson&&"function"===typeof Ha.toJson&&(Ha=Ha.toJson());if(void 0!==Ha){if("number"===typeof Ha)return isFinite(Ha)?
""+Ha:"null";if("object"!==typeof Ha)return JSON.stringify(Ha);var xa;if(Array.isArray(Ha)){var ra="[";for(xa=0;xa<Ha.length;xa++)xa&&(ra+=","),ra+=ta(Ha[xa])||"null";return ra+"]"}if(null===Ha)return"null";if(-1!==ya.indexOf(Ha)){if(ba)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var Aa=ya.push(Ha)-1,ua=Object.keys(Ha).sort(pa&&pa(Ha));ra="";for(xa=0;xa<ua.length;xa++){var Ja=ua[xa],ha=ta(Ha[Ja]);ha&&(ra&&(ra+=","),ra+=JSON.stringify(Ja)+":"+ha)}ya.splice(Aa,
1);return"{"+ra+"}"}}(I)}function X(I,T){if(T instanceof k)I.push([T.x,T.y]);else throw Error("Invalid Argument");}Object.defineProperty(A,"__esModule",{value:!0});A.binaryOperator=A.tick=A.toStringArray=A.autoCastArrayOfPointsToMultiPoint=A.autoCastArrayOfPointsToPolyline=A.autoCastArrayOfPointsToPolygon=A.autoCastFeatureToGeometry=A.stableStringify=A.getDomain=A.getDomainCode=A.getDomainValue=A.fixNullGeometry=A.fixSpatialReference=A.toBoolean=A.toDateTime=A.toDate=A.toNumber=A.toStringExplicit=
A.toNumberArray=A.toString=A.equalityTest=A.greaterThanLessThan=A.standardiseDateFormat=A.formatDate=A.formatNumber=A.generateUUID=A.absRound=A.pcCheck=A.isDate=A.isImmutableArray=A.isFeatureSetCollection=A.isFeatureSet=A.isArray=A.isInteger=A.isNumber=A.isBoolean=A.isString=A.defaultUndefined=A.isSimpleType=A.isFunctionParameter=A.multiReplace=A.continueResult=A.breakResult=A.voidOperation=A.SizzleFunction=A.ReturnResult=A.ImplicitResult=A.NativeFunction=A.SizzleFunctionE=A.NativeFunctionE=A.ImplicitResultE=
A.ReturnResultE=void 0;D=function(){return function(I){this.value=I}}();A.ReturnResultE=D;var da=function(){return function(I){this.value=I}}();A.ImplicitResultE=da;var Y=function(){return function(I){this.fn=I}}();A.NativeFunctionE=Y;var aa=function(){return function(I){this.fn=I}}();A.SizzleFunctionE=aa;A.NativeFunction=Y;A.ImplicitResult=da;A.ReturnResult=D;A.SizzleFunction=aa;A.voidOperation={type:"VOID"};A.breakResult={type:"BREAK"};A.continueResult={type:"CONTINUE"};A.multiReplace=v;A.isFunctionParameter=
B;A.isSimpleType=w;A.defaultUndefined=function(I,T){return void 0===I?T:I};A.isString=z;A.isBoolean=x;A.isNumber=y;A.isInteger=function(I){return"number"===typeof I&&isFinite(I)&&Math.floor(I)===I};A.isArray=u;A.isFeatureSet=function(I){return!0===(I&&I.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===I.declaredRootClass)};A.isFeatureSetCollection=function(I){return!0===(I&&I.declaredRootClass&&"esri.arcade.featureSetCollection"===I.declaredRootClass)};A.isImmutableArray=t;A.isDate=
C;A.pcCheck=function(I,T,ba){if(I.length<T||I.length>ba)throw Error("Function called with wrong number of Parameters");};A.absRound=function(I){return 0>I?-Math.round(-I):Math.round(I)};A.generateUUID=function(){var I=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(T){var ba=(I+16*Math.random())%16|0;I=Math.floor(I/16);return("x"===T?ba:ba&3|8).toString(16)})};A.formatNumber=E;A.formatDate=F;A.standardiseDateFormat=G;A.greaterThanLessThan=function(I,T,ba){if(null===
I){if(null===T||T===A.voidOperation)return H(null,null,ba);if(y(T))return H(0,T,ba);if(z(T)||x(T))return H(0,Q(T),ba);if(C(T))return H(0,T.getTime(),ba)}if(I===A.voidOperation){if(null===T||T===A.voidOperation)return H(null,null,ba);if(y(T))return H(0,T,ba);if(z(T)||x(T))return H(0,Q(T),ba);if(C(T))return H(0,T.getTime(),ba)}else if(y(I)){if(y(T))return H(I,T,ba);if(x(T))return H(I,Q(T),ba);if(null===T||T===A.voidOperation)return H(I,0,ba);if(z(T))return H(I,Q(T),ba);if(C(T))return H(I,T.getTime(),
ba)}else if(z(I)){if(z(T))return H(J(I),J(T),ba);if(C(T))return H(Q(I),T.getTime(),ba);if(y(T))return H(Q(I),T,ba);if(null===T||T===A.voidOperation)return H(Q(I),0,ba);if(x(T))return H(Q(I),Q(T),ba)}else if(C(I)){if(C(T))return H(I,T,ba);if(null===T||T===A.voidOperation)return H(I.getTime(),0,ba);if(y(T))return H(I.getTime(),T,ba);if(x(T)||z(T))return H(I.getTime(),Q(T),ba)}else if(x(I)){if(x(T))return H(I,T,ba);if(y(T))return H(Q(I),Q(T),ba);if(C(T))return H(Q(I),T.getTime(),ba);if(null===T||T===
A.voidOperation)return H(Q(I),0,ba);if(z(T))return H(Q(I),Q(T),ba)}return!L(I,T)||"\x3c\x3d"!==ba&&"\x3e\x3d"!==ba?!1:!0};A.equalityTest=L;A.toString=J;A.toNumberArray=function(I){var T=[];if(!1===u(I))return null;if(I instanceof b){for(var ba=0;ba<I.length();ba++)T[ba]=Q(I.get(ba));return T}for(ba=0;ba<I.length;ba++)T[ba]=Q(I[ba]);return T};A.toStringExplicit=S;A.toNumber=Q;A.toDate=function(I){return C(I)?I:z(I)&&(I=M(I))?I.toJSDate():null};A.toDateTime=function(I){return C(I)?r.DateTime.fromJSDate(I):
z(I)?M(I):null};A.toBoolean=function(I){return x(I)?I:z(I)?(I=I.toLowerCase(),"true"===I?!0:!1):y(I)?0===I||isNaN(I)?!1:!0:!1};A.fixSpatialReference=function(I,T){if(null===I||void 0===I)return null;if(null===I.spatialReference||void 0===I.spatialReference)I.spatialReference=T;return I};A.fixNullGeometry=function(I){if(null===I)return null;if(I instanceof k)return"NaN"===I.x||null===I.x||isNaN(I.x)?null:I;if(I instanceof c){if(0===I.rings.length)return null;for(var T=0,ba=I.rings;T<ba.length;T++){var pa=
ba[T];if(0<pa.length)return I}return null}if(I instanceof l){if(0===I.paths.length)return null;T=0;for(ba=I.paths;T<ba.length;T++)if(pa=ba[T],0<pa.length)return I;return null}return I instanceof h?0===I.points.length?null:I:I instanceof f?"NaN"===I.xmin||null===I.xmin||isNaN(I.xmin)?null:I:null};A.getDomainValue=function(I,T){if(!I||!I.domain)return T;var ba=null;if("string"===I.field.type||"esriFieldTypeString"===I.field.type)T=J(T);else{if(null===T||void 0===T)return null;if(""===T)return T;T=Q(T)}for(var pa=
0;pa<I.domain.codedValues.length;pa++){var ya=I.domain.codedValues[pa];ya.code===T&&(ba=ya)}return null===ba?T:ba.name};A.getDomainCode=function(I,T){if(!I||!I.domain)return T;var ba=null;T=J(T);for(var pa=0;pa<I.domain.codedValues.length;pa++){var ya=I.domain.codedValues[pa];ya.name===T&&(ba=ya)}return null===ba?T:ba.code};A.getDomain=function(I,T,ba,pa){void 0===ba&&(ba=null);if(!T||!T.fields)return null;for(var ya=null,Da=0;Da<T.fields.length;Da++){var Ha=T.fields[Da];Ha.name.toLowerCase()===I.toString().toLowerCase()&&
(ya=Ha)}if(null===ya)throw Error("Field not found");var ta,xa;pa||(pa=ba&&T.typeIdField&&ba._field(T.typeIdField));null!=pa&&T.types.some(function(ra){return ra.id===pa?((ta=ra.domains&&ra.domains[ya.name])&&"inherited"===ta.type&&(ta=N(ya.name,T),xa=!0),!0):!1});xa||ta||(ta=N(I,T));return{field:ya,domain:ta}};A.stableStringify=K;A.autoCastFeatureToGeometry=function(I){if(null===I)return null;for(var T=[],ba=0;ba<I.length;ba++){var pa=I[ba];pa&&(pa.declaredClass&&"esri.arcade.Feature"===pa.declaredClass||
"FeatureSetReader"===pa.type)?T.push(pa.geometry()):T.push(pa)}return T};A.autoCastArrayOfPointsToPolygon=function(I,T){if(u(I)||t(I)){var ba=!1,pa=!1,ya=[],Da=T;if(u(I)){for(var Ha=0;Ha<I.length;Ha++){var ta=I[Ha];X(ya,ta)}0<ya.length&&(Da=I[0].spatialReference,ba=I[0].hasZ,pa=I[0].hasM)}else if(I instanceof d)ya=I._elements,0<ya.length&&(ba=I._hasZ,pa=I._hasM,Da=I.get(0).spatialReference);else if(t(I)){Ha=0;for(var xa=I.toArray();Ha<xa.length;Ha++)ta=xa[Ha],X(ya,ta);0<ya.length&&(Da=I.get(0).spatialReference,
ba=!0===I.get(0).hasZ,pa=!0===I.get(0).hasM)}else throw Error("Invalid Argument");if(0===ya.length)return null;!1===(new c({rings:[],spatialReference:{wkid:4326}})).isClockwise(ya)&&(ya=ya.slice(0).reverse());return new c({rings:[ya],spatialReference:Da,hasZ:ba,hasM:pa})}return I};A.autoCastArrayOfPointsToPolyline=function(I,T){if(u(I)||t(I)){var ba=!1,pa=!1,ya=[],Da=T;if(u(I)){for(var Ha=0;Ha<I.length;Ha++){var ta=I[Ha];X(ya,ta)}0<ya.length&&(Da=I[0].spatialReference,ba=!0===I[0].hasZ,pa=!0===I[0].hasM)}else if(I instanceof
d)ya=I._elements,0<ya.length&&(ba=I._hasZ,pa=I._hasM,Da=I.get(0).spatialReference);else if(t(I)){Ha=0;for(var xa=I.toArray();Ha<xa.length;Ha++)ta=xa[Ha],X(ya,ta);0<ya.length&&(Da=I.get(0).spatialReference,ba=!0===I.get(0).hasZ,pa=!0===I.get(0).hasM)}return 0===ya.length?null:new l({paths:[ya],spatialReference:Da,hasZ:ba,hasM:pa})}return I};A.autoCastArrayOfPointsToMultiPoint=function(I,T){if(u(I)||t(I)){var ba=!1,pa=!1,ya=[],Da=T;if(u(I)){for(var Ha=0;Ha<I.length;Ha++){var ta=I[Ha];X(ya,ta)}0<ya.length&&
(Da=I[0].spatialReference,ba=!0===I[0].hasZ,pa=!0===I[0].hasM)}else if(I instanceof d)ya=I._elements,0<ya.length&&(ba=I._hasZ,pa=I._hasM,Da=I.get(0).spatialReference);else if(t(I)){Ha=0;for(var xa=I.toArray();Ha<xa.length;Ha++)ta=xa[Ha],X(ya,ta);0<ya.length&&(Da=I.get(0).spatialReference,ba=!0===I.get(0).hasZ,pa=!0===I.get(0).hasM)}return 0===ya.length?null:new h({points:ya,spatialReference:Da,hasZ:ba,hasM:pa})}return I};A.toStringArray=function(I,T){void 0===T&&(T=!1);var ba=[];if(null===I)return ba;
if(!0===u(I)){for(var pa=0;pa<I.length;pa++){var ya=J(I[pa]);""===ya&&!0!==T||ba.push(ya)}return ba}if(I instanceof b){for(pa=0;pa<I.length();pa++)ya=J(I.get(pa)),""===ya&&!0!==T||ba.push(ya);return ba}return w(I)?(ya=J(I),""===ya&&!0!==T||ba.push(ya),ba):[]};var ca=0;A.tick=function(I){ca++;return 0===ca%100?(ca=0,e.create(function(T){setTimeout(function(){T(I)},0)})):I};A.binaryOperator=function(I,T,ba){switch(ba){case "\x26":return I&T;case "|":return I|T;case "^":return I^T;case "\x3c\x3c":return I<<
T;case "\x3e\x3e":return I>>T;case "\x3e\x3e\x3e":return I>>>T}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(D,A){return function(){return function(a,b){this.context=this.definition=null;this.definition=a;this.context=b}}()})},"esri/arcade/ImmutablePathArray":function(){var D=this&&this.__extends||function(){var A=function(a,b){A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,
e)&&(g[e]=d[e])};return A(a,b)};return function(a,b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");A(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(A,a,b,g){return function(d){function e(f,n,h,k,c){f=d.call(this,f)||this;f._lazyPath=[];f._hasZ=!1;f._hasM=!1;f._hasZ=h;f._hasM=k;f._spRef=
n;f._cacheId=c;return f}D(e,d);e.prototype.get=function(f){if(void 0===this._lazyPath[f]){var n=this._elements[f];if(void 0===n)return;this._lazyPath[f]=new g(n,this._spRef,this._hasZ,this._hasM,this._cacheId,f)}return this._lazyPath[f]};e.prototype.equalityTest=function(f){return f===this?!0:null===f||!1===f instanceof e?!1:f.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()};return e}(b)})},"esri/arcade/ImmutablePointArray":function(){var D=
this&&this.__extends||function(){var A=function(a,b){A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(g[e]=d[e])};return A(a,b)};return function(a,b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");A(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require",
"exports","./ImmutableArray","../geometry/Point"],function(A,a,b,g){return function(d){function e(f,n,h,k,c,l){f=d.call(this,f)||this;f._lazyPt=[];f._hasZ=!1;f._hasM=!1;f._spRef=n;f._hasZ=h;f._hasM=k;f._cacheId=c;f._partId=l;return f}D(e,d);e.prototype.get=function(f){if(void 0===this._lazyPt[f]){var n=this._elements[f];if(void 0===n)return;var h=this._hasZ,k=this._hasM,c=null;c=h&&!k?new g(n[0],n[1],n[2],void 0,this._spRef):k&&!h?new g(n[0],n[1],void 0,n[2],this._spRef):h&&k?new g(n[0],n[1],n[2],
n[3],this._spRef):new g(n[0],n[1],this._spRef);c.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+f.toString());this._lazyPt[f]=c}return this._lazyPt[f]};e.prototype.equalityTest=function(f){return f===this?!0:null===f||!1===f instanceof e?!1:f.getUniqueHash()===this.getUniqueHash()};e.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return e}(b)})},"esri/arcade/polyfill/promiseUtils":function(){define(["require",
"exports","dojo/Deferred","dojo/promise/all"],function(D,A,a,b){function g(n,h){var k=new a(h);n(function(c){return f(c).then(k.resolve)},k.reject);return k.promise}function d(n){if(n){if("function"!==typeof n.forEach){var h=Object.keys(n),k=h.map(function(l){return n[l]});return d(k).then(function(l){var r={};h.forEach(function(m,q){return r[m]=l[q]});return r})}var c=null;return g(function(l,r){var m=[],q=n.length;0===q&&l(m);n.forEach(function(v){var B={promise:v};m.push(B);v.then(function(w){B.value=
w})["catch"](function(w){B.error=w}).then(function(){--q;0===q&&(c?r(Error("AbortError")):l(m))})})},function(l){c=l||"Invocation cancellation";n.forEach(function(r){return r.cancel(l)})})}}function e(n){void 0===n&&(n=void 0);var h=new a;h.resolve(n);return h.promise}function f(n){return n&&"function"===typeof n.then?n:e(n)}Object.defineProperty(A,"__esModule",{value:!0});A.createResolver=A.when=A.isPromiseLike=A.wrapCallback=A.timeout=A.after=A.resolve=A.reject=A.first=A.eachAlwaysValues=A.eachAlways=
A.createDeferred=A.create=A.filter=A.all=void 0;A.all=function(n){return b(n)};A.filter=function(n,h){var k=n.slice();return b(n.map(function(c,l){return h(c,l)})).then(function(c){return k.filter(function(l,r){return c[r]})})};A.create=g;A.createDeferred=function(n){var h=null;n=g(function(k,c){h={resolve:k,reject:c}},n);h.promise=n;h.cancel=function(){h.reject(Error("AbortError"))};return h};A.eachAlways=d;A.eachAlwaysValues=function(n){return d(n).then(function(h){return h.filter(function(k){return!!k.value}).map(function(k){return k.value})})};
A.first=function(n){return n&&n.length?g(function(h,k){for(var c=0;c<n.length;c++)n[c].then(h,k)}):e()};A.reject=function(n){var h=new a;h.reject(n);return h.promise};A.resolve=e;A.after=function(n,h){void 0===h&&(h=void 0);var k=0;return g(function(c){k=setTimeout(function(){c(h)},n)},function(){k&&(clearTimeout(k),k=0)})};A.timeout=function(n,h,k){var c=0,l=new a(n.cancel);n.then(function(r){l.isFulfilled()||(l.resolve(r),c&&(clearTimeout(c),c=0))});n["catch"](function(r){l.isFulfilled()||(l.reject(r),
c&&(clearTimeout(c),c=0))});c=setTimeout(function(){l.reject(k||Error("promiseUtils:timeout"))},h);return l.promise};A.wrapCallback=function(n){var h=!1;return g(function(){n(function(k){h||e(k)})},function(){return h=!0})};A.isPromiseLike=function(n){return n&&"function"===typeof n.then};A.when=f;A.createResolver=function(n){var h,k;n=g(function(l,r){h=l;k=r},n);var c=function(l){h(l)};c.resolve=function(l){return h(l)};c.reject=function(l){return k(l)};c.promise=n;return c}})},"esri/libs/luxon/luxon":function(){define(["exports"],
function(D){function A(ja,sa){for(var W=0;W<sa.length;W++){var ka=sa[W];ka.enumerable=ka.enumerable||!1;ka.configurable=!0;"value"in ka&&(ka.writable=!0);Object.defineProperty(ja,ka.key,ka)}}function a(ja,sa,W){sa&&A(ja.prototype,sa);W&&A(ja,W);return ja}function b(){b=Object.assign||function(ja){for(var sa=1;sa<arguments.length;sa++){var W=arguments[sa],ka;for(ka in W)Object.prototype.hasOwnProperty.call(W,ka)&&(ja[ka]=W[ka])}return ja};return b.apply(this,arguments)}function g(ja,sa){ja.prototype=
Object.create(sa.prototype);ja.prototype.constructor=ja;e(ja,sa)}function d(ja){d=Object.setPrototypeOf?Object.getPrototypeOf:function(sa){return sa.__proto__||Object.getPrototypeOf(sa)};return d(ja)}function e(ja,sa){e=Object.setPrototypeOf||function(W,ka){W.__proto__=ka;return W};return e(ja,sa)}function f(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(ja){return!1}}function n(ja,sa,W){n=f()?Reflect.construct:function(ka,wa,Ga){var Ra=[null];Ra.push.apply(Ra,wa);ka=new (Function.bind.apply(ka,Ra));Ga&&e(ka,Ga.prototype);return ka};return n.apply(null,arguments)}function h(ja){var sa="function"===typeof Map?new Map:void 0;h=function(W){function ka(){return n(W,arguments,d(this).constructor)}if(null===W||-1===Function.toString.call(W).indexOf("[native code]"))return W;if("function"!==typeof W)throw new TypeError("Super expression must either be null or a function");
if("undefined"!==typeof sa){if(sa.has(W))return sa.get(W);sa.set(W,ka)}ka.prototype=Object.create(W.prototype,{constructor:{value:ka,enumerable:!1,writable:!0,configurable:!0}});return e(ka,W)};return h(ja)}function k(ja,sa){if(ja){if("string"===typeof ja)return c(ja,sa);var W=Object.prototype.toString.call(ja).slice(8,-1);"Object"===W&&ja.constructor&&(W=ja.constructor.name);if("Map"===W||"Set"===W)return Array.from(ja);if("Arguments"===W||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(W))return c(ja,
sa)}}function c(ja,sa){if(null==sa||sa>ja.length)sa=ja.length;for(var W=0,ka=Array(sa);W<sa;W++)ka[W]=ja[W];return ka}function l(ja,sa){var W="undefined"!==typeof Symbol&&ja[Symbol.iterator]||ja["@@iterator"];if(W)return(W=W.call(ja)).next.bind(W);if(Array.isArray(ja)||(W=k(ja))||sa&&ja&&"number"===typeof ja.length){W&&(ja=W);var ka=0;return function(){return ka>=ja.length?{done:!0}:{done:!1,value:ja[ka++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function r(ja){return"undefined"===typeof ja}function m(ja){return"number"===typeof ja}function q(ja){return"number"===typeof ja&&0===ja%1}function v(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(ja){return!1}}function B(ja,sa,W){if(0!==ja.length)return ja.reduce(function(ka,wa){var Ga=[sa(wa),wa];return ka?W(ka[0],Ga[0])===ka[0]?ka:Ga:Ga},null)[1]}function w(ja,sa){return sa.reduce(function(W,ka){W[ka]=ja[ka];return W},{})}function z(ja,sa){return Object.prototype.hasOwnProperty.call(ja,
sa)}function x(ja,sa,W){return q(ja)&&ja>=sa&&ja<=W}function y(ja,sa){void 0===sa&&(sa=2);var W=0>ja?"-":"",ka=W?-1*ja:ja;ka=ka.toString().length<sa?("0".repeat(sa)+ka).slice(-sa):ka.toString();return""+W+ka}function u(ja){if(!r(ja)&&null!==ja&&""!==ja)return parseInt(ja,10)}function t(ja){if(!r(ja)&&null!==ja&&""!==ja)return ja=1E3*parseFloat("0."+ja),Math.floor(ja)}function C(ja,sa,W){void 0===W&&(W=!1);sa=Math.pow(10,sa);return(W?Math.trunc:Math.round)(ja*sa)/sa}function E(ja){return 0===ja%4&&
(0!==ja%100||0===ja%400)}function F(ja,sa){var W=sa-1;W=W-12*Math.floor(W/12)+1;return 2===W?E(ja+(sa-W)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][W-1]}function G(ja){var sa=Date.UTC(ja.year,ja.month-1,ja.day,ja.hour,ja.minute,ja.second,ja.millisecond);100>ja.year&&0<=ja.year&&(sa=new Date(sa),sa.setUTCFullYear(sa.getUTCFullYear()-1900));return+sa}function H(ja){var sa=ja-1;sa=(sa+Math.floor(sa/4)-Math.floor(sa/100)+Math.floor(sa/400))%7;return 4===(ja+Math.floor(ja/4)-Math.floor(ja/100)+
Math.floor(ja/400))%7||3===sa?53:52}function L(ja){return 99<ja?ja:60<ja?1900+ja:2E3+ja}function J(ja,sa,W,ka){void 0===ka&&(ka=null);ja=new Date(ja);var wa={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};ka&&(wa.timeZone=ka);sa=b({timeZoneName:sa},wa);return(W=(new Intl.DateTimeFormat(W,sa)).formatToParts(ja).find(function(Ga){return"timezonename"===Ga.type.toLowerCase()}))?W.value:null}function S(ja,sa){var W=parseInt(ja,10);Number.isNaN(W)&&(W=0);
var ka=parseInt(sa,10)||0;ka=0>W||Object.is(W,-0)?-ka:ka;return 60*W+ka}function P(ja){var sa=Number(ja);if("boolean"===typeof ja||""===ja||Number.isNaN(sa))throw new Xb("Invalid unit value "+ja);return sa}function Q(ja,sa){var W={},ka;for(ka in ja)if(z(ja,ka)){var wa=ja[ka];void 0!==wa&&null!==wa&&(W[sa(ka)]=P(wa))}return W}function M(ja,sa){var W=Math.trunc(Math.abs(ja/60)),ka=Math.trunc(Math.abs(ja%60)),wa=0<=ja?"+":"-";switch(sa){case "short":return""+wa+y(W,2)+":"+y(ka,2);case "narrow":return""+
wa+W+(0<ka?":"+ka:"");case "techie":return""+wa+y(W,2)+y(ka,2);default:throw new RangeError("Value format "+sa+" is out of range for property format");}}function N(ja){return w(ja,["hour","minute","second","millisecond"])}function K(ja){switch(ja){case "narrow":return[].concat(Pc);case "short":return[].concat(bc);case "long":return[].concat(mc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function X(ja){switch(ja){case "narrow":return[].concat(Wc);
case "short":return[].concat(Ic);case "long":return[].concat(Qc);case "numeric":return"1234567".split("");default:return null}}function da(ja){switch(ja){case "narrow":return[].concat(oc);case "short":return[].concat(rc);case "long":return[].concat(Wb);default:return null}}function Y(ja,sa,W,ka){void 0===W&&(W="always");void 0===ka&&(ka=!1);var wa={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute",
"min."],seconds:["second","sec."]},Ga=-1===["hours","minutes","seconds"].indexOf(ja);if("auto"===W&&Ga)switch(W="days"===ja,sa){case 1:return W?"tomorrow":"next "+wa[ja][0];case -1:return W?"yesterday":"last "+wa[ja][0];case 0:return W?"today":"this "+wa[ja][0]}W=Object.is(sa,-0)||0>sa;sa=Math.abs(sa);Ga=1===sa;var Ra=wa[ja];ja=ka?Ga?Ra[1]:Ra[2]||Ra[1]:Ga?wa[ja][0]:ja;return W?sa+" "+ja+" ago":"in "+sa+" "+ja}function aa(ja,sa){for(var W="",ka=l(ja),wa;!(wa=ka()).done;)wa=wa.value,W=wa.literal?W+
wa.val:W+sa(wa.val);return W}function ca(ja,sa){var W;if(r(ja)||null===ja)return sa;if(ja instanceof cc)return ja;if("string"===typeof ja){var ka=ja.toLowerCase();return"local"===ka||"system"===ka?sa:"utc"===ka||"gmt"===ka?$b.utcInstance:null!=(W=fc.parseGMTOffset(ja))?$b.instance(W):fc.isValidSpecifier(ka)?fc.create(ja):$b.parseSpecifier(ka)||new Hb(ja)}return m(ja)?$b.instance(ja):"object"===typeof ja&&ja.offset&&"number"===typeof ja.offset?ja:new Hb(ja)}function I(ja,sa){void 0===sa&&(sa={});var W=
JSON.stringify([ja,sa]),ka=Yc[W];ka||(ka=new Intl.DateTimeFormat(ja,sa),Yc[W]=ka);return ka}function T(ja){for(var sa=[],W=1;12>=W;W++){var ka=Tb.utc(2016,W,1);sa.push(ja(ka))}return sa}function ba(ja){for(var sa=[],W=1;7>=W;W++){var ka=Tb.utc(2016,11,13+W);sa.push(ja(ka))}return sa}function pa(ja,sa,W,ka,wa){ja=ja.listingMode(W);return"error"===ja?null:"en"===ja?ka(sa):wa(sa)}function ya(){for(var ja=arguments.length,sa=Array(ja),W=0;W<ja;W++)sa[W]=arguments[W];ja=sa.reduce(function(ka,wa){return ka+
wa.source},"");return RegExp("^"+ja+"$")}function Da(){for(var ja=arguments.length,sa=Array(ja),W=0;W<ja;W++)sa[W]=arguments[W];return function(ka){return sa.reduce(function(wa,Ga){var Ra=wa[0],ab=wa[1],gb=Ga(ka,wa[2]),pb=gb[1],ub=gb[2];return[b({},Ra,gb[0]),ab||pb,ub]},[{},null,1]).slice(0,2)}}function Ha(ja){if(null==ja)return[null,null];for(var sa=arguments.length,W=Array(1<sa?sa-1:0),ka=1;ka<sa;ka++)W[ka-1]=arguments[ka];for(sa=0;sa<W.length;sa++){var wa=W[sa];ka=wa[1];if(wa=wa[0].exec(ja))return ka(wa)}return[null,
null]}function ta(){for(var ja=arguments.length,sa=Array(ja),W=0;W<ja;W++)sa[W]=arguments[W];return function(ka,wa){var Ga={},Ra;for(Ra=0;Ra<sa.length;Ra++)Ga[sa[Ra]]=u(ka[wa+Ra]);return[Ga,null,wa+Ra]}}function xa(ja,sa,W){ja=ja[sa];return r(ja)?W:u(ja)}function ra(ja,sa){return[{year:xa(ja,sa),month:xa(ja,sa+1,1),day:xa(ja,sa+2,1)},null,sa+3]}function Aa(ja,sa){return[{hours:xa(ja,sa,0),minutes:xa(ja,sa+1,0),seconds:xa(ja,sa+2,0),milliseconds:t(ja[sa+3])},null,sa+4]}function ua(ja,sa){var W=!ja[sa]&&
!ja[sa+1],ka=S(ja[sa+1],ja[sa+2]);return[{},W?null:$b.instance(ka),sa+3]}function Ja(ja,sa){return[{},ja[sa]?fc.create(ja[sa]):null,sa+1]}function ha(ja){var sa=ja[2],W=ja[3],ka=ja[4],wa=ja[5],Ga=ja[6],Ra=ja[7],ab=ja[8],gb="-"===ja[0][0],pb=Ra&&"-"===Ra[0],ub=function(Db,xb){void 0===xb&&(xb=!1);return void 0!==Db&&(xb||Db&&gb)?-Db:Db};return[{years:ub(u(ja[1])),months:ub(u(sa)),weeks:ub(u(W)),days:ub(u(ka)),hours:ub(u(wa)),minutes:ub(u(Ga)),seconds:ub(u(Ra),"-0"===Ra),milliseconds:ub(t(ab),pb)}]}
function ma(ja,sa,W,ka,wa,Ga,Ra){sa={year:2===sa.length?L(u(sa)):u(sa),month:bc.indexOf(W)+1,day:u(ka),hour:u(wa),minute:u(Ga)};Ra&&(sa.second=u(Ra));ja&&(sa.weekday=3<ja.length?Qc.indexOf(ja)+1:Ic.indexOf(ja)+1);return sa}function R(ja){var sa=ja[8],W=ja[9],ka=ja[10],wa=ja[11];ja=ma(ja[1],ja[4],ja[3],ja[2],ja[5],ja[6],ja[7]);sa=sa?zb[sa]:W?0:S(ka,wa);return[ja,new $b(sa)]}function Ea(ja){return[ma(ja[1],ja[4],ja[3],ja[2],ja[5],ja[6],ja[7]),$b.utcInstance]}function Ia(ja){return[ma(ja[1],ja[7],ja[2],
ja[3],ja[4],ja[5],ja[6]),$b.utcInstance]}function ea(ja,sa,W){void 0===W&&(W=!1);ja={values:W?sa.values:b({},ja.values,sa.values||{}),loc:ja.loc.clone(sa.loc),conversionAccuracy:sa.conversionAccuracy||ja.conversionAccuracy};return new O(ja)}function Ya(ja,sa,W,ka,wa){ja=ja[wa][W];var Ga=sa[W]/ja;Ga=Math.sign(Ga)!==Math.sign(ka[wa])&&0!==ka[wa]&&1>=Math.abs(Ga)?0>Ga?Math.floor(Ga):Math.ceil(Ga):Math.trunc(Ga);ka[wa]+=Ga;sa[W]-=Ga*ja}function Xa(ja,sa){md.reduce(function(W,ka){if(r(sa[ka]))return W;
W&&Ya(ja,sa,W,sa,ka);return ka},null)}function Ba(ja){if(m(ja))return O.fromMillis(ja);if(O.isDuration(ja))return ja;if("object"===typeof ja)return O.fromObject(ja);throw new Xb("Unknown duration argument "+ja+" of type "+typeof ja);}function U(ja,sa){var W=function(ka){return ka.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};W=W(sa)-W(ja);return Math.floor(O.fromMillis(W).as("days"))}function la(ja,sa,W){for(var ka={},wa,Ga,Ra=0,ab=[["years",function(xb,Bb){return Bb.year-xb.year}],["quarters",
function(xb,Bb){return Bb.quarter-xb.quarter}],["months",function(xb,Bb){return Bb.month-xb.month+12*(Bb.year-xb.year)}],["weeks",function(xb,Bb){var qc=U(xb,Bb);return(qc-qc%7)/7}],["days",U]];Ra<ab.length;Ra++){var gb=ab[Ra],pb=gb[0];gb=gb[1];if(0<=W.indexOf(pb)){var ub;wa=pb;gb=gb(ja,sa);Ga=ja.plus((ub={},ub[pb]=gb,ub));if(Ga>sa){var Db;ja=ja.plus((Db={},Db[pb]=gb-1,Db));--gb}else ja=Ga;ka[pb]=gb}}return[ja,ka,Ga,wa]}function na(ja,sa,W,ka){var wa=la(ja,sa,W);ja=wa[0];var Ga=wa[1],Ra=wa[2],ab=
wa[3];wa=sa-ja;W=W.filter(function(ub){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(ub)});if(0===W.length){if(Ra<sa){var gb;Ra=ja.plus((gb={},gb[ab]=1,gb))}Ra!==ja&&(Ga[ab]=(Ga[ab]||0)+wa/(Ra-ja))}sa=O.fromObject(Ga,ka);if(0<W.length){var pb;return(pb=O.fromMillis(wa,ka)).shiftTo.apply(pb,W).plus(sa)}return sa}function V(ja,sa){var W=ja.numberingSystem;void 0===sa&&(sa="");return new RegExp(""+za[W||"latn"]+sa)}function fa(ja,sa){void 0===sa&&(sa=function(W){return W});return{regex:ja,
deser:function(W){var ka=sa;W=W[0];var wa=parseInt(W,10);if(isNaN(wa)){wa="";for(var Ga=0;Ga<W.length;Ga++){var Ra=W.charCodeAt(Ga);if(-1!==W[Ga].search(za.hanidec))wa+=db.indexOf(W[Ga]);else for(pb in Qa){var ab=Qa[pb],gb=ab[0];ab=ab[1];Ra>=gb&&Ra<=ab&&(wa+=Ra-gb)}}var pb=parseInt(wa,10)}else pb=wa;return ka(pb)}}}function qa(ja){return ja.replace(/\./g,"\\.?").replace(qb,fb)}function va(ja,sa){return null===ja?null:{regex:RegExp(ja.map(qa).join("|")),deser:function(W){var ka=W[0];return ja.findIndex(function(wa){return ka.replace(/\./g,
"").replace(qb," ").toLowerCase()===wa.replace(/\./g,"").replace(qb," ").toLowerCase()})+sa}}}function Fa(ja,sa){return{regex:ja,deser:function(W){return S(W[1],W[2])},groups:sa}}function Ca(ja){return{regex:ja,deser:function(sa){return sa[0]}}}function La(ja,sa){var W=V(sa),ka=V(sa,"{2}"),wa=V(sa,"{3}"),Ga=V(sa,"{4}"),Ra=V(sa,"{6}"),ab=V(sa,"{1,2}"),gb=V(sa,"{1,3}"),pb=V(sa,"{1,6}"),ub=V(sa,"{1,9}"),Db=V(sa,"{2,4}"),xb=V(sa,"{4,6}"),Bb=function(nc){return{regex:RegExp(nc.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$\x26")),deser:function(Jd){return Jd[0]},literal:!0}},qc=function(nc){if(ja.literal)return Bb(nc);switch(nc.val){case "G":return va(sa.eras("short",!1),0);case "GG":return va(sa.eras("long",!1),0);case "y":return fa(pb);case "yy":return fa(Db,L);case "yyyy":return fa(Ga);case "yyyyy":return fa(xb);case "yyyyyy":return fa(Ra);case "M":return fa(ab);case "MM":return fa(ka);case "MMM":return va(sa.months("short",!0,!1),1);case "MMMM":return va(sa.months("long",!0,!1),1);case "L":return fa(ab);case "LL":return fa(ka);
case "LLL":return va(sa.months("short",!1,!1),1);case "LLLL":return va(sa.months("long",!1,!1),1);case "d":return fa(ab);case "dd":return fa(ka);case "o":return fa(gb);case "ooo":return fa(wa);case "HH":return fa(ka);case "H":return fa(ab);case "hh":return fa(ka);case "h":return fa(ab);case "mm":return fa(ka);case "m":return fa(ab);case "q":return fa(ab);case "qq":return fa(ka);case "s":return fa(ab);case "ss":return fa(ka);case "S":return fa(gb);case "SSS":return fa(wa);case "u":return Ca(ub);case "a":return va(sa.meridiems(),
0);case "kkkk":return fa(Ga);case "kk":return fa(Db,L);case "W":return fa(ab);case "WW":return fa(ka);case "E":case "c":return fa(W);case "EEE":return va(sa.weekdays("short",!1,!1),1);case "EEEE":return va(sa.weekdays("long",!1,!1),1);case "ccc":return va(sa.weekdays("short",!0,!1),1);case "cccc":return va(sa.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Fa(new RegExp("([+-]"+ab.source+")(?::("+ka.source+"))?"),2);case "ZZZ":return Fa(new RegExp("([+-]"+ab.source+")("+ka.source+")?"),2);case "z":return Ca(/[a-z_+-/]{1,256}?/i);
default:return Bb(nc)}}(ja)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};qc.token=ja;return qc}function Wa(ja){return["^"+ja.map(function(sa){return sa.regex}).reduce(function(sa,W){return sa+"("+W.source+")"},"")+"$",ja]}function Va(ja,sa,W){if(ja=ja.match(sa)){sa={};var ka=1,wa;for(wa in W)if(z(W,wa)){var Ga=W[wa],Ra=Ga.groups?Ga.groups+1:1;!Ga.literal&&Ga.token&&(sa[Ga.token.val[0]]=Ga.deser(ja.slice(ka,ka+Ra)));ka+=Ra}return[ja,sa]}return[ja,{}]}function Ma(ja){var sa=
function(ka){switch(ka){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};var W=r(ja.Z)?r(ja.z)?null:fc.create(ja.z):new $b(ja.Z);r(ja.q)||(ja.M=3*(ja.q-1)+1);r(ja.h)||(12>ja.h&&1===ja.a?ja.h+=12:12===ja.h&&0===
ja.a&&(ja.h=0));0===ja.G&&ja.y&&(ja.y=-ja.y);r(ja.u)||(ja.S=t(ja.u));return[Object.keys(ja).reduce(function(ka,wa){var Ga=sa(wa);Ga&&(ka[Ga]=ja[wa]);return ka},{}),W]}function eb(){vb||(vb=Tb.fromMillis(1555555555555));return vb}function ib(ja,sa){if(ja.literal)return ja;var W=Pb.macroTokenToFormatOpts(ja.val);if(!W)return ja;var ka=Pb.create(sa,W).formatDateTimeParts(eb()).map(function(wa){var Ga=wa.type;wa=wa.value;"literal"===Ga?Ga={literal:!0,val:wa}:(wa=W[Ga],Ga=Eb[Ga],"object"===typeof Ga&&
(Ga=Ga[wa]),Ga=Ga?{literal:!1,val:Ga}:void 0);return Ga});return ka.includes(void 0)?ja:ka}function lb(ja,sa){var W;return(W=Array.prototype).concat.apply(W,ja.map(function(ka){return ib(ka,sa)}))}function rb(ja,sa,W){W=lb(Pb.parseFormat(W),ja);var ka=W.map(function(gb){return La(gb,ja)}),wa=ka.find(function(gb){return gb.invalidReason});if(wa)return{input:sa,tokens:W,invalidReason:wa.invalidReason};wa=Wa(ka);ka=RegExp(wa[0],"i");var Ga=Va(sa,ka,wa[1]);wa=Ga[0];var Ra=(Ga=Ga[1])?Ma(Ga):[null,null],
ab=Ra[0];Ra=Ra[1];if(z(Ga,"a")&&z(Ga,"H"))throw new Vb("Can't include meridiem when specifying 24-hour format");return{input:sa,tokens:W,regex:ka,rawMatches:wa,matches:Ga,result:ab,zone:Ra}}function sb(ja,sa){return new Qb("unit out of range","you specified "+sa+" (of type "+typeof sa+") as a "+ja+", which is invalid")}function tb(ja,sa,W){ja=(new Date(Date.UTC(ja,sa-1,W))).getUTCDay();return 0===ja?7:ja}function Ab(ja,sa){var W=E(ja)?tc:Lb,ka=W.findIndex(function(wa){return wa<sa});return{month:ka+
1,day:sa-W[ka]}}function Cb(ja){var sa=ja.year,W=ja.month,ka=ja.day;var wa=ka+(E(sa)?tc:Lb)[W-1];W=tb(sa,W,ka);wa=Math.floor((wa-W+10)/7);1>wa?(--sa,wa=H(sa)):wa>H(sa)&&(sa+=1,wa=1);return b({weekYear:sa,weekNumber:wa,weekday:W},N(ja))}function nb(ja){var sa=ja.weekYear,W=ja.weekNumber,ka=ja.weekday,wa=tb(sa,1,4),Ga=E(sa)?366:365;W=7*W+ka-wa-3;1>W?(Ga=sa-1,W+=E(Ga)?366:365):W>Ga?(Ga=sa+1,W-=E(sa)?366:365):Ga=sa;sa=Ab(Ga,W);return b({year:Ga,month:sa.month,day:sa.day},N(ja))}function yb(ja){var sa=
ja.year;var W=ja.month;W=ja.day+(E(sa)?tc:Lb)[W-1];return b({year:sa,ordinal:W},N(ja))}function Fb(ja){var sa=ja.year,W=Ab(sa,ja.ordinal);return b({year:sa,month:W.month,day:W.day},N(ja))}function gc(ja){var sa=q(ja.year),W=x(ja.month,1,12),ka=x(ja.day,1,F(ja.year,ja.month));return sa?W?ka?!1:sb("day",ja.day):sb("month",ja.month):sb("year",ja.year)}function Sb(ja){var sa=ja.hour,W=ja.minute,ka=ja.second;ja=ja.millisecond;var wa=x(sa,0,23)||24===sa&&0===W&&0===ka&&0===ja,Ga=x(W,0,59),Ra=x(ka,0,59),
ab=x(ja,0,999);return wa?Ga?Ra?ab?!1:sb("millisecond",ja):sb("second",ka):sb("minute",W):sb("hour",sa)}function Kb(ja){return new Qb("unsupported zone",'the zone "'+ja.name+'" is not supported')}function uc(ja){null===ja.weekData&&(ja.weekData=Cb(ja.c));return ja.weekData}function Ib(ja,sa){var W={ts:ja.ts,zone:ja.zone,c:ja.c,o:ja.o,loc:ja.loc,invalid:ja.invalid};return new Tb(b({},W,sa,{old:W}))}function dc(ja,sa,W){var ka=ja-6E4*sa,wa=W.offset(ka);if(sa===wa)return[ka,sa];ka-=6E4*(wa-sa);sa=W.offset(ka);
return wa===sa?[ka,wa]:[ja-6E4*Math.min(wa,sa),Math.max(wa,sa)]}function hc(ja,sa){var W=new Date(ja+6E4*sa);return{year:W.getUTCFullYear(),month:W.getUTCMonth()+1,day:W.getUTCDate(),hour:W.getUTCHours(),minute:W.getUTCMinutes(),second:W.getUTCSeconds(),millisecond:W.getUTCMilliseconds()}}function Zb(ja,sa,W){return dc(G(ja),sa,W)}function vc(ja,sa){var W=ja.o,ka=ja.c.year+Math.trunc(sa.years),wa=ja.c.month+Math.trunc(sa.months)+3*Math.trunc(sa.quarters);wa=b({},ja.c,{year:ka,month:wa,day:Math.min(ja.c.day,
F(ka,wa))+Math.trunc(sa.days)+7*Math.trunc(sa.weeks)});ka=O.fromObject({years:sa.years-Math.trunc(sa.years),quarters:sa.quarters-Math.trunc(sa.quarters),months:sa.months-Math.trunc(sa.months),weeks:sa.weeks-Math.trunc(sa.weeks),days:sa.days-Math.trunc(sa.days),hours:sa.hours,minutes:sa.minutes,seconds:sa.seconds,milliseconds:sa.milliseconds}).as("milliseconds");wa=G(wa);wa=dc(wa,W,ja.zone);W=wa[0];wa=wa[1];0!==ka&&(W+=ka,wa=ja.zone.offset(W));return{ts:W,o:wa}}function ic(ja,sa,W,ka,wa){var Ga=W.setZone,
Ra=W.zone;return ja&&0!==Object.keys(ja).length?(ja=Tb.fromObject(ja,b({},W,{zone:sa||Ra})),Ga?ja:ja.setZone(Ra)):Tb.invalid(new Qb("unparsable",'the input "'+wa+"\" can't be parsed as "+ka))}function jc(ja,sa,W){void 0===W&&(W=!0);return ja.isValid?Pb.create(Rb.create("en-US"),{allowZ:W,forceSimple:!0}).formatDateTimeFromString(ja,sa):null}function Ac(ja,sa){var W=sa.suppressSeconds,ka=sa.suppressMilliseconds;ka=void 0===ka?!1:ka;var wa=sa.includeOffset,Ga=sa.includePrefix;Ga=void 0===Ga?!1:Ga;var Ra=
sa.includeZone;Ra=void 0===Ra?!1:Ra;var ab=sa.spaceZone,gb=sa.format;gb=void 0===gb?"extended":gb;var pb="basic"===gb?"HHmm":"HH:mm";void 0!==W&&W&&0===ja.second&&0===ja.millisecond||(pb+="basic"===gb?"ss":":ss",ka&&0===ja.millisecond||(pb+=".SSS"));(Ra||wa)&&(void 0===ab?0:ab)&&(pb+=" ");Ra?pb+="z":wa&&(pb+="basic"===gb?"ZZZ":"ZZ");W=jc(ja,pb);Ga&&(W="T"+W);return W}function wc(ja){var sa={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",
minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[ja.toLowerCase()];if(!sa)throw new lc(ja);return sa}function Ec(ja,sa){var W=ca(sa.zone,Jb.defaultZone),ka=Rb.fromObject(sa),wa=Jb.now();if(!r(ja.year)){var Ga=l(Id);for(var Ra;!(Ra=Ga()).done;)Ra=
Ra.value,r(ja[Ra])&&(ja[Ra]=Vc[Ra]);if(Ga=gc(ja)||Sb(ja))return Tb.invalid(Ga);wa=W.offset(wa);Ga=Zb(ja,wa,W);wa=Ga[0];Ga=Ga[1]}return new Tb({ts:wa,zone:W,loc:ka,o:Ga})}function Nc(ja,sa,W){var ka=r(W.round)?!0:W.round,wa=function(pb,ub){pb=C(pb,ka||W.calendary?0:2,!0);return sa.loc.clone(W).relFormatter(W).format(pb,ub)},Ga=function(pb){return W.calendary?sa.hasSame(ja,pb)?0:sa.startOf(pb).diff(ja.startOf(pb),pb).get(pb):sa.diff(ja,pb).get(pb)};if(W.unit)return wa(Ga(W.unit),W.unit);for(var Ra=
l(W.units),ab;!(ab=Ra()).done;){ab=ab.value;var gb=Ga(ab);if(1<=Math.abs(gb))return wa(gb,ab)}return wa(ja>sa?-0:0,W.units[W.units.length-1])}function Fc(ja){var sa={};0<ja.length&&"object"===typeof ja[ja.length-1]?(sa=ja[ja.length-1],ja=Array.from(ja).slice(0,ja.length-1)):ja=Array.from(ja);return[sa,ja]}function kc(ja){if(Tb.isDateTime(ja))return ja;if(ja&&ja.valueOf&&m(ja.valueOf()))return Tb.fromJSDate(ja);if(ja&&"object"===typeof ja)return Tb.fromObject(ja);throw new Xb("Unknown datetime argument: "+
ja+", of type "+typeof ja);}var ac=function(ja){function sa(){return ja.apply(this,arguments)||this}g(sa,ja);return sa}(h(Error)),Gc=function(ja){function sa(W){return ja.call(this,"Invalid DateTime: "+W.toMessage())||this}g(sa,ja);return sa}(ac),ec=function(ja){function sa(W){return ja.call(this,"Invalid Interval: "+W.toMessage())||this}g(sa,ja);return sa}(ac),Oc=function(ja){function sa(W){return ja.call(this,"Invalid Duration: "+W.toMessage())||this}g(sa,ja);return sa}(ac),Vb=function(ja){function sa(){return ja.apply(this,
arguments)||this}g(sa,ja);return sa}(ac),lc=function(ja){function sa(W){return ja.call(this,"Invalid unit "+W)||this}g(sa,ja);return sa}(ac),Xb=function(ja){function sa(){return ja.apply(this,arguments)||this}g(sa,ja);return sa}(ac),Yb=function(ja){function sa(){return ja.call(this,"Zone is an abstract class")||this}g(sa,ja);return sa}(ac),xc={year:"numeric",month:"numeric",day:"numeric"},Mb={year:"numeric",month:"short",day:"numeric"},ia={year:"numeric",month:"short",day:"numeric",weekday:"short"},
Sa={year:"numeric",month:"long",day:"numeric"},Pa={year:"numeric",month:"long",day:"numeric",weekday:"long"},Ka={hour:"numeric",minute:"numeric"},Na={hour:"numeric",minute:"numeric",second:"numeric"},Ua={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Ta={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Oa={hour:"numeric",minute:"numeric",hourCycle:"h23"},Za={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},bb={hour:"numeric",minute:"numeric",
second:"numeric",hourCycle:"h23",timeZoneName:"short"},cb={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},jb={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},$a={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},kb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},mb={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},
ob={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},Ub={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"},Hc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},yc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",
minute:"numeric",second:"numeric",timeZoneName:"long"},Gb=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/,mc="January February March April May June July August September October November December".split(" "),bc="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Pc="JFMAMJJASOND".split(""),Qc="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Ic="Mon Tue Wed Thu Fri Sat Sun".split(" "),Wc="MTWTFSS".split(""),Sc=["AM","PM"],Wb=["Before Christ","Anno Domini"],
rc=["BC","AD"],oc=["B","A"],Ob={D:xc,DD:Mb,DDD:Sa,DDDD:Pa,t:Ka,tt:Na,ttt:Ua,tttt:Ta,T:Oa,TT:Za,TTT:bb,TTTT:cb,f:jb,ff:kb,fff:Ub,ffff:yc,F:$a,FF:mb,FFF:Hc,FFFF:Bc},Pb=function(){function ja(W,ka){this.opts=ka;this.loc=W;this.systemLoc=null}ja.create=function(W,ka){void 0===ka&&(ka={});return new ja(W,ka)};ja.parseFormat=function(W){for(var ka=null,wa="",Ga=!1,Ra=[],ab=0;ab<W.length;ab++){var gb=W.charAt(ab);"'"===gb?(0<wa.length&&Ra.push({literal:Ga,val:wa}),ka=null,wa="",Ga=!Ga):Ga?wa+=gb:gb===ka?
wa+=gb:(0<wa.length&&Ra.push({literal:!1,val:wa}),ka=wa=gb)}0<wa.length&&Ra.push({literal:Ga,val:wa});return Ra};ja.macroTokenToFormatOpts=function(W){return Ob[W]};var sa=ja.prototype;sa.formatWithSystemDefault=function(W,ka){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(W,b({},this.opts,ka)).format()};sa.formatDateTime=function(W,ka){void 0===ka&&(ka={});return this.loc.dtFormatter(W,b({},this.opts,ka)).format()};sa.formatDateTimeParts=function(W,
ka){void 0===ka&&(ka={});return this.loc.dtFormatter(W,b({},this.opts,ka)).formatToParts()};sa.resolvedOptions=function(W,ka){void 0===ka&&(ka={});return this.loc.dtFormatter(W,b({},this.opts,ka)).resolvedOptions()};sa.num=function(W,ka){void 0===ka&&(ka=0);if(this.opts.forceSimple)return y(W,ka);var wa=b({},this.opts);0<ka&&(wa.padTo=ka);return this.loc.numberFormatter(wa).format(W)};sa.formatDateTimeFromString=function(W,ka){var wa=this,Ga="en"===this.loc.listingMode(),Ra=this.loc.outputCalendar&&
"gregory"!==this.loc.outputCalendar,ab=function(xb,Bb){return wa.loc.extract(W,xb,Bb)},gb=function(xb){return W.isOffsetFixed&&0===W.offset&&xb.allowZ?"Z":W.isValid?W.zone.formatOffset(W.ts,xb.format):""},pb=function(xb,Bb){return Ga?K(xb)[W.month-1]:ab(Bb?{month:xb}:{month:xb,day:"numeric"},"month")},ub=function(xb,Bb){return Ga?X(xb)[W.weekday-1]:ab(Bb?{weekday:xb}:{weekday:xb,month:"long",day:"numeric"},"weekday")},Db=function(xb){return Ga?da(xb)[0>W.year?0:1]:ab({era:xb},"era")};return aa(ja.parseFormat(ka),
function(xb){switch(xb){case "S":return wa.num(W.millisecond);case "u":case "SSS":return wa.num(W.millisecond,3);case "s":return wa.num(W.second);case "ss":return wa.num(W.second,2);case "m":return wa.num(W.minute);case "mm":return wa.num(W.minute,2);case "h":return wa.num(0===W.hour%12?12:W.hour%12);case "hh":return wa.num(0===W.hour%12?12:W.hour%12,2);case "H":return wa.num(W.hour);case "HH":return wa.num(W.hour,2);case "Z":return gb({format:"narrow",allowZ:wa.opts.allowZ});case "ZZ":return gb({format:"short",
allowZ:wa.opts.allowZ});case "ZZZ":return gb({format:"techie",allowZ:wa.opts.allowZ});case "ZZZZ":return W.zone.offsetName(W.ts,{format:"short",locale:wa.loc.locale});case "ZZZZZ":return W.zone.offsetName(W.ts,{format:"long",locale:wa.loc.locale});case "z":return W.zoneName;case "a":return Ga?Sc[12>W.hour?0:1]:ab({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return Ra?ab({day:"numeric"},"day"):wa.num(W.day);case "dd":return Ra?ab({day:"2-digit"},"day"):wa.num(W.day,2);case "c":return wa.num(W.weekday);
case "ccc":return ub("short",!0);case "cccc":return ub("long",!0);case "ccccc":return ub("narrow",!0);case "E":return wa.num(W.weekday);case "EEE":return ub("short",!1);case "EEEE":return ub("long",!1);case "EEEEE":return ub("narrow",!1);case "L":return Ra?ab({month:"numeric",day:"numeric"},"month"):wa.num(W.month);case "LL":return Ra?ab({month:"2-digit",day:"numeric"},"month"):wa.num(W.month,2);case "LLL":return pb("short",!0);case "LLLL":return pb("long",!0);case "LLLLL":return pb("narrow",!0);
case "M":return Ra?ab({month:"numeric"},"month"):wa.num(W.month);case "MM":return Ra?ab({month:"2-digit"},"month"):wa.num(W.month,2);case "MMM":return pb("short",!1);case "MMMM":return pb("long",!1);case "MMMMM":return pb("narrow",!1);case "y":return Ra?ab({year:"numeric"},"year"):wa.num(W.year);case "yy":return Ra?ab({year:"2-digit"},"year"):wa.num(W.year.toString().slice(-2),2);case "yyyy":return Ra?ab({year:"numeric"},"year"):wa.num(W.year,4);case "yyyyyy":return Ra?ab({year:"numeric"},"year"):
wa.num(W.year,6);case "G":return Db("short");case "GG":return Db("long");case "GGGGG":return Db("narrow");case "kk":return wa.num(W.weekYear.toString().slice(-2),2);case "kkkk":return wa.num(W.weekYear,4);case "W":return wa.num(W.weekNumber);case "WW":return wa.num(W.weekNumber,2);case "o":return wa.num(W.ordinal);case "ooo":return wa.num(W.ordinal,3);case "q":return wa.num(W.quarter);case "qq":return wa.num(W.quarter,2);case "X":return wa.num(Math.floor(W.ts/1E3));case "x":return wa.num(W.ts);default:var Bb=
ja.macroTokenToFormatOpts(xb);xb=Bb?wa.formatWithSystemDefault(W,Bb):xb;return xb}})};sa.formatDurationFromString=function(W,ka){var wa=this,Ga=function(gb){switch(gb[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";case "y":return"year";default:return null}},Ra=ja.parseFormat(ka),ab=Ra.reduce(function(gb,pb){var ub=pb.val;return pb.literal?gb:gb.concat(ub)},[]);ab=W.shiftTo.apply(W,ab.map(Ga).filter(function(gb){return gb}));
return aa(Ra,function(gb){return function(pb){var ub=Ga(pb);return ub?wa.num(gb.get(ub),pb.length):pb}}(ab))};return ja}(),Qb=function(){function ja(sa,W){this.reason=sa;this.explanation=W}ja.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return ja}(),cc=function(){function ja(){}var sa=ja.prototype;sa.offsetName=function(W,ka){throw new Yb;};sa.formatOffset=function(W,ka){throw new Yb;};sa.offset=function(W){throw new Yb;};sa.equals=function(W){throw new Yb;
};a(ja,[{key:"type",get:function(){throw new Yb;}},{key:"name",get:function(){throw new Yb;}},{key:"isUniversal",get:function(){throw new Yb;}},{key:"isValid",get:function(){throw new Yb;}}]);return ja}(),Xc=null,ed=function(ja){function sa(){return ja.apply(this,arguments)||this}g(sa,ja);var W=sa.prototype;W.offsetName=function(ka,wa){return J(ka,wa.format,wa.locale)};W.formatOffset=function(ka,wa){return M(this.offset(ka),wa)};W.offset=function(ka){return-(new Date(ka)).getTimezoneOffset()};W.equals=
function(ka){return"system"===ka.type};a(sa,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===Xc&&(Xc=new sa);return Xc}}]);return sa}(cc),Nb=RegExp("^"+Gb.source+"$"),Lc={},id={year:0,month:1,day:2,hour:3,minute:4,second:5},Rc={},fc=function(ja){function sa(ka){var wa=ja.call(this)||this;wa.zoneName=
ka;wa.valid=sa.isValidZone(ka);return wa}g(sa,ja);sa.create=function(ka){Rc[ka]||(Rc[ka]=new sa(ka));return Rc[ka]};sa.resetCache=function(){Rc={};Lc={}};sa.isValidSpecifier=function(ka){return!(!ka||!ka.match(Nb))};sa.isValidZone=function(ka){try{return(new Intl.DateTimeFormat("en-US",{timeZone:ka})).format(),!0}catch(wa){return!1}};sa.parseGMTOffset=function(ka){return ka&&(ka=ka.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i))?-60*parseInt(ka[1]):null};var W=sa.prototype;W.offsetName=function(ka,wa){return J(ka,
wa.format,wa.locale,this.name)};W.formatOffset=function(ka,wa){return M(this.offset(ka),wa)};W.offset=function(ka){ka=new Date(ka);if(isNaN(ka))return NaN;var wa=this.name;Lc[wa]||(Lc[wa]=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:wa,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));wa=Lc[wa];if(wa.formatToParts){wa=wa.formatToParts(ka);for(var Ga=[],Ra=0;Ra<wa.length;Ra++){var ab=wa[Ra],gb=ab.value;ab=id[ab.type];r(ab)||(Ga[ab]=parseInt(gb,
10))}wa=Ga}else wa=wa.format(ka).replace(/\u200E/g,""),wa=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(wa),wa=[wa[3],wa[1],wa[2],wa[4],wa[5],wa[6]];wa=G({year:wa[0],month:wa[1],day:wa[2],hour:wa[3],minute:wa[4],second:wa[5],millisecond:0});ka=+ka;Ga=ka%1E3;return(wa-(ka-(0<=Ga?Ga:1E3+Ga)))/6E4};W.equals=function(ka){return"iana"===ka.type&&ka.name===this.name};a(sa,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},
{key:"isValid",get:function(){return this.valid}}]);return sa}(cc),ad=null,$b=function(ja){function sa(ka){var wa=ja.call(this)||this;wa.fixed=ka;return wa}g(sa,ja);sa.instance=function(ka){return 0===ka?sa.utcInstance:new sa(ka)};sa.parseSpecifier=function(ka){return ka&&(ka=ka.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new sa(S(ka[1],ka[2])):null};var W=sa.prototype;W.offsetName=function(){return this.name};W.formatOffset=function(ka,wa){return M(this.fixed,wa)};W.offset=function(){return this.fixed};
W.equals=function(ka){return"fixed"===ka.type&&ka.fixed===this.fixed};a(sa,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+M(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===ad&&(ad=new sa(0));return ad}}]);return sa}(cc),Hb=function(ja){function sa(ka){var wa=ja.call(this)||this;wa.zoneName=ka;return wa}g(sa,ja);var W=sa.prototype;W.offsetName=
function(){return null};W.formatOffset=function(){return""};W.offset=function(){return NaN};W.equals=function(){return!1};a(sa,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return sa}(cc),Dc=function(){return Date.now()},Cc="system",fd=null,gd=null,hd=null,Kc,Jb=function(){function ja(){}ja.resetCaches=function(){Rb.resetCache();fc.resetCache()};a(ja,null,[{key:"now",
get:function(){return Dc},set:function(sa){Dc=sa}},{key:"defaultZone",get:function(){return ca(Cc,ed.instance)},set:function(sa){Cc=sa}},{key:"defaultLocale",get:function(){return fd},set:function(sa){fd=sa}},{key:"defaultNumberingSystem",get:function(){return gd},set:function(sa){gd=sa}},{key:"defaultOutputCalendar",get:function(){return hd},set:function(sa){hd=sa}},{key:"throwOnInvalid",get:function(){return Kc},set:function(sa){Kc=sa}}]);return ja}(),nd=["base"],Yc={},Zc={},bd={},Uc=null,Mc=function(){function ja(sa,
W,ka){this.padTo=ka.padTo||0;this.floor=ka.floor||!1;if(!W){W={useGrouping:!1};0<ka.padTo&&(W.minimumIntegerDigits=ka.padTo);ka=W;void 0===ka&&(ka={});W=JSON.stringify([sa,ka]);var wa=Zc[W];wa||(wa=new Intl.NumberFormat(sa,ka),Zc[W]=wa);this.inf=wa}}ja.prototype.format=function(sa){if(this.inf)return this.inf.format(this.floor?Math.floor(sa):sa);sa=this.floor?Math.floor(sa):C(sa,3);return y(sa,this.padTo)};return ja}(),od=function(){function ja(W,ka,wa){this.opts=wa;if(W.zone.isUniversal){var Ga=
W.offset/60*-1;Ga=0<=Ga?"Etc/GMT+"+Ga:"Etc/GMT"+Ga;var Ra=fc.isValidZone(Ga);0!==W.offset&&Ra?this.dt=W:(Ga="UTC",this.dt=wa.timeZoneName?W:0===W.offset?W:Tb.fromMillis(W.ts+6E4*W.offset))}else"system"===W.zone.type?this.dt=W:(this.dt=W,Ga=W.zone.name);W=b({},this.opts);Ga&&(W.timeZone=Ga);this.dtf=I(ka,W)}var sa=ja.prototype;sa.format=function(){return this.dtf.format(this.dt.toJSDate())};sa.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};sa.resolvedOptions=function(){return this.dtf.resolvedOptions()};
return ja}(),pd=function(){function ja(W,ka,wa){this.opts=b({style:"long"},wa);if(!ka&&v()){ka=wa;void 0===ka&&(ka={});wa=ka;wa.base;if(null==wa)wa={};else{var Ga={},Ra=Object.keys(wa),ab;for(ab=0;ab<Ra.length;ab++){var gb=Ra[ab];0<=nd.indexOf(gb)||(Ga[gb]=wa[gb])}wa=Ga}wa=JSON.stringify([W,wa]);Ga=bd[wa];Ga||(Ga=new Intl.RelativeTimeFormat(W,ka),bd[wa]=Ga);this.rtf=Ga}}var sa=ja.prototype;sa.format=function(W,ka){return this.rtf?this.rtf.format(W,ka):Y(ka,W,this.opts.numeric,"long"!==this.opts.style)};
sa.formatToParts=function(W,ka){return this.rtf?this.rtf.formatToParts(W,ka):[]};return ja}(),Rb=function(){function ja(W,ka,wa,Ga){var Ra=W.indexOf("-u-");if(-1===Ra)W=[W];else{Ra=W.substring(0,Ra);try{var ab=I(W).resolvedOptions()}catch(gb){ab=I(Ra).resolvedOptions()}W=ab;W=[Ra,W.numberingSystem,W.calendar]}ab=W[1];Ra=W[2];this.locale=W[0];this.numberingSystem=ka||ab||null;this.outputCalendar=wa||Ra||null;ka=this.locale;wa=this.numberingSystem;if((W=this.outputCalendar)||wa)ka+="-u",W&&(ka+="-ca-"+
W),wa&&(ka+="-nu-"+wa);this.intl=ka;this.weekdaysCache={format:{},standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Ga;this.fastNumbersCached=null}ja.fromOpts=function(W){return ja.create(W.locale,W.numberingSystem,W.outputCalendar,W.defaultToEN)};ja.create=function(W,ka,wa,Ga){void 0===Ga&&(Ga=!1);W=W||Jb.defaultLocale;var Ra;(Ra=W)||(Ga?Ga="en-US":(Uc||(Uc=(new Intl.DateTimeFormat).resolvedOptions().locale),Ga=Uc),Ra=Ga);return new ja(Ra,
ka||Jb.defaultNumberingSystem,wa||Jb.defaultOutputCalendar,W)};ja.resetCache=function(){Uc=null;Yc={};Zc={};bd={}};ja.fromObject=function(W){W=void 0===W?{}:W;return ja.create(W.locale,W.numberingSystem,W.outputCalendar)};var sa=ja.prototype;sa.listingMode=function(W){W=this.isEnglish();var ka=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return W&&ka?"en":"intl"};sa.clone=function(W){return W&&0!==Object.getOwnPropertyNames(W).length?
ja.create(W.locale||this.specifiedLocale,W.numberingSystem||this.numberingSystem,W.outputCalendar||this.outputCalendar,W.defaultToEN||!1):this};sa.redefaultToEN=function(W){void 0===W&&(W={});return this.clone(b({},W,{defaultToEN:!0}))};sa.redefaultToSystem=function(W){void 0===W&&(W={});return this.clone(b({},W,{defaultToEN:!1}))};sa.months=function(W,ka,wa){var Ga=this;void 0===ka&&(ka=!1);void 0===wa&&(wa=!0);return pa(this,W,wa,K,function(){var Ra=ka?{month:W,day:"numeric"}:{month:W},ab=ka?"format":
"standalone";Ga.monthsCache[ab][W]||(Ga.monthsCache[ab][W]=T(function(gb){return Ga.extract(gb,Ra,"month")}));return Ga.monthsCache[ab][W]})};sa.weekdays=function(W,ka,wa){var Ga=this;void 0===ka&&(ka=!1);void 0===wa&&(wa=!0);return pa(this,W,wa,X,function(){var Ra=ka?{weekday:W,year:"numeric",month:"long",day:"numeric"}:{weekday:W},ab=ka?"format":"standalone";Ga.weekdaysCache[ab][W]||(Ga.weekdaysCache[ab][W]=ba(function(gb){return Ga.extract(gb,Ra,"weekday")}));return Ga.weekdaysCache[ab][W]})};
sa.meridiems=function(W){var ka=this;void 0===W&&(W=!0);return pa(this,void 0,W,function(){return Sc},function(){if(!ka.meridiemCache){var wa={hour:"numeric",hourCycle:"h12"};ka.meridiemCache=[Tb.utc(2016,11,13,9),Tb.utc(2016,11,13,19)].map(function(Ga){return ka.extract(Ga,wa,"dayperiod")})}return ka.meridiemCache})};sa.eras=function(W,ka){var wa=this;void 0===ka&&(ka=!0);return pa(this,W,ka,da,function(){var Ga={era:W};wa.eraCache[W]||(wa.eraCache[W]=[Tb.utc(-40,1,1),Tb.utc(2017,1,1)].map(function(Ra){return wa.extract(Ra,
Ga,"era")}));return wa.eraCache[W]})};sa.extract=function(W,ka,wa){return(W=this.dtFormatter(W,ka).formatToParts().find(function(Ga){return Ga.type.toLowerCase()===wa}))?W.value:null};sa.numberFormatter=function(W){void 0===W&&(W={});return new Mc(this.intl,W.forceSimple||this.fastNumbers,W)};sa.dtFormatter=function(W,ka){void 0===ka&&(ka={});return new od(W,this.intl,ka)};sa.relFormatter=function(W){void 0===W&&(W={});return new pd(this.intl,this.isEnglish(),W)};sa.isEnglish=function(){return"en"===
this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};sa.equals=function(W){return this.locale===W.locale&&this.numberingSystem===W.numberingSystem&&this.outputCalendar===W.outputCalendar};a(ja,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var W=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;
this.fastNumbersCached=W}return this.fastNumbersCached}}]);return ja}(),jd=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,cd=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,dd=RegExp(""+cd.source+jd.source+"?"),Tc=RegExp("(?:T"+dd.source+")?"),kd=ta("weekYear","weekNumber","weekDay"),qd=ta("year","ordinal"),ld=RegExp(cd.source+" ?(?:"+jd.source+"|("+Gb.source+"))?"),zc=RegExp("(?: "+ld.source+")?"),rd=RegExp("^T?"+cd.source+"$"),hb=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,
zb={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},sc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,sd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,td=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,
ud=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,vd=ya(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Tc),wd=ya(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Tc),xd=ya(/(\d{4})-?(\d{3})/,Tc),yd=ya(dd),zd=Da(ra,Aa,ua),Ad=Da(kd,Aa,ua),Bd=Da(qd,Aa,ua),Cd=Da(Aa,ua),Dd=Da(Aa),Ed=ya(/(\d{4})-(\d\d)-(\d\d)/,zc),Fd=ya(ld),Gd=Da(ra,Aa,ua,Ja),Hd=Da(Aa,ua,Ja),pc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,
minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},seconds:{milliseconds:1E3}},Jc=b({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},pc),$c=b({years:{quarters:4,months:12,
weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},pc),wb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),md=wb.slice(0).reverse(),O=function(){function ja(W){var ka="longterm"===W.conversionAccuracy||
!1;this.values=W.values;this.loc=W.loc||Rb.create();this.conversionAccuracy=ka?"longterm":"casual";this.invalid=W.invalid||null;this.matrix=ka?$c:Jc;this.isLuxonDuration=!0}ja.fromMillis=function(W,ka){return ja.fromObject({milliseconds:W},ka)};ja.fromObject=function(W,ka){void 0===ka&&(ka={});if(null==W||"object"!==typeof W)throw new Xb("Duration.fromObject: argument expected to be an object, got "+(null===W?"null":typeof W));return new ja({values:Q(W,ja.normalizeUnit),loc:Rb.fromObject(ka),conversionAccuracy:ka.conversionAccuracy})};
ja.fromISO=function(W,ka){var wa=Ha(W,[hb,ha])[0];return wa?ja.fromObject(wa,ka):ja.invalid("unparsable",'the input "'+W+"\" can't be parsed as ISO 8601")};ja.fromISOTime=function(W,ka){var wa=Ha(W,[rd,Dd])[0];return wa?ja.fromObject(wa,ka):ja.invalid("unparsable",'the input "'+W+"\" can't be parsed as ISO 8601")};ja.invalid=function(W,ka){void 0===ka&&(ka=null);if(!W)throw new Xb("need to specify a reason the Duration is invalid");var wa=W instanceof Qb?W:new Qb(W,ka);if(Jb.throwOnInvalid)throw new Oc(wa);
return new ja({invalid:wa})};ja.normalizeUnit=function(W){var ka={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[W?W.toLowerCase():W];if(!ka)throw new lc(W);return ka};ja.isDuration=function(W){return W&&W.isLuxonDuration||!1};var sa=ja.prototype;sa.toFormat=
function(W,ka){void 0===ka&&(ka={});var wa=b({},ka,{floor:!1!==ka.round&&!1!==ka.floor});return this.isValid?Pb.create(this.loc,wa).formatDurationFromString(this,W):"Invalid Duration"};sa.toObject=function(){return this.isValid?b({},this.values):{}};sa.toISO=function(){if(!this.isValid)return null;var W="P";0!==this.years&&(W+=this.years+"Y");if(0!==this.months||0!==this.quarters)W+=this.months+3*this.quarters+"M";0!==this.weeks&&(W+=this.weeks+"W");0!==this.days&&(W+=this.days+"D");if(0!==this.hours||
0!==this.minutes||0!==this.seconds||0!==this.milliseconds)W+="T";0!==this.hours&&(W+=this.hours+"H");0!==this.minutes&&(W+=this.minutes+"M");if(0!==this.seconds||0!==this.milliseconds)W+=C(this.seconds+this.milliseconds/1E3,3)+"S";"P"===W&&(W+="T0S");return W};sa.toISOTime=function(W){void 0===W&&(W={});if(!this.isValid)return null;var ka=this.toMillis();if(0>ka||864E5<=ka)return null;W=b({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},W);ka=this.shiftTo("hours","minutes",
"seconds","milliseconds");var wa="basic"===W.format?"hhmm":"hh:mm";W.suppressSeconds&&0===ka.seconds&&0===ka.milliseconds||(wa+="basic"===W.format?"ss":":ss",W.suppressMilliseconds&&0===ka.milliseconds||(wa+=".SSS"));ka=ka.toFormat(wa);W.includePrefix&&(ka="T"+ka);return ka};sa.toJSON=function(){return this.toISO()};sa.toString=function(){return this.toISO()};sa.toMillis=function(){return this.as("milliseconds")};sa.valueOf=function(){return this.toMillis()};sa.plus=function(W){if(!this.isValid)return this;
W=Ba(W);for(var ka={},wa=l(wb),Ga;!(Ga=wa()).done;)if(Ga=Ga.value,z(W.values,Ga)||z(this.values,Ga))ka[Ga]=W.get(Ga)+this.get(Ga);return ea(this,{values:ka},!0)};sa.minus=function(W){if(!this.isValid)return this;W=Ba(W);return this.plus(W.negate())};sa.mapUnits=function(W){if(!this.isValid)return this;for(var ka={},wa=0,Ga=Object.keys(this.values);wa<Ga.length;wa++){var Ra=Ga[wa];ka[Ra]=P(W(this.values[Ra],Ra))}return ea(this,{values:ka},!0)};sa.get=function(W){return this[ja.normalizeUnit(W)]};sa.set=
function(W){if(!this.isValid)return this;W=b({},this.values,Q(W,ja.normalizeUnit));return ea(this,{values:W})};sa.reconfigure=function(W){var ka=void 0===W?{}:W;W=ka.conversionAccuracy;ka={loc:this.loc.clone({locale:ka.locale,numberingSystem:ka.numberingSystem})};W&&(ka.conversionAccuracy=W);return ea(this,ka)};sa.as=function(W){return this.isValid?this.shiftTo(W).get(W):NaN};sa.normalize=function(){if(!this.isValid)return this;var W=this.toObject();Xa(this.matrix,W);return ea(this,{values:W},!0)};
sa.shiftTo=function(){for(var W=arguments.length,ka=Array(W),wa=0;wa<W;wa++)ka[wa]=arguments[wa];if(!this.isValid||0===ka.length)return this;ka=ka.map(function(qc){return ja.normalizeUnit(qc)});W={};wa={};for(var Ga=this.toObject(),Ra,ab=l(wb),gb;!(gb=ab()).done;)if(gb=gb.value,0<=ka.indexOf(gb)){Ra=gb;var pb=0,ub;for(ub in wa)pb+=this.matrix[ub][gb]*wa[ub],wa[ub]=0;m(Ga[gb])&&(pb+=Ga[gb]);var Db=Math.trunc(pb);W[gb]=Db;wa[gb]=pb-Db;for(var xb in Ga)wb.indexOf(xb)>wb.indexOf(gb)&&Ya(this.matrix,Ga,
xb,W,gb)}else m(Ga[gb])&&(wa[gb]=Ga[gb]);for(var Bb in wa)0!==wa[Bb]&&(W[Ra]+=Bb===Ra?wa[Bb]:wa[Bb]/this.matrix[Ra][Bb]);return ea(this,{values:W},!0).normalize()};sa.negate=function(){if(!this.isValid)return this;for(var W={},ka=0,wa=Object.keys(this.values);ka<wa.length;ka++){var Ga=wa[ka];W[Ga]=-this.values[Ga]}return ea(this,{values:W},!0)};sa.equals=function(W){if(!this.isValid||!W.isValid||!this.loc.equals(W.loc))return!1;for(var ka=l(wb),wa;!(wa=ka()).done;){var Ga=wa.value;wa=this.values[Ga];
Ga=W.values[Ga];wa=void 0===wa||0===wa?void 0===Ga||0===Ga:wa===Ga;if(!wa)return!1}return!0};a(ja,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",
get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===
this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return ja}(),Z=function(){function ja(W){this.s=W.start;this.e=W.end;this.invalid=W.invalid||null;this.isLuxonInterval=!0}ja.invalid=function(W,ka){void 0===ka&&(ka=null);if(!W)throw new Xb("need to specify a reason the Interval is invalid");var wa=W instanceof Qb?W:new Qb(W,ka);if(Jb.throwOnInvalid)throw new ec(wa);
return new ja({invalid:wa})};ja.fromDateTimes=function(W,ka){var wa=kc(W),Ga=kc(ka);var Ra=wa&&wa.isValid?Ga&&Ga.isValid?Ga<wa?Z.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+wa.toISO()+" and end\x3d"+Ga.toISO()):null:Z.invalid("missing or invalid end"):Z.invalid("missing or invalid start");return null==Ra?new ja({start:wa,end:Ga}):Ra};ja.after=function(W,ka){var wa=Ba(ka),Ga=kc(W);return ja.fromDateTimes(Ga,Ga.plus(wa))};ja.before=function(W,ka){var wa=
Ba(ka),Ga=kc(W);return ja.fromDateTimes(Ga.minus(wa),Ga)};ja.fromISO=function(W,ka){var wa=(W||"").split("/",2),Ga=wa[0];wa=wa[1];if(Ga&&wa){try{var Ra=Tb.fromISO(Ga,ka);var ab=Ra.isValid}catch(ub){ab=!1}try{var gb=Tb.fromISO(wa,ka);var pb=gb.isValid}catch(ub){pb=!1}if(ab&&pb)return ja.fromDateTimes(Ra,gb);if(ab){if(gb=O.fromISO(wa,ka),gb.isValid)return ja.after(Ra,gb)}else if(pb&&(Ra=O.fromISO(Ga,ka),Ra.isValid))return ja.before(gb,Ra)}return ja.invalid("unparsable",'the input "'+W+"\" can't be parsed as ISO 8601")};
ja.isInterval=function(W){return W&&W.isLuxonInterval||!1};var sa=ja.prototype;sa.length=function(W){void 0===W&&(W="milliseconds");return this.isValid?this.toDuration.apply(this,[W]).get(W):NaN};sa.count=function(W){void 0===W&&(W="milliseconds");if(!this.isValid)return NaN;var ka=this.start.startOf(W),wa=this.end.startOf(W);return Math.floor(wa.diff(ka,W).get(W))+1};sa.hasSame=function(W){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,W):!1};sa.isEmpty=function(){return this.s.valueOf()===
this.e.valueOf()};sa.isAfter=function(W){return this.isValid?this.s>W:!1};sa.isBefore=function(W){return this.isValid?this.e<=W:!1};sa.contains=function(W){return this.isValid?this.s<=W&&this.e>W:!1};sa.set=function(W){W=void 0===W?{}:W;return this.isValid?ja.fromDateTimes(W.start||this.s,W.end||this.e):this};sa.splitAt=function(){var W=this;if(!this.isValid)return[];for(var ka=arguments.length,wa=Array(ka),Ga=0;Ga<ka;Ga++)wa[Ga]=arguments[Ga];ka=wa.map(kc).filter(function(gb){return W.contains(gb)}).sort();
wa=[];Ga=this.s;for(var Ra=0;Ga<this.e;){var ab=ka[Ra]||this.e;ab=+ab>+this.e?this.e:ab;wa.push(ja.fromDateTimes(Ga,ab));Ga=ab;Ra+=1}return wa};sa.splitBy=function(W){W=Ba(W);if(!this.isValid||!W.isValid||0===W.as("milliseconds"))return[];for(var ka=this.s,wa=1,Ga,Ra=[];ka<this.e;)Ga=this.start.plus(W.mapUnits(function(ab){return ab*wa})),Ga=+Ga>+this.e?this.e:Ga,Ra.push(ja.fromDateTimes(ka,Ga)),ka=Ga,wa+=1;return Ra};sa.divideEqually=function(W){return this.isValid?this.splitBy(this.length()/W).slice(0,
W):[]};sa.overlaps=function(W){return this.e>W.s&&this.s<W.e};sa.abutsStart=function(W){return this.isValid?+this.e===+W.s:!1};sa.abutsEnd=function(W){return this.isValid?+W.e===+this.s:!1};sa.engulfs=function(W){return this.isValid?this.s<=W.s&&this.e>=W.e:!1};sa.equals=function(W){return this.isValid&&W.isValid?this.s.equals(W.s)&&this.e.equals(W.e):!1};sa.intersection=function(W){if(!this.isValid)return this;var ka=this.s>W.s?this.s:W.s;W=this.e<W.e?this.e:W.e;return ka>=W?null:ja.fromDateTimes(ka,
W)};sa.union=function(W){return this.isValid?ja.fromDateTimes(this.s<W.s?this.s:W.s,this.e>W.e?this.e:W.e):this};ja.merge=function(W){var ka=W.sort(function(wa,Ga){return wa.s-Ga.s}).reduce(function(wa,Ga){var Ra=wa[0],ab=wa[1];return ab?ab.overlaps(Ga)||ab.abutsStart(Ga)?[Ra,ab.union(Ga)]:[Ra.concat([ab]),Ga]:[Ra,Ga]},[[],null]);W=ka[0];(ka=ka[1])&&W.push(ka);return W};ja.xor=function(W){var ka,wa=null,Ga=0,Ra=[];W=W.map(function(ab){return[{time:ab.s,type:"s"},{time:ab.e,type:"e"}]});W=(ka=Array.prototype).concat.apply(ka,
W).sort(function(ab,gb){return ab.time-gb.time});for(ka=l(W);!(W=ka()).done;)W=W.value,Ga+="s"===W.type?1:-1,1===Ga?wa=W.time:(wa&&+wa!==+W.time&&Ra.push(ja.fromDateTimes(wa,W.time)),wa=null);return ja.merge(Ra)};sa.difference=function(){for(var W=this,ka=arguments.length,wa=Array(ka),Ga=0;Ga<ka;Ga++)wa[Ga]=arguments[Ga];return ja.xor([this].concat(wa)).map(function(Ra){return W.intersection(Ra)}).filter(function(Ra){return Ra&&!Ra.isEmpty()})};sa.toString=function(){return this.isValid?"["+this.s.toISO()+
" \u2013 "+this.e.toISO()+")":"Invalid Interval"};sa.toISO=function(W){return this.isValid?this.s.toISO(W)+"/"+this.e.toISO(W):"Invalid Interval"};sa.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};sa.toISOTime=function(W){return this.isValid?this.s.toISOTime(W)+"/"+this.e.toISOTime(W):"Invalid Interval"};sa.toFormat=function(W,ka){var wa=(void 0===ka?{}:ka).separator;wa=void 0===wa?" \u2013 ":wa;return this.isValid?""+this.s.toFormat(W)+wa+this.e.toFormat(W):
"Invalid Interval"};sa.toDuration=function(W,ka){return this.isValid?this.e.diff(this.s,W,ka):O.invalid(this.invalidReason)};sa.mapEndpoints=function(W){return ja.fromDateTimes(W(this.s),W(this.e))};a(ja,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",
get:function(){return this.invalid?this.invalid.explanation:null}}]);return ja}(),oa=function(){function ja(){}ja.hasDST=function(sa){void 0===sa&&(sa=Jb.defaultZone);var W=Tb.now().setZone(sa).set({month:12});return!sa.isUniversal&&W.offset!==W.set({month:6}).offset};ja.isValidIANAZone=function(sa){return fc.isValidSpecifier(sa)&&fc.isValidZone(sa)};ja.normalizeZone=function(sa){return ca(sa,Jb.defaultZone)};ja.months=function(sa,W){void 0===sa&&(sa="long");var ka=void 0===W?{}:W,wa=ka.locale,Ga=
ka.numberingSystem,Ra=ka.locObj;ka=ka.outputCalendar;return((void 0===Ra?null:Ra)||Rb.create(void 0===wa?null:wa,void 0===Ga?null:Ga,void 0===ka?"gregory":ka)).months(sa)};ja.monthsFormat=function(sa,W){void 0===sa&&(sa="long");var ka=void 0===W?{}:W,wa=ka.locale,Ga=ka.numberingSystem,Ra=ka.locObj;ka=ka.outputCalendar;return((void 0===Ra?null:Ra)||Rb.create(void 0===wa?null:wa,void 0===Ga?null:Ga,void 0===ka?"gregory":ka)).months(sa,!0)};ja.weekdays=function(sa,W){void 0===sa&&(sa="long");var ka=
void 0===W?{}:W,wa=ka.locale,Ga=ka.numberingSystem;ka=ka.locObj;return((void 0===ka?null:ka)||Rb.create(void 0===wa?null:wa,void 0===Ga?null:Ga,null)).weekdays(sa)};ja.weekdaysFormat=function(sa,W){void 0===sa&&(sa="long");var ka=void 0===W?{}:W,wa=ka.locale,Ga=ka.numberingSystem;ka=ka.locObj;return((void 0===ka?null:ka)||Rb.create(void 0===wa?null:wa,void 0===Ga?null:Ga,null)).weekdays(sa,!0)};ja.meridiems=function(sa){sa=(void 0===sa?{}:sa).locale;return Rb.create(void 0===sa?null:sa).meridiems()};
ja.eras=function(sa,W){void 0===sa&&(sa="short");var ka=(void 0===W?{}:W).locale;return Rb.create(void 0===ka?null:ka,null,"gregory").eras(sa)};ja.features=function(){return{relative:v()}};return ja}(),za={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",
laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Qa={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,
2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},db=za.hanidec.replace(/[\[|\]]/g,"").split(""),fb="( |"+String.fromCharCode(160)+")",qb=new RegExp(fb,"g"),Eb={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM","short":"MMM","long":"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},vb=null,
Lb=[0,31,59,90,120,151,181,212,243,273,304,334],tc=[0,31,60,91,121,152,182,213,244,274,305,335],Vc={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Ld={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Id="year month day hour minute second millisecond".split(" "),Md="weekYear weekNumber weekday hour minute second millisecond".split(" "),Nd="year ordinal hour minute second millisecond".split(" "),Tb=function(){function ja(W){var ka=
W.zone||Jb.defaultZone,wa=W.invalid||(Number.isNaN(W.ts)?new Qb("invalid input"):null)||(ka.isValid?null:Kb(ka));this.ts=r(W.ts)?Jb.now():W.ts;var Ga=null,Ra=null;wa||(W.old&&W.old.ts===this.ts&&W.old.zone.equals(ka)?(Ra=[W.old.c,W.old.o],Ga=Ra[0],Ra=Ra[1]):(Ra=ka.offset(this.ts),Ga=hc(this.ts,Ra),Ga=(wa=Number.isNaN(Ga.year)?new Qb("invalid input"):null)?null:Ga,Ra=wa?null:Ra));this._zone=ka;this.loc=W.loc||Rb.create();this.invalid=wa;this.weekData=null;this.c=Ga;this.o=Ra;this.isLuxonDateTime=!0}
ja.now=function(){return new ja({})};ja.local=function(){var W=Fc(arguments),ka=W[1];return Ec({year:ka[0],month:ka[1],day:ka[2],hour:ka[3],minute:ka[4],second:ka[5],millisecond:ka[6]},W[0])};ja.utc=function(){var W=Fc(arguments),ka=W[0],wa=W[1];W=wa[0];var Ga=wa[1],Ra=wa[2],ab=wa[3],gb=wa[4],pb=wa[5];wa=wa[6];ka.zone=$b.utcInstance;return Ec({year:W,month:Ga,day:Ra,hour:ab,minute:gb,second:pb,millisecond:wa},ka)};ja.fromJSDate=function(W,ka){void 0===ka&&(ka={});var wa="[object Date]"===Object.prototype.toString.call(W)?
W.valueOf():NaN;if(Number.isNaN(wa))return ja.invalid("invalid input");var Ga=ca(ka.zone,Jb.defaultZone);return Ga.isValid?new ja({ts:wa,zone:Ga,loc:Rb.fromObject(ka)}):ja.invalid(Kb(Ga))};ja.fromMillis=function(W,ka){void 0===ka&&(ka={});if(m(W))return-864E13>W||864E13<W?ja.invalid("Timestamp out of range"):new ja({ts:W,zone:ca(ka.zone,Jb.defaultZone),loc:Rb.fromObject(ka)});throw new Xb("fromMillis requires a numerical input, but received a "+typeof W+" with value "+W);};ja.fromSeconds=function(W,
ka){void 0===ka&&(ka={});if(m(W))return new ja({ts:1E3*W,zone:ca(ka.zone,Jb.defaultZone),loc:Rb.fromObject(ka)});throw new Xb("fromSeconds requires a numerical input");};ja.fromObject=function(W,ka){void 0===ka&&(ka={});W=W||{};var wa=ca(ka.zone,Jb.defaultZone);if(!wa.isValid)return ja.invalid(Kb(wa));var Ga=Jb.now(),Ra=wa.offset(Ga),ab=Q(W,wc),gb=!r(ab.ordinal),pb=!r(ab.year),ub=!r(ab.month)||!r(ab.day);pb=pb||ub;var Db=ab.weekYear||ab.weekNumber,xb=Rb.fromObject(ka);if((pb||gb)&&Db)throw new Vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");
if(ub&&gb)throw new Vb("Can't mix ordinal dates with month/day");ub=Db||ab.weekday&&!pb;Db=hc(Ga,Ra);if(ub){var Bb=Md;Ga=Kd;Db=Cb(Db)}else gb?(Bb=Nd,Ga=Ld,Db=yb(Db)):(Bb=Id,Ga=Vc);var qc=!1;Bb=l(Bb);for(var nc;!(nc=Bb()).done;)nc=nc.value,r(ab[nc])?ab[nc]=qc?Ga[nc]:Db[nc]:qc=!0;ub?(Ga=q(ab.weekYear),Db=x(ab.weekNumber,1,H(ab.weekYear)),qc=x(ab.weekday,1,7),Ga=Ga?Db?qc?!1:sb("weekday",ab.weekday):sb("week",ab.week):sb("weekYear",ab.weekYear)):gb?(Ga=q(ab.year),Db=x(ab.ordinal,1,E(ab.year)?366:365),
Ga=Ga?Db?!1:sb("ordinal",ab.ordinal):sb("year",ab.year)):Ga=gc(ab);if(Ga=Ga||Sb(ab))return ja.invalid(Ga);gb=ub?nb(ab):gb?Fb(ab):ab;Ra=Zb(gb,Ra,wa);wa=new ja({ts:Ra[0],zone:wa,o:Ra[1],loc:xb});return ab.weekday&&pb&&W.weekday!==wa.weekday?ja.invalid("mismatched weekday","you can't specify both a weekday of "+ab.weekday+" and a date of "+wa.toISO()):wa};ja.fromISO=function(W,ka){void 0===ka&&(ka={});var wa=Ha(W,[vd,zd],[wd,Ad],[xd,Bd],[yd,Cd]);return ic(wa[0],wa[1],ka,"ISO 8601",W)};ja.fromRFC2822=
function(W,ka){void 0===ka&&(ka={});var wa=Ha(W.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[sc,R]);return ic(wa[0],wa[1],ka,"RFC 2822",W)};ja.fromHTTP=function(W,ka){void 0===ka&&(ka={});var wa=Ha(W,[sd,Ea],[td,Ea],[ud,Ia]);return ic(wa[0],wa[1],ka,"HTTP",ka)};ja.fromFormat=function(W,ka,wa){void 0===wa&&(wa={});if(r(W)||r(ka))throw new Xb("fromFormat requires an input string and a format");var Ga=wa,Ra=Ga.locale;Ga=Ga.numberingSystem;Ra=Rb.fromOpts({locale:void 0===Ra?null:Ra,
numberingSystem:void 0===Ga?null:Ga,defaultToEN:!0});Ra=rb(Ra,W,ka);var ab=[Ra.result,Ra.zone,Ra.invalidReason];Ra=ab[0];Ga=ab[1];return(ab=ab[2])?ja.invalid(ab):ic(Ra,Ga,wa,"format "+ka,W)};ja.fromString=function(W,ka,wa){void 0===wa&&(wa={});return ja.fromFormat(W,ka,wa)};ja.fromSQL=function(W,ka){void 0===ka&&(ka={});var wa=Ha(W,[Ed,Gd],[Fd,Hd]);return ic(wa[0],wa[1],ka,"SQL",W)};ja.invalid=function(W,ka){void 0===ka&&(ka=null);if(!W)throw new Xb("need to specify a reason the DateTime is invalid");
var wa=W instanceof Qb?W:new Qb(W,ka);if(Jb.throwOnInvalid)throw new Gc(wa);return new ja({invalid:wa})};ja.isDateTime=function(W){return W&&W.isLuxonDateTime||!1};var sa=ja.prototype;sa.get=function(W){return this[W]};sa.resolvedLocaleOptions=function(W){void 0===W&&(W={});W=Pb.create(this.loc.clone(W),W).resolvedOptions(this);return{locale:W.locale,numberingSystem:W.numberingSystem,outputCalendar:W.calendar}};sa.toUTC=function(W,ka){void 0===W&&(W=0);void 0===ka&&(ka={});return this.setZone($b.instance(W),
ka)};sa.toLocal=function(){return this.setZone(Jb.defaultZone)};sa.setZone=function(W,ka){var wa=void 0===ka?{}:ka,Ga=wa.keepLocalTime;Ga=void 0===Ga?!1:Ga;wa=wa.keepCalendarTime;wa=void 0===wa?!1:wa;W=ca(W,Jb.defaultZone);if(W.equals(this.zone))return this;if(W.isValid){var Ra=this.ts;if(Ga||wa)Ga=W.offset(this.ts),wa=this.toObject(),Ra=Zb(wa,Ga,W)[0];return Ib(this,{ts:Ra,zone:W})}return ja.invalid(Kb(W))};sa.reconfigure=function(W){W=void 0===W?{}:W;W=this.loc.clone({locale:W.locale,numberingSystem:W.numberingSystem,
outputCalendar:W.outputCalendar});return Ib(this,{loc:W})};sa.setLocale=function(W){return this.reconfigure({locale:W})};sa.set=function(W){if(!this.isValid)return this;W=Q(W,wc);var ka=!r(W.weekYear)||!r(W.weekNumber)||!r(W.weekday),wa=!r(W.ordinal),Ga=!r(W.year),Ra=!r(W.month)||!r(W.day),ab=W.weekYear||W.weekNumber;if((Ga||Ra||wa)&&ab)throw new Vb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Ra&&wa)throw new Vb("Can't mix ordinal dates with month/day");ka?ka=nb(b({},
Cb(this.c),W)):r(W.ordinal)?(ka=b({},this.toObject(),W),r(W.day)&&(ka.day=Math.min(F(ka.year,ka.month),ka.day))):ka=Fb(b({},yb(this.c),W));W=Zb(ka,this.o,this.zone);return Ib(this,{ts:W[0],o:W[1]})};sa.plus=function(W){if(!this.isValid)return this;W=Ba(W);return Ib(this,vc(this,W))};sa.minus=function(W){if(!this.isValid)return this;W=Ba(W).negate();return Ib(this,vc(this,W))};sa.startOf=function(W){if(!this.isValid)return this;var ka={};W=O.normalizeUnit(W);switch(W){case "years":ka.month=1;case "quarters":case "months":ka.day=
1;case "weeks":case "days":ka.hour=0;case "hours":ka.minute=0;case "minutes":ka.second=0;case "seconds":ka.millisecond=0}"weeks"===W&&(ka.weekday=1);"quarters"===W&&(ka.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(ka)};sa.endOf=function(W){var ka;return this.isValid?this.plus((ka={},ka[W]=1,ka)).startOf(W).minus(1):this};sa.toFormat=function(W,ka){void 0===ka&&(ka={});return this.isValid?Pb.create(this.loc.redefaultToEN(ka)).formatDateTimeFromString(this,W):"Invalid DateTime"};sa.toLocaleString=
function(W,ka){void 0===W&&(W=xc);void 0===ka&&(ka={});return this.isValid?Pb.create(this.loc.clone(ka),W).formatDateTime(this):"Invalid DateTime"};sa.toLocaleParts=function(W){void 0===W&&(W={});return this.isValid?Pb.create(this.loc.clone(W),W).formatDateTimeParts(this):[]};sa.toISO=function(W){void 0===W&&(W={});return this.isValid?this.toISODate(W)+"T"+this.toISOTime(W):null};sa.toISODate=function(W){W=(void 0===W?{}:W).format;W="basic"===(void 0===W?"extended":W)?"yyyyMMdd":"yyyy-MM-dd";9999<
this.year&&(W="+"+W);return jc(this,W)};sa.toISOWeekDate=function(){return jc(this,"kkkk-'W'WW-c")};sa.toISOTime=function(W){var ka=void 0===W?{}:W;W=ka.suppressMilliseconds;var wa=ka.suppressSeconds,Ga=ka.includeOffset,Ra=ka.includePrefix;ka=ka.format;return Ac(this,{suppressSeconds:void 0===wa?!1:wa,suppressMilliseconds:void 0===W?!1:W,includeOffset:void 0===Ga?!0:Ga,includePrefix:void 0===Ra?!1:Ra,format:void 0===ka?"extended":ka})};sa.toRFC2822=function(){return jc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",
!1)};sa.toHTTP=function(){return jc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};sa.toSQLDate=function(){return jc(this,"yyyy-MM-dd")};sa.toSQLTime=function(W){var ka=void 0===W?{}:W;W=ka.includeOffset;ka=ka.includeZone;return Ac(this,{includeOffset:void 0===W?!0:W,includeZone:void 0===ka?!1:ka,spaceZone:!0})};sa.toSQL=function(W){void 0===W&&(W={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(W):null};sa.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};sa.valueOf=
function(){return this.toMillis()};sa.toMillis=function(){return this.isValid?this.ts:NaN};sa.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};sa.toJSON=function(){return this.toISO()};sa.toBSON=function(){return this.toJSDate()};sa.toObject=function(W){void 0===W&&(W={});if(!this.isValid)return{};var ka=b({},this.c);W.includeConfig&&(ka.outputCalendar=this.outputCalendar,ka.numberingSystem=this.loc.numberingSystem,ka.locale=this.loc.locale);return ka};sa.toJSDate=function(){return new Date(this.isValid?
this.ts:NaN)};sa.diff=function(W,ka,wa){void 0===ka&&(ka="milliseconds");void 0===wa&&(wa={});if(!this.isValid||!W.isValid)return O.invalid("created by diffing an invalid DateTime");wa=b({locale:this.locale,numberingSystem:this.numberingSystem},wa);var Ga=(Array.isArray(ka)?ka:[ka]).map(O.normalizeUnit);ka=W.valueOf()>this.valueOf();W=na(ka?this:W,ka?W:this,Ga,wa);return ka?W.negate():W};sa.diffNow=function(W,ka){void 0===W&&(W="milliseconds");void 0===ka&&(ka={});return this.diff(ja.now(),W,ka)};
sa.until=function(W){return this.isValid?Z.fromDateTimes(this,W):this};sa.hasSame=function(W,ka){if(!this.isValid)return!1;var wa=W.valueOf(),Ga=this.setZone(W.zone,{keepLocalTime:!0});return Ga.startOf(ka)<=wa&&wa<=Ga.endOf(ka)};sa.equals=function(W){return this.isValid&&W.isValid&&this.valueOf()===W.valueOf()&&this.zone.equals(W.zone)&&this.loc.equals(W.loc)};sa.toRelative=function(W){void 0===W&&(W={});if(!this.isValid)return null;var ka=W.base||ja.fromObject({},{zone:this.zone}),wa=W.padding?
this<ka?-W.padding:W.padding:0,Ga="years months days hours minutes seconds".split(" "),Ra=W.unit;Array.isArray(W.unit)&&(Ga=W.unit,Ra=void 0);return Nc(ka,this.plus(wa),b({},W,{numeric:"always",units:Ga,unit:Ra}))};sa.toRelativeCalendar=function(W){void 0===W&&(W={});return this.isValid?Nc(W.base||ja.fromObject({},{zone:this.zone}),this,b({},W,{numeric:"auto",units:["years","months","days"],calendary:!0})):null};ja.min=function(){for(var W=arguments.length,ka=Array(W),wa=0;wa<W;wa++)ka[wa]=arguments[wa];
if(!ka.every(ja.isDateTime))throw new Xb("min requires all arguments be DateTimes");return B(ka,function(Ga){return Ga.valueOf()},Math.min)};ja.max=function(){for(var W=arguments.length,ka=Array(W),wa=0;wa<W;wa++)ka[wa]=arguments[wa];if(!ka.every(ja.isDateTime))throw new Xb("max requires all arguments be DateTimes");return B(ka,function(Ga){return Ga.valueOf()},Math.max)};ja.fromFormatExplain=function(W,ka,wa){void 0===wa&&(wa={});var Ga=wa;wa=Ga.locale;Ga=Ga.numberingSystem;wa=Rb.fromOpts({locale:void 0===
wa?null:wa,numberingSystem:void 0===Ga?null:Ga,defaultToEN:!0});return rb(wa,W,ka)};ja.fromStringExplain=function(W,ka,wa){void 0===wa&&(wa={});return ja.fromFormatExplain(W,ka,wa)};a(ja,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",
get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?
this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?uc(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?uc(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?
uc(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?yb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?oa.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?oa.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?oa.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?oa.weekdays("long",
{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?
!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return E(this.year)}},{key:"daysInMonth",get:function(){return F(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?E(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?H(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return xc}},{key:"DATE_MED",get:function(){return Mb}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return ia}},
{key:"DATE_FULL",get:function(){return Sa}},{key:"DATE_HUGE",get:function(){return Pa}},{key:"TIME_SIMPLE",get:function(){return Ka}},{key:"TIME_WITH_SECONDS",get:function(){return Na}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return Ua}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return Ta}},{key:"TIME_24_SIMPLE",get:function(){return Oa}},{key:"TIME_24_WITH_SECONDS",get:function(){return Za}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return bb}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return cb}},
{key:"DATETIME_SHORT",get:function(){return jb}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return $a}},{key:"DATETIME_MED",get:function(){return kb}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return mb}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return ob}},{key:"DATETIME_FULL",get:function(){return Ub}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return Hc}},{key:"DATETIME_HUGE",get:function(){return yc}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Bc}}]);return ja}();
D.DateTime=Tb;D.Duration=O;D.FixedOffsetZone=$b;D.IANAZone=fc;D.Info=oa;D.Interval=Z;D.InvalidZone=Hb;D.Settings=Jb;D.SystemZone=ed;D.VERSION="2.0.2";D.Zone=cc;Object.defineProperty(D,"__esModule",{value:!0})})},"esri/arcade/Attachment":function(){var D=this&&this.__extends||function(){var A=function(a,b){A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(g[e]=d[e])};return A(a,b)};return function(a,
b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");A(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./Dictionary"],function(A,a,b){return function(g){function d(e,f,n,h,k,c){var l=g.call(this)||this;l.attachmentUrl=k;l.immutable=!1;l.setField("id",e);l.setField("name",f);l.setField("contenttype",n);l.setField("size",h);l.setField("exifinfo",
c);l.immutable=!0;return l}D(d,g);return d}(b)})},"esri/arcade/Feature":function(){var D=this&&this.__assign||function(){D=Object.assign||function(A){for(var a,b=1,g=arguments.length;b<g;b++){a=arguments[b];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(A[d]=a[d])}return A};return D.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),function(A,
a,b,g,d,e,f,n,h){return function(){function k(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}k.createFromGraphic=function(c){var l=new k;l._geometry=c.geometry?c.geometry:null;l.attributes=void 0===c.attributes?{}:null===c.attributes?{}:c.attributes;c._sourceLayer?(l._layer=c._sourceLayer,l._datesfixed=!1):c._layer?(l._layer=c._layer,l._datesfixed=!1):c.layer&&"fields"in
c.layer?(l._layer=c.layer,l._datesfixed=!1):c.sourceLayer&&"fields"in c.sourceLayer&&(l._layer=c.sourceLayer,l._datesfixed=!1);return l};k.createFromArcadeFeature=function(c){var l=new k;l._datesfixed=c._datesfixed;l.attributes=c.attributes;l._geometry=c._geometry;c._layer&&(l._layer=c._layer);return l};k.createFromArcadeDictionary=function(c){var l=new k;l.attributes=c.field("attributes");null!==l.attributes?l.attributes instanceof b?(l.attributes=l.attributes.attributes,null===l.attributes&&(l.attributes=
{})):l.attributes={}:l.attributes={};l._geometry=c.field("geometry");null!==l._geometry&&(l._geometry instanceof b?l._geometry=k.parseGeometryFromDictionary(l._geometry):l._geometry instanceof e||(l._geometry=null));return l};k.createFromGraphicLikeObject=function(c,l,r){void 0===r&&(r=null);var m=new k;null===l&&(l={});m.attributes=l;m._geometry=c?c:null;m._layer=r;m._layer&&(m._datesfixed=!1);m._adapter=null;return m};k.prototype.repurposeFromGraphicLikeObject=function(c,l,r){void 0===r&&(r=null);
null===l&&(l={});this.attributes=l;this._geometry=c?c:null;this._datesfixed=(this._layer=r)?!1:!0};k.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var c="";!1===this._datesfixed&&this._fixDates();for(var l in this.attributes){""!==c&&(c+=",");var r=this.attributes[l];null==r?c+=JSON.stringify(l)+":null":d.isBoolean(r)||d.isNumber(r)||d.isString(r)?c+=JSON.stringify(l)+":"+JSON.stringify(r):r instanceof e?c+=JSON.stringify(l)+":"+d.toStringExplicit(r):r instanceof
g?c+=JSON.stringify(l)+":"+d.toStringExplicit(r):r instanceof Array?c+=JSON.stringify(l)+":"+d.toStringExplicit(r):r instanceof Date?c+=JSON.stringify(l)+":"+JSON.stringify(r):null!==r&&"object"===typeof r&&void 0!==r.castToText&&(c+=JSON.stringify(l)+":"+r.castToText())}return'{"geometry":'+(null===this.geometry()?"null":d.toStringExplicit(this.geometry()))+',"attributes":{'+c+"}}"};k.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);
else{for(var c=[],l=0;l<this._layer.fields.length;l++){var r=this._layer.fields[l];"date"!==r.type&&"esriFieldTypeDate"!==r.type||c.push(r.name)}this._datefields=c;0<c.length&&this._fixDateFields(c)}this._datesfixed=!0};k.prototype._fixDateFields=function(c){this.attributes=D({},this.attributes);for(var l=0;l<c.length;l++){var r=this.attributes[c[l]];if(null!==r)if(void 0===r)for(var m in this.attributes){if(m.toLowerCase()===c[l].toLowerCase()){r=this.attributes[m];null===r||r instanceof Date||(this.attributes[m]=
new Date(r));break}}else r instanceof Date||(this.attributes[c[l]]=new Date(r))}};k.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof e||(this._geometry=n.fromJson(this._geometry));return this._geometry};k.prototype.field=function(c){if(this._adapter)return this._adapter.field(c);!1===this._datesfixed&&this._fixDates();var l=this.attributes[c];if(void 0!==l)return l;l=c.toLowerCase();for(var r in this.attributes)if(r.toLowerCase()===
l)return this.attributes[r];if(this._hasFieldDefinition(l))return null;throw Error("Field not Found : "+c);};k.prototype._hasFieldDefinition=function(c){if(null===this._layer)return!1;for(var l=0;l<this._layer.fields.length;l++)if(this._layer.fields[l].name.toLowerCase()===c)return!0;return!1};k.prototype._field=function(c){var l;if(this._adapter)return null!==(l=this._adapter.field(c))&&void 0!==l?l:null;!1===this._datesfixed&&this._fixDates();l=c.toLowerCase();c=this.attributes[c];if(void 0!==c)return c;
for(var r in this.attributes)if(r.toLowerCase()===l)return this.attributes[r];return null};k.prototype.setField=function(c,l){if(this.immutable)throw Error("Feature is Immutable");if(!1===d.isSimpleType(l))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(c,l);else{var r=c.toLowerCase();if(void 0===this.attributes[c])for(var m in this.attributes)if(m.toLowerCase()===r){this.attributes[m]=l;return}this.attributes[c]=l}};k.prototype.hasField=function(c){if(this._adapter)return this._adapter.hasField(c);
var l=c.toLowerCase();if(void 0!==this.attributes[c])return!0;for(var r in this.attributes)if(r.toLowerCase()===l)return!0;return this._hasFieldDefinition(l)?!0:!1};k.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var c=[],l={},r;for(r in this.attributes)c.push(r),l[r.toLowerCase()]=1;if(null!==this._layer)for(r=0;r<this._layer.fields.length;r++){var m=this._layer.fields[r];1!==l[m.name.toLowerCase()]&&c.push(m.name)}return c=c.sort()};k.parseGeometryFromDictionary=function(c){c=
k.convertDictionaryToJson(c,!0);void 0!==c.hasm&&(c.hasM=c.hasm,delete c.hasm);void 0!==c.hasz&&(c.hasZ=c.hasz,delete c.hasz);void 0!==c.spatialreference&&(c.spatialReference=c.spatialreference,delete c.spatialreference);void 0!==c.rings&&(c.rings=this.fixPathArrays(c.rings,!0===c.hasZ,!0===c.hasZ));void 0!==c.paths&&(c.paths=this.fixPathArrays(c.paths,!0===c.hasZ,!0===c.hasM));void 0!==c.points&&(c.points=this.fixPointArrays(c.points,!0===c.hasZ,!0===c.hasM));return n.fromJson(c)};k.fixPathArrays=
function(c,l,r){var m=[];if(c instanceof Array)for(var q=0;q<c.length;q++)m.push(this.fixPointArrays(c[q],l,r));else if(c instanceof g)for(q=0;q<c.length();q++)m.push(this.fixPointArrays(c.get(q),l,r));return m};k.fixPointArrays=function(c,l,r){var m=[];if(c instanceof Array)for(var q=0;q<c.length;q++){var v=c[q];v instanceof f?l&&r?m.push([v.x,v.y,v.z,v.m]):l?m.push([v.x,v.y,v.z]):r?m.push([v.x,v.y,v.m]):m.push([v.x,v.y]):v instanceof g?m.push(v.toArray()):m.push(v)}else if(c instanceof g)for(q=
0;q<c.length();q++)v=c.get(q),v instanceof f?l&&r?m.push([v.x,v.y,v.z,v.m]):l?m.push([v.x,v.y,v.z]):r?m.push([v.x,v.y,v.m]):m.push([v.x,v.y]):v instanceof g?m.push(v.toArray()):m.push(v);return m};k.convertDictionaryToJson=function(c,l){void 0===l&&(l=!1);var r={},m;for(m in c.attributes){var q=c.attributes[m];q instanceof b&&(q=k.convertDictionaryToJson(q));l?r[m.toLowerCase()]=q:r[m]=q}return r};k.parseAttributesFromDictionary=function(c){var l={},r;for(r in c.attributes){var m=c.attributes[r];
if(d.isSimpleType(m))l[r]=m;else throw Error("Illegal Argument");}return l};k.fromJson=function(c){var l=null;null!==c.geometry&&void 0!==c.geometry&&(l=n.fromJson(c.geometry));var r={};if(null!==c.attributes&&void 0!==c.attributes)for(var m in c.attributes){var q=c.attributes[m];if(null===q)r[m]=q;else if(d.isString(q)||d.isNumber(q)||d.isBoolean(q)||d.isDate(q))r[m]=q;else throw Error("Illegal Argument");}return k.createFromGraphicLikeObject(l,r,null)};k.prototype.fullDomain=function(c,l){return null!==
this._layer&&this._layer.fields?d.getDomain(c,this._layer,this,l):null};k.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(c){return{name:c.name,code:c.id}}):[]}:null:null};k.prototype.domainValueLookup=function(c,l,r){if(null===this._layer||!this._layer.fields)return null;r=d.getDomain(c,this._layer,this,r);if(void 0===l)try{l=this.field(c)}catch(m){return null}return d.getDomainValue(r,
l)};k.prototype.gdbVersion=function(){if(null===this._layer)return"";var c=this._layer.gdbVersion;return void 0===c?"":""===c&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":c};k.prototype.domainCodeLookup=function(c,l,r){if(null===this._layer||!this._layer.fields)return null;if(void 0===l){try{l=this.field(c)}catch(m){return null}return l}c=d.getDomain(c,this._layer,this,r);return d.getDomainCode(c,l)};k.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;
for(var c=[],l=0,r=this._layer.fields;l<r.length;l++)c.push(h.esriFieldToJson(r[l]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===h.layerGeometryEsriRestConstants[this._layer.geometryType]?"":h.layerGeometryEsriRestConstants[this._layer.geometryType],fields:c}};return k}()})},"esri/arcade/featureset/support/shared":function(){var D=this&&this.__assign||function(){D=Object.assign||function(A){for(var a,b=1,g=arguments.length;b<g;b++){a=
arguments[b];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(A[d]=a[d])}return A};return D.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(A,a,b,g,d){function e(n){var h=null;n.domain&&(h="range"===n.domain.type?{type:"range",range:[n.domain.minValue,n.domain.maxValue]}:{type:"codedValue",codedValues:n.domain.toJson().codedValues});return D(D({name:n.name,type:n.type,alias:n.alias},void 0!==n.length?
{length:n.length}:{}),{editable:!0===n.editable,nullable:!0===n.nullable,domain:h})}function f(n){return n instanceof Date}Object.defineProperty(a,"__esModule",{value:!0});a.stableStringify=a.extractServiceUrl=a.reduceArrayWithPromises=a.toEsriGeometryType=a.layerFieldEsriConstants=a.layerGeometryEsriRestConstants=a.layerGeometryEsriConstants=a.callback=a.errback=a.defaultMaxRecords=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=a.cloneAttributes=a.equalityTest=
a.isDate=a.isArray=a.isNumber=a.isBoolean=a.isString=a.IdState=a.esriFieldToJson=a.cloneField=a.FeatureServiceDatabaseType=void 0;(function(n){n[n.Standardised=0]="Standardised";n[n.StandardisedNoInterval=1]="StandardisedNoInterval";n[n.SqlServer=2]="SqlServer";n[n.Oracle=3]="Oracle";n[n.Postgres=4]="Postgres";n[n.PGDB=5]="PGDB";n[n.FILEGDB=6]="FILEGDB";n[n.NotEvaluated=7]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(n){return new d(e(n))};
a.esriFieldToJson=e;(function(n){n[n.InFeatureSet=0]="InFeatureSet";n[n.NotInFeatureSet=1]="NotInFeatureSet";n[n.Unknown=2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(n){return"string"===typeof n||n instanceof String};a.isBoolean=function(n){return"boolean"===typeof n};a.isNumber=function(n){return"number"===typeof n};a.isArray=function(n){return n instanceof Array};a.isDate=f;a.equalityTest=function(n,h){return n===h?!0:f(n)&&f(h)?n.getTime()===h.getTime():!1};a.cloneAttributes=function(n){var h=
{},k;for(k in n)h[k]=n[k];return h};a.convertSquareUnitsToCode=function(n){if(void 0===n)return null;if("number"===typeof n)return n;switch(n.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(n){if(null===n)return null;switch(n.type){case "polygon":case "multipoint":case "polyline":return n.getExtent();case "point":return new g({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,
spatialReference:n.spatialReference});case "extent":return n}return null};a.convertLinearUnitsToCode=function(n){if(void 0===n)return null;if("number"===typeof n||"number"===typeof n)return n;switch(n.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(n,h){return n===h||"point"===n&&"esriGeometryPoint"===h||"polyline"===n&&"esriGeometryPolyline"===h||"polygon"===n&&
"esriGeometryPolygon"===h||"extent"===n&&"esriGeometryEnvelope"===h||"multipoint"===n&&"esriGeometryMultipoint"===h||"point"===h&&"esriGeometryPoint"===n||"polyline"===h&&"esriGeometryPolyline"===n||"polygon"===h&&"esriGeometryPolygon"===n||"extent"===h&&"esriGeometryEnvelope"===n||"multipoint"===h&&"esriGeometryMultipoint"===n?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(n){return function(h){n.reject(h)}};a.callback=function(n,h){return function(){try{n.apply(null,arguments)}catch(k){h.reject(k)}}};
a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};a.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",
esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};a.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",
blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",
esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};a.toEsriGeometryType=function(n){switch(n){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(n,h){return b.create(function(k,
c){var l=b.resolve(!0);n.reduce(function(r,m,q,v){return r.then(function(B){try{return h(B,m,q,v)}catch(w){return b.reject(w)}},function(B){return b.reject(B)})},l).then(k,c)})};a.extractServiceUrl=function(n){if(void 0===n)return"";n=n.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");n=n.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return n=n.split("?")[0]};a.stableStringify=function(n,h){h||(h={});"function"===typeof h&&(h={cmp:h});var k="boolean"===typeof h.cycles?h.cycles:!1,c=h.cmp&&function(r){return function(m){return function(q,
v){return r({key:q,value:m[q]},{key:v,value:m[v]})}}}(h.cmp),l=[];return function q(m){m&&m.toJson&&"function"===typeof m.toJson&&(m=m.toJson());if(void 0!==m){if("number"===typeof m)return isFinite(m)?""+m:"null";if("object"!==typeof m)return JSON.stringify(m);var v;if(Array.isArray(m)){var B="[";for(v=0;v<m.length;v++)v&&(B+=","),B+=q(m[v])||"null";return B+"]"}if(null===m)return"null";if(-1!==l.indexOf(m)){if(k)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");
}var w=l.push(m)-1,z=Object.keys(m).sort(c&&c(m));B="";for(v=0;v<z.length;v++){var x=z[v],y=q(m[x]);y&&(B&&(B+=","),B+=JSON.stringify(x)+":"+y)}l.splice(w,1);return"{"+B+"}"}}(n)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(D,A,a,b,g,d,e){D=D(null,{declaredClass:"esri.layers.Field",constructor:function(f){if(f&&A.isObject(f)&&(this.name=f.name,this.type=f.type,this.alias=f.alias,this.length=
f.length,this.editable=f.editable,this.nullable=f.nullable,this.defaultValue=f.defaultValue,this.description=f.description?JSON.parse(f.description):null,this.isViewOverride=!!f.isViewOverride,(f=f.domain)&&A.isObject(f)))switch(f.type){case "range":this.domain=new d(f);break;case "codedValue":this.domain=new e(f)}},toJson:function(){return g.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?
JSON.stringify(this.description):null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});A.setObject("layers.Field",D,b);return D})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(D,A,a,b,g,d){D=D([d],{declaredClass:"esri.layers.RangeDomain",constructor:function(e){e&&A.isObject(e)&&(this.minValue=e.range[0],this.maxValue=e.range[1])},
toJson:function(){var e=this.inherited(arguments);e.range=[this.minValue,this.maxValue];return g.fixJson(e)}});A.setObject("layers.RangeDomain",D,b);return D})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.layers.Domain",constructor:function(d){d&&A.isObject(d)&&(this.name=d.name,this.type=d.type)},toJson:function(){return g.fixJson({name:this.name,type:this.type})}});A.setObject("layers.Domain",
D,b);return D})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),function(D,A,a,b,g,d,e){D=D([e],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(f){f&&A.isObject(f)&&(this.codedValues=f.codedValues)},getName:function(f){var n;a.some(this.codedValues,function(h){h.code==f&&(n=h.name);return!!n});return n},toJson:function(){var f=this.inherited(arguments);f.codedValues=A.clone(this.codedValues);
return d.fixJson(f)}});A.setObject("layers.CodedValueDomain",D,g);return D})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(D,A){function a(x,y){return"0"!==x.min&&y.length<Number(x.min)||"*"!==x.max&&y.length>Number(x.max)?-2:1}function b(x,y,u){if(null!==u.localScope&&void 0!==u.localScope[x.toLowerCase()]){var t=u.localScope[x.toLowerCase()];if("FormulaFunction"===t.type||"any"===t.type)return void 0===t.signature&&(t.signature={min:"0",max:"*"}),a(t.signature,y)}return void 0!==
u.globalScope[x.toLowerCase()]&&(t=u.globalScope[x.toLowerCase()],"FormulaFunction"===t.type||"any"===t.type)?(void 0===t.signature&&(t.signature={min:"0",max:"*"}),a(t.signature,y)):-1}function g(x,y){if(x)for(var u=0;u<x.length;u++)d(x[u],y)}function d(x,y){if(x&&!1!==y(x))switch(x.type){case "ArrayExpression":g(x.elements,y);break;case "AssignmentExpression":case "BinaryExpression":d(x.left,y);d(x.right,y);break;case "BlockStatement":g(x.body,y);break;case "CallExpression":d(x.callee,y);g(x.arguments,
y);break;case "ExpressionStatement":d(x.expression,y);break;case "ForInStatement":d(x.left,y);d(x.right,y);d(x.body,y);break;case "ForStatement":d(x.init,y);d(x.test,y);d(x.update,y);d(x.body,y);break;case "FunctionDeclaration":d(x.id,y);g(x.params,y);d(x.body,y);break;case "IfStatement":d(x.test,y);d(x.consequent,y);d(x.alternate,y);break;case "LogicalExpression":d(x.left,y);d(x.right,y);break;case "MemberExpression":d(x.object,y);d(x.property,y);break;case "ObjectExpression":g(x.properties,y);break;
case "Program":g(x.body,y);break;case "Property":d(x.key,y);d(x.value,y);break;case "ReturnStatement":d(x.argument,y);break;case "UnaryExpression":d(x.argument,y);break;case "UpdateExpression":d(x.argument,y);break;case "VariableDeclaration":g(x.declarations,y);break;case "VariableDeclarator":d(x.id,y);d(x.init,y);break;case "TemplateLiteral":g(x.expressions,y),g(x.quasis,y)}}function e(x,y){void 0===y&&(y=!0);var u=l(x,"SYNTAX","UNREOGNISED");try{switch(x.type){case "VariableDeclarator":return"Identifier"!==
x.id.type?l(x,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==x.init?e(x.init,!1):"";case "VariableDeclaration":for(var t=0;t<x.declarations.length;t++)if(u=e(x.declarations[t],y),""!==u)return u;return"";case "ForInStatement":u=e(x.left,y);if(""!==u)break;if("VariableDeclaration"===x.left.type){if(1<x.left.declarations.length)return l(x,"SYNTAX","ONLY1VAR");if(null!==x.left.declarations[0].init)return l(x,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==x.left.type)return l(x,"SYNTAX","LEFTNOTVAR");
u=e(x.right,y);if(""!==u)break;u=e(x.body,y);if(""!==u)break;return"";case "ForStatement":if(null!==x.test&&(u=e(x.test,y),""!==u))break;if(null!==x.init&&(u=e(x.init,y),""!==u))break;if(null!==x.update&&(u=e(x.update,y),""!==u))break;if(null!==x.body&&(u=e(x.body,y),""!==u))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":u=e(x.test,y);if(""!==u)break;if(null!==x.consequent&&(u=e(x.consequent,!1),""!==u))break;if(null!==
x.alternate&&(u=e(x.alternate,!1),""!==u))break;return"";case "BlockStatement":var C=[];for(t=0;t<x.body.length;t++)"EmptyStatement"!==x.body[t].type&&C.push(x.body[t]);x.body=C;for(t=0;t<x.body.length;t++)if(u=e(x.body[t],y),""!==u)return u;return"";case "FunctionDeclaration":return!1===y?l(x,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==x.id.type?l(x,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):e(x.body,!1);case "ReturnStatement":return null!==x.argument?e(x.argument,y):"";case "UpdateExpression":return"Identifier"!==
x.argument.type&&"MemberExpression"!==x.argument.type?l(x,"SYNTAX","ASSIGNMENTTOVARSONLY"):e(x.argument,y);case "AssignmentExpression":if("Identifier"!==x.left.type&&"MemberExpression"!==x.left.type)return l(x,"SYNTAX","ASSIGNMENTTOVARSONLY");u=e(x.left,y);if(""!==u)break;switch(x.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return l(x,"SYNTAX","OPERATORNOTRECOGNISED")}return e(x.right,!1);case "ExpressionStatement":return e(x.expression,!1);
case "Identifier":u="";break;case "MemberExpression":u=e(x.object,y);if(""!==u)break;return!0===x.computed?e(x.property,y):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==x.callee.type)return l(x,"SYNTAX","ONLYNODESSUPPORTED");u="";for(t=0;t<x.arguments.length;t++)if(u=e(x.arguments[t],y),""!==u)return u;return"";case "UnaryExpression":u=e(x.argument,y);break;case "BinaryExpression":u=e(x.left,y);if(""!==u)break;u=e(x.right,y);if(""!==u)break;switch(x.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return l(x,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":u=e(x.left,y);if(""!==u)break;u=e(x.right);if(""!==u)break;switch(x.operator){case "\x26\x26":case "||":break;default:return l(x,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":u="";for(t=0;t<x.elements.length&&(u=e(x.elements[t],y),""===u);t++);break;case "TemplateLiteral":u="";for(t=0;t<x.quasis.length;t++)if(u=e(x.quasis[t],y),""!==u)return u;for(t=0;t<x.expressions.length&&(u=e(x.expressions[t],
y),""===u);t++);break;case "ObjectExpression":u="";for(t=0;t<x.properties.length;t++){u="";if(null!==x.properties[t].key&&("Literal"!==x.properties[t].key.type&&"Identifier"!==x.properties[t].key.type&&(u=l(x,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===x.properties[t].key.type)){C=x.properties[t].key;var E="value"in C?C.value:null;"string"===typeof E||E instanceof String||(u=l(x,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===u&&(u=e(x.properties[t],y));if(""!==u)break}break;case "Property":if("Literal"!==
x.key.type&&"Identifier"!==x.key.type)return l(x,"SYNTAX","ONLYLITERAL");if("Identifier"!==x.key.type&&(u=e(x.key,y),""!==u))break;u=e(x.value,y)}return u}catch(F){throw F;}}function f(x,y){var u=l(x,"SYNTAX","UNREOGNISED"),t=null,C="";try{switch(x.type){case "VariableDeclarator":var E=null===x.init?"":f(x.init,y);if(""!==E)return E;"Identifier"===x.id.type&&(null===y.localScope?y.globalScope[x.id.name.toLowerCase()]={type:"any"}:y.localScope[x.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":t=
h(x.id.name.toLowerCase(),x);C=k(x,y);if(""!==C)return C;if(null!==y.localScope)return l(x,"SYNTAX","GLOBALFUNCTIONSONLY");t.isnative=!1;y.globalScope[x.id.name.toLowerCase()]={type:"FormulaFunction",signature:[t]};return"";case "VariableDeclaration":u="";for(var F=0;F<x.declarations.length&&(u=f(x.declarations[F],y),""===u);F++);break;case "IfStatement":u=f(x.test,y);if(""!==u)break;if("AssignmentExpression"===x.test.type||"UpdateExpression"===x.test.type)return l(x.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
if(null!==x.consequent&&(u=f(x.consequent,y),""!==u))break;if(null!==x.alternate&&(u=f(x.alternate,y),""!==u))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(F=0;F<x.body.length;F++)if(u=f(x.body[F],y),""!==u)return u;return"";case "ReturnStatement":return null!==x.argument?f(x.argument,y):"";case "ForInStatement":if("VariableDeclaration"===x.left.type){if(1<x.left.declarations.length)return l(x,"SYNTAX","ONLY1VAR");if(null!==x.left.declarations[0].init)return l(x,"SYNTAX",
"CANNOTDECLAREVAL")}else if("Identifier"!==x.left.type)return l(x,"SYNTAX","LEFTNOTVAR");u=f(x.left,y);if(""!==u)break;u=f(x.right,y);if(""!==u)break;u=f(x.body,y);if(""!==u)break;return"";case "ForStatement":if(null!==x.init&&(u=f(x.init,y),""!==u))break;if(null!==x.test&&(u=f(x.test,y),""!==u))break;if(null!==x.body&&(u=f(x.body,y),""!==u))break;if(null!==x.update&&(u=f(x.update,y),""!==u))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==
x.argument.type&&"MemberExpression"!==x.argument.type)return l(x,"SYNTAX","ASSIGNMENTTOVARSONLY");var G=!1;if("MemberExpression"===x.argument.type)return f(x.argument,y);null!==y.localScope&&void 0!==y.localScope[x.argument.name.toLowerCase()]&&(G=!0);void 0!==y.globalScope[x.argument.name.toLowerCase()]&&(G=!0);return!1===G?"Identifier "+x.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==x.left.type&&"MemberExpression"!==x.left.type)return l(x,"SYNTAX","ASSIGNMENTTOVARSONLY");
var H=f(x.right,y);if(""!==H)return H;G=!1;if("MemberExpression"===x.left.type)return H=f(x.left,y),""!==H?H:"";null!==y.localScope&&void 0!==y.localScope[x.left.name.toLowerCase()]&&(G=!0);void 0!==y.globalScope[x.left.name.toLowerCase()]&&(G=!0);return!1===G?"Identifier "+x.left.name+" has not been declared.":"";case "ExpressionStatement":return f(x.expression,y);case "Identifier":var L=x.name.toLowerCase();if(null!==y.localScope&&void 0!==y.localScope[L])return"";u=void 0!==y.globalScope[L]?"":
l(x,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":u=f(x.object,y);if(""!==u)break;return!0===x.computed?f(x.property,y):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==x.callee.type)return l(x,"SYNTAX","ONLYNODESSUPPORTED");u="";for(F=0;F<x.arguments.length;F++)if(u=f(x.arguments[F],y),""!==u)return u;var J=b(x.callee.name,x.arguments,y);-1===J&&(u=l(x,"SYNTAX","NOTFOUND"));-2===J&&(u=l(x,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":u=
f(x.argument,y);break;case "BinaryExpression":u=f(x.left,y);if(""!==u)break;u=f(x.right,y);if(""!==u)break;return"";case "LogicalExpression":u=f(x.left,y);if(""!==u)break;if("AssignmentExpression"===x.left.type||"UpdateExpression"===x.left.type)return l(x.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");u=f(x.right,y);if(""!==u)break;return"AssignmentExpression"===x.right.type||"UpdateExpression"===x.right.type?l(x.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":u=
"";for(F=0;F<x.elements.length&&(u=f(x.elements[F],y),""===u);F++);break;case "TemplateLiteral":u="";for(F=0;F<x.quasis.length;F++)if(u=f(x.quasis[F],y),""!==u)return u;for(F=0;F<x.expressions.length&&(u=f(x.expressions[F],y),""===u);F++);break;case "ObjectExpression":u="";for(F=0;F<x.properties.length;F++){u="";if(null!==x.properties[F].key&&("Literal"!==x.properties[F].key.type&&"Identifier"!==x.properties[F].key.type&&(u=l(x,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===x.properties[F].key.type)){var S=
x.properties[F].key,P="value"in S?S.value:null;"string"===typeof P||P instanceof String||(u=l(x,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===u&&(u=f(x.properties[F],y));if(""!==u)break}break;case "Property":if("Literal"!==x.key.type&&"Identifier"!==x.key.type)return l(x,"SYNTAX","ONLYLITERAL");if("Identifier"!==x.key.type&&(u=f(x.key,y),""!==u))break;u=f(x.value,y)}return u}catch(Q){throw Q;}}function n(x,y){var u=!1,t=y.toLowerCase();d(x,function(C){if(u)return!1;"Identifier"===C.type&&C.name&&C.name.toLowerCase()===
t&&(u=!0);return!0});return u}function h(x,y){var u=[];if(void 0!==y.params&&null!==y.params)for(var t=0;t<y.params.length;t++)u.push("any");return{name:x,"return":"any",params:u}}function k(x,y){for(var u={globalScope:y.globalScope,localScope:{}},t=0;t<x.params.length;t++)u.localScope[x.params[t].name.toLowerCase()]={type:"any"};return f(x.body,u)}function c(x,y,u,t){var C={};if(void 0===x||null===x)x={};if(void 0===u||null===u)u={};C.infinity={type:"any"};C.textformatting={type:"any"};C.pi={type:"any"};
for(var E in y)"sync"===t&&void 0!==y[E].min?C[E]={type:"FormulaFunction",signature:{min:y[E].min,max:y[E].max}}:"sync"!==t&&void 0!==y[E].fmin&&(C[E]={type:"FormulaFunction",signature:{min:y[E].fmin,max:y[E].fmax}});for(y=0;y<u.length;y++)E=u[y],C[E.name]={type:"FormulaFunction",signature:E};for(E in x)C[E]=x[E],C[E].type="any";return C}function l(x,y,u){var t="";switch(y){case "SYNTAX":t="Syntax Error: ";break;case "RUNTIME":t="Runtime Error: ";break;default:t="Syntax Error: "}try{switch(x.type){case "IfStatement":switch(u){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":t+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":t+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(u){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":t+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":t+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":t+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(u){case "GLOBALFUNCTIONSONLY":t+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":t+=" Function Definition must have an identifier"}break;case "VariableDeclaration":t+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(u){case "FUNCTIONVARIABLEDECLARATOR":t+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":t+=" Variable Definition must have an identifier"}break;case "Identifier":t+=" Identifier Not Found. ";t+=x.name;break;case "ObjectExpression":switch(u){case "OBJECTPROPERTYMUSTBESTRING":t+=
" Property name must be a string"}break;case "ForStatement":switch(u){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":t+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(u){case "ONLY1VAR":t+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":t+=" Can only declare value for use with IN";break;case "LEFTNOVAR":t+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":t+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":t+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(u){case "PROPERTYNOTFOUND":t+="Cannot find member property. ";t+=!1===x.computed?"Identifier"===x.property.type?x.property.name:"":"";break;case "OUTOFBOUNDS":t+="Out of Bounds. ";t+=!1===x.computed?"Identifier"===x.property.type?x.property.name:"":"";break;case "NOTFOUND":t+="Cannot call member method on null. ";t+=!1===x.computed?"Identifier"===x.property.type?x.property.name:"":"";break;case "INVALIDTYPE":t+="Cannot call member property on object of this type. ",
t+=!1===x.computed?"Identifier"===x.property.type?x.property.name:"":""}break;case "Property":switch(u){case "ONLYLITERAL":t+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(u){case "WRONGSIGNATURE":t+="Function signature does not match: ";t+="Identifier"===x.callee.type?x.callee.name:"";break;case "ONLYNODESUPPORTED":t+="Functions must be declared.";t+="Identifier"===x.callee.type?x.callee.name:"";break;case "NOTAFUNCTION":t+="Not a Function: ";
t+="Identifier"===x.callee.type?x.callee.name:"";break;case "NOTFOUND":t+="Function Not Found: "+("Identifier"===x.callee.type?x.callee.name:"")}break;case "UnaryExpression":switch(u){case "NOTSUPPORTEDUNARYOPERATOR":t+="Operator "+x.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":t+="Unary operator "+x.operator+" cannot be used with this argument."}case "BinaryExpression":switch(u){case "OPERATORNOTRECOGNISED":t+="Binary Operator not recognised "+
x.operator}break;case "LogicalExpression":switch(u){case "ONLYBOOLEAN":t+="Operator "+x.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":t+="Logical Expression "+x.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(u){case "FUNCTIONCONTEXTILLEGAL":t+=" Cannot Put Function inside Array."}break;default:t+="Expression contains unrecognised code structures."}}catch(C){throw C;}return t}function r(x,y,u){return{line:x.loc.start.line,
character:x.loc.start.column,reason:l(x,y,u)}}function m(x,y,u,t){y={globalScope:y.globalScope,localScope:{}};for(var C=0;C<x.params.length;C++)y.localScope[x.params[C].name.toLowerCase()]={type:"any"};q(x.body,y,u,t,!1)}function q(x,y,u,t,C){void 0===C&&(C=!0);if(null===x)throw Error("Unnexpexted Expression Syntax");var E=null;try{switch(x.type){case "VariableDeclarator":"Identifier"!==x.id.type?t.push(r(x,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(x.id.name.toLowerCase(),null===y.localScope?y.globalScope[x.id.name.toLowerCase()]=
{type:"any"}:y.localScope[x.id.name.toLowerCase()]={type:"any"});null!==x.init&&q(x.init,y,u,t,C);break;case "FunctionDeclaration":!1===C&&t.push(r(x,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==x.id.type&&t.push(r(x,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));E=h("",x);m(x,y,u,t);null!==y.localScope&&t.push(r(x,"SYNTAX","GLOBALFUNCTIONSONLY"));E.isnative=!1;"Identifier"===x.id.type&&(y.globalScope[x.id.name.toLowerCase()]={type:"FormulaFunction",signature:[E]});break;case "VariableDeclaration":for(var F=
0;F<x.declarations.length;F++)q(x.declarations[F],y,u,t,C);break;case "IfStatement":null!==x.test&&(q(x.test,y,u,t,C),"AssignmentExpression"!==x.test.type&&"UpdateExpression"!==x.test.type||t.push(r(x.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==x.consequent&&q(x.consequent,y,u,t,C);null!==x.alternate&&q(x.alternate,y,u,t,C);break;case "EmptyStatement":break;case "BlockStatement":if(null!==x.body)for(F=0;F<x.body.length;F++)q(x.body[F],y,u,t,C);break;case "ReturnStatement":null!==
x.argument&&q(x.argument,y,u,t,C);break;case "ForInStatement":"VariableDeclaration"===x.left.type?(1<x.left.declarations.length&&t.push(r(x,"SYNTAX","ONLY1VAR")),null!==x.left.declarations[0].init&&t.push(r(x,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==x.left.type&&t.push(r(x,"SYNTAX","LEFTNOTVAR"));q(x.left,y,u,t,C);q(x.right,y,u,t,C);q(x.body,y,u,t,C);break;case "ForStatement":null!==x.init&&q(x.init,y,u,t,C);null!==x.test&&q(x.test,y,u,t,C);null!==x.body&&q(x.body,y,u,t,C);null!==x.update&&q(x.update,
y,u,t,C);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==x.argument.type&&"MemberExpression"!==x.argument.type)t.push(r(x,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===x.argument.type){var G=!1;!1===u&&(null!==y.localScope&&void 0!==y.localScope[x.argument.name.toLowerCase()]&&(G=!0),void 0!==y.globalScope[x.argument.name.toLowerCase()]&&(G=!0),!1===G&&t.push({line:null===x?0:x.loc.start.line,character:null===x?0:x.loc.start.column,
reason:"Identifier "+x.argument.name+" has not been declared."}))}"MemberExpression"===x.argument.type&&q(x.argument,y,u,t,C)}break;case "AssignmentExpression":"Identifier"!==x.left.type&&"MemberExpression"!==x.left.type&&t.push(r(x,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(x.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:t.push(r(x,"SYNTAX","OPERATORNOTRECOGNISED"))}q(x.right,y,u,t,C);G=!1;"Identifier"===x.left.type&&(null!==y.localScope&&void 0!==
y.localScope[x.left.name.toLowerCase()]&&(G=!0),void 0!==y.globalScope[x.left.name.toLowerCase()]&&(G=!0),!1===u&&!1===G&&t.push({line:null===x?0:x.loc.start.line,character:null===x?0:x.loc.start.column,reason:"Identifier "+x.left.name+" has not been declared."}));"MemberExpression"===x.left.type&&q(x.left,y,u,t,C);break;case "ExpressionStatement":q(x.expression,y,u,t,C);break;case "Identifier":var H=x.name.toLowerCase();if(null!==y.localScope&&void 0!==y.localScope[H]||void 0!==y.globalScope[H])break;
!1===u&&t.push(r(x,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":q(x.object,y,u,t,C);!0===x.computed&&q(x.property,y,u,t,C);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==x.callee.type&&t.push(r(x,"SYNTAX","ONLYNODESSUPPORTED"));for(F=0;F<x.arguments.length;F++)q(x.arguments[F],y,u,t,C);if("Identifier"===x.callee.type){var L=b(x.callee.name,x.arguments,y);!1===u&&-1===L&&t.push(r(x,"SYNTAX","NOTFOUND"));-2===L&&t.push(r(x,"SYNTAX","WRONGSIGNATURE"))}break;
case "UnaryExpression":q(x.argument,y,u,t,C);break;case "BinaryExpression":q(x.left,y,u,t,C);q(x.right,y,u,t,C);switch(x.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:t.push(r(x,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(x.operator){case "\x26\x26":case "||":break;default:t.push(r(x,
"SYNTAX","OPERATORNOTRECOGNISED"))}q(x.left,y,u,t,C);"AssignmentExpression"!==x.left.type&&"UpdateExpression"!==x.left.type||t.push(r(x,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));q(x.right,y,u,t,C);"AssignmentExpression"!==x.right.type&&"UpdateExpression"!==x.right.type||t.push(r(x,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(F=0;F<x.elements.length;F++)q(x.elements[F],y,u,t,C);break;case "TemplateLiteral":for(F=0;F<x.quasis.length;F++)q(x.quasis[F],y,u,t,
C);for(F=0;F<x.expressions.length;F++)q(x.expressions[F],y,u,t,C);break;case "ObjectExpression":for(F=0;F<x.properties.length;F++)q(x.properties[F],y,u,t,C);break;case "Property":"Literal"!==x.key.type&&"Identifier"!==x.key.type&&t.push(r(x,"SYNTAX","ONLYLITERAL"));"Literal"===x.key.type&&q(x.key,y,u,t,C);q(x.value,y,u,t,C);break;default:t.push(r(x,"SYNTAX","UNRECOGNISED"))}}catch(J){t.push({line:null===x?0:x.loc.start.line,character:null===x?0:x.loc.start.column,reason:"Unnexpected Syntax"})}}function v(x){var y=
[];d(x,function(u){"CallExpression"===u.type&&"Identifier"===u.callee.type&&y.push(u.callee.name.toLowerCase());return!0});return y}Object.defineProperty(A,"__esModule",{value:!0});A.scriptUsesFeatureSet=A.findScriptDependencies=A.findFunctionCalls=A.checkScript=A.extractAllIssues=A.extractAllIssuesInFunction=A.makeError=A.nodeErrorMessage=A.validateLanguage=A.validateScript=A.constructGlobalScope=A.validateFunction=A.extractFunctionDeclaration=A.findExpectedFieldLiterals=A.findFieldLiterals=A.referencesFunction=
A.referencesMember=A.testValidityOfExpression=A.validateLanguageNode=A.walk=A.findFunction=A.checkFunctionSignature=A.addFunctionDeclaration=A.functionDecls=void 0;A.functionDecls={concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},
resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",
max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",
max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},
ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",
max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},
equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},
buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var B in A.functionDecls)A.functionDecls[B].fmin=
A.functionDecls[B].min,A.functionDecls[B].fmax=A.functionDecls[B].max;var w="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),z="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
A.addFunctionDeclaration=function(x,y){var u=A.functionDecls[x.name.toLowerCase()];void 0===u?"sync"===y?A.functionDecls[x.name.toLowerCase()]={min:x.min,max:x.max}:A.functionDecls[x.name.toLowerCase()]={fmin:x.min,fmax:x.max}:"sync"===y?(u.min=x.min,u.max=x.max):(u.fmin=x.min,u.fmax=x.max)};A.checkFunctionSignature=a;A.findFunction=b;A.walk=d;A.validateLanguageNode=e;A.testValidityOfExpression=f;A.referencesMember=n;A.referencesFunction=function(x,y){var u=!1,t=y.toLowerCase();d(x,function(C){return u?
!1:"CallExpression"===C.type&&"Identifier"===C.callee.type&&C.callee.name&&C.callee.name.toLowerCase()===t?(u=!0,!1):!0});return u};A.findFieldLiterals=function(x){var y=[];d(x,function(u){if("MemberExpression"!==u.type||"Identifier"!==u.object.type)return!0;!1===u.computed&&u.object&&u.object.name&&u.property&&"Identifier"===u.property.type&&u.property.name?y.push(u.object.name.toLowerCase()+"."+u.property.name.toLowerCase()):u.object&&u.object.name&&u.property&&"Literal"===u.property.type&&"string"===
typeof u.property.value&&y.push(u.object.name.toLowerCase()+"."+u.property.value.toString().toLowerCase());return!1});return y};A.findExpectedFieldLiterals=function(x){var y=[];d(x,function(u){if("CallExpression"===u.type&&"Identifier"===u.callee.type&&"expects"===u.callee.name.toLowerCase()){for(var t="",C=0;C<(u.arguments||[]).length;C++)if(0===C)"Identifier"===u.arguments[C].type&&(t=u.arguments[C].name.toLowerCase());else{var E;if(E=t&&"Literal"===u.arguments[C].type)E=u.arguments[C].value,E=
"string"===typeof E||E instanceof String;E&&y.push(t+"."+u.arguments[C].value.toLowerCase())}return!1}if("MemberExpression"!==u.type||"Identifier"!==u.object.type)return!0;!1===u.computed&&u.object&&u.object.name&&u.property&&"Identifier"===u.property.type&&u.property.name?y.push(u.object.name.toLowerCase()+"."+u.property.name.toLowerCase()):u.object&&u.object.name&&u.property&&"Literal"===u.property.type&&"string"===typeof u.property.value&&y.push(u.object.name.toLowerCase()+"."+u.property.value.toString().toLowerCase());
return!1});return y};A.extractFunctionDeclaration=h;A.validateFunction=k;A.constructGlobalScope=c;A.validateScript=function(x,y,u,t){void 0===u&&(u="async");void 0===t&&(t=A.functionDecls);y={globalScope:c(y.vars,t,y.customFunctions,u),localScope:null};return f(x.body[0].body,y)};A.validateLanguage=function(x){return"BlockStatement"!==x.body[0].body.type?"Invalid formula content.":e(x.body[0].body)};A.nodeErrorMessage=l;A.makeError=r;A.extractAllIssuesInFunction=m;A.extractAllIssues=q;A.checkScript=
function(x,y,u,t,C){void 0===t&&(t="async");void 0===C&&(C=A.functionDecls);var E=[];if("BlockStatement"!==x.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===y||void 0===y)y={vars:{},customFunctions:[]};y={globalScope:c(y.vars,C,y.customFunctions,t),localScope:null};try{q(x.body[0].body,y,u,E)}catch(F){}return E};A.findFunctionCalls=v;A.findScriptDependencies=function(x,y){void 0===y&&(y=[]);var u=null;if(void 0===x.usesFeatureSet){null===u&&(u=v(x));x.usesFeatureSet=
!1;for(var t=0;t<u.length;t++)-1<w.indexOf(u[t])&&(x.usesFeatureSet=!0,x.isAsync=!0);if(!1===x.usesFeatureSet&&y&&0<y.length){t=0;for(var C=y;t<C.length;t++)if(n(x,C[t])){x.usesFeatureSet=!0;x.isAsync=!0;break}}}if(void 0===x.usesGeometry)for(x.usesGeometry=!1,null===u&&(u=v(x)),t=0;t<u.length;t++)-1<z.indexOf(u[t])&&(x.usesGeometry=!0)};A.scriptUsesFeatureSet=function(x){x=v(x);for(var y=0;y<x.length;y++)if(-1<w.indexOf(x[y]))return!0;return!1}})},"esri/arcade/functions/array":function(){define(["require",
"exports","../languageUtils"],function(D,A,a){Object.defineProperty(A,"__esModule",{value:!0});A.registerFunctions=void 0;A.registerFunctions=function(b,g){b.array=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,1,2);f=a.toNumber(h[0]);if(isNaN(f)||!1===a.isInteger(f))throw Error("Invalid Parameter");h=a.defaultUndefined(h[1],null);f=Array(f);f.fill(h);return f})};b.front=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,1,1);if(a.isImmutableArray(h[0])){if(0>=h[0].length())throw Error("Array is empty");
return h[0].get(0)}if(a.isArray(h[0])){if(0>=h[0].length)throw Error("Array is empty");return h[0][0]}throw Error("Invalid Parameter");})};b.back=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,1,1);if(a.isImmutableArray(h[0])){if(0>=h[0].length())throw Error("Array is empty");return h[0].get(h[0].length()-1)}if(a.isArray(h[0])){if(0>=h[0].length)throw Error("Array is empty");return h[0][h[0].length-1]}throw Error("Invalid Parameter");})};b.push=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,
1,2);if(a.isArray(h[0]))return h[0][h[0].length]=h[1],h[0].length;throw Error("Invalid Parameter");})};b.pop=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,1,1);if(a.isArray(h[0])){if(0>=h[0].length)throw Error("Array is empty");f=h[0][h[0].length-1];--h[0].length;return f}throw Error("Invalid Parameter");})};b.erase=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,2,2);if(a.isArray(h[0])){f=a.toNumber(h[1]);if(isNaN(f)||!1===a.isInteger(f))throw Error("Invalid Parameter");h=h[0];if(0>=
h.length)throw Error("Array is empty");0>f&&(f=h.length+f);if(0>f)throw Error("Element not found");if(f>=h.length)throw Error("Index is greater than array");h.splice(f,1);return a.voidOperation}throw Error("Invalid Parameter");})};b.insert=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,3,3);if(a.isArray(h[0])){f=a.toNumber(h[1]);if(isNaN(f)||!1===a.isInteger(f))throw Error("Invalid Parameter");n=h[2];h=h[0];if(f>h.length)throw Error("Index is greater than array");if(0>f&&f<-1*h.length)throw Error("Index is greater than array");
if(f===h.length)return h[f]=n,a.voidOperation;h.splice(f,0,n);return a.voidOperation}throw Error("Invalid Parameter");})};b.resize=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,2,3);if(a.isArray(h[0])){n=a.toNumber(h[1]);if(isNaN(n)||!1===a.isInteger(n))throw Error("Invalid Parameter");if(0>n)throw Error("Size cannot be negative");f=a.defaultUndefined(h[2],null);h=h[0];if(h.length>=n)return h.length=n,a.voidOperation;var k=h.length;h.length=n;for(n=k;n<h.length;n++)h[n]=f;return a.voidOperation}throw Error("Invalid Parameter");
})};b.includes=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,2,2);if(a.isArray(h[0])){var k=h[1];f=h[0];return-1<f.findIndex(function(l){return a.equalityTest(l,k)})?!0:!1}if(a.isImmutableArray(h[0])){var c=h[1];f=h[0].toArray();return-1<f.findIndex(function(l){return a.equalityTest(l,c)})?!0:!1}throw Error("Invalid Parameter");})};b.slice=function(d,e){return g(d,e,function(f,n,h){a.pcCheck(h,1,3);if(a.isArray(h[0])){f=a.toNumber(a.defaultUndefined(h[1],0));n=a.toNumber(a.defaultUndefined(h[2],
h[0].length));if(isNaN(f)||!1===a.isInteger(f))throw Error("Invalid Parameter");if(isNaN(n)||!1===a.isInteger(n))throw Error("Invalid Parameter");var k=h[0];return k.slice(f,n)}if(a.isImmutableArray(h[0])){k=h[0];f=a.toNumber(a.defaultUndefined(h[1],0));n=a.toNumber(a.defaultUndefined(h[2],k.length()));if(isNaN(f)||!1===a.isInteger(f))throw Error("Invalid Parameter");if(isNaN(n)||!1===a.isInteger(n))throw Error("Invalid Parameter");return k.toArray().slice(f,n)}throw Error("Invalid Parameter");})};
b.splice=function(d,e){return g(d,e,function(f,n,h){f=[];for(n=0;n<h.length;n++)a.isArray(h[n])?f.push.apply(f,h[n]):a.isImmutableArray(h[n])?f.push.apply(f,h[n].toArray()):f.push(h[n]);return f})}}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(D,A,a,b,g){function d(k){k=new Date(k.getTime());var c=k.getFullYear(),l=new Date(0);l.setFullYear(c+1,0,4);l.setHours(0,0,0,0);l=e(l);var r=new Date(0);r.setFullYear(c,
0,4);r.setHours(0,0,0,0);r=e(r);return k.getTime()>=l.getTime()?c+1:k.getTime()>=r.getTime()?c:c-1}function e(k){k=new Date(k.getTime());var c=k.getDay();c=(1>c?7:0)+c-1;k.setDate(k.getDate()-c);k.setHours(0,0,0,0);return k}function f(k){return null===k?k:isNaN(k.getTime())?null:k}Object.defineProperty(A,"__esModule",{value:!0});A.registerFunctions=void 0;var n=[0,31,59,90,120,151,181,212,243,273,304,334],h=[0,31,60,91,121,152,182,213,244,274,305,335];A.registerFunctions=function(k,c){k.today=function(l,
r){return c(l,r,function(m,q,v){a.pcCheck(v,0,0);m=new Date;m.setHours(0,0,0,0);return m})};k.now=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,0,0);return new Date})};k.timestamp=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,0,0);m=new Date;return m=new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds())})};k.toutc=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===
m?null:new Date(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate(),m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds())})};k.tolocal=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?null:b.DateTime.utc(m.getFullYear(),m.getMonth()+1,m.getDate(),m.getHours(),m.getMinutes(),m.getSeconds(),m.getMilliseconds()).toJSDate()})};k.day=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getDate()})};
k.month=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getMonth()})};k.year=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getFullYear()})};k.hour=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getHours()})};k.second=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getSeconds()})};k.millisecond=
function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getMilliseconds()})};k.minute=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getMinutes()})};k.week=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,2);m=a.toDate(v[0]);if(null===m)return NaN;v=a.toNumber(a.defaultUndefined(v[1],0));if(0>v||6<v)throw Error("Invalid Parameter");q=m.getDate();var B=m.getMonth(),w=m.getFullYear();m=m.getDay();
q=q+(0!==w%4||0===w%100&&0!==w%400?n:h)[B]-1;B=Math.floor(q/7);return m-v+(0>m-v?7:0)<q-7*B?B+1:B})};k.weekday=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getDay()})};k.isoweekday=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);if(null===m)return NaN;m=m.getDay();0===m&&(m=7);return m})};k.isomonth=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:m.getMonth()+1})};k.isoweek=
function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);q=a.toDate(v[0]);if(null===q)return NaN;m=e(q).getTime();q=d(q);v=new Date(0);v.setFullYear(q,0,4);v.setHours(0,0,0,0);q=e(v);m-=q.getTime();return Math.round(m/6048E5)+1})};k.isoyear=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,1,1);m=a.toDate(v[0]);return null===m?NaN:d(m)})};k.date=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,0,7);if(3===v.length)return f(new Date(a.toNumber(v[0]),a.toNumber(v[1]),a.toNumber(v[2]),
0,0,0,0));if(4===v.length)return f(new Date(a.toNumber(v[0]),a.toNumber(v[1]),a.toNumber(v[2]),a.toNumber(v[3]),0,0,0));if(5===v.length)return f(new Date(a.toNumber(v[0]),a.toNumber(v[1]),a.toNumber(v[2]),a.toNumber(v[3]),a.toNumber(v[4]),0,0));if(6===v.length)return f(new Date(a.toNumber(v[0]),a.toNumber(v[1]),a.toNumber(v[2]),a.toNumber(v[3]),a.toNumber(v[4]),a.toNumber(v[5]),0));if(7===v.length)return f(new Date(a.toNumber(v[0]),a.toNumber(v[1]),a.toNumber(v[2]),a.toNumber(v[3]),a.toNumber(v[4]),
a.toNumber(v[5]),a.toNumber(v[6])));if(2===v.length){m=a.toString(v[1]);if(""===m)return null;m=a.standardiseDateFormat(m);q=void 0;q="X"===m?b.DateTime.fromSeconds(a.toNumber(v[0])):"x"===m?b.DateTime.fromMillis(a.toNumber(v[0])):b.DateTime.fromFormat(a.toString(v[0]),m,{locale:g.locale,numberingSystem:"latn"});return q.isValid?q.toJSDate():null}if(1===v.length){if(a.isString(v[0])){if(""===v[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(v[0]))return a.toDate(v[0]+
"-01-01")}m=a.toNumber(v[0]);return!1===isNaN(m)?f(new Date(m)):a.toDate(v[0])}if(0===v.length)return new Date})};k.datediff=function(l,r){return c(l,r,function(m,q,v){a.pcCheck(v,2,3);m=a.toDateTime(v[0]);q=a.toDateTime(v[1]);if(null===m||null===q)return NaN;switch(a.toString(v[2]).toLowerCase()){case "days":case "day":case "d":return m.diff(q,"days").days;case "months":case "month":return m.diff(q,"months").months;case "minutes":case "minute":case "m":return"M"===v[2]?m.diff(q,"months").months:
m.diff(q,"minutes").minutes;case "seconds":case "second":case "s":return m.diff(q,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return m.diff(q).milliseconds;case "hours":case "hour":case "h":return m.diff(q,"hours").hours;case "years":case "year":case "y":return m.diff(q,"years").years;default:return m.diff(q).milliseconds}})};k.dateadd=function(l,r){return c(l,r,function(m,q,v){var B;a.pcCheck(v,2,3);m=a.toDateTime(v[0]);if(null===m)return null;q=a.toNumber(v[1]);if(isNaN(q))return m.toJSDate();
var w="milliseconds";switch(a.toString(v[2]).toLowerCase()){case "days":case "day":case "d":w="days";q=a.absRound(q);break;case "months":case "month":w="months";q=a.absRound(q);break;case "minutes":case "minute":case "m":w="M"===v[2]?"months":"minutes";break;case "seconds":case "second":case "s":w="seconds";break;case "milliseconds":case "millisecond":case "ms":w="milliseconds";break;case "hours":case "hour":case "h":w="hours";break;case "years":case "year":case "y":w="years"}return m.plus((B={},
B[w]=q,B)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){function m(q){return q instanceof b||"object"===typeof q&&"FeatureSetReader"===q.type}Object.defineProperty(A,"__esModule",
{value:!0});A.registerFunctions=void 0;A.registerFunctions=function(q,v){q.ringisclockwise=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,1,1);z=[];if(null===y[0])return!1;if(d.isArray(y[0])){var u=0;for(y=y[0];u<y.length;u++)if(x=y[u],x instanceof h)z.push([x.x,x.y]);else throw Error("Invalid Argument");}else if(y[0]instanceof g)z=y[0]._elements;else if(d.isImmutableArray(y[0])){u=0;for(var t=y[0].toArray();u<t.length;u++)if(x=t[u],x instanceof h)z.push([x.x,x.y]);else throw Error("Invalid Argument");
0<z.length&&(y[0].get(0),y[0].get(0))}else throw Error("Invalid Argument");return 3>z.length?!1:(new k({rings:[],spatialReference:{wkid:4326}})).isClockwise(z)})};q.polygon=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,1,1);z=null;if(y[0]instanceof a){if(z=d.fixSpatialReference(b.parseGeometryFromDictionary(y[0]),B.spatialReference),!1===z instanceof k)throw Error("Illegal Parameter");}else z=y[0]instanceof k?r.fromJson(y[0].toJson()):d.fixSpatialReference(new k(JSON.parse(y[0])),B.spatialReference);
if(null!==z&&!1===z.spatialReference.equals(B.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(z)})};q.polyline=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,1,1);z=null;if(y[0]instanceof a){if(z=d.fixSpatialReference(b.parseGeometryFromDictionary(y[0]),B.spatialReference),!1===z instanceof c)throw Error("Illegal Parameter");}else z=y[0]instanceof c?r.fromJson(y[0].toJson()):d.fixSpatialReference(new c(JSON.parse(y[0])),
B.spatialReference);if(null!==z&&!1===z.spatialReference.equals(B.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(z)})};q.point=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,1,1);z=null;if(y[0]instanceof a){if(z=d.fixSpatialReference(b.parseGeometryFromDictionary(y[0]),B.spatialReference),!1===z instanceof h)throw Error("Illegal Parameter");}else z=y[0]instanceof h?r.fromJson(y[0].toJson()):
d.fixSpatialReference(new h(JSON.parse(y[0])),B.spatialReference);if(null!==z&&!1===z.spatialReference.equals(B.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(z)})};q.multipoint=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,1,1);z=null;if(y[0]instanceof a){if(z=d.fixSpatialReference(b.parseGeometryFromDictionary(y[0]),B.spatialReference),!1===z instanceof n)throw Error("Illegal Parameter");
}else z=y[0]instanceof n?r.fromJson(y[0].toJson()):d.fixSpatialReference(new n(JSON.parse(y[0])),B.spatialReference);if(null!==z&&!1===z.spatialReference.equals(B.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(z)})};q.extent=function(B,w){return v(B,w,function(z,x,y){y=d.autoCastFeatureToGeometry(y);d.pcCheck(y,1,1);z=null;y[0]instanceof a?z=d.fixSpatialReference(b.parseGeometryFromDictionary(y[0]),
B.spatialReference):y[0]instanceof h?(z={xmin:y[0].x,ymin:y[0].y,xmax:y[0].x,ymax:y[0].y,spatialReference:y[0].spatialReference.toJson()},y=y[0],y.hasZ?(z.zmin=y.z,z.zmax=y.z):y.hasM&&(z.mmin=y.m,z.mmax=y.m),z=r.fromJson(z)):z=y[0]instanceof k?r.fromJson(y[0].getExtent().toJson()):y[0]instanceof c?r.fromJson(y[0].getExtent().toJson()):y[0]instanceof n?r.fromJson(y[0].getExtent().toJson()):y[0]instanceof e?r.fromJson(y[0].toJson()):d.fixSpatialReference(new e(JSON.parse(y[0])),B.spatialReference);
if(null!==z&&!1===z.spatialReference.equals(B.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(z)})};q.geometry=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,1,1);z=null;z=m(y[0])?d.fixSpatialReference(y[0].geometry(),B.spatialReference):y[0]instanceof a?d.fixSpatialReference(b.parseGeometryFromDictionary(y[0]),B.spatialReference):d.fixSpatialReference(r.fromJson(JSON.parse(y[0])),B.spatialReference);
if(null!==z&&!1===z.spatialReference.equals(B.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(z)})};q.setgeometry=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,2,2);if(m(y[0])){if(!0===y[0].immutable)throw Error("Feature is Immutable");if(y[1]instanceof f||null===y[1])y[0]._geometry=y[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return d.voidOperation})};
q.feature=function(B,w){return v(B,w,function(z,x,y){if(0===y.length)throw Error("Missing Parameters");z=null;if(1===y.length)if(d.isString(y[0]))z=b.fromJson(JSON.parse(y[0]));else if(m(y[0]))z=b.createFromArcadeFeature(y[0]);else if(y[0]instanceof f)z=b.createFromGraphicLikeObject(y[0],null,null);else if(y[0]instanceof a)z=y[0].hasField("geometry")?y[0].field("geometry"):null,x=y[0].hasField("attributes")?y[0].field("attributes"):null,null!==z&&z instanceof a&&(z=b.parseGeometryFromDictionary(z)),
null!==x&&(x=b.parseAttributesFromDictionary(x)),z=b.createFromGraphicLikeObject(z,x,null);else throw Error("Illegal Argument");else{if(2===y.length){x=z=null;if(null!==y[0])if(y[0]instanceof f)z=y[0];else if(z instanceof a)z=b.parseGeometryFromDictionary(y[0]);else throw Error("Illegal Argument");if(null!==y[1])if(y[1]instanceof a)x=b.parseAttributesFromDictionary(y[1]);else throw Error("Illegal Argument");}else{z=null;x={};if(null!==y[0])if(y[0]instanceof f)z=y[0];else if(z instanceof a)z=b.parseGeometryFromDictionary(y[0]);
else throw Error("Illegal Argument");for(var u=1;u<y.length;u+=2){var t=d.toString(y[u]),C=y[u+1];if(null===C||void 0===C||d.isString(C)||isNaN(C)||d.isDate(C)||d.isNumber(C)||d.isBoolean(C)){if(d.isFunctionParameter(C)||!1===d.isSimpleType(C))throw Error("Illegal Argument");x[t]=C===d.voidOperation?null:C}else throw Error("Illegal Argument");}}z=b.createFromGraphicLikeObject(z,x,null)}z._geometry=d.fixSpatialReference(z.geometry(),B.spatialReference);z.immutable=!1;return z})};q.dictionary=function(B,
w){return v(B,w,function(z,x,y){if(0===y.length)return y=new a,y.immutable=!1,y;if(1===y.length&&d.isString(y[0]))try{var u=JSON.parse(y[0]),t=a.convertObjectToArcadeDictionary(u,!1);t.immutable=!1;return t}catch(C){throw Error("Missing Parameters or Illegal Json");}if(0!==y.length%2)throw Error("Missing Parameters");z={};for(x=0;x<y.length;x+=2)if(u=d.toString(y[x]),t=y[x+1],null===t||void 0===t||d.isString(t)||isNaN(t)||d.isDate(t)||d.isNumber(t)||d.isBoolean(t)||d.isArray(t)||d.isImmutableArray(t)){if(d.isFunctionParameter(t))throw Error("Illegal Argument");
z[u]=t===d.voidOperation?null:t}else throw Error("Illegal Argument");y=new a(z);y.immutable=!1;return y})};q.haskey=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,2,2);z=d.toString(y[1]);if(m(y[0])||y[0]instanceof a)return y[0].hasField(z);throw Error("Illegal Argument");})};q.indexof=function(B,w){return v(B,w,function(z,x,y){d.pcCheck(y,2,2);z=y[1];if(d.isArray(y[0])){for(x=0;x<y[0].length;x++)if(d.equalityTest(z,y[0][x]))return x;return-1}if(d.isImmutableArray(y[0])){var u=y[0].length();
for(x=0;x<u;x++)if(d.equalityTest(z,y[0].get(x)))return x;return-1}throw Error("Illegal Argument");})};q.angle=function(B,w){return v(B,w,function(z,x,y){y=d.autoCastFeatureToGeometry(y);d.pcCheck(y,2,3);if(!(y[0]instanceof h))throw Error("Illegal Argument");if(!(y[1]instanceof h))throw Error("Illegal Argument");if(2<y.length&&!(y[2]instanceof h))throw Error("Illegal Argument");return 2===y.length?l.angle2D(y[0],y[1]):l.angleBetween2D(y[0],y[1],y[2])})};q.bearing=function(B,w){return v(B,w,function(z,
x,y){y=d.autoCastFeatureToGeometry(y);d.pcCheck(y,2,3);if(!(y[0]instanceof h))throw Error("Illegal Argument");if(!(y[1]instanceof h))throw Error("Illegal Argument");if(2<y.length&&!(y[2]instanceof h))throw Error("Illegal Argument");return 2===y.length?l.bearing2D(y[0],y[1]):l.bearingBetween2D(y[0],y[1],y[2])})};q.isselfintersecting=function(B,w){return v(B,w,function(z,x,y){y=d.autoCastFeatureToGeometry(y);d.pcCheck(y,1,1);z=y[0];if(z instanceof k)return z.isSelfIntersecting(z);if(z instanceof c)return z=
z.paths,l.pathsSelfIntersecting(z);if(z instanceof n)for(x=z.points,y=0;y<x.length;y++)for(var u=0;u<x.length;u++)if(u!==y){for(var t=!0,C=0;C<x[y].length;C++)if(x[y][C]!==x[u][C]){t=!1;break}if(!0===t)return!0}return d.isArray(z)||d.isImmutableArray(z)?(z=d.autoCastArrayOfPointsToPolyline(z,B.spatialReference),null!==z&&(z=z.paths),l.pathsSelfIntersecting(z)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(D,A,a){function b(k,c,l){var r=
{x:0,y:0};c&&(r.z=0);l&&(r.m=0);for(var m=0,q=k[0],v=0;v<k.length;v++){var B=k[v];a:if(B.length!==q.length)var w=!1;else{for(w=0;w<B.length;w++)if(B[w]!==q[w]){w=!1;break a}w=!0}if(!1===w){w=g(q,B,c);var z=B,x=c,y=l,u={x:(q[0]+z[0])/2,y:(q[1]+z[1])/2};x&&(u.z=(q[2]+z[2])/2);x&&y?u.m=(q[3]+z[3])/2:y&&(u.m=(q[2]+z[2])/2);q=u;q.x*=w;q.y*=w;r.x+=q.x;r.y+=q.y;c&&(q.z*=w,r.z+=q.z);l&&(q.m*=w,r.m+=q.m);m+=w;q=B}}0<m?(r.x/=m,r.y/=m,c&&(r.z/=m),l&&(r.m/=m)):(r.x=k[0][0],r.y=k[0][1],c&&(r.z=k[0][2]),l&&c?r.m=
k[0][3]:l&&(r.m=k[0][2]));return r}function g(k,c,l){var r=c[0]-k[0];k=c[1]-k[1];return l?(c=c[2]-c[2],Math.sqrt(r*r+k*k+c*c)):Math.sqrt(r*r+k*k)}function d(k,c,l){for(void 0===l&&(l=0);k<l;)k+=c;for(l+=c;k>=l;)k-=c;return k}function e(k,c){return Math.atan2(c.y-k.y,c.x-k.x)}function f(k,c,l){var r=k.x-c.x;k=k.y-c.y;var m=l.x-c.x;c=l.y-c.y;return Math.atan2(r*c-m*k,r*m+k*c)}function n(k,c,l,r,m){var q=k[0];k=k[1];var v=c[0];c=c[1];var B=l[0],w=l[1];l=r[0]-B;B=q-B;var z=v-q;r=r[1]-w;w=k-w;var x=c-
k,y=r*z-l*x;if(0===y)return!1;l=(l*w-r*B)/y;B=(z*w-x*B)/y;return 0<=l&&1>=l&&0<=B&&1>=B?(m&&(m[0]=q+l*(v-q),m[1]=k+l*(c-k)),!0):!1}Object.defineProperty(A,"__esModule",{value:!0});A.pathsSelfIntersecting=A.bearingBetween2D=A.angleBetween2D=A.angleBetweenRad=A.bearing2D=A.angle2D=A.angleRad=A.centroidMultiPoint=A.centroidPolyline=void 0;A.centroidPolyline=function(k){for(var c={x:0,y:0,spatialReference:k.spatialReference.toJson()},l={x:0,y:0,spatialReference:k.spatialReference.toJson()},r=0,m=0,q=
0;q<k.paths.length;q++)if(0!==k.paths[q].length){var v=k.paths[q];var B=!0===k.hasZ;if(1>=v.length)v=0;else{for(var w=0,z=1;z<v.length;z++)w+=g(v[z-1],v[z],B);v=w}0===v?(B=b(k.paths[q],!0===k.hasZ,!0===k.hasM),c.x+=B.x,c.y+=B.y,!0===k.hasZ&&(c.z+=B.z),!0===k.hasM&&(c.m+=B.m),++r):(B=b(k.paths[q],!0===k.hasZ,!0===k.hasM),l.x+=B.x*v,l.y+=B.y*v,!0===k.hasZ&&(l.z+=B.z*v),!0===k.hasM&&(l.m+=B.m*v),m+=v)}return 0<m?(l.x/=m,l.y/=m,!0===k.hasZ&&(l.z/=m),!0===k.hasM&&(l.m/=m),new a(l)):0<r?(c.x/=r,c.y/=r,
!0===k.hasZ&&(l.z/=r),!0===k.hasM&&(c.m/=r),new a(c)):null};A.centroidMultiPoint=function(k){if(0===k.points.length)return null;for(var c=0,l=0,r=0,m=0,q=0;q<k.points.length;q++){var v=k.getPoint(q);!0===v.hasZ&&(r+=v.z);!0===v.hasM&&(m+=v.m);c+=v.x;l+=v.y;m+=v.m}c={x:c/k.points.length,y:l/k.points.length,spatialReference:null};c.spatialReference=k.spatialReference.toJson();!0===k.hasZ&&(c.z=r/k.points.length);!0===k.hasM&&(c.m=m/k.points.length);return new a(c)};A.angleRad=e;A.angle2D=function(k,
c){return d(e(k,c),2*Math.PI)*(180/Math.PI)};A.bearing2D=function(k,c){return d(Math.PI/2-e(k,c),2*Math.PI)*(180/Math.PI)};A.angleBetweenRad=f;A.angleBetween2D=function(k,c,l){return d(f(k,c,l),2*Math.PI)*(180/Math.PI)};A.bearingBetween2D=function(k,c,l){return d(-1*f(k,c,l),2*Math.PI)*(180/Math.PI)};var h=[0,0];A.pathsSelfIntersecting=function(k){for(var c=0;c<k.length;c++){for(var l=k[c],r=0;r<l.length-1;r++)for(var m=l[r],q=l[r+1],v=c+1;v<k.length;v++)for(var B=0;B<k[v].length-1;B++){var w=k[v][B],
z=k[v][B+1],x=n(m,q,w,z,h);if(x&&!(h[0]===m[0]&&h[1]===m[1]||h[0]===w[0]&&h[1]===w[1]||h[0]===q[0]&&h[1]===q[1]||h[0]===z[0]&&h[1]===z[1]))return!0}B=l.length;if(!(3>B))for(r=0;r<=B-2;r++)for(m=l[r],q=l[r+1],v=r+2;v<=B-2;v++)if(w=l[v],z=l[v+1],(x=n(m,q,w,z,h))&&!(h[0]===m[0]&&h[1]===m[1]||h[0]===w[0]&&h[1]===w[1]||h[0]===q[0]&&h[1]===q[1]||h[0]===z[0]&&h[1]===z[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l){function r(q){return 0===a.version.indexOf("4.")?k.fromExtent(q):new k({spatialReference:q.spatialReference,rings:[[[q.xmin,q.ymin],[q.xmin,q.ymax],[q.xmax,q.ymax],[q.xmax,q.ymin],[q.xmin,q.ymin]]]})}Object.defineProperty(A,"__esModule",{value:!0});A.registerFunctions=A.setGeometryEngine=void 0;var m=null;A.setGeometryEngine=function(q){m=q};A.registerFunctions=function(q,v){function B(w){g.pcCheck(w,2,2);if(!(w[0]instanceof f&&w[1]instanceof f||w[0]instanceof f&&
null===w[1]||w[1]instanceof f&&null===w[0]||null===w[0]&&null===w[1]))throw Error("Illegal Argument");}q.disjoint=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!0:m.disjoint(u[0],u[1])})};q.intersects=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:m.intersects(u[0],u[1])})};q.touches=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);
return null===u[0]||null===u[1]?!1:m.touches(u[0],u[1])})};q.crosses=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:m.crosses(u[0],u[1])})};q.within=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:m.within(u[0],u[1])})};q.contains=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:m.contains(u[0],u[1])})};
q.overlaps=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?!1:m.overlaps(u[0],u[1])})};q.equals=function(w,z){return v(w,z,function(x,y,u){g.pcCheck(u,2,2);return u[0]===u[1]?!0:u[0]instanceof f&&u[1]instanceof f?m.equals(u[0],u[1]):g.isDate(u[0])&&g.isDate(u[1])?u[0].getTime()===u[1].getTime():!1})};q.relate=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,3,3);if(u[0]instanceof f&&u[1]instanceof
f)return m.relate(u[0],u[1],g.toString(u[2]));if(u[0]instanceof f&&null===u[1]||u[1]instanceof f&&null===u[0]||null===u[0]&&null===u[1])return!1;throw Error("Illegal Argument");})};q.intersection=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]||null===u[1]?null:m.intersect(u[0],u[1])})};q.union=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);x=[];if(0===u.length)throw Error("Function called with wrong number of Parameters");
if(1===u.length)if(g.isArray(u[0]))for(u=g.autoCastFeatureToGeometry(u[0]),y=0;y<u.length;y++){if(null!==u[y]){if(!(u[y]instanceof f))throw Error("Illegal Argument");x.push(u[y])}}else if(g.isImmutableArray(u[0]))for(u=g.autoCastFeatureToGeometry(u[0].toArray()),y=0;y<u.length;y++){if(null!==u[y]){if(!(u[y]instanceof f))throw Error("Illegal Argument");x.push(u[y])}}else{if(u[0]instanceof f)return g.fixSpatialReference(b.cloneGeometry(u[0]),w.spatialReference);if(null===u[0])return null;throw Error("Illegal Argument");
}else for(y=0;y<u.length;y++)if(null!==u[y]){if(!(u[y]instanceof f))throw Error("Illegal Argument");x.push(u[y])}return 0===x.length?null:m.union(x)})};q.difference=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null!==u[0]&&null===u[1]?b.cloneGeometry(u[0]):null===u[0]?null:m.difference(u[0],u[1])})};q.symmetricdifference=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);B(u);return null===u[0]&&null===u[1]?null:null===u[0]?b.cloneGeometry(u[1]):
null===u[1]?b.cloneGeometry(u[0]):m.symmetricDifference(u[0],u[1])})};q.clip=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,2);if(!(u[1]instanceof e)&&null!==u[1])throw Error("Illegal Argument");if(null===u[0])return null;if(!(u[0]instanceof f))throw Error("Illegal Argument");return null===u[1]?null:m.clip(u[0],u[1])})};q.cut=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,2);if(!(u[1]instanceof c)&&null!==u[1])throw Error("Illegal Argument");
if(null===u[0])return[];if(!(u[0]instanceof f))throw Error("Illegal Argument");return null===u[1]?[b.cloneGeometry(u[0])]:m.cut(u[0],u[1])})};q.area=function(w,z){return v(w,z,function(x,y,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return x=g.autoCastArrayOfPointsToPolygon(u[0],w.spatialReference),null===x?0:m.planarArea(x,b.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof f))throw Error("Illegal Argument");
return m.planarArea(u[0],b.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)))})};q.areageodetic=function(w,z){return v(w,z,function(x,y,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return x=g.autoCastArrayOfPointsToPolygon(u[0],w.spatialReference),null===x?0:m.geodesicArea(x,b.convertSquareUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof f))throw Error("Illegal Argument");return m.geodesicArea(u[0],b.convertSquareUnitsToCode(g.defaultUndefined(u[1],
-1)))})};q.length=function(w,z){return v(w,z,function(x,y,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return x=g.autoCastArrayOfPointsToPolyline(u[0],w.spatialReference),null===x?0:m.planarLength(x,b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof f))throw Error("Illegal Argument");return m.planarLength(u[0],b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)))})};q.length3d=function(w,z){return v(w,
z,function(x,y,u){g.pcCheck(u,1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return x=g.autoCastArrayOfPointsToPolyline(u[0],w.spatialReference),null===x?0:m.planarLength(x,b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof f))throw Error("Illegal Argument");return m.planarLength(u[0],b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)))})};q.lengthgeodetic=function(w,z){return v(w,z,function(x,y,u){g.pcCheck(u,
1,2);u=g.autoCastFeatureToGeometry(u);if(null===u[0])return 0;if(g.isArray(u[0])||g.isImmutableArray(u[0]))return x=g.autoCastArrayOfPointsToPolyline(u[0],w.spatialReference),null===x?0:m.geodesicLength(x,b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)));if(!(u[0]instanceof f))throw Error("Illegal Argument");return m.geodesicLength(u[0],b.convertLinearUnitsToCode(g.defaultUndefined(u[1],-1)))})};q.distance=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,
2,3);x=u[0];if(g.isArray(u[0])||g.isImmutableArray(u[0]))x=g.autoCastArrayOfPointsToMultiPoint(u[0],w.spatialReference);y=u[1];if(g.isArray(u[1])||g.isImmutableArray(u[1]))y=g.autoCastArrayOfPointsToMultiPoint(u[1],w.spatialReference);if(!(x instanceof f))throw Error("Illegal Argument");if(!(y instanceof f))throw Error("Illegal Argument");return m.distance(x,y,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};q.distancegeodetic=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);
g.pcCheck(u,2,3);x=u[0];y=u[1];if(!(x instanceof h))throw Error("Illegal Argument");if(!(y instanceof h))throw Error("Illegal Argument");var t=new c({paths:[],spatialReference:x.spatialReference});t.addPath([x,y]);return m.geodesicLength(t,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};q.densify=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof f))throw Error("Illegal Argument");x=g.toNumber(u[1]);
if(isNaN(x))throw Error("Illegal Argument");if(0>=x)throw Error("Illegal Argument");return u[0]instanceof k||u[0]instanceof c?m.densify(u[0],x,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]instanceof e?m.densify(r(u[0]),x,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]})};q.densifygeodetic=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof f))throw Error("Illegal Argument");x=g.toNumber(u[1]);
if(isNaN(x))throw Error("Illegal Argument");if(0>=x)throw Error("Illegal Argument");return u[0]instanceof k||u[0]instanceof c?m.geodesicDensify(u[0],x,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]instanceof e?m.geodesicDensify(r(u[0]),x,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1))):u[0]})};q.generalize=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,4);if(null===u[0])return null;if(!(u[0]instanceof f))throw Error("Illegal Argument");
x=g.toNumber(u[1]);if(isNaN(x))throw Error("Illegal Argument");return m.generalize(u[0],x,g.toBoolean(g.defaultUndefined(u[2],!0)),b.convertLinearUnitsToCode(g.defaultUndefined(u[3],-1)))})};q.buffer=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof f))throw Error("Illegal Argument");x=g.toNumber(u[1]);if(isNaN(x))throw Error("Illegal Argument");return 0===x?b.cloneGeometry(u[0]):m.buffer(u[0],x,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],
-1)))})};q.buffergeodetic=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);if(null===u[0])return null;if(!(u[0]instanceof f))throw Error("Illegal Argument");x=g.toNumber(u[1]);if(isNaN(x))throw Error("Illegal Argument");return 0===x?b.cloneGeometry(u[0]):m.geodesicBuffer(u[0],x,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)))})};q.offset=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,6);if(null===u[0])return null;
if(!(u[0]instanceof k||u[0]instanceof c))throw Error("Illegal Argument");x=g.toNumber(u[1]);if(isNaN(x))throw Error("Illegal Argument");y=g.toNumber(g.defaultUndefined(u[4],10));if(isNaN(y))throw Error("Illegal Argument");var t=g.toNumber(g.defaultUndefined(u[5],0));if(isNaN(t))throw Error("Illegal Argument");return m.offset(u[0],x,b.convertLinearUnitsToCode(g.defaultUndefined(u[2],-1)),g.toString(g.defaultUndefined(u[3],"round")).toLowerCase(),y,t)})};q.rotate=function(w,z){return v(w,z,function(x,
y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,2,3);x=u[0];if(null===x)return null;if(!(x instanceof f))throw Error("Illegal Argument");x instanceof e&&(x=k.fromExtent(x));y=g.toNumber(u[1]);if(isNaN(y))throw Error("Illegal Argument");u=g.defaultUndefined(u[2],null);if(null===u)return m.rotate(x,y);if(u instanceof h)return m.rotate(x,y,u);throw Error("Illegal Argument");})};q.centroid=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return null;
x=u[0];if(g.isArray(u[0])||g.isImmutableArray(u[0]))x=g.autoCastArrayOfPointsToMultiPoint(u[0],w.spatialReference);if(null===x)return null;if(!(x instanceof f))throw Error("Illegal Argument");return x instanceof h?g.fixSpatialReference(b.cloneGeometry(u[0]),w.spatialReference):x instanceof k?x.getCentroid():x instanceof c?d.centroidPolyline(x):x instanceof n?d.centroidMultiPoint(x):x instanceof e?x.getCenter():null})};q.multiparttosinglepart=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);
g.pcCheck(u,1,1);y=[];if(null===u[0])return null;if(!(u[0]instanceof f))throw Error("Illegal Argument");if(u[0]instanceof h||u[0]instanceof e)return[g.fixSpatialReference(b.cloneGeometry(u[0]),w.spatialReference)];x=m.simplify(u[0]);if(x instanceof k){y=[];var t=[];for(u=0;u<x.rings.length;u++)if(x.isClockwise(x.rings[u])){var C=l.fromJson({rings:[x.rings[u]],hasZ:!0===x.hasZ,hasM:!0===x.hasM,spatialReference:x.spatialReference.toJson()});y.push(C)}else t.push({ring:x.rings[u],pt:x.getPoint(u,0)});
for(x=0;x<t.length;x++)for(u=0;u<y.length;u++)if(y[u].contains(t[x].pt)){y[u].addRing(t[x].ring);break}return y}if(x instanceof c){y=[];for(u=0;u<x.paths.length;u++)t=l.fromJson({paths:[x.paths[u]],hasZ:!0===x.hasZ,hasM:!0===x.hasM,spatialReference:x.spatialReference.toJson()}),y.push(t);return y}if(u[0]instanceof n){x=g.fixSpatialReference(b.cloneGeometry(u[0]),w.spatialReference);for(u=0;u<x.points.length;u++)y.push(x.getPoint(u));return y}return null})};q.issimple=function(w,z){return v(w,z,function(x,
y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return!0;if(!(u[0]instanceof f))throw Error("Illegal Argument");return m.isSimple(u[0])})};q.simplify=function(w,z){return v(w,z,function(x,y,u){u=g.autoCastFeatureToGeometry(u);g.pcCheck(u,1,1);if(null===u[0])return null;if(!(u[0]instanceof f))throw Error("Illegal Argument");return m.simplify(u[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(D,A,a,b){Object.defineProperty(A,
"__esModule",{value:!0});A.cloneGeometry=A.sameGeomType=A.convertLinearUnitsToCode=A.shapeExtent=A.convertSquareUnitsToCode=void 0;A.convertSquareUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;g=g.toLowerCase();g=g.replace(/\s/g,"");g=g.replace(/-/g,"");switch(g){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};A.shapeExtent=function(g){if(null===g)return null;switch(g.type){case "polygon":case "multipoint":case "polyline":return g.extent;
case "point":return new a({xmin:g.x,ymin:g.y,xmax:g.x,ymax:g.y,spatialReference:g.spatialReference});case "extent":return g}return null};A.convertLinearUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;g=g.toLowerCase();g=g.replace(/\s/g,"");g=g.replace(/-/g,"");switch(g){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};A.sameGeomType=function(g,d){return g===d||"point"===g&&"esriGeometryPoint"===d||"polyline"===g&&"esriGeometryPolyline"===d||"polygon"===g&&"esriGeometryPolygon"===d||"extent"===g&&"esriGeometryEnvelope"===
d||"multipoint"===g&&"esriGeometryMultipoint"===d||"point"===d&&"esriGeometryPoint"===g||"polyline"===d&&"esriGeometryPolyline"===g||"polygon"===d&&"esriGeometryPolygon"===g||"extent"===d&&"esriGeometryEnvelope"===g||"multipoint"===d&&"esriGeometryMultipoint"===g?!0:!1};A.cloneGeometry=function(g){if(null===g)return null;var d=b.fromJson(g.toJson());g.getCacheValue("_geVersion")&&d.setCacheValue("_geVersion",g.getCacheValue("_geVersion"));return d}})},"esri/arcade/functions/maths":function(){define(["require",
"exports","../languageUtils","dojo/number"],function(D,A,a,b){function g(d,e,f){if("undefined"===typeof f||0===+f)return Math[d](e);e=+e;f=+f;if(isNaN(e)||"number"!==typeof f||0!==f%1)return NaN;e=e.toString().split("e");e=Math[d](+(e[0]+"e"+(e[1]?+e[1]-f:-f)));e=e.toString().split("e");return+(e[0]+"e"+(e[1]?+e[1]+f:f))}Object.defineProperty(A,"__esModule",{value:!0});A.registerFunctions=void 0;A.registerFunctions=function(d,e){function f(n,h,k){n=a.toNumber(n);return isNaN(n)?n:isNaN(h)||isNaN(k)||
h>k?NaN:n<h?h:n>k?k:n}d.number=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,2);k=l[0];return a.isNumber(k)?k:null===k?0:a.isDate(k)||a.isBoolean(k)?Number(k):a.isArray(k)?NaN:""===k||void 0===k?Number(k):a.isString(k)?void 0!==l[1]?(l=a.multiReplace(l[1],"\u2030",""),l=a.multiReplace(l,"\u00a4",""),b.parse(k,{pattern:l})):Number(k.trim()):Number(k)})};d.abs=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return Math.abs(a.toNumber(l[0]))})};d.acos=function(n,h){return e(n,
h,function(k,c,l){a.pcCheck(l,1,1);return Math.acos(a.toNumber(l[0]))})};d.asin=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return Math.asin(a.toNumber(l[0]))})};d.atan=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return Math.atan(a.toNumber(l[0]))})};d.atan2=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,2,2);return Math.atan2(a.toNumber(l[0]),a.toNumber(l[1]))})};d.ceil=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,2);return 2===l.length?(k=a.toNumber(l[1]),
isNaN(k)&&(k=0),g("ceil",a.toNumber(l[0]),-1*k)):Math.ceil(a.toNumber(l[0]))})};d.round=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,2);return 2===l.length?(k=a.toNumber(l[1]),isNaN(k)&&(k=0),g("round",a.toNumber(l[0]),-1*k)):Math.round(a.toNumber(l[0]))})};d.floor=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,2);return 2===l.length?(k=a.toNumber(l[1]),isNaN(k)&&(k=0),g("floor",a.toNumber(l[0]),-1*k)):Math.floor(a.toNumber(l[0]))})};d.cos=function(n,h){return e(n,h,function(k,
c,l){a.pcCheck(l,1,1);return Math.cos(a.toNumber(l[0]))})};d.isnan=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return"number"===typeof l[0]&&isNaN(l[0])})};d.exp=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return Math.exp(a.toNumber(l[0]))})};d.log=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return Math.log(a.toNumber(l[0]))})};d.pow=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,2,2);return Math.pow(a.toNumber(l[0]),a.toNumber(l[1]))})};d.random=
function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,0,0);return Math.random()})};d.sin=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return Math.sin(a.toNumber(l[0]))})};d.sqrt=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return Math.sqrt(a.toNumber(l[0]))})};d.tan=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return Math.tan(a.toNumber(l[0]))})};d.defaultvalue=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,2,2);return null===l[0]||""===l[0]||
void 0===l[0]?l[1]:l[0]})};d.isempty=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return null===l[0]||""===l[0]||void 0===l[0]?!0:!1})};d["boolean"]=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,1,1);return a.toBoolean(l[0])})};d.constrain=function(n,h){return e(n,h,function(k,c,l){a.pcCheck(l,3,3);k=a.toNumber(l[1]);c=a.toNumber(l[2]);if(a.isArray(l[0])){var r=[],m=0;for(l=l[0];m<l.length;m++)r.push(f(l[m],k,c));return r}if(a.isImmutableArray(l[0])){r=[];for(m=0;m<l[0].length();m++)r.push(f(l[0].get(m),
k,c));return r}return f(l[0],k,c)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(D,A,a,b){function g(d,e,f,n){if(1===n.length){if(a.isArray(n[0]))return b.calculateStat(d,n[0],-1);if(a.isImmutableArray(n[0]))return b.calculateStat(d,n[0].toArray(),-1)}return b.calculateStat(d,n,-1)}Object.defineProperty(A,"__esModule",{value:!0});A.registerFunctions=void 0;A.registerFunctions=function(d,e){d.stdev=function(f,n){return e(f,n,
function(h,k,c){return g("stdev",h,k,c)})};d.variance=function(f,n){return e(f,n,function(h,k,c){return g("variance",h,k,c)})};d.average=function(f,n){return e(f,n,function(h,k,c){return g("mean",h,k,c)})};d.mean=function(f,n){return e(f,n,function(h,k,c){return g("mean",h,k,c)})};d.sum=function(f,n){return e(f,n,function(h,k,c){return g("sum",h,k,c)})};d.min=function(f,n){return e(f,n,function(h,k,c){return g("min",h,k,c)})};d.max=function(f,n){return e(f,n,function(h,k,c){return g("max",h,k,c)})};
d.distinct=function(f,n){return e(f,n,function(h,k,c){return g("distinct",h,k,c)})};d.count=function(f,n){return e(f,n,function(h,k,c){a.pcCheck(c,1,1);if(a.isArray(c[0])||a.isString(c[0]))return c[0].length;if(a.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(D,A,a){function b(d){for(var e=0,f=0;f<d.length;f++)e+=d[f];return e/d.length}function g(d){for(var e=
b(d),f=0,n=0;n<d.length;n++)f+=Math.pow(e-d[n],2);return f/d.length}Object.defineProperty(A,"__esModule",{value:!0});A.calculateStat=A.decodeStatType=void 0;A.decodeStatType=function(d){switch(d.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};A.calculateStat=function(d,e,f){void 0===
f&&(f=1E3);switch(d.toLowerCase()){case "distinct":a:{d=f;f=[];for(var n={},h=[],k=0;k<e.length;k++){if(void 0!==e[k]&&null!==e[k]&&e[k]!==a.voidOperation){var c=e[k];if(a.isNumber(c)||a.isString(c))void 0===n[c]&&(f.push(c),n[c]=1);else{for(var l=!1,r=0;r<h.length;r++)!0===a.equalityTest(h[r],c)&&(l=!0);!1===l&&(h.push(c),f.push(c))}}if(f.length>=d&&-1!==d){e=f;break a}}e=f}return e;case "avg":case "mean":return b(a.toNumberArray(e));case "min":return Math.min.apply(Math,a.toNumberArray(e));case "sum":e=
a.toNumberArray(e);for(f=d=0;f<e.length;f++)d+=e[f];return d;case "max":return Math.max.apply(Math,a.toNumberArray(e));case "stdev":case "stddev":return Math.sqrt(g(a.toNumberArray(e)));case "var":case "variance":return g(a.toNumberArray(e));case "count":return e.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q){function v(B,w,z){if(null===B)w.updateUint8Array([0,139]);else if(e.isArray(B)){w.updateUint8Array([61]);if(z.map.has(B))B=z.map.get(B),w.updateIntArray([B^61237541]);else{z.map.set(B,z.currentLength++);for(var x=0;x<B.length;x++){var y=B[x];v(y,w,z)}z.map["delete"](B);z.currentLength--}w.updateUint8Array([199])}else if(e.isImmutableArray(B)){w.updateUint8Array([61]);if(z.map.has(B))B=z.map.get(B),w.updateIntArray([B^61237541]);else{z.map.set(B,z.currentLength++);
x=0;for(var u=B.toArray();x<u.length;x++)y=u[x],v(y,w,z);z.map["delete"](B);z.currentLength--}w.updateUint8Array([199])}else if(e.isDate(B))w.updateIntArray([B.getTime()]),w.updateUint8Array([241]);else if(e.isString(B))w.updateIntArray([B.length]),w.updateWithString(B),w.updateUint8Array([41]);else if(e.isBoolean(B))w.updateUint8Array([!0===B?1:0,113]);else if(e.isNumber(B))w.updateFloatArray([B]),w.updateUint8Array([173]);else{if(B instanceof b)throw Error("Type not supported in Hash");if(B instanceof
a)throw Error("Type not supported in Hash");if(B instanceof g){w.updateUint8Array([223]);if(z.map.has(B))B=z.map.get(B),w.updateIntArray([B^61237541]);else{z.map.set(B,z.currentLength++);x=0;for(u=B.keys();x<u.length;x++)y=u[x],w.updateIntArray([y.length]),w.updateWithString(y),w.updateUint8Array([251]),y=B.field(y),v(y,w,z),w.updateUint8Array([239]);z.map["delete"](B);z.currentLength--}w.updateUint8Array([73])}else{if(B instanceof d)throw Error("Type not supported in Hash");if(B instanceof l)w.updateIntArray([3833836621]),
w.updateIntArray([0]),w.updateFloatArray([B.x]),w.updateIntArray([1]),w.updateFloatArray([B.y]),w.updateIntArray([3765347959]),v(B.spatialReference.wkid,w,z);else if(B instanceof r){w.updateIntArray([1266616829]);for(x=0;x<B.rings.length;x++){u=B.rings[x];var t=[],C=null,E=null;for(y=0;y<u.length;y++){var F=B.getPoint(x,y);if(0===y)C=F;else if(E.x===F.x&&E.y===F.y)continue;E=F;y===u.length-1&&C.x===F.x&&C.y===F.y||t.push(F)}w.updateIntArray([1397116793,t.length]);for(y=0;y<t.length;y++)F=t[y],w.updateIntArray([3962308117,
y]),v(F,w,z),w.updateIntArray([2716288009]);w.updateIntArray([2278822459])}w.updateIntArray([3878477243]);v(B.spatialReference.wkid,w,z)}else if(B instanceof m){w.updateIntArray([4106883559]);for(x=0;x<B.paths.length;x++){u=B.paths[x];w.updateIntArray([1397116793,u.length]);for(y=0;y<u.length;y++)w.updateIntArray([3962308117,y]),v(B.getPoint(x,y),w,z),w.updateIntArray([2716288009]);w.updateIntArray([2278822459])}w.updateIntArray([2568784753]);v(B.spatialReference.wkid,w,z)}else if(B instanceof c){w.updateIntArray([588535921,
B.points.length]);for(y=0;y<B.points.length;y++)x=B.getPoint(y),w.updateIntArray([y]),v(x,w,z);w.updateIntArray([1700171621]);v(B.spatialReference.wkid,w,z)}else if(B instanceof k)w.updateIntArray([3483648373]),w.updateIntArray([0]),w.updateFloatArray([B.xmax]),w.updateIntArray([1]),w.updateFloatArray([B.xmin]),w.updateIntArray([2]),w.updateFloatArray([B.ymax]),w.updateIntArray([3]),w.updateFloatArray([B.ymin]),w.updateIntArray([3622027469]),v(B.spatialReference.wkid,w,z);else if(B instanceof q)w.updateIntArray([14]),
void 0!==B.wkid&&null!==B.wkid&&w.updateIntArray([B.wkid]),B.wkt&&w.updateWithString(B.wkt);else{if(e.isFunctionParameter(B))throw Error("Type not supported in Hash");if(e.isFeatureSet(B))throw Error("Type not supported in Hash");e.isFeatureSetCollection(B);throw Error("Type not supported in Hash");}}}}Object.defineProperty(A,"__esModule",{value:!0});A.registerFunctions=void 0;A.registerFunctions=function(B,w){B.portal=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);return new a(e.toString(t[0]))})};
B.trim=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);return e.toString(t[0]).trim()})};B.tohex=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);y=e.toNumber(t[0]);return isNaN(y)?y:y.toString(16)})};B.upper=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);return e.toString(t[0]).toUpperCase()})};B.proper=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,2);y=1;2===t.length&&"firstword"===e.toString(t[1]).toLowerCase()&&(y=2);u=/\s/;t=e.toString(t[0]);for(var C=
"",E=!0,F=0;F<t.length;F++){var G=t[F];u.test(G)?1===y&&(E=!0):G.toUpperCase()!==G.toLowerCase()&&(E?(G=G.toUpperCase(),E=!1):G=G.toLowerCase());C+=G}return C})};B.lower=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);return e.toString(t[0]).toLowerCase()})};B.guid=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,0,1);if(0<t.length)switch(e.toString(t[0]).toLowerCase()){case "digits":return e.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return e.generateUUID();
case "digits-hyphen-parentheses":return"("+e.generateUUID()+")"}return"{"+e.generateUUID()+"}"})};B.console=function(z,x){return w(z,x,function(y,u,t){0!==t.length&&(1===t.length?z.console(e.toString(t[0])):z.console(e.toString(t)));return e.voidOperation})};B.mid=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,2,3);y=e.toNumber(t[1]);if(isNaN(y))return"";0>y&&(y=0);if(2===t.length)return e.toString(t[0]).substr(y);u=e.toNumber(t[2]);if(isNaN(u))return"";0>u&&(u=0);return e.toString(t[0]).substr(y,
u)})};B.find=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,2,3);y=0;if(2<t.length){y=e.toNumber(e.defaultUndefined(t[2],0));if(isNaN(y))return-1;0>y&&(y=0)}return e.toString(t[1]).indexOf(e.toString(t[0]),y)})};B.left=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,2,2);y=e.toNumber(t[1]);if(isNaN(y))return"";0>y&&(y=0);return e.toString(t[0]).substr(0,y)})};B.right=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,2,2);y=e.toNumber(t[1]);if(isNaN(y))return"";0>y&&(y=0);return e.toString(t[0]).substr(-1*
y,y)})};B.split=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,2,4);y=e.toNumber(e.defaultUndefined(t[2],-1));u=e.toBoolean(e.defaultUndefined(t[3],!1));-1===y||null===y||!0===u?t=e.toString(t[0]).split(e.toString(t[1])):(isNaN(y)&&(y=-1),-1>y&&(y=-1),t=e.toString(t[0]).split(e.toString(t[1]),y));if(!1===u)return t;u=[];for(var C=0;C<t.length&&!(-1!==y&&u.length>=y);C++)""!==t[C]&&void 0!==t[C]&&u.push(t[C]);return u})};B.text=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,2);return e.toStringExplicit(t[0],
t[1])})};B.concatenate=function(z,x){return w(z,x,function(y,u,t){y=[];if(1>t.length)return"";if(e.isArray(t[0])){u=e.defaultUndefined(t[2],"");for(var C=0;C<t[0].length;C++)y[C]=e.toStringExplicit(t[0][C],u);return 1<t.length?y.join(t[1]):y.join("")}if(e.isImmutableArray(t[0])){u=e.defaultUndefined(t[2],"");for(C=0;C<t[0].length();C++)y[C]=e.toStringExplicit(t[0].get(C),u);return 1<t.length?y.join(t[1]):y.join("")}for(C=0;C<t.length;C++)y[C]=e.toStringExplicit(t[C]);return y.join("")})};B.reverse=
function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);if(e.isArray(t[0]))return y=t[0].slice(0),y.reverse(),y;if(e.isImmutableArray(t[0]))return y=t[0].toArray().slice(0),y.reverse(),y;throw Error("Invalid Parameter");})};B.replace=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,3,4);y=e.toString(t[0]);u=e.toString(t[1]);var C=e.toString(t[2]);return(4===t.length?e.toBoolean(t[3]):1)?e.multiReplace(y,u,C):y.replace(u,C)})};B.schema=function(z,x){return w(z,x,function(y,u,t){if(t[0]instanceof
d)return(y=t[0].schema())?g.convertObjectToArcadeDictionary(y):null;throw Error("Invalid Parameter");})};B.subtypes=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);if(t[0]instanceof d)return(y=t[0].subtypes())?g.convertObjectToArcadeDictionary(y):null;throw Error("Invalid Parameter");})};B.subtypecode=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);if(t[0]instanceof d){u=t[0].subtypes();if(!u)return null;if(u.subtypeField&&t[0].hasField(u.subtypeField))for(t=t[0].field(u.subtypeField),
y=0,u=u.subtypes;y<u.length;y++){var C=u[y];if(C.code===t)return C.code}return null}throw Error("Invalid Parameter");})};B.subtypename=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);if(t[0]instanceof d){u=t[0].subtypes();if(!u)return"";if(u.subtypeField&&t[0].hasField(u.subtypeField))for(t=t[0].field(u.subtypeField),y=0,u=u.subtypes;y<u.length;y++){var C=u[y];if(C.code===t)return C.name}return""}throw Error("Invalid Parameter");})};B.gdbversion=function(z,x){return w(z,x,function(y,u,
t){e.pcCheck(t,1,1);if(t[0]instanceof d)return t[0].gdbVersion();throw Error("Invalid Parameter");})};B.domain=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,2,3);if(t[0]instanceof d)return(y=t[0].fullDomain(e.toString(t[1]),void 0===t[2]?void 0:e.toNumber(t[2])))&&y.domain?"coded-value"===y.domain.type||"codedValue"===y.domain.type?g.convertObjectToArcadeDictionary({type:"codedValue",name:y.domain.name,dataType:f.layerFieldEsriConstants[y.field.type],codedValues:y.domain.codedValues.map(function(C){return{name:C.name,
code:C.code}})}):g.convertObjectToArcadeDictionary({type:"range",name:y.domain.name,dataType:f.layerFieldEsriConstants[y.field.type],min:y.domain.min,max:y.domain.max}):null;throw Error("Invalid Parameter");})};B.domainname=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,2,4);if(t[0]instanceof d)return t[0].domainValueLookup(e.toString(t[1]),t[2],void 0===t[3]?void 0:e.toNumber(t[3]));throw Error("Invalid Parameter");})};B.domaincode=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,2,
4);if(t[0]instanceof d)return t[0].domainCodeLookup(e.toString(t[1]),t[2],void 0===t[3]?void 0:e.toNumber(t[3]));throw Error("Invalid Parameter");})};B.urlencode=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);if(null===t[0])return"";if(t[0]instanceof g){y="";u=0;for(var C=t[0].keys();u<C.length;u++){var E=C[u],F=t[0].field(E);""!==y&&(y+="\x26");y=null===F?y+(encodeURIComponent(E)+"\x3d"):y+(encodeURIComponent(E)+"\x3d"+encodeURIComponent(F))}return y}return encodeURIComponent(e.toString(t[0]))})};
B.hash=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);y=new h.XXH(0);v(t[0],y,{map:new Map,currentLength:0});return y.digest()})};B.convertdirection=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,3,3);return n.convertDirection(t[0],t[1],t[2])})};B.fromjson=function(z,x){return w(z,x,function(y,u,t){e.pcCheck(t,1,1);if(!1===e.isString(t[0]))throw Error("Invalid Parameter");return g.convertJsonToArcade(JSON.parse(e.toString(t[0])))})};B.expects=function(z,x){return w(z,x,function(y,
u,t){if(1>t.length)throw Error("Function called with wrong number of Parameters");return e.voidOperation})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(D,A,a,b){function g(Y){if(!1===b.isString(Y))throw Error("Invalid Parameter");return Y}function d(Y,aa){var ca=Math.pow(10,aa);return Math.round(Y*ca)/ca}function e(Y){Y=+Y;return isFinite(Y)?Y-Y%1||(0>Y?-0:0===Y?Y:0):Y}function f(Y){var aa=parseFloat(Y.toString().replace(e(Y).toString(),
"0"))*((0<Y)-(0>Y)||+Y);return 0>Y?{fraction:aa,integer:Math.ceil(Y)}:{fraction:aa,integer:Math.floor(Y)}}function n(Y,aa){switch(Y){case 0:return"SHORT"===aa?"N":"North";case 1:return"SHORT"===aa?"E":"East";case 2:return"SHORT"===aa?"S":"South";case 3:return"SHORT"===aa?"W":"West"}}function h(Y,aa,ca){for(;Y.length<ca;)Y=aa+Y;return Y}function k(Y,aa){return Y-Math.floor(Y/aa)*aa}function c(Y){switch(Y){case 6:case 1:return 360;case 4:return G;case 5:return 400;case 2:return 1296E3;case 7:return 60;
case 8:return 60;default:throw Error("Unnexpected evaluations");}}function l(Y){switch(Y.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");}function r(Y){switch(Y.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;
case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function m(Y,aa,ca){var I=null;switch(aa){case 1:I=A.preciseMultiply(Y,3600);break;case 2:I=Y;break;case 5:I=A.preciseMultiply(Y,3240);break;case 4:I=A.preciseMultiply(Y,H);break;default:throw Error("Unnexpected evaluation");
}switch(ca){case 1:return A.preciseDivide(I,3600);case 2:return I;case 5:return A.preciseDivide(I,3240);case 4:return I/H;default:throw Error("Unnexpected evaluation");}}function q(Y){switch(Y){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function v(Y){switch(b.toNumber(Y)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function B(Y){switch(Y.toUpperCase().trim()){case "N":case "NORTH":return 0;
case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;case "W":case "WEST":return 3}return null}function w(Y){Y=parseFloat(Y);if(b.isNumber(Y)){if(isNaN(Y))throw Error("Invalid conversion");return Y}throw Error("Invalid conversion");}function z(Y,aa,ca){var I=3===ca,T=null,ba=null,pa=0,ya=0;ya=0;if(I){if(2>Y.length)throw Error("Conversion Error");ya=1;(ba=v(b.toString(Y[Y.length-1])))?(T=ba.first,ba=ba.second):(pa=1,T=B(b.toString(Y[0])),ba=B(b.toString(Y[Y.length-1])));if(null===T||null===
ba)throw Error("Invalid Conversion");}switch(aa){case 1:case 4:case 5:if(0===Y.length)throw Error("Invalid Conversion");return I?K.createFromAngleMeridianAndDirection(X.createFromAngleAndUnits(w(Y[pa]),q(aa)),T,ba):K.createFromAngleAndDirection(X.createFromAngleAndUnits(w(Y[pa]),q(aa)),ca);case 3:ya=Y.length-ya-pa;if(3===ya)return Y=X.createFromDegreesMinutesSeconds(w(Y[pa]),w(Y[pa+1]),w(Y[pa+2])),I?K.createFromAngleMeridianAndDirection(Y,T,ba):K.createFromAngleAndDirection(Y,ca);if(1===ya)return Y=
w(Y[pa]),Y=M.number_to_dms(Y),Y=X.createFromDegreesMinutesSeconds(Y.m_degrees,Y.m_minutes,Y.m_seconds),I?K.createFromAngleMeridianAndDirection(Y,T,ba):K.createFromAngleAndDirection(Y,ca)}throw Error("Conversion Error");}function x(Y){for(var aa=[" ","-","/","'",'"',"\\","^","\u00b0",L,"\t","\r","\n","*"],ca="",I=0;I<Y.length;I++){var T=Y.charAt(I);ca=-1!==aa.indexOf(T)?ca+"RRSPLITRRSPLITRR":ca+T}return ca.split("RRSPLITRRSPLITRR").filter(function(ba){return""!==ba})}function y(Y,aa,ca){for(var I=
{padding:0,rounding:0,newpos:aa},T=!1;aa<Y.length;){var ba=Y[aa];if(ba===ca)T?I.rounding++:I.padding++,aa++;else if("."===ba)T=!0,aa++;else break}I.newpos=aa-1;return I}Object.defineProperty(A,"__esModule",{value:!0});A.convertDirection=A.preciseDivide=A.preciseMultiply=A.preciseMinus=A.preciseAdd=void 0;var u=function(Y){return function(aa,ca,I){I=I||14;return+Y(aa,ca).toFixed(I)}},t=function(Y,aa){return Y+aa},C=function(Y,aa){return Y-aa},E=function(Y,aa){return Y*aa},F=function(Y,aa){return Y/
aa};A.preciseAdd=function(Y,aa,ca){return u(t)(Y,aa,ca)};A.preciseMinus=function(Y,aa,ca){return u(C)(Y,aa,ca)};A.preciseMultiply=function(Y,aa,ca){return u(E)(Y,aa,ca)};A.preciseDivide=function(Y,aa,ca){return u(F)(Y,aa,ca)};var G=2*Math.PI,H=648E3/Math.PI,L=String.fromCharCode(7501),J;(function(Y){Y[Y.north=0]="north";Y[Y.east=1]="east";Y[Y.south=2]="south";Y[Y.west=3]="west"})(J||(J={}));var S;(function(Y){Y[Y.decimal_degrees=1]="decimal_degrees";Y[Y.seconds=2]="seconds";Y[Y.degrees_minutes_seconds=
3]="degrees_minutes_seconds";Y[Y.radians=4]="radians";Y[Y.gradians=5]="gradians";Y[Y.truncated_degrees=6]="truncated_degrees";Y[Y.fractional_degree_minutes=7]="fractional_degree_minutes";Y[Y.fractional_minute_seconds=8]="fractional_minute_seconds"})(S||(S={}));var P;(function(Y){Y[Y.north_azimuth=1]="north_azimuth";Y[Y.polar=2]="polar";Y[Y.quadrant=3]="quadrant";Y[Y.south_azimuth=4]="south_azimuth"})(P||(P={}));var Q;(function(Y){Y[Y.meridian=0]="meridian";Y[Y.direction=1]="direction"})(Q||(Q={}));
var M=function(){function Y(aa,ca,I){this.m_degrees=aa;this.m_minutes=ca;this.m_seconds=I}Y.prototype.get_field=function(aa){switch(aa){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};Y.seconds_to_DMS=function(aa){var ca=f(aa).fraction;aa=f(aa).integer;var I=Math.floor(aa/3600);aa-=3600*I;var T=Math.floor(aa/60);return new Y(I,T,aa-60*T+ca)};Y.number_to_dms=function(aa){var ca=f(aa).fraction;aa=f(aa).integer;
var I=A.preciseMultiply(f(100*ca).fraction,100);ca=f(100*ca).integer;return new Y(aa,ca,I)};Y.prototype.format=function(aa,ca){var I=d(this.m_seconds,ca),T=this.m_minutes,ba=this.m_degrees;if(2===aa||8===aa)60<=I&&(I-=60,++T),60<=T&&(T=0,++ba),360<=ba&&(ba=0);else if(7===aa)I=0,T=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ba=this.m_degrees,60<=T&&(T=0,++ba),360<=ba&&(ba=0);else if(1===aa||6===aa)I=A.preciseDivide(this.m_seconds,3600),T=A.preciseDivide(this.m_minutes,60),ba=Math.round(this.m_degrees+
T+I),I=T=0;return new Y(ba,T,I)};Y.DMS_to_seconds=function(aa,ca,I){return 3600*aa+60*ca+I};return Y}(),N=function(){function Y(aa,ca,I){this.meridian=aa;this.angle=ca;this.direction=I}Y.prototype.fetch_azimuth=function(aa){return 0===aa?this.meridian:this.direction};return Y}(),K=function(){function Y(aa){this.m_angle=aa}Y.createFromAngleAndDirection=function(aa,ca){return new Y(new X(Y.convertDirectionFormat(aa.extract_angular_units(2),ca,1)))};Y.prototype.getAngle=function(aa){var ca=this.m_angle.extract_angular_units(2);
switch(aa){case 1:case 4:case 2:return aa=new X(Y.convertDirectionFormat(ca,1,aa));case 3:return aa=Y.seconds_north_azimuth_to_quadrant(ca),aa=new X(aa.angle)}};Y.prototype.getMeridian=function(aa){var ca=this.m_angle.extract_angular_units(2);switch(aa){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return Y.seconds_north_azimuth_to_quadrant(ca).meridian}};Y.prototype.getDirection=function(aa){var ca=this.m_angle.extract_angular_units(2);switch(aa){case 1:return 1;case 4:return 3;case 2:return 0;
case 3:return Y.seconds_north_azimuth_to_quadrant(ca).direction}};Y.seconds_north_azimuth_to_quadrant=function(aa){var ca=324E3>=aa||972E3<=aa?0:2;return new N(ca,0===ca?Math.min(1296E3-aa,aa):Math.abs(aa-648E3),648E3<aa?3:1)};Y.createFromAngleMeridianAndDirection=function(aa,ca,I){return new Y(new X(Y.secondsQuadrantToNorthAzimuth(aa.extract_angular_units(2),ca,I)))};Y.secondsQuadrantToNorthAzimuth=function(aa,ca,I){return 0===ca?1===I?aa:1296E3-aa:1===I?648E3-aa:648E3+aa};Y.convertDirectionFormat=
function(aa,ca,I){var T=0;switch(ca){case 1:T=aa;break;case 2:T=324E3-aa;break;case 3:throw Error("Unnexpected evaluation");case 4:T=aa+648E3}aa=0;switch(I){case 1:aa=T;break;case 2:aa=324E3-T;break;case 3:throw Error("Unnexpected evaluation");case 4:aa=T-648E3}aa%=1296E3;return 0>aa?1296E3+aa:aa};return Y}(),X=function(){function Y(aa){this.m_seconds=aa}Y.createFromAngleAndUnits=function(aa,ca){return new Y(m(aa,ca,2))};Y.prototype.extract_angular_units=function(aa){return m(this.m_seconds,2,q(aa))};
Y.createFromDegreesMinutesSeconds=function(aa,ca,I){return new Y(A.preciseAdd(A.preciseAdd(A.preciseMultiply(aa,3600),A.preciseMultiply(ca,60)),I))};return Y}(),da=function(){function Y(aa,ca,I,T){this.m_view=aa;this.m_angle=ca;this.m_merdian=I;this.m_direction=T;this.m_formatted_dms=this.m_dms=null}Y.createFromStringAndBearing=function(aa,ca,I){return new Y(aa,ca.getAngle(I),ca.getMeridian(I),ca.getDirection(I))};Y.prototype.fetch_angle=function(){return this.m_angle};Y.prototype.fetch_meridian=
function(){return this.m_merdian};Y.prototype.fetch_direction=function(){return this.m_direction};Y.prototype.fetch_m_view=function(){return this.m_view};Y.prototype.fetch_dms=function(){null===this.m_dms&&this.calculate_dms();return this.m_dms};Y.prototype.fetch_formatted_dms=function(){null===this.m_formatted_dms&&this.calculate_dms();return this.m_formatted_dms};Y.prototype.calculate_dms=function(){var aa=null,ca=6,I=0;for(aa=0;aa<this.m_view.length;aa++){var T=this.m_view[aa];switch(T){case "m":aa=
y(this.m_view,aa,T);ca=6===ca?7:ca;aa=aa.newpos;continue;case "s":aa=y(this.m_view,aa,T),ca=8,I=I<aa.rounding?aa.rounding:I,aa=aa.newpos}}this.m_dms=M.seconds_to_DMS(this.m_angle.extract_angular_units(2));this.m_formatted_dms=M.seconds_to_DMS(this.m_angle.extract_angular_units(2)).format(ca,I)};return Y}();A.convertDirection=function(Y,aa,ca){if(!(aa instanceof a))throw Error("Invalid Parameter");if(!1===aa.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===
aa.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var I=l(g(aa.field("directiontype")));aa=r(g(aa.field("angletype")));if(b.isNumber(Y)){Y=b.toNumber(Y);if(3===I)throw Error("Conversion error");3===aa?(Y=M.number_to_dms(Y),aa=K.createFromAngleAndDirection(X.createFromDegreesMinutesSeconds(Y.m_degrees,Y.m_minutes,Y.m_seconds),I)):aa=K.createFromAngleAndDirection(X.createFromAngleAndUnits(Y,q(aa)),I)}else if(b.isString(Y))aa=z(x(Y),aa,I);else if(b.isArray(Y))aa=z(Y,aa,
I);else if(b.isImmutableArray(Y))aa=z(Y.toArray(),aa,I);else throw Error("Conversion Error");if(!(ca instanceof a))throw Error("Invalid Parameter");if(!1===ca.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===ca.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");I=l(g(ca.field("directiontype")));Y=ca.hasField("angleType")?r(g(ca.field("angletype"))):null;var T=g(ca.field("outputType")).toUpperCase().trim();if(!I||!T)throw Error("Conversion error");
if(!(Y||"TEXT"===T&&ca.hasField("format")))throw Error("Invalid unit");switch(T){case "VALUE":if(3===I||3===Y)return ca=aa,aa=ca.getAngle(I),3===I&&3===Y?(Y=M.seconds_to_DMS(aa.extract_angular_units(2)),I=[n(ca.getMeridian(I),"SHORT"),Y.m_degrees,Y.m_minutes,Y.m_seconds,n(ca.getDirection(I),"SHORT")]):3===Y?(Y=M.seconds_to_DMS(aa.extract_angular_units(2)),I=[Y.m_degrees,Y.m_minutes,Y.m_seconds]):I=3===I?[n(ca.getMeridian(I),"SHORT"),aa.extract_angular_units(Y),n(ca.getDirection(I),"SHORT")]:[aa.extract_angular_units(Y)],
I;ca=aa;if((aa=q(Y))&&3!==Y)I=ca.getAngle(I).extract_angular_units(aa);else throw Error("Conversion Error");return I;case "TEXT":T="";ca.hasField("format")&&(T=b.toString(ca.field("format")));if(null===T||""===T){ca="";switch(Y){case 1:ca=3===I?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:ca=3===I?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:ca="R.RR";break;case 5:ca="GGG.GG"+L;break;default:throw Error("Conversion error");}3===I&&(ca="p "+ca+" b");T=ca}ca=aa;Y=T;var ba="",pa=null,ya=null;
aa=da.createFromStringAndBearing(Y,ca,I);T={D:1,d:6,m:7,s:8,R:4,G:5};for(ya=0;ya<Y.length;ya++){var Da=Y[ya];switch(Da){case "[":pa=Y;Da={escaped:"",newpos:ya};for(ya++;ya<pa.length;){var Ha=pa[ya];ya++;if("]"===Ha)break;Da.escaped+=Ha}Da.newpos=ya-1;pa=Da;ba+=pa.escaped;ya=pa.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":pa=y(Y,ya,Da);ya=ca.getAngle(I);a:{Da=T[Da];Ha=pa.padding;var ta=pa.rounding,xa=aa,ra=null;switch(Da){case 1:case 4:case 5:ra=k(d(ya.extract_angular_units(Da),
ta),c(Da));ya=h(ra.toFixed(ta),"0",Ha+ta+(0<ta?1:0));break a;case 6:case 7:ra=k(xa.fetch_formatted_dms().get_field(Da),c(Da));ya=h(ra.toFixed(ta),"0",Ha+ta+(0<ta?1:0));break a;case 8:ra=k(d(xa.fetch_dms().get_field(Da),ta),c(Da));ya=h(ra.toFixed(ta),"0",Ha+ta+(0<ta?1:0));break a;default:throw Error("Unnexepected evaluation");}}ba+=ya;ya=pa.newpos;continue;case "P":case "p":ba+=n(aa.fetch_meridian(),"p"===Da?"SHORT":"LONG");continue;case "B":case "b":ba+=n(aa.fetch_direction(),"b"===Da?"SHORT":"LONG");
continue;default:ba+=Da}}return ba;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(D,A){function a(g){for(var d=[],e=0,f=g.length;e<f;e++){var n=g.charCodeAt(e);128>n?d.push(n):2048>n?d.push(192|n>>6,128|n&63):55296>n||57344<=n?d.push(224|n>>12,128|n>>6&63,128|n&63):(e++,n=65536+((n&1023)<<10|g.charCodeAt(e)&1023),d.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return new Uint8Array(d)}Object.defineProperty(A,"__esModule",
{value:!0});A.XXH=void 0;var b=function(){function g(d){this.seed=d;this.totallen=0;this.bufs=[];this.init()}g.prototype.init=function(){this.bufs=[];this.totallen=0;return this};g.prototype.updateFloatArray=function(d){for(var e=[],f=0;f<d.length;f++){var n=d[f];isNaN(n)?e.push("NaN"):Infinity===n?e.push("Infinity"):-Infinity===n?e.push("-Infinity"):0===n?e.push("0"):e.push(n.toString(16))}this.update(a(e.join("")))};g.prototype.updateIntArray=function(d){d=Int32Array.from(d);this.update(new Uint8Array(d.buffer))};
g.prototype.updateUint8Array=function(d){this.update(Uint8Array.from(d))};g.prototype.updateWithString=function(d){return this.update(a(d))};g.prototype.update=function(d){this.bufs.push(d);this.totallen+=d.length;return this};g.prototype.digest=function(){for(var d=new Uint8Array(this.totallen),e=0,f=0,n=this.bufs;f<n.length;f++){var h=n[f];d.set(h,e);e+=h.length}this.init();return this.xxHash32(d,this.seed)};g.prototype.xxHash32=function(d,e){void 0===e&&(e=0);var f=e+374761393&4294967295,n=0;if(16<=
d.length){f=[e+2654435761+2246822519&4294967295,e+2246822519&4294967295,e+0&4294967295,e-2654435761&4294967295];var h=d.length-16,k=0;for(n=0;(n&4294967280)<=h;n+=4){var c=n,l=d[c+0]+(d[c+1]<<8);c=d[c+2]+(d[c+3]<<8);l=f[k]+(2246822519*l+(2246822519*c<<16))&4294967295;l=l<<13|l>>>19;f[k]=2654435761*(l&65535)+(2654435761*(l>>>16)<<16)&4294967295;k=k+1&3}f=(f[0]<<1|f[0]>>>31)+(f[1]<<7|f[1]>>>25)+(f[2]<<12|f[2]>>>20)+(f[3]<<18|f[3]>>>14)&4294967295}f=f+d.length&4294967295;for(k=d.length-4;n<=k;n+=4)c=
n,l=d[c+0]+(d[c+1]<<8),c=d[c+2]+(d[c+3]<<8),f=f+(3266489917*l+(3266489917*c<<16))&4294967295,f=f<<17|f>>>15,f=668265263*(f&65535)+(668265263*(f>>>16)<<16)&4294967295;for(;n<d.length;++n)k=d[n],f+=374761393*k,f=f<<11|f>>>21,f=2654435761*(f&65535)+(2654435761*(f>>>16)<<16)&4294967295;f^=f>>>15;f=(2246822519*(f&65535)&4294967295)+(2246822519*(f>>>16)<<16);f^=f>>>13;f=(3266489917*(f&65535)&4294967295)+(3266489917*(f>>>16)<<16);f^=f>>>16;return 0>f?f+4294967296:f};return g}();A.XXH=b})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C){function E(ta,xa){for(var ra=[],Aa=0;Aa<xa.arguments.length;Aa++)ra.push(G(ta,xa.arguments[Aa]));return ra}function F(ta,xa,ra){try{return ra(ta,xa,E(ta,xa))}catch(Aa){throw Aa;}}function G(ta,xa){try{switch(xa.type){case "EmptyStatement":return h.voidOperation;case "VariableDeclarator":var ra=null===xa.init?null:G(ta,xa.init);ra===h.voidOperation&&(ra=null);if("Identifier"!==xa.id.type)throw Error("Can only assign a regular variable");var Aa=
xa.id.name.toLowerCase();null!==ta.localScope?ta.localScope[Aa]={value:ra,valueset:!0,node:xa.init}:ta.globalScope[Aa]={value:ra,valueset:!0,node:xa.init};return h.voidOperation;case "VariableDeclaration":for(var ua=0;ua<xa.declarations.length;ua++)G(ta,xa.declarations[ua]);return h.voidOperation;case "BlockStatement":a:{var Ja=h.voidOperation;for(ua=0;ua<xa.body.length;ua++)if(Ja=G(ta,xa.body[ua]),Ja instanceof h.ReturnResult||Ja===h.breakResult||Ja===h.continueResult){var ha=Ja;break a}ha=Ja}return ha;
case "FunctionDeclaration":var ma=xa.id.name.toLowerCase();ta.globalScope[ma]={valueset:!0,node:null,value:new e(xa,ta)};return h.voidOperation;case "ReturnStatement":if(null===xa.argument)var R=new h.ReturnResult(h.voidOperation);else{var Ea=G(ta,xa.argument);R=new h.ReturnResult(Ea)}return R;case "IfStatement":if("AssignmentExpression"===xa.test.type||"UpdateExpression"===xa.test.type)throw Error(k.nodeErrorMessage(xa.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Ia=G(ta,xa.test);if(!0===
Ia)var ea=G(ta,xa.consequent);else if(!1===Ia)ea=null!==xa.alternate?G(ta,xa.alternate):h.voidOperation;else throw Error(k.nodeErrorMessage(xa,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return ea;case "ExpressionStatement":if("AssignmentExpression"===xa.expression.type||"UpdateExpression"===xa.expression.type)var Ya=G(ta,xa.expression);else{var Xa=G(ta,xa.expression);Ya=Xa===h.voidOperation?h.voidOperation:new h.ImplicitResult(Xa)}return Ya;case "AssignmentExpression":var Ba=G(ta,xa.right);
ua=null;var U="";if("MemberExpression"===xa.left.type){ua=G(ta,xa.left.object);!0===xa.left.computed?U=G(ta,xa.left.property):"Identifier"===xa.left.property.type&&(U=xa.left.property.name);if(h.isArray(ua))if(h.isNumber(U)){0>U&&(U=ua.length+U);if(0>U||U>ua.length)throw Error("Assignment outside of array bounds");if(U===ua.length&&"\x3d"!==xa.operator)throw Error("Invalid Parameter");ua[U]=L(Ba,xa.operator,ua[U],xa)}else throw Error("Invalid Parameter");else if(ua instanceof g){if(!1===h.isString(U))throw Error("Dictionary accessor must be a string");
if(!0===ua.hasField(U))ua.setField(U,L(Ba,xa.operator,ua.field(U),xa));else{if("\x3d"!==xa.operator)throw Error("Invalid Parameter");ua.setField(U,L(Ba,xa.operator,null,xa))}}else if(ua instanceof d){if(!1===h.isString(U))throw Error("Feature accessor must be a string");if(!0===ua.hasField(U))ua.setField(U,L(Ba,xa.operator,ua.field(U),xa));else{if("\x3d"!==xa.operator)throw Error("Invalid Parameter");ua.setField(U,L(Ba,xa.operator,null,xa))}}else{if(h.isImmutableArray(ua))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var la=h.voidOperation}else if(ua=xa.left.name.toLowerCase(),null!==ta.localScope&&void 0!==ta.localScope[ua])ta.localScope[ua]={value:L(Ba,xa.operator,ta.localScope[ua].value,xa),valueset:!0,node:xa.right},la=h.voidOperation;else if(void 0!==ta.globalScope[ua])ta.globalScope[ua]={value:L(Ba,xa.operator,ta.globalScope[ua].value,xa),valueset:!0,node:xa.right},la=h.voidOperation;else throw Error("Variable not recognised");return la;case "UpdateExpression":ua=null;U=
"";if("MemberExpression"===xa.argument.type){ua=G(ta,xa.argument.object);!0===xa.argument.computed?U=G(ta,xa.argument.property):"Identifier"===xa.argument.property.type&&(U=xa.argument.property.name);if(h.isArray(ua))if(h.isNumber(U)){0>U&&(U=ua.length+U);if(0>U||U>=ua.length)throw Error("Assignment outside of array bounds");var na=h.toNumber(ua[U]);ua[U]="++"===xa.operator?na+1:na-1}else throw Error("Invalid Parameter");else if(ua instanceof g){if(!1===h.isString(U))throw Error("Dictionary accessor must be a string");
if(!0===ua.hasField(U))na=h.toNumber(ua.field(U)),ua.setField(U,"++"===xa.operator?na+1:na-1);else throw Error("Invalid Parameter");}else if(ua instanceof d){if(!1===h.isString(U))throw Error("Feature accessor must be a string");if(!0===ua.hasField(U))na=h.toNumber(ua.field(U)),ua.setField(U,"++"===xa.operator?na+1:na-1);else throw Error("Invalid Parameter");}else{if(h.isImmutableArray(ua))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var V=!1===xa.prefix?na:"++"===xa.operator?
na+1:na-1}else{ua="Identifier"===xa.argument.type?xa.argument.name.toLowerCase():"";if(!ua)throw Error("Invalid identifier");if(null!==ta.localScope&&void 0!==ta.localScope[ua])na=h.toNumber(ta.localScope[ua].value),ta.localScope[ua]={value:"++"===xa.operator?na+1:na-1,valueset:!0,node:xa},V=!1===xa.prefix?na:"++"===xa.operator?na+1:na-1;else if(void 0!==ta.globalScope[ua])na=h.toNumber(ta.globalScope[ua].value),ta.globalScope[ua]={value:"++"===xa.operator?na+1:na-1,valueset:!0,node:xa},V=!1===xa.prefix?
na:"++"===xa.operator?na+1:na-1;else throw Error("Variable not recognised");}return V;case "BreakStatement":return h.breakResult;case "ContinueStatement":return h.continueResult;case "TemplateElement":return xa.value?xa.value.cooked:"";case "TemplateLiteral":var fa="",qa=0;la=0;for(ua=xa.quasis;la<ua.length;la++)if(U=ua[la],fa+=U.value?U.value.cooked:"",!1===U.tail){var va=xa.expressions[qa]?h.toString(G(ta,xa.expressions[qa])):"";fa+=va;qa++}return fa;case "ForStatement":null!==xa.init&&G(ta,xa.init);
qa={testResult:!0,lastAction:h.voidOperation};do b:{ua=ta;U=xa;va=qa;if(null!==U.test){va.testResult=G(ua,U.test);if(!1===va.testResult)break b;if(!0!==va.testResult)throw Error(k.nodeErrorMessage(U,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}va.lastAction=G(ua,U.body);va.lastAction===h.breakResult?va.testResult=!1:va.lastAction instanceof h.ReturnResult?va.testResult=!1:null!==U.update&&G(ua,U.update)}while(!0===qa.testResult);fa=qa.lastAction instanceof h.ReturnResult?qa.lastAction:h.voidOperation;
return fa;case "ForInStatement":return H(ta,xa);case "Identifier":return N(ta,xa);case "MemberExpression":return S(ta,xa);case "Literal":return xa.value;case "CallExpression":return K(ta,xa);case "UnaryExpression":return P(ta,xa);case "BinaryExpression":return Q(ta,xa);case "LogicalExpression":return M(ta,xa);case "ArrayExpression":try{for(ua=[],U=0;U<xa.elements.length;U++){var Fa=G(ta,xa.elements[U]);if(h.isFunctionParameter(Fa))throw Error(k.nodeErrorMessage(xa,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));
Fa===h.voidOperation?ua.push(null):ua.push(Fa)}}catch(Wa){throw Wa;}return ua;case "ObjectExpression":ua={};for(U=0;U<xa.properties.length;U++){var Ca=G(ta,xa.properties[U]);if(h.isFunctionParameter(Ca.value))throw Error("Illegal Argument");if(!1===h.isString(Ca.key))throw Error("Illegal Argument");ua[Ca.key.toString()]=Ca.value===h.voidOperation?null:Ca.value}var La=new g(ua);La.immutable=!1;return La;case "Property":return{key:"Identifier"===xa.key.type?xa.key.name:G(ta,xa.key),value:G(ta,xa.value)};
default:throw Error(k.nodeErrorMessage(xa,"RUNTIME","UNREOGNISED"));}}catch(Wa){throw Wa;}}function H(ta,xa){var ra=G(ta,xa.right);"VariableDeclaration"===xa.left.type&&G(ta,xa.left);var Aa=null,ua="";if("VariableDeclaration"===xa.left.type){var Ja=xa.left.declarations[0].id;"Identifier"===Ja.type&&(ua=Ja.name)}else"Identifier"===xa.left.type&&(ua=xa.left.name);if(!ua)throw Error(k.nodeErrorMessage(xa,"RUNTIME","INVALIDVARIABLE"));ua=ua.toLowerCase();null!==ta.localScope&&void 0!==ta.localScope[ua]&&
(Aa=ta.localScope[ua]);null===Aa&&void 0!==ta.globalScope[ua]&&(Aa=ta.globalScope[ua]);if(null===Aa)throw Error(k.nodeErrorMessage(xa,"RUNTIME","VARIABLENOTDECLARED"));if(h.isArray(ra)||h.isString(ra)){ra=ra.length;for(Ja=0;Ja<ra;Ja++){Aa.value=Ja;ua=G(ta,xa.body);if(ua===h.breakResult)break;if(ua instanceof h.ReturnResult)return ua}return h.voidOperation}if(h.isImmutableArray(ra)){for(Ja=0;Ja<ra.length();Ja++){Aa.value=Ja;ua=G(ta,xa.body);if(ua===h.breakResult)break;if(ua instanceof h.ReturnResult)return ua}return h.voidOperation}if(ra instanceof
g||ra instanceof d)for(ra=ra.keys(),Ja=0;Ja<ra.length;Ja++){Aa.value=ra[Ja];ua=G(ta,xa.body);if(ua===h.breakResult)break;if(ua instanceof h.ReturnResult)return ua}else return h.voidOperation}function L(ta,xa,ra,Aa){switch(xa){case "\x3d":return ta===h.voidOperation?null:ta;case "/\x3d":return h.toNumber(ra)/h.toNumber(ta);case "*\x3d":return h.toNumber(ra)*h.toNumber(ta);case "-\x3d":return h.toNumber(ra)-h.toNumber(ta);case "+\x3d":return h.isString(ra)||h.isString(ta)?h.toString(ra)+h.toString(ta):
h.toNumber(ra)+h.toNumber(ta);case "%\x3d":return h.toNumber(ra)%h.toNumber(ta);default:throw Error(k.nodeErrorMessage(Aa,"RUNTIME","OPERATORNOTRECOGNISED"));}}function J(ta,xa,ra){xa=xa.toLowerCase();switch(xa){case "hasz":return ta=ta.hasZ,void 0===ta?!1:ta;case "hasm":return ta=ta.hasM,void 0===ta?!1:ta;case "spatialreference":return xa=ta.spatialReference._arcadeCacheId,void 0===xa&&(ra=!0,Object.freeze&&Object.isFrozen(ta.spatialReference)&&(ra=!1),ra&&(pa++,xa=ta.spatialReference._arcadeCacheId=
pa)),ta=new g({wkt:ta.spatialReference.wkt,wkid:ta.spatialReference.wkid}),void 0!==xa&&(ta._arcadeCacheId="SPREF"+xa.toString()),ta}switch(ta.type){case "extent":switch(xa){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return ta=ta[xa],void 0!==ta?ta:null;case "type":return"Extent"}break;case "polygon":switch(xa){case "rings":return xa=ta.getCacheValue("_arcadeCacheId"),void 0===xa&&(pa++,xa=pa,ta.setCacheValue("_arcadeCacheId",xa)),ta=new f(ta.rings,
ta.spatialReference,!0===ta.hasZ,!0===ta.hasM,xa);case "type":return"Polygon"}break;case "point":switch(xa){case "x":case "y":case "z":case "m":return void 0!==ta[xa]?ta[xa]:null;case "type":return"Point"}break;case "polyline":switch(xa){case "paths":return xa=ta.getCacheValue("_arcadeCacheId"),void 0===xa&&(pa++,xa=pa,ta.setCacheValue("_arcadeCacheId",xa)),ta=new f(ta.paths,ta.spatialReference,!0===ta.hasZ,!0===ta.hasM,xa);case "type":return"Polyline"}break;case "multipoint":switch(xa){case "points":return xa=
ta.getCacheValue("_arcadeCacheId"),void 0===xa&&(pa++,xa=pa,ta.setCacheValue("_arcadeCacheId",xa)),ta=new n(ta.points,ta.spatialReference,!0===ta.hasZ,!0===ta.hasM,xa,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(ra,"RUNTIME","PROPERTYNOTFOUND"));}function S(ta,xa){try{var ra=G(ta,xa.object);if(null===ra)throw Error(k.nodeErrorMessage(xa,"RUNTIME","NOTFOUND"));if(!1===xa.computed){if("Identifier"===xa.property.type){if(ra instanceof g||ra instanceof d)return ra.field(xa.property.name);
if(ra instanceof z)return J(ra,xa.property.name,xa)}throw Error(k.nodeErrorMessage(xa,"RUNTIME","INVALIDTYPE"));}var Aa=G(ta,xa.property);if(ra instanceof g||ra instanceof d){if(h.isString(Aa))return ra.field(Aa);throw Error(k.nodeErrorMessage(xa,"RUNTIME","INVALIDTYPE"));}if(ra instanceof z){if(h.isString(Aa))return J(ra,Aa,xa);throw Error(k.nodeErrorMessage(xa,"RUNTIME","INVALIDTYPE"));}if(h.isArray(ra)){if(h.isNumber(Aa)&&isFinite(Aa)&&Math.floor(Aa)===Aa){0>Aa&&(Aa=ra.length+Aa);if(Aa>=ra.length||
0>Aa)throw Error(k.nodeErrorMessage(xa,"RUNTIME","OUTOFBOUNDS"));return ra[Aa]}throw Error(k.nodeErrorMessage(xa,"RUNTIME","INVALIDTYPE"));}if(h.isString(ra)){if(h.isNumber(Aa)&&isFinite(Aa)&&Math.floor(Aa)===Aa){0>Aa&&(Aa=ra.length+Aa);if(Aa>=ra.length||0>Aa)throw Error(k.nodeErrorMessage(xa,"RUNTIME","OUTOFBOUNDS"));return ra[Aa]}throw Error(k.nodeErrorMessage(xa,"RUNTIME","INVALIDTYPE"));}if(h.isImmutableArray(ra)&&h.isNumber(Aa)&&isFinite(Aa)&&Math.floor(Aa)===Aa){0>Aa&&(Aa=ra.length()+Aa);if(Aa>=
ra.length()||0>Aa)throw Error(k.nodeErrorMessage(xa,"RUNTIME","OUTOFBOUNDS"));return ra.get(Aa)}throw Error(k.nodeErrorMessage(xa,"RUNTIME","INVALIDTYPE"));}catch(ua){throw ua;}}function P(ta,xa){try{var ra=G(ta,xa.argument);if(h.isBoolean(ra)){if("!"===xa.operator)return!ra;if("-"===xa.operator)return-1*h.toNumber(ra);if("+"===xa.operator)return 1*h.toNumber(ra);if("~"===xa.operator)return~h.toNumber(ra);throw Error(k.nodeErrorMessage(xa,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===xa.operator)return~h.toNumber(ra);
if("-"===xa.operator)return-1*h.toNumber(ra);if("+"===xa.operator)return 1*h.toNumber(ra);throw Error(k.nodeErrorMessage(xa,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(Aa){throw Aa;}}function Q(ta,xa){try{var ra=[G(ta,xa.left),G(ta,xa.right)],Aa=ra[0],ua=ra[1];switch(xa.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return h.binaryOperator(h.toNumber(Aa),h.toNumber(ua),xa.operator);case "\x3d\x3d":return h.equalityTest(Aa,ua);case "!\x3d":return!h.equalityTest(Aa,
ua);case "\x3c":return h.greaterThanLessThan(Aa,ua,xa.operator);case "\x3e":return h.greaterThanLessThan(Aa,ua,xa.operator);case "\x3c\x3d":return h.greaterThanLessThan(Aa,ua,xa.operator);case "\x3e\x3d":return h.greaterThanLessThan(Aa,ua,xa.operator);case "+":return h.isString(Aa)||h.isString(ua)?h.toString(Aa)+h.toString(ua):h.toNumber(Aa)+h.toNumber(ua);case "-":return h.toNumber(Aa)-h.toNumber(ua);case "*":return h.toNumber(Aa)*h.toNumber(ua);case "/":return h.toNumber(Aa)/h.toNumber(ua);case "%":return h.toNumber(Aa)%
h.toNumber(ua);default:throw Error(k.nodeErrorMessage(xa,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Ja){throw Ja;}}function M(ta,xa){try{if("AssignmentExpression"===xa.left.type||"UpdateExpression"===xa.left.type)throw Error(k.nodeErrorMessage(xa.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===xa.right.type||"UpdateExpression"===xa.right.type)throw Error(k.nodeErrorMessage(xa.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var ra=G(ta,xa.left);if(h.isBoolean(ra))switch(xa.operator){case "||":if(!0===
ra)return ra;var Aa=G(ta,xa.right);if(h.isBoolean(Aa))return Aa;throw Error(k.nodeErrorMessage(xa,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===ra)return ra;Aa=G(ta,xa.right);if(h.isBoolean(Aa))return Aa;throw Error(k.nodeErrorMessage(xa,"RUNTIME","ONLYORORAND"));default:throw Error(k.nodeErrorMessage(xa,"RUNTIME","ONLYORORAND"));}throw Error(k.nodeErrorMessage(xa,"RUNTIME","ONLYBOOLEAN"));}catch(ua){throw ua;}}function N(ta,xa){try{var ra=xa.name.toLowerCase();if(null!==ta.localScope&&void 0!==
ta.localScope[ra]){var Aa=ta.localScope[ra];if(!0===Aa.valueset)return Aa.value;Aa.value=G(ta,Aa.node);Aa.valueset=!0;return Aa.value}if(void 0!==ta.globalScope[ra]){Aa=ta.globalScope[ra];if(!0===Aa.valueset)return Aa.value;Aa.value=G(ta,Aa.node);Aa.valueset=!0;return Aa.value}throw Error(k.nodeErrorMessage(xa,"RUNTIME","VARIABLENOTFOUND"));}catch(ua){throw ua;}}function K(ta,xa){try{if("Identifier"!==xa.callee.type)throw Error(k.nodeErrorMessage(xa,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==ta.localScope&&
void 0!==ta.localScope[xa.callee.name.toLowerCase()]){var ra=ta.localScope[xa.callee.name.toLowerCase()];if(ra.value instanceof h.NativeFunction)return ra.value.fn(ta,xa);if(ra.value instanceof e)return I(ta,xa,ra.value.definition);throw Error(k.nodeErrorMessage(xa,"RUNTIME","NOTAFUNCTION"));}if(void 0!==ta.globalScope[xa.callee.name.toLowerCase()]){ra=ta.globalScope[xa.callee.name.toLowerCase()];if(ra.value instanceof h.NativeFunction)return ra.value.fn(ta,xa);if(ra.value instanceof e)return I(ta,
xa,ra.value.definition);throw Error(k.nodeErrorMessage(xa,"RUNTIME","NOTAFUNCTION"));}throw Error(k.nodeErrorMessage(xa,"RUNTIME","NOTFOUND"));}catch(Aa){throw Aa;}}function X(ta){return null==ta?"":h.isArray(ta)||h.isImmutableArray(ta)?"Array":h.isDate(ta)?"Date":h.isString(ta)?"String":h.isBoolean(ta)?"Boolean":h.isNumber(ta)?"Number":ta instanceof b?"Attachment":ta instanceof a?"Portal":ta instanceof g?"Dictionary":ta instanceof d?"Feature":ta instanceof y?"Point":ta instanceof u?"Polygon":ta instanceof
t?"Polyline":ta instanceof x?"Multipoint":ta instanceof w?"Extent":h.isFunctionParameter(ta)?"Function":h.isFeatureSet(ta)?"FeatureSet":h.isFeatureSetCollection(ta)?"FeatureSetCollection":ta===h.voidOperation?"":"number"===typeof ta&&isNaN(ta)?"Number":"Unrecognised Type"}function da(ta,xa,ra,Aa){try{var ua=G(ta,xa.arguments[ra]);if(h.equalityTest(ua,Aa))return G(ta,xa.arguments[ra+1]);var Ja=xa.arguments.length-ra;return 1===Ja?G(ta,xa.arguments[ra]):2===Ja?null:3===Ja?G(ta,xa.arguments[ra+2]):da(ta,
xa,ra+2,Aa)}catch(ha){throw ha;}}function Y(ta,xa,ra,Aa){try{if(!0===Aa)return G(ta,xa.arguments[ra+1]);if(3===xa.arguments.length-ra)return G(ta,xa.arguments[ra+2]);var ua=G(ta,xa.arguments[ra+2]);if(!1===h.isBoolean(ua))throw Error("WHEN needs boolean test conditions");return Y(ta,xa,ra+2,ua)}catch(Ja){throw Ja;}}function aa(ta,xa){var ra=ta.length,Aa=Math.floor(ra/2);if(0===ra)return[];if(1===ra)return[ta[0]];var ua=aa(ta.slice(0,Aa),xa);ra=aa(ta.slice(Aa,ra),xa);for(Aa=[];0<ua.length||0<ra.length;)if(0<
ua.length&&0<ra.length){var Ja=xa(ua[0],ra[0]);isNaN(Ja)&&(Ja=0);0>=Ja?(Aa.push(ua[0]),ua=ua.slice(1)):(Aa.push(ra[0]),ra=ra.slice(1))}else 0<ua.length?(Aa.push(ua[0]),ua=ua.slice(1)):0<ra.length&&(Aa.push(ra[0]),ra=ra.slice(1));return Aa}function ca(ta,xa,ra){try{var Aa=ta.body;if(ra.length!==ta.params.length)throw Error("Invalid Parameter calls to function.");for(var ua=0;ua<ra.length;ua++)xa.localScope[ta.params[ua].name.toLowerCase()]={value:ra[ua],valueset:!0,node:null};var Ja=G(xa,Aa);if(Ja instanceof
h.ReturnResult)return Ja.value;if(Ja===h.breakResult)throw Error("Cannot Break from a Function");if(Ja===h.continueResult)throw Error("Cannot Continue from a Function");return Ja instanceof h.ImplicitResult?Ja.value:Ja}catch(ha){throw ha;}}function I(ta,xa,ra){return F(ta,xa,function(Aa,ua,Ja){Aa={spatialReference:ta.spatialReference,globalScope:ta.globalScope,depthCounter:ta.depthCounter+1,console:ta.console,lrucache:ta.lrucache,interceptor:ta.interceptor,localScope:{}};if(64<Aa.depthCounter)throw Error("Exceeded maximum function depth");
return ca(ra,Aa,Ja)})}function T(ta){return function(){var xa={spatialReference:ta.context.spatialReference,console:ta.context.console,lrucache:ta.context.lrucache,interceptor:ta.context.interceptor,localScope:{},depthCounter:ta.context.depthCounter+1,globalScope:ta.context.globalScope};if(64<xa.depthCounter)throw Error("Exceeded maximum function depth");return ca(ta.definition,xa,arguments)}}function ba(ta){}Object.defineProperty(A,"__esModule",{value:!0});A.findFunctionCalls=A.referencesFunction=
A.referencesMember=A.validateScript=A.extractExpectedFieldLiterals=A.extractFieldLiterals=A.executeScript=A.extend=A.functionHelper=void 0;var pa=0,ya={};c.registerFunctions(ya,F);l.registerFunctions(ya,F);B.registerFunctions(ya,F);q.registerFunctions(ya,F);r.registerFunctions(ya,F);v.registerFunctions(ya,F);m.registerFunctions(ya,F);ya["typeof"]=function(ta,xa){return F(ta,xa,function(ra,Aa,ua){h.pcCheck(ua,1,1);ra=X(ua[0]);if("Unrecognised Type"===ra)throw Error("Unrecognised Type");return ra})};
ya.iif=function(ta,xa){try{h.pcCheck(null===xa.arguments?[]:xa.arguments,3,3);var ra=G(ta,xa.arguments[0]);if(!1===h.isBoolean(ra))throw Error("IF Function must have a boolean test condition");var Aa=G(ta,xa.arguments[1]),ua=G(ta,xa.arguments[2]);return!0===ra?Aa:ua}catch(Ja){throw Ja;}};ya.decode=function(ta,xa){try{if(2>xa.arguments.length)throw Error("Missing Parameters");if(2===xa.arguments.length)return G(ta,xa.arguments[1]);if(0===(xa.arguments.length-1)%2)throw Error("Must have a default value result.");
var ra=G(ta,xa.arguments[0]);return da(ta,xa,1,ra)}catch(Aa){throw Aa;}};ya.when=function(ta,xa){try{if(3>xa.arguments.length)throw Error("Missing Parameters");if(0===xa.arguments.length%2)throw Error("Must have a default value result.");var ra=G(ta,xa.arguments[0]);if(!1===h.isBoolean(ra))throw Error("WHEN needs boolean test conditions");return Y(ta,xa,0,ra)}catch(Aa){throw Aa;}};ya.top=function(ta,xa){return F(ta,xa,function(ra,Aa,ua){h.pcCheck(ua,2,2);if(h.isArray(ua[0]))return h.toNumber(ua[1])>=
ua[0].length?ua[0].slice(0):ua[0].slice(0,h.toNumber(ua[1]));if(h.isImmutableArray(ua[0]))return h.toNumber(ua[1])>=ua[0].length()?ua[0].slice(0):ua[0].slice(0,h.toNumber(ua[1]));throw Error("Top cannot accept this parameter type");})};ya.first=function(ta,xa){return F(ta,xa,function(ra,Aa,ua){h.pcCheck(ua,1,1);return h.isArray(ua[0])?0===ua[0].length?null:ua[0][0]:h.isImmutableArray(ua[0])?0===ua[0].length()?null:ua[0].get(0):null})};ya.sort=function(ta,xa){return F(ta,xa,function(ra,Aa,ua){h.pcCheck(ua,
1,2);ra=ua[0];h.isImmutableArray(ra)&&(ra=ra.toArray());if(!1===h.isArray(ra))throw Error("Illegal Argument");if(1<ua.length){if(!1===h.isFunctionParameter(ua[1]))throw Error("Illegal Argument");var Ja=T(ua[1]);return ra=aa(ra,function(R,Ea){return Ja(R,Ea)})}if(0===ra.length)return[];ua={};for(Aa=0;Aa<ra.length;Aa++){var ha=X(ra[Aa]);""!==ha&&(ua[ha]=!0)}if(!0===ua.Array||!0===ua.Dictionary||!0===ua.Feature||!0===ua.Point||!0===ua.Polygon||!0===ua.Polyline||!0===ua.Multipoint||!0===ua.Extent||!0===
ua.Function)return ra.slice(0);Aa=0;ha="";for(var ma in ua)Aa++,ha=ma;return ra=1<Aa||"String"===ha?aa(ra,function(R,Ea){if(null===R||void 0===R||R===h.voidOperation)return null===Ea||void 0===Ea||Ea===h.voidOperation?0:1;if(null===Ea||void 0===Ea||Ea===h.voidOperation)return-1;var Ia=h.toString(R),ea=h.toString(Ea);return Ia<ea?-1:Ia===ea?0:1}):"Number"===ha?aa(ra,function(R,Ea){return R-Ea}):"Boolean"===ha?aa(ra,function(R,Ea){return R===Ea?0:Ea?-1:1}):"Date"===ha?aa(ra,function(R,Ea){return Ea-
R}):ra.slice(0)})};for(var Da in ya)ya[Da]={value:new h.NativeFunction(ya[Da]),valueset:!0,node:null};var Ha=function(){};Ha.prototype=ya;Ha.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};Ha.prototype.pi={value:Math.PI,valueset:!0,node:null};A.functionHelper={fixSpatialReference:h.fixSpatialReference,parseArguments:E,standardFunction:F};A.extend=function(ta){for(var xa={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:F,evaluateIdentifier:N,arcadeCustomFunctionHandler:T},
ra=0;ra<ta.length;ra++)ta[ra].registerFunctions(xa);for(var Aa in xa.functions)ya[Aa]={value:new h.NativeFunction(xa.functions[Aa]),valueset:!0,node:null},Ha.prototype[Aa]=ya[Aa];for(ra=0;ra<xa.signatures.length;ra++)k.addFunctionDeclaration(xa.signatures[ra],"async")};A.executeScript=function(ta,xa){var ra=xa.spatialReference;if(null===ra||void 0===ra)ra=new C({wkid:102100});var Aa=xa.vars,ua=xa.customfunctions,Ja=new Ha;Aa||(Aa={});ua||(ua={});var ha=new g({newline:"\n",tab:"\t",singlequote:"'",
doublequote:'"',forwardslash:"/",backwardslash:"\\"});ha.immutable=!1;Ja.textformatting={value:ha,valueset:!0,node:null};for(var ma in ua)Ja[ma]={value:new h.NativeFunction(ua[ma]),"native":!0,valueset:!0,node:null};for(ma in Aa)Ja[ma]=Aa[ma]&&"esri.Graphic"===Aa[ma].declaredClass?{value:d.createFromGraphic(Aa[ma]),valueset:!0,node:null}:{value:Aa[ma],valueset:!0,node:null};ra=G({spatialReference:ra,globalScope:Ja,localScope:null,console:xa.console?xa.console:ba,lrucache:xa.lrucache,interceptor:xa.interceptor,
depthCounter:1},ta.body[0].body);ra instanceof h.ReturnResult&&(ra=ra.value);ra instanceof h.ImplicitResult&&(ra=ra.value);ra===h.voidOperation&&(ra=null);if(ra===h.breakResult)throw Error("Cannot return BREAK");if(ra===h.continueResult)throw Error("Cannot return CONTINUE");if(ra instanceof e)throw Error("Cannot return FUNCTION");if(ra instanceof h.NativeFunction)throw Error("Cannot return FUNCTION");return ra};A.extractFieldLiterals=function(ta,xa){void 0===xa&&(xa=!1);return k.findFieldLiterals(ta)};
A.extractExpectedFieldLiterals=function(ta){return k.findExpectedFieldLiterals(ta)};A.validateScript=function(ta,xa){return k.validateScript(ta,xa,"simple")};A.referencesMember=function(ta,xa){return k.referencesMember(ta,xa)};A.referencesFunction=function(ta,xa){return k.referencesFunction(ta,xa)};A.findFunctionCalls=function(ta){return k.findFunctionCalls(ta)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/arcade-parser"],function(D,A,a,b){Object.defineProperty(A,
"__esModule",{value:!0});A.referencesFunction=A.referencesMember=A.extractExpectedFieldLiterals=A.validateScript=A.extractFieldLiterals=A.scriptCheck=A.parseScript=void 0;A.parseScript=function(g,d){void 0===d&&(d=[]);var e=b.parse("function _() { "+g+"\n}");if(null===e.body||void 0===e.body)throw Error("No formula provided.");if(0===e.body.length)throw Error("No formula provided.");if(0===e.body.length)throw Error("No formula provided.");if("BlockStatement"!==e.body[0].body.type)throw Error("Invalid formula content.");
var f=a.validateLanguage(e);if(""!==f)throw Error(f);a.findScriptDependencies(e,d);return e};A.scriptCheck=function(g,d,e,f,n){var h=[];g="function _() { \n"+g+"\n}";try{var k=b.parse(g,{tolerant:!0,loc:!0,range:!0}),c=k.errors;if(0<c.length)for(var l=0;l<c.length;l++)h.push({line:c[l].lineNumber-2,character:c[l].column,reason:c[l].description});var r=a.checkScript(k,d,e,f,n);for(d=0;d<r.length;d++)r[d].line-=2,r[d].range&&(r[d].range=[r[d][0]-15,r[d][1]-15]),r[d].loc&&(r[d].loc.start.line-=2,r[d].loc.end.line-=
2),h.push(r[d])}catch(q){try{if("Unexpected token }"===q.description){var m=g.split("\n").length;q.lineNumber===m?(q.index=g.length-1,h.push({line:q.lineNumber-4,character:q.column,reason:"Unexpected end of script"})):(q.index=g.length-1,h.push({line:q.lineNumber-2,character:q.column,reason:"Unexpected end of script"}))}else h.push({line:q.lineNumber-2,character:q.column,reason:q.description})}catch(v){}}return h};A.extractFieldLiterals=function(g,d){void 0===d&&(d=!1);return a.findFieldLiterals(g)};
A.validateScript=function(g,d,e){return a.validateScript(g,d,e)};A.extractExpectedFieldLiterals=function(g){return a.findExpectedFieldLiterals(g)};A.referencesMember=function(g,d){return a.referencesMember(g,d)};A.referencesFunction=function(g,d){return a.referencesFunction(g,d)}})},"esri/arcade/lib/arcade-parser":function(){var D=this&&this.__createBinding||(Object.create?function(a,b,g,d){void 0===d&&(d=g);Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[g]}})}:function(a,b,g,d){void 0===
d&&(d=g);a[d]=b[g]}),A=this&&this.__exportStar||function(a,b){for(var g in a)"default"===g||Object.prototype.hasOwnProperty.call(b,g)||D(b,a,g)};define("require exports ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),function(a,b,g,d,e,f,n,h){Object.defineProperty(b,"__esModule",{value:!0});b.version=b.Syntax=b.tokenize=b.parse=void 0;b.parse=function(k,c,l){var r=null,m=function(w,z){l&&l(w,z);r&&r.visit(w,z)},q="function"===typeof l?m:void 0,v=!1;if(c){v="boolean"===
typeof c.comment&&c.comment;var B="boolean"===typeof c.attachComment&&c.attachComment;if(v||B)r=new g.CommentHandler,r.attach=B,c.comment=!0,q=m}k=new d.Parser(k,c,q);c=k.parseScript();v&&r&&(c.comments=r.comments);k.config.tokens&&(c.tokens=k.tokens);k.config.tolerant&&(c.errors=k.errorHandler.errors);return c};b.tokenize=function(k,c,l){k=new e.Tokenizer(k,c);c=[];var r=void 0;try{for(;;){var m=k.getNextToken();if(!m)break;l&&(m=l(m));c.push(m)}}catch(q){k.errorHandler.tolerate(q)}k.errorHandler.tolerant&&
(r=k.errors());return{tokens:c,errors:r}};Object.defineProperty(b,"Syntax",{enumerable:!0,get:function(){return f.Syntax}});A(n,b);A(h,b);b.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(D,A,a){Object.defineProperty(A,"__esModule",{value:!0});A.CommentHandler=void 0;D=function(){function b(){this.attach=!1;this.comments=[];this.stack=[];this.leading=[];this.trailing=[]}b.prototype.insertInnerComments=function(g,d){if(g.type===a.Syntax.BlockStatement&&
0===g.body.length){for(var e=[],f=this.leading.length-1;0<=f;--f){var n=this.leading[f];d.end.offset>=n.start&&(e.unshift(n.comment),this.leading.splice(f,1),this.trailing.splice(f,1))}e.length&&(g.innerComments=e)}};b.prototype.findTrailingComments=function(g){var d=[];if(0<this.trailing.length){for(var e=this.trailing.length-1;0<=e;--e){var f=this.trailing[e];f.start>=g.end.offset&&d.unshift(f.comment)}this.trailing.length=0;return d}(e=this.stack[this.stack.length-1])&&e.node.trailingComments&&
(f=e.node.trailingComments[0])&&f.range[0]>=g.end.offset&&(d=e.node.trailingComments,delete e.node.trailingComments);return d};b.prototype.findLeadingComments=function(g){for(var d=[],e;0<this.stack.length;){var f=this.stack[this.stack.length-1];if(f&&f.start>=g.start.offset)e=f.node,this.stack.pop();else break}if(e){for(var n=(e.leadingComments?e.leadingComments.length:0)-1;0<=n;--n)f=e.leadingComments[n],f.range[1]<=g.start.offset&&(d.unshift(f),e.leadingComments.splice(n,1));e.leadingComments&&
0===e.leadingComments.length&&delete e.leadingComments;return d}for(n=this.leading.length-1;0<=n;--n)f=this.leading[n],f.start<=g.start.offset&&(d.unshift(f.comment),this.leading.splice(n,1));return d};b.prototype.visitNode=function(g,d){if(!(g.type===a.Syntax.Program&&0<g.body.length)){this.insertInnerComments(g,d);var e=this.findTrailingComments(d),f=this.findLeadingComments(d);0<f.length&&(g.leadingComments=f);0<e.length&&(g.trailingComments=e);this.stack.push({node:g,start:d.start.offset})}};
b.prototype.visitComment=function(g,d){this.comments.push(g);if(this.attach){var e={comment:{type:g.type,value:g.value,range:[d.start.offset,d.end.offset]},start:d.start.offset};g.loc&&(e.comment.loc=g.loc);this.leading.push(e);this.trailing.push(e)}};b.prototype.visit=function(g,d){"Line"===g.type||"Block"===g.type?this.visitComment(g,d):this.attach&&this.visitNode(g,d)};return b}();A.CommentHandler=D})},"esri/arcade/lib/syntax":function(){define(["require","exports"],function(D,A){Object.defineProperty(A,
"__esModule",{value:!0});A.Syntax=void 0;A.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",
Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),
function(D,A,a,b,g,d,e,f,n){Object.defineProperty(A,"__esModule",{value:!0});A.Parser=void 0;D=function(){function h(k,c,l){void 0===c&&(c={});this.config={range:"boolean"===typeof c.range&&c.range,loc:"boolean"===typeof c.loc&&c.loc,source:null,tokens:"boolean"===typeof c.tokens&&c.tokens,comment:"boolean"===typeof c.comment&&c.comment,tolerant:"boolean"===typeof c.tolerant&&c.tolerant,globalReturn:!!c.globalReturn};this.config.loc&&c.source&&null!==c.source&&(this.config.source=String(c.source));
this.delegate=l;this.errorHandler=new b.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new e.Scanner(k,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",
lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-
this.scanner.lineStart}}h.prototype.tolerateError=function(k){for(var c=[],l=1;l<arguments.length;l++)c[l-1]=arguments[l];var r=c.slice();c=k.replace(/%(\d)/g,function(m,q){a.assert(q<r.length,"Message reference must be in range");return r[q]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,c)};h.prototype.unexpectedTokenError=function(k,c){var l=c||g.Messages.UnexpectedToken;if(k){c||(l=2===k.type?g.Messages.UnexpectedEOS:3===k.type?g.Messages.UnexpectedIdentifier:
6===k.type?g.Messages.UnexpectedNumber:8===k.type?g.Messages.UnexpectedString:10===k.type?g.Messages.UnexpectedTemplate:g.Messages.UnexpectedToken);var r=k.value.toString()}else r="ILLEGAL";l=l.replace("%0",r);return k&&"number"===typeof k.lineNumber?this.errorHandler.createError(k.start,k.lineNumber,k.start-(this.lastMarker.index-this.lastMarker.column)+1,l):this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,l)};h.prototype.throwUnexpectedToken=function(k,
c){throw this.unexpectedTokenError(k,c);};h.prototype.tolerateUnexpectedToken=function(k,c){this.errorHandler.tolerate(this.unexpectedTokenError(k,c))};h.prototype.collectComments=function(){if(this.config.comment){var k=this.scanner.scanComments();if(k&&0<k.length&&this.delegate)for(var c=0;c<k.length;++c){var l=k[c],r=new d.Comment(l.multiLine?"Block":"Line",this.scanner.source.slice(l.slice[0],l.slice[1]));this.config.range&&(r.range=l.range);this.config.loc&&(r.loc=l.loc);this.delegate(r,{start:{line:l.loc.start.line,
column:l.loc.start.column,offset:l.range[0]},end:{line:l.loc.end.line,column:l.loc.end.column,offset:l.range[1]}})}}else this.scanner.scanComments()};h.prototype.peekAhead=function(k){var c=this,l=this.scanner.saveState();k.call(this,function(){c.scanner.scanComments();return c.scanner.lex()});this.scanner.restoreState(l)};h.prototype.getTokenRaw=function(k){return this.scanner.source.slice(k.start,k.end)};h.prototype.convertToken=function(k){var c={type:n.TokenName[k.type],value:this.getTokenRaw(k)};
this.config.range&&(c.range=[k.start,k.end]);this.config.loc&&(c.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===k.type&&(c.regex={pattern:k.pattern,flags:k.flags});return c};h.prototype.nextToken=function(){var k=this.lookahead;this.lastMarker.index=this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();
this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var c=this.scanner.lex();this.hasLineTerminator=k.lineNumber!==c.lineNumber;this.lookahead=c;this.config.tokens&&2!==c.type&&this.tokens.push(this.convertToken(c));return k};h.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};
h.prototype.startNode=function(k,c){void 0===c&&(c=0);var l=k.start-k.lineStart,r=k.lineNumber;0>l&&(l+=c,r--);return{index:k.start,line:r,column:l}};h.prototype.finalize=function(k,c){this.config.range&&(c.range=[k.index,this.lastMarker.index]);this.config.loc&&(c.loc={start:{line:k.line,column:k.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(c.loc.source=this.config.source));this.delegate&&this.delegate(c,{start:{line:k.line,column:k.column,offset:k.index},
end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return c};h.prototype.expect=function(k){var c=this.nextToken();7===c.type&&c.value===k||this.throwUnexpectedToken(c)};h.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var k=this.lookahead;7===k.type&&","===k.value?this.nextToken():7===k.type&&";"===k.value?(this.nextToken(),this.tolerateUnexpectedToken(k)):this.tolerateUnexpectedToken(k,g.Messages.UnexpectedToken)}else this.expect(",")};
h.prototype.expectKeyword=function(k){var c=this.nextToken();4===c.type&&c.value.toString().toLowerCase()===k.toLowerCase()||this.throwUnexpectedToken(c)};h.prototype.match=function(k){return 7===this.lookahead.type&&this.lookahead.value===k};h.prototype.matchKeyword=function(k){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===k.toLowerCase()};h.prototype.matchContextualKeyword=function(k){return 3===this.lookahead.type&&this.lookahead.value===k};h.prototype.matchAssign=function(){return 7!==
this.lookahead.type?!1:d.AssignmentOperators.includes(this.lookahead.value)};h.prototype.isolateCoverGrammar=function(k){var c=this.context.isBindingElement,l=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;k=k.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=
c;this.context.isAssignmentTarget=l;this.context.firstCoverInitializedNameError=r;return k};h.prototype.inheritCoverGrammar=function(k){var c=this.context.isBindingElement,l=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;k=k.call(this);this.context.isBindingElement=this.context.isBindingElement&&c;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&
l;this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError;return k};h.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)};h.prototype.parsePrimaryExpression=function(){var k=this.createNode();switch(this.lookahead.type){case 3:k=
this.finalize(k,new d.Identifier(this.nextToken().value));break;case 6:case 8:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var c=this.nextToken();var l=this.getTokenRaw(c);k=this.finalize(k,new d.Literal(c.value,l));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;c=this.nextToken();l=this.getTokenRaw(c);k=this.finalize(k,new d.Literal("true"===c.value.toString().toLowerCase(),l));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=
!1;c=this.nextToken();l=this.getTokenRaw(c);k=this.finalize(k,new d.Literal(null,l));break;case 10:k=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;k=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":k=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":k=this.inheritCoverGrammar(this.parseObjectInitializer);break;default:k=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=
!1;this.context.isBindingElement=!1;k=this.throwUnexpectedToken(this.nextToken());break;default:k=this.throwUnexpectedToken(this.nextToken())}return k};h.prototype.parseArrayInitializer=function(){var k=this.createNode(),c=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),c.push(null)):(c.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(","));this.expect("]");return this.finalize(k,new d.ArrayExpression(c))};h.prototype.parseObjectPropertyKey=
function(){var k=this.createNode(),c=this.nextToken();switch(c.type){case 8:case 6:k=this.finalize(k,new d.Literal(c.value,this.getTokenRaw(c)));break;case 3:case 1:case 5:case 4:k=this.finalize(k,new d.Identifier(c.value));break;default:k=this.throwUnexpectedToken(c)}return k};h.prototype.parseObjectProperty=function(){var k=this.createNode(),c=this.lookahead,l=!1,r=!1,m=null;if(3===c.type){var q=c.value;this.nextToken();l=this.match("[");m=this.finalize(k,new d.Identifier(q))}else this.match("*")?
this.nextToken():(l=this.match("["),m=this.parseObjectPropertyKey());m||this.throwUnexpectedToken(this.lookahead);q=null;this.match(":")?(this.nextToken(),q=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===c.type?(q=this.finalize(k,new d.Identifier(c.value)),r=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(k,new d.Property("init",m,l,q,!1,r))};h.prototype.parseObjectInitializer=function(){var k=this.createNode();this.expect("{");for(var c=[];!this.match("}");)c.push(this.parseObjectProperty()),
this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(k,new d.ObjectExpression(c))};h.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var k=this.createNode(),c=this.nextToken();return this.finalize(k,new d.TemplateElement({raw:c.value,cooked:c.cooked},c.tail))};h.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var k=this.createNode(),c=this.nextToken();
return this.finalize(k,new d.TemplateElement({raw:c.value,cooked:c.cooked},c.tail))};h.prototype.parseTemplateLiteral=function(){var k=this.createNode(),c=[],l=[],r=this.parseTemplateHead();for(l.push(r);!r.tail;)c.push(this.parseExpression()),r=this.parseTemplateElement(),l.push(r);return this.finalize(k,new d.TemplateLiteral(l,c))};h.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var k=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expect(")");
this.context.isBindingElement=!1;return k};h.prototype.parseArguments=function(){this.expect("(");var k=[];if(!this.match(")"))for(;;){var c=this.isolateCoverGrammar(this.parseAssignmentExpression);k.push(c);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return k};h.prototype.isIdentifierName=function(k){return 3===k.type||4===k.type||1===k.type||5===k.type};h.prototype.parseIdentifierName=function(){var k=this.createNode(),c=this.nextToken();this.isIdentifierName(c)||
this.throwUnexpectedToken(c);return this.finalize(k,new d.Identifier(c.value))};h.prototype.parseLeftHandSideExpressionAllowCall=function(){var k=this.lookahead,c=this.context.allowIn;this.context.allowIn=!0;for(var l=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!1;var r=this.parseArguments();l=this.finalize(this.startNode(k),new d.CallExpression(l,r))}else if(this.match("["))this.context.isBindingElement=
!1,this.context.isAssignmentTarget=!0,this.expect("["),r=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),l=this.finalize(this.startNode(k),new d.ComputedMemberExpression(l,r));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),r=this.parseIdentifierName(),l=this.finalize(this.startNode(k),new d.StaticMemberExpression(l,r));else break;this.context.allowIn=c;return l};h.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,
"callee of new expression always allow in keyword.");for(var k=this.startNode(this.lookahead),c=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var l=this.isolateCoverGrammar(this.parseExpression);this.expect("]");c=this.finalize(k,new d.ComputedMemberExpression(c,l))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),l=this.parseIdentifierName(),
c=this.finalize(k,new d.StaticMemberExpression(c,l));else break;return c};h.prototype.parseUpdateExpression=function(){var k=this.lookahead;if(this.match("++")||this.match("--")){k=this.startNode(k);var c=this.nextToken();var l=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment);l=this.finalize(k,new d.UpdateExpression(c.value,l,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else l=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),
this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,c=this.nextToken().value,l=this.finalize(this.startNode(k),new d.UpdateExpression(c,l,!1)));return l};h.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var k=this.startNode(this.lookahead),c=this.nextToken();
var l=this.inheritCoverGrammar(this.parseUnaryExpression);l=this.finalize(k,new d.UnaryExpression(c.value,l));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else l=this.parseUpdateExpression();return l};h.prototype.binaryPrecedence=function(k){var c=k.value;return 7===k.type?this.operatorPrecedence[c]||0:4===k.type?this.context.allowIn&&"in"===c?12:0:0};h.prototype.parseBinaryExpression=function(){var k=this.lookahead,c=this.inheritCoverGrammar(this.parseUnaryExpression),l=this.lookahead,
r=this.binaryPrecedence(l);if(0<r){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;k=[k,this.lookahead];var m=this.inheritCoverGrammar(this.parseUnaryExpression);l=[c,l.value,m];for(var q=[r];;){r=this.binaryPrecedence(this.lookahead);if(0>=r)break;for(;2<l.length&&r<=q[q.length-1];){m=l.pop();var v=l.pop();q.pop();c=l.pop();k.pop();var B=k[k.length-1],w=this.startNode(B,B.lineStart);l.push(this.finalize(w,new d.BinaryExpression(v,c,m)))}l.push(this.nextToken().value);
q.push(r);k.push(this.lookahead);l.push(this.inheritCoverGrammar(this.parseUnaryExpression))}r=l.length-1;c=l[r];for(v=k.pop();1<r;){B=k.pop();if(!B)break;w=this.startNode(B,v&&v.lineStart);v=l[r-1];c=this.finalize(w,new d.BinaryExpression(v,l[r-2],c));r-=2;v=B}}return c};h.prototype.parseAssignmentExpression=function(){var k=this.lookahead,c=k,l=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment);
this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);c=this.nextToken();c=c.value;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);l=this.finalize(this.startNode(k),new d.AssignmentExpression(c,l,r));this.context.firstCoverInitializedNameError=null}return l};h.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};h.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=
!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var k=this.parseFunctionDeclaration();break;default:k=this.parseStatement()}else k=this.parseStatement();return k};h.prototype.parseBlock=function(){var k=this.createNode();this.expect("{");for(var c=[];!this.match("}");)c.push(this.parseStatementListItem());this.expect("}");return this.finalize(k,new d.BlockStatement(c))};h.prototype.parseObjectStatement=function(){var k=this.createNode(),c=this.parseObjectInitializer();return this.finalize(k,
new d.ExpressionStatement(c))};h.prototype.parseBlockOrObjectStatement=function(){var k="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(c){var l=c();if(3===l.type||8===l.type)l=c(),7===l.type&&":"===l.value&&(k=!0)});return k?this.parseObjectStatement():this.parseBlock()};h.prototype.parseVariableIdentifier=function(){var k=this.createNode(),c=this.nextToken();3!==c.type&&this.throwUnexpectedToken(c,g.Messages.IdentiferExpected);return this.finalize(k,
new d.Identifier(c.value))};h.prototype.parseVariableDeclaration=function(k){var c=this.createNode(),l=this.parseVariableIdentifier(),r=null;this.match("\x3d")?(this.nextToken(),r=this.isolateCoverGrammar(this.parseAssignmentExpression)):l.type===f.Syntax.Identifier||k.inFor||this.expect("\x3d");return this.finalize(c,new d.VariableDeclarator(l,r))};h.prototype.parseVariableDeclarationList=function(k){for(var c=[this.parseVariableDeclaration(k)];this.match(",");)this.nextToken(),c.push(this.parseVariableDeclaration(k));
return c};h.prototype.parseVariableStatement=function(){var k=this.createNode();this.expectKeyword("var");var c=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(k,new d.VariableDeclaration(c,"var"))};h.prototype.parseEmptyStatement=function(){var k=this.createNode();this.expect(";");return this.finalize(k,new d.EmptyStatement)};h.prototype.parseExpressionStatement=function(){var k=this.createNode(),c=this.parseExpression();this.consumeSemicolon();return this.finalize(k,
new d.ExpressionStatement(c))};h.prototype.parseIfClause=function(){var k=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";var c=this.parseStatement();this.context.curlyParsing=k;return c};h.prototype.parseIfStatement=function(){var k=this.createNode(),c=null;this.expectKeyword("if");this.expect("(");var l=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var r=this.finalize(this.createNode(),new d.EmptyStatement)}else this.expect(")"),
r=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),c=this.parseIfClause());return this.finalize(k,new d.IfStatement(l,r,c))};h.prototype.parseForStatement=function(){var k=null,c=null,l=null,r=null,m=null,q=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var v=this.createNode();this.nextToken();var B=this.context.allowIn;this.context.allowIn=!1;var w=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=
B;1===w.length&&this.matchKeyword("in")?(w[0].init&&this.tolerateError(g.Messages.ForInOfLoopInitializer,"for-in"),r=this.finalize(v,new d.VariableDeclaration(w,"var")),this.nextToken(),m=this.parseExpression()):(k=this.finalize(v,new d.VariableDeclaration(w,"var")),this.expect(";"))}else{v=this.context.isBindingElement;w=this.context.isAssignmentTarget;var z=this.context.firstCoverInitializedNameError;B=this.context.allowIn;this.context.allowIn=!1;k=this.inheritCoverGrammar(this.parseAssignmentExpression);
this.context.allowIn=B;this.matchKeyword("in")?(this.context.isAssignmentTarget&&k.type!==f.Syntax.AssignmentExpression||this.tolerateError(g.Messages.InvalidLHSInForIn),this.nextToken(),r=k,m=this.parseExpression(),k=null):(this.context.isBindingElement=v,this.context.isAssignmentTarget=w,this.context.firstCoverInitializedNameError=z,this.expect(";"))}r||(this.match(";")||(c=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(l=this.isolateCoverGrammar(this.parseExpression)));
!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),B=this.finalize(this.createNode(),new d.EmptyStatement)):(this.expect(")"),v=this.context.inIteration,w=this.context.curlyParsing,this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",B=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=w,this.context.inIteration=v);return r&&m?this.finalize(q,new d.ForInStatement(r,m,B)):this.finalize(q,new d.ForStatement(k,c,l,B))};h.prototype.parseContinueStatement=
function(){var k=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(k,new d.ContinueStatement)};h.prototype.parseBreakStatement=function(){var k=this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(k,new d.BreakStatement)};h.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(g.Messages.IllegalReturn);var k=this.createNode();this.expectKeyword("return");
var c=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();return this.finalize(k,new d.ReturnStatement(c))};h.prototype.parseStatement=function(){switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 3:var k=this.parseExpressionStatement();break;case 7:k=this.lookahead.value;k="{"===k?this.parseBlockOrObjectStatement():"("===k?this.parseExpressionStatement():
";"===k?this.parseEmptyStatement():this.parseExpressionStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":k=this.parseBreakStatement();break;case "continue":k=this.parseContinueStatement();break;case "for":k=this.parseForStatement();break;case "function":k=this.parseFunctionDeclaration();break;case "if":k=this.parseIfStatement();break;case "return":k=this.parseReturnStatement();break;case "var":k=this.parseVariableStatement();break;default:k=this.parseExpressionStatement()}break;
default:k=this.throwUnexpectedToken(this.lookahead)}return k};h.prototype.parseFunctionSourceElements=function(){var k=this.createNode();this.expect("{");var c=this.context.inIteration,l=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var r=[];2!==this.lookahead.type&&!this.match("}");)r.push(this.parseStatementListItem());this.expect("}");this.context.inIteration=c;this.context.inFunctionBody=l;return this.finalize(k,new d.BlockStatement(r))};h.prototype.parseFormalParameters=
function(){var k=[];this.expect("(");if(!this.match(")"))for(;2!==this.lookahead.type;){k.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");if(this.match(")"))break}this.expect(")");return k};h.prototype.parseFunctionDeclaration=function(){var k=this.createNode();this.expectKeyword("function");var c=this.parseVariableIdentifier(),l=this.parseFormalParameters(),r=this.parseFunctionSourceElements();return this.finalize(k,new d.FunctionDeclaration(c,l,r))};h.prototype.parseScript=
function(){for(var k=this.createNode(),c=[];2!==this.lookahead.type;)c.push(this.parseStatementListItem());return this.finalize(k,new d.Program(c))};return h}();A.Parser=D})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(D,A){Object.defineProperty(A,"__esModule",{value:!0});A.assert=void 0;A.assert=function(a,b){if(!a)throw Error("ASSERT: "+b);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(D,A){Object.defineProperty(A,"__esModule",
{value:!0});A.ErrorHandler=void 0;var a=function(){function b(){this.errors=[];this.tolerant=!1}b.prototype.recordError=function(g){this.errors.push(g)};b.prototype.tolerate=function(g){if(this.tolerant)this.recordError(g);else throw g;};b.prototype.constructError=function(g,d){var e=Error(g);try{throw e;}catch(f){Object.create&&Object.defineProperty&&(e=Object.create(f),Object.defineProperty(e,"column",{value:d}))}return e};b.prototype.createError=function(g,d,e,f){e=this.constructError("Line "+
d+": "+f,e);e.index=g;e.lineNumber=d;e.description=f;return e};b.prototype.throwError=function(g,d,e,f){throw this.createError(g,d,e,f);};b.prototype.tolerateError=function(g,d,e,f){g=this.createError(g,d,e,f);if(this.tolerant)this.recordError(g);else throw g;};return b}();A.ErrorHandler=a})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(D,A){Object.defineProperty(A,"__esModule",{value:!0});A.Messages=void 0;A.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",
GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",
UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},"esri/arcade/lib/nodes":function(){var D=this&&this.__extends||function(){var A=function(a,b){A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,d){g.__proto__=d}||function(g,d){for(var e in d)Object.prototype.hasOwnProperty.call(d,e)&&(g[e]=d[e])};return A(a,b)};return function(a,b){function g(){this.constructor=
a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");A(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./syntax"],function(A,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.VariableDeclarator=a.VariableDeclaration=a.UpdateExpression=a.UpdateOperators=a.UnaryExpression=a.UnaryOperators=a.TemplateLiteral=a.TemplateElement=a.Program=a.ReturnStatement=a.Property=a.ObjectExpression=
a.Literal=a.IfStatement=a.Identifier=a.FunctionDeclaration=a.ForStatement=a.ForInStatement=a.ExpressionStatement=a.EmptyStatement=a.ContinueStatement=a.StaticMemberExpression=a.ComputedMemberExpression=a.CallExpression=a.BreakStatement=a.BlockStatement=a.BinaryExpression=a.BinaryOperators=a.LogicalOperators=a.AssignmentExpression=a.AssignmentOperators=a.ArrayExpression=a.Comment=void 0;A=function(){return function(){}}();var g=function(d){function e(f,n){var h=d.call(this)||this;h.type=f;h.value=
n;return h}D(e,d);return e}(A);a.Comment=g;g=function(d){function e(f){var n=d.call(this)||this;n.elements=f;n.type=b.Syntax.ArrayExpression;return n}D(e,d);return e}(A);a.ArrayExpression=g;a.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");g=function(d){function e(f,n,h){var k=d.call(this)||this;k.operator=f;k.left=n;k.right=h;k.type=b.Syntax.AssignmentExpression;return k}D(e,d);return e}(A);a.AssignmentExpression=g;a.LogicalOperators=["||","\x26\x26"];a.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");
g=function(d){function e(f,n,h){var k=d.call(this)||this;k.operator=f;k.left=n;k.right=h;k.type=a.LogicalOperators.includes(f)?b.Syntax.LogicalExpression:b.Syntax.BinaryExpression;return k}D(e,d);return e}(A);a.BinaryExpression=g;g=function(d){function e(f){var n=d.call(this)||this;n.body=f;n.type=b.Syntax.BlockStatement;return n}D(e,d);return e}(A);a.BlockStatement=g;g=function(d){function e(){var f=null!==d&&d.apply(this,arguments)||this;f.type=b.Syntax.BreakStatement;return f}D(e,d);return e}(A);
a.BreakStatement=g;g=function(d){function e(f,n){var h=d.call(this)||this;h.callee=f;h.args=n;h.type=b.Syntax.CallExpression;h.arguments=n;return h}D(e,d);return e}(A);a.CallExpression=g;g=function(d){function e(f,n){var h=d.call(this)||this;h.object=f;h.property=n;h.type=b.Syntax.MemberExpression;h.computed=!0;return h}D(e,d);return e}(A);a.ComputedMemberExpression=g;g=function(d){function e(f,n){var h=d.call(this)||this;h.object=f;h.property=n;h.type=b.Syntax.MemberExpression;h.computed=!1;return h}
D(e,d);return e}(A);a.StaticMemberExpression=g;g=function(d){function e(){var f=null!==d&&d.apply(this,arguments)||this;f.type=b.Syntax.ContinueStatement;return f}D(e,d);return e}(A);a.ContinueStatement=g;g=function(d){function e(){var f=null!==d&&d.apply(this,arguments)||this;f.type=b.Syntax.EmptyStatement;return f}D(e,d);return e}(A);a.EmptyStatement=g;g=function(d){function e(f){var n=d.call(this)||this;n.expression=f;n.type=b.Syntax.ExpressionStatement;return n}D(e,d);return e}(A);a.ExpressionStatement=
g;g=function(d){function e(f,n,h){var k=d.call(this)||this;k.left=f;k.right=n;k.body=h;k.type=b.Syntax.ForInStatement;k.each=!1;return k}D(e,d);return e}(A);a.ForInStatement=g;g=function(d){function e(f,n,h,k){var c=d.call(this)||this;c.init=f;c.test=n;c.update=h;c.body=k;c.type=b.Syntax.ForStatement;return c}D(e,d);return e}(A);a.ForStatement=g;g=function(d){function e(f,n,h){var k=d.call(this)||this;k.id=f;k.params=n;k.body=h;k.type=b.Syntax.FunctionDeclaration;k.generator=!1;k.expression=!1;k.async=
!1;return k}D(e,d);return e}(A);a.FunctionDeclaration=g;g=function(d){function e(f){var n=d.call(this)||this;n.name=f;n.type=b.Syntax.Identifier;return n}D(e,d);return e}(A);a.Identifier=g;g=function(d){function e(f,n,h){var k=d.call(this)||this;k.test=f;k.consequent=n;k.alternate=h;k.type=b.Syntax.IfStatement;return k}D(e,d);return e}(A);a.IfStatement=g;g=function(d){function e(f,n){var h=d.call(this)||this;h.value=f;h.raw=n;h.type=b.Syntax.Literal;return h}D(e,d);return e}(A);a.Literal=g;g=function(d){function e(f){var n=
d.call(this)||this;n.properties=f;n.type=b.Syntax.ObjectExpression;return n}D(e,d);return e}(A);a.ObjectExpression=g;g=function(d){function e(f,n,h,k,c,l){var r=d.call(this)||this;r.kind=f;r.key=n;r.computed=h;r.value=k;r.method=c;r.shorthand=l;r.type=b.Syntax.Property;return r}D(e,d);return e}(A);a.Property=g;g=function(d){function e(f){var n=d.call(this)||this;n.argument=f;n.type=b.Syntax.ReturnStatement;return n}D(e,d);return e}(A);a.ReturnStatement=g;g=function(d){function e(f){var n=d.call(this)||
this;n.body=f;n.type=b.Syntax.Program;return n}D(e,d);return e}(A);a.Program=g;g=function(d){function e(f,n){var h=d.call(this)||this;h.value=f;h.tail=n;h.type=b.Syntax.TemplateElement;return h}D(e,d);return e}(A);a.TemplateElement=g;g=function(d){function e(f,n){var h=d.call(this)||this;h.quasis=f;h.expressions=n;h.type=b.Syntax.TemplateLiteral;return h}D(e,d);return e}(A);a.TemplateLiteral=g;a.UnaryOperators=["-","+","!","~"];g=function(d){function e(f,n){var h=d.call(this)||this;h.operator=f;h.argument=
n;h.type=b.Syntax.UnaryExpression;h.prefix=!0;return h}D(e,d);return e}(A);a.UnaryExpression=g;a.UpdateOperators=["++","--"];g=function(d){function e(f,n,h){var k=d.call(this)||this;k.operator=f;k.argument=n;k.prefix=h;k.type=b.Syntax.UpdateExpression;return k}D(e,d);return e}(A);a.UpdateExpression=g;g=function(d){function e(f,n){var h=d.call(this)||this;h.declarations=f;h.kind=n;h.type=b.Syntax.VariableDeclaration;return h}D(e,d);return e}(A);a.VariableDeclaration=g;A=function(d){function e(f,n){var h=
d.call(this)||this;h.id=f;h.init=n;h.type=b.Syntax.VariableDeclarator;return h}D(e,d);return e}(A);a.VariableDeclarator=A})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert","./character","./messages"],function(D,A,a,b,g){Object.defineProperty(A,"__esModule",{value:!0});A.Scanner=void 0;D=function(){function d(e,f){this.source=e;this.errorHandler=f;this.isModule=this.trackComment=!1;this.length=e.length;this.index=0;this.lineNumber=0<e.length?1:0;this.lineStart=0;this.curlyStack=
[]}d.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};d.prototype.restoreState=function(e){this.index=e.index;this.lineNumber=e.lineNumber;this.lineStart=e.lineStart;this.curlyStack=e.curlyStack};d.prototype.eof=function(){return this.index>=this.length};d.prototype.throwUnexpectedToken=function(e){void 0===e&&(e=g.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,
this.index-this.lineStart+1,e)};d.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=g.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)};d.prototype.skipSingleLineComment=function(e){var f=[],n=0,h=null;this.trackComment&&(f=[],n=this.index-e,h={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{line:0,column:0}});for(;!this.eof();){var k=this.source.charCodeAt(this.index);++this.index;if(b.Character.isLineTerminator(k))return h&&
(h.end={line:this.lineNumber,column:this.index-this.lineStart-1},e={multiLine:!1,slice:[n+e,this.index-1],range:[n,this.index-1],loc:h},f.push(e)),13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,f}h&&(h.end={line:this.lineNumber,column:this.index-this.lineStart},e={multiLine:!1,slice:[n+e,this.index],range:[n,this.index],loc:h},f.push(e));return f};d.prototype.skipMultiLineComment=function(){var e=[],f=0,n=null;this.trackComment&&(f=this.index-
2,n={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var h=this.source.charCodeAt(this.index);if(b.Character.isLineTerminator(h))13===h&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===h&&47===this.source.charCodeAt(this.index+1))return this.index+=2,n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!0,slice:[f+2,this.index-2],range:[f,
this.index],loc:n},e.push(f)),e;++this.index}}n&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},f={multiLine:!0,slice:[f+2,this.index],range:[f,this.index],loc:n},e.push(f));this.tolerateUnexpectedToken();return e};d.prototype.scanComments=function(){var e=null;this.trackComment&&(e=[]);for(var f=0===this.index;!this.eof();){var n=this.source.charCodeAt(this.index);if(b.Character.isWhiteSpace(n))++this.index;else if(b.Character.isLineTerminator(n))++this.index,13===n&&10===this.source.charCodeAt(this.index)&&
++this.index,++this.lineNumber,this.lineStart=this.index,f=!0;else if(47===n)if(n=this.source.charCodeAt(this.index+1),47===n)this.index+=2,n=this.skipSingleLineComment(2),e&&(e=e.concat(n)),f=!0;else if(42===n)this.index+=2,n=this.skipMultiLineComment(),e&&(e=e.concat(n));else break;else if(f&&45===n)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,n=this.skipSingleLineComment(3),e&&(e=e.concat(n));else break;else if(60!==n||this.isModule)break;
else if("!--"===this.source.slice(this.index+1,this.index+4))this.index+=4,n=this.skipSingleLineComment(4),e&&(e=e.concat(n));else break}return e};d.prototype.isKeyword=function(e){e=e.toLowerCase();switch(e.length){case 2:return"if"===e||"in"===e;case 3:return"var"===e||"for"===e;case 4:return"else"===e;case 5:return"break"===e;case 6:return"return"===e;case 8:return"function"===e||"continue"===e;default:return!1}};d.prototype.codePointAt=function(e){var f=this.source.charCodeAt(e);55296<=f&&56319>=
f&&(e=this.source.charCodeAt(e+1),56320<=e&&57343>=e&&(f=1024*(f-55296)+e-56320+65536));return f};d.prototype.scanHexEscape=function(e){e="u"===e?4:2;for(var f=0,n=0;n<e;++n)if(!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index)))f=16*f+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(f)};d.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],f=0;for("}"===e&&this.throwUnexpectedToken();!this.eof();){e=
this.source[this.index++];if(!b.Character.isHexDigit(e.charCodeAt(0)))break;f=16*f+"0123456789abcdef".indexOf(e.toLowerCase())}(1114111<f||"}"!==e)&&this.throwUnexpectedToken();return b.Character.fromCodePoint(f)};d.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var f=this.source.charCodeAt(this.index);if(92===f||55296<=f&&57343>f)return this.index=e,this.getComplexIdentifier();if(b.Character.isIdentifierPart(f))++this.index;else break}return this.source.slice(e,this.index)};
d.prototype.getComplexIdentifier=function(){var e=this.codePointAt(this.index),f=b.Character.fromCodePoint(e);this.index+=f.length;if(92===e){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var n=this.scanUnicodeCodePointEscape()}else n=this.scanHexEscape("u"),null!==n&&"\\"!==n&&b.Character.isIdentifierStart(n.charCodeAt(0))||this.throwUnexpectedToken();f=n}for(;!this.eof();){e=this.codePointAt(this.index);if(!b.Character.isIdentifierPart(e))break;
n=b.Character.fromCodePoint(e);f+=n;this.index+=n.length;92===e&&(f=f.substr(0,f.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,n=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape("u"),null!==n&&"\\"!==n&&b.Character.isIdentifierPart(n.charCodeAt(0))||this.throwUnexpectedToken()),f+=n)}return f};d.prototype.octalToDecimal=function(e){var f="0"!==e,n="01234567".indexOf(e);!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&
(f=!0,n=8*n+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(e)&&!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+"01234567".indexOf(this.source[this.index++])));return{code:n,octal:f}};d.prototype.scanIdentifier=function(){var e=this.index,f=92===this.source.charCodeAt(e)?this.getComplexIdentifier():this.getIdentifier();var n=1===f.length?3:this.isKeyword(f)?4:"null"===f.toLowerCase()?5:"true"===f.toLowerCase()||"false"===f.toLowerCase()?1:3;if(3!==
n&&e+f.length!==this.index){var h=this.index;this.index=e;this.tolerateUnexpectedToken(g.Messages.InvalidEscapedReservedWord);this.index=h}return{type:n,value:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};d.prototype.scanPunctuator=function(){var e=this.index,f=this.source[this.index];switch(f){case "(":case "{":"{"===f&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;
break;default:f=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===f?this.index+=4:(f=f.substr(0,3),"\x3d\x3d\x3d"===f||"!\x3d\x3d"===f||"\x3e\x3e\x3e"===f||"\x3c\x3c\x3d"===f||"\x3e\x3e\x3d"===f||"**\x3d"===f?this.index+=3:(f=f.substr(0,2),"\x26\x26"===f||"||"===f||"\x3d\x3d"===f||"!\x3d"===f||"+\x3d"===f||"-\x3d"===f||"*\x3d"===f||"/\x3d"===f||"++"===f||"--"===f||"\x3c\x3c"===f||"\x3e\x3e"===f||"\x26\x3d"===f||"|\x3d"===f||"^\x3d"===f||"%\x3d"===f||"\x3c\x3d"===f||"\x3e\x3d"===f||"\x3d\x3e"===
f||"**"===f?this.index+=2:(f=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(f)&&++this.index)))}this.index===e&&this.throwUnexpectedToken();return{type:7,value:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};d.prototype.scanHexLiteral=function(e){for(var f="";!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index));)f+=this.source[this.index++];0===f.length&&this.throwUnexpectedToken();b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+f,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};d.prototype.scanBinaryLiteral=function(e){for(var f="";!this.eof();){var n=this.source[this.index];if("0"!==n&&"1"!==n)break;f+=this.source[this.index++]}0===f.length&&this.throwUnexpectedToken();this.eof()||(n=this.source.charCodeAt(this.index),(b.Character.isIdentifierStart(n)||b.Character.isDecimalDigit(n))&&this.throwUnexpectedToken());return{type:6,
value:parseInt(f,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};d.prototype.scanOctalLiteral=function(e,f){var n="",h=!1;b.Character.isOctalDigit(e.charCodeAt(0))?(h=!0,n="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];h||0!==n.length||this.throwUnexpectedToken();(b.Character.isIdentifierStart(this.source.charCodeAt(this.index))||b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&
this.throwUnexpectedToken();return{type:6,value:parseInt(n,8),octal:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:f,end:this.index}};d.prototype.scanNumericLiteral=function(){var e=this.index,f=this.source[e];a.assert(b.Character.isDecimalDigit(f.charCodeAt(0))||"."===f,"Numeric literal must start with a decimal digit or a decimal point");var n="";if("."!==f){n=this.source[this.index++];f=this.source[this.index];if("0"===n){if("x"===f||"X"===f)return++this.index,this.scanHexLiteral(e);
if("b"===f||"B"===f)return++this.index,this.scanBinaryLiteral(e);if("o"===f||"O"===f)return this.scanOctalLiteral(f,e)}for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];f=this.source[this.index]}if("."===f){for(n+=this.source[this.index++];b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];f=this.source[this.index]}if("e"===f||"E"===f){n+=this.source[this.index++];f=this.source[this.index];if("+"===f||"-"===
f)n+=this.source[this.index++];if(b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];else this.throwUnexpectedToken()}b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};d.prototype.scanStringLiteral=function(){var e=this.index,f=this.source[e];
a.assert("'"===f||'"'===f,"String literal must starts with a quote");++this.index;for(var n=!1,h="";!this.eof();){var k=this.source[this.index++];if(k===f){f="";break}if("\\"===k)if((k=this.source[this.index++])&&b.Character.isLineTerminator(k.charCodeAt(0)))++this.lineNumber,"\r"===k&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(k){case "u":"{"===this.source[this.index]?(++this.index,h+=this.scanUnicodeCodePointEscape()):(k=this.scanHexEscape(k),null===k&&this.throwUnexpectedToken(),
h+=k);break;case "x":k=this.scanHexEscape(k);null===k&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);h+=k;break;case "n":h+="\n";break;case "r":h+="\r";break;case "t":h+="\t";break;case "b":h+="\b";break;case "f":h+="\f";break;case "v":h+="\x0B";break;case "8":case "9":h+=k;this.tolerateUnexpectedToken();break;default:k&&b.Character.isOctalDigit(k.charCodeAt(0))?(k=this.octalToDecimal(k),n=k.octal||n,h+=String.fromCharCode(k.code)):h+=k}else if(b.Character.isLineTerminator(k.charCodeAt(0)))break;
else h+=k}""!==f&&(this.index=e,this.throwUnexpectedToken());return{type:8,value:h,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};d.prototype.scanTemplate=function(){var e="",f=!1,n=this.index,h="`"===this.source[n],k=!1,c=2;for(++this.index;!this.eof();){var l=this.source[this.index++];if("`"===l){c=1;f=k=!0;break}if("$"===l){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;f=!0;break}e+=l}else if("\\"===l)if(l=this.source[this.index++],
b.Character.isLineTerminator(l.charCodeAt(0)))++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(l){case "n":e+="\n";break;case "r":e+="\r";break;case "t":e+="\t";break;case "u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var r=this.index,m=this.scanHexEscape(l);null!==m?e+=m:(this.index=r,e+=l)}break;case "x":l=this.scanHexEscape(l);null===l&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);
e+=l;break;case "b":e+="\b";break;case "f":e+="\f";break;case "v":e+="\v";break;default:"0"===l?(b.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral),e+="\x00"):b.Character.isOctalDigit(l.charCodeAt(0))?this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral):e+=l}else b.Character.isLineTerminator(l.charCodeAt(0))?(++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=l}f||
this.throwUnexpectedToken();h||this.curlyStack.pop();return{type:10,value:this.source.slice(n+1,this.index-c),cooked:e,head:h,tail:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}};d.prototype.testRegExp=function(e,f){var n=this,h=e;0<=f.indexOf("u")&&(h=h.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(k,c,l){k=parseInt(c||l,16);1114111<k&&n.throwUnexpectedToken(g.Messages.InvalidRegExp);return 65535>=k?String.fromCharCode(k):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
"\uffff"));try{RegExp(h)}catch(k){this.throwUnexpectedToken(g.Messages.InvalidRegExp)}try{return new RegExp(e,f)}catch(k){return null}};d.prototype.scanRegExpBody=function(){var e=this.source[this.index];a.assert("/"===e,"Regular expression literal must start with a slash");for(var f=this.source[this.index++],n=!1,h=!1;!this.eof();)if(e=this.source[this.index++],f+=e,"\\"===e)e=this.source[this.index++],b.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(g.Messages.UnterminatedRegExp),
f+=e;else if(b.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){h=!0;break}"["===e&&(n=!0)}h||this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);return f.substr(1,f.length-2)};d.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var f=this.source[this.index];if(!b.Character.isIdentifierPart(f.charCodeAt(0)))break;++this.index;if("\\"!==f||this.eof())e+=f;else{f=this.source[this.index];
if("u"===f){++this.index;f=this.index;var n=this.scanHexEscape("u");if(null!==n)for(e+=n;f<this.index;++f);else this.index=f,e+="u"}this.tolerateUnexpectedToken()}}return e};d.prototype.scanRegExp=function(){var e=this.index,f=this.scanRegExpBody(),n=this.scanRegExpFlags(),h=this.testRegExp(f,n);return{type:9,value:"",pattern:f,flags:n,regex:h,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}};d.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,
lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return b.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?b.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():b.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():
55296<=e&&57343>e&&b.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return d}();A.Scanner=D})},"esri/arcade/lib/character":function(){define(["require","exports"],function(D,A){Object.defineProperty(A,"__esModule",{value:!0});A.Character=void 0;var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
A.Character={fromCodePoint:function(g){return 65536>g?String.fromCharCode(g):String.fromCharCode(55296+(g-65536>>10))+String.fromCharCode(56320+(g-65536&1023))},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===g||160===g||5760<=g&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||92===g||
128<=g&&a.test(A.Character.fromCodePoint(g))},isIdentifierPart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||48<=g&&57>=g||92===g||128<=g&&b.test(A.Character.fromCodePoint(g))},isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g},isOctalDigit:function(g){return 48<=g&&55>=g}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(D,A){Object.defineProperty(A,"__esModule",{value:!0});A.TokenName=
A.TokenType=void 0;var a=A.TokenType||(A.TokenType={});a[a.BooleanLiteral=1]="BooleanLiteral";a[a.EOF=2]="EOF";a[a.Identifier=3]="Identifier";a[a.Keyword=4]="Keyword";a[a.NullLiteral=5]="NullLiteral";a[a.NumericLiteral=6]="NumericLiteral";a[a.Punctuator=7]="Punctuator";a[a.StringLiteral=8]="StringLiteral";a[a.RegularExpression=9]="RegularExpression";a[a.Template=10]="Template";A.TokenName={};A.TokenName[1]="Boolean";A.TokenName[2]="\x3cend\x3e";A.TokenName[3]="Identifier";A.TokenName[4]="Keyword";
A.TokenName[5]="Null";A.TokenName[6]="Numeric";A.TokenName[7]="Punctuator";A.TokenName[8]="String";A.TokenName[9]="RegularExpression";A.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){var D=this&&this.__spreadArray||function(A,a){for(var b=0,g=a.length,d=A.length;b<g;b++,d++)A[d]=a[b];return A};define("require exports ./error-handler ./nodes ./scanner ./token".split(" "),function(A,a,b,g,d,e){Object.defineProperty(a,"__esModule",{value:!0});a.Tokenizer=void 0;var f=function(){function n(){this.values=
[];this.curly=this.paren=-1}n.prototype.beforeFunctionExpression=function(h){return 0<=D(D(D(D(["(","{","[","return",","],g.AssignmentOperators),g.BinaryOperators),g.LogicalOperators),g.UnaryOperators).indexOf(h)};n.prototype.isRegexStart=function(){var h=this.values[this.values.length-1],k=null!==h;switch(h){case "this":case "]":k=!1;break;case ")":h=this.values[this.paren-1];k="if"===h||"while"===h||"for"===h||"with"===h;break;case "}":k=!0,"function"===this.values[this.curly-3]?k=(h=this.values[this.curly-
4])?!this.beforeFunctionExpression(h):!1:"function"===this.values[this.curly-4]&&(k=(h=this.values[this.curly-5])?!this.beforeFunctionExpression(h):!0)}return k};n.prototype.push=function(h){7===h.type||4===h.type?("{"===h.value?this.curly=this.values.length:"("===h.value&&(this.paren=this.values.length),this.values.push(h.value)):this.values.push(null)};return n}();A=function(){function n(h,k){this.errorHandler=new b.ErrorHandler;this.errorHandler.tolerant=k?"boolean"===typeof k.tolerant&&k.tolerant:
!1;this.scanner=new d.Scanner(h,this.errorHandler);this.scanner.trackComment=k?"boolean"===typeof k.comment&&k.comment:!1;this.trackRange=k?"boolean"===typeof k.range&&k.range:!1;this.trackLoc=k?"boolean"===typeof k.loc&&k.loc:!1;this.buffer=[];this.reader=new f}n.prototype.errors=function(){return this.errorHandler.errors};n.prototype.getNextToken=function(){if(0===this.buffer.length){var h=this.scanner.scanComments();if(h)for(var k=0;k<h.length;++k){var c=h[k],l=this.scanner.source.slice(c.slice[0],
c.slice[1]);l={type:c.multiLine?"BlockComment":"LineComment",value:l};this.trackRange&&(l.range=c.range);this.trackLoc&&(l.loc=c.loc);this.buffer.push(l)}if(!this.scanner.eof()){h=null;this.trackLoc&&(h={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});k=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){c=this.scanner.saveState();try{k=this.scanner.scanRegExp()}catch(r){this.scanner.restoreState(c),k=this.scanner.lex()}}else k=
this.scanner.lex();this.reader.push(k);c={type:e.TokenName[k.type],value:this.scanner.source.slice(k.start,k.end)};this.trackRange&&(c.range=[k.start,k.end]);this.trackLoc&&h&&(h.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},c.loc=h);9===k.type&&(c.regex={pattern:k.pattern,flags:k.flags});this.buffer.push(c)}}return this.buffer.shift()};return n}();a.Tokenizer=A})},"esri/arcadeProfiles/visualizationProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../support/expressionUtils ./utils".split(" "),
function(D,A,a,b,g,d,e){D=new (D(null,{declaredClass:"esri.arcadeProfiles.VisualizationProfile",initialize:function(f){var n=[];e.hasGeometryOperations(f)&&n.push(d.enableGeometryOperations());return g(n)}}));A.setObject("arcadeProfiles.visualizationProfile",D,b);return D})},"esri/arcadeProfiles/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","../kernel","../support/expressionUtils"],function(D,A,a,b,g){var d=/(\/(MapServer|FeatureServer)).*/ig;a={hasGeometryOperations:function(e){return A.some(e,
function(f){return f.hasGeometryOperations?f.hasGeometryOperations():g.hasGeometryOperations(f)})},hasFeatureSetOperations:function(e){return A.some(e,function(f){return f.hasFeatureSetOperations?f.hasFeatureSetOperations():g.hasFeatureSetOperations(f)})},hasVariables:function(e,f){return A.some(e,function(n){return A.some(f,function(h){return n.hasVariable?n.hasVariable(h):g.hasVariable(n,h)})})},isAsync:function(e){return A.some(e,function(f){return f.async})},getServiceUrl:function(e){return d.test(e)?
e.replace(d,"$1"):null}};D.setObject("arcadeProfiles.utils",a,b);return a})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),function(D,A,a,b,g,d,e,f,n){D=D(f,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(h,k,c,l,r,m){this.values=[];this._symbols={};this.infos=[];h&&!h.declaredClass?(k=h,c=m&&m.geometryType,this.defaultSymbol=
(h=k.defaultSymbol)&&(h.declaredClass?h:e.fromJson(h,m)),this.attributeField=k.field1,this.attributeField2=k.field2,this.attributeField3=k.field3,this.fieldDelimiter=k.fieldDelimiter,this.defaultLabel=k.defaultLabel,this.setValueExpression(k.valueExpression),this.valueExpressionTitle=k.valueExpressionTitle,this.legendOptions=k.legendOptions,k.backgroundFillSymbol&&(this.backgroundFillSymbol=e.fromJson(k.backgroundFillSymbol,c?{geometryType:"esriGeometryPolygon"}:null)),"esriGeometryPolygon"===c&&
this.hasVisualVariables("sizeInfo",!1)&&(m={geometryType:"esriGeometryPoint"}),A.forEach(k.uniqueValueInfos,function(q){this._addValueInfo(q,m)},this)):(this.defaultSymbol=h,this.attributeField=k,this.attributeField2=c,this.attributeField3=l,this.fieldDelimiter=r);this._multiple=!!this.attributeField2},addValue:function(h,k){var c=a.isObject(h)?h:{value:h,symbol:k};this._addValueInfo(c)},removeValue:function(h){var k=A.indexOf(this.values,h);-1!==k&&(this.values.splice(k,1),this._hasNullKeyword=this._evalNullKeyword(this.values),
delete this._symbols[h],this.infos.splice(k,1))},getUniqueValueInfo:function(h){var k=this.attributeField,c=h.attributes;if(this.valueExpression)k=this._getDataValue(h,this._uvInfo,null,this._cache.uvInfo),k=this._normalizeNullValue(k);else if(this._multiple){h=this.attributeField2;var l=this.attributeField3,r=[];k&&r.push(this._normalizeNullValue(c[k]));h&&r.push(this._normalizeNullValue(c[h]));l&&r.push(this._normalizeNullValue(c[l]));k=r.join(this.fieldDelimiter||"")}else k=a.isFunction(k)?k(h):
c[k],k=this._normalizeNullValue(k);return this._symbols[k]},setValueExpression:function(h){this.valueExpression=h;this._uvInfo={valueExpression:h};this._cache.uvInfo=this._createCache(this._uvInfo,!0)},getFieldsUsedInExpressions:function(h){var k=this.inherited(arguments);this.valueExpression&&(k=k.concat(n.extractFieldNames(this.valueExpression,h)));k.sort();return A.filter(k,function(c,l){return 0===l||k[l-1]!==c})},getSymbol:function(h){return(h=this.getUniqueValueInfo(h))&&h.symbol||this.defaultSymbol},
_addValueInfo:function(h,k){var c=h.value;this.values.push(c);this._hasNullKeyword=this._evalNullKeyword(this.values);this.infos.push(h);var l=h.symbol;l&&!l.declaredClass&&(h.symbol=e.fromJson(l,k));this._symbols[c]=h},_nullCode:"\x3cNull\x3e",_normalizeNullValue:function(h){return this._hasNullKeyword&&null==h?this._nullCode:h},_evalNullKeyword:function(h){var k=this.fieldDelimiter||"",c=new RegExp("(^|"+k+")("+this._nullCode+")("+k+"|$)");return A.some(h,function(l){return c.test(l)})},toJson:function(){var h=
d.fixJson;var k={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:A.map(this.infos||[],function(c){c=a.mixin({},c);c.symbol=c.symbol&&c.symbol.toJson();c.value+="";return h(c)})};
this.backgroundFillSymbol&&(k.backgroundFillSymbol=this.backgroundFillSymbol.toJson());k=a.mixin(this.inherited(arguments),k);return h(k)}});a.setObject("renderer.UniqueValueRenderer",D,g);return D})},"esri/renderers/jsonUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../Color ../symbols/jsonUtils ./SimpleRenderer ./UniqueValueRenderer ./ClassBreaksRenderer ./VectorFieldRenderer ./DotDensityRenderer ./ScaleDependentRenderer ./TimeClassBreaksAger ./TimeRampAger ./TemporalRenderer ./HeatmapRenderer ./StretchRenderer ./ShadedReliefRenderer ./ColormapRenderer".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z){var x={createDefaultRenderer:function(y){y=e.createDefaultSymbol(y);return new f(y)},fromJson:function(y,u){switch(y.type||""){case "simple":var t=new f(y,u);break;case "uniqueValue":t=new n(y,null,null,null,null,u);break;case "classBreaks":t=new h(y,null,u);break;case "vectorField":t=new k(y);break;case "scaleDependent":t=this._scaleDependentFromJson(y);break;case "dotDensity":t=y.attributes?x.createDefaultRenderer("esriGeometryPolygon"):this._dotDensityFromJson(y);
break;case "temporal":t=this._temporalFromJson(y,u);break;case "heatmap":t=this._heatmapFromJson(y);break;case "rasterStretch":t=new B(y);break;case "rasterShadedRelief":t=new w(y);break;case "rasterColormap":t=new z(y);break;default:t=(t=u&&u.geometryType)?x.createDefaultRenderer(t):null}return t},_scaleDependentFromJson:function(y){var u={},t=y.minScale;u.rendererInfos=D.map(y.rendererInfos,function(C){var E=C.maxScale;C={minScale:t,maxScale:E,renderer:C.renderer&&this.fromJson(C.renderer)};t=E;
return C},this);return new l(u)},_dotDensityFromJson:function(y){y.backgroundColor&&A.isArray(y.backgroundColor)&&(y.backgroundColor=d.toDojoColor(y.backgroundColor));0<y.dotSize&&(y.dotSize=b.pt2px(y.dotSize));y.fields&&D.forEach(y.fields,function(u){u&&A.isArray(u.color)&&(u.color=d.toDojoColor(u.color))});y.legendOptions&&(y.legendOptions.backgroundColor&&A.isArray(y.legendOptions.backgroundColor)&&(y.legendOptions.backgroundColor=d.toDojoColor(y.legendOptions.backgroundColor)),y.legendOptions.outline&&
(y.legendOptions.outline=e.fromJson(y.legendOptions.outline)));y.outline&&(y.outline=e.fromJson(y.outline));return new c(y)},_temporalFromJson:function(y,u){var t=u&&u.geometryType;y=y||{};var C=this.fromJson(y.observationRenderer,u);var E=y.latestObservationRenderer?this.fromJson(y.latestObservationRenderer,u):null;t=y.trackRenderer?this.fromJson(y.trackRenderer,t?{geometryType:"esriGeometryPolyline"}:null):null;var F=this._agerFromJson(y.observationAger);return new q(C,E,t,F)},_agerFromJson:function(y){var u;
y=y||{};y.colorRange||y.sizeRange||y.alphaRange?u=this._timeRampFromJson(y):y.agerClassBreakInfos&&(u=this._timeClassBreaksFromJson(y));return u},_timeRampFromJson:function(y){var u,t,C;y.colorRange&&1<y.colorRange.length&&(u=[d.toDojoColor(y.colorRange[0]),d.toDojoColor(y.colorRange[1])]);y.sizeRange&&1<y.sizeRange.length&&(t=[y.sizeRange[0],y.sizeRange[1]]);y.alphaRange&&1<y.alphaRange.length&&(C=[y.alphaRange[0]/255,y.alphaRange[1]/255]);return new m(u,t,C)},_timeClassBreaksFromJson:function(y){var u=
y.agerClassBreakInfos,t=[],C;var E=r.UNIT_DAYS;switch(y.timeUnits){case "esriTimeUnitsSeconds":E=r.UNIT_SECONDS;break;case "esriTimeUnitsMilliseconds":E=r.UNIT_MILLISECONDS;break;case "esriTimeUnitsHours":E=r.UNIT_HOURS;break;case "esriTimeUnitsMinutes":E=r.UNIT_MINUTES;break;case "esriTimeUnitsMonths":E=r.UNIT_MONTHS;break;case "esriTimeUnitsWeeks":E=r.UNIT_WEEKS;break;case "esriTimeUnitsYears":E=r.UNIT_YEARS}for(C=0;C<u.length;C+=1){y=u[C];var F={minAge:0,maxAge:y.oldestAge||Infinity};y.color&&
(F.color=d.toDojoColor(y.color));y.alpha&&(F.alpha=y.alpha/255);F.size=y.size;t[C]=F}return new r(t,E)},_heatmapFromJson:function(y){var u=y.colorStops;u&&u instanceof Array&&D.forEach(u,function(t){t.color=d.toDojoColor(t.color)});return new v(y)}};A.mixin(A.getObject("renderer",!0,g),x);return x})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ../support/expressionUtils".split(" "),
function(D,A,a,b,g,d,e,f,n){D=D(f,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(h,k,c){this.breaks=[];this._symbols={};this.infos=[];this.isMaxInclusive=!0;if(h&&!h.declaredClass){var l=h;k=c&&c.geometryType;this.attributeField=l.field;this.setValueExpression(l.valueExpression);this.valueExpressionTitle=l.valueExpressionTitle;this.legendOptions=l.legendOptions;this.defaultSymbol=(h=l.defaultSymbol)&&(h.declaredClass?h:e.fromJson(h,c));this.backgroundFillSymbol=(h=l.backgroundFillSymbol)&&
(h.declaredClass?h:e.fromJson(h,k?{geometryType:"esriGeometryPolygon"}:null));this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],l,this);var r=l.minValue;(h=l.classBreakInfos)&&h[0]&&d.isDefined(h[0].classMaxValue)&&A.forEach(h,function(m){var q=m.classMaxValue;m.minValue=r;r=m.maxValue=q},this);"esriGeometryPolygon"===k&&(this.hasVisualVariables("sizeInfo",!1)||e.isPointSymbol(e.getFirstSupportedSymbol(A.map(h,function(m){return m.symbol}))))&&
(c={geometryType:"esriGeometryPoint"});A.forEach(h,function(m){this._addBreakInfo(m,c)},this)}else this.defaultSymbol=h,this.attributeField=k},addBreak:function(h,k,c){h=a.isObject(h)?h:{minValue:h,maxValue:k,symbol:c};this._addBreakInfo(h)},removeBreak:function(h,k){var c=this.breaks,l,r=c.length,m=this._symbols;for(l=0;l<r;l++){var q=c[l];if(q[0]==h&&q[1]==k){c.splice(l,1);delete m[h+"-"+k];this.infos.splice(l,1);break}}},clearBreaks:function(){this.breaks=[];this._symbols={};this.infos=[]},getBreakIndex:function(h){var k=
this.attributeField,c=h.attributes,l=this.breaks,r=l.length,m=this.isMaxInclusive;if(this.valueExpression)h=this._getDataValue(h,this._cbInfo,null,this._cache.cbInfo);else if(a.isFunction(k))h=k(h);else if(h=parseFloat(c[k]),k=this.normalizationType,k){var q=parseFloat(this.normalizationTotal);c=parseFloat(c[this.normalizationField]);if("log"===k)h=Math.log(h)*Math.LOG10E;else if("percent-of-total"===k&&!isNaN(q))h=h/q*100;else if("field"===k){if(isNaN(h)||isNaN(c))return-1;h/=c}}if(null!=h&&!isNaN(h)&&
"number"===typeof h)for(c=0;c<r;c++)if(k=l[c],k[0]<=h&&(m?h<=k[1]:h<k[1]))return c;return-1},getBreakInfo:function(h){h=this.getBreakIndex(h);return-1!==h?this.infos[h]:null},getSymbol:function(h){return(h=this.breaks[this.getBreakIndex(h)])?this._symbols[h[0]+"-"+h[1]]:this.defaultSymbol},setMaxInclusive:function(h){this.isMaxInclusive=h},setValueExpression:function(h){this.valueExpression=h;this._cbInfo={valueExpression:h};this._cache.cbInfo=this._createCache(this._cbInfo)},getFieldsUsedInExpressions:function(h){var k=
this.inherited(arguments);this.valueExpression&&(k=k.concat(n.extractFieldNames(this.valueExpression,h)));k.sort();return A.filter(k,function(c,l){return 0===l||k[l-1]!==c})},isContinuousRenderer:function(){var h=!1;if(this.infos&&1===this.infos.length){var k=this.attributeField,c=this.normalizationField,l=this.valueExpression;h=this.getVisualVariablesForType("colorInfo",!1)||[];var r=this.getVisualVariablesForType("sizeInfo",!1)||[],m=this.getVisualVariablesForType("opacityInfo",!1)||[];h=h.concat(r).concat(m);
h=A.some(h,function(q){return(q.field===k||q.valueExpression===l)&&q.normalizationField==c})}return h},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"],
["defined-interval","esriClassifyDefinedInterval"]],_copy:function(h,k,c){A.forEach(h,function(l){var r=l.split(":");if(1<r.length){l=r[0];var m=this["_"+l+"Enums"];if("rest"===r[1]){var q="1";var v="0"}else"sdk"===r[1]&&(q="0",v="1")}r=k[l];if(void 0!==r&&(c[l]=r,m&&q)){var B,w=m.length;for(B=0;B<w;B++)if(m[B][q]===r){c[l]=m[B][v];break}}},this)},_addBreakInfo:function(h,k){var c=h.minValue,l=h.maxValue;this.breaks.push([c,l]);this.infos.push(h);var r=h.symbol;r&&!r.declaredClass&&(h.symbol=e.fromJson(r,
k));this._symbols[c+"-"+l]=h.symbol},toJson:function(){var h=this.infos||[],k=d.fixJson,c=h[0]&&h[0].minValue,l=this.backgroundFillSymbol;h=a.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:a.clone(this.legendOptions),defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:l&&l.toJson(),minValue:-Infinity===c?-Number.MAX_VALUE:c,classBreakInfos:A.map(h,
function(r){r=a.mixin({},r);r.symbol=r.symbol&&r.symbol.toJson();r.classMaxValue=Infinity===r.maxValue?Number.MAX_VALUE:r.maxValue;delete r.minValue;delete r.maxValue;return k(r)})});this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,h);h.hasOwnProperty("normalizationType")&&!h.normalizationType&&delete h.normalizationType;h.hasOwnProperty("classificationMethod")&&!h.classificationMethod&&delete h.classificationMethod;return k(h)}});
a.setObject("renderer.ClassBreaksRenderer",D,g);return D})},"esri/renderers/VectorFieldRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/_base/array ../kernel ../lang ../Color ./Renderer ./ClassBreaksRenderer ../symbols/SimpleMarkerSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/jsonUtils require".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){var m=D(f,{declaredClass:"esri.renderer.VectorFieldRenderer",iconFolderPath:"../images/symbol/sfs/",
constructor:function(q){d.isDefined(q)||(q={});q.attributeField=q.attributeField||"Magnitude";q.rotationInfo=q.rotationInfo||this._getRotationInfo(q);D.safeMixin(this,q);this.setRotationInfo(this.rotationInfo);this.style=this.style||m.STYLE_SINGLE_ARROW;this.singleArrowSymbol&&(this.singleArrowSymbol=this.singleArrowSymbol.declaredClass?this.singleArrowSymbol:l.fromJson(this.singleArrowSymbol));this.renderer=new n(this._getDefaultSymbol(),q.attributeField);this._updateRenderer(this.style);this.flowRepresentation=
this.flowRepresentation||this.FLOW_FROM},getSymbol:function(q){return this.renderer&&this.renderer.getSymbol(q)},setVisualVariables:function(q){q=b.filter(q,function(v){if("sizeInfo"===v.type)return d.isDefined(this._updateSizeInfo(v))},this);this.inherited(arguments);return this},setSizeInfo:function(q){this._updateSizeInfo(q);this.inherited(arguments);return this},setProportionalSymbolInfo:function(q){this.setSizeInfo(q);return this},setColorInfo:function(q){return this},_updateRenderer:function(q){return d.isDefined(this.renderer)?
q===m.STYLE_SINGLE_ARROW?this._createSingleArrowRenderer():q===m.STYLE_BEAUFORT_KN?this._createBeaufortKnotsRenderer():q===m.STYLE_BEAUFORT_METER?this._createBeaufortMeterRenderer():q===m.STYLE_BEAUFORT_FEET?this._createBeaufortFeetRenderer():q===m.STYLE_BEAUFORT_MILE?this._createBeaufortMilesRenderer():q===m.STYLE_BEAUFORT_KM?this._createBeaufortKilometersRenderer():q===m.STYLE_OCEAN_CURRENT_M?this._createCurrentMeterRenderer():q===m.STYLE_OCEAN_CURRENT_KN?this._createCurrentKnotsRenderer():q===
m.STYLE_SCALAR?this._createSimpleScalarRenderer():q===m.STYLE_WIND_BARBS?this._createWindBarbsRenderer():this._createClassifiedArrowRenderer():Error("Invalid Renderer!")},_updateSizeInfo:function(q){return q&&d.isDefined(q.minSize)&&d.isDefined(q.maxSize)&&d.isDefined(q.minDataValue)&&d.isDefined(q.maxDataValue)?(this.style===m.STYLE_WIND_BARBS&&(q.minSize=q.maxSize),q.field=q.field||"Magnitude",q.type="sizeInfo",this.minDataValue=q.minDataValue,this.maxDataValue=q.maxDataValue,q):null},_createClassifiedArrowRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new e([56,168,0]));var q=[0,1E-6,3.5,7,10.5,14];if(d.isDefined(this.minDataValue)&&d.isDefined(this.maxDataValue)){var v=(this.maxDataValue-this.minDataValue)/5;q=[];var B;var w=this.minDataValue;for(B=0;6>B;B++)q[B]=w,w+=v}this._addBreaks(q,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]])},_createSingleArrowRenderer:function(){this.renderer.defaultSymbol=this.singleArrowSymbol||this._getDefaultSymbol()},_createBeaufortMeterRenderer:function(){this.renderer.defaultSymbol=
this._getDefaultSymbol(new e([214,47,39]));this._addBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new e([214,47,39]));this._addBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],
[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]])},_createBeaufortFeetRenderer:function(){var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];b.forEach(q,function(v,B){q[B]*=3.28084});this.renderer.defaultSymbol=this._getDefaultSymbol(new e([214,47,39]));this._addBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,
21]])},_createBeaufortMilesRenderer:function(){var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];b.forEach(q,function(v,B){q[B]*=2.23694});this.renderer.defaultSymbol=this._getDefaultSymbol(new e([214,47,39]));this._addBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createBeaufortKilometersRenderer:function(){var q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,
28.6,32.7];b.forEach(q,function(v,B){q[B]*=3.6});this.renderer.defaultSymbol=this._getDefaultSymbol(new e([214,47,39]));this._addBreaks(q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]])},_createCurrentMeterRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new e([177,177,177]));this._addBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]])},
_createCurrentKnotsRenderer:function(){this.renderer.defaultSymbol=this._getDefaultSymbol(new e([177,177,177]));this._addBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]])},_createSimpleScalarRenderer:function(){this.renderer.defaultSymbol=new k({url:r.toUrl(this.iconFolderPath+"scalar.png"),height:20,width:20,type:"esriPMS",angle:0})},_createWindBarbsRenderer:function(){var q=[],v;for(v=0;150>=v;v+=5)q.push(v);
var B="M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20;M25 0 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40;M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35;M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15;M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L10 15 M25 10 M25 5 L17.5 7.5".split(";");
var w=new k({url:r.toUrl(this.iconFolderPath+"windbarb.png"),height:20,width:20,type:"esriPMS",angle:0});this.renderer.defaultSymbol=w;for(v=0;v<q.length-1;v++)0===v?this.renderer.addBreak({minValue:q[v],maxValue:q[v+1],symbol:w}):this.renderer.addBreak({minValue:q[v],maxValue:q[v+1],symbol:(new h).setPath(B[v]).setOutline((new c).setWidth(1.5)).setSize(20).setColor(new e([0,0,0,255]))})},_getDefaultSymbol:function(q){return(new h).setPath("M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z").setOutline((new c).setWidth(0)).setSize(20).setColor(q||
new e([0,92,230]))},_getRotationInfo:function(q){var v=q&&q.flowRepresentation||m.FLOW_FROM,B=q&&q.rotationField||"Direction",w=m.FLOW_FROM;return{field:function(z){z=z.attributes[B];return v===w?z:z+180},type:"geographic"}},_addBreaks:function(q,v){if(!d.isDefined(this.renderer))return Error("Invalid Renderer!");if(!(q&&v&&q.length&&v.length&&q.length>=v.length))return Error("AddBreaks: Input arguments break values and colors not valid");var B;for(B=0;B<v.length;B++)this.renderer.addBreak({minValue:q[B],
maxValue:q[B+1],symbol:this._getDefaultSymbol(new e(v[B]))})},toJson:function(){var q=A.mixin(this.inherited(arguments),{type:"vectorField",style:this.style,attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,symbolTileSize:this.symbolTileSize,inputUnit:this.inputUnit,outputUnit:this.outputUnit});this.renderer&&this.renderer.defaultSymbol&&this.style===m.STYLE_SINGLE_ARROW&&(q.singleArrowSymbol=this.renderer.defaultSymbol.toJson());return d.fixJson(q)}});A.mixin(m,{STYLE_WIND_BARBS:"wind_speed",
STYLE_SINGLE_ARROW:"single_arrow",STYLE_CLASSIFIED_ARROW:"classified_arrow",STYLE_BEAUFORT_KN:"beaufort_kn",STYLE_BEAUFORT_METER:"beaufort_m",STYLE_BEAUFORT_MILE:"beaufort_mi",STYLE_BEAUFORT_FEET:"beaufort_ft",STYLE_BEAUFORT_KM:"beaufort_km",STYLE_OCEAN_CURRENT_M:"ocean_current_m",STYLE_OCEAN_CURRENT_KN:"ocean_current_kn",STYLE_SCALAR:"simple_scalar"},{FLOW_FROM:"flow_from",FLOW_TO:"flow_to"});A.setObject("renderer.VectorFieldRenderer",m,g);return m})},"esri/renderers/DotDensityRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Renderer ../symbols/PictureFillSymbol ../geometry/ScreenPoint ../geometry/Point".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l){D=D(h,{declaredClass:"esri.renderer.DotDensityRenderer",constructor:function(r){this.dotSize=r.dotSize||3;this.dotValue=r.dotValue;this.fields=r.fields;this.outline=r.outline;this.backgroundColor=r.backgroundColor;this.exactCount=r.exactCount||!0;this.dotShape=r.dotShape||"square";this.legendOptions=r.legendOptions;this._exactCountMinArea=1E4;this._currentMapScale=this._map=this._canvas=null;this._symbolMap={};this._currentGraphic=this._currentResolution=this._objectIdField=
null;this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1},getSymbol:function(r){this._currentGraphic=r;if(!this._supportsCanvas)return null;this._map||(this._map=r.getLayer()._map,this._objectIdField=r.getLayer().objectIdField,this._currentMapScale=this._map.getScale(),this._currentResolution=this._map.extent.getWidth()/this._map.width,this._map.on("zoom-end",A.hitch(this,function(v){this._currentMapScale=this._map.getScale();this._currentResolution=v.extent.getWidth()/this._map.width;this._symbolMap[this._currentMapScale]=
{}})));if(this._symbolMap[this._currentMapScale]&&this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]]){var m=this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]];var q=this._getShapeProperties(r);m.setOffset(q.dx,q.dy);return m}m=this._generateFieldsCount(this.fields,r.attributes,this.dotValue);q=this._getShapeProperties(r);if(!q.width||!q.height)return null;m=new k(this._generateImageSrc(q.width,q.height,m,q.minXY,q.maxXY),this.outline,q.width,q.height);
m.setOffset(q.dx,q.dy);this._symbolMap[this._currentMapScale]||(this._symbolMap[this._currentMapScale]={});return this._symbolMap[this._currentMapScale][r.attributes[this._objectIdField]]=m},_generateFieldsCount:function(r,m,q){var v;for(v=r.length-1;0<=v;v--){var B=m[r[v].name]/q;r[v].numPoints=Math.round(B)}return r},_getShapeProperties:function(r){var m=r.geometry.getExtent();m.contains(this._map.extent)&&(m=this._map.extent);var q=Math.ceil(m.getWidth()/this._currentResolution);var v=Math.ceil(m.getHeight()/
this._currentResolution);var B=this._map.toScreen(new l(m.xmin,m.ymin,m.spatialReference));m=this._map.toScreen(new l(m.xmax,m.ymax,m.spatialReference));r=r.getLayer().getNavigationTransform();return{minXY:B,maxXY:m,dx:(B.x-r.dx)%q,dy:(m.y-r.dy)%v,width:q,height:v}},_generateImageSrc:function(r,m,q,v,B,w){var z=this.dotSize,x;this._canvas?(this._canvas.width=r,this._canvas.height=m):this._canvas=this._initCanvas(r,m);var y=this._canvas.getContext("2d");if(w=w||this.backgroundColor)y.fillStyle=w.toCss(!0),
y.fillRect(0,0,r,m),y.fill();for(w=q.length-1;0<=w;w--)for(y.fillStyle=q[w].color.toCss(!0),x=q[w].numPoints-1;0<=x;x--){var u=this._getRandomPoint(r,m,v,B);"square"===this.dotShape?y.fillRect(u.x,u.y,z,z):"circle"===this.dotShape&&(y.beginPath(),y.arc(u.x,u.y,z/2,0,2*Math.PI,!0));y.fill()}return this._canvas.toDataURL()},_initCanvas:function(r,m){var q=b.create("canvas",{id:"canvas",width:r+"px",height:m+"px",style:"position: absolute; left: -10000px; top: 0px;"},null);document.body.appendChild(q);
return q},_getRandomInt:function(r,m){return Math.floor(Math.random()*(m-r+1)+r)},_getRandomPoint:function(r,m,q,v){var B={},w=this.outline&&this.outline.width?this.outline.width:0;if(!0===this.exactCount&&r*m>this._exactCountMinArea){r=!1;do B.x=this._getRandomInt(q.x,v.x),B.y=this._getRandomInt(v.y,q.y),r=new c(B.x,B.y),r=this._checkPointShapeBounds(r,this.dotSize+w,this._currentGraphic.geometry),!0===r&&(B.x-=q.x,B.y-=v.y);while(!1===r)}else B.x=this._getRandomInt(0,r),B.y=this._getRandomInt(0,
m);return B},_checkPointShapeBounds:function(r,m,q){var v=null;v=!1;var B=!0,w=0;do{switch(w){case 1:r.x+=m;break;case 2:r.y+=m;break;case 3:r.x-=m}v=this._map.toMap(r);v=q.contains(v);!1===v&&(B=!1);w+=1}while(3>=w&&!0===B);return v},setDotSize:function(r){0<r&&(this.dotSize=r)},setDotValue:function(r){0<r&&(this.dotValue=r)},setOutline:function(r){this.outline=r},setBackgroundColor:function(r){this.backgroundColor=r},toJson:function(){var r=A.mixin(this.inherited(arguments),{type:"dotDensity",backgroundColor:n.toJsonColor(this.backgroundColor),
dotShape:this.dotShape,dotSize:0<this.dotSize?d.px2pt(this.dotSize):0,dotValue:this.dotValue,fields:a.map(this.fields,function(m){return f.fixJson({color:n.toJsonColor(m.color),name:m.name})}),legendOptions:this.legendOptions&&f.fixJson({backgroundColor:n.toJsonColor(this.legendOptions.backgroundColor),dotCoverage:this.legendOptions.dotCoverage,outline:this.legendOptions.outline&&this.legendOptions.outline.toJson(),valueUnit:this.legendOptions.valueUnit}),outline:this.outline&&this.outline.toJson()});
return f.fixJson(r)}});A.setObject("renderer.DotDensityRenderer",D,e);return D})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,A,a,b,g){D=D(g,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});A.setObject("geometry.ScreenPoint",D,b);return D})},"esri/renderers/ScaleDependentRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ./Renderer".split(" "),
function(D,A,a,b,g,d,e){D=D(e,{declaredClass:"esri.renderer.ScaleDependentRenderer",constructor:function(f){this.setRendererInfos(f&&f.rendererInfos||[])},setRendererInfos:function(f){this.rendererInfos=f;this._setRangeType();return this},getSymbol:function(f){var n=this.getRendererInfo(f);return n&&n.renderer&&n.renderer.getSymbol(f)},getRendererInfo:function(f){f=f.getLayer().getMap();return"zoom"===this.rangeType?this.getRendererInfoByZoom(f.getZoom()):this.getRendererInfoByScale(f.getScale())},
getRendererInfoByZoom:function(f){var n=this.rendererInfos,h,k=0;do{var c=n[k];f>=c.minZoom&&f<=c.maxZoom&&(h=c);k++}while(!h&&k<n.length);return h},getRendererInfoByScale:function(f){var n=this.rendererInfos,h,k=0;do{var c=n[k];var l=c.minScale;var r=c.maxScale;var m=!l;var q=!r;!m&&f<=l&&(m=!0);!q&&f>=r&&(q=!0);m&&q&&(h=c);k++}while(!h&&k<n.length);return h},addRendererInfo:function(f){var n=0,h=this.rendererInfos,k=f.hasOwnProperty("minZoom")?"minZoom":"minScale",c=h.length;do{var l=h[n];if(c===
n||f[k]<l[k]){h.splice(n,0,f);this._setRangeType();var r=!0}n++}while(!r&&n<c);return this},_setRangeType:function(){var f=this.rendererInfos;if(f=f&&f[0])this.rangeType=f.hasOwnProperty("minZoom")?"zoom":f.hasOwnProperty("minScale")?"scale":""},toJson:function(){if("zoom"===this.rangeType)return null;var f=this.rendererInfos||[],n=f[0]&&f[0].minScale;f=a.mixin(this.inherited(arguments),{type:"scaleDependent",minScale:0<n?n:0,rendererInfos:A.map(f,function(h){return d.fixJson({maxScale:0<h.maxScale?
h.maxScale:0,renderer:h.renderer&&h.renderer.toJson()})})});return d.fixJson(f)}});a.setObject("renderer.ScaleDependentRenderer",D,g);return D})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(D,A,a,b,g,d,e,f,n,h){var k=D(h,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(c,l){this.infos=c;this.timeUnits=l||"day";c.sort(function(r,
m){return r.minAge<m.minAge?-1:r.minAge>m.minAge?1:0})},getAgedSymbol:function(c,l){var r=l.getLayer(),m=l.attributes,q=e.isDefined;c=f.fromJson(c.toJson());var v=r._map.timeExtent.endTime;if(!v)return c;var B=g.difference(new Date(m[r._startTimeField]),v,this.timeUnits);A.some(this.infos,function(w){if(B>=w.minAge&&B<=w.maxAge){var z=w.color,x=w.size;w=w.alpha;z&&c.setColor(z);q(x)&&this._setSymbolSize(c,x);q(w)&&c.color&&(c.color.a=w);return!0}},this);return c},toJson:function(){var c={agerClassBreakInfos:[]},
l;c.timeUnits=this._getRestUnits(this.timeUnits);for(l=0;l<this.infos.length;l+=1){var r=this.infos[l];var m={};m.oldestAge=Infinity===r.maxAge?null:r.maxAge;m.size=r.size;r.color&&(m.color=n.toJsonColor(r.color));r.alpha&&(m.alpha=Math.round(255*r.alpha));c.agerClassBreakInfos[l]=m}return c},_getRestUnits:function(c){var l="esriTimeUnitsDays";switch(c){case k.UNIT_SECONDS:l="esriTimeUnitsSeconds";break;case k.UNIT_MILLISECONDS:l="esriTimeUnitsMilliseconds";break;case k.UNIT_HOURS:l="esriTimeUnitsHours";
break;case k.UNIT_MINUTES:l="esriTimeUnitsMinutes";break;case k.UNIT_MONTHS:l="esriTimeUnitsMonths";break;case k.UNIT_WEEKS:l="esriTimeUnitsWeeks";break;case k.UNIT_YEARS:l="esriTimeUnitsYears"}return l}});a.mixin(k,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"});a.setObject("renderer.TimeClassBreaksAger",k,d);return k})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(g,d){},_setSymbolSize:function(g,d){switch(g.type){case "simplemarkersymbol":g.setSize(d);break;case "picturemarkersymbol":g.setWidth(d);g.setHeight(d);break;case "simplelinesymbol":case "cartographiclinesymbol":g.setWidth(d);break;case "simplefillsymbol":case "picturefillsymbol":g.outline&&g.outline.setWidth(d)}}});A.setObject("renderer.SymbolAger",D,b);return D})},
"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has ../kernel ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(D,A,a,b,g,d,e,f){D=D(f,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(n,h,k){this.colorRange=n;this.sizeRange=h;this.alphaRange=k},getAgedSymbol:function(n,h){var k=h.getLayer(),c=h.attributes;n=d.fromJson(n.toJson());var l=k._map.timeExtent,r=l.startTime;l=l.endTime;if(!r||!l)return n;r=r.getTime();
l=l.getTime();k=new Date(c[k._startTimeField]);k=k.getTime();k<r&&(k=r);r=l===r?1:(k-r)/(l-r);if(k=this.sizeRange)c=k[0],l=k[1],k=Math.abs(l-c)*r,this._setSymbolSize(n,c<l?c+k:c-k);if(k=this.colorRange){l=k[0];var m=k[1],q=Math.round;c=new a;var v=l.r,B=m.r;k=Math.abs(B-v)*r;c.r=q(v<B?v+k:v-k);v=l.g;B=m.g;k=Math.abs(B-v)*r;c.g=q(v<B?v+k:v-k);v=l.b;B=m.b;k=Math.abs(B-v)*r;c.b=q(v<B?v+k:v-k);l=l.a;m=m.a;k=Math.abs(m-l)*r;c.a=l<m?l+k:l-k;n.setColor(c)}c=n.color;(k=this.alphaRange)&&c&&(l=k[0],m=k[1],
k=Math.abs(m-l)*r,c.a=l<m?l+k:l-k);return n},toJson:function(){var n={};this.sizeRange&&(n.sizeRange=this.sizeRange);this.colorRange&&(n.colorRange=[e.toJsonColor(this.colorRange[0]),e.toJsonColor(this.colorRange[1])]);this.alphaRange&&(n.alphaRange=[Math.round(255*this.alphaRange[0]),Math.round(255*this.alphaRange[1])]);return n}});A.setObject("renderer.TimeRampAger",D,g);return D})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel",
"./Renderer"],function(D,A,a,b,g){D=D(g,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(d,e,f,n){this.observationRenderer=d;this.latestObservationRenderer=e;this.trackRenderer=f;this.observationAger=n},getSymbol:function(d){var e=d.getLayer(),f=this.getObservationRenderer(d),n=f&&f.getSymbol(d),h=this.observationAger;e.timeInfo&&e._map.timeExtent&&f===this.observationRenderer&&h&&n&&(n=h.getAgedSymbol(n,d));return n},getObservationRenderer:function(d){return 0===d.getLayer()._getKind(d)?
this.observationRenderer:this.latestObservationRenderer||this.observationRenderer},toJson:function(){var d={type:"temporal"};d.observationRenderer=this.observationRenderer.toJson();this.latestObservationRenderer&&(d.latestObservationRenderer=this.latestObservationRenderer.toJson());this.trackRenderer&&(d.trackRenderer=this.trackRenderer.toJson());this.observationAger&&(d.observationAger=this.observationAger.toJson());return d}});A.setObject("renderer.TemporalRenderer",D,b);return D})},"esri/renderers/HeatmapRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct ../sniff ../kernel ../lang ../symbols/PictureMarkerSymbol ../Color ./Renderer".split(" "),
function(D,A,a,b,g,d,e,f,n,h){D=D([h],{declaredClass:"esri.renderer.HeatmapRenderer",colors:null,blurRadius:10,maxPixelIntensity:100,minPixelIntensity:0,field:null,fieldOffset:null,colorStops:null,constructor:function(k){if(this._supportsCanvas=window.CanvasRenderingContext2D?!0:!1)"string"==typeof k&&(k=JSON.parse(k)),A.mixin(this,k),this._canvas=null,this.colors||this.colorStops||(this.colorStops=[{ratio:0,color:"rgba(255, 140, 0, 0)"},{ratio:.75,color:"rgba(255, 140, 0, 1)"},{ratio:.9,color:"rgba(255, 0,   0, 1)"}]),
this.gradient=this._generateGradient(this.colorStops||this.colors)},getSymbol:function(k){if(!this._supportsCanvas)return!1;var c=k.attributes.imageData;k=k.attributes.size;if(!k)return null;var l=this._getContext(k[0],k[1]),r=l.getImageData(0,0,k[0],k[1]);window.ArrayBuffer&&c instanceof ArrayBuffer?c=window.Uint8ClampedArray?new Uint8ClampedArray(c):new Uint8Array(c):c.BYTES_PER_ELEMENT&&1!==c.BYTES_PER_ELEMENT&&(c=window.Uint8ClampedArray?new Uint8ClampedArray(c.buffer):new Uint8Array(c.buffer));
if(window.CanvasPixelArray&&r.data instanceof window.CanvasPixelArray)for(var m=r.data,q=m.length;q--;)m[q]=c[q];else r.data.set(c);l.putImageData(r,0,0);return new f(l.canvas.toDataURL(),k[0],k[1])},setColors:function(k){k&&(k instanceof Array||k.colors)&&(this.gradient=this._generateGradient(k.colors||k),this.colors=k);return this},setColorStops:function(k){k&&(k instanceof Array||k.colorStops)&&(this.gradient=this._generateGradient(k.colorStops||k),this.colorStops=k);return this},setMaxPixelIntensity:function(k){this.maxPixelIntensity=
k;return this},setMinPixelIntensity:function(k){this.minPixelIntensity=k;return this},setField:function(k){this.field=k;return this},setFieldOffset:function(k){this.fieldOffset=k;return this},setBlurRadius:function(k){this.blurRadius=k;return this},getStats:function(){},getHistogramData:function(){},toJson:function(){var k=A.mixin(this.inherited(arguments),{type:"heatmap",blurRadius:this.blurRadius,colorStops:this._colorsToStops(this.colorStops||this.colors),maxPixelIntensity:this.maxPixelIntensity,
minPixelIntensity:this.minPixelIntensity,field:this.field});null!=this.fieldOffset&&(k.fieldOffset=this.fieldOffset);a.forEach(k.colorStops,function(c){c.color=n.toJsonColor(c.color)});return e.fixJson(k)},_getContext:function(k,c){this._canvas?(this._canvas.width=k,this._canvas.height=c):this._canvas=this._initCanvas(k,c);return this._canvas.getContext("2d")},_initCanvas:function(k,c){var l=b.create("canvas",{id:"hm_canvas-"+Math.floor(1E3*Math.random()),style:"position: absolute; left: 0px; top: -10000px;"},
null);l.width=k;l.height=c;document.body.appendChild(l);return l},_generateGradient:function(k,c){c||(c=512);for(var l=this._colorsToStops(k),r=this._getContext(1,c||512),m=r.createLinearGradient(0,0,0,c),q=0,v;q<l.length;q++)v=l[q],m.addColorStop(v.ratio,v.color.toCss(!0));r.fillStyle=m;r.fillRect(0,0,1,c);return r.getImageData(0,0,1,c).data},_colorsToStops:function(k){var c=[];if(!k[0])return c;if(null!=k[0].ratio)c=a.map(k,function(B){return{ratio:B.ratio,color:this._toColor(B.color)}},this);else if(null!=
k[0].value){var l=Infinity;c=-Infinity;var r=0,m;for(m=0;m<k.length;m++){var q=k[m].value;q<l&&(l=q);q>c&&(c=q)}r=c-l;this.maxPixelIntensity=c;this.minPixelIntensity=l;c=a.map(k,function(B){var w=B.value;B=this._toColor(B.color);return{value:w,ratio:(w-l)/r,color:B}},this)}else{var v=k.length-1;c=a.map(k,function(B,w){return{color:this._toColor(B),ratio:w/v}},this)}return c},_toColor:function(k){k.toRgba||k.declaredClass||(k=new n(k));return k}});A.setObject("renderer.HeatmapRenderer",D,d);return D})},
"esri/renderers/StretchRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(D,A,a,b,g,d,e,f){var n={TYPE_NONE:"none",TYPE_STANDARDDEVIATION:"standardDeviation",TYPE_HISTOGRAMEQUALIZATION:"histogramEqualization",TYPE_MINMAX:"minMax",TYPE_PERCENTCLIP:"percentClip",TYPE_SIGMOID:"sigmoid"};D=D(null,{declaredClass:"esri.renderer.StretchRenderer",constructor:function(h){h=h||{};this.stretchType=
n.TYPE_NONE;this.dra=!0;this.statistics=[];this.gamma=[];this.computeGamma=this.useGamma=!1;this.sigmoidStrengthLevel=this.numberOfStandardDeviations=this.minPercent=this.maxPercent=this.min=this.max=null;a.mixin(this,h);this.colorRamp=f.fromJson(h.colorRamp)},toJson:function(){var h={type:"rasterStretch",stretchType:this.stretchType,colorRamp:this.colorRamp&&this.colorRamp.toJson(),min:this.min,max:this.max,numberOfStandardDeviations:this.numberOfStandardDeviations,statistics:a.clone(this.statistics),
dra:this.dra,minPercent:this.minPercent,maxPercent:this.maxPercent,useGamma:this.useGamma,gamma:a.clone(this.gamma),computeGamma:this.computeGamma,sigmoidStrengthLevel:this.sigmoidStrengthLevel};return d.fixJson(h)},toRenderingRule:function(h){h=h||{};var k=new e;k.functionName="Stretch";var c=this._convertStretchTypeEnumToIndex(this.stretchType),l={StretchType:c,Statistics:this.statistics,DRA:this.dra,UseGamma:this.useGamma,Gamma:this.gamma,ComputeGamma:this.computeGamma};d.isDefined(this.min)&&
(l.Min=this.min);d.isDefined(this.min)&&(l.Max=this.max);3===c?(l.NumberOfStandardDeviations=this.numberOfStandardDeviations,k.outputPixelType="U8"):6===c?(l.MinPercent=parseFloat(this.minPercent),l.MaxPercent=parseFloat(this.maxPercent),k.outputPixelType="U8"):5===c?k.outputPixelType="U8":9===c&&(l.SigmoidStrengthLevel=this.sigmoidStrengthLevel);k.functionArguments=l;k.variableName="Raster";return this.colorRamp?(c=new e,c.functionArguments=h.convertToColormap?{Colormap:f.convertColorRampToColormap(this.colorRamp,
256)}:{colorRamp:this.colorRamp.toJson()},c.variableName="Raster",c.functionName="Colormap",c.functionArguments.Raster=k,c):k},_convertStretchTypeEnumToIndex:function(h){var k=0;h===n.TYPE_STANDARDDEVIATION?k=3:h===n.TYPE_HISTOGRAMEQUALIZATION?k=4:h===n.TYPE_MINMAX?k=5:h===n.TYPE_PERCENTCLIP?k=6:h===n.TYPE_SIGMOID&&(k=9);return k},_convertStretchTypeIndexToEnum:function(h){var k=n.TYPE_NONE;3===h?k=n.TYPE_STANDARDDEVIATION:4===h?k=n.TYPE_HISTOGRAMEQUALIZATION:5===h?k=n.TYPE_MINMAX:6===h?k=n.TYPE_PERCENTCLIP:
9===h&&(k=n.TYPE_SIGMOID);return k}});a.mixin(D,n);a.setObject("renderer.StretchRenderer",D,g);return D})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,A,a,b,g){var d=D(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,_isTemplate:null,_templateJson:null,constructor:function(e){if(A.isObject(e)){this._isRFTJson(e)&&(this._isTemplate=
!0,this._templateJson=e);var f=0;this.functionName=e.rasterFunction||e.name;this.functionArguments=A.clone(e.rasterFunctionArguments||e.arguments);A.mixin(this,e);if(e=this.functionArguments)if(e.Raster=this._toRasterFunction(e.Raster),e.Raster2=this._toRasterFunction(e.Raster2),e.DEM=this._toRasterFunction(e.DEM),e.FillRaster=this._toRasterFunction(e.FillRaster),e.Rasters&&e.Rasters.length)for(f=0;f<e.Rasters.length;f++)e.Rasters[f]=this._toRasterFunction(e.Rasters[f])}},_isRFTJson:function(e){return e.name&&
e.arguments&&e["function"]&&e.hasOwnProperty("functionType")},_toRasterFunction:function(e){return e&&(e.rasterFunction||e.functionName)?new d(e):e},_rfToJson:function(e){e&&"esri.layers.RasterFunction"===e.declaredClass&&(e=e.toJson());return e},toJson:function(){if(this._isTemplate)return this._templateJson;var e=A.clone(this.functionArguments||this.arguments);if(e&&(e.Raster=this._rfToJson(e.Raster),e.Raster2=this._rfToJson(e.Raster2),e.DEM=this._rfToJson(e.DEM),e.FillRaster=this._rfToJson(e.FillRaster),
e.Rasters&&e.Rasters.length)){var f,n=[];for(f=0;f<e.Rasters.length;f++)n.push(this._rfToJson(e.Rasters[f]));e.Rasters=n}return g.filter({rasterFunction:this.functionName,rasterFunctionArguments:e,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(h){if(null!==h&&void 0!==h)return!0})}});A.setObject("layers.RasterFunction",d,b);return d})},"esri/renderers/colorRampUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/store/Memory ../tasks/AlgorithmicColorRamp ../tasks/MultipartColorRamp ../Color ./colorUtils".split(" "),
function(D,A,a,b,g,d,e){function f(w){if(null==w||"algorithmic"!==w.type&&!w.fromColor)return w;var z=w.declaredClass?new b:D.clone(w);z.fromColor=w.toColor;z.toColor=w.fromColor;z.algorithm=w.algorithm;return z}function n(w){if(null==w)return null;if("multipart"===w.type||w.colorRamps&&0<w.colorRamps.length){var z=w.declaredClass?new g:D.clone(w);z.colorRamps=A.map(w.colorRamps.slice().reverse(),function(x){return f(x)});return z}return f(w)}function h(w,z,x){if(!w)return{id:null,isInverted:!1};
var y=w.name;y&&(w.fromColor||w.colorRamps)&&(w.name=void 0);var u=k(w,z,x);if(u)return y&&(w.name=y),{id:u,isInverted:!1};u=k(w,z,x,!0);y&&(w.name=y);return u?{id:u,isInverted:!0}:y&&(u=k(w,z,x))?{id:u,isInverted:!1}:{id:null,isInverted:!1}}function k(w,z,x,y){if(w){y&&(w=n(w));z=z||q;x=x||v;var u=null;y=w.declaredClass;var t,C;if((t="string"===typeof w?w:w.name)&&A.some(x,function(E){if(E.name===t)return u=E.id,!0})&&u)return u;"esri.tasks.AlgorithmicColorRamp"===y?A.some(z,function(E){if(l(w.fromColor.toRgb(),
E.fromColor)&&l(w.toColor.toRgb(),E.toColor))return u=E.id,!0},this):"esri.tasks.MultipartColorRamp"===y&&A.some(z,function(E){if(w.colorRamps&&E.colorRamps&&w.colorRamps.length===E.colorRamps.length&&(C=w.colorRamps,!A.some(E.colorRamps,function(F,G){if(!l(C[G].fromColor.toRgb(),F.fromColor)||!l(C[G].toColor.toRgb(),F.toColor))return!0},this))){if(u)return!0;u=E.id}},this);return u}}function c(w){var z=new b,x=w.algorithm;z.fromColor=d.toDojoColor(w.fromColor);z.toColor=d.toDojoColor(w.toColor);
x?"esriCIELabAlgorithm"===x?z.algorithm="cie-lab":"esriHSVAlgorithm"===x?z.algorithm="hsv":"esriLabLChAlgorithm"===x&&(z.algorithm="lab-lch"):z.algorithm="hsv";return z}function l(w,z){if(!w||!z)return!1;w=w.slice(0,3);z=z.slice(0,3);return!A.some(w,function(x,y){if(x>z[y]+2||x<z[y]-2)return!0})}function r(w,z,x){w=e.toLAB(w);z=e.toLAB(z);return e.toRGB({l:w.l*(1-x)+x*z.l,a:w.a*(1-x)+x*z.a,b:w.b*(1-x)+x*z.b})}var m={},q=[{id:"none",selected:!0},{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,
190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,
255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,
130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"cividis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,32,77,255],toColor:[0,33,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,33,79,255],toColor:[0,34,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,34,
80,255],toColor:[0,35,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,82,255],toColor:[0,35,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,35,84,255],toColor:[0,36,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,36,85,255],toColor:[0,37,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,37,87,255],toColor:[0,38,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,89,255],
toColor:[0,38,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,38,91,255],toColor:[0,39,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,39,92,255],toColor:[0,40,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,94,255],toColor:[0,40,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,40,96,255],toColor:[0,41,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,41,98,255],toColor:[0,
42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,100,255],toColor:[0,42,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,42,101,255],toColor:[0,43,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,43,103,255],toColor:[0,44,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,44,105,255],toColor:[0,45,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,107,255],toColor:[0,
45,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,45,109,255],toColor:[0,46,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,46,110,255],toColor:[0,47,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,111,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,47,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,47,112,255],toColor:[0,
48,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,48,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,49,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,49,112,255],toColor:[0,50,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,50,112,255],toColor:[0,51,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,51,111,255],toColor:[0,
52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,52,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,52,111,255],toColor:[0,53,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,53,111,255],toColor:[1,54,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,54,111,255],toColor:[6,55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,55,110,255],toColor:[11,
55,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,55,110,255],toColor:[15,56,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[15,56,110,255],toColor:[18,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,57,110,255],toColor:[21,57,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,57,110,255],toColor:[24,58,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,58,110,255],
toColor:[26,59,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,59,109,255],toColor:[29,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,60,109,255],toColor:[31,60,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,60,109,255],toColor:[33,61,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,61,109,255],toColor:[35,62,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,
62,109,255],toColor:[37,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,63,109,255],toColor:[38,63,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,63,109,255],toColor:[40,64,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,64,108,255],toColor:[42,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,65,108,255],toColor:[43,65,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,65,108,255],toColor:[45,66,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,66,108,255],toColor:[46,67,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,67,108,255],toColor:[48,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,68,108,255],toColor:[49,68,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,68,108,255],toColor:[51,69,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,69,108,255],toColor:[52,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,70,108,255],toColor:[53,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,70,108,255],toColor:[55,71,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,71,108,255],toColor:[56,72,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,72,108,255],toColor:[57,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,73,108,255],toColor:[58,73,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,73,108,255],toColor:[60,74,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,74,108,255],toColor:[61,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,75,108,255],toColor:[62,75,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,108,255],toColor:[63,76,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[63,76,108,255],toColor:[64,77,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,77,108,255],toColor:[65,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,78,108,255],toColor:[67,78,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,78,108,255],toColor:[68,79,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,79,108,255],toColor:[69,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,80,108,255],toColor:[70,80,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,80,108,255],toColor:[71,81,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,81,108,255],toColor:[72,82,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,82,108,255],toColor:[73,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,83,108,255],toColor:[74,83,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[74,83,108,255],toColor:[75,84,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,84,108,255],toColor:[76,85,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,85,108,255],toColor:[77,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,86,108,255],toColor:[78,86,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,86,108,255],toColor:[79,87,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[79,87,108,255],toColor:[80,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,88,108,255],toColor:[81,88,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,88,109,255],toColor:[82,89,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,89,109,255],toColor:[83,90,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,90,109,255],toColor:[84,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,91,109,255],toColor:[85,91,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,91,109,255],toColor:[86,92,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,92,109,255],toColor:[87,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,93,109,255],toColor:[88,93,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,93,109,255],toColor:[89,94,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[89,94,110,255],toColor:[90,95,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[90,95,110,255],toColor:[91,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,96,110,255],toColor:[92,96,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,96,110,255],toColor:[93,97,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,97,110,255],toColor:[94,98,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[94,98,110,255],toColor:[94,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,99,111,255],toColor:[95,99,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,99,111,255],toColor:[96,100,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,100,111,255],toColor:[97,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,101,111,255],toColor:[98,101,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[98,101,111,255],toColor:[99,102,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,102,112,255],toColor:[100,103,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[100,103,112,255],toColor:[101,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,104,112,255],toColor:[102,104,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,104,112,255],toColor:[103,105,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[103,105,113,255],toColor:[104,106,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,106,113,255],toColor:[104,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,107,113,255],toColor:[105,107,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,107,113,255],toColor:[106,108,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,108,114,255],toColor:[107,109,114,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[107,109,114,255],toColor:[108,109,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,109,114,255],toColor:[109,110,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,110,115,255],toColor:[110,111,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,111,115,255],toColor:[111,112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[111,
112,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,112,115,255],toColor:[112,113,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,113,116,255],toColor:[113,114,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,114,116,255],toColor:[114,115,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,115,116,255],toColor:[115,115,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,
115,117,255],toColor:[116,116,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,116,117,255],toColor:[117,117,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,117,117,255],toColor:[117,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,118,118,255],toColor:[118,118,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,118,118,255],toColor:[119,119,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[119,119,119,255],toColor:[120,120,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,120,119,255],toColor:[121,121,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,121,119,255],toColor:[122,121,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,121,120,255],toColor:[123,122,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,122,120,255],toColor:[124,123,120,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[124,123,120,255],toColor:[124,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,124,121,255],toColor:[125,124,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,124,121,255],toColor:[126,125,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,125,121,255],toColor:[127,126,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,126,121,255],toColor:[128,
127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,127,121,255],toColor:[129,127,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,127,121,255],toColor:[130,128,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,128,121,255],toColor:[131,129,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,129,121,255],toColor:[132,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,
130,121,255],toColor:[133,130,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,130,121,255],toColor:[134,131,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,131,121,255],toColor:[135,132,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,132,121,255],toColor:[136,133,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,133,121,255],toColor:[137,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[137,134,121,255],toColor:[138,134,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,134,121,255],toColor:[139,135,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[139,135,121,255],toColor:[140,136,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,136,121,255],toColor:[141,137,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,137,121,255],toColor:[142,137,121,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[142,137,121,255],toColor:[143,138,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,138,121,255],toColor:[144,139,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,139,121,255],toColor:[145,140,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,140,121,255],toColor:[146,141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,141,121,255],toColor:[147,
141,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,141,121,255],toColor:[148,142,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,142,121,255],toColor:[149,143,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,143,121,255],toColor:[150,144,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,144,121,255],toColor:[151,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,
145,120,255],toColor:[152,145,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,145,120,255],toColor:[153,146,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,146,120,255],toColor:[154,147,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,147,120,255],toColor:[155,148,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,148,120,255],toColor:[156,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[156,149,120,255],toColor:[157,149,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,149,120,255],toColor:[158,150,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,150,120,255],toColor:[159,151,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,151,119,255],toColor:[160,152,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,152,119,255],toColor:[161,153,119,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[161,153,119,255],toColor:[162,153,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,153,119,255],toColor:[163,154,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[163,154,119,255],toColor:[164,155,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,155,118,255],toColor:[165,156,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,156,118,255],toColor:[166,
157,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,157,118,255],toColor:[167,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,158,118,255],toColor:[168,158,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,158,118,255],toColor:[169,159,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,159,117,255],toColor:[170,160,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,
160,117,255],toColor:[171,161,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,161,117,255],toColor:[172,162,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[172,162,117,255],toColor:[173,162,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,162,116,255],toColor:[174,163,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,163,116,255],toColor:[175,164,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,164,116,255],toColor:[177,165,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,165,115,255],toColor:[178,166,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,166,115,255],toColor:[179,167,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,167,115,255],toColor:[180,168,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,168,115,255],toColor:[181,168,114,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[181,168,114,255],toColor:[182,169,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,169,114,255],toColor:[183,170,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,170,114,255],toColor:[184,171,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,171,113,255],toColor:[185,172,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,172,113,255],toColor:[186,
173,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[186,173,113,255],toColor:[187,173,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,173,112,255],toColor:[188,174,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,174,112,255],toColor:[189,175,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,175,111,255],toColor:[190,176,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,
176,111,255],toColor:[191,177,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,177,111,255],toColor:[192,178,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,178,110,255],toColor:[194,179,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,179,110,255],toColor:[195,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,180,109,255],toColor:[196,180,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[196,180,109,255],toColor:[197,181,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,181,109,255],toColor:[198,182,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,182,108,255],toColor:[199,183,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,183,108,255],toColor:[200,184,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,184,107,255],toColor:[201,185,107,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[201,185,107,255],toColor:[202,186,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,186,106,255],toColor:[203,187,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,187,106,255],toColor:[204,187,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,187,105,255],toColor:[205,188,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,188,105,255],toColor:[207,
189,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,189,104,255],toColor:[208,190,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,190,104,255],toColor:[209,191,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,191,103,255],toColor:[210,192,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,192,103,255],toColor:[211,193,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,
193,102,255],toColor:[212,194,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,194,101,255],toColor:[213,195,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,195,101,255],toColor:[214,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,196,100,255],toColor:[215,196,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,196,100,255],toColor:[217,197,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[217,197,99,255],toColor:[218,198,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,198,98,255],toColor:[219,199,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,199,98,255],toColor:[220,200,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,200,97,255],toColor:[221,201,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,201,96,255],toColor:[222,202,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[222,202,96,255],toColor:[223,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,203,95,255],toColor:[224,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,204,94,255],toColor:[226,205,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,205,94,255],toColor:[227,206,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,206,93,255],toColor:[228,207,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[228,207,92,255],toColor:[229,208,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,208,91,255],toColor:[230,209,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,209,91,255],toColor:[231,209,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,209,90,255],toColor:[233,210,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,210,89,255],toColor:[234,211,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[234,211,88,255],toColor:[235,212,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,212,87,255],toColor:[236,213,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,213,86,255],toColor:[237,214,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,214,86,255],toColor:[238,215,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,215,85,255],toColor:[239,216,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[239,216,84,255],toColor:[241,217,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,217,83,255],toColor:[242,218,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,218,82,255],toColor:[243,219,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,219,81,255],toColor:[244,220,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,220,80,255],toColor:[245,221,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[245,221,79,255],toColor:[246,222,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,222,78,255],toColor:[248,223,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,223,77,255],toColor:[249,224,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,224,75,255],toColor:[250,225,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,225,74,255],toColor:[251,226,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,226,73,255],toColor:[252,227,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,227,72,255],toColor:[254,228,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,228,71,255],toColor:[255,229,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,229,69,255],toColor:[255,230,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,230,68,255],toColor:[255,231,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,231,67,255],toColor:[255,232,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,232,66,255],toColor:[255,233,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,233,67,255],toColor:[255,234,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,234,69,255],toColor:[255,235,70,255]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,
117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,
131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",
colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",
fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"inferno_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,
1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,14,255],toColor:[3,2,16,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[3,2,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,3,21,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,21,255],toColor:[5,4,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,23,255],toColor:[6,4,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,4,25,255],toColor:[7,5,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[7,5,27,255],toColor:[8,6,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,6,29,255],toColor:[9,6,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,6,32,255],toColor:[10,7,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,7,34,255],toColor:[11,7,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,7,36,255],toColor:[12,8,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,
8,38,255],toColor:[13,8,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,8,41,255],toColor:[14,9,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,9,43,255],toColor:[16,9,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,9,45,255],toColor:[17,10,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,10,48,255],toColor:[18,10,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,10,
50,255],toColor:[20,11,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,11,53,255],toColor:[21,11,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,11,55,255],toColor:[22,11,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,11,58,255],toColor:[24,12,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,12,60,255],toColor:[25,12,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,
12,62,255],toColor:[27,12,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[27,12,65,255],toColor:[28,12,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,12,67,255],toColor:[30,12,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,12,70,255],toColor:[31,12,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,12,72,255],toColor:[33,12,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,
12,74,255],toColor:[35,12,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,12,77,255],toColor:[36,12,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,12,79,255],toColor:[38,12,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,12,81,255],toColor:[40,11,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,11,83,255],toColor:[42,11,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,
11,85,255],toColor:[43,11,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,11,87,255],toColor:[45,11,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,11,89,255],toColor:[47,10,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,10,91,255],toColor:[49,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,10,93,255],toColor:[51,10,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,
10,94,255],toColor:[52,10,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,10,96,255],toColor:[54,9,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,9,97,255],toColor:[56,9,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,9,98,255],toColor:[58,9,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,9,99,255],toColor:[59,9,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,9,
100,255],toColor:[61,9,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,9,101,255],toColor:[63,9,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,9,102,255],toColor:[64,10,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,10,103,255],toColor:[66,10,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,10,104,255],toColor:[68,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,
10,105,255],toColor:[69,10,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,10,105,255],toColor:[71,11,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,106,255],toColor:[73,11,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,11,107,255],toColor:[74,12,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,12,107,255],toColor:[76,12,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,12,108,255],toColor:[78,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,13,108,255],toColor:[79,13,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,13,108,255],toColor:[81,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,14,109,255],toColor:[83,14,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,14,109,255],toColor:[84,15,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,15,109,255],toColor:[86,15,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,15,110,255],toColor:[87,16,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,16,110,255],toColor:[89,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,17,110,255],toColor:[91,17,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,17,110,255],toColor:[92,18,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[92,18,110,255],toColor:[94,18,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,18,111,255],toColor:[95,19,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,19,111,255],toColor:[97,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,20,111,255],toColor:[99,20,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,20,111,255],toColor:[100,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,21,111,255],toColor:[102,21,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,21,111,255],toColor:[103,22,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,22,111,255],toColor:[105,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,23,111,255],toColor:[107,23,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,23,111,255],toColor:[108,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,24,111,255],toColor:[110,24,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,24,111,255],toColor:[111,25,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,25,111,255],toColor:[113,25,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[113,25,110,255],toColor:[115,26,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,26,110,255],toColor:[116,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,27,110,255],toColor:[118,27,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,27,110,255],toColor:[119,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,28,110,255],toColor:[121,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[121,28,110,255],toColor:[123,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[123,29,109,255],toColor:[124,29,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[124,29,109,255],toColor:[126,30,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[126,30,109,255],toColor:[127,31,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,31,109,255],toColor:[129,31,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[129,31,108,255],toColor:[130,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,32,108,255],toColor:[132,32,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[132,32,108,255],toColor:[134,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,33,107,255],toColor:[135,33,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,33,107,255],toColor:[137,34,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,34,107,255],toColor:[138,34,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,34,106,255],toColor:[140,35,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[140,35,106,255],toColor:[142,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,36,105,255],toColor:[143,36,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[143,36,105,255],toColor:[145,37,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,37,105,255],toColor:[146,37,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,37,104,255],toColor:[148,38,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[148,38,104,255],toColor:[150,38,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[150,38,103,255],toColor:[151,39,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,39,102,255],toColor:[153,40,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,40,102,255],toColor:[154,40,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,40,101,255],toColor:[156,41,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[156,41,101,255],toColor:[158,41,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,41,100,255],toColor:[159,42,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,42,100,255],toColor:[161,43,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[161,43,99,255],toColor:[162,43,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,43,98,255],toColor:[164,44,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[164,44,98,255],toColor:[165,45,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,45,97,255],toColor:[167,45,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,45,96,255],toColor:[169,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,46,95,255],toColor:[170,46,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,46,95,255],toColor:[172,47,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,47,94,255],toColor:[173,48,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,48,93,255],toColor:[175,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,49,92,255],toColor:[176,49,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,49,92,255],toColor:[178,50,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,50,91,255],toColor:[179,51,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[179,51,90,255],toColor:[181,51,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[181,51,89,255],toColor:[182,52,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,52,88,255],toColor:[184,53,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,53,87,255],toColor:[185,54,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,54,86,255],toColor:[187,54,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[187,54,85,255],toColor:[188,55,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,55,85,255],toColor:[190,56,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,56,84,255],toColor:[191,57,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,57,83,255],toColor:[193,58,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,82,255],toColor:[194,59,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[194,59,81,255],toColor:[196,60,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,60,80,255],toColor:[197,60,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[197,60,79,255],toColor:[198,61,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,61,78,255],toColor:[200,62,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,62,77,255],toColor:[201,63,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[201,63,76,255],toColor:[203,64,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,64,75,255],toColor:[204,65,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,65,74,255],toColor:[205,66,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,66,72,255],toColor:[207,67,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,67,71,255],toColor:[208,68,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[208,68,70,255],toColor:[209,69,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,69,69,255],toColor:[211,70,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,70,68,255],toColor:[212,72,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,72,67,255],toColor:[213,73,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,73,66,255],toColor:[214,74,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[214,74,65,255],toColor:[216,75,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,75,64,255],toColor:[217,76,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,76,62,255],toColor:[218,77,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,77,61,255],toColor:[219,79,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,79,60,255],toColor:[220,80,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[220,80,59,255],toColor:[221,81,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,81,58,255],toColor:[223,82,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,82,57,255],toColor:[224,84,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,84,56,255],toColor:[225,85,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,85,54,255],toColor:[226,86,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[226,86,53,255],toColor:[227,88,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,88,52,255],toColor:[228,89,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,89,51,255],toColor:[229,90,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,90,50,255],toColor:[230,92,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,92,48,255],toColor:[231,93,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[231,93,47,255],toColor:[232,95,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,95,46,255],toColor:[233,96,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,96,45,255],toColor:[234,98,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,98,43,255],toColor:[235,99,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,99,42,255],toColor:[235,101,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[235,101,41,255],toColor:[236,102,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,102,40,255],toColor:[237,104,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,104,38,255],toColor:[238,105,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,105,37,255],toColor:[239,107,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,107,36,255],toColor:[240,109,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[240,109,35,255],toColor:[240,110,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,110,33,255],toColor:[241,112,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,112,32,255],toColor:[242,113,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,113,31,255],toColor:[242,115,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,115,30,255],toColor:[243,117,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[243,117,28,255],toColor:[244,118,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,118,27,255],toColor:[244,120,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,120,26,255],toColor:[245,122,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,122,24,255],toColor:[246,123,23,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,123,23,255],toColor:[246,125,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,125,22,255],toColor:[247,127,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,127,20,255],toColor:[247,129,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,129,19,255],toColor:[248,130,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,130,18,255],toColor:[248,132,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,132,16,255],toColor:[249,134,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,134,15,255],toColor:[249,136,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,136,14,255],toColor:[249,137,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,137,12,255],toColor:[250,139,11,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,139,11,255],toColor:[250,141,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,141,10,255],toColor:[250,143,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,143,9,255],toColor:[251,145,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,145,8,255],toColor:[251,146,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,146,7,255],toColor:[251,148,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,148,7,255],toColor:[252,150,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,150,6,255],toColor:[252,152,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,152,6,255],toColor:[252,154,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,154,6,255],toColor:[252,156,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,156,6,255],toColor:[252,158,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,158,7,255],toColor:[253,160,7,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,160,7,255],toColor:[253,161,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,161,8,255],toColor:[253,163,9,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,163,9,255],toColor:[253,165,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,165,10,255],toColor:[253,167,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,12,255],toColor:[253,169,13,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,169,13,255],toColor:[253,171,15,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,171,15,255],toColor:[253,173,17,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,173,17,255],toColor:[253,175,19,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,175,19,255],toColor:[253,177,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,177,20,255],toColor:[253,179,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,179,22,255],toColor:[253,181,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,181,25,255],toColor:[252,183,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,183,27,255],toColor:[252,185,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,185,29,255],toColor:[252,186,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,186,31,255],toColor:[252,188,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,188,33,255],toColor:[252,190,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,190,35,255],toColor:[251,192,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,192,38,255],toColor:[251,194,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,194,40,255],toColor:[251,196,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,196,43,255],toColor:[251,198,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,198,45,255],toColor:[250,200,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,200,48,255],toColor:[250,202,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,202,50,255],toColor:[250,204,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,204,53,255],toColor:[249,206,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,206,56,255],toColor:[249,208,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,208,58,255],toColor:[248,210,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,210,61,255],toColor:[248,212,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,212,64,255],toColor:[247,214,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,214,67,255],toColor:[247,216,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,216,70,255],toColor:[246,218,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,218,73,255],toColor:[246,220,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,220,76,255],toColor:[245,222,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,222,80,255],toColor:[245,224,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,224,83,255],toColor:[244,226,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,226,86,255],toColor:[244,228,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,228,90,255],toColor:[244,229,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,229,94,255],toColor:[243,231,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,231,97,255],toColor:[243,233,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,233,101,255],toColor:[243,235,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,235,105,255],toColor:[242,237,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,237,109,255],toColor:[242,238,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,238,113,255],toColor:[242,240,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,240,117,255],toColor:[242,242,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,242,122,255],toColor:[243,243,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,126,255],toColor:[243,245,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,245,130,255],toColor:[244,246,134,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[244,246,134,255],toColor:[244,247,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,247,138,255],toColor:[245,249,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,249,142,255],toColor:[246,250,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,250,146,255],toColor:[247,251,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,251,150,255],toColor:[249,
252,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,252,154,255],toColor:[250,253,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,253,158,255],toColor:[251,254,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,254,162,255],toColor:[253,255,165,255]}]},{id:"magma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[0,0,4,255],toColor:[1,0,5,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[1,0,5,255],toColor:[1,1,6,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,6,255],toColor:[1,1,8,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[1,1,8,255],toColor:[2,1,10,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,1,10,255],toColor:[2,2,12,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[2,2,12,255],toColor:[2,2,14,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[2,2,14,255],toColor:[3,3,16,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[3,3,16,255],toColor:[4,3,18,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,3,18,255],toColor:[4,4,20,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[4,4,20,255],toColor:[5,4,22,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[5,4,22,255],toColor:[6,5,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,24,
255],toColor:[6,5,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[6,5,26,255],toColor:[7,6,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[7,6,28,255],toColor:[8,7,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[8,7,30,255],toColor:[9,7,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[9,7,32,255],toColor:[10,8,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[10,8,34,255],toColor:[11,
9,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[11,9,36,255],toColor:[12,9,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[12,9,38,255],toColor:[13,10,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[13,10,41,255],toColor:[14,11,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[14,11,43,255],toColor:[16,11,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,11,45,255],toColor:[17,
12,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[17,12,47,255],toColor:[18,13,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[18,13,50,255],toColor:[19,13,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,13,52,255],toColor:[20,14,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[20,14,54,255],toColor:[21,14,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[21,14,57,255],toColor:[23,
15,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[23,15,59,255],toColor:[24,15,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[24,15,61,255],toColor:[25,16,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,16,64,255],toColor:[26,16,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[26,16,66,255],toColor:[28,16,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[28,16,68,255],toColor:[29,
17,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,17,71,255],toColor:[30,17,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[30,17,73,255],toColor:[32,17,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,17,76,255],toColor:[33,17,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,17,78,255],toColor:[35,18,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,18,81,255],toColor:[36,
18,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,18,83,255],toColor:[38,18,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,18,86,255],toColor:[39,18,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,18,88,255],toColor:[41,18,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,18,90,255],toColor:[42,17,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,17,93,255],toColor:[44,
17,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,17,95,255],toColor:[46,17,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,17,97,255],toColor:[47,17,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,17,99,255],toColor:[49,17,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,17,101,255],toColor:[51,16,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,16,103,255],toColor:[52,
16,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,16,105,255],toColor:[54,16,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,16,107,255],toColor:[56,16,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,16,109,255],toColor:[58,15,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,15,111,255],toColor:[59,15,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,15,112,255],
toColor:[61,15,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,15,113,255],toColor:[63,15,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,15,115,255],toColor:[65,15,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,15,116,255],toColor:[66,15,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,15,117,255],toColor:[68,15,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,
15,118,255],toColor:[70,16,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,16,119,255],toColor:[71,16,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,120,255],toColor:[73,16,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,16,121,255],toColor:[75,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,17,122,255],toColor:[76,17,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[76,17,122,255],toColor:[78,17,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,17,123,255],toColor:[79,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[79,18,124,255],toColor:[81,18,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[81,18,124,255],toColor:[83,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,19,125,255],toColor:[84,19,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[84,19,125,255],toColor:[86,20,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,20,126,255],toColor:[87,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[87,21,126,255],toColor:[89,21,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[89,21,126,255],toColor:[91,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,22,127,255],toColor:[92,22,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[92,22,127,255],toColor:[94,23,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,23,127,255],toColor:[95,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,24,128,255],toColor:[97,24,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,24,128,255],toColor:[98,25,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[98,25,128,255],toColor:[100,26,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[100,26,128,255],toColor:[101,26,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,26,129,255],toColor:[103,27,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,27,129,255],toColor:[105,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[105,28,129,255],toColor:[106,28,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,28,129,255],toColor:[108,29,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[108,29,129,255],toColor:[109,30,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[109,30,129,255],toColor:[111,30,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[111,30,130,255],toColor:[112,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,31,130,255],toColor:[114,31,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[114,31,130,255],toColor:[116,32,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[116,32,130,255],toColor:[117,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,33,130,255],toColor:[119,33,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,33,130,255],toColor:[120,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,34,130,255],toColor:[122,34,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,34,130,255],toColor:[123,35,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[123,35,130,255],toColor:[125,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,36,130,255],toColor:[127,36,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,36,130,255],toColor:[128,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[128,37,130,255],toColor:[130,37,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,37,130,255],toColor:[131,38,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[131,38,130,255],toColor:[133,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,39,130,255],toColor:[134,39,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,39,130,255],toColor:[136,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[136,40,130,255],toColor:[138,40,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,40,130,255],toColor:[139,41,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[139,41,130,255],toColor:[141,41,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,41,129,255],toColor:[142,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,42,129,255],toColor:[144,42,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,42,129,255],toColor:[146,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[146,43,129,255],toColor:[147,43,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[147,43,129,255],toColor:[149,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[149,44,129,255],toColor:[151,44,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,44,129,255],toColor:[152,45,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,45,128,255],toColor:[154,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,46,128,255],toColor:[155,46,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[155,46,128,255],toColor:[157,47,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[157,47,128,255],toColor:[159,47,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,47,127,255],toColor:[160,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,48,127,255],toColor:[162,48,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,48,127,255],toColor:[164,49,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[164,49,127,255],toColor:[165,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,49,126,255],toColor:[167,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,50,126,255],toColor:[169,50,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[169,50,126,255],toColor:[170,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,51,125,255],toColor:[172,51,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[172,51,125,255],toColor:[174,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,52,124,255],toColor:[175,52,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[175,52,124,255],toColor:[177,53,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,53,124,255],toColor:[178,53,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[178,53,123,255],toColor:[180,54,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[180,54,123,255],toColor:[182,54,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,54,122,255],toColor:[183,55,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,55,122,255],toColor:[185,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,56,121,255],toColor:[187,56,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,56,121,255],toColor:[188,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[188,57,120,255],toColor:[190,57,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[190,57,120,255],toColor:[192,58,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,58,119,255],toColor:[193,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,59,118,255],toColor:[195,59,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,59,118,255],toColor:[196,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[196,60,117,255],toColor:[198,60,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,60,117,255],toColor:[200,61,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,61,116,255],toColor:[201,62,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,62,115,255],toColor:[203,63,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,63,115,255],toColor:[204,63,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[204,63,114,255],toColor:[206,64,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,64,113,255],toColor:[208,65,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,65,112,255],toColor:[209,66,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,66,112,255],toColor:[211,66,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,66,111,255],toColor:[212,67,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[212,67,110,255],toColor:[214,68,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,68,109,255],toColor:[215,69,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[215,69,109,255],toColor:[217,70,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,70,108,255],toColor:[218,71,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,71,107,255],toColor:[220,72,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[220,72,106,255],toColor:[221,73,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,73,106,255],toColor:[222,74,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,74,105,255],toColor:[224,75,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,75,104,255],toColor:[225,76,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,76,103,255],toColor:[226,77,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[226,77,102,255],toColor:[228,78,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,78,102,255],toColor:[229,79,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,79,101,255],toColor:[230,81,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,81,100,255],toColor:[231,82,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[231,82,99,255],toColor:[233,83,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[233,83,99,255],toColor:[234,84,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,84,98,255],toColor:[235,86,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,86,97,255],toColor:[236,87,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,87,97,255],toColor:[237,89,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,89,96,255],toColor:[238,90,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[238,90,95,255],toColor:[239,92,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,92,95,255],toColor:[240,93,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,93,94,255],toColor:[241,95,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,95,94,255],toColor:[242,97,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,97,93,255],toColor:[242,98,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,98,93,255],toColor:[243,100,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,100,93,255],toColor:[244,102,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,102,93,255],toColor:[245,104,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,104,92,255],toColor:[245,105,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,105,92,255],toColor:[246,107,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,107,92,255],toColor:[247,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,109,92,255],toColor:[247,111,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,111,92,255],toColor:[248,113,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,113,92,255],toColor:[248,114,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,114,92,255],toColor:[249,116,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,116,92,255],toColor:[249,118,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,118,93,255],toColor:[250,120,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,120,93,255],toColor:[250,122,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,122,93,255],toColor:[250,124,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,124,94,255],toColor:[251,126,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[251,126,94,255],toColor:[251,128,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,128,95,255],toColor:[251,130,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,130,95,255],toColor:[252,131,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,131,96,255],toColor:[252,133,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,133,96,255],toColor:[252,135,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,135,97,255],toColor:[253,137,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,137,98,255],toColor:[253,139,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,139,99,255],toColor:[253,141,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,141,99,255],toColor:[253,143,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,143,100,255],toColor:[253,145,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,145,101,255],toColor:[254,147,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,147,102,255],toColor:[254,149,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,149,103,255],toColor:[254,150,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,150,104,255],toColor:[254,152,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,152,105,255],toColor:[254,154,106,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,154,106,255],toColor:[254,156,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,156,107,255],toColor:[255,158,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,158,108,255],toColor:[255,160,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,160,109,255],toColor:[255,162,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,162,111,255],toColor:[255,
164,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,164,112,255],toColor:[255,165,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,165,113,255],toColor:[255,167,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,167,114,255],toColor:[255,169,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,169,116,255],toColor:[255,171,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
171,117,255],toColor:[255,173,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,173,118,255],toColor:[255,175,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,175,119,255],toColor:[255,177,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,177,121,255],toColor:[255,179,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,179,122,255],toColor:[255,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,180,124,255],toColor:[255,182,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,182,125,255],toColor:[255,184,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,184,126,255],toColor:[255,186,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,186,128,255],toColor:[255,188,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,129,255],toColor:[255,190,131,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[255,190,131,255],toColor:[255,191,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,191,132,255],toColor:[255,193,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,134,255],toColor:[255,195,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,195,135,255],toColor:[255,197,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,197,137,255],toColor:[255,
199,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,199,139,255],toColor:[255,201,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,201,140,255],toColor:[255,203,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,203,142,255],toColor:[255,204,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,204,143,255],toColor:[255,206,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,
206,145,255],toColor:[255,208,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,208,147,255],toColor:[255,210,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,210,148,255],toColor:[255,212,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,212,150,255],toColor:[255,214,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,214,152,255],toColor:[255,215,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,215,153,255],toColor:[255,217,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,217,155,255],toColor:[254,219,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,219,157,255],toColor:[254,221,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,221,159,255],toColor:[254,223,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,223,160,255],toColor:[254,225,162,255]},{type:"algorithmic",
algorithm:"esriCIELabAlgorithm",fromColor:[254,225,162,255],toColor:[254,226,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,226,164,255],toColor:[254,228,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,228,166,255],toColor:[254,230,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,230,167,255],toColor:[254,232,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,232,169,255],toColor:[254,
234,171,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,234,171,255],toColor:[254,236,173,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,236,173,255],toColor:[253,237,175,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,237,175,255],toColor:[253,239,177,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,239,177,255],toColor:[253,241,179,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,
241,179,255],toColor:[253,243,180,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,243,180,255],toColor:[253,245,182,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,245,182,255],toColor:[253,247,184,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,247,184,255],toColor:[253,248,186,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,248,186,255],toColor:[253,250,188,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,250,188,255],toColor:[253,252,190,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,252,190,255],toColor:[253,254,192,255]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,
7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,
63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"plasma_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[13,8,135,255],toColor:[16,7,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[16,7,136,255],toColor:[19,7,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[19,7,138,255],toColor:[22,7,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[22,7,139,255],toColor:[25,6,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[25,6,140,255],toColor:[27,6,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[27,6,141,255],toColor:[29,6,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[29,6,142,255],toColor:[32,6,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,6,143,255],toColor:[34,6,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,6,144,255],toColor:[36,6,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,6,145,255],toColor:[38,5,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[38,5,146,255],toColor:[40,5,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,5,147,255],toColor:[42,5,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,5,148,255],toColor:[44,5,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,5,149,255],toColor:[46,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,5,150,255],toColor:[48,5,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[48,5,150,255],toColor:[50,5,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,5,151,255],toColor:[51,5,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,5,152,255],toColor:[53,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,4,153,255],toColor:[55,4,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,4,153,255],toColor:[57,4,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[57,4,154,255],toColor:[58,4,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,4,155,255],toColor:[60,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,4,156,255],toColor:[62,4,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,4,156,255],toColor:[64,4,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,4,157,255],toColor:[65,4,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,4,158,255],toColor:[67,3,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,3,158,255],toColor:[69,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,3,159,255],toColor:[70,3,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,3,159,255],toColor:[72,3,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,3,160,255],toColor:[73,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[73,3,161,255],toColor:[75,3,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[75,3,161,255],toColor:[77,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[77,2,162,255],toColor:[78,2,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,2,162,255],toColor:[80,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[80,2,163,255],toColor:[82,2,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[82,2,163,255],toColor:[83,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[83,2,164,255],toColor:[85,2,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[85,2,164,255],toColor:[86,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,1,165,255],toColor:[88,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,1,165,255],toColor:[90,1,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[90,1,165,255],toColor:[91,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[91,1,166,255],toColor:[93,1,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[93,1,166,255],toColor:[94,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[94,1,167,255],toColor:[96,1,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[96,1,167,255],toColor:[98,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[98,0,167,255],toColor:[99,0,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,0,167,255],toColor:[101,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[101,0,168,255],toColor:[102,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[102,0,168,255],toColor:[104,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[104,0,168,255],toColor:[105,0,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[105,0,168,255],toColor:[107,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[107,0,169,255],toColor:[108,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,0,169,255],toColor:[110,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,0,169,255],toColor:[112,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[112,0,169,255],toColor:[113,0,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[113,0,169,255],toColor:[115,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,1,169,255],toColor:[116,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[116,1,169,255],toColor:[118,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[118,1,169,255],toColor:[119,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[119,1,169,255],toColor:[121,1,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[121,1,169,255],toColor:[122,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,2,169,255],toColor:[124,2,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[124,2,169,255],toColor:[125,3,169,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[125,3,169,255],toColor:[127,3,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,3,168,255],toColor:[128,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[128,4,168,255],toColor:[130,4,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,4,168,255],toColor:[131,5,168,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[131,5,168,255],toColor:[133,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[133,6,167,255],toColor:[134,6,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[134,6,167,255],toColor:[136,7,167,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[136,7,167,255],toColor:[137,8,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[137,8,166,255],toColor:[138,9,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[138,9,166,255],toColor:[140,10,166,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,10,166,255],toColor:[141,11,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[141,11,165,255],toColor:[143,12,165,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[143,12,165,255],toColor:[144,13,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[144,13,164,255],toColor:[145,14,164,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,14,164,255],toColor:[147,15,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,15,163,255],toColor:[148,16,163,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[148,16,163,255],toColor:[150,18,162,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[150,18,162,255],toColor:[151,19,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[151,19,161,255],toColor:[152,20,161,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[152,20,161,255],toColor:[154,21,160,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[154,21,160,255],toColor:[155,22,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,22,159,255],toColor:[156,23,159,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[156,23,159,255],toColor:[158,24,158,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,24,158,255],toColor:[159,25,157,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[159,25,157,255],toColor:[160,26,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,26,156,255],toColor:[162,28,156,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[162,28,156,255],toColor:[163,29,155,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[163,29,155,255],toColor:[164,30,154,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[164,30,154,255],toColor:[165,31,153,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[165,31,153,255],toColor:[167,32,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[167,32,152,255],toColor:[168,33,152,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,33,152,255],toColor:[169,34,151,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[169,34,151,255],toColor:[170,35,150,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[170,35,150,255],toColor:[171,37,149,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,37,149,255],toColor:[173,38,148,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[173,38,148,255],toColor:[174,39,147,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,39,147,255],toColor:[175,40,146,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[175,40,146,255],toColor:[176,41,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[176,41,145,255],toColor:[177,42,145,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[177,42,145,255],toColor:[179,43,144,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,43,144,255],toColor:[180,45,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[180,45,143,255],toColor:[181,46,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[181,46,142,255],toColor:[182,47,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,47,141,255],toColor:[183,48,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[183,48,140,255],toColor:[184,49,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,49,139,255],toColor:[185,50,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[185,50,138,255],toColor:[186,51,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[186,51,137,255],toColor:[187,52,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,52,136,255],toColor:[188,54,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[188,54,135,255],toColor:[189,55,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[189,55,134,255],toColor:[191,56,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[191,56,133,255],toColor:[192,57,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[192,57,132,255],toColor:[193,58,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[193,58,131,255],toColor:[194,59,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[194,59,130,255],toColor:[195,60,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,60,129,255],toColor:[196,62,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[196,62,129,255],toColor:[197,63,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[197,63,128,255],toColor:[198,64,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,64,127,255],toColor:[199,65,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[199,65,126,255],toColor:[200,66,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[200,66,125,255],toColor:[201,67,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,67,124,255],toColor:[202,68,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[202,68,123,255],toColor:[202,69,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[202,69,122,255],toColor:[203,71,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[203,71,121,255],toColor:[204,72,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[204,72,120,255],toColor:[205,73,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[205,73,119,255],toColor:[206,74,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[206,74,118,255],toColor:[207,75,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[207,75,117,255],toColor:[208,76,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[208,76,117,255],toColor:[209,77,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,77,116,255],toColor:[210,79,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[210,79,115,255],toColor:[211,80,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[211,80,114,255],toColor:[212,81,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,81,113,255],toColor:[212,82,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[212,82,112,255],toColor:[213,83,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[213,83,111,255],toColor:[214,84,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,84,110,255],toColor:[215,85,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[215,85,109,255],toColor:[216,87,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[216,87,109,255],toColor:[217,88,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[217,88,108,255],toColor:[218,89,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,89,107,255],toColor:[218,90,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[218,90,106,255],toColor:[219,91,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[219,91,105,255],toColor:[220,92,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[220,92,104,255],toColor:[221,93,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[221,93,103,255],toColor:[222,95,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,95,102,255],toColor:[223,96,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[223,96,102,255],toColor:[223,97,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[223,97,101,255],toColor:[224,98,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,98,100,255],toColor:[225,99,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[225,99,99,255],toColor:[226,100,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,100,98,255],toColor:[226,102,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[226,102,97,255],toColor:[227,103,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[227,103,96,255],toColor:[228,104,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[228,104,96,255],toColor:[229,105,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,105,95,255],toColor:[229,106,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[229,106,94,255],toColor:[230,108,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[230,108,93,255],toColor:[231,109,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[231,109,92,255],toColor:[232,110,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,110,91,255],toColor:[232,111,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,111,90,255],toColor:[233,112,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[233,112,90,255],toColor:[234,114,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[234,114,89,255],toColor:[234,115,88,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[234,115,88,255],toColor:[235,116,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,116,87,255],toColor:[236,117,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,117,86,255],toColor:[236,119,85,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[236,119,85,255],toColor:[237,120,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,120,84,255],toColor:[238,121,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[238,121,83,255],toColor:[238,122,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[238,122,83,255],toColor:[239,124,82,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[239,124,82,255],toColor:[240,125,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,125,81,255],toColor:[240,126,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,126,80,255],toColor:[241,127,79,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[241,127,79,255],toColor:[241,129,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,129,78,255],toColor:[242,130,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,130,77,255],toColor:[242,131,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,131,77,255],toColor:[243,133,76,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,133,76,255],toColor:[244,134,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,134,75,255],toColor:[244,135,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,135,74,255],toColor:[245,136,73,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,136,73,255],toColor:[245,138,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,138,72,255],toColor:[246,139,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,139,71,255],toColor:[246,140,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[246,140,70,255],toColor:[247,142,70,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,142,70,255],toColor:[247,143,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,143,69,255],toColor:[248,144,68,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,144,68,255],toColor:[248,146,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,146,67,255],toColor:[248,147,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[248,147,66,255],toColor:[249,149,65,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,149,65,255],toColor:[249,150,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,150,64,255],toColor:[250,151,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,151,64,255],toColor:[250,153,63,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,153,63,255],toColor:[250,154,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[250,154,62,255],toColor:[251,156,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,156,61,255],toColor:[251,157,60,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,157,60,255],toColor:[251,158,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,158,59,255],toColor:[252,160,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,160,58,255],toColor:[252,161,58,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,161,58,255],toColor:[252,163,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,163,57,255],toColor:[253,164,56,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,164,56,255],toColor:[253,166,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,166,55,255],toColor:[253,167,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,167,54,255],toColor:[253,168,53,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,168,53,255],toColor:[253,170,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,170,52,255],toColor:[254,171,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,171,52,255],toColor:[254,173,51,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,173,51,255],toColor:[254,174,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,174,50,255],toColor:[254,176,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,176,49,255],toColor:[254,177,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,177,48,255],toColor:[254,179,48,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,179,48,255],toColor:[254,180,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,180,47,255],toColor:[254,182,46,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,182,46,255],toColor:[255,183,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,183,45,255],toColor:[255,185,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,185,45,255],toColor:[255,187,44,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,187,44,255],toColor:[255,188,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,188,43,255],toColor:[255,190,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,190,43,255],toColor:[255,191,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[255,191,42,255],toColor:[255,193,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[255,193,41,255],toColor:[254,194,41,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,194,41,255],toColor:[254,196,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,196,40,255],toColor:[254,198,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,198,40,255],toColor:[254,199,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[254,199,39,255],toColor:[254,201,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,201,39,255],toColor:[254,202,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,202,38,255],toColor:[254,204,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[254,204,38,255],toColor:[253,206,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,206,38,255],toColor:[253,207,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[253,207,37,255],toColor:[253,209,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,209,37,255],toColor:[253,211,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[253,211,37,255],toColor:[252,212,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,212,37,255],toColor:[252,214,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,214,36,255],toColor:[252,216,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[252,216,36,255],toColor:[251,217,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,217,36,255],toColor:[251,219,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[251,219,36,255],toColor:[250,221,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,221,37,255],toColor:[250,222,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[250,222,37,255],toColor:[249,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[249,224,37,255],toColor:[249,226,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,226,37,255],toColor:[248,227,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,227,37,255],toColor:[248,229,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[248,229,38,255],toColor:[247,231,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,38,255],toColor:[247,232,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[247,232,38,255],toColor:[246,234,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,234,39,255],toColor:[246,236,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[246,236,39,255],toColor:[245,238,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,238,39,255],toColor:[244,239,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[244,239,39,255],toColor:[244,241,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[244,241,39,255],toColor:[243,243,39,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[243,243,39,255],toColor:[242,245,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,245,38,255],toColor:[242,246,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[242,246,38,255],toColor:[241,248,36,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[241,248,36,255],toColor:[241,250,34,255]}]},{id:"precipitation_predefined",
type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",
type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,
225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,
13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},
{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,
153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],
toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"viridis_predefined",type:"multipart",colorRamps:[{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,
1,84,255],toColor:[69,2,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,2,86,255],toColor:[69,4,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,4,87,255],toColor:[69,5,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,5,89,255],toColor:[70,7,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,7,90,255],toColor:[70,8,92,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,8,92,255],
toColor:[70,10,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,10,93,255],toColor:[71,11,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,11,95,255],toColor:[71,13,96,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,13,96,255],toColor:[71,14,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,14,98,255],toColor:[71,16,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,16,99,255],
toColor:[72,17,100,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,17,100,255],toColor:[72,19,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,19,102,255],toColor:[72,20,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,20,103,255],toColor:[72,22,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,22,104,255],toColor:[72,23,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,
23,106,255],toColor:[72,24,107,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,24,107,255],toColor:[72,26,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,26,108,255],toColor:[72,27,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,27,109,255],toColor:[72,28,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,28,110,255],toColor:[73,30,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[73,30,112,255],toColor:[73,31,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[73,31,113,255],toColor:[72,32,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,32,114,255],toColor:[72,34,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,34,115,255],toColor:[72,35,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,35,116,255],toColor:[72,36,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[72,36,117,255],toColor:[72,37,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,37,118,255],toColor:[72,39,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,39,119,255],toColor:[72,40,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,40,120,255],toColor:[72,41,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,41,121,255],toColor:[72,42,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[72,42,122,255],toColor:[72,44,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,44,123,255],toColor:[71,45,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,45,124,255],toColor:[71,46,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,46,125,255],toColor:[71,47,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[71,47,125,255],toColor:[71,49,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[71,49,126,255],toColor:[70,50,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,50,127,255],toColor:[70,51,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,51,128,255],toColor:[70,52,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,52,128,255],toColor:[70,54,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[70,54,129,255],toColor:[69,55,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[69,55,130,255],toColor:[69,56,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,56,130,255],toColor:[69,57,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[69,57,131,255],toColor:[68,58,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,58,132,255],toColor:[68,60,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,60,132,255],toColor:[68,61,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[68,61,133,255],toColor:[67,62,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,62,133,255],toColor:[67,63,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,63,134,255],toColor:[66,64,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,64,134,255],toColor:[66,66,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[66,66,135,255],toColor:[65,67,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[65,67,135,255],toColor:[65,68,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,68,136,255],toColor:[65,69,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,69,136,255],toColor:[64,70,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,70,136,255],toColor:[64,71,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[64,71,137,255],toColor:[63,73,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[63,73,137,255],toColor:[63,74,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,74,138,255],toColor:[62,75,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,75,138,255],toColor:[62,76,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[62,76,138,255],toColor:[61,77,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[61,77,138,255],toColor:[61,78,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[61,78,139,255],toColor:[60,79,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,79,139,255],toColor:[60,80,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,80,139,255],toColor:[59,81,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,81,139,255],toColor:[59,83,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[59,83,140,255],toColor:[58,84,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[58,84,140,255],toColor:[58,85,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,85,140,255],toColor:[57,86,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,86,140,255],toColor:[57,87,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[57,87,140,255],toColor:[56,88,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,88,141,255],toColor:[56,89,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[56,89,141,255],toColor:[55,90,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,90,141,255],toColor:[55,91,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,91,141,255],toColor:[54,92,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,92,141,255],toColor:[54,93,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[54,93,141,255],toColor:[53,94,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,94,141,255],toColor:[53,95,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[53,95,142,255],toColor:[52,96,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,96,142,255],toColor:[52,97,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,97,142,255],toColor:[52,98,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,98,142,255],toColor:[51,99,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[51,99,142,255],toColor:[51,100,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[51,100,142,255],toColor:[50,101,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,101,142,255],toColor:[50,102,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,102,142,255],toColor:[49,103,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,103,142,255],toColor:[49,104,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[49,104,142,255],toColor:[48,105,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,105,142,255],toColor:[48,106,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,106,142,255],toColor:[48,107,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,107,143,255],toColor:[47,108,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[47,108,143,255],toColor:[47,109,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[47,109,143,255],toColor:[46,110,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,110,143,255],toColor:[46,111,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[46,111,143,255],toColor:[45,112,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,112,143,255],toColor:[45,113,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,113,143,255],toColor:[45,114,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[45,114,143,255],toColor:[44,115,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,115,143,255],toColor:[44,116,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,116,143,255],toColor:[43,117,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,117,143,255],toColor:[43,118,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,118,143,255],toColor:[43,119,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[43,119,143,255],toColor:[42,120,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,120,143,255],toColor:[42,121,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,121,143,255],toColor:[42,122,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[42,122,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,123,143,255],toColor:[41,123,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[41,123,143,255],toColor:[40,124,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,124,143,255],toColor:[40,125,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,125,143,255],toColor:[40,126,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[40,126,143,255],toColor:[39,127,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,127,143,255],toColor:[39,128,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[39,128,143,255],toColor:[39,129,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,129,143,255],toColor:[38,130,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,130,143,255],toColor:[38,131,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,131,143,255],toColor:[37,132,143,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,132,143,255],toColor:[37,133,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[37,133,142,255],toColor:[37,134,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,134,142,255],toColor:[36,135,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,135,142,255],toColor:[36,136,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,136,142,255],toColor:[36,137,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[36,137,142,255],toColor:[35,138,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[35,138,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[35,139,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,139,142,255],toColor:[34,140,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,140,142,255],toColor:[34,141,142,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,141,142,255],toColor:[34,142,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[34,142,141,255],toColor:[33,143,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,143,141,255],toColor:[33,144,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,144,141,255],toColor:[33,145,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,145,141,255],toColor:[32,146,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,146,141,255],toColor:[32,147,141,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[32,147,141,255],toColor:[32,148,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,148,140,255],toColor:[32,149,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,149,140,255],toColor:[31,150,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,150,140,255],toColor:[31,151,140,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,151,140,255],toColor:[31,152,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,152,139,255],toColor:[31,153,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,153,139,255],toColor:[31,154,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,154,139,255],toColor:[31,155,139,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,155,139,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,156,138,255],toColor:[31,156,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,156,138,255],toColor:[31,157,138,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,157,138,255],toColor:[31,158,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,158,137,255],toColor:[31,159,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,159,137,255],toColor:[31,160,137,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,160,137,255],toColor:[31,161,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[31,161,136,255],toColor:[31,162,136,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[31,162,136,255],toColor:[32,163,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,163,135,255],toColor:[32,164,135,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,164,135,255],toColor:[32,165,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[32,165,134,255],toColor:[33,166,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[33,166,134,255],toColor:[33,167,134,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[33,167,134,255],toColor:[34,168,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,168,133,255],toColor:[34,169,133,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[34,169,133,255],toColor:[35,170,132,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[35,170,132,255],toColor:[36,170,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[36,170,131,255],toColor:[37,171,131,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[37,171,131,255],toColor:[38,172,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,172,130,255],toColor:[38,173,130,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[38,173,130,255],toColor:[39,174,129,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[39,174,129,255],toColor:[40,175,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[40,175,128,255],toColor:[41,176,128,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[41,176,128,255],toColor:[43,177,127,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[43,177,127,255],toColor:[44,178,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[44,178,126,255],toColor:[45,179,126,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[45,179,126,255],toColor:[46,180,125,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[46,180,125,255],toColor:[48,180,124,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[48,180,124,255],toColor:[49,181,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[49,181,123,255],toColor:[50,182,123,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[50,182,123,255],toColor:[52,183,122,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[52,183,122,255],toColor:[53,184,121,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[53,184,121,255],toColor:[55,185,120,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[55,185,120,255],toColor:[56,186,119,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[56,186,119,255],toColor:[58,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[58,187,118,255],toColor:[60,187,118,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[60,187,118,255],toColor:[61,188,117,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[61,188,117,255],toColor:[63,189,116,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[63,189,116,255],toColor:[65,190,115,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[65,190,115,255],toColor:[67,191,114,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[67,191,114,255],toColor:[68,192,113,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[68,192,113,255],toColor:[70,193,112,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[70,193,112,255],toColor:[72,193,111,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[72,193,111,255],toColor:[74,194,110,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[74,194,110,255],toColor:[76,195,109,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[76,195,109,255],toColor:[78,196,108,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[78,196,108,255],toColor:[80,197,106,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[80,197,106,255],toColor:[82,197,105,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[82,197,105,255],toColor:[84,198,104,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[84,198,104,255],toColor:[86,199,103,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[86,199,103,255],toColor:[88,200,102,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[88,200,102,255],toColor:[90,200,101,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[90,200,101,255],toColor:[92,201,99,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[92,201,99,255],toColor:[95,202,98,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[95,202,98,255],toColor:[97,203,97,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[97,203,97,255],toColor:[99,203,95,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[99,203,95,255],toColor:[101,204,94,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[101,204,94,255],toColor:[103,205,93,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[103,205,93,255],toColor:[106,206,91,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[106,206,91,255],toColor:[108,206,90,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[108,206,90,255],toColor:[110,207,89,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[110,207,89,255],toColor:[113,208,87,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[113,208,87,255],toColor:[115,208,86,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[115,208,86,255],toColor:[117,209,84,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[117,209,84,255],toColor:[120,210,83,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[120,210,83,255],toColor:[122,210,81,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[122,210,81,255],toColor:[125,211,80,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[125,211,80,255],toColor:[127,212,78,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[127,212,78,255],toColor:[130,212,77,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[130,212,77,255],toColor:[132,213,75,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[132,213,75,255],toColor:[135,213,74,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[135,213,74,255],toColor:[137,214,72,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[137,214,72,255],toColor:[140,215,71,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[140,215,71,255],toColor:[142,215,69,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[142,215,69,255],toColor:[145,216,67,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[145,216,67,255],toColor:[147,216,66,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[147,216,66,255],toColor:[150,217,64,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[150,217,64,255],toColor:[153,217,62,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[153,217,62,255],toColor:[155,218,61,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[155,218,61,255],toColor:[158,218,59,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[158,218,59,255],toColor:[160,219,57,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[160,219,57,255],toColor:[163,219,55,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[163,219,55,255],toColor:[166,220,54,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[166,220,54,255],toColor:[168,220,52,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[168,220,52,255],toColor:[171,221,50,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[171,221,50,255],toColor:[174,221,49,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[174,221,49,255],toColor:[176,222,47,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[176,222,47,255],toColor:[179,222,45,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[179,222,45,255],toColor:[182,222,43,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[182,222,43,255],toColor:[184,223,42,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[184,223,42,255],toColor:[187,223,40,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[187,223,40,255],toColor:[190,224,38,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[190,224,38,255],toColor:[192,224,37,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[192,224,37,255],toColor:[195,224,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[195,224,35,255],toColor:[198,225,34,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[198,225,34,255],toColor:[201,225,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[201,225,32,255],toColor:[203,225,31,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[203,225,31,255],toColor:[206,226,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[206,226,29,255],toColor:[209,226,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[209,226,28,255],toColor:[211,226,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[211,226,27,255],toColor:[214,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[214,227,26,255],toColor:[216,227,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[216,227,26,255],toColor:[219,227,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[219,227,25,255],toColor:[222,228,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[222,228,25,255],toColor:[224,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[224,228,24,255],toColor:[227,228,24,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[227,228,24,255],toColor:[229,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[229,229,25,255],toColor:[232,229,25,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[232,229,25,255],toColor:[235,229,26,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[235,229,26,255],toColor:[237,230,27,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[237,230,27,255],toColor:[240,230,28,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[240,230,28,255],toColor:[242,230,29,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",
fromColor:[242,230,29,255],toColor:[245,231,30,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[245,231,30,255],toColor:[247,231,32,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[247,231,32,255],toColor:[249,231,33,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[249,231,33,255],toColor:[252,232,35,255]},{type:"algorithmic",algorithm:"esriCIELabAlgorithm",fromColor:[252,232,35,255],toColor:[254,232,37,255]}]},{id:"whiteToBlack_predefined",
fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",
fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],v=[{name:"Aspect",id:"aspect_predefined"},{name:"Black to White",id:"blackToWhite_predefined"},{name:"Blue Bright",id:"blueBright_predefined"},{name:"Blue Light to Dark",id:"blueLightToDark_predefined"},{name:"Blue-Green Bright",id:"blueGreenBright_predefined"},{name:"Blue-Green Light to Dark",id:"blueGreenLightToDark_predefined"},{name:"Brown Light to Dark",id:"brownLightToDark_predefined"},
{name:"Brown to Blue Green Diverging, Bright",id:"brownToBlueGreenDivergingBright_predefined"},{name:"Brown to Blue Green Diverging, Dark",id:"brownToBlueGreenDivergingDark_predefined"},{name:"Cividis",id:"cividis_predefined"},{name:"Coefficient Bias",id:"coefficientBias_predefined"},{name:"Cold to Hot Diverging",id:"coldToHotDiverging_predefined"},{name:"Condition Number",id:"conditionNumber_predefined"},{name:"Cyan to Purple",id:"cyanToPurple_predefined"},{name:"Cyan-Light to Blue-Dark",id:"cyanLightToBlueDark_predefined"},
{name:"Distance",id:"distance_predefined"},{id:"elevation1_predefined",name:"Elevation #1"},{id:"elevation2_predefined",name:"Elevation #2"},{id:"errors_predefined",name:"Errors"},{id:"grayLightToDark_predefined",name:"Gray Light to Dark"},{id:"greenBright_predefined",name:"Green Bright"},{id:"greenLightToDark_predefined",name:"Green Light to Dark"},{name:"Green to Blue",id:"greenToBlue_predefined"},{name:"Inferno",id:"inferno_predefined"},{name:"Magma",id:"magma_predefined"},{name:"Orange Bright",
id:"orangeBright_predefined"},{name:"Orange Light to Dark",id:"orangeLightToDark_predefined"},{id:"partialSpectrum_predefined",name:"Partial Spectrum"},{id:"partialSpectrum1Diverging_predefined",name:"Partial Spectrum 1 Diverging",type:"multipart"},{id:"partialSpectrum2Diverging_predefined",name:"Partial Spectrum 2 Diverging"},{name:"Plasma",id:"plasma_predefined"},{name:"Pink to YellowGreen Diverging, Bright",id:"pinkToYellowGreenDivergingBright_predefined"},{name:"Pink to YellowGreen Diverging, Dark",
id:"pinkToYellowGreenDivergingDark_predefined"},{id:"precipitation_predefined",name:"Precipitation"},{id:"prediction_predefined",name:"Prediction"},{name:"Purple Bright",id:"purpleBright_predefined"},{id:"purpleToGreenDivergingBright_predefined",name:"Purple to Green Diverging, Bright"},{id:"purpleToGreenDivergingDark_predefined",name:"Purple to Green Diverging, Dark"},{name:"Purple-Blue Bright",id:"purpleBlueBright_predefined"},{name:"Purple-Blue Light to Dark",id:"purpleBlueLightToDark_predefined"},
{name:"Purple-Red Bright",id:"purpleRedBright_predefined"},{name:"Purple-Red Light to Dark",id:"purpleRedLightToDark_predefined"},{name:"Red Bright",id:"redBright_predefined"},{name:"Red Light to Dark",id:"redLightToDark_predefined"},{id:"redToBlueDivergingBright_predefined",name:"Red to Blue Diverging, Bright"},{id:"redToBlueDivergingDark_predefined",name:"Red to Blue Diverging, Dark"},{id:"redToGreen_predefined",name:"Red to Green"},{id:"redToGreenDivergingBright_predefined",name:"Red to Green Diverging, Bright"},
{id:"redToGreenDivergingDark_predefined",name:"Red to Green Diverging, Dark"},{name:"Slope",id:"slope_predefined"},{id:"spectrumFullBright_predefined",name:"Spectrum-Full Bright"},{id:"spectrumFullDark_predefined",name:"Spectrum-Full Dark"},{id:"spectrumFullLight_predefined",name:"Spectrum-Full Light"},{id:"surface_predefined",name:"Surface"},{id:"temperature_predefined",name:"Temperature"},{name:"Viridis",id:"viridis_predefined"},{name:"White to Black",id:"whiteToBlack_predefined"},{id:"yellowToDarkRed_predefined",
name:"Yellow to Dark Red"},{id:"yellowToGreenToDarkBlue_predefined",name:"Yellow to Green to Dark Blue"},{name:"Yellow to Red",id:"yellowToRed_predefined"},{name:"Yellow-Green Bright",id:"yellowGreenBright_predefined"},{name:"Yellow-Green Light to Dark",id:"yellowGreenLightToDark_predefined"}],B=new a({data:v});D.mixin(m,{predefinedColorRamps:q,predefinedColorRampNameMap:v,getColorRampName:function(w){w=h(w);return w.id?(w=B.query({id:w.id}),w[0]?w[0].name:null):null},fromJson:function(w){var z=null;
if(!w)return z;"multipart"===w.type?(z=new g,z.colorRamps=A.map(w.colorRamps,function(x){return c(x)},this)):"algorithmic"===w.type&&(z=c(w));return z},colorsEqual:l,getColorRampId:h,invertColorRamp:n,convertColorRampToColormap:function(w,z){if(w&&z){var x=w.colorRamps?w.colorRamps.length:1,y=[],u=[],t,C,E,F,G=0,H=0;for(G=0;G<x;G++)y[G]={},y[G].start=H,y[G].end=H+1/x,H=y[G].end;for(G=0;G<z;G++){var L=(G+.5)/z;A.forEach(y,function(J,S){L>=J.start&&L<J.end&&(F=(L-J.start)/(J.end-J.start),1<y.length?
(t=e.getDojoColor(w.colorRamps[S].fromColor),C=e.getDojoColor(w.colorRamps[S].toColor)):(t=e.getDojoColor(w.fromColor),C=e.getDojoColor(w.toColor)),E=r(t,C,F),u.push([G,E.r,E.g,E.b]))},this)}return u}},interpolateLabColor:r});return m})},"esri/tasks/AlgorithmicColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../Color ./ColorRamp".split(" "),function(D,A,a,b,g,d){D=D(d,{declaredClass:"esri.tasks.AlgorithmicColorRamp",type:"algorithmic",fromColor:null,toColor:null,
algorithm:null,toJson:function(){switch(this.algorithm&&this.algorithm.toLowerCase()){case "cie-lab":var e="esriCIELabAlgorithm";break;case "hsv":e="esriHSVAlgorithm";break;case "lab-lch":e="esriLabLChAlgorithm"}e={type:"algorithmic",algorithm:e};e.fromColor=g.toJsonColor(this.fromColor);e.toColor=g.toJsonColor(this.toColor);return e}});A.setObject("tasks.AlgorithmicColorRamp",D,b);return D})},"esri/tasks/ColorRamp":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],
function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.ColorRamp",type:null});A.setObject("tasks.ColorRamp",D,b);return D})},"esri/tasks/MultipartColorRamp":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../symbols/Symbol ./ColorRamp".split(" "),function(D,A,a,b,g,d){D=D(d,{declaredClass:"esri.tasks.MultipartColorRamp",type:"multipart",constructor:function(){this.colorRamps=[]},addColorRamp:function(e){this.colorRamps.push(e)},toJson:function(){return{type:"multipart",
colorRamps:a.map(this.colorRamps,function(e){return e.toJson()})}}});A.setObject("tasks.MultipartColorRamp",D,g);return D})},"esri/renderers/colorUtils":function(){define(["dojo/_base/Color","dojo/_base/array"],function(D,A){var a={COEF_RGB2XYZ:[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],COEF_XYZ2RGB:[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],matrixProduct:function(g,d){var e=[],f,n;if(g[0].length!==d.length)throw"dimensions do not match";var h=g.length,
k=g[0].length,c=0;for(f=0;f<h;f++){for(n=c=0;n<k;n++)c+=g[f][n]*d[n];e.push(c)}return e},rgb2xyz:function(g){g=[g.r/255,g.g/255,g.b/255].map(function(d){return.04045>=d?d/12.92:Math.pow((d+.055)/1.055,2.4)});g=this.matrixProduct(this.COEF_RGB2XYZ,g);return{x:100*g[0],y:100*g[1],z:100*g[2]}},xyz2rgb:function(g){g=this.matrixProduct(this.COEF_XYZ2RGB,[g.x/100,g.y/100,g.z/100]).map(function(d){return Math.min(1,Math.max(.0031308>=d?12.92*d:1.055*Math.pow(d,1/2.4)-.055,0))});return{r:Math.round(255*g[0]),
g:Math.round(255*g[1]),b:Math.round(255*g[2])}},xyz2lab:function(g){g=[g.x/95.047,g.y/100,g.z/108.883].map(function(d){return d>Math.pow(6/29,3)?Math.pow(d,1/3):1/3*Math.pow(29/6,2)*d+4/29});return{l:116*g[1]-16,a:500*(g[0]-g[1]),b:200*(g[1]-g[2])}},lab2xyz:function(g){var d=g.l;g=[(d+16)/116+g.a/500,(d+16)/116,(d+16)/116-g.b/200].map(function(e){return e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)});return{x:95.047*g[0],y:100*g[1],z:108.883*g[2]}},lab2lch:function(g){var d=g.l,e=g.a,f=g.b;g=Math.sqrt(e*
e+f*f);e=Math.atan2(f,e);e=0<e?e:e+2*Math.PI;return{l:d,c:g,h:e}},lch2lab:function(g){var d=g.c,e=g.h;return{l:g.l,a:d*Math.cos(e),b:d*Math.sin(e)}},rgb2lab:function(g){return this.xyz2lab(this.rgb2xyz(g))},lab2rgb:function(g){return this.xyz2rgb(this.lab2xyz(g))},rgb2lch:function(g){return this.lab2lch(this.xyz2lab(this.rgb2xyz(g)))},lch2rgb:function(g){return this.xyz2rgb(this.lab2xyz(this.lch2lab(g)))}},b={rgb2hsv:function(g){var d=g.r,e=g.g;g=g.b;var f=Math.max(d,e,g),n=f-Math.min(d,e,g),h;0===
n?h=0:f===d?h=(e-g)/n%6:f===e?h=(g-d)/n+2:f===g&&(h=(d-e)/n+4);0>h&&(h+=6);return{h:60*h,s:100*(0===n?0:n/f),v:100/255*f}},hsv2rgb:function(g){var d=(g.h+360)%360/60,e=g.v/100*255;g=g.s/100*e;var f=g*(1-Math.abs(d%2-1));switch(Math.floor(d)){case 0:d={r:g,g:f,b:0};break;case 1:d={r:f,g:g,b:0};break;case 2:d={r:0,g:g,b:f};break;case 3:d={r:0,g:f,b:g};break;case 4:d={r:f,g:0,b:g};break;case 5:case 6:d={r:g,g:0,b:f};break;default:d={r:0,g:0,b:0}}d.r=Math.round(d.r+e-g);d.g=Math.round(d.g+e-g);d.b=Math.round(d.b+
e-g);return d}};return{toRGB:function(g){var d;void 0!==g.r&&void 0!==g.g&&void 0!==g.b?d=g:void 0!==g.l&&void 0!==g.c&&void 0!==g.h?d=a.lch2rgb(g):void 0!==g.l&&void 0!==g.a&&void 0!==g.b?d=a.lab2rgb(g):void 0!==g.x&&void 0!==g.y&&void 0!==g.z?d=a.xyz2rgb(g):void 0!==g.h&&void 0!==g.s&&void 0!==g.v&&(d=b.hsv2rgb(g));return d},toHSV:function(g){if(void 0!==g.h&&void 0!==g.s&&void 0!==g.v)return g;g=this.toRGB(g);return b.rgb2hsv(g)},toLAB:function(g){return void 0!==g.l&&void 0!==g.a&&void 0!==g.b?
g:a.rgb2lab(this.toRGB(g))},toLCH:function(g){return void 0!==g.l&&void 0!==g.c&&void 0!==g.h?g:a.rgb2lch(this.toRGB(g))},toXYZ:function(g){return void 0!==g.x&&void 0!==g.y&&void 0!==g.z?g:a.rgb2xyz(this.toRGB(g))},getDojoColor:function(g){if(g){if(Array.isArray(g))return D.fromArray(g);if(void 0!==g.r&&void 0!==g.g&&void 0!==g.b)return g}},correctRGBLimits:function(g){var d=[g.r,g.g,g.b];A.forEach(d,function(e,f){0>d[f]?d[f]=0:255<d[f]&&(d[f]=255);d[f]=Math.floor(d[f])});return{r:d[0],g:d[1],b:d[2],
a:1}}}})},"esri/renderers/ShadedReliefRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../layers/RasterFunction ./colorRampUtils".split(" "),function(D,A,a,b,g,d,e,f){D=D(null,{declaredClass:"esri.renderer.ShadedReliefRenderer",constructor:function(n){n=n||{};this.hillshadeType=n.hillshadeType||"traditional";this.azimuth=null!=n.azimuth?n.azimuth:315;this.altitude=null!=n.altitude?n.altitude:45;this.zFactor=n.zFactor||1;this.scalingType=n.scalingType||
"none";this.pixelSizePower=null!=n.pixelSizePower?n.pixelSizePower:.664;this.pixelSizeFactor=null!=n.pixelSizeFactor?n.pixelSizeFactor:.024;this.removeEdgeEffect=n.removeEdgeEffect||!1;this.colorRamp=f.fromJson(n.colorRamp)},toJson:function(){var n={type:"rasterShadedRelief",hillshadeType:this.hillshadeType,azimuth:this.azimuth,altitude:this.altitude,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizePower:this.pixelSizePower,pixelSizeFactor:this.pixelSizeFactor,colorRamp:this.colorRamp&&
this.colorRamp.toJson()};return d.fixJson(n)},toRenderingRule:function(n){}});a.setObject("renderer.ShadedReliefRenderer",D,g);return D})},"esri/renderers/ColormapRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer ./arcadeUtils".split(" "),function(D,A,a,b,g,d,e,f,n){D=D(f,{declaredClass:"esri.renderer.ColormapRenderer",constructor:function(h){this.colormapInfos=h&&h.colormapInfos},toJson:function(){var h=d.fixJson;
var k={type:"rasterColormap",colormapInfos:A.map(this.colormapInfos||[],function(c,l){var r={};c.color&&null!==c.color&&3<=c.color.length&&(r.color=c.color,r.value=c.value||l,r.label=(c.label||l)+"");return h(r)})};k=a.mixin(this.inherited(arguments),k);return h(k)}});a.setObject("renderer.ColormapRenderer",D,g);return D})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(D,A,a,b){D.setObject("renderer.arcadeUtils",b,a);
return b})},"esri/arcadeProfiles/labelingProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(D,A,a,b,g,d,e,f){D=new (D(null,{declaredClass:"esri.arcadeProfiles.LabelingProfile",defaults:{context:{vars:{$feature:"any"}}},initialize:function(n){var h=[];f.hasGeometryOperations(n)&&h.push(e.enableGeometryOperations());return g(h)},isAsync:function(n){return!1},parse:function(n){return e.createSyntaxTree(n.expression)},
compile:function(n){var h=A.clone(this.defaults.context);return n.syntaxTree?e.createFunction(n.syntaxTree,h):null},getEvalOptions:function(n){var h=n.feature;return{context:{vars:{$feature:h&&n.expression.hasVariable("$feature")?d.createFromGraphicLikeObject(h.geometry,h.attributes,n.layer):null},spatialReference:n.spatialReference}}}}));A.setObject("arcadeProfiles.labelingProfile",D,b);return D})},"esri/tasks/QueryTask":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/DeferredList ../kernel ../sniff ../request ../deferredUtils ../geometry/Extent ../geometry/normalizeUtils ./Task ./FeatureSet".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m){var q=n("esri-pbf"),v=A(null,{url:null,query:null,requestOptions:null,pagination:null,pageSize:null,_fetchDfd:null,_startPage:null,_result:null,constructor:function(w){this._handleSuccess=a.hitch(this,this._handleSuccess);this._handleError=a.hitch(this,this._handleError);a.mixin(this,w);null==this.pagination&&(this.pagination=!1);null==this.pageSize&&(this.pageSize=1E3)},execute:function(){var w=new g(this._canceler);this._fetchDfd=w;this._result=null;this._sendRequest();
return w.promise},_canceler:function(w){var z=w._pendingRequest;if(!w.isFulfilled()&&z&&!z.isFulfilled()){z.cancel();var x=z.results&&z.results[1]}w._pendingRequest=null;return x},_sendRequest:function(w){var z=this.query;this.pagination&&(this._startPage=z.resultOffset=null==w?0:w,z.resultRecordCount=this.pageSize);w=this.requestOptions;this._fetchDfd._pendingRequest=h({url:this.url,content:z,handleAs:"pbf"===z.f?"arraybuffer":"json",callbackParamName:"callback",timeout:w&&w.timeout},w);this._fetchDfd._pendingRequest.then(this._handleSuccess).otherwise(this._handleError)},
_handleSuccess:function(w){this.pagination?(w.exceededTransferLimit&&this._sendRequest(this._startPage+this.pageSize),this._result?this._result.features=this._result.features.concat(w.features):this._result=w,this._fetchDfd.progress(w),w.exceededTransferLimit||this._fetchDfd.resolve(this._result)):(this._fetchDfd.progress(w),this._fetchDfd.resolve(w))},_handleError:function(w){this._fetchDfd.reject(w)}}),B=A(r,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],
"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(w,z){this._handler=a.hitch(this,this._handler);this._relationshipQueryHandler=a.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=a.hitch(this,this._executeForIdsHandler);this._countHandler=a.hitch(this,this._countHandler);this._extentHandler=a.hitch(this,this._extentHandler);this.source=z&&z.source;this.gdbVersion=z&&z.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",
c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"rawExecute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onRawExecuteComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},onExecuteForExtentComplete:function(){},execute:function(w,z,x,y,u){var t=
u.assembly;w=this._encode(a.mixin({},this._url.query,{f:y&&y.format||"json"},w.toJson(t&&t[0])));var C=this._handler,E=this._errorHandler;this.source&&(y={source:this.source.toJson()},w.layer=d.toJson(y));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);var F="pbf"===w.f;if(F){var G;q||(G="QueryTask.execute: 'pbf' format is not supported in your browser.");if(G)return w=new g,w.addErrback(function(H){E(H,x,u.dfd)}),w.reject(Error(G)),w}G=this.requestOptions;G=h({url:this._url.path+"/query",content:w,
callbackParamName:"callback",handleAs:F?"arraybuffer":"json",timeout:G&&G.timeout},G);w=[G];F&&w.push(B.loadPBFReader());(new e(w)).then(function(H){u.dfd.isFulfilled()||(H=H[0],H[0]?C(H[1],F,z,x,u.dfd):E(H[1],x,u.dfd))});return G},rawExecute:function(w,z,x){z=z||{};w=this._encode(a.mixin({},this._url.query,{f:z.format||"json"},w.toJson(x.assembly&&x.assembly[0])));this.source&&(w.layer=d.toJson({source:this.source.toJson()}));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);return(new v({url:this._url.path+
"/query",query:w,requestOptions:this.requestOptions,pagination:z.pagination,pageSize:z.pageSize})).execute().then(null,null,function(y){x.dfd.progress(y)}).then(a.hitch(this,function(y){this._successHandler([y],"onRawExecuteComplete",null,x.dfd)})).otherwise(a.hitch(this,function(y){this._errorHandler(y,null,x.dfd)}))},executeRelationshipQuery:function(w,z,x){w=this._encode(a.mixin({},this._url.query,{f:"json"},w.toJson()));var y=this._relationshipQueryHandler,u=this._errorHandler;this.gdbVersion&&
(w.gdbVersion=this.gdbVersion);var t=new g(k._dfdCanceller),C=this.requestOptions,E=this._url.path;this.source&&void 0!==this.source.mapLayerId&&null!==this.source.mapLayerId&&E.endsWith("/dynamicLayer")&&(E=E.slice(0,-13),E=E+"/"+this.source.mapLayerId);t._pendingDfd=h({url:E+"/queryRelatedRecords",content:w,callbackParamName:"callback",timeout:C&&C.timeout,load:function(F,G){y(F,G,z,x,t)},error:function(F){u(F,x,t)}},C);return t},executeForIds:function(w,z,x,y){var u=y.assembly;w=this._encode(a.mixin({},
this._url.query,{f:"json",returnIdsOnly:!0},w.toJson(u&&u[0])));var t=this._executeForIdsHandler,C=this._errorHandler;this.source&&(u={source:this.source.toJson()},w.layer=d.toJson(u));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);u=this.requestOptions;return h({url:this._url.path+"/query",content:w,callbackParamName:"callback",timeout:u&&u.timeout,load:function(E,F){t(E,F,z,x,y.dfd)},error:function(E){C(E,x,y.dfd)}},u)},executeForCount:function(w,z,x,y){var u=y.assembly;w=this._encode(a.mixin({},
this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},w.toJson(u&&u[0])));var t=this._countHandler,C=this._errorHandler;this.source&&(u={source:this.source.toJson()},w.layer=d.toJson(u));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);u=this.requestOptions;return h({url:this._url.path+"/query",content:w,callbackParamName:"callback",timeout:u&&u.timeout,load:function(E,F){t(E,F,z,x,y.dfd)},error:function(E){C(E,x,y.dfd)}},u)},executeForExtent:function(w,z,x,y){var u=y.assembly;w=this._encode(a.mixin({},
this._url.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},w.toJson(u&&u[0])));var t=this._extentHandler,C=this._errorHandler;this.source&&(u={source:this.source.toJson()},w.layer=d.toJson(u));this.gdbVersion&&(w.gdbVersion=this.gdbVersion);u=this.requestOptions;return h({url:this._url.path+"/query",content:w,callbackParamName:"callback",timeout:u&&u.timeout,load:function(E,F){t(E,F,z,x,y.dfd)},error:function(E){C(E,x,y.dfd)}},u)},_handler:function(w,z,x,y,u){try{w&&z&&(w=B.pbfDeps.optimizedFeatures.convertToFeatureSet(B.pbfDeps.pbfQueryUtils.parsePBFFeatureQuery(w)));
var t=new m(w);this._successHandler([t],"onComplete",x,u)}catch(C){this._errorHandler(C,y,u)}},_relationshipQueryHandler:function(w,z,x,y,u){try{var t=w.geometryType,C=w.spatialReference,E={};b.forEach(w.relatedRecordGroups,function(F){var G={};G.geometryType=t;G.spatialReference=C;G.features=F.relatedRecords;G=new m(G);if(null!=F.objectId)E[F.objectId]=G;else for(var H in F)F.hasOwnProperty(H)&&"relatedRecords"!==H&&(E[F[H]]=G)});this._successHandler([E],"onExecuteRelationshipQueryComplete",x,u)}catch(F){this._errorHandler(F,
y,u)}},_executeForIdsHandler:function(w,z,x,y,u){try{this._successHandler([w.objectIds],"onExecuteForIdsComplete",x,u)}catch(t){this._errorHandler(t,y,u)}},_countHandler:function(w,z,x,y,u){try{var t=w.features,C=w.objectIds;if(C)var E=C.length;else{if(t)throw Error("Unable to perform query. Please check your parameters.");E=w.count}this._successHandler([E],"onExecuteForCountComplete",x,u)}catch(F){this._errorHandler(F,y,u)}},_extentHandler:function(w,z,x,y,u){try{w.extent&&(w.extent=new c(w.extent)),
this._successHandler([w],"onExecuteForExtentComplete",x,u)}catch(t){this._errorHandler(t,y,u)}}});B.loadPBFReader=function(){var w=new g;B.pbfDeps?w.resolve():D(["./support/pbfDeps"],function(z){B.pbfDeps=z;w.isFulfilled()||w.resolve()});return w.promise};l._createWrappers(B);a.setObject("tasks.QueryTask",B,f);return B})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../geometry/jsonUtils ./SpatialRelationship ./QueryTask ./RelationshipQuery ./StatisticDefinition".split(" "),
function(D,A,a,b,g,d,e,f){var n=D(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=n.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnCentroid:null,returnDistinctValues:!1,returnExceededLimitFeatures:null,maxRecordCountFactor:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,distance:null,units:null,
resultOffset:null,resultRecordCount:null,resultType:null,cacheHint:null,sqlFormat:null,quantizationParameters:null,_units:{meters:"esriSRUnit_Meter",kilometers:"esriSRUnit_Kilometer",feet:"esriSRUnit_Foot",miles:"esriSRUnit_StatuteMile","nautical-miles":"esriSRUnit_NauticalMile","us-nautical-miles":"esriSRUnit_USNauticalMile"},toJson:function(h){var k={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,
geometryPrecision:this.geometryPrecision,sqlFormat:this.sqlFormat},c=h&&h.geometry||this.geometry,l=this.objectIds,r=this.outFields,m=this.outSpatialReference,q=this.groupByFieldsForStatistics,v=this.orderByFields,B=this.outStatistics;h=this.distance;c&&(k.geometry=c,k.geometryType=e.getJsonType(c),k.inSR=c.spatialReference.wkid||b.toJson(c.spatialReference.toJson()));l&&(k.objectIds=l.join(","));r&&(k.outFields=r.join(","));null!=this.returnCentroid&&(k.returnCentroid=this.returnCentroid);this.returnDistinctValues&&
(k.returnDistinctValues=!0);null!=this.returnExceededLimitFeatures&&(k.returnExceededLimitFeatures=this.returnExceededLimitFeatures);null!=this.maxRecordCountFactor&&(k.maxRecordCountFactor=this.maxRecordCountFactor);q&&(k.groupByFieldsForStatistics=q.join(","));v&&(k.orderByFields=v.join(","));if(B){var w=[];a.forEach(B,function(z){w.push(z.toJson())});k.outStatistics=b.toJson(w)}m?k.outSR=m.wkid||b.toJson(m.toJson()):c&&(k.outSR=c.spatialReference.wkid||b.toJson(c.spatialReference.toJson()));c=
this.timeExtent;k.time=c?c.toJson().join(","):null;(c=this.relationParam)&&this.spatialRelationship===n.SPATIAL_REL_RELATION&&(k.relationParam=c);h&&(k.distance=this.distance,this.hasOwnProperty("units")?k.units=this._units[this.units]||this._units.meters:k.units=this._units.meters);this.hasOwnProperty("start")&&(k.resultOffset=this.start,k.resultRecordCount=10,""===k.where&&(k.where="1\x3d1"));this.hasOwnProperty("num")&&(k.resultRecordCount=this.num);k.resultType=this.resultType;null!=this.cacheHint&&
(k.cacheHint=this.cacheHint);k.pixelSize=this.pixelSize?b.toJson(this.pixelSize.toJson()):null;k.multipatchOption=this.multipatchOption;this.quantizationParameters&&(k.quantizationParameters=b.toJson(this.quantizationParameters));k._ts=this._ts;return k}});A.mixin(n,f);A.setObject("tasks.Query",n,d);return n})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","../kernel"],function(D,A,a){A={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",
SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};D.setObject("tasks._SpatialRelationship",A,a);return A})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/json",
"dojo/has","../kernel"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,orderByFields:null,toJson:function(){var d={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},e=this.objectIds,f=this.outFields,n=this.outSpatialReference,
h=this.orderByFields;e&&(d.objectIds=e.join(","));f&&(d.outFields=f.join(","));n&&(d.outSR=n.wkid||a.toJson(n.toJson()));h&&(d.orderByFields=h.join(","));d._ts=this._ts;return d}});A.setObject("tasks.RelationshipQuery",D,g);return D})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.StatisticDefinition",toJson:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,
outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}});A.setObject("tasks.StatisticDefinition",D,b);return D})},"esri/layers/GraphicsLayer":function(){define("require dojo/_base/declare dojo/_base/Deferred dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/window dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom dojox/gfx dojox/gfx/matrix ./gfxSniff!esri-svg?dojox/gfx/filters ./layer ./support/webglUtils ./support/WebGLSurface ../kernel ../lang ../sniff ../Color ../domUtils ../symbols/MarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/utils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/mathUtils ../geometry/screenUtils ../PluginTarget ./gfxSniff!esri-svg?dojox/gfx/svgext".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E,F,G,H,L,J){var S=-1!==c.renderer.toLowerCase().indexOf("svg"),P=-1!==c.renderer.toLowerCase().indexOf("canvas"),Q=P?"canvas-2d":c.renderer,M=9>z("ie");e=10===z("ie");var N=void 0===z("ie")&&7==z("trident"),K=e||N,X=z("esri-touch"),da=!!z("chrome"),Y=q.isWebGLEnabled(),aa=S&&z("esri-will-change"),ca=Y||P;q=A(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(I,T){var ba=this._connects=[];this._map=I;this._useWillChange=
this._useGlobalTransform="css-transforms"===I.navigationMode&&aa;if(ca){var pa=n.create("div",{style:{position:"absolute",overflow:"visible"}},T);this._surface={getEventSource:function(){return pa}};P&&(ba.push(b.connect(pa,"onmousedown",this,this._canvasDownHandler)),ba.push(b.connect(pa,"onmouseup",this,this._canvasUpHandler)),ba.push(b.connect(pa,"onclick",this,this._canvasClickHandler)));Y&&(this._webglSurface=new v({map:I,node:pa}))}else pa=(this._surface=c.createSurface(T,I.width,I.height)).getEventSource(),
this._useWillChange&&h.set(pa,"will-change","transform"),h.set(pa=M?pa.parentNode:pa,{overflow:"visible",position:"absolute"});ba.push(b.connect(I,"onResize",this,"_onResizeHandler"));this._useGlobalTransform&&(ba.push(b.connect(I,"onPan",this,"_onPanHandler")),ba.push(b.connect(I,"onPanEnd",this,"_onPanEndHandler")),ba.push(b.connect(I,"onExtentChange",this,"_onExtentChangeHandler")));return pa},_reorderLayer:function(I,T,ba){T=T.getEventSource();ca&&"svg"===I.surfaceType&&(T=T.parentNode);n.place(T,
this._surface.getEventSource(),ba)},_onPanHandler:function(I,T){var ba=this._map.__visibleRect,pa=ba.x+T.x;ba=ba.y+T.y;this._panDx=pa;this._panDy=ba;ca||h.set(this._surface.getEventSource(),B._css.names.transform,B._css.translate(pa,ba))},_onPanEndHandler:function(I,T){var ba=this._map.__visibleRect,pa=ba.x;ba=ba.y;this._panDx=pa;this._panDy=ba;ca||h.set(this._surface.getEventSource(),B._css.names.transform,B._css.translate(pa,ba))},_onExtentChangeHandler:function(I,T,ba,pa){ba&&(this._panDy=this._panDx=
0,ca||h.set(this._surface.getEventSource(),B._css.names.transform,B._css.translate(0,0)))},_getTransform:function(){return{dx:this._panDx||0,dy:this._panDy||0}},_onResizeHandler:function(I,T,ba){I=this._surface.getEventSource();var pa=this._map,ya;M&&h.set(I=I.parentNode,{width:T+"px",height:ba+"px",clip:"rect(0px "+T+"px "+ba+"px 0px)"});f.set(I,"width",T);f.set(I,"height",ba);this._surface.declaredClass||d.forEach(I.childNodes,function(Da){f.set(Da,"width",T);f.set(Da,"height",ba)});pa.loaded&&
(pa.graphics.suspended||(pa.graphics._resized=!0),d.forEach(pa.graphicsLayerIds,function(Da){ya=pa.getLayer(Da);ya.suspended||(ya._resized=!0,ya._childLayer&&(ya._childLayer._resized=!0));ya._updateSVGFilters(null,null,T,ba)}),pa.graphics._updateSVGFilters(null,null,T,ba),pa._labels&&pa._labels._updateSVGFilters(null,null,T,ba))},_cleanUp:function(){d.forEach(this._connects,b.disconnect,b);this._map=this._surface=null},_processEvent:function(I){var T=this._map;I.screenPoint=new F(I.pageX-T.position.x,
I.pageY-T.position.y);I.mapPoint=T.toMap(I.screenPoint)},_canvasDownHandler:function(I){this._processEvent(I);this._downPt=I.screenPoint.x+","+I.screenPoint.y},_canvasUpHandler:function(I){this._processEvent(I);this._upPt=I.screenPoint.x+","+I.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(I,T,ba,pa){if(!I.visible||!T)return!1;var ya=T.getTransformedBoundingBox();if(ya){var Da=new G(ya[0].x,ya[0].y,ya[2].x,ya[2].y);delete Da.spatialReference;return X?Da.intersects(ba):Da.contains(pa)}return d.some(T.children||
[],function(Ha){ya=Ha.getTransformedBoundingBox();Da=new G(ya[0].x,ya[0].y,ya[2].x,ya[2].y);delete Da.spatialReference;return X?Da.intersects(ba):Da.contains(pa)})},_canvasClickHandler:function(I){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(I);var T=this._map,ba=d.map(T.graphicsLayerIds,function(ua){return T.getLayer(ua)});ba.push(T.graphics);ba.reverse();ba=d.filter(ba,function(ua){return ua.loaded&&!ua.hasWebGLSurface()&&ua._mouseEvents&&!ua.suspended&&(!w.isDefined(ua.opacity)||
0<ua.opacity)});var pa=I.screenPoint,ya=this._tolerance,Da=pa.x-ya,Ha=pa.y+ya,ta=pa.x+ya;ya=pa.y-ya;var xa=new G(Da,ya,ta,Ha);Da=T.toMap(new F(Da,Ha));ta=T.toMap(new F(ta,ya));Ha=Da.spatialReference._getInfo();var ra=new G(G.prototype._normalizeX(Da.x,Ha).x,Da.y,G.prototype._normalizeX(ta.x,Ha).x,ta.y,Da.spatialReference),Aa;delete xa.spatialReference;d.some(ba,function(ua){ua=d.filter(ua.graphics,function(ha){return this._isPrimaryMatch(ha,ha.getDojoShape(),xa,pa)||!(!ha._bgShape||!this._isPrimaryMatch(ha,
ha._bgShape,xa,pa))},this);ua.reverse();if(0<ua.length){var Ja;d.some(ua,function(ha){return ha.geometry&&ra.intersects(ha.geometry)?(Ja=ha,!0):!1});if(Ja)return Aa=Ja,!0}return!1},this);Aa&&(ba=Aa.getLayer())&&(I.graphic=Aa,ba.onClick(I))}}});m=A(m,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:Q,webglEnabled:Y,renderer:null,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"],"renderer-change":["renderer"]},_suspendGraphics:!1,constructor:function(I,T){I=
I||{};if(g.isString(I)||g.isObject(I)&&(I.layerDefinition||I.query))I=T;this._params=g.mixin({displayOnPan:!0,drawMode:!0,styling:!0},I);var ba=this._params.dataAttributes;"string"===typeof ba&&(ba=[ba]);this.styling=S?this._params.styling:!0;this.dataAttributes=ba;this.infoTemplate=I&&I.infoTemplate;this.graphics=[];this._draw=g.hitch(this,this._draw);this._refresh=g.hitch(this,this._refresh);this._acquireSVGMarker=g.hitch(this,this._acquireSVGMarker);this._evalSurfaceType=g.hitch(this,this._evalSurfaceType);
this._setSurfaceType=g.hitch(this,this._setSurfaceType);this.setWebGLEnabled(null!=this._params.webglEnabled?this._params.webglEnabled:this.webglEnabled);this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(I){this._params.drawMode=I},suspendGraphics:function(I){this._suspendGraphics=I;d.forEach(this.graphics,function(T){T._suspended=I})},setWebGLEnabled:function(I){var T=this.webglEnabled;this.webglEnabled=(I||!1)&&Y;T!==this.webglEnabled&&
(this._evalSurfaceType(),this.onWebGLEnabledChange())},hasWebGLSurface:function(){return"webgl"===this.surfaceType},_getSurfaceType:function(I){return I&&"webgl"===I.surfaceType?"webgl":Q},_evalSurfaceType:function(I){Y&&(I?this._setSurfaceType():null==this._evalSurfaceTimerHandle&&(this._evalSurfaceTimerHandle=setTimeout(this._setSurfaceType,0)))},_hasPendingSurfaceEval:function(){return!!this._evalSurfaceTimerHandle},_setSurfaceType:function(){clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;var I=this._canUseWebGLSurface()?"webgl":Q;this.surfaceType!==I?(this.surfaceType=I,this._handleSurfaceChange(),this.onSurfaceChange()):this._pendingRedraw&&this._redraw()},_handleSurfaceChange:function(){this._cancelWebGLDepsLoad();this._webglDepsPromise=this._prepareToAttach(this._map);this._webglDepsPromise.always(g.hitch(this,function(I){this._webglDepsPromise=null;I&&"cancel"===I.dojoType||this._evalSurface()}))},_cancelWebGLDepsLoad:function(){this._webglDepsPromise&&!this._webglDepsPromise.isFulfilled()&&
this._webglDepsPromise.cancel();this._webglDepsPromise=null},_evalSurface:function(){var I=this._map,T=this._div;I&&T&&this._getSurfaceType(T)!==this.surfaceType&&(I._detachGraphicsLayer(this),I._attachGraphicsLayer(this))},_canUseWebGLSurface:function(I){I=I||this._map;return this.webglEnabled&&(!I||I.webglEnabled&&(I.ownsWebGLContext(this)||I.isWebGLContextAvailable()))&&this._params.drawMode&&this._isWebGLCompatible()},_isWebGLCompatible:function(){return!1},_prepareToAttach:function(I){var T=
new a;!this.webglDeps&&this._canUseWebGLSurface(I)?D(["./support/webglDeps"],g.hitch(this,function(ba){this.webglDeps=ba;T.isFulfilled()||T.resolve()})):T.resolve();return T.promise},_setMap:function(I,T){this.inherited(arguments);this._map=I;this._evalSurfaceType(!0);this._webglChangeMapHandle=I.on("webgl-enabled-change",g.hitch(this,function(){this._evalSurfaceType()}));this._wrap=I.wrapAround180;this._srInfo=I.spatialReference._getInfo();this._svgFilters={};this._lineMarkers={};if(this.hasWebGLSurface())I.acquireWebGLContext(this),
this._div=I._gc._webglSurface.createRenderer(this.webglDeps.WebGLRenderer,I.width,I.height,this);else{if("svg"===this.surfaceType)if(ca){T=c.createSurface(T.getEventSource(),I.width,I.height);var ba=T.getEventSource();h.set(ba,{position:"absolute",overflow:"visible",pointerEvents:"none"});I._gc._useWillChange&&h.set(ba,"will-change","transform");this._div=T.createGroup();h.set(this._div.getEventSource(),"pointer-events","auto")}else this._div=T.createGroup();else T=c.createSurface(T.getEventSource(),
I.width,I.height),h.set(T.rawNode,"position","absolute"),this._div=T.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=g.hitch(this,this._canvasRender);this._bgGroup=this._div.createGroup()}this._div.getEventSource().id=this.id+"_layer";this._initOpacity();return this._div},_unsetMap:function(I,T){I.releaseWebGLContext(this);"webgl"===this._div.surfaceType?I._gc._webglSurface.destroyRenderer(this._div):(d.forEach(this.graphics,function(ba){ba._shape=null}),
"svg"===this.surfaceType?ca?(T=this._div.parent,this._div.clear(),T.remove(this._div),n.destroy(this._div.getEventSource()),n.destroy(T.getEventSource())):(this._div.clear(),T.remove(this._div),n.destroy(this._div.getEventSource())):(T=this._div.getParent(),T._parent={},n.destroy(T.rawNode),T.destroy()));this._map=this._div=this._svgFilters=this._lineMarkers=null;this._pendingRedraw=!1;clearTimeout(this._wakeTimer);this._wakeTimer=null;clearTimeout(this._evalSurfaceTimerHandle);this._evalSurfaceTimerHandle=
null;this._webglChangeMapHandle&&this._webglChangeMapHandle.remove();this._cancelWebGLDepsLoad();this._disableDrawConnectors();this.inherited(arguments)},_initOpacity:function(){var I=this.opacity;w.isDefined(I)&&1>I&&this.setOpacity(I,!0)},_onZoomStartHandler:function(){this.hasWebGLSurface()||y.hide(this._div.getEventSource())},_onExtentChangeHandler:function(I,T,ba,pa){clearTimeout(this._wakeTimer);this._wakeTimer=null;ba?(I=this._map.__visibleRect,T=this._div,this._evalSDRenderer(),this._refresh(!0),
this._params._child||this._updateTransform(T,I.x,I.y,!0),this._renderProto&&T.surface.pendingRender?this._dirty=!0:this.suspended||y.show(T.getEventSource())):this._resized&&(this._resized=!1,this._refresh(!1));if(0<this.graphics.length)this.onUpdate()},_canvasRender:function(){var I=this._div;this._dirty&&(delete this._dirty,this.suspended||y.show(I.getEventSource()));return this._renderProto.apply(I,arguments)},_refresh:function(I){if(!this.hasWebGLSurface()){var T=this.graphics,ba=T.length,pa,
ya=this._draw;for(pa=0;pa<ba;pa++)ya(T[pa],I)}},refresh:function(){this._refresh(!0)},_redraw:function(){this._pendingRedraw=!1;this.hasWebGLSurface()?this._div&&this._div.redraw():this._refresh(!0)},redraw:function(){this._hasPendingSurfaceEval()?this._pendingRedraw=!0:this._redraw()},hasLocalNavigationTransform:function(){return!(this._map&&this._map._gc._useGlobalTransform)},getNavigationTransform:function(){var I={dx:0,dy:0};this._map&&(this.hasLocalNavigationTransform()?this._div&&!this.hasWebGLSurface()&&
(I=this._div.getTransform()):I=this._map._gc._getTransform());return I},_onPanHandler:function(I,T){this._panDx=T.x;this._panDy=T.y;var ba=this._map.__visibleRect;this._updateTransform(this._div,ba.x+T.x,ba.y+T.y);N&&this._updateSVGMarkers()},_onPanEndUpdateHandler:function(I,T){var ba=this._map.__visibleRect;this._params._child||T.x===this._panDx&&T.y===this._panDy?(this._updateSVGFilters(-ba.x,-ba.y),this._updateSVGMarkers()):this._updateTransform(this._div,ba.x,ba.y,!0);this._refresh(!1);if(this.graphics.length)this.onUpdate()},
_onPanStartHandler:function(){y.hide(this._div.getEventSource())},_onPanEndHandler:function(){var I=this._map.__visibleRect,T=this._div;this._updateTransform(T,I.x,I.y,!0);this._refresh(!1);this._renderProto&&T.surface.pendingRender?this._dirty=!0:y.show(T.getEventSource());if(this.graphics.length)this.onUpdate()},_updateTransform:function(I,T,ba,pa){this.hasWebGLSurface()||(this.hasLocalNavigationTransform()?I.setTransform(l.translate({x:T,y:ba})):ca&&h.set(this._div.parent.getEventSource(),B._css.names.transform,
B._css.translate(T,ba)),pa&&(this._updateSVGFilters(-T,-ba),this._updateSVGMarkers()))},onSuspend:function(){this.inherited(arguments);y.hide(this._div.getEventSource());clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors()},onResume:function(I){this.inherited(arguments);I.firstOccurrence&&this._evalSDRenderer();this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(g.hitch(this,function(){this.suspended||this._map.__zooming||this._onExtentChangeHandler(null,
null,!0)}),0)},_enableDrawConnectors:function(){var I=this._map,T=b.connect;this._disableDrawConnectors();this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=T(I,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=T(I,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=T(I,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=T(I,"onPanEnd",this,"_onPanEndHandler"));this._onZoomStartHandler_connect=T(I,"onZoomStart",this,"_onZoomStartHandler");
this._onExtentChangeHandler_connect=T(I,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var I=b.disconnect;I(this._onExtentChangeHandler_connect);I(this._onZoomStartHandler_connect);I(this._onPanHandler_connect);I(this._onPanStartHandler_connect);I(this._onPanEndHandler_connect);this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(I){var T=
I.geometry;if(!T)I._extent=null;else if(!(I._extent=T.getExtent())){if("esri.geometry.Point"===T.declaredClass){var ba=T.x;var pa=T.y}else if("esri.geometry.Multipoint"===T.declaredClass)ba=T.points[0][0],pa=T.points[0][1];else{I._extent=null;return}I._extent=new G(ba,pa,ba,pa,T.spatialReference)}},_intersects:function(I,T,ba){var pa=I.spatialReference,ya=T.spatialReference,Da=pa&&ya&&!pa.equals(ya)&&pa._canProject(ya)&&4326===ya.wkid;if(this._wrap&&!ba){ba=[];pa=I._getFrameWidth();var Ha=this._srInfo,
ta=I._clip?I._getAvailExtent():I.extent,xa,ra=[];var Aa=T._partwise;Da&&(ta=I.geographicExtent,Ha=ya._getInfo());I=ta._getParts(Ha);if(Aa&&Aa.length)for(T=[],ya=0,Da=Aa.length;ya<Da;ya++)T=T.concat(Aa[ya]._getParts(Ha));else T=T._getParts(Ha);ya=0;for(Da=T.length;ya<Da;ya++){var ua=T[ya];Ha=0;for(ta=I.length;Ha<ta;Ha++){var Ja=I[Ha];if(Ja.extent.intersects(ua.extent))for(Aa=0,xa=ua.frameIds.length;Aa<xa;Aa++)ba.push((Ja.frameIds[0]-ua.frameIds[Aa])*pa)}}ya=0;for(Da=ba.length;ya<Da;ya++)Aa=ba[ya],
d.indexOf(ba,Aa)===ya&&ra.push(Aa);return ra.length?ra:null}return(Da?I.geographicExtent:I.extent).intersects(T)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(I,T){if(!this.hasWebGLSurface()&&this._params.drawMode&&this._map&&!this.suspended&&!this._map.__zooming&&!this._resized)try{var ba=I._extent,pa,ya,Da=!S||this.styling,Ha=S&&this.dataAttributes,ta=I.getDojoShape(),xa;if(!I._suspended&&I.visible&&ba&&(pa=this._intersects(this._map,
ba,I.geometry._originOnly))&&(ya=Da?this._getSymbol(I):this._defaultMarker)){if(I._offsets&&I._offsets.join(",")===pa.join(",")?xa=!0:I._offsets=pa,!ta||T||!xa){var ra=I.geometry.type;ba={graphic:I};var Aa=I._bgShape,ua=Da&&!I.symbol?this._getRenderer(I):null,Ja=ua&&ua.backgroundFillSymbol;if("point"===ra)this._isInvalidShape(ya,ta)&&this._removeShape(I),I._shape=this._drawPoint(this._div,I.geometry,ya,I.getDojoShape(),pa,ua,I),Da&&this._symbolizePoint(I.getDojoShape(),ya,ua,I);else if("multipoint"===
ra)this._drawMarkers(I,ya,pa,ua),Da&&this._symbolizeMarkers(I,ya,ua);else{var ha;ra=ya;var ma;Da&&(ra=(ha="simplemarkersymbol"===ya.type||"picturemarkersymbol"===ya.type||"textsymbol"===ya.type?ya:null)?Ja:ya);if(Da&&ra&&-1<ra.type.indexOf("fillsymbol")){var R=this._bgGroup;var Ea=!(!R||!ha)}Aa&&!Ea&&this._removeBgShape(I);if(ra){!Ea&&(this._isInvalidShape(ra,I._shape)||I._shape&&I._shape._isCentroidMarker)&&this._removeShape(I,!1);if(ma=this._drawShape(I,pa,R||this._div,Ea?Aa:I.getDojoShape()))ma._isCentroidMarker=
!1;Da&&this._symbolizeShape(ma,ra,ua,ra===Ja,I);I[Ea?"_bgShape":"_shape"]=ma}if(ha){(this._isInvalidShape(ha,I._shape)||I._shape&&!I._shape._isCentroidMarker)&&this._removeShape(I,!1);var Ia=I.geometry.getCentroid();if(ma=Ia&&this._drawPoint(this._div,Ia,ha,I._shape,pa,ua,I))ma._isCentroidMarker=!0,this._symbolizePoint(ma,ha,ua,I);I._shape=ma}}P||(I._bgShape&&this._initNode(I,I._bgShape,I._bgShape!==Aa,ba,Ha),I._shape&&this._initNode(I,I._shape,I._shape!==ta,ba,Ha));I._applyDataAttrs();ba.node=I.getNode();
this.onGraphicDraw(ba)}}else ta&&this._removeShape(I)}catch(ea){this._errorHandler(ea,I)}},_initNode:function(I,T,ba,pa,ya){if(T=T&&T.getNode())T.e_graphic=I,this._addDataAttrs(I,ya,T),ba&&(pa.node=T,this.onGraphicNodeAdd(pa))},_removeShape:function(I,T,ba){var pa=I.getDojoShape(),ya=pa&&pa.getNode();pa&&!ba&&(pa.removeShape(),pa.destroy());I._shape=I._offsets=null;!1!==T&&this._removeBgShape(I,ba);if(ya&&(ya.e_graphic=null,!P))this.onGraphicNodeRemove({graphic:I,node:ya})},_removeBgShape:function(I,
T){var ba=I._bgShape,pa=ba&&ba.getNode();ba&&!T&&(ba.removeShape(),ba.destroy());I._bgShape=null;if(pa&&(pa.e_graphic=null,!P))this.onGraphicNodeRemove({graphic:I,node:pa})},_addDataAttrs:function(I,T,ba){var pa=I.attributes,ya,Da=T?T.length:0,Ha=this._getRenderer(I);if(ba&&pa){for(ya=0;ya<Da;ya++)(ba=T[ya])&&I.attr("data-"+ba,pa[ba]);!this.styling&&Ha&&(Ha.getBreakIndex?(T=Ha.getBreakIndex(I),I.attr("data-class-break",-1!==T?T:null)):Ha.getUniqueValueInfo&&(T=Ha.getUniqueValueInfo(I),I.attr("data-unique-value",
T?T.value:null)))}},_drawShape:function(I,T,ba,pa){I=I.geometry;var ya=I.type,Da=this._map,Ha=Da.extent,ta=Da.width,xa=Da.height;Da=Da.__visibleRect;var ra=[],Aa;var ua="extent"===ya;if("rect"===ya||ua)ra={x:0,y:0,spatialReference:I.spatialReference},ra.x=ua?I.xmin:I.x,ra.y=ua?I.ymax:I.y,ya=L.toScreenPoint(Ha,ta,xa,ra),ra.x=ua?I.xmax:I.x+I.width,ra.y=ua?I.ymin:I.y+I.height,I=L.toScreenPoint(Ha,ta,xa,ra),T={x:ya.x-Da.x+T[0],y:ya.y-Da.y,width:Math.abs(I.x-ya.x),height:Math.abs(I.y-ya.y)},0===T.width&&
(T.width=1),0===T.height&&(T.height=1),pa=this._drawRect(ba,pa,T);else if("polyline"===ya||"polygon"===ya){ua=0;for(Aa=T.length;ua<Aa;ua++)ra=ra.concat(L._toScreenPath(Ha,ta,xa,I,-Da.x+T[ua],-Da.y));pa=this._drawPath(ba,pa,ra);this._rendererLimits&&("polyline"===ya?this._clipPolyline(pa,I):this._clipPolygon(pa,I))}return pa},_drawRect:function(I,T,ba){return T?T.setShape(ba):I.createRect(ba)},_drawImage:function(I,T,ba){return T?T.setShape(ba):I.createImage(ba)},_drawCircle:function(I,T,ba){return T?
T.setShape(ba):I.createCircle(ba)},_drawPath:function(){return M?function(I,T,ba,pa){ba=pa?ba:ba.join(" ");if(T)return T.setShape(ba);T=I.createObject(pa?c.Path:c.EsriPath,ba);I._overrideSize(T.getEventSource());return T}:function(I,T,ba,pa){ba=pa?ba:ba.join(" ");return T?T.setShape(ba):I.createPath(ba)}}(),_drawText:function(I,T,ba){return T?T.setShape(ba):I.createText(ba)},_evalSDRenderer:function(I){var T=this._map,ba=this.renderer,pa,ya=this._rndForScale;T&&T.loaded&&ba&&ba.getRendererInfo&&(pa=
"zoom"===ba.rangeType?ba.getRendererInfoByZoom(T.getZoom()):ba.getRendererInfoByScale(T.getScale()));this._rndForScale=pa&&pa.renderer;I||this._rndForScale==ya||this.emit("renderer-change",{renderer:this._rndForScale})},_getRenderer:function(I){var T=this._rndForScale||this.renderer;I&&T&&T.getObservationRenderer&&(T=T.getObservationRenderer(I));return T},_getSymbol:function(I){var T=this._getRenderer();return I.symbol||T&&T.getSymbol(I)},_getVariable:function(I,T,ba){if(I)var pa=(I=I.getVisualVariablesForType(T,
ba))&&I[0];return pa},_applyOpacity:function(I,T,ba,pa){T=T.getOpacity(pa,{opacityInfo:ba});null!=T&&(I=new x(I),I.a=T);return I},_symbolizeShape:function(I,T,ba,pa,ya){var Da=T.getStroke(),Ha=T.getFill(),ta=T.type,xa=-1!==ta.indexOf("linesymbol"),ra=-1!==ta.indexOf("fillsymbol")?null:this._getVariable(ba,"sizeInfo",!1),Aa=this._getVariable(ba,"colorInfo",!1),ua=this._getVariable(ba,"opacityInfo",!1),Ja=xa?"none"!==T.style:T.outline&&"none"!==T.outline.style,ha=xa?null:this._getVariable(ba,"sizeInfo",
"outline");ra=(ra=pa?ha:ha||ra)?ba.getSize(ya,{sizeInfo:ra,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):null;pa&&(Aa=ua=null);if((Aa||ua)&&"picturefillsymbol"!==ta)if(xa){var ma=Da&&Da.color;Aa&&(ma=ba.getColor(ya,{colorInfo:Aa})||ma);ma&&ua&&(ma=this._applyOpacity(ma,ba,ua,ya))}else if(Ha&&Ha.toCss){var R=Ha;Aa&&(R=ba.getColor(ya,{colorInfo:Aa})||R);R&&ua&&(R=this._applyOpacity(R,ba,ua,ya))}I.setStroke(!Ja||null==ra&&!ma?Da:g.mixin({},Da,null!=ra?{width:ra}:null,ma&&
{color:ma})).setFill(R||Ha);xa&&C.applyLineMarker(I,T,ma,this._acquireSVGMarker)},_smsToPath:function(){return M?function(I,T,ba,pa,ya,Da,Ha,ta,xa){switch(T){case I.STYLE_SQUARE:return["M",ya+","+Ha,"L",Da+","+Ha,Da+","+ta,ya+","+ta,"X","E"];case I.STYLE_CROSS:return["M",ba+","+Ha,"L",ba+","+ta,"M",ya+","+pa,"L",Da+","+pa,"E"];case I.STYLE_X:return["M",ya+","+Ha,"L",Da+","+ta,"M",ya+","+ta,"L",Da+","+Ha,"E"];case I.STYLE_DIAMOND:return["M",ba+","+Ha,"L",Da+","+pa,ba+","+ta,ya+","+pa,"X","E"];case I.STYLE_TARGET:return["M",
ya+","+Ha,"L",Da+","+Ha,Da+","+ta,ya+","+ta,ya+","+Ha,"M",ya-xa+","+pa,"L",ya+","+pa,"M",ba+","+(Ha-xa),"L",ba+","+Ha,"M",Da+xa+","+pa,"L",Da+","+pa,"M",ba+","+(ta+xa),"L",ba+","+ta,"E"]}}:function(I,T,ba,pa,ya,Da,Ha,ta,xa){switch(T){case I.STYLE_SQUARE:return["M",ya+","+Ha,Da+","+Ha,Da+","+ta,ya+","+ta,"Z"];case I.STYLE_TRIANGLE:return["M",ba+","+Ha,Da+","+ta,ya+","+ta,"Z"];case I.STYLE_CROSS:return["M",ba+","+Ha,ba+","+ta,"M",ya+","+pa,Da+","+pa];case I.STYLE_X:return["M",ya+","+Ha,Da+","+ta,"M",
ya+","+ta,Da+","+Ha];case I.STYLE_DIAMOND:return["M",ba+","+Ha,Da+","+pa,ba+","+ta,ya+","+pa,"Z"];case I.STYLE_TARGET:return I=["M",ya+","+Ha,Da+","+Ha,Da+","+ta,ya+","+ta,ya+","+Ha],xa&&I.push("M",ya-xa+","+pa,ya+","+pa,"M",ba+","+(Ha-xa),ba+","+Ha,"M",Da+xa+","+pa,Da+","+pa,"M",ba+","+(ta+xa),ba+","+ta),I}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",
textsymbol:"text"},_isInvalidShape:function(I,T){var ba=T&&T.shape&&T.shape.type,pa=I&&I.type,ya=I&&I.style;"rect"===ba&&(ba="path");pa&&(ya=this._typeMaps[pa]||ya);this._pathStyles[ya]&&(ya="path");return"shieldlabelsymbol"===pa?!0:!(!ba||!ya||ba===ya)},_reArialFont:/\s*(^|,)\s*arial\s*(,|$)\s*/i,_fallbackFont:"Arial",_drawPoint:function(I,T,ba,pa,ya,Da,Ha){var ta=ba.type,xa=this._map,ra=xa.__visibleRect,Aa=L.toScreenPoint(xa.extent,xa.width,xa.height,T).offset(-ra.x+ya[0],-ra.y);ra=Aa.x;var ua=
Aa.y;T=[];var Ja=this._getVariable(Da,"rotationInfo",!1);Ja=Ja?Da.getRotationAngle(Ha,{rotationInfo:Ja}):null;var ha=this._getVariable(Da,"sizeInfo",!1);xa=null!=Ha.size?Ha.size:ha&&Da.getSize(Ha,{sizeInfo:ha,shape:ba.style,resolution:xa.getResolutionInMeters(),scale:xa.getScale()});Ja&&T.push(l.rotategAt(Ja,Aa));if(0!==ba.xoffset||0!==ba.yoffset){var ma=l.translate(ba.xoffset,-ba.yoffset);T.push(ma)}0!==ba.angle&&T.push(l.rotategAt(ba.angle,Aa));if("simplemarkersymbol"===ta){var R=ba.style;Da=Math.round;
null!=xa?ma&&(null!=ma.dx&&(ma.dx=ma.dx/ba.size*xa),null!=ma.dy&&(ma.dy=ma.dy/ba.size*xa)):xa=ba.size;switch(R){case t.STYLE_SQUARE:case t.STYLE_TRIANGLE:case t.STYLE_CROSS:case t.STYLE_X:case t.STYLE_DIAMOND:ba=isNaN(xa)?16:xa/2;R=this._drawPath(I,pa,this._smsToPath(t,R,ra,ua,Da(ra-ba),Da(ra+ba),Da(ua-ba),Da(ua+ba)));break;case t.STYLE_TARGET:Ha=ba._targetWidth/2;ma=ba._targetHeight/2;R=this._drawPath(I,pa,this._smsToPath(t,R,ra,ua,Da(ra-Ha),Da(ra+Ha),Da(ua-ma),Da(ua+ma),ba._spikeSize));break;case t.STYLE_PATH:R=
this._drawPath(I,pa,ba.path,!0);ba=R.getBoundingBox();I=this._getScaleMatrix(ba,xa);1===I.xx&&1===I.yy||T.push(l.scaleAt(I.xx,I.yy,Aa));T.push(l.translate(-(ba.x+ba.width/2)+ra,-(ba.y+ba.height/2)+ua));break;default:ba=isNaN(xa)?16:xa/2,R=this._drawCircle(I,pa,{cx:ra,cy:ua,r:ba})}}else if("shieldlabelsymbol"===ta)R=ba.width,Aa=ba.height,pa=I.createGroup(),R=I.createImage({x:ra-R/2,y:ua-Aa/2,width:R,height:Aa,src:ba.url}),pa.add(R),null!=ba.font&&(ua+=.2*ba.getHeight(),I=I.createText({type:"text",
text:ba.text,x:ra,y:ua,align:"middle",decoration:ba.decoration,rotated:ba.rotated,kerning:ba.kerning}),I.setFont(ba.font),I.setFill(ba.color),pa.add(I)),R=pa;else if("picturemarkersymbol"===ta){if(null==xa?(R=ba.width,Aa=ba.height):(Aa=xa,R=ba.width/ba.height*Aa,ma&&(null!=ma.dx&&(ma.dx=ma.dx/ba.width*R),null!=ma.dy&&(ma.dy=ma.dy/ba.height*Aa))),R=this._drawImage(I,pa,{x:ra-R/2,y:ua-Aa/2,width:R,height:Aa,src:ba.url}),S&&(I=R.getNode()))ba=(ba=this._getVariable(Da,"opacityInfo",!1))?Da.getOpacity(Ha,
{opacityInfo:ba}):null,null!=ba?I.setAttribute("opacity",ba):I.setAttribute("opacity",1)}else if("textsymbol"===ta){if(Da=ba.font){R=null!=xa;Ha=Da.family&&!this._reArialFont.test(Da.family);if(R||Ha||P)Da=new Da.constructor(Da.toJson());R&&Da.setSize(xa);P&&(Da.size+="px");Ha&&Da.setFamily(Da.family+","+this._fallbackFont)}R=this._drawText(I,pa,{type:"text",text:ba.text,x:ra,y:ua,align:ba.getSVGAlign(),decoration:ba.decoration||Da&&Da.decoration,rotated:ba.rotated,kerning:ba.kerning});Da&&R.setFont(Da);
S&&(I=R.getNode(),ra=ba.getSVGBaseline(),ua=ba.getSVGBaselineShift(),I&&(I.setAttribute("dominant-baseline",ra),ua&&I.setAttribute("baseline-shift",ua),this._applyHalo(R,ba.haloColor,ba.haloSize)))}R.setTransform(l.multiply(T));R._wrapOffsets=ya;return R},_acquireSVGMarker:function(I,T,ba,pa){I=this._getSVGMarkerId(T,pa);var ya=this._getSVGMarker(I);ya||(ya=C.createSVGMarker(T,I,ba,pa),this._div.getParent().defNode.appendChild(ya),this._lineMarkers[I]=ya);return ya},_getSVGMarkerId:function(I,T){return"marker_"+
this._map.id+"_"+I.r+"_"+I.g+"_"+I.b+"_"+T},_getSVGMarker:function(I){return this._lineMarkers[I]},_updateSVGMarkers:function(){if(S&&K){var I=this._lineMarkers,T;for(T in I){var ba=I[T];ba.setAttribute("id",T+"_temp");ba.setAttribute("id",T)}}},_applyHalo:function(I,T,ba){var pa=T&&ba?this._getHaloId(T,ba):null;I.setFilter(T&&ba?z("webkit")||z("ff")?this._getDilateFilter(T,ba,pa):this._getOffsetFilter(T,ba,pa):null)},_getDilateFilter:function(I,T,ba){var pa=this._getSVGFilter(ba);pa||(pa=this._createSVGFilter({id:ba},
[r.feMorphology({operator:"dilate",radius:T,result:"dilated"}),r.feFlood({"flood-color":I.toCss(!0)}),r.feComposite({in2:"dilated",operator:"in",result:"composite"}),r.feMerge("composite","SourceGraphic")]));return pa},_getOffsetFilter:function(I,T,ba){var pa=this._getSVGFilter(ba);if(!pa){I=I.toCss(!0);pa=this._offsetPrimitives;var ya,Da=pa.length,Ha=[],ta=[];for(ya=0;ya<Da;ya++){var xa=pa[ya],ra="offset"+xa.dir,Aa="composite"+xa.dir;ta.push(Aa);Ha.push(r.feOffset({dx:xa.dx*T,dy:xa.dy*T,"in":"SourceAlpha",
result:ra}),r.feFlood({"flood-color":I}),r.feComposite({in2:ra,operator:"in",result:Aa}))}ta.push("SourceGraphic");Ha.push(r.feMerge.apply(r.feMerge,ta));pa=this._createSVGFilter({id:ba},Ha)}return pa},_offsetPrimitives:[{dir:"L",dx:-1,dy:0},{dir:"TL",dx:-1,dy:-1},{dir:"T",dx:0,dy:-1},{dir:"TR",dx:1,dy:-1},{dir:"R",dx:1,dy:0},{dir:"BR",dx:1,dy:1},{dir:"B",dx:0,dy:1},{dir:"BL",dx:-1,dy:1}],_getHaloId:function(I,T){return"halo_"+this._map.id+"_"+this.id+"_"+I.r+"_"+I.g+"_"+I.b+"_"+I.a+"_"+T},_getSVGFilter:function(I){return this._svgFilters[I]},
_createSVGFilter:function(I,T){var ba=r.createFilter(I,T),pa=this._map,ya=pa.__visibleRect;ba.x=-ya.x;ba.y=-ya.y;ba.width=pa.width;ba.height=pa.height;return this._svgFilters[I.id]=ba},_updateSVGFilters:function(I,T,ba,pa){var ya=this._svgFilters,Da,Ha,ta;for(Ha in ya)if(Da=ya[Ha]){if(ta=k.byId(Ha))null!=I&&ta.setAttribute("x",I),null!=T&&ta.setAttribute("y",T),null!=ba&&ta.setAttribute("width",ba),null!=pa&&ta.setAttribute("height",pa);null!=I&&(Da.x=I);null!=T&&(Da.y=T);null!=ba&&(Da.width=ba);
null!=pa&&(Da.height=pa)}},_getScaleMatrix:function(I,T){var ba=I.width/I.height,pa=1,ya=1;isNaN(T)||(1<ba?(pa=T/I.width,ya=T/ba/I.height):(ya=T/I.height,pa=T*ba/I.width));return{xx:pa,yy:ya}},_symbolizePoint:function(I,T,ba,pa){var ya=T.type,Da=T.style;if("shieldlabelsymbol"!==ya&&"picturemarkersymbol"!==ya){var Ha=T.getStroke();T=T.getFill();Da=Da===t.STYLE_X||Da===t.STYLE_CROSS;var ta=Ha&&Ha.color,xa=Da?ta:T;if(ba){var ra=this._getVariable(ba,"colorInfo",!1),Aa=this._getVariable(ba,"opacityInfo",
!1);ra&&(xa=ba.getColor(pa,{colorInfo:ra})||xa);xa&&Aa&&(xa=this._applyOpacity(xa,ba,Aa,pa));xa&&(Da?xa!==ta&&(Ha=Ha?g.mixin({},Ha):{},Ha.color=xa):xa!==T&&(T=xa))}"textsymbol"===ya?I.setFill(T):"simplemarkersymbol"===ya&&I.setFill(T).setStroke(Ha)}},_drawMarkers:function(I,T,ba,pa){var ya=I.geometry,Da=ya.points,Ha=I.getDojoShape()||this._div.createGroup(),ta,xa=Da.length,ra=[],Aa=0,ua,Ja=ba?ba.length:0;Ha.children[0]&&this._isInvalidShape(T,Ha.children[0])&&Ha.clear();for(ta=0;ta<xa;ta++){var ha=
Da[ta];for(ua=0;ua<Ja;ua++)ra[0]=ba[ua],this._drawPoint(Ha,{x:ha[0],y:ha[1],spatialReference:ya.spatialReference},T,Ha.children[Aa++],ra,pa,I)}T=Ha.children.length;if(xa*ba.length<T)for(ta=T-1;ta>=xa*ba.length;ta--)Ha.children[ta].removeShape();I._shape=Ha},_symbolizeMarkers:function(I,T,ba){var pa=I.getDojoShape().children,ya,Da=pa.length;for(ya=0;ya<Da;ya++)this._symbolizePoint(pa[ya],T,ba,I)},_errorHandler:function(I,T){T&&(I.message="Unable to draw graphic (geometry:"+(T.geometry?T.geometry.declaredClass:
null)+", symbol:"+(T.symbol?T.symbol.declaredClass:null)+"): "+I.message);this.inherited(arguments)},_rendererLimits:function(){if(M){var I=1E5;var T=-1E5;var ba=1E5}else z("chrome")&&6>z("chrome")&&(I=8150,T=-1E4,ba=1E4);if(I)return{clipLimit:I,rangeMin:T,rangeMax:ba,clipBBox:[-I,-I,I,I],clipSegments:[[[-I,-I],[I,-I]],[[I,-I],[I,I]],[[I,I],[-I,I]],[[-I,I],[-I,-I]]]}}(),_clipPolyline:function(I,T){var ba=this._getCorners(I,T),pa=ba.br,ya=this._rendererLimits,Da=ya.rangeMin,Ha=ya.rangeMax,ta=ya.clipBBox,
xa=ya.clipSegments;ya=this._isPointWithinRange;var ra=this._isPointWithinBBox,Aa=this._getClipperIntersection,ua=this._getPlaneIndex;if(!ya(ba.tl,Da,Ha)||!ya(pa,Da,Ha)){M&&this._createSegments(I);var Ja=[];d.forEach(I.segments,function(ha){ha=ha.args;var ma=ha.length,R=[],Ea;for(Ea=0;Ea<ma;Ea+=2){var Ia=[ha[Ea],ha[Ea+1]],ea=[ha[Ea+2],ha[Ea+3]],Ya=ra(Ia,ta),Xa=ra(ea,ta);if(Ya^Xa){if(Xa=Aa([Ia,ea],xa))Ya?(Ea?R.push(Xa[1]):R.push(Ia,Xa[1]),Ja.push(R),R=[]):R.push(Xa[1],ea)}else Ya?Ea?R.push(ea):R.push(Ia,
ea):(Xa=ua(Ia,ta),Ya=ua(ea,ta),-1!==Xa&&-1!==Ya&&Xa!==Ya&&(Ia=Aa([Ia,ea],xa,!0),0<Ia.length&&(Ia[Xa]||(Xa=Ia[Xa[0]]?Xa[0]:Xa[1]),Ia[Ya]||(Ya=Ia[Ya[0]]?Ya[0]:Ya[1]),ea=Ia[Xa],Ia=Ia[Ya],ea&&R.push(ea),Ia&&(R.push(Ia),Ja.push(R),R=[]))))}Ja.push(R)});I.setShape(this._getPathStringFromPaths(Ja))}},_clipPolygon:function(I,T){var ba=this._getCorners(I,T),pa=ba.br,ya=this._rendererLimits,Da=ya.clipLimit,Ha=ya.rangeMin,ta=ya.rangeMax,xa=ya.clipBBox,ra=ya.clipSegments;ya=this._isPointWithinRange;var Aa=this._isPointWithinBBox,
ua=this._getClipperIntersection,Ja=this._getPlaneIndex,ha=H._pointLineDistance;ya(ba.tl,Ha,ta)&&ya(pa,Ha,ta)||(M&&this._createSegments(I),ba=d.filter(I.segments,function(ma){return ma.args&&ma.args.length}),ba=d.map(ba,function(ma){var R=ma.args,Ea=R.length,Ia=[];ma=[];var ea;for(ea=0;ea<Ea;ea+=2){var Ya=[R[ea],R[ea+1]],Xa=[R[ea+2],R[ea+3]];if(ea===Ea-2){Ia.push(Ya);break}var Ba=Aa(Ya,xa),U=Aa(Xa,xa);Ia.push(Ya);if(Ba^U){if(U=ua([Ya,Xa],ra))Ya=U[1],Ya[Ba?"inOut":"outIn"]=!0,Ia.push(Ya),ma.push([Ba?
"INOUT":"OUTIN",Ia.length-1,U[0]])}else if(!Ba){Ba=Ja(Ya,xa);var la=Ja(Xa,xa);-1!==Ba&&-1!==la&&Ba!==la&&(U=ua([Ya,Xa],ra,!0),0<U.length?(U[Ba]||(Ba=U[Ba[0]]?Ba[0]:Ba[1]),U[la]||(la=U[la[0]]?la[0]:la[1]),Ya=U[Ba],Xa=U[la],Ya&&(Ya.outIn=!0,Ia.push(Ya),ma.push(["OUTIN",Ia.length-1,Ba])),Xa&&(Xa.inOut=!0,Ia.push(Xa),ma.push(["INOUT",Ia.length-1,la]))):g.isArray(Ba)&&g.isArray(la)&&(U=Ba.concat(la),U.sort(),"0123"===U.join("")&&(U=[],3===Ba[0]+Ba[1]?U.push([Da,-Da],[-Da,Da]):U.push([-Da,-Da],[Da,Da]),
Ba=ha(U[0],[Ya,Xa]),Ya=ha(U[1],[Ya,Xa]),Ia.push(Ba<Ya?U[0]:U[1]))))}}var na=xa[0],V=xa[1],fa=xa[2],qa=xa[3];d.forEach(Ia,function(Ca){Ca[0]<na&&(Ca[1]>=V&&Ca[1]<=qa?Ca[0]=na:(Ca[0]=na,Ca[1]=Ca[1]<V?V:qa))});d.forEach(Ia,function(Ca){Ca[1]<V&&(Ca[0]>=na&&Ca[0]<=fa?Ca[1]=V:(Ca[1]=V,Ca[0]=Ca[0]<na?na:fa))});d.forEach(Ia,function(Ca){Ca[0]>fa&&(Ca[1]>=V&&Ca[1]<=qa?Ca[0]=fa:(Ca[0]=fa,Ca[1]=Ca[1]<V?V:qa))});d.forEach(Ia,function(Ca){Ca[1]>qa&&(Ca[0]>=na&&Ca[0]<=fa?Ca[1]=qa:(Ca[1]=qa,Ca[0]=Ca[0]<na?na:fa))});
R=0;Ea=ma.length;if(0<Ea){do{Xa=ma[R];ea=ma[(R+1)%Ea];if(Xa[2]===ea[2]&&"INOUT"===Xa[0]&&"OUTIN"===ea[0])if(Ya=Xa[1],ea=ea[1],Ya<ea)for(Ya+=1;Ya<ea;Ya++)Ia[Ya][2]=!0;else if(Ya>ea){for(Ya+=1;Ya<Ia.length;Ya++)Ia[Ya][2]=!0;for(Ya=0;Ya<ea;Ya++)Ia[Ya][2]=!0}R=(R+1)%Ea}while(0!==R)}Ea=Ia[0];R=Ia[Ia.length-1];Ea[2]&&(R[2]=!0,d.some(ma,function(Ca){return 1===Ca[1]?(Ia.splice(Ia.length-1,0,g.clone(Ia[1])),!0):!1}));Ia=d.filter(Ia,function(Ca){return Ca[2]?!1:!0});for(R=0;R<Ia.length-1;R++)Ea=Ia[R],(ea=
Ia[R+1])&&Ea[0]===ea[0]&&Ea[1]===ea[1]&&(ea.outIn?Ea.outIn=!0:ea.inOut&&(Ea.inOut=!0),Ia.splice(R+1,1));Ea=Math.abs;ma=[];for(R=0;R<Ia.length-1;R++){Xa=Ia[R];Ya=Xa[0];Xa=Xa[1];Ba=Ea(Ya)===Da;U=Ea(Xa)===Da;ea=Ia[R+1];la=ea[0];ea=ea[1];var va=Ea(la)===Da,Fa=Ea(ea)===Da;Ba&&Fa?ma.push([R+1,[Ya,ea]]):U&&va&&ma.push([R+1,[la,Xa]])}for(R=ma.length-1;0<=R;R--)ea=ma[R],Ya=Ia[ea[0]-1],Ea=Ia[ea[0]],Ya.outIn||Ya.inOut||Ea.outIn||Ea.inOut||Ia.splice(ea[0],0,ea[1]);Ea=Ia[0];R=Ia[Ia.length-1];Ea[0]===R[0]&&Ea[1]===
R[1]||Ia.push(Ea);return Ia}),I.setShape(this._getPathStringFromPaths(ba)))},_getCorners:function(I,T){if(M){var ba=this._map,pa=T.getExtent(),ya=pa.spatialReference,Da=ba.toScreen(new E(pa.xmin,pa.ymax,ya));ba=ba.toScreen(new E(pa.xmax,pa.ymin,ya));return{tl:Da,br:ba}}Da=I.getTransformedBoundingBox();return{tl:Da[0],br:Da[2]}},_createSegments:function(I){I.shape.path=I.vmlPath;I.segmented=!1;I._confirmSegmented();var T=I.segments;1<T.length&&(I.segments=d.filter(T,function(ba,pa,ya){pa=ya[pa+1];
return"M"===ba.action&&pa&&"L"===pa.action?(ba.args=ba.args.concat(pa.args),!0):!1}))},_getPathStringFromPaths:function(I){M?(I=d.map(I,function(T){return"m "+d.map(T,function(ba,pa){return(1===pa?"l ":"")+ba.join(",")}).join(" ")}),I.push("e")):I=d.map(I,function(T){return"M "+d.map(T,function(ba){return ba.join(",")}).join(" ")});return I.join(" ")},_isPointWithinBBox:function(I,T){var ba=T[1],pa=T[2],ya=T[3],Da=I[0],Ha=I[1];return Da>T[0]&&Da<pa&&Ha>ba&&Ha<ya?!0:!1},_isPointWithinRange:function(I,
T,ba){var pa=I.x;I=I.y;return pa<T||I<T||pa>ba||I>ba?!1:!0},_getClipperIntersection:function(I,T,ba){var pa,ya=H._getLineIntersection2,Da=Math.round,Ha={length:0};for(pa=0;4>pa;pa++){var ta=ya(I,T[pa]);if(ta)if(ta[0]=Da(ta[0]),ta[1]=Da(ta[1]),ba)Ha[pa]=ta,Ha.length++;else return[pa,ta]}return ba?Ha:null},_getPlaneIndex:function(I,T){var ba=I[0],pa=I[1],ya=T[0],Da=T[1],Ha=T[2],ta=T[3];return ba<=ya?pa>=Da&&pa<=ta?3:pa<Da?[0,3]:[2,3]:pa<=Da?ba>=ya&&ba<=Ha?0:ba<ya?[3,0]:[1,0]:ba>=Ha?pa>=Da&&pa<=ta?1:
pa<Da?[0,1]:[2,1]:pa>=ta?ba>=ya&&ba<=Ha?2:ba<ya?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},onInfoTemplateChange:function(){},onSurfaceChange:function(){},onWebGLEnabledChange:function(){},setInfoTemplate:function(I){this.infoTemplate=I;this._evalSurfaceType();this.onInfoTemplateChange()},add:function(I,
T){if(I._graphicsLayer===this)return I;I._suspended=this._suspendGraphics;T||this.graphics.push(I);I._graphicsLayer=this;I._sourceLayer||(I._layer&&"esri.layers.GraphicsLayer"!==I._layer.declaredClass?I._sourceLayer=I._layer:"esri.layers.GraphicsLayer"!==this.declaredClass&&(I._sourceLayer=this));I._layer=this;this.hasWebGLSurface()||(this._updateExtent(I),this._draw(I));if(!T)this.onGraphicAdd(I);return I},remove:function(I,T,ba){if(!T&&!ba){T=this.graphics;var pa;if(-1===(pa=d.indexOf(T,I)))return null;
if(!da||64<=da)T.splice(pa,1);else{var ya=T.length;if(ya){for(;pa<ya;)T[pa]=T[pa+1],pa++;T.length--}}}this.hasWebGLSurface()||I.getDojoShape()&&this._removeShape(I,null,ba);I._shape=I._graphicsLayer=null;this.onGraphicRemove(I);return I},clear:function(I,T){var ba=this.graphics,pa,ya=!M;for(pa=ba.length-1;0<=pa;pa--)this.remove(ba[pa],null,ya);this.graphics=[];this.hasWebGLSurface()||this._destroyAllNodes();if(!T)this.onGraphicsClear()},_destroyAllNodes:function(){if(!M&&this._div){var I;this._childLayer&&
(I=this._childLayer.getNode())&&I.parentNode&&I.parentNode.removeChild(I);this._bgGroup.clear();this._div.clear();this._bgGroup=this._div.createGroup();I&&this._div.getEventSource().appendChild(I);this._initOpacity()}},clearNodes:function(){if(!this.hasWebGLSurface()){var I=this.graphics,T=I.length,ba;for(ba=0;ba<T;ba++)this._removeShape(I[ba],!0,!0);this._destroyAllNodes()}},_graphicVisibilityChanged:function(I){},_setIEOpacity:function(I,T){var ba=I&&I.getNode();if(ba){var pa=I.strokeStyle,ya=ba.stroke;
pa&&ya&&(ya.opacity=pa.color.a*T);pa=I.fillStyle;ya=ba.fill;pa&&ya&&("tile"===ya.type?h.set(ba,"opacity",T):ya.opacity=pa.a*T)}},setOpacity:function(I,T){if(T||this.opacity!=I){var ba=this._div;ba&&!this.hasWebGLSurface()&&(M?(d.forEach(this.graphics,function(pa){this._setIEOpacity(pa._shape,I);this._setIEOpacity(pa._bgShape,I)},this),ba._esriIeOpacity=I,this._bgGroup._esriIeOpacity=I):"canvas-2d"===this.surfaceType?h.set(ba.getEventSource(),"opacity",I):ba.getEventSource().setAttribute("opacity",
I));this.opacity=I;if(!T)this.onOpacityChange(I)}},setRenderer:function(I){this.renderer=I;this._evalSDRenderer(!0);this._evalSurfaceType();this.emit("renderer-change",{renderer:this._rndForScale||I})}});A=A([m,J],{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this._processEvent=g.hitch(this,this._processEvent);this._initLayer()},_initLayer:function(){this.loaded=!0;this.onLoad(this)},_setMap:function(){var I=this.inherited("_setMap",arguments);this.enableMouseEvents();return I},
_unsetMap:function(){this.disableMouseEvents();this.inherited("_unsetMap",arguments)},_processEvent:function(I){var T=this._map,ba=I.target,pa;I.screenPoint=new F(I.pageX-T.position.x,I.pageY-T.position.y);for(I.mapPoint=T.toMap(I.screenPoint);ba&&!(pa=ba.e_graphic);)ba=ba.parentNode;if(pa)return I.graphic=pa,I},_onMouseOverHandler:function(I){if(this._processEvent(I))this.onMouseOver(I)},_onMouseMoveHandler:function(I){if(this._processEvent(I))this.onMouseMove(I)},_onMouseDragHandler:function(I){if(this._processEvent(I))this.onMouseDrag(I)},
_onMouseOutHandler:function(I){if(this._processEvent(I))this.onMouseOut(I)},_onMouseDownHandler:function(I){this._downGr=this._downPt=null;this._processEvent(I)&&(b.disconnect(this._onmousemove_connect),b.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=b.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=I.graphic,this._downPt=I.screenPoint.x+","+I.screenPoint.y,this.onMouseDown(I))},_onMouseUpHandler:function(I){this._upGr=this._upPt=null;this._processEvent(I)&&
(b.disconnect(this._onmousedrag_connect),b.disconnect(this._onmousemove_connect),this._onmousemove_connect=b.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=I.graphic,this._upPt=I.screenPoint.x+","+I.screenPoint.y,this.onMouseUp(I))},_onClickHandler:function(I){if(this._processEvent(I)){var T=this._downGr,ba=this._upGr;T&&ba&&T===ba&&this._downPt===this._upPt&&(M&&(B._ieGraphic=I.graphic),this.onClick(I))}},_onDblClickHandler:function(I){if(this._processEvent(I))this.onDblClick(I)},
onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var I=b.connect,T=this._div.getEventSource();P||(this._onmouseover_connect=I(T,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=I(T,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=I(T,"onmouseout",this,"_onMouseOutHandler"),
this._onmousedown_connect=I(T,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=I(T,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=I(T,"onclick",this,"_onClickHandler"),this._ondblclick_connect=I(T,"ondblclick",this,"_onDblClickHandler"));this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var I=b.disconnect;I(this._onmouseover_connect);I(this._onmousemove_connect);I(this._onmousedrag_connect);I(this._onmouseout_connect);I(this._onmousedown_connect);
I(this._onmouseup_connect);I(this._onclick_connect);I(this._ondblclick_connect);this._mouseEvents=!1}}});A._GraphicsContainer=q;A._GraphicsLayer=m;g.setObject("layers.GraphicsLayer",A,B);g.setObject("layers._GraphicsContainer",q,B);g.setObject("layers._GraphicsLayer",m,B);return A})},"esri/layers/gfxSniff":function(){define(["dojo/has","dojox/gfx"],function(D,A){D.add("esri-svg",function(){return-1!==A.renderer.toLowerCase().indexOf("svg")});return D})},"esri/layers/support/webglUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/has","../../kernel"],function(D,A,a,b){var g=!1,d=a("esri-webgl-max-contexts");d=null!=d?d:a("esri-mobile")?8:16;var e={isWebGLSupported:function(){return!!g},isWebGLEnabled:function(){return this.isWebGLSupported()&&!!a("esri-featurelayer-webgl")},createCanvas:function(f,n){var h=document.createElement("canvas");h.style.width=f+"px";h.style.height=n+"px";return h},createWebGLContext:function(f){var n;A.some(["webgl","experimental-webgl","webkit-3d","moz-webgl"],function(h){try{n=
f.getContext?f.getContext(h):null}catch(k){n=null}return!!n});return n},_contextOwners:[],isContextAvailable:function(){return-1===d||0<d&&e._contextOwners.length<d},acquireContext:function(f){return-1!==A.indexOf(e._contextOwners,f)?!0:e.isContextAvailable()?(e._contextOwners.push(f),!0):!1},releaseContext:function(f){f=A.indexOf(e._contextOwners,f);-1!==f&&e._contextOwners.splice(f,1)}};g=e.createWebGLContext(e.createCanvas());D.setObject("layers.support.webglUtils",e,b);return e})},"esri/layers/support/WebGLSurface":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/_base/array","dojo/has","../../kernel"],function(D,A,a,b,g){D=D(null,{map:null,node:null,renderers:null,constructor:function(d){A.mixin(this,d);this.renderers=[]},destroy:function(){a.forEach(this.renderers,function(d){d.destroy()});this.renderers=null},getEventSource:function(){return this.node},createRenderer:function(d,e,f,n){d=new d({surface:this,width:e,height:f,map:this.map,layer:n});this.renderers.push(d);return d},destroyRenderer:function(d){var e=a.indexOf(this.renderers,
d);-1<e&&(d.destroy(),this.renderers.splice(e,1))},_createNode:function(){var d=document.createElement("div");d.style.pointerEvents="auto";d.style.position="absolute";return d}});A.setObject("layers.support.WebGLSurface",D,g);return D})},"esri/symbols/utils":function(){define("dojo/_base/lang dojo/_base/window dojo/has dojox/gfx ../kernel ../Color".split(" "),function(D,A,a,b,g,d){function e(l){l.removeAttribute("marker-start");l.removeAttribute("marker-end");l.removeAttribute("opacity")}function f(l,
r){for(var m in r)l.setAttribute(m,r[m])}function n(l,r,m){r="url(#"+r.getAttribute("id")+")";l.rawNode.setAttribute("marker-"+m,r)}var h=-1!==b.renderer.toLowerCase().indexOf("svg"),k=9===a("ie"),c={marker:{markerWidth:"6",markerHeight:"6",markerUnits:"strokeWidth",orient:"auto"},spear:{marker:{end:{viewBox:"0 0 25.4 23.43",refX:"20",refY:"12.76"},start:{viewBox:"-25.4 0 25.4 23.43",refX:"-20",refY:"12.76"}},path:{common:{d:"M1.63 23.43 L5.37 16.6 L5.37 8.93 L1.63 2.09 L25.4 12.76 L1.63 23.43 Z",
"stroke-width":"0","fill-opacity":"1"},start:{transform:"matrix(-1, 0, 0, 1, 0, 0)"}}}};a={applyLineMarker:function(l,r,m,q){if(h&&!k){var v=l&&l.rawNode,B=r.marker;m=m||r.color;v&&"none"!==r.style&&m&&B&&"arrow"===B.style&&B.placement?v.getTotalLength&&0===v.getTotalLength()?e(v):(r=-1!==B.placement.indexOf("begin"),B=-1!==B.placement.indexOf("end"),r||B?(v.removeAttribute("stroke-opacity"),v.setAttribute("opacity",m.a),r?(r=q(l,m,"spear","start"),n(l,r,"start")):v.removeAttribute("marker-start"),
B?(m=q(l,m,"spear","end"),n(l,m,"end")):v.removeAttribute("marker-end")):e(v)):v&&e(v)}},createSVGMarker:function(l,r,m,q){m=c[m];var v=A.doc.createElementNS("http://www.w3.org/2000/svg","marker");v.setAttribute("id",r);f(v,c.marker);f(v,m.marker[q]);r=A.doc.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("fill",l.toCss());f(r,m.path.common);f(r,m.path[q]);v.appendChild(r);return v},create2DColorRamp:function(l){var r=l.surface.createGroup(),m=l.colors,q=l.numClasses;l=(l.size||
75)/q;for(var v=0;v<q;v++)for(var B=v*l,w=0;w<q;w++){var z=m[v][w];r.createRect({x:w*l,y:B,width:l,height:l}).setFill(z).setStroke(null)}return r},setSymbolFillColor:function(l,r){if(l)switch(r=r?new d(r):null,l.type){case "simplemarkersymbol":"cross"===l.style||"x"===l.style?l.outline&&l.outline.setColor(r):l.setColor(r);break;case "simplelinesymbol":case "cartographiclinesymbol":case "simplefillsymbol":case "shieldlabelsymbol":case "textsymbol":l.setColor(r)}}};D.setObject("renderer.utils",a,g);
return a})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(D,A,a,b,g,d,e,f,n,h){var k=function(){return 9>a("ie")?function(l,r,m,q,v,B,w,z,x){var y=[],u=Math.round,t,C=w.length,E;for(t=0;t<C;t++){var F=w[t];var G=z?z(F[0][0],F[0][1],x):F[0];if(1<(E=F.length)){var H=u((G[0]-l)*m+v);var L=u((r-G[1])*q+B);G=z?z(F[1][0],F[1][1],x):F[1];var J=u((G[0]-l)*m+v);G=u((r-
G[1])*q+B);y.push("M",H+","+L,"L",J+","+G);for(J=2;J<E;J++)G=z?z(F[J][0],F[J][1],x):F[J],H=u((G[0]-l)*m+v),L=u((r-G[1])*q+B),y.push(H+","+L)}else H=u((G[0]-l)*m+v),L=u((r-G[1])*q+B),y.push("M",H+","+L)}return y}:function(l,r,m,q,v,B,w,z,x,y){var u=[],t,C,E=Math.round;var F=0;for(t=w?w.length:0;F<t;F++){var G=w[F];u.push("M");var H=0;for(C=G?G.length:0;H<C;H++){var L=z?z(G[H][0],G[H][1],x):G[H];u.push(E((L[0]-l)*m+v)+","+E((r-L[1])*q+B))}y||u.push("Z")}return u}}(),c={toScreenPoint:function(l,r,m,
q,v){var B=l.spatialReference,w=q.spatialReference,z=q.x;q=q.y;B&&w&&!B.equals(w)&&B._canProject(w)&&(B=B.isWebMercator()?g.lngLatToXY(z,q):g.xyToLngLat(z,q,!0),z=B[0],q=B[1]);z=(z-l.xmin)*(r/l.getWidth());q=(l.ymax-q)*(m/l.getHeight());v||(z=Math.round(z),q=Math.round(q));return new d(z,q)},toScreenGeometry:function(l,r,m,q){var v=l.xmin,B=l.ymax,w=r/l.getWidth(),z=m/l.getHeight(),x=D.forEach,y=Math.round;if(q instanceof g)return new g(y((q.x-v)*w),y((B-q.y)*z));if(q instanceof n){l=new n;var u=
l.points;x(q.points,function(G,H){u[H]=[y((G[0]-v)*w),y((B-G[1])*z)]});return l}if(q instanceof h)return new h(y((q.xmin-v)*w),y((B-q.ymin)*z),y((q.xmax-v)*w),y((B-q.ymax)*w));if(q instanceof e){l=new e;var t=l.paths,C;x(q.paths,function(G,H){C=t[H]=[];x(G,function(L,J){C[J]=[y((L[0]-v)*w),y((B-L[1])*z)]})});return l}if(q instanceof f){l=new f;var E=l.rings,F;x(q.rings,function(G,H){F=E[H]=[];x(G,function(L,J){F[J]=[y((L[0]-v)*w),y((B-L[1])*z)]})});return l}},_toScreenPath:function(l,r,m,q,v,B){var w=
q instanceof e,z=l.spatialReference,x=q.spatialReference;if(z&&x&&!z.equals(x)&&z._canProject(x))if(z.isWebMercator())var y=g.lngLatToXY;else{y=g.xyToLngLat;var u=!0}return k(l.xmin,l.ymax,r/l.getWidth(),m/l.getHeight(),v,B,w?q.paths:q.rings,y,u,w)},toMapPoint:function(l,r,m,q){return new g(l.xmin+q.x/(r/l.getWidth()),l.ymax-q.y/(m/l.getHeight()),l.spatialReference)},toMapGeometry:function(l,r,m,q){var v=l.xmin,B=l.ymax,w=l.spatialReference,z=r/l.getWidth(),x=m/l.getHeight(),y=D.forEach;if(q instanceof
g)return new g(v+q.x/z,B-q.y/x,w);if(q instanceof n){l=new n(w);var u=l.points;y(q.points,function(G,H){u[H]=[v+G[0]/z,B-G[1]/x]});return l}if(q instanceof h)return new h(v+q.xmin/z,B-q.ymin/x,v+q.xmax/z,B-q.ymax/x,w);if(q instanceof e){l=new e(w);var t=l.paths,C;y(q.paths,function(G,H){C=t[H]=[];y(G,function(L,J){C[J]=[v+L[0]/z,B-L[1]/x]})});return l}if(q instanceof f){l=new f(w);var E=l.rings,F;y(q.rings,function(G,H){F=E[H]=[];y(G,function(L,J){F[J]=[v+L[0]/z,B-L[1]/x]})});return l}}};A.mixin(A.getObject("geometry",
!0,b),c);return c})},"esri/PluginTarget":function(){define("require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(D,A,a,b,g,d){function e(){A.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}e.prototype={addPlugin:function(f,n){var h=this,k=this._plugins,c=new g;try{D([f],function(l){f in k?c.resolve({id:k[f].declaredId||f.replace(/\//g,".")}):(k[f]=l,d(l.add(h,n),function(){var r={id:l.declaredId||f.replace(/\//g,".")};h.emit("plugin-add",
r);c.resolve(r)},function(r){c.reject(r)}))})}catch(l){c.reject(l)}return c.promise},removePlugin:function(f){if(f in this._plugins){var n=this._plugins[f];n.remove(this);delete this._plugins[f];this.emit("plugin-remove",{id:n.declaredId||f.replace(/\//g,".")})}},_pluginsHandler:function(){var f=this;a.some(arguments,function(n){if(n&&n.plugins&&n.plugins instanceof Array){n=n.plugins;var h;for(h=0;h<n.length;h++){var k=n[h];var c=k instanceof Object?k.id:k;f.addPlugin(c,k.options)}return!0}})}};
return e})},"esri/layers/FeatureType":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../symbols/jsonUtils ./FeatureTemplate ./support/domainUtils".split(" "),function(D,A,a,b,g,d,e,f,n){D=D(null,{declaredClass:"esri.layers.FeatureType",constructor:function(h){if(h&&A.isObject(h)){this.id=h.id;this.name=h.name;var k=h.symbol;k&&(this.symbol=e.fromJson(k));k=h.domains;var c=this.domains={};for(l in k)k.hasOwnProperty(l)&&(c[l]=n.fromJson(k[l]));if(h=
h.templates){var l=this.templates=[];for(k=0;k<h.length;k++)l.push(new f(h[k]))}}},toJson:function(){var h={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()},k,c=this.domains,l=this.templates,r=d.fixJson;if(c){var m=h.domains={};for(k in c)c.hasOwnProperty(k)&&(m[k]=c[k]&&c[k].toJson());r(m)}l&&(h.templates=a.map(l,function(q){return q.toJson()}));return r(h)}});A.setObject("layers.FeatureType",D,g);return D})},"esri/layers/FeatureTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../graphic".split(" "),
function(D,A,a,b,g,d){D=D(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(e){e&&A.isObject(e)&&(this.name=e.name,this.description=e.description,this.drawingTool=e.drawingTool,this.thumbnail=e.thumbnail,e=e.prototype,this.prototype=new d(e.geometry,null,e.attributes))},toJson:function(){return g.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,thumbnail:g.fixJson(A.clone(this.thumbnail)),prototype:this.prototype&&this.prototype.toJson()})}});
A.mixin(D,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",
TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});A.setObject("layers.FeatureTemplate",D,b);return D})},"esri/layers/support/domainUtils":function(){define("dojo/_base/lang dojo/has ../../kernel ../RangeDomain ../CodedValueDomain ../InheritedDomain".split(" "),function(D,A,a,b,g,d){A={fromJson:function(e){if(e)switch(e.type){case "range":var f=new b(e);break;case "codedValue":f=new g(e);break;case "inherited":f=
new d(e)}return f}};D.setObject("layers.support.domainUtils",A,a);return A})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Domain"],function(D,A,a,b,g){D=D([g],{declaredClass:"esri.layers.InheritedDomain"});A.setObject("layers.InheritedDomain",D,b);return D})},"esri/layers/FeatureSubtype":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./support/domainUtils".split(" "),function(D,A,a,b,g,d){D=D(null,
{declaredClass:"esri.layers.FeatureSubtype",constructor:function(e){if(e&&A.isObject(e)){this.code=e.code;this.name=e.name;this.defaultValues=e.defaultValues;e=e.domains;var f=this.domains={},n;for(n in e)e.hasOwnProperty(n)&&(f[n]=d.fromJson(e[n]))}},toJson:function(){var e=g.fixJson,f={code:this.code,name:this.name,defaultValues:e(A.clone(this.defaultValues))},n=this.domains;if(n){var h=f.domains={},k;for(k in n)n.hasOwnProperty(k)&&(h[k]=n[k]&&n[k].toJson());e(h)}return e(f)}});A.setObject("layers.FeatureSubtype",
D,b);return D})},"esri/layers/FeatureEditResult":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(g){g&&A.isObject(g)&&(this.objectId=g.objectId,this.globalId=g.globalId,this.success=g.success,g.success||(g=g.error,this.error=Error(),this.error.code=g.code,this.error.message=g.description))}});A.setObject("layers.FeatureEditResult",D,b);return D})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../symbols/TextSymbol ../symbols/ShieldLabelSymbol".split(" "),
function(D,A,a,b,g,d,e,f){var n=RegExp("__begin__","ig"),h=RegExp("__end__","ig"),k=/^__begin__/i,c=/__end__$/i;D=D(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,format:null,fieldInfos:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,sizeInfo:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter",
"below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd",
"below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd",
"always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(l){l&&(A.mixin(this,l),this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)||(this.labelPlacement=d.valueOf(this._labelPlacementLookup,l.labelPlacement)),l.format&&(this.format=l.format),l.fieldInfos&&(this.fieldInfos=l.fieldInfos),l.symbol&&(this.symbol="esriSHD"===l.symbol.type?new f(l.symbol):new e(l.symbol)),l=this.sizeInfo)&&(l.minSize&&(l.minSize=b.pt2px(l.minSize)),l.maxSize&&(l.maxSize=b.pt2px(l.maxSize)))},
getSymbol:function(){return this.symbol},toJson:function(){var l=this.sizeInfo;l&&(l=A.mixin({},l),l.minSize&&(l.minSize=b.px2pt(l.minSize)),l.maxSize&&(l.maxSize=b.px2pt(l.maxSize)));var r=d.fixJson(this.labelExpressionInfo&&A.clone(this.labelExpressionInfo));this._processLabelExpressionInfo(r);l={name:this.name,labelExpression:this.labelExpression,labelExpressionInfo:r,format:this.format||void 0,fieldInfos:this.fieldInfos||void 0,useCodedValues:this.useCodedValues,maxScale:this.maxScale,minScale:this.minScale,
where:this.where,sizeInfo:l||void 0,labelPlacement:this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,symbol:this.symbol&&this.symbol.toJson()};return d.fixJson(l)},_processLabelExpressionInfo:function(l){l&&l.value&&(l.expression=this._convertTemplatedStringToArcade(l.value))},_convertTemplatedStringToArcade:function(l){if(l){var r=A.replace(l,function(m,q){return'__begin__$feature["'+q+'"]__end__'});r=k.test(r)?r.replace(k,
""):'"'+r;r=c.test(r)?r.replace(c,""):r+'"';r=r.replace(n,'" + ').replace(h,' + "')}return r}});A.setObject("layers.LabelClass",D,g);return D})},"esri/symbols/ShieldLabelSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base ../kernel ../lang ../urlUtils ./MarkerSymbol ./Font".split(" "),function(D,A,a,b,g,d,e,f,n){var h={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};D=D(f,{declaredClass:"esri.symbol.ShieldLabelSymbol",type:"shieldlabelsymbol",color:[255,
255,255,1],width:32,height:32,font:b.defaultFont,constructor:function(k,c,l,r,m){k?A.isString(k)?(this.url=k,c&&(this.color=c),l&&(this.width=l),r&&(this.height=r),void 0!==m&&(this.font=m)):(this.width=b.pt2px(k.width),this.height=b.pt2px(k.height),c=k.imageData,9>a("ie")||!c||(l=this.url,this.url="data:"+(k.contentType||"image")+";base64,"+c,this.imageData=l)):A.mixin(this,h)},getStroke:function(){return null},getFill:function(){return this.color},setWidth:function(k){this.width=k;return this},
setHeight:function(k){this.height=k;return this},setUrl:function(k){k!==this.url&&(delete this.imageData,delete this.contentType);this.url=k;return this},setFont:function(k){this.font=k;return this},setText:function(k){this.text=k;return this},getWidth:function(){return this.width},getHeight:function(){return this.height},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,
stroke:null}},toJson:function(){var k=this.url,c=this.imageData;if(0===k.indexOf("data:")){var l=k;k=c;c=l.indexOf(";base64,")+8;c=l.substr(c)}k=e.getAbsoluteUrl(k);l=b.px2pt(this.width);l=isNaN(l)?void 0:l;var r=b.px2pt(this.height);r=isNaN(r)?void 0:r;k=d.fixJson(A.mixin(this.inherited("toJson",arguments),{type:"esriSHD",url:k,imageData:c,contentType:this.contentType,width:l,height:r}));this.font?(c=new n(this.font),k.font=c.toJson()):k.font=null;delete k.size;k.imageData||delete k.imageData;return k}});
D.defaultProps=h;A.setObject("symbol.ShieldLabelSymbol",D,g);g.symbol.defaultShieldLabelSymbol=h;return D})},"esri/layers/SnapshotMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../SpatialReference ../srUtils ../tasks/query ./RenderMode ./support/ParallelSnapshot".split(" "),function(D,A,a,b,g,d,e,f,n){D=D([f],{declaredClass:"esri.layers._SnapshotMode",maxFeatures:5E4,maxRecordCountFactor:1,scaleToTileFactor:1,_isSuspendedAtStartup:!1,_pendingRefresh:!1,constructor:function(h){this.featureLayer=
h;this._featureMap={};this._hasUpdateError=this._hasPartialFeatures=!1;this._drawFeatures=A.hitch(this,this._drawFeatures);this._queryErrorHandler=A.hitch(this,this._queryErrorHandler);this._handleSuccess=A.hitch(this,this._handleSuccess);this._handleError=A.hitch(this,this._handleError);this._handleProgress=A.hitch(this,this._handleProgress)},startup:function(){if(!this._started||this._isSuspendedAtStartup){this.inherited(arguments);var h=this.featureLayer,k=h.reHostedFS.test(h.url);this.pagination=
h.queryPagination&&null!=h.maxRecordCount;this._cacheHintSupported=h._isCacheHintSupported();this.scaleToTileFactor=this._getScaleToTileFactor();k&&this.pagination&&(this._parallelSnapshot=new n({layer:h,mode:this,queryTask:h._task}));this._isSuspendedAtStartup=h.suspended;this._startup()}},propertyChangeHandler:function(h){this._init&&(h?this.featureLayer._collection||this._fetchAll():this._applyTimeFilter())},destroy:function(){this._isSuspendedAtStartup=this._pendingRefresh=!1;this._cancelPendingRequest(this._pendingRequest);
this._parallelSnapshot&&this._parallelSnapshot.destroy();this.inherited(arguments)},drawFeature:function(h){var k=h.attributes[this.featureLayer.objectIdField];this._addFeatureIIf(k,h);this._incRefCount(k)},resume:function(){this._isSuspendedAtStartup||this._pendingRefresh?(this._isSuspendedAtStartup=!1,this._startup()):this.propertyChangeHandler(0)},refresh:function(){var h=this.featureLayer;h._collection?(h._fireUpdateStart(),h._refresh(!0),h._fireUpdateEnd()):this._fetchAll()},hasAllFeatures:function(){return!this._hasPartialFeatures},
hasUpdateError:function(){return this._hasUpdateError},canFetchPBF:function(h){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(h)},_startup:function(){this.featureLayer._collection?this._applyTimeFilter():this._fetchAll()},_fetchAll:function(){var h=this.featureLayer;h._collection||h.suspended||!h.isQueryable()?this._pendingRefresh=h.suspended:(this._pendingRefresh=!1,h._fireUpdateStart(),this._clearIIf(),this._hasUpdateError=this._hasPartialFeatures=!1,this._parallelSnapshot?
this._parallelSnapshot.fetch().then(this._handleSuccess,this._handleError,this._handleProgress):this._sendRequest())},_handleSuccess:function(h){this._hasPartialFeatures=h.hasPartialFeatures;this._hasUpdateError=h.hasUpdateError;this.featureLayer._fireUpdateEnd(null)},_handleError:function(h){this._queryErrorHandler(h)},_handleProgress:function(h){h.isError?this.featureLayer._errorHandler(h.error):this._addFeatures(h.features)},_getScaleToTileFactor:function(){var h=this.featureLayer.tileMaxRecordCount,
k=this.featureLayer.maxRecordCount,c=1;null!=h&&null!=k&&(c=Number((h/k).toFixed(2)));return c},_getPageSize:function(h){var k=this.featureLayer.tileMaxRecordCount;k="tile"===h.resultType&&k?k:this.featureLayer.maxRecordCount;h.maxRecordCountFactor&&(k=Math.floor(k*h.maxRecordCountFactor));return k},_sendRequest:function(h){var k=this.featureLayer,c=this._createQueryInfo(),l=c.query;this.pagination&&(this._pageSize=this._getPageSize(l),this._start=l.start=null==h?0:h,l.num=this._pageSize);this._pendingRequest&&
this._cancelPendingRequest(this._pendingRequest);this._pendingRequest=k._task.execute(l,this._drawFeatures,this._queryErrorHandler,c.pbf?{format:"pbf"}:null)},_drawFeatures:function(h){this._pendingRequest=null;this.featureLayer._isImageService&&10.7>this.featureLayer.version&&void 0===h.exceededTransferLimit&&(h.exceededTransferLimit=h.features.length===this.featureLayer.maxRecordCount);var k=this.featureLayer,c=h.exceededTransferLimit,l=c&&!k._collection;h=this._checkMaxLimit(h.features);var r=
h.maxLimitReached;this._addFeatures(h.features);this.pagination&&l&&!r||(this._hasPartialFeatures=!!c,k._fireUpdateEnd(null,c?{queryLimitExceeded:!0}:null));l&&(this.pagination&&!r&&this._sendRequest(this._start+this._pageSize),k.onQueryLimitExceeded())},_queryErrorHandler:function(h){this._pendingRequest=null;this._hasUpdateError=this._hasPartialFeatures=!0;var k=this.featureLayer;k._errorHandler(h);k._fireUpdateEnd(h)},_checkMaxLimit:function(h){var k=h?h.length:0,c=this.featureLayer.graphics.length+
k,l=c>=this.maxFeatures;if(l){var r=c-this.maxFeatures;r&&h.splice(k-r,r)}return{maxLimitReached:l,featuresDiscarded:c>this.maxFeatures,features:h}},_createQueryInfo:function(){var h=this.featureLayer,k=new e;k.outFields=h.getOutFields();k.where=h._getAttributeFilter()||"1\x3d1";k.returnGeometry=!0;k.outSpatialReference=d.createSpatialReference(this.map.spatialReference.toJson());k.timeExtent=h.getTimeDefinition();k.maxAllowableOffset=h._maxOffset;k.quantizationParameters=h._quantizationParameters;
k.orderByFields=h.supportsAdvancedQueries?h.getOrderByFields():null;k.multipatchOption=h.multipatchOption;h._ts&&(k._ts=(new Date).getTime());this._cacheHintSupported&&h._enableCacheHint(k);var c=this.canFetchPBF(k);h._enableEditModeQuantization(k,c);this._applyMaxRecordCountFactor(k,c);return{query:k,pbf:c}},_applyMaxRecordCountFactor:function(h,k){var c=this.featureLayer.advancedQueryCapabilities;this.featureLayer._isCacheHintEnabled(h)&&c&&c.supportsMaxRecordCountFactor&&("tile"!==h.resultType&&
1<this.scaleToTileFactor&&(h.maxRecordCountFactor=this.scaleToTileFactor),k&&1<this.maxRecordCountFactor&&(h.maxRecordCountFactor=this.maxRecordCountFactor),5<h.maxRecordCountFactor&&(h.maxRecordCountFactor=5))},_addFeatures:function(h){var k=this.featureLayer,c=k.objectIdField,l=h.length,r=k._selectedFeatures,m=k.mode===k.constructor.MODE_AUTO;k._fireUpdateStart();k._sortFeatures(h);for(k=0;k<l;k++){var q=h[k];var v=q.attributes[c];var B=this._addFeatureIIf(v,q);this._incRefCount(v);m&&B!==q&&r[v]&&
(B.setGeometry(q.geometry),B.setAttributes(q.attributes))}this._applyTimeFilter(!0)}});A.setObject("layers._SnapshotMode",D,b);return D})},"esri/layers/RenderMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../sniff","../kernel"],function(D,A,a,b,g){var d=!!b("esri-pbf");b=!!b("esri-featurelayer-pbf");D=D(null,{declaredClass:"esri.layers._RenderMode",enablePBFQuery:d&&b,initialize:function(e){this.map=e;this._init=!0},startup:function(){this._started=!0},propertyChangeHandler:function(e){},
destroy:function(){this._init=this._started=!1},drawFeature:function(e){},suspend:function(){},resume:function(){},refresh:function(){},hasAllFeatures:function(){return!0},hasUpdateError:function(){return!1},canFetchPBF:function(e){return!(!this.featureLayer._canFetchPBF()||!this.enablePBFQuery)},_incRefCount:function(e){(e=this._featureMap[e])&&e._count++},_decRefCount:function(e){(e=this._featureMap[e])&&e._count--},_getFeature:function(e){return this._featureMap[e]},_addFeatureIIf:function(e,f){var n=
this._featureMap,h=n[e],k=this.featureLayer;h||(n[e]=f,k._add(f),f._count=0);return h||f},_removeFeatureIIf:function(e){var f=this._featureMap[e],n=this.featureLayer;if(f){if(f._count)return;delete this._featureMap[e];n._remove(f)}return f},_registerFeature:function(e,f){var n=this._featureMap,h=n[e];h?(h.attributes=f.attributes,h.geometry=f.geometry):(n[e]=f,f._count=0,f._layer=f._graphicsLayer=f._sourceLayer=this.featureLayer);return h||f},_unregisterFeature:function(e){var f=this._featureMap,n=
f[e];n&&!n._count&&(delete f[e],n._graphicsLayer=null)},_clearIIf:function(){var e=this.featureLayer;var f=e.graphics,n=e._selectedFeatures,h=e.getSelectedFeatures().length,k=e.objectIdField;if(h)for(e=f.length-1;0<=e;e--){h=f[e];var c=h.attributes[k];c in n?h._count=1:(h._count=0,this._removeFeatureIIf(c))}else e.clear(),this._featureMap={}},_cancelPendingRequest:function(e){if(e)try{e.cancel()}catch(f){}},_toggleVisibility:function(e){var f=this.featureLayer,n=f.graphics,h=e?"show":"hide",k,c=n.length;
e=e&&f._ager;for(k=0;k<c;k++){var l=n[k];l[h]();e&&f._repaint(l)}},_applyTimeFilter:function(e){var f=this.featureLayer;if(f.timeInfo&&!f.suspended){e||f._fireUpdateStart();var n=f._trackManager;n&&n.clearTracks();var h=f.getTimeDefinition(),k=f._getOffsettedTE(f._mapTimeExtent);k?(k=f._getTimeOverlap(h,k))?(h=f._filterByTime(f.graphics,k.startTime,k.endTime),n&&n.addFeatures(h.match),a.forEach(h.match,function(c){var l=c._shape;c.visible||(c.show(),(l=c._shape)&&l._moveToFront());f._ager&&l&&f._repaint(c)}),
a.forEach(h.noMatch,function(c){c.visible&&c.hide()})):this._toggleVisibility(!1):(n&&n.addFeatures(f.graphics),this._toggleVisibility(!0));n&&(n.moveLatestToFront(),n.drawTracks());e||f._fireUpdateEnd()}}});A.setObject("layers._RenderMode",D,g);return D})},"esri/layers/support/ParallelSnapshot":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../../kernel".split(" "),function(D,A,a,b,g,d){D=D(null,{declaredClass:"esri.layers.support.ParallelSnapshot",
layer:null,mode:null,queryTask:null,batchSize:5,_queryInfo:null,_fetchDfd:null,_startPage:null,_lastPage:null,_pageSize:null,_maxPages:null,_requests:null,constructor:function(e){A.mixin(this,e);this._requests={}},destroy:function(){this.cancel()},fetch:function(){var e=new g;this.cancel(!0);this._queryInfo=this.mode._createQueryInfo();this._pageSize=this.mode._getPageSize(this._queryInfo.query);this._maxPages=Math.ceil(this._getFeatureCount()/this._pageSize);this._fetchDfd=e;this._sendRequests();
return e.promise},cancel:function(e){this._cancelPendingRequests(e);this._reset()},_reset:function(){this._startPage=this._lastPage=null;this._requests={}},_getFeatureCount:function(){return this.layer.mode===this.layer.constructor.MODE_AUTO&&0===this.layer.getLastExceedsLimitResult()?this.layer._getMaxFeaturesForAutoSnapshotMode():this.mode.maxFeatures},_sendRequests:function(e){var f=this._queryInfo.query,n=this.queryTask,h=this._requests;e=null==e?1:e;var k=e+this.batchSize-1;k>this._maxPages&&
(k=this._maxPages);if(!(e>k))for(this._startPage=e,this._lastPage=k;e<=k;e++)f.start=(e-1)*this._pageSize,f.num=this._pageSize,h[e]=n.execute(f,null,null,this._queryInfo.pbf?{format:"pbf"}:null),h[e].then(A.hitch(this,this._handleSuccess,e)).otherwise(A.hitch(this,this._handleError,e))},_evalNextBatch:function(e){e===this._lastPage&&this._sendRequests(this._lastPage+1)},_handleSuccess:function(e,f){f.exceededTransferLimit||this._cancelLaterRequests(e,!0);var n=this.mode._checkMaxLimit(f.features);
this._fetchDfd.progress({features:n.features,isError:!1});n.maxLimitReached?((n=n.featuresDiscarded||this._hasRejectedRequests())||(n=!!this._getResult(this._getLastSuccessfulRequest()).exceededTransferLimit),this._resolveFetch(n)):(f.exceededTransferLimit&&this._evalNextBatch(e),this._evalResolution())},_handleError:function(e,f){var n=this._requests;n&&n[e]&&(1===e?this._rejectFetch(f):(this._evalNextBatch(e),this._fetchDfd.progress({error:f,isError:!0}),this._evalResolution()))},_evalResolution:function(){this._hasPendingRequests()||
this._resolveFetch(this._hasRejectedRequests())},_resolveFetch:function(e){var f=this._hasRejectedRequests();this.cancel(!0);this._fetchDfd.resolve({hasPartialFeatures:e,hasUpdateError:f})},_rejectFetch:function(e){this.cancel(!0);this._fetchDfd.reject(e)},_getResult:function(e){return e&&e.dfd.results[0]},_hasPendingRequests:function(){return!!this._getPendingRequests().length},_getPendingRequests:function(){var e=this._requests,f,n=[];for(f in e){var h=e[f];h.isFulfilled()||n.push({pageId:Number(f),
dfd:h})}return n},_getLastSuccessfulRequest:function(){var e=this._getResolvedRequests(),f=-Infinity,n;e=a.filter(e,function(h){return!!this._getResult(h).features.length||1===h.pageId},this);a.forEach(e,function(h){h.pageId>f&&(f=h.pageId,n=h)});return n},_getResolvedRequests:function(){var e=this._requests,f,n=[];for(f in e){var h=e[f];h.isResolved()&&n.push({pageId:Number(f),dfd:h})}return n},_hasRejectedRequests:function(){var e=this._getRejectedRequests(),f=this._getLastSuccessfulRequest(),n=
this._getResult(f);n&&!n.exceededTransferLimit&&(e=a.filter(e,function(h){return h.pageId<=f.pageId}));return!!e.length},_getRejectedRequests:function(){var e=this._requests,f,n=[];for(f in e){var h=e[f];h.isRejected()&&n.push({pageId:Number(f),dfd:h})}return n},_cancelPendingRequests:function(e){this._cancelRequests(this._getPendingRequests(),e)},_cancelLaterRequests:function(e,f){var n=a.filter(this._getPendingRequests(),function(h){return h.pageId>e});this._cancelRequests(n,f)},_cancelRequests:function(e,
f){var n=this.mode,h=this._requests;a.forEach(e,function(k){f&&delete h[k.pageId];n._cancelPendingRequest(k.dfd)})}});A.setObject("layers.support.ParallelSnapshot",D,d);return D})},"esri/layers/OnDemandMode":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../tasks/query ./RenderMode ./GridLayout".split(" "),function(D,A,a,b,g,d,e,f,n,h){D=D([n],{declaredClass:"esri.layers._OnDemandMode",constructor:function(k){this.featureLayer=
k;this._featureMap={}},initialize:function(k){this.inherited(arguments);this._cellMap={};this._gridLayer=h.createFromFeatureLayer({layer:this.featureLayer,map:k})},startup:function(){if(!this._started||this._isSuspendedAtStartup)this.inherited(arguments),this._ioQueue=[],this._isSuspendedAtStartup=this.featureLayer.suspended,this.featureLayer.suspended||(this._zoomHandler(),this._enableConnectors())},propertyChangeHandler:function(k){this._init&&2>k&&this._zoomHandler()},destroy:function(){this._disableConnectors();
this._processIOQueue(!0);this.inherited(arguments)},drawFeature:function(k){var c=k.geometry,l=[];if(c){l=this._gridLayer.getCellsInExtent("point"===c.type?{xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y}:c.getExtent(),!1).cells;c=this._cellMap;var r,m=k.attributes[this.featureLayer.objectIdField];for(r=0;r<l.length;r++){var q=l[r];var v=q.latticeID;var B=q.row;var w=q.col;v?q=c[v]=c[v]||q:(c[B]=c[B]||{},q=c[B][w]=c[B][w]||q);q.features=q.features||[];q.features.push(k);this._addFeatureIIf(m,k);this._incRefCount(m)}}},
suspend:function(){this._init&&this._disableConnectors()},resume:function(){this._init&&(this._enableConnectors(),this._zoomHandler())},refresh:function(){this._zoomHandler()},hasAllFeatures:function(){var k=!1,c=this._getCurrentCells(),l;for(l=0;l<c.length;l++)if(c[l].hasPartialFeatures){k=!0;break}return!k},hasUpdateError:function(){var k=!1,c=this._getCurrentCells(),l;for(l=0;l<c.length;l++)if(c[l].hasUpdateError){k=!0;break}return k},canFetchPBF:function(k){return this.inherited(arguments)&&this.featureLayer._canFetchPBFForQuery(k)},
_enableConnectors:function(){var k=this.map;this._zoomConnect=A.connect(k,"onZoomEnd",this,this._zoomHandler);this._panConnect=A.connect(k,"onPanEnd",this,this._panHandler);this._resizeConnect=A.connect(k,"onResize",this,this._panHandler)},_disableConnectors:function(){A.disconnect(this._zoomConnect);A.disconnect(this._panConnect);A.disconnect(this._resizeConnect)},_zoomHandler:function(){this._processIOQueue(!0);var k=this.featureLayer,c=this.map;!k.suspended&&k.isQueryable()&&(k._fireUpdateStart(),
this._clearIIf(),(k=k._trackManager)&&k.clearTracks(),this._cellMap={},this._gridLayer.setResolution(c.extent),this._sendRequest())},_panHandler:function(k){if(this.featureLayer.isQueryable()){this.featureLayer._fireUpdateStart();var c=this.featureLayer._resized;k=c?k:null;c&&this._gridLayer.setMapState(k,this.map.width,this.map.height);this._sendRequest(k)}},_sendRequest:function(k){this._exceeds=!1;var c=this.featureLayer,l=this.map;k=k||l.extent;l=this._gridLayer.getCellsInExtent(k,c.latticeTiling).cells;
if(!c.isEditable()){var r=this._cellMap;l=b.filter(l,function(B){if(B.lattice){if(r[B.latticeID])return!1}else if(r[B.row]&&r[B.row][B.col])return!1;return!0})}this._pending=this._pending||0;var m;for(m=0;m<l.length;m++){var q=l[m],v=this._createQueryInfo(q);this._pending++;this._ioQueue.push(c._task.execute(v.query,a.hitch(this,this._drawFeatures,q),a.hitch(this,this._queryErrorHandler,q),v.pbf?{format:"pbf"}:null))}this._removeOldCells(k);this._endCheck()},_drawFeatures:function(k,c){this.featureLayer._isImageService&&
10.7>this.featureLayer.version&&void 0===c.exceededTransferLimit&&(c.exceededTransferLimit=c.features.length===this.featureLayer.maxRecordCount);k.hasPartialFeatures=!!c.exceededTransferLimit;k.hasUpdateError=!1;this._exceeds=this._exceeds||c.exceededTransferLimit;this._finalizeIO();var l=this.featureLayer,r=this.map.extent,m=k.extent,q=k.row,v=k.col,B=l.objectIdField,w=c.features,z=this._gridLayer,x=this._cellMap,y=k.latticeID;x=y?x[y]:x[q]&&x[q][v];if(k.resolution==z.resolution&&(y?y===z.getLatticeID(r):
z.intersects(m,r)))if(x)l._sortFeatures(w),this._updateCell(x,w);else for(l._sortFeatures(w),k.features=w,this._addCellToCellMap(k),r=w.length,l=0;l<r;l++)m=w[l],q=m.attributes[B],this._addFeatureIIf(q,m),this._incRefCount(q);else x&&this._removeCell(q,v,y);this._endCheck()},_queryErrorHandler:function(k,c){this._finalizeIO();k.hasPartialFeatures=!0;k.hasUpdateError=!0;this._addCellToCellMap(k);this.featureLayer._errorHandler(c);this._endCheck(c)},_finalizeIO:function(){this._pending--},_endCheck:function(k){if(0===
this._pending){this._processIOQueue();var c=this.featureLayer,l=c._trackManager;l&&(l.clearTracks(),l.addFeatures(c.graphics),c._ager&&b.forEach(c.graphics,function(r){r._shape&&c._repaint(r)}),l.moveLatestToFront(),l.drawTracks());this.featureLayer._fireUpdateEnd(!!k&&Error("FeatureLayer: "+(k.message||"an error occurred while updating the layer.")),this._exceeds?{queryLimitExceeded:!0}:null);if(this._exceeds)c.onQueryLimitExceeded()}},_processIOQueue:function(k){this._ioQueue=b.filter(this._ioQueue,
function(c){return-1<c.fired?!1:!0});k&&b.forEach(this._ioQueue,this._cancelPendingRequest)},_createQueryInfo:function(k){var c=this.featureLayer,l=new f;l.outFields=c.getOutFields();l.where=c._getAttributeFilter();l.returnGeometry=!0;l.geometry=k.extent||k.lattice;c.latticeTiling&&k.extent&&(l.spatialRelationship=f.SPATIAL_REL_CONTAINS);l.timeExtent=c._getOffsettedTE(c._mapTimeExtent);l.maxAllowableOffset=c._maxOffset;l.quantizationParameters=c._quantizationParameters;l.orderByFields=c.supportsAdvancedQueries?
c.getOrderByFields():null;l.multipatchOption=c.multipatchOption;c._ts&&(l._ts=(new Date).getTime());(k=c.advancedQueryCapabilities)&&k.supportsQueryWithResultType&&(l.resultType="tile");k=this.canFetchPBF(l);c._enableEditModeQuantization(l,k);return{query:l,pbf:k}},_getCurrentCells:function(k){var c=[];k=k||this._cellMap;for(var l in k)if(k.hasOwnProperty(l)){var r=k[l];r&&(r.hasOwnProperty("row")||r.hasOwnProperty("latticeID")?c.push(r):"object"===typeof r&&c.push.apply(c,this._getCurrentCells(r)))}return c},
_addCellToCellMap:function(k){var c=this._cellMap;if(k.latticeID)c[k.latticeID]=k;else{var l=k.row,r=k.col;c[l]=c[l]||{};c[l][r]=k}},_removeOldCells:function(k){var c=this._cellMap,l=this._gridLayer,r,m;for(r in c)if(c[r]){var q=c[r],v=q.latticeID,B=0,w=0;if(v)B++,v!==l.getLatticeID(k)&&(this._removeCell(null,null,v),w++);else for(m in q)q[m]&&(B++,l.intersects(q[m].extent,k)||(this._removeCell(r,m),w++));w===B&&delete c[r]}},_updateCell:function(k,c){var l=this.featureLayer,r=l.objectIdField;l=l._selectedFeatures;
var m,q=c.length;k.features=k.features||[];for(m=0;m<q;m++){var v=c[m],B=v.attributes[r],w=this._addFeatureIIf(B,v);w===v?(this._incRefCount(B),k.features.push(w)):B in l||(w.setGeometry(v.geometry),w.setAttributes(v.attributes))}},_removeCell:function(k,c,l){var r=this._cellMap,m=this.featureLayer,q=m.objectIdField,v=l?r[l]:r[k]&&r[k][c];if(v&&(l?delete r[l]:delete r[k][c],k=v.features))for(c=0;c<k.length;c++)l=k[c].attributes[q],this._decRefCount(l),l in m._selectedFeatures||this._removeFeatureIIf(l)}});
a.setObject("layers._OnDemandMode",D,d);return D})},"esri/layers/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Point ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/normalizeUtils ../srUtils".split(" "),function(D,A,a,b,g,d,e,f,n,h,k){var c=D(null,{declaredClass:"esri.layers._GridLayout",constructor:function(l,r,m,q){this.origin=l;this.cellWidth=r.width;this.cellHeight=r.height;this.mapWidth=m.width;this.mapHeight=
m.height;this.srInfo=q},setResolution:function(l){this.resolution=(l.xmax-l.xmin)/this.mapWidth;this.srInfo&&(l=Math.round(Math.round(2*this.srInfo.valid[1]/this.resolution)/this.cellWidth),this._frameStats=[l,0,l-1])},setMapState:function(l,r,m){this.mapWidth=r;this.mapHeight=m;this.setResolution(l)},getCellCoordinates:function(l){var r=this.resolution,m=this.origin;return{row:Math.floor((m.y-l.y)/(this.cellHeight*r)),col:Math.floor((l.x-m.x)/(this.cellWidth*r))}},normalize:function(l){var r=this._frameStats;
if(r){var m=r[0],q=r[1];r=r[2];l<q?(l%=m,l=l<q?l+m:l):l>r&&(l%=m)}return l},intersects:function(l,r){var m=this.srInfo;return m?a.some(r._getParts(m),function(q){return l.intersects(q.extent)}):l.intersects(r)},getCellExtent:function(l,r){var m=this.resolution,q=this.origin,v=this.cellWidth,B=this.cellHeight;return new e(r*v*m+q.x,q.y-(l+1)*B*m,(r+1)*v*m+q.x,q.y-l*B*m,k.createSpatialReference(q.spatialReference.toJson()))},getLatticeID:function(l){var r=this.getCellCoordinates({x:l.xmin,y:l.ymax}),
m=this.getCellCoordinates({x:l.xmax,y:l.ymin});l=r.row;var q=m.row;r=this.normalize(r.col);m=this.normalize(m.col);return l+"_"+q+"_"+r+"_"+m},sorter:function(l,r){return l<r?-1:1},getCellsInExtent:function(l,r){var m=this.getCellCoordinates({x:l.xmin,y:l.ymax}),q=this.getCellCoordinates({x:l.xmax,y:l.ymin}),v=m.row,B=q.row;m=m.col;q=q.col;var w=[],z,x,y=[],u=[],t=[];for(z=v;z<=B;z++)for(x=m;x<=q;x++){var C=this.normalize(x);l=this.getCellExtent(z,C);a.some(w,function(L){return L.row===z&&L.col===
C})||w.push({row:z,col:C,extent:l,resolution:this.resolution});r&&(y.push(l.xmin,l.xmax),u.push(l.ymin,l.ymax))}m=this.normalize(m);q=this.normalize(q);y.sort(this.sorter);u.sort(this.sorter);x=y.length;for(z=x-1;0<=z;z--)z<x-1&&y[z]===y[z+1]&&y.splice(z,1);x=u.length;for(z=x-1;0<=z;z--)z<x-1&&u[z]===u[z+1]&&u.splice(z,1);if(y.length&&u.length){var E=y[0];var F=y[y.length-1];var G=u[0];var H=u[u.length-1];x=y.length;for(z=0;z<x;z++)t.push([[y[z],H],[y[z],G]]);x=u.length;for(z=0;z<x;z++)t.push([[E,
u[z]],[F,u[z]]]);y=new f({paths:t,spatialReference:this.origin.spatialReference.toJson()});w.push({latticeID:v+"_"+B+"_"+m+"_"+q,lattice:y,resolution:this.resolution})}return{minRow:v,maxRow:B,minCol:m,maxCol:q,topRow:v,bottomRow:B,leftCol:m,rightCol:q,cells:w}},_findCell:function(l,r,m){var q;a.some(l,function(v){v.row===r&&v.col===m&&(q=v);return!!q});return q},getExtentOfIntersectingCells:function(l){var r=this.getCellsInExtent(l),m=r&&r.cells;if(m&&m.length){var q=r.topRow,v=r.leftCol,B=0;a.forEach(m,
function(y){y.row===q&&B++});var w=this._findCell(m,q,v).extent,z=this.srInfo;if(!z||B!==this._frameStats[0]&&v!==r.rightCol){var x=w.xmin;z=x+B*w.getWidth()}else x=z.valid[0],z=z.valid[1];r=this._findCell(m,r.bottomRow,v).extent.ymin;(l=(new e(x,r,z,w.ymax,l.spatialReference))._normalize(!1,!1))&&l.rings&&(l=new n(l),l=h.getDenormalizedExtent(l));return l}}});c.createFromFeatureLayer=function(l){var r=l.layer;l=r.getMap()||l.map;var m=r._srInfo;(r=l&&l.loaded?new c(new d(m?m.valid[0]:l.extent.xmin,
m?m.valid[1]:l.extent.ymax,l.spatialReference),{width:r._tileWidth,height:r._tileHeight},{width:l.width,height:l.height},m):null)&&r.setResolution(l.extent);return r};A.setObject("layers._GridLayout",c,g);return c})},"esri/layers/SelectionMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./RenderMode"],function(D,A,a,b,g){D=D([g],{declaredClass:"esri.layers._SelectionMode",constructor:function(d){this.featureLayer=d;this._featureMap={}},propertyChangeHandler:function(d){this._init&&
0===d&&this._applyTimeFilter()},resume:function(){this.propertyChangeHandler(0)},hasAllFeatures:function(){return!this.featureLayer._hasPartialSelectedFeatures},hasUpdateError:function(){return this.featureLayer._hasSelectionError}});A.setObject("layers._SelectionMode",D,b);return D})},"esri/layers/StreamMode":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../kernel ../SpatialReference ../tasks/query ../tasks/QueryTask ../geometry/jsonUtils ./RenderMode".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k){D=D([k],{declaredClass:"esri.layers._StreamMode",constructor:function(c,l){this.featureLayer=c;this._featureMap={};this._setRefreshRate();this._drawBuffer={adds:[],updates:[]};this._timeoutId=null;this._flushDrawBuffer=A.hitch(this,this._flushDrawBuffer);this._featuresByTime={};this._lastEndTimeCheck=null;this._maxFeatureAge=0;c.purgeOptions&&c.purgeOptions.age&&"number"===typeof c.purgeOptions.age&&(this._maxFeatureAge=1E3*Math.ceil(60*c.purgeOptions.age));this._drawFeatures=
A.hitch(this,this._drawFeatures);this._queryErrorHandler=A.hitch(this,this._queryErrorHandler)},startup:function(){this._started||this.inherited(arguments)},propertyChangeHandler:function(c){this._init&&(0===c?this._applyTimeFilter():3===c&&this._redrawAllTracks())},destroy:function(){this.inherited(arguments);clearTimeout(this._timeoutId);this._featuresByTime=this._drawBuffer=this._featureMap=null},drawFeature:function(c){var l=this.featureLayer,r=l.objectIdField;this._timeoutId||(this._timeoutId=
setTimeout(this._flushDrawBuffer,this._refreshRate));l._joinField&&this._getFeature(c.attributes[r])?this._drawBuffer.updates.push({oid:c.attributes[r],updates:c}):this._drawBuffer.adds.push(c)},resume:function(){this.propertyChangeHandler(0)},refresh:function(){this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);var c=this.featureLayer;c&&(c._relatedUrl||c._keepLatestUrl?(c._fireUpdateStart(),c._refreshing=!0,c.disconnect(),c.clear(),c._relatedQueried=!1,c._keepLatestQueried=!1,
c.connect()):(c._fireUpdateStart(),c.clear(),c._fireUpdateEnd()))},_drawFeatures:function(c,l){var r=this.featureLayer;r._create(c.features||[]);r._fireUpdateEnd(null,l)},_applyTimeFilter:function(c){this.inherited(arguments);this._redrawAllTracks()},_removeFeatures:function(c){var l=this.featureLayer,r=l.objectIdField;c&&a.forEach(c,function(m){m=m.attributes[r];l._unSelectFeatureIIf(m,this);this._decRefCount(m);this._removeFeatureIIf(m)},this)},_addFeatures:function(c){var l=this.featureLayer,r=
l._endTimeField,m=l._startTimeField,q,v=[],B=[],w=[];var z=l._trackManager;var x=l.objectIdField;if(z)for(q in c=z.addFeatures(c),c)c.hasOwnProperty(q)&&(v.push(q),c[q].adds&&(B=B.concat(c[q].adds)),c[q].deletes&&(w=w.concat(c[q].deletes)));else B=c;a.forEach(B,function(y){var u=y.attributes[x];var t=r&&y.attributes[r];!t&&this._maxFeatureAge&&(t=m&&y.attributes[m]?y.attributes[m]+this._maxFeatureAge:Date.now()+this._maxFeatureAge);t&&(t=1E3*Math.ceil(t/1E3),this._featuresByTime[t]?this._featuresByTime[t].push(u):
this._featuresByTime[t]=[u]);this._addFeatureIIf(u,y);this._incRefCount(u)},this);w.length&&this._removeFeatures(w);z&&z.refreshTracks(v)},_updateFeatures:function(c){var l=this.featureLayer,r=[];var m=l._trackManager;var q=l._trackIdField;a.forEach(c,function(v){var B=v.updates;v=this._getFeature(v.oid);var w;if(v){B.geometry&&v.setGeometry(B.geometry);B=B.attributes||{};for(w in B)B.hasOwnProperty(w)&&(v.attributes[w]=B[w]);v.setAttributes(v.attributes);v.visible=this._checkFeatureTimeIntersects(v);
m&&v.attributes[q]?r.push(v.attributes[q]):l._repaint(v,null,!0)}},this);r.length&&m.refreshTracks(r)},_redrawAllTracks:function(){var c=this.featureLayer._trackManager,l;c&&(l=c.trimTracks())&&0<l.length&&(this._removeFeatures(l),c.refreshTracks())},_flushDrawBuffer:function(){clearTimeout(this._timeoutId);var c=this._drawBuffer,l=c.adds.splice(0,c.adds.length),r=c.updates.splice(0,c.updates.length);c=this.featureLayer;if(!c)return!1;c.updating||c._fireUpdateStart();this._addFeatures(l);this._updateFeatures(r);
(l=this._getExpiredFeatures())&&l.length&&(this._removeFeatures(l),c._trackManager&&c._trackManager.removeFeatures(l));c._purge();c._fireUpdateEnd();this._timeoutId=null},_clearDrawBuffer:function(){var c=this._timeoutId,l=this._drawBuffer,r=l.adds;l=l.updates;c&&clearTimeout(c);r.splice(0,r.length);l.splice(0,l.length);this._timeoutId=null},_clearTimeBin:function(){this._featuresByTime={};this._lastEndTimeCheck=1E3*Math.ceil(Date.now()/1E3)},_clearFeatureMap:function(){this._featureMap={}},_setRefreshRate:function(c){c=
c||0===c?c:200;0>c&&(c=200);this._refreshRate=c},_checkFeatureTimeIntersects:function(c){var l=this.featureLayer,r=l.getMap();return(r=r?r.timeExtent:null)&&l.timeInfo&&(l.timeInfo.startTimeField||l.timeInfo.endTimeField)?0<l._filterByTime([c],r.startTime,r.endTime).match.length:!0},_fetchArchive:function(c){var l=new b,r=this.featureLayer;this._pendingRequest&&this._cancelPendingRequest(this._pendingRequest);r._fireUpdateStart();if(c&&this.map){c=new n(c);var m=new f;var q=this.map;var v=r.getFilter()||
{};var B=v.where||"1\x3d1";var w=v.geometry?h.fromJson(v.geometry):null;v=v.outFields?v.outFields.split(","):["*"];m.geometry=w;m.where=B;m.outFields=v;m.returnGeometry=!0;m.outSpatialReference=new e(q.spatialReference.toJson());this._pendingRequest=c.execute(m).then(function(z){this._pendingRequest=null;var x=this._fixFieldNameCasing(r,z);z.features=x;this._drawFeatures(z);r._fireUpdateEnd();l.resolve()}.bind(this)).otherwise(function(z){this._pendingRequest=null;r._errorHandler(z);r._fireUpdateEnd(z);
l.reject(z)}.bind(this))}else l.resolve();return l.promise},_queryErrorHandler:function(c){var l=this.featureLayer;l._errorHandler(c);l._fireUpdateEnd(c)},_fixFieldNameCasing:function(c,l){var r=l.features||[],m=l.fields;if(!m||!r.length)return r;m=this._mapFieldNameDifferences(c.fields,m);for(var q=[],v,B,w=0,z=l.features.length;w<z;w++)v=r[w],B=this._swizzleResponseAttributes(v.attributes,m),q.push({geometry:v.geometry,attributes:B});return q},_mapFieldNameDifferences:function(c,l){var r=[],m={},
q;var v=0;for(q=l.length;v<q;v++)r.push(l[v].name);v=0;for(q=c.length;v<q;v++){var B=c[v].name,w=this._checkForStreamFieldName(B,r);w&&(m[w]=B)}return m},_checkForStreamFieldName:function(c,l){for(var r=c.toLowerCase(),m,q=0,v=l.length;q<v;q++)if(l[q].toLowerCase()===r){m=l[q];break}return m},_swizzleResponseAttributes:function(c,l){var r={},m;for(m in c)if(c.hasOwnProperty(m)){var q=c[m];l.hasOwnProperty(m)?r[l[m]]=q:r[m]=q}return r},_getExpiredFeatures:function(){var c,l,r=[],m=[];if(!this.featureLayer._endTimeField&&
!this._maxFeatureAge)return m;var q=1E3*Math.floor(this._lastEndTimeCheck/1E3);this._lastEndTimeCheck=c=1E3*Math.ceil(Date.now()/1E3);if(q&&q!==c)for(l=this._featuresByTime;q<=c;q+=1E3)l[q]&&(r=r.concat(l[q]),delete l[q]);a.forEach(r,function(v){(v=this._getFeature(v))&&m.push(v)},this);return m}});A.setObject("layers._StreamMode",D,d);return D})},"esri/layers/TrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/dom-construct dojox/gfx ../kernel ../graphic ../geometry/Polyline ./GraphicsLayer".split(" "),
function(D,A,a,b,g,d,e,f,n,h){var k=-1!==d.renderer.toLowerCase().indexOf("canvas");D=D(null,{declaredClass:"esri.layers._TrackManager",constructor:function(c){this.layer=c;this.trackMap={};this.trackLineMap={}},initialize:function(c){this.map=c;c=this.layer;this.createTracklineContainer()&&(this._handles=[c.on("visibility-change",A.hitch(this,function(l){this.container.setVisibility(l.visible);this.container.evaluateSuspension()})),c.on("scale-range-change",A.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,
this.layer.maxScale)}))])},createTracklineContainer:function(){var c=this.layer;if("esriGeometryPoint"!==c.geometryType)return null;var l=this.map,r=c._getRenderer();r=r&&r.trackRenderer;var m=this.container=new h._GraphicsLayer({id:c.id+"_tracks",_child:!0,visible:c.visible,minScale:c.minScale,maxScale:c.maxScale});m.loaded=!0;m.onLoad(m);m._setMap(l,c._div);k||(l=m._div.getNode(),c=c._div.getNode(),l&&c&&g.place(l,c,"first"));m.setRenderer(r);return m},addFeatures:function(c){var l=this.trackMap,
r=this.layer,m=r._trackIdField,q=[];a.forEach(c,function(z){var x=z.attributes[m];(l[x]=l[x]||[]).push(z);-1===a.indexOf(q,x)&&q.push(x)});var v=r._startTimeField,B=r.objectIdField,w=function(z,x){var y=z.attributes[v],u=x.attributes[v];return y===u?z.attributes[B]<x.attributes[B]?-1:1:y<u?-1:1};a.forEach(q,function(z){l[z].sort(w)})},trimTracks:function(c){function l(B){for(B=r[B]||[];B.length>m;)q.push(B.shift())}var r=this.trackMap,m=this.layer.maximumTrackPoints||0,q=[],v;if(!m)return q;if(c)a.forEach(c,
function(B){l(B)});else for(v in r)r.hasOwnProperty(v)&&l(v);return q},drawTracks:function(c){function l(z){var x=v[z],y,u;var t=r.trackLineMap[z];m.remove(t);delete r.trackLineMap[z];t=null;if(!x||2>x.length)return!1;t=[];for(y=x.length-1;0<=y;y--)(u=x[y].geometry)&&t.push([u.x,u.y]);x={};x[w]=z;1<t.length&&(t=new f(new n({paths:[t],spatialReference:B}),null,x),m.add(t),r.trackLineMap[z]=t)}var r=this,m=this.container,q;if(m){var v=this.trackMap;var B=this.map.spatialReference;var w=this.layer._trackIdField;
if(c)a.forEach(c,function(z){l(z)});else for(q in v)v.hasOwnProperty(q)&&l(q)}},refreshTracks:function(c){function l(w){var z;r.drawTracks([w]);if(v&&v.latestObservationRenderer){w=m[w]||[];var x=w.length;for(z=0;z<x;z++)q._repaint(w[z],null,!0)}}var r=this,m=this.trackMap,q=this.layer,v=q._getRenderer(),B;if(c)a.forEach(c,function(w){l(w)});else for(B in m)m.hasOwnProperty(B)&&l(B);this.moveLatestToFront()},moveLatestToFront:function(c){a.forEach(this.getLatestObservations(c),function(l){var r=l._shape;
r&&r._moveToFront();this._repaint(l,null,!0)},this.layer)},getLatestObservations:function(c){function l(B){B=q[B];return B[B.length-1]}var r=[],m=this.layer._getRenderer(),q=this.trackMap,v;if(!m.latestObservationRenderer)return r;if(c)a.forEach(c,function(B){r.push(l(B))});else for(v in q)q.hasOwnProperty(v)&&r.push(l(v));return r},clearTracks:function(c){var l=this.getLatestObservations(c),r=this.container,m=this.trackMap,q;if(c)a.forEach(c,function(B){delete this.trackMap[B];r&&(v=this.trackLineMap[B],
r.remove(v),delete this.trackLineMap[B])},this);else{if(r)for(q in m){var v=this.trackLineMap[q];r.remove(v)}this.trackMap={};this.trackLineMap={}}a.forEach(l,function(B){this._repaint(B,null,!0)},this.layer)},isLatestObservation:function(c){var l=this.trackMap[c.attributes[this.layer._trackIdField]];return l?l[l.length-1]===c:!1},destroy:function(){a.forEach(this._handles,function(l){l.remove()});var c=this.container;c&&(c.clear(),c._unsetMap(this.map,this.layer._div));this.map=this.layer=this.trackMap=
this.container=null}});A.setObject("layers._TrackManager",D,e);return D})},"esri/layers/HeatmapManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/_base/array require ../kernel ../sniff ../geometry/Point ../geometry/webMercatorUtils ./MapImage ../renderers/HeatmapRenderer ../tasks/query dojo/_base/fx".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l){function r(){}function m(q){var v=q.layer;return{geometry:q.geometry,attributes:q.attributes,getLayer:function(){return v}}}
D=D(null,{declaredClass:"esri.layers.HeatmapManager",heatmapRenderer:null,sourceLayer:null,imageLayer:null,useTiles:!0,useWorker:!1,map:null,constructor:function(q){this.sourceLayer=q;this._hndls=[]},initialize:function(q){this.map=q;var v=this.sourceLayer,B=v.renderer;v.setDrawMode(!1);this.imageLayer=q._getMapImageLyr();var w=this;this.heatmapRenderer=B instanceof k?B:(B.getRendererInfoByZoom(q.getZoom())||B.getRendererInfoByScale(q.getScale())).renderer;this.redraw=this.redraw.bind(this);this.recalculateHeatmap=
this.recalculateHeatmap.bind(this);this._removeRenderer=this._removeRenderer.bind(this);this._handleRendererChange=this._handleRendererChange.bind(this);this._rendererChangeHandle=this.sourceLayer.on("renderer-change",this._handleRendererChange);this._handleOpacityChange=this._handleOpacityChange.bind(this);this._reprojectFeature=this._reprojectFeature.bind(this);g(["../workers/heatmapCalculator"],function(z){w._calculator=new z(A.mixin({width:w.map.width,height:w.map.height},w._getOptions()));w._setupRenderer();
w.heatmapRenderer.getStats=z.calculateStats;w.heatmapRenderer.getHistogramData=z.getHistogramData})},destroy:function(){this._removeHandlers();this._rendererChangeHandle&&this._rendererChangeHandle.remove();this._rendererChangeHandle=this.sourceLayer=this.imageLayer=this.map=this.heatmapRenderer=this._hndls=null},_handleRendererChange:function(q){var v=q.renderer,B=v instanceof k;this.heatmapRenderer?B?this.heatmapRenderer=v:this._removeRenderer(q):B&&(this.heatmapRenderer=v,this.sourceLayer&&this.map&&
this._setupRenderer())},_handleOpacityChange:function(q){q=q.opacity;var v=this._getImageBySourceId(this.sourceLayer.id);v&&v.setOpacity(q)},_setupRenderer:function(){var q=this._hndls,v=this.sourceLayer,B=this.map,w=this;v._originalDraw=v._draw;v._draw=r;v._div.clear();clearTimeout(this._resetTimer);this._resetTimer=setTimeout(this._resetGraphics.bind(this),250);q.push(v.on("update-end",this.redraw));q.push(v.on("suspend",function(z){(z=w._getImageBySourceId(w.sourceLayer.id))&&z.hide()}));q.push(v.on("resume",
function(z){(z=w._getImageBySourceId(w.sourceLayer.id))&&z.show()}));q.push(a.after(v,"redraw",this.redraw));q.push(B.on("layer-remove",function(z){z.layer==v&&((z=w._getImageBySourceId(w.sourceLayer.id))&&w.imageLayer.removeImage(z),w._removeRenderer({target:v}))}));v._collection&&q.push(v.on("graphic-add",function(z){w._reprojectFeature(z.graphic);w.redraw()}));1!==v.mode&&(q.push(B.on("resize, pan-end",this.redraw)),q.push(B.on("zoom-end",this.redraw)));q.push(v.on("opacity-change",this._handleOpacityChange));
this.imageLayer.suspended&&this.imageLayer.resume();v.graphics&&v.graphics.length&&(v.graphics[0].geometry&&!B.spatialReference.equals(v.graphics[0].geometry.spatialReference)&&b.forEach(v.graphics,function(z){this._reprojectFeature(z)}.bind(this)),this.redraw())},redraw:function(){if(!this._drawTimer){var q=this;this._drawTimer=setTimeout(function(){clearTimeout(q._drawTimer);q._drawTimer=null;q.sourceLayer._getRenderer().isInstanceOf(k)&&q.recalculateHeatmap()},16)}},_removeRenderer:function(q){var v=
q.target;v._draw=v._originalDraw;delete v._originalDraw;v.setDrawMode(!0);this._removeHandlers();this._hndls=[];var B=this._getImageBySourceId(this.sourceLayer.id);B&&this.imageLayer.removeImage(B);clearTimeout(this._drawTimer);clearTimeout(this._resetTimer);this._drawTimer=this._resetTimer=null;v.renderer!=q.renderer&&v.renderer.getRendererInfo?this.heatmapRenderer=null:(this.destroy(),v.renderer&&v.renderer.getRendererInfo&&v.redraw())},recalculateHeatmap:function(){this._calculator?this._doMainCalculation():
this._calculatorClient&&this._doWorkerCalculation()},_reprojectFeature:function(q){if(q&&q.geometry){var v=q.geometry,B=this.map.spatialReference;B.equals(v.spatialReference)||(v=n.project(v,B),null!=v&&(q.geometry=v))}},_doWorkerCalculation:function(){},_doMainCalculation:function(){var q=this.sourceLayer,v=this.map,B=this.heatmapRenderer,w=this.map.extent,z=this.map.width,x=this.map.height,y=this._calculator,u=this,t=function(E){E=u._getScreenPoints(E.features,v,q);E=y.calculateImageData(A.mixin({screenPoints:E,
mapinfo:{extent:[w.xmin,w.ymin,w.xmax,w.ymax],resolution:v.getResolution()},width:z,height:x},u._getOptions()));E=B.getSymbol(m({geometry:v.extent,attributes:{size:[z,x],imageData:E},layer:q}));E=new h({extent:v.extent,href:E.url,opacity:0,sourceId:q.id});u._swapMapImages(E,u._getImageBySourceId(q.id));q.suspended&&E.hide()},C={geometry:v.extent,timeExtent:q.useMapTime?v.timeExtent:void 0,spatialRelationship:c.SPATIAL_REL_INTERSECTS};null!=q._canDoClientSideQuery(C)?q.queryFeatures(C,t):t({features:q.graphics})},
_getScreenPoints:function(q,v,B){var w=[],z=q.length,x=0,y=0,u=new f(v.extent.xmin,v.extent.ymax,v.spatialReference),t=v.toScreen(u),C=t.x;t=t.y;var E=v.getResolution(),F;for((y=v.extent.getCacheValue("_parts"))&&(F=b.map(y,function(H){return B._intersects(v,H.extent)[0]}));z--;)if(y=q[z],y.geometry&&y.visible){var G={x:Math.ceil((y.geometry.x-u.x)/E+C),y:Math.floor((u.y-y.geometry.y)/E-t),attributes:y.attributes};F&&(y=1<F.length&&G.x<-F[0]?F[1]:F[0],G.x+=y);w[x++]=G}return w},_getImageBySourceId:function(q){var v=
this.imageLayer.getImages();v=b.filter(v,function(B){return B.sourceId==q});if(v.length)return v[v.length-1]},_swapMapImages:function(q,v){function B(){w.removeImage(v)}var w=this.imageLayer,z=this.sourceLayer.opacity;w.addImage(q);l.anim(q._node,{opacity:z},null,null,function(){q.opacity=z});null!=v&&l.anim(v._node,{opacity:0},null,null,B)},_removeHandlers:function(){if(null!=this._hndls)for(var q=this._hndls.length;q--;)this._hndls[q].remove()},_getOptions:function(){var q=this.heatmapRenderer;
return{blurRadius:q.blurRadius,gradient:q.gradient,maxPixelIntensity:q.maxPixelIntensity,minPixelIntensity:q.minPixelIntensity,field:q.field,fieldOffset:q.fieldOffset}},_resetGraphics:function(){clearTimeout(this._resetTimer);this._resetTimer=null;for(var q=this.sourceLayer.graphics,v=q.length,B;v--;)B=q[v],B._shape=B._offsets=void 0}});A.setObject("layers.HeatmapManager",D,d);return D})},"esri/layers/clustering/ClusterManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../../kernel ../../Evented ../../graphic ../../lang ../../Color ../../graphicsUtils ../../dijit/PopupTemplate ../../dijit/Legend/utils ../../renderers/ClassBreaksRenderer ../../symbols/SimpleMarkerSymbol ../support/attributeUtils ../GraphicsLayer ../Field ./GeohashAggregation ./statUtils dojo/i18n!../../nls/jsapi".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z){var x=z.layers.clusters,y=z.widgets.popup,u=x.numFeatures,t=Math.pow(2,53)-1;D=D(d,{declaredClass:"esri.layers.clustering.ClusterManager",layer:null,aggregationInfo:null,container:null,defaults:{clusterRadius:80,markerSymbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}},_initialized:!1,_map:null,_eventHandles:null,_clusterRadius:null,
_renderer:null,_statisticInfos:null,_fields:null,_infoTemplate:null,_clusterGenerator:null,_singleGraphics:null,constructor:function(C){this._eventHandles=[];this.layer=C.layer;this.setAggregationInfo(C.aggregationInfo)},initialize:function(C){this._initialized=!0;this._map=C;this._removeFromPopup(this.layer);this.container=this._createContainer();this._clusterGenerator=this._createClusterGenerator();this._initClusterGenerator();this._createLayerEventListeners();this._createMapEventListeners();this._createPopupEventListeners()},
destroy:function(C){this._clearSingleGraphics();this._removeClusterBoundary();this._destroyEventListeners();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this._destroyClusterGenerator(C);this._destroyContainer();this.layer=this.aggregationInfo=this._map=null},setAggregationInfo:function(C){this.aggregationInfo=C?A.mixin({},C):null;this._applyAggregationInfo()},getClusterRenderer:function(){return this._renderer},getClusterFields:function(){return this._fields||
[]},getFeaturesInCluster:function(C){C=C&&C.getAggregationInfo();return this._clusterGenerator?this._clusterGenerator.getFeaturesInCluster(C):[]},getAggregateGraphics:function(){return this.container?this.container.graphics.slice(0):[]},getSingleGraphics:function(){return this._singleGraphics?this._singleGraphics.slice(0):[]},redraw:function(){this.container&&this.container.redraw()},isClusteringEnabled:function(){return!(!this._clusterGenerator||!this._clusterGenerator.clustersEnabled)},isClusteringActive:function(){return!!(this._clusterGenerator&&
0<this._clusterGenerator.getNumFeatures())},toggleFeatureVisibility:function(C){this._clusterGenerator&&this._clusterGenerator.toggleFeatureVisibility(C)},_createContainer:function(){var C=this.layer,E=new q._GraphicsLayer({_child:!0,id:C.id+"_clusters",visible:C.visible,minScale:C.minScale,maxScale:C.maxScale,infoTemplate:this._infoTemplate});E.fields=this._fields;E.setRenderer(this._renderer);E.loaded=!0;E.onLoad(E);E._setMap(this._map,C._div);return C._childLayer=E},_destroyContainer:function(){var C=
this.container;C&&(C.clear(),C._unsetMap(this._map,this.layer._div),this.layer._childLayer=null);this.container=null},_createClusterGenerator:function(){return new B({map:this._map,layer:this.layer,clusterRadius:this._clusterRadius,statisticInfos:this._statisticInfos})},_initClusterGenerator:function(){var C=this._clusterGenerator;C.loaded?this._awaitClusterGenerator():this._eventHandles.push(C.on("load",A.hitch(this,function(){this._awaitClusterGenerator()})),C.on("load-error",A.hitch(this,function(E){})))},
_destroyClusterGenerator:function(C){this._clusterGenerator&&this._clusterGenerator.destroy(C);this._clusterGenerator=null},_awaitClusterGenerator:function(){var C=this._clusterGenerator;C.started?(this._applyRenderer(),this._initClusterUpdates()):this._eventHandles.push(C.on("start",A.hitch(this,function(){this._applyRenderer();this._initClusterUpdates()})))},_applyAggregationInfo:function(){this._applyClusterRadius();this._applyRenderer();this._clusterGenerator&&!this._clusterGenerator.isUpdateScheduled()&&
this.redraw()},_applyClusterRadius:function(){var C=this.aggregationInfo;this._clusterRadius=C&&C.clusterRadius||this.defaults.clusterRadius;this._clusterGenerator&&this._clusterGenerator.setClusterRadius(this._clusterRadius);this._computeClusterRadius()},_computeClusterRadius:function(){var C=this.aggregationInfo||{};C.clusterRadius=this._clusterRadius;this.aggregationInfo=C},_applyRenderer:function(){var C=this.container,E=this._getClusterRendererInfo(),F=this._compareStatInfos(this._statisticInfos,
E.statisticInfos);F&&(this._statisticInfos=E.statisticInfos,this._clusterGenerator&&(this._clusterGenerator.setStatisticInfos(a.map(this._statisticInfos,function(G){return{attributeInfo:G.attributeInfo,statisticType:G.statisticType}})),C&&a.forEach(C.graphics,function(G){this._applyClusterAttributes(G,G.getAggregationInfo())},this)));this._renderer=E.renderer;this._applyFields();this._applyInfoTemplate(!!F&&this._initialized);C&&(C.setRenderer(this._renderer),this.emit("renderer-change"))},_applyFields:function(){this._fields=
this._getFields(this._statisticInfos);this.container&&(this.container.fields=this._fields)},_applyInfoTemplate:function(C){var E=this.aggregationInfo,F=E&&E.disablePopup;this.layer.infoTemplate&&!F?(E=E&&E.infoTemplate||this._infoTemplate,C=C||!E?this._createInfoTemplate():this._updateInfoTemplate(E)):C=null;this._infoTemplate=C;this.container&&this.container.setInfoTemplate(this._infoTemplate);this._computeInfoTemplate()},_computeInfoTemplate:function(){var C=this.aggregationInfo||{};C.infoTemplate=
this._infoTemplate;this.aggregationInfo=C},_getClusterRendererInfo:function(){var C=this.layer&&this.layer.renderer;return C?this._createClusterRenderer(C):this._getDefaultClusterRenderer()},_getDefaultClusterRenderer:function(){var C=this._createContinuousCountRenderer();this._addSizeByCountVariable(C);return{renderer:C,statisticInfos:[]}},_createContinuousCountRenderer:function(C){var E=new l(null,"cluster_count");E.addBreak({minValue:-t,maxValue:t,symbol:C?new C.constructor(C.toJson()):new r(A.clone(this.defaults.markerSymbol))});
return E},_createClusterRenderer:function(C){if(!this._isSupportedRenderer(C))return this._getDefaultClusterRenderer();var E=[];if(this._isSimpleRenderer(C))var F=this._createContinuousCountRenderer(C.symbol);else{F=new C.constructor(C.toJson());var G=this._getRendererAttributeInfo(C);if(this._isCBRenderer(F)){var H=w.getClusterField(G,"avg");E.push(this._getStatInfo(G,"avg"));F.normalizationType=null;F.normalizationField=null;F.normalizationTotal=null}else this._isUVRenderer(F)&&(H=w.getClusterField(G,
"type"),E.push(this._getStatInfo(G,"type")));F.attributeField=H;F.setValueExpression(null);F.valueExpressionTitle=null;F.setVisualVariables(null);this._setRendererTitle(F,C)}C=this._getSupportedVariables(C);G=this._createClusterVariables(C.allVars,E);F.setVisualVariables(G);C.sizeVars.length||this._isCBSizeRenderer(F)||this._addSizeByCountVariable(F);return{renderer:F,statisticInfos:E}},_isSupportedRenderer:function(C){if(this._isSimpleRenderer(C))return!0;if(this._isCBRenderer(C)){var E=C.normalizationType;
return"function"===typeof C.attributeField||E&&"field"!==E?!1:!0}return this._isUVRenderer(C)?"function"===typeof C.attributeField||C.attributeField2?!1:!0:!1},_isSimpleRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("simplerenderer")},_isCBRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("classbreaksrenderer")},_isUVRenderer:function(C){return-1<C.declaredClass.toLowerCase().indexOf("uniquevaluerenderer")},_isCBSizeRenderer:function(C){var E=C.infos;if(!this._isCBRenderer(C)||
!E||2>E.length)return!1;var F=Infinity,G=-Infinity;a.forEach(E,function(H){if(H=H.symbol){var L=0;switch(H.type){case "simplemarkersymbol":L=H.size;break;case "picturemarkersymbol":L=(H.width+H.height)/2}F=Math.min(F,L);G=Math.max(G,L)}});return Infinity!==F&&-Infinity!==G&&F!==G},_getRendererAttributeInfo:function(C){var E=C.attributeField,F=E?this.layer.getField(E):null;return{field:E,attributeType:F&&"esriFieldTypeDate"===F.type?"date":null,rotationType:null,valueExpression:C.valueExpression,valueExpressionTitle:C.valueExpressionTitle,
normalizationField:C.normalizationField}},_setRendererTitle:function(C,E){C.legendOptions=A.clone(E.legendOptions);C.legendOptions&&C.legendOptions.title||(C.legendOptions=C.legendOptions||{},C.legendOptions.title=c.getRendererTitle(E,this.layer))},_getSupportedVariables:function(C){var E=C.getVisualVariablesForType("colorInfo",!1)||[],F=C.getVisualVariablesForType("sizeInfo",!1)||[],G=C.getVisualVariablesForType("opacityInfo",!1)||[];C=C.getVisualVariablesForType("rotationInfo",!1)||[];E=a.filter(E,
this._variableFilter);F=a.filter(F,this._variableFilter);G=a.filter(G,this._variableFilter);C=a.filter(C,this._variableFilter);return{sizeVars:F,allVars:E.concat(F).concat(G).concat(C)}},_variableFilter:function(C){return"function"!==typeof C.field&&!m.viewScaleRE.test(C.valueExpression)},_createClusterVariables:function(C,E){return a.map(C,function(F){return this._createVarForAvg(F,E)},this)},_createVarForAvg:function(C,E){var F=A.clone(C),G=this._getVariableAttributeInfo(C);F.field=w.getClusterField(G,
"avg");F.normalizationField=null;F.valueExpression=null;F.valueExpressionTitle=null;G=this._getStatInfo(G,"avg");this._addStatInfo(E,G);this._setVariableTitle(F,C);return F},_getVariableAttributeInfo:function(C){var E="rotationInfo"===C.type,F=E?"angle":null;E=E?C.rotationType:null;var G=C.legendOptions&&C.legendOptions.title,H=C.field,L=H?this.layer.getField(H):null;L&&"esriFieldTypeDate"===L.type&&(F="date");return{field:H,attributeType:F,rotationType:E,valueExpression:C.valueExpression,valueExpressionTitle:C.valueExpressionTitle||
C.valueExpression&&G,normalizationField:C.normalizationField}},_setVariableTitle:function(C,E){C.legendOptions&&C.legendOptions.title||(C.legendOptions=C.legendOptions||{},C.legendOptions.title=c.getVisualVariableTitle(E,this.layer))},_getStatInfo:function(C,E){return{statisticHash:w.getStatisticHash(C,E),attributeInfo:C,statisticType:E}},_addStatInfo:function(C,E){var F=this._findStatInfo(C,E);F?F.attributeInfo.valueExpressionTitle||(F.attributeInfo.valueExpressionTitle=E.attributeInfo.valueExpressionTitle):
C.push(E)},_findStatInfo:function(C,E){var F;a.some(C,function(G){G.statisticHash===E.statisticHash&&(F=G);return!!F});return F},_compareStatInfos:function(C,E){var F=a.filter(C,function(H){return!this._findStatInfo(E,H)},this),G=a.filter(E,function(H){return!this._findStatInfo(C,H)},this);return G.length||F.length?{added:G,removed:F}:null},_addSizeByCountVariable:function(C){var E=this._createSizeByCountVariable();E&&this._addVariable(C,E)},_getSizeByCountVariable:function(C){C=C.getVisualVariablesForType("sizeInfo",
!1)||[];return a.filter(C,function(E){return"cluster_count"===E.field})[0]},_updateSizeByCountVariable:function(){var C=this._renderer,E=this._getSizeByCountVariable(C);if(E){var F=this._createSizeByCountVariable();F&&this._replaceVariable(C,E,F)}},_createSizeByCountVariable:function(){var C=this._clusterGenerator;if(C){var E=C.getCurrentLodStats();if(E){var F=C.getNumFeatures();C=C.clusters;var G=E.min,H=E.max;1===E.count&&G===F||1===C.length&&C[0].count===F?(G=1,H=F):G&&G===H&&(H=2*G);F={type:"sizeInfo",
field:"cluster_count",valueUnit:"unknown",minSize:12,maxSize:50,minDataValue:G,maxDataValue:H,legendOptions:{title:u}}}}return F},_addVariable:function(C,E){var F=C.visualVariables||[];F.push(E);C.setVisualVariables(F)},_replaceVariable:function(C,E,F){var G=C.visualVariables;E=a.indexOf(G,E);-1<E&&G.splice(E,1);G.push(F);C.setVisualVariables(G)},_getFields:function(C){var E=[new v({name:"cluster_count",type:"esriFieldTypeInteger"})];a.forEach(C,function(F){var G=F.statisticType;F=F.attributeInfo;
var H;"avg"===G?H="date"===F.attributeType?"esriFieldTypeDate":"esriFieldTypeDouble":"type"===G&&(H=F.field?this.layer.getField(F.field).type:"esriFieldTypeString");E.push(new v({name:w.getClusterField(F,G),type:H}))},this);return E},_createInfoTemplate:function(){var C=this._statisticInfos,E=this._renderer,F=[{fieldName:"cluster_count",label:u,visible:!0,format:{digitSeparator:!0,places:0}}],G=[],H=[f.substitute({count:"{cluster_count}"},x.countSummary)],L=this._isUVRenderer(E)?E.infos:[];a.forEach(C,
function(J){var S=J.statisticType,P=J.attributeInfo,Q=w.getClusterField(P,S),M=this._getFieldLabel(J);if("avg"===S){var N={fieldName:Q,label:M,visible:!0,format:"date"===P.attributeType?{dateFormat:"shortDateShortTime"}:{digitSeparator:!0,places:1}};var K=this._getFieldSummary(J,Q)}else"type"===S&&(K="expression/"+Q,N={fieldName:K,visible:!0},G.push({name:Q,title:M,returnType:"string",expression:this._getExpression(L,Q)}),K=this._getFieldSummary(J,K));N&&F.push(N);K&&H.push(K)},this);return this._createPopupTemplate({fieldInfos:F,
expressionInfos:G,description:H.join("\x3cbr/\x3e\x3cbr/\x3e")})},_updateInfoTemplate:function(C){var E=C.toJson(),F=this._isUVRenderer(this._renderer)?this._renderer.infos:[];a.forEach(this._statisticInfos,function(G){var H=G.statisticType;G=w.getClusterField(G.attributeInfo,H);"type"===H&&(H=this._findExpressionInfo(G,E))&&(H.expression=this._getExpression(F,G))},this);return this._createPopupTemplate(E)},_createPopupTemplate:function(C){var E=new k(C),F=E.title;E.setTitle(A.hitch(this,function(G){var H=
this._map&&this._map.infoWindow;if("esri.dijit.PopupMobile"!==(H&&H.declaredClass)||E.info.title)return F.call(E,G);G=(G=G.attributes)&&G.cluster_count;return null==G?"":f.substitute({count:G},x.countTitle)}));return E},_findExpressionInfo:function(C,E){var F;a.some(E.expressionInfos,function(G){G.name===C&&(F=G);return!!F});return F},_escapeDoubleQuotes:function(C){return C?C.replace(/"/g,'\\"'):""},_getExpression:function(C,E){return["var uvInfos \x3d ["+this._getObjects(C).join(", ")+"];",'var predominantType \x3d Text($feature["'+
E+'"]);','var label \x3d "'+this._escapeDoubleQuotes(x.predominantNoneValue)+'";',"for (var i \x3d 0; i \x3c Count(uvInfos); i++) {\nif (uvInfos[i].value \x3d\x3d predominantType) {\nlabel \x3d uvInfos[i].label;\nbreak;\n}\n}\nreturn label;"].join("\n")},_getObjects:function(C){return a.map(C,function(E){return'{"value": "'+String(E.value)+'","label": "'+this._escapeDoubleQuotes(String(E.label))+'"}'},this)},_getFieldLabel:function(C){var E=C.statisticType,F=C.attributeInfo,G=F.field;C=F.normalizationField;
var H="";if("avg"===E)var L=C?x.avgNormFieldLabel:x.avgFieldLabel;else"type"===E&&(L=x.predominantFieldLabel);L&&(E=F.valueExpression?F.valueExpressionTitle:this.layer.getFieldLabel(G),C=C&&this.layer.getFieldLabel(C),H=f.substitute({fieldLabel:E||"",normFieldLabel:C||""},L));return H},_getFieldSummary:function(C,E){var F=C.statisticType,G=C.attributeInfo,H=G.field,L=G.normalizationField,J="";if("avg"===F)var S=L?x.avgNormFieldSummary:x.avgFieldSummary;else"type"===F&&(S=x.predominantFieldSummary);
S&&(F=G.valueExpression?G.valueExpressionTitle:this.layer.getFieldLabel(H),L=L&&this.layer.getFieldLabel(L),J=f.substitute({fieldLabel:F||"",normFieldLabel:L||"",fieldValue:"{"+E+"}"},S));return J},_removeFromPopup:function(C){var E=this._map.infoWindow,F=E.features;if(F&&F.length){var G=a.filter(F,function(H){return H.getLayer()!==C});G.length<F.length&&(G.length?E.setFeatures(G):(E.clearFeatures(),E.hide()))}},_resetClusterNav:function(){this._resetClusterNavPartial();this._popupClusterGraphic=
null},_resetClusterNavPartial:function(){this._map.infoWindow.removeActions&&this._map.infoWindow.removeActions(this._popupActions);this._hideSingleGraphic(this._popupSingleGraphic);this._popupSingleGraphic=null},_addClusterBoundary:function(C,E){var F=E.clusterFillSymbol;F&&(F=new F.constructor(F.toJson()));F=new e(C,F);this._map.graphics.add(F);this._clusterBoundary=F},_removeClusterBoundary:function(){this._map.graphics.remove(this._clusterBoundary);this._clusterBoundary=null},_createBrowseFeaturesAction:function(){return this._map.infoWindow.addActions([{title:y.NLS_browseFeatures,
className:"browseFeatures",callback:A.hitch(this,function(C){C.preventDefault();C=this._map.infoWindow;var E=C.getSelectedFeature(),F=E.getChildGraphics(),G=C.getCurrentAnchor();C.setFeatures(F,{anchor:G});if(F=h.graphicsExtent(F))this._addClusterBoundary(F,C),C.show(this._getPopupLocation(F,G));this._popupClusterGraphic=E})}])[0]},_getPopupLocation:function(C,E){var F=C.getCenter();E=E.toLowerCase();-1<E.indexOf("top")?F.update(F.x,C.ymax):-1<E.indexOf("bottom")?F.update(F.x,C.ymin):-1<E.indexOf("left")?
F.update(C.xmin,F.y):F.update(C.xmax,F.y);return F},_createViewSummaryAction:function(){return this._map.infoWindow.addActions([{title:y.NLS_viewSummary,className:"viewSummary",callback:A.hitch(this,function(C){C.preventDefault();C=this._popupClusterGraphic;var E=this._map.infoWindow;E.setFeatures([C]);E.show(C.geometry);this._popupClusterGraphic=null})}])[0]},_initClusterUpdates:function(){this._updateSizeVariable();this._updateClusterGraphics();this._eventHandles.push(this._clusterGenerator.on("update-end",
A.hitch(this,function(C){(C.mapLevelChange||C.indexChange)&&this._updateSizeVariable();this._updateClusterGraphics()})),this._clusterGenerator.on("index-complete",A.hitch(this,function(){this._updateSizeVariable()})))},_updateClusterGraphics:function(){this._hideSingleGraphics();var C=[],E=[];a.forEach(this._clusterGenerator.clusters,function(F){var G=new e(F.centroid);G.setAggregationSourceLayer(this.layer);G.setAggregationInfo(F);this._applyClusterAttributes(G,F);1===F.count?(F=this._getSingleGraphic(G),
E.push(F)):C.push(G)},this);this._showSingleGraphics(E);this._addGraphics(C)},_addGraphics:function(C){var E=this.container;E.clear();a.forEach(C,function(F){E.add(F)})},_getSingleGraphic:function(C){var E=this._clusterGenerator.getCell(C.getAggregationInfo().primary).features[0],F=this.layer.renderer;F=F&&F.getSymbol(E);var G=this._getSizeByCountVariable(this._renderer);F&&G&&(C=G?this._renderer.getSize(C,{sizeInfo:G,shape:F.style,resolution:this._map.getResolutionInMeters(),scale:this._map.getScale()}):
null,E.setSize(C));return E},_showSingleGraphics:function(C){a.forEach(C,this._showSingleGraphic);this._singleGraphics=C},_hideSingleGraphics:function(){a.forEach(this._singleGraphics,function(C){C.setSize(null);this._hideSingleGraphic(C)},this);this._singleGraphics=null},_clearSingleGraphics:function(){a.forEach(this._singleGraphics,function(C){C.setSize(null)});this._singleGraphics=null},_showSingleGraphic:function(C){C&&C._resume()},_hideSingleGraphic:function(C){C&&C._suspend()},_updateSizeVariable:function(){this.isClusteringEnabled()&&
(this._updateSizeByCountVariable(),this.emit("renderer-change"))},_applyClusterAttributes:function(C,E){C.setAttributes(E.attributes)},_createLayerEventListeners:function(){var C=this.layer;this._eventHandles.push(C.on("visibility-change",A.hitch(this,function(E){this.container.setVisibility(E.visible)})),C.on("scale-range-change",A.hitch(this,function(){this.container.setScaleRange(this.layer.minScale,this.layer.maxScale)})),C.on("renderer-change",A.hitch(this,function(){this._applyRenderer()})),
C.on("info-template-change",A.hitch(this,function(){this._applyInfoTemplate()})))},_createMapEventListeners:function(){this._eventHandles.push(this._map.on("zoom-start",A.hitch(this,function(){this._removeClusterBoundary();this._removeFromPopup(this.container);this._removeFromPopup(this.layer);this._resetClusterNav();this.container.clear();this._hideSingleGraphics()})))},_createPopupEventListeners:function(){var C=this._map.infoWindow;this._eventHandles.push(C.on("selection-change",A.hitch(this,function(){this._resetClusterNavPartial();
var E=this._map.infoWindow.getSelectedFeature(),F=E&&E.getLayer();if(F){var G;F===this.container?(this._removeClusterBoundary(),this._map.infoWindow.addActions&&(G=this._createBrowseFeaturesAction())):F===this.layer&&E._isSuspended()?(this._map.infoWindow.addActions&&(G=this._createViewSummaryAction()),this._popupSingleGraphic=E,this._showSingleGraphic(this._popupSingleGraphic)):this._removeClusterBoundary();this._popupActions=G?[G]:null}})),C.on("clear-features",A.hitch(this,function(E){this._resetClusterNav();
E.isIntermediate||this._removeClusterBoundary()})),C.on("hide",A.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._suspend();this._clusterBoundary&&this._clusterBoundary.hide()})),C.on("show",A.hitch(this,function(){this._popupSingleGraphic&&this._popupSingleGraphic._resume();this._clusterBoundary&&this._clusterBoundary.show()})))},_destroyEventListeners:function(){a.forEach(this._eventHandles,function(C){C.remove()})}});A.setObject("layers.clustering.ClusterManager",D,g);
return D})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct ../kernel ../InfoTemplate ../PopupInfo ./PopupRenderer".split(" "),function(D,A,a,b,g,d,e,f){D=D([d,e],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(n,h){A.mixin(this,h);this.initialize(n,h)},getTitle:function(n){var h;this.info&&(h=this.titleHasRelatedFields||this.titleHasAsyncExpressions?"":this._getPopupValues(n,
this._fetchAttributes(n,null,this.getExpressionFieldsInTitle()),!0).title);return h||""},getContent:function(n){return this.info?(new f({template:this,graphic:n,chartTheme:this.chartTheme},b.create("div"))).domNode:""}});A.setObject("dijit.PopupTemplate",D,g);return D})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has dojo/Deferred dojo/sniff dojo/promise/all dojox/html/entities ./lang ./kernel ./request ./promiseList ./ArcadeExpression ./tasks/query ./tasks/QueryTask ./tasks/RelationshipQuery ./tasks/StatisticDefinition ./arcadeProfiles/popupProfile ./layers/support/attributeUtils dojo/i18n!dojo/cldr/nls/number".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y){D=D(null,{declaredClass:"esri.PopupInfo",_reNewline:/(\n)/ig,_reExprField:/^\s*expression\//i,_reExprFieldPattern:/\{expression\/([^\}]+)\}/ig,_exprPrefix:"expression/",_relatedFieldPrefix:"relationships/",_aggregatedFeaturesVariable:"$aggregatedfeatures",initialize:function(u,t){if(u){A.mixin(this,t);this.info=u;this.title=this.getTitle;this.content=this.getContent;this._exprCache=this._compileExpressions(this.info.expressionInfos);var C=this._fieldLabels=
{},E=this._fieldsMap={};this.info.fieldInfos&&a.forEach(this.info.fieldInfos,function(F){var G=F.fieldName.toLowerCase(),H=this._isExpressionField(G)?this.getExpressionInfo(G):null;C[G]=H?H.title:F.label;E[G]=F},this);this.titleHasRelatedFields=!(!this.info.title||-1===this.info.title.indexOf("{"+this._relatedFieldPrefix));this.titleHasAsyncExpressions=this._titleHasAsyncExpressions();this.contentHasAsyncExpressions=this._contentHasAyncExpressions()}},toJson:function(){return b.fromJson(b.toJson(this.info))},
getTitle:function(){},getContent:function(){},getFieldInfo:function(u){var t;a.some(this.info&&this.info.fieldInfos,function(C){C.fieldName===u&&(t=C);return!!t});return t},getExpressionInfo:function(u){if(u=this._getExprField(u)){u=u.toLowerCase();var t;a.some(this.info.expressionInfos,function(C){C.name.toLowerCase()===u&&(t=C);return!!t});return t}},getExpressionFieldsInTitle:function(){return this._getExprFieldsFromTemplatedString(this.info.title)},getExpressionFieldsInContent:function(){var u=
this._collectExprFieldsFromTemplatedString(this.info.description,[]);this.info.description||a.forEach(this.info.fieldInfos,function(t){t.visible&&this._collectExprField(t.fieldName,u)},this);a.forEach(this.info.mediaInfos,function(t){this._collectExprFieldsFromTemplatedString(t.title,u);this._collectExprFieldsFromTemplatedString(t.caption,u);if(t=t.value)this._collectExprFieldsFromTemplatedString(t.linkURL,u),this._collectExprFieldsFromTemplatedString(t.sourceURL,u),a.forEach(t.fields,function(C){this._collectExprField(C,
u)},this),this._collectExprField(t.normalizeField,u),this._collectExprField(t.tooltipField,u)},this);return u},getRequiredExpressionFields:function(){return this.getExpressionFieldsInTitle().concat(this.getExpressionFieldsInContent())},hasGeometryOperations:function(){return a.some(this._getArcadeExpressions(),function(u){return u.hasGeometryOperations()})},hasAsyncExpressions:function(){return a.some(this._getArcadeExpressions(),function(u){return u.async})},initializeArcadeEngine:function(){return z.initialize(this._getArcadeExpressions())},
getComponents:function(u,t){var C=this.info,E={initArcadeEngine:this.initializeArcadeEngine()};C.fieldInfos&&(C=a.filter(C.fieldInfos,function(F){return-1!==F.fieldName.indexOf(this._relatedFieldPrefix)},this))&&0<C.length&&(E.relatedInfo=this._getRelatedRecords({graphic:u,fieldsInfo:C}));this._needFullResolutionFeature(u)&&(E.fullResolutionFeature=this._getFullResolutionFeature(u));this._needAggregatedFeaturesLayer(u)&&(E.aggregatedFeaturesLayer=this._getAggregatedFeaturesLayer(u));return r(E).then(A.hitch(this,
function(F){var G=F.fullResolutionFeature,H=t&&t.evaluateAllExpressions,L=H?null:this.getRequiredExpressionFields();F=(H?this.hasAsyncExpressions():this._hasAsyncExpressions(L))?this._fetchAttributesAsync(u,G,L,F.aggregatedFeaturesLayer):this._fetchAttributes(u,G,L);return r([F]).then(A.hitch(this,function(J){return this._getPopupValues(u,J[0])}))}))},getAttachments:function(u){var t=u.getSourceLayer();u=u.attributes;if(this.info.showAttachments&&t&&t.hasAttachments&&t.objectIdField&&(u=u&&u[t.objectIdField]))return t.queryAttachmentInfos(u)},
_needAggregatedFeaturesLayer:function(u){return u.isAggregate()?a.some(this._getArcadeExpressions(),function(t){return t.hasVariable(this._aggregatedFeaturesVariable)},this):!1},_getAggregatedFeaturesLayer:function(u){return u.getAggregationSourceLayer().getFeatureCollectionLayer(u.getChildGraphics()).always(function(t){return t instanceof Error?null:t})},_needFullResolutionFeature:function(u){return(u=u.getSourceLayer())?"function"===typeof u.getMaxAllowableOffset&&0<u.getMaxAllowableOffset()&&this.hasGeometryOperations():
!1},_getFullResolutionFeature:function(u){var t=u.getSourceLayer(),C=t.objectIdField;u=(u=u.attributes)&&C&&u[C];if(null==u)return null;var E=new q;E.where=C+"\x3d"+u;E.maxAllowableOffset=0;E.outFields=[C];t._enableCacheHint(E);return t.queryFeatures(E).then(function(F){return F.features&&F.features[0]})},_isExpressionField:function(u){return this._reExprField.test(u)},_getExprField:function(u){return this._isExpressionField(u)?u.replace(this._reExprField,""):null},_collectExprField:function(u,t){var C=
this._getExprField(u);C&&t.push(C);return t},_collectExprFieldsFromTemplatedString:function(u,t){var C=this._getExprFieldsFromTemplatedString(u);C.length&&Array.prototype.push.apply(t,C);return t},_getExprFieldsFromTemplatedString:function(u){u=u?u.match(this._reExprFieldPattern):null;return a.map(u,function(t){return t.replace(this._reExprFieldPattern,"$1")},this)},_titleHasAsyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInTitle())},_contentHasAyncExpressions:function(){return this._hasAsyncExpressions(this.getExpressionFieldsInContent())},
_hasAsyncExpressions:function(u){return a.some(u,function(t){t=this._exprCache[t];return!(!t||!t.async)},this)},_compileExpressions:function(u){var t={};a.forEach(u,function(C){var E=C.returnType&&C.returnType.toLowerCase();t[C.name]=new m({expression:C.expression,returnType:"number"===E?"number":"string",profile:z})});return t},_getArcadeExpressions:function(){var u=[],t;for(t in this._exprCache)u.push(this._exprCache[t]);return u},_fetchAttributesAsync:function(u,t,C,E){var F=this._fetchAttributes(u,
t,C,E);u={};for(var G in F)(t=F[G])&&t.then&&(u[G]=t);return r(u).then(A.hitch(this,function(H){for(var L in H){var J=H[L];F[L]=J instanceof Error?null:this._processArcadeResult(J)}return F}))},_processArcadeResult:function(u){"string"===typeof u&&(u=h.encode(u));return u},_fetchAttributes:function(u,t,C,E){var F=A.clone(u.attributes)||{},G=t&&t.geometry,H=this._exprPrefix,L=this._exprCache;C=C||a.map(this.info.expressionInfos,function(J){return J.name});a.forEach(C,function(J){var S=H+J;J=(J=L[J])?
u.evaluateExpression(J,this._getEvalOptions(J,u,G,E)):null;F[S]=this._processArcadeResult(J)},this);return F},_getEvalOptions:function(u,t,C,E){var F=u.hasGeometryOperations(),G=t.getSourceLayer(),H=G&&(G.getMap()||G.parentLayer&&G.parentLayer.getMap());E&&(E._map=H);u=z.getEvalOptions({expression:u,feature:t,layer:G,aggregatedFeaturesLayer:E,map:H,spatialReference:H&&H.spatialReference});t=u.context.vars.$feature;F=!(!F||!C);t&&F&&(t._geometry=C);u.skipCache=F;return u},_getPopupValues:function(u,
t,C){t=t||this._fetchAttributes(u);var E=this.info,F=u.getSourceLayer(),G=A.clone(t),H="",L="",J,S,P=F&&F._getDateOpts&&F._getDateOpts().properties;P=P&&P.slice(0);var Q={dateFormat:{properties:P,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)},format:null};if(this._relatedInfo)for(K in this._relatedInfo)if(this._relatedInfo.hasOwnProperty(K)){var M=this._relatedInfo[K],N=this._relatedLayersInfo[K];M&&(a.forEach(M.relatedFeatures,function(ca){for(S in ca.attributes)if(ca.attributes.hasOwnProperty(S)&&
"esriRelCardinalityOneToOne"===N.relation.cardinality){var I=this._toRelatedFieldName([N.relation.id,S]);t[I]=G[I]=ca.attributes[S]}},this),a.forEach(M.relatedStatsFeatures,function(ca){for(S in ca.attributes)if(ca.attributes.hasOwnProperty(S)){var I=this._toRelatedFieldName([N.relation.id,S]);t[I]=G[I]=ca.attributes[S]}},this))}for(J in G){var K=this._fieldsMap[J.toLowerCase()];M=this._getLayerFieldInfo(F,J);K&&M&&(K.fieldName=M.name);G[J]=this._formatValue(G[J],J,Q);P&&K&&K.format&&K.format.dateFormat&&
(K=a.indexOf(P,J),-1<K&&P.splice(K,1))}if(F)for(J in P=F.typeIdField,t)if(t.hasOwnProperty(J)&&-1===J.indexOf(this._relatedFieldPrefix)){var X=t[J];k.isDefined(X)&&(K=this._getDomainName(F,u,J,X),k.isDefined(K)?G[J]=K:J===P&&(K=this._getTypeName(F,u,X),k.isDefined(K)&&(G[J]=K)))}E.title&&(H=this._processFieldsInLinks(this._fixTokens(E.title,F),t),H=A.trim(this._removeEmptyHref(k.substitute(G,H,Q)||"")));if(C)return{title:H};E.description&&(L=this._processFieldsInLinks(this._fixTokens(E.description,
F),t),L=A.trim(this._removeEmptyHref(k.substitute(G,L,Q)||"")));if(E.fieldInfos){var da=[];a.forEach(E.fieldInfos,function(ca){(J=ca.fieldName)&&ca.visible&&da.push([this._fieldLabels[J.toLowerCase()]||J,k.substitute(G,"${"+J+"}",Q)||""])},this)}var Y;if(E.mediaInfos){var aa=[];a.forEach(E.mediaInfos,function(ca){Y=0;X=ca.value;switch(ca.type){case "image":var I=X.sourceURL;I=I&&A.trim(this._removeEmptyHref(k.substitute(t,this._fixTokens(I,F))));Y=!!I;break;case "piechart":case "linechart":case "columnchart":case "barchart":I=
X.normalizeField;X.fields=a.map(X.fields,function(Da){return(T=this._getLayerFieldInfo(F,Da))?T.name:Da},this);if(I){var T=this._getLayerFieldInfo(F,I);X.normalizeField=T?T.name:I}Y=a.some(X.fields,function(Da){return k.isDefined(t[Da])||-1!==Da.indexOf(this._relatedFieldPrefix)&&this._relatedInfo},this);break;default:return}if(Y){ca=A.clone(ca);X=ca.value;I=ca.title?this._processFieldsInLinks(this._fixTokens(ca.title,F),t):"";var ba=ca.caption?this._processFieldsInLinks(this._fixTokens(ca.caption,
F),t):"";ca.title=I?A.trim(this._removeEmptyHref(k.substitute(G,I,Q)||"")):"";ca.caption=ba?A.trim(this._removeEmptyHref(k.substitute(G,ba,Q)||"")):"";if("image"===ca.type)X.sourceURL=k.substitute(t,this._fixTokens(X.sourceURL,F)),X.linkURL&&(X.linkURL=A.trim(k.substitute(t,this._fixTokens(X.linkURL,F))||""));else{var pa,ya;a.forEach(X.fields,function(Da,Ha){if(-1!==Da.indexOf(this._relatedFieldPrefix))ya=this._getRelatedChartInfos(Da,X,t,Q),ya instanceof Array?X.fields=ya:X.fields[Ha]=ya;else{var ta=
t[Da];ta=void 0===ta?null:ta;pa=t[X.normalizeField]||0;ta&&pa&&(ta/=pa);X.fields[Ha]={y:ta,tooltip:(this._fieldLabels[Da.toLowerCase()]||Da)+":\x3cbr/\x3e"+this._formatValue(ta,Da,Q,!!pa)}}},this)}aa.push(ca)}},this)}return{title:H,description:L,hasDescription:!!E.description,fields:da&&da.length?da:null,mediaInfos:aa&&aa.length?aa:null,formatted:G,editSummary:!1!==E.showLastEditInfo&&F&&F.getEditSummary?F.getEditSummary(u):""}},_getRelatedChartInfos:function(u,t,C,E){var F,G;var H=[];var L=this._fromRelatedFieldName(u);
var J=L[0];var S=this._relatedInfo[J];J=this._relatedLayersInfo[J];S&&a.forEach(S.relatedFeatures,function(P){P=P.attributes;var Q;for(Q in P)if(P.hasOwnProperty(Q)&&Q===L[1]){var M={};G=P[Q];t.normalizeField&&(F=-1!==t.normalizeField.indexOf(this._relatedFieldPrefix)?P[this._fromRelatedFieldName(t.normalizeField)[1]]:C[t.normalizeField]);G&&F&&(G/=F);if(t.tooltipField)if(-1!==t.tooltipField.indexOf(this._relatedFieldPrefix)){var N=this._fromRelatedFieldName(t.tooltipField)[1],K=k.isDefined(P[N])?
this._formatValue(P[N],t.tooltipField,E,!!F):N;M.tooltip=K+":\x3cbr/\x3e"+this._formatValue(G,N,E,!!F)}else M.tooltip=(this._fieldLabels[u.toLowerCase()]||u)+":\x3cbr/\x3e"+this._formatValue(G,t.tooltipField,E,!!F);else M.tooltip=G;M.y=G;H.push(M)}},this);return"esriRelCardinalityOneToMany"===J.relation.cardinality||"esriRelCardinalityManyToMany"===J.relation.cardinality?H:H[0]},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",shortDateLE:"(datePattern: 'd/M/y', selector: 'date')",shortDateLEShortTime:"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateLEShortTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
shortDateLELongTime:"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLELongTime24:"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",longMonthDayYearShortTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longMonthDayYearShortTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longMonthDayYearLongTime:"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",
longMonthDayYearLongTime24:"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",dayShortMonthYearShortTime:"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')",dayShortMonthYearShortTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",dayShortMonthYearLongTime:"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')",dayShortMonthYearLongTime24:"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')",
longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",longDateShortTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')",longDateShortTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",longDateLongTime:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')",longDateLongTime24:"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",
shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_dateFormatsJson:{shortDate:{datePattern:"M/d/y",selector:"date"},shortDateShortTime:{datePattern:"M/d/y",timePattern:"h:mm a",selector:"date and time"},shortDateShortTime24:{datePattern:"M/d/y",timePattern:"H:mm",selector:"date and time"},shortDateLongTime:{datePattern:"M/d/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLongTime24:{datePattern:"M/d/y",timePattern:"H:mm:ss",selector:"date and time"},
shortDateLE:{datePattern:"d/M/y",selector:"date"},shortDateLEShortTime:{datePattern:"d/M/y",timePattern:"h:mm a",selector:"date and time"},shortDateLEShortTime24:{datePattern:"d/M/y",timePattern:"H:mm",selector:"date and time"},shortDateLELongTime:{datePattern:"d/M/y",timePattern:"h:mm:ss a",selector:"date and time"},shortDateLELongTime24:{datePattern:"d/M/y",timePattern:"H:mm:ss",selector:"date and time"},longMonthDayYear:{datePattern:"MMMM d, y",selector:"date"},longMonthDayYearShortTime:{datePattern:"MMMM d, y",
timePattern:"h:mm a",selector:"date and time"},longMonthDayYearShortTime24:{datePattern:"MMMM d, y",timePattern:"H:mm",selector:"date and time"},longMonthDayYearLongTime:{datePattern:"MMMM d, y",timePattern:"h:mm:ss a",selector:"date and time"},longMonthDayYearLongTime24:{datePattern:"MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},dayShortMonthYear:{datePattern:"d MMM y",selector:"date"},dayShortMonthYearShortTime:{datePattern:"d MMM y",timePattern:"h:mm a",selector:"date and time"},dayShortMonthYearShortTime24:{datePattern:"d MMM y",
timePattern:"H:mm",selector:"date and time"},dayShortMonthYearLongTime:{datePattern:"d MMM y",timePattern:"h:mm:ss a",selector:"date and time"},dayShortMonthYearLongTime24:{datePattern:"d MMM y",timePattern:"H:mm:ss",selector:"date and time"},longDate:{datePattern:"EEEE, MMMM d, y",selector:"date"},longDateShortTime:{datePattern:"EEEE, MMMM d, y",timePattern:"h:mm a",selector:"date and time"},longDateShortTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm",selector:"date and time"},longDateLongTime:{datePattern:"EEEE, MMMM d, y",
timePattern:"h:mm:ss a",selector:"date and time"},longDateLongTime24:{datePattern:"EEEE, MMMM d, y",timePattern:"H:mm:ss",selector:"date and time"},longMonthYear:{datePattern:"MMMM y",selector:"date"},shortMonthYear:{datePattern:"MMM y",selector:"date"},year:{datePattern:"y",selector:"date"}},_reHref:/href\s*=\s*(")([^"]+)"/ig,_reHrefApos:/href\s*=\s*(')([^']+)'/ig,_fixTokens:function(u,t){var C=this;return u.replace(/(\{([^\{\r\n]+)\})/g,function(E,F,G){E=C._getLayerFieldInfo(t,G);return"$"+(E?"{"+
E.name+"}":F)})},_encodeAttributes:function(u,t){var C=A.clone(u)||{},E,F;for(E in C)(F=C[E])&&"string"===typeof F&&(F=t?F:encodeURIComponent(F),F=F.replace(/'/g,"\x26apos;"),C[E]=F);return C},_processFieldsInLinks:function(u,t){var C=this._encodeAttributes(t),E=this._encodeAttributes(t,!0);C=A.hitch(this,this._addValuesToHref,t,C,E);u&&(u=u.replace(this._reHref,C).replace(this._reHrefApos,C));return u},_addValuesToHref:function(u,t,C,E,F,G){G=G&&A.trim(G);return E=k.substitute(G&&0===G.indexOf("${")?
"'"===F?C:u:t,E)},_getLayerFieldInfo:function(u,t){return u&&u.getField?u.getField(t):null},_formatValue:function(u,t,C,E){var F=this._fieldsMap[t.toLowerCase()],G=F&&F.format;t=-1!==a.indexOf(C.dateFormat.properties,t);var H="number"===typeof u&&!t&&(!G||!G.dateFormat);if(!k.isDefined(u)||!F||!k.isDefined(G))return this._applyFormatting(u,H);F=G.hasOwnProperty("places")||G.hasOwnProperty("digitSeparator");var L=G.hasOwnProperty("digitSeparator")?G.digitSeparator:!0;if(F&&!t)var J={formatType:"NumberFormat",
places:k.isDefined(G.places)&&(!E||0<G.places)?Number(G.places):Infinity};else if(G.dateFormat)J=A.mixin({formatType:"DateFormat",utcOffset:this.utcOffset},this._dateFormatsJson[G.dateFormat]||this._dateFormatsJson.shortDateShortTime);else return this._applyFormatting(u,H);var S=this._applyFormatFunctions(u,J,C);F&&-1<u.constructor.toString().indexOf("Array")&&(S="",a.forEach(u,A.hitch(this,function(P,Q){Q&&(S+=" ");S+=this._applyFormatFunctions(P,J,C)})));F&&!L&&y.group&&(S=S.replace(new RegExp("\\"+
y.group,"g"),""));t&&(S='\x3cspan class\x3d"esriDateValue"\x3e'+S+"\x3c/span\x3e");return this._applyFormatting(S,H)},_applyFormatFunctions:function(u,t,C){t&&C&&(C.format={myKey:t});u=k.substitute({myKey:u},"${myKey}",C)||"";t&&C&&(C.format=null);return u},_applyFormatting:function(u,t){return t?this._forceLTR(u):this._applyPreWrap(u)},_forceLTR:function(u){var t=f("ie");return t&&10>=t?u:"\x3cspan class\x3d'esriNumericValue'\x3e"+u+"\x3c/span\x3e"},_applyPreWrap:function(u){return"string"===typeof u?
u.replace(this._reNewline,"\x3cspan class\x3d'charNewLine'\x3e$1\x3c/span\x3e"):u},_insertOffset:function(u){u&&(u=k.isDefined(this.utcOffset)?u.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):u);return u},_getDomainName:function(u,t,C,E){return(u=u.getDomain&&u.getDomain(C,{feature:t}))&&u.codedValues?u.getName(E):null},_getTypeName:function(u,t,C){return(u=u.getType&&u.getType(t))&&u.name},_getRelatedRecords:function(u){var t=u.graphic,C;this._relatedLayersInfoPromise||(this._relatedLayersInfoPromise=
this._getRelatedLayersInfo(u).then(A.hitch(this,function(E){for(C in E)E.hasOwnProperty(C)&&E[C]&&(this._relatedLayersInfo[C].relatedLayerInfo=E[C])})));return this._relatedLayersInfoPromise.then(A.hitch(this,function(){return this._queryRelatedLayers(t)})).then(A.hitch(this,function(E){this._setRelatedRecords(t,E);return E}))},_getRelatedLayersInfo:function(u){var t=u.fieldsInfo,C,E={};var F=u.graphic.getSourceLayer();this._relatedLayersInfo||(this._relatedLayersInfo={});a.forEach(t,function(G){var H;
var L=this._fromRelatedFieldName(G.fieldName);var J=L[0];L=L[1];if(J&&(!this._relatedLayersInfo[J]&&F&&F.relationships&&(a.some(F.relationships,function(P){if(P.id==J)return H=P,!0}),H&&(this._relatedLayersInfo[J]={relation:H,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[J]&&(this._relatedLayersInfo[J].relatedFields.push(L),G.statisticType))){var S=new w;S.statisticType=G.statisticType;S.onStatisticField=L;S.outStatisticFieldName=L;this._relatedLayersInfo[J].outStatistics.push(S)}},
this);for(C in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(C)&&this._relatedLayersInfo[C]&&(u=this._relatedLayersInfo[C].relation,u=F.url.replace(/[0-9]+$/,u.relatedTableId),this._relatedLayersInfo[C].relatedLayerUrl=u,E[C]=l({url:u,content:{f:"json"},callbackParamName:"callback"}));return n(E)},_queryRelatedLayers:function(u){var t={},C;for(C in this._relatedLayersInfo)this._relatedLayersInfo.hasOwnProperty(C)&&(t[C]=this._queryRelatedLayer({graphic:u,relatedInfo:this._relatedLayersInfo[C]}));
return n(t)},_queryRelatedLayer:function(u){var t,C;var E=u.graphic;var F=E.getSourceLayer();var G=F.url.match(/[0-9]+$/g)[0];var H=u.relatedInfo;var L=H.relatedLayerInfo;var J=H.relatedLayerUrl;var S=H.relation;u=a.filter(L.relationships,function(X){return X.relatedTableId===parseInt(G,10)});1===u.length?t=u[0]:1<u.length&&a.some(u,function(X){X.id===S.id&&(t=X);return!!t});if(t){var P=new q;a.some(L.fields,function(X){if(X.name===t.keyField)return C=-1!==a.indexOf(["esriFieldTypeSmallInteger","esriFieldTypeInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"],X.type)?"number":"string",!0});if(t.relationshipTableId&&t.keyFieldInRelationshipTable){var Q=new e;this._queryRelatedRecords(E,t).then(A.hitch(this,function(X){var da;(da=X[E.attributes[F.objectIdField]])?(X=a.map(da.features,function(Y){return Y.attributes[L.objectIdField]},this),H.outStatistics&&0<H.outStatistics.length&&L.supportsStatistics&&(N=new q,N.where=this._chunkWhereInClause(L.objectIdField,X,1E3),N.outFields=P.outFields,N.outStatistics=H.outStatistics),
N&&(K=new v(J),K.execute(N).then(A.hitch(this,function(Y){var aa=[];aa.push(da);aa.push(Y);Q.resolve(aa)})))):Q.resolve()}))}else{var M="string"===C?t.keyField+"\x3d'"+E.attributes[S.keyField]+"'":t.keyField+"\x3d"+E.attributes[S.keyField];P.where=M;P.outFields=H.relatedFields;if(H.outStatistics&&0<H.outStatistics.length&&L.supportsStatistics){var N=new q;N.where=P.where;N.outFields=P.outFields;N.outStatistics=H.outStatistics}var K=new v(J);M=[];M.push(K.execute(P));N&&M.push(K.execute(N))}}return M?
n(M):Q?Q.promise:void 0},_setRelatedRecords:function(u,t){this._relatedInfo=[];for(var C in t)if(t.hasOwnProperty(C)&&t[C]){var E=t[C];this._relatedInfo[C]={};this._relatedInfo[C].relatedFeatures=E[0].features;k.isDefined(E[1])&&(this._relatedInfo[C].relatedStatsFeatures=E[1].features)}},_handlerErrorResponse:function(u,t){u.reject(t)},_fromRelatedFieldName:function(u){var t=[];-1!==u.indexOf(this._relatedFieldPrefix)&&(u=u.split("/"),t=u.slice(1));return t},_toRelatedFieldName:function(u){var t=
"";u&&0<u.length&&(t=this._relatedFieldPrefix+u[0]+"/"+u[1]);return t},_queryRelatedRecords:function(u,t){var C=u.getSourceLayer(),E=new B;E.outFields=["*"];E.relationshipId=t.id;E.objectIds=[u.attributes[C.objectIdField]];return C.queryRelatedFeatures(E)},_removeEmptyHref:function(u){return u.replace(/href=(""|'')/gi,"")},_chunkWhereInClause:function(u,t,C){for(var E=0,F=[];E<t.length;)F.push(u+" IN ("+t.slice(E,C+E)+")"),E+=C;return F.join(" OR ")}});return c.PopupInfo=c.PopupInfoTemplate=D})},
"dojox/html/entities":function(){define(["dojo/_base/lang"],function(D){var A=D.getObject("dojox.html.entities",!0),a=function(g,d){if(d._encCache&&d._encCache.regexp&&d._encCache.mapper&&d.length==d._encCache.length){var e=d._encCache.mapper;var f=d._encCache.regexp}else{e={};f=["["];var n;for(n=0;n<d.length;n++)e[d[n][0]]="\x26"+d[n][1]+";",f.push(d[n][0]);f.push("]");f=new RegExp(f.join(""),"g");d._encCache={mapper:e,regexp:f,length:d.length}}return g=g.replace(f,function(h){return e[h]})},b=function(g,
d){if(d._decCache&&d._decCache.regexp&&d._decCache.mapper&&d.length==d._decCache.length){var e=d._decCache.mapper;var f=d._decCache.regexp}else{e={};f=["("];var n;for(n=0;n<d.length;n++){var h="\x26"+d[n][1]+";";n&&f.push("|");e[h]=d[n][0];f.push(h)}f.push(")");f=new RegExp(f.join(""),"g");d._decCache={mapper:e,regexp:f,length:d.length}}return g=g.replace(f,function(k){return e[k]})};A.html=[["\x26","amp"],['"',"quot"],["\x3c","lt"],["\x3e","gt"],["\u00a0","nbsp"]];A.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","OElig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];A.encode=function(g,d){g&&(d?g=a(g,d):(g=a(g,A.html),g=a(g,A.latin)));return g};A.decode=function(g,d){g&&(d?g=b(g,d):(g=b(g,A.html),g=b(g,A.latin)));return g};return A})},"esri/ArcadeExpression":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./layers/support/attributeUtils ./support/expressionUtils".split(" "),function(D,A,a,b,g,d){D=D(null,{declaredClass:"esri.ArcadeExpression",expression:null,profile:null,returnType:null,async:null,id:null,
syntaxTree:null,_traits:null,_attributeDef:null,_attributeCache:null,_compiled:!1,constructor:function(e){A.mixin(this,e);this.returnType=this.returnType||"string";this.id=g.getAttributeId(this.expression);this._setSyntaxTree(this.profile.parse(this));this.async=this.async||this.profile.isAsync(this)},hasGeometryOperations:function(){var e=this._traits.geometryOperations;void 0===e&&(e=this._traits.geometryOperations=d.hasGeometryOperations(this.syntaxTree));return e},hasFeatureSetOperations:function(){var e=
this._traits.featureSetOperations;void 0===e&&(e=this._traits.featureSetOperations=d.hasFeatureSetOperations(this.syntaxTree));return e},hasVariable:function(e){var f=this._traits.variables;void 0===f[e]&&(f[e]=d.hasVariable(this.syntaxTree,e));return f[e]},hasFunction:function(e){var f=this._traits.functions;void 0===f[e]&&(f[e]=d.hasFunction(this.syntaxTree,e));return f[e]},evaluate:function(e){this._compile();var f=this._attributeCache.compiledFunc;return this.async?d.executeAsyncFunction(f,e):
d.executeFunction(f,e)},_setSyntaxTree:function(e){this.syntaxTree=e;this._compiled=!1;this._traits={variables:{},functions:{}};this._createLegacyValueObjects()},_createLegacyValueObjects:function(){this._attributeDef={valueExpression:this.expression};this._attributeCache={attributeInfo:this._attributeDef,isNumeric:"number"===this.returnType,idSource:this.expression,id:this.id,hasExpr:!0,compiledFunc:null,syntaxTree:this.syntaxTree,isScaleDriven:!1,dependsOnView:this.hasVariable("$view"),dependsOnGeometry:this.hasGeometryOperations(),
isJSFunc:!1}},_compile:function(){this._compiled||(this._attributeCache.compiledFunc=this.profile.compile(this),this._compiled=!0)}});return b.ArcadeExpression=D})},"esri/arcadeProfiles/popupProfile":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../promiseList ../arcade/Feature ../support/expressionUtils ./utils".split(" "),function(D,A,a,b,g,d,e,f){D=new (D(null,{declaredClass:"esri.arcadeProfiles.PopupProfile",defaults:{globals:{featureSet:["$layer","$datastore","$map",
"$aggregatedfeatures"],async:["$layer","$datastore","$map","$aggregatedfeatures"]},context:{vars:{$feature:"any",$layer:"any",$datastore:"any",$map:"any",$aggregatedfeatures:"any"}}},initialize:function(n){var h=[];f.hasGeometryOperations(n)&&h.push(e.enableGeometryOperations());(f.hasFeatureSetOperations(n)||f.hasVariables(n,this.defaults.globals.featureSet))&&h.push(e.enableFeatureSetOperations());f.isAsync(n)&&h.push(e.enableAsyncOperations());return g(h)},isAsync:function(n){n=[n];return f.hasFeatureSetOperations(n)||
f.hasVariables(n,this.defaults.globals.async)},parse:function(n){return e.createSyntaxTree(n.expression)},compile:function(n){var h=A.clone(this.defaults.context);h.useAsync=n.async;return n.syntaxTree?e.createFunction(n.syntaxTree,h):null},getEvalOptions:function(n){var h=n.expression,k=n.feature,c=n.layer,l=n.aggregatedFeaturesLayer,r=n.map;n=n.spatialReference;k=k&&h.hasVariable("$feature")?d.createFromGraphicLikeObject(k.geometry,k.attributes,c):null;var m,q;if(c){var v={spatialReference:n};h.hasVariable("$layer")&&
(m=c.getMap()?e.createFeatureSetFromLayer(c,v):e.createFeatureSetFromLayerUrl(c.url,v));if(h.hasVariable("$datastore"))var B=(B=f.getServiceUrl(c.url))?e.createFeatureSetCollectionFromServiceUrl(B,v):null;h.hasVariable("$aggregatedfeatures")&&l&&(q=l.getMap()?e.createFeatureSetFromLayer(l,v):null)}h=r&&h.hasVariable("$map")?e.createFeatureSetCollectionFromMap(r):null;return{context:{vars:{$feature:k,$layer:m,$datastore:B,$map:h,$aggregatedfeatures:q},spatialReference:n}}}}));A.setObject("arcadeProfiles.popupProfile",
D,b);return D})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/sniff dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style ../libs/sanitizer/Sanitizer dojox/html/entities dijit/_Widget dijit/_Templated ../kernel ../lang ../urlUtils ./_EventedWidget dojo/i18n!../nls/jsapi dojo/NodeList-dom".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y){var u=0,t=y.widgets.popup,
C=y.widgets.templatePicker;A=A([x,q,v],{declaredClass:"esri.dijit._PopupRenderer",_sanitizer:new r({whiteList:{span:["class"],dd:[],dl:[],dt:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],sub:[],sup:[],animate:[],animatetransform:[],circle:[],clippath:[],defs:[],ellipse:[],g:[],image:[],line:[],lineargradient:[],marker:[],mask:[],path:[],pattern:[],polygon:[],polyline:[],radialgradient:[],rect:[],stop:[],svg:[],"switch":[],symbol:[],text:[],textpath:[],tspan:[],use:[]}},!0),constructor:function(){this._nls=
b.mixin({},t)},templateString:"\x3cdiv class\x3d'esriViewPopup'\x3e\x3cdiv class\x3d'statusSection hidden' dojoAttachPoint\x3d'_status'\x3e\x3c/div\x3e\x3cdiv class\x3d'mainSection'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_title'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d'_description'\x3e\x3c/div\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'attachmentsSection hidden'\x3e\x3cdiv\x3e${_nls.NLS_attach}:\x3c/div\x3e\x3cul dojoAttachPoint\x3d'_attachmentsList'\x3e\x3c/ul\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaSection hidden'\x3e\x3cdiv class\x3d'header' dojoAttachPoint\x3d'_mediaTitle'\x3e\x3c/div\x3e\x3cdiv class\x3d'hzLine'\x3e\x3c/div\x3e\x3cdiv class\x3d'caption' dojoAttachPoint\x3d'_mediaCaption'\x3e\x3c/div\x3e\x3cdiv class\x3d'gallery' dojoAttachPoint\x3d'_gallery'\x3e\x3cdiv class\x3d'mediaHandle prev' dojoAttachPoint\x3d'_prevMedia' dojoAttachEvent\x3d'onclick: _goToPrevMedia'\x3e\x3c/div\x3e\x3cdiv class\x3d'mediaHandle next' dojoAttachPoint\x3d'_nextMedia' dojoAttachEvent\x3d'onclick: _goToNextMedia'\x3e\x3c/div\x3e\x3cul class\x3d'summary'\x3e\x3cli class\x3d'image mediaCount hidden' dojoAttachPoint\x3d'_imageCount'\x3e0\x3c/li\x3e\x3cli class\x3d'image mediaIcon hidden'\x3e\x3c/li\x3e\x3cli class\x3d'chart mediaCount hidden' dojoAttachPoint\x3d'_chartCount'\x3e0\x3c/li\x3e\x3cli class\x3d'chart mediaIcon hidden'\x3e\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d'frame' dojoAttachPoint\x3d'_mediaFrame'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummarySection hidden' dojoAttachPoint\x3d'_editSummarySection'\x3e\x3cdiv class\x3d'break'\x3e\x3c/div\x3e\x3cdiv class\x3d'break hidden' dojoAttachPoint\x3d'_mediaBreak'\x3e\x3c/div\x3e\x3cdiv class\x3d'editSummary' dojoAttachPoint\x3d'_editSummary'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e",
showTitle:!0,startup:function(){this.inherited(arguments);this._showStatus(C.loading);this._contentDfd=this.template.getComponents(this.graphic).then(b.hitch(this,this._handleComponentsSuccess)).otherwise(b.hitch(this,this._handleComponentsError))},destroy:function(){this._contentDfd&&this._contentDfd.cancel();this._attachmentsDfd&&this._attachmentsDfd.cancel();this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._contentDfd=this._attachmentsDfd=null;this.inherited(arguments)},
_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var E=this._mediaInfos,F=E.length,G=this.domNode,H=this._prevMedia,L=this._nextMedia;if(1<F){var J=0,S=0;g.forEach(E,function(P){"image"===P.type?J++:-1!==P.type.indexOf("chart")&&S++});J&&(h.set(this._imageCount,"innerHTML",J),d.query(".summary .image",
G).removeClass("hidden"));S&&(h.set(this._chartCount,"innerHTML",S),d.query(".summary .chart",G).removeClass("hidden"))}else d.query(".summary",G).addClass("hidden"),k.add(H,"hidden"),k.add(L,"hidden");E=this._mediaPtr;0===E?k.add(H,"hidden"):k.remove(H,"hidden");E===F-1?k.add(L,"hidden"):k.remove(L,"hidden");this._destroyFrame()},_displayMedia:function(){var E=this._mediaInfos[this._mediaPtr],F=E.title,G=E.caption,H=d.query(".mediaSection .hzLine",this.domNode)[0];h.set(this._mediaTitle,"innerHTML",
this._sanitizer.sanitize(F));k[F?"remove":"add"](this._mediaTitle,"hidden");h.set(this._mediaCaption,"innerHTML",this._sanitizer.sanitize(G));k[G?"remove":"add"](this._mediaCaption,"hidden");k[F&&G?"remove":"add"](H,"hidden");this._rid=null;if("image"===E.type)this._showImage(E);else{var L=this;F=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"];G=E.value.theme||this.chartTheme;b.isString(G)&&(G=G.replace(/\./gi,"/"),-1===G.indexOf("/")&&(G="dojox/charting/themes/"+G));G||(G="./Rainbow");
F.push(G);try{var J=this._rid=u++;D(F,function(S,P,Q){J===L._rid&&(L._rid=null,L._showChart(E.type,E.value,S,P,Q))})}catch(S){}}},_preventNewTab:function(E){return(E=E&&b.trim(E).toLowerCase())&&(0===E.indexOf("mailto:")||0===E.indexOf("tel:"))},_showImage:function(E){k.add(this._mediaFrame,"image");var F=l.get(this._gallery,"height"),G=E.value,H=m.decode(G.linkURL);G=m.decode(G.sourceURL);var L;H&&(L=c.create("a",{href:H,target:this._preventNewTab(H)?"":"_blank"},this._mediaFrame));H=E.refreshInterval?
this._addURLParameter(G,"timestamp",Date.now()):G;c.create("img",{className:"esriPopupMediaImage",src:H},L||this._mediaFrame);var J=d.query(".esriPopupMediaImage",this._mediaFrame)[0];this._imageLoadHandle=a.connect(J,"onload",this,function(){this._clearImageHandles();this._imageLoaded(J,F);this._initImageRefresh(E)})},_addURLParameter:function(E,F,G){var H=-1===E.indexOf("?")?"?":"\x26";return E+H+F+"\x3d"+G},_initImageRefresh:function(E){if(E.refreshInterval){var F=6E4*E.refreshInterval;this._imageRefreshHandle=
setTimeout(b.hitch(this,function(){this._destroyFrame();this._showImage(E)}),F)}},_clearImageHandles:function(){a.disconnect(this._imageLoadHandle);this._imageLoadHandle=null;clearTimeout(this._imageRefreshHandle);this._imageRefreshHandle=null},_showChart:function(E,F,G,H,L){k.remove(this._mediaFrame,"image");G=this._chart=new G(c.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});L&&G.setTheme(L);switch(E){case "piechart":G.addPlot("default",{type:"Pie",labels:!1});G.addSeries("Series A",
F.fields);break;case "linechart":G.addPlot("default",{type:"Markers"});G.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});G.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});g.forEach(F.fields,function(J,S){J.x=S+1});G.addSeries("Series A",F.fields);break;case "columnchart":G.addPlot("default",{type:"Columns",gap:3});G.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});G.addSeries("Series A",F.fields);break;case "barchart":G.addPlot("default",{type:"Bars",
gap:3}),G.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),G.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),G.addSeries("Series A",F.fields)}this._action=new H(G);G.render()},_destroyFrame:function(){this._rid=null;this._clearImageHandles();this._chart&&(this._chart.destroy(),this._chart=null);this._action&&(this._action.destroy(),this._action=null);h.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(E,F){var G=E.height;G<F&&l.set(E,"marginTop",
Math.round((F-G)/2)+"px")},_attListHandler:function(E,F){if(E===this._attachmentsDfd){this._attachmentsDfd=null;var G="";F instanceof Error||!F||!F.length||g.forEach(F,function(H){G+="\x3cli\x3e";G+="\x3ca href\x3d'"+z.addProxy(H.url)+"' target\x3d'_blank'\x3e"+(H.name||"[No name]")+"\x3c/a\x3e";G+="\x3c/li\x3e"});h.set(this._attachmentsList,"innerHTML",G||"\x3cli\x3e"+this._nls.NLS_noAttach+"\x3c/li\x3e")}},_createLinkIfURI:function(E,F){var G=z.getURIInfo(E);if(G){var H=E.match(G.pattern),L=H&&
H[2];H=m.decode(H[1]);c.create("a",{target:"_blank",href:H,title:H,innerHTML:this._sanitizer.sanitize(w.substitute({appName:G.appName,hierPart:L},G.label))},F)}else h.set(F,"innerHTML",this._sanitizer.sanitize(E))},_showStatus:function(E){h.set(this._status,"innerHTML",E);k.remove(this._status,"hidden");d.query(".mainSection",this.domNode).addClass("hidden")},_hideStatus:function(){h.set(this._status,"innerHTML","");k.add(this._status,"hidden");d.query(".mainSection",this.domNode).removeClass("hidden")},
_handleComponentsSuccess:function(E){if(E){this._hideStatus();var F=this.showTitle?E.title:"",G=E.description,H=E.fields,L=E.mediaInfos,J=this.domNode,S=this._nls,P=this,Q=this.template,M=this.graphic;this._prevMedia.title=S.NLS_prevMedia;this._nextMedia.title=S.NLS_nextMedia;h.set(this._title,"innerHTML",this._sanitizer.sanitize(F));F||k.add(this._title,"hidden");if(!E.hasDescription&&H&&(G="",H=g.map(H,function(K){var X=c.create("tr",{vAlign:"top"});c.create("td",{className:"attrName",innerHTML:this._sanitizer.sanitize(K[0])},
X);var da=c.create("td",{className:"attrValue"},X);this._createLinkIfURI(K[1],da);return X},this),H.length)){var N=c.create("table",{className:"attrTable",cellPadding:"0px",cellSpacing:"0px"});g.forEach(H,function(K){N.appendChild(K)})}N?(this._description.appendChild(N),G=!0):h.set(this._description,"innerHTML",this._sanitizer.sanitize(G));G||k.add(this._description,"hidden");d.query("a",this._description).forEach(function(K){P._preventNewTab(K.href)?"_blank"===K.target&&h.remove(K,"target"):h.set(K,
"target","_blank")});F&&G?d.query(".mainSection .hzLine",J).removeClass("hidden"):F||G?d.query(".mainSection .hzLine",J).addClass("hidden"):d.query(".mainSection",J).addClass("hidden");if(F=this._attachmentsDfd=Q.getAttachments(M))F.addBoth(b.hitch(this,this._attListHandler,F)),h.set(this._attachmentsList,"innerHTML","\x3cli\x3e"+S.NLS_searching+"...\x3c/li\x3e"),d.query(".attachmentsSection",J).removeClass("hidden");L&&L.length&&(d.query(".mediaSection",J).removeClass("hidden"),n.setSelectable(this._mediaFrame,
!1),this._mediaInfos=L,this._mediaPtr=0,this._updateUI(),this._displayMedia());E.editSummary&&(h.set(this._editSummary,"innerHTML",this._sanitizer.sanitize(E.editSummary)),L&&L.length&&k.remove(this._mediaBreak,"hidden"),k.remove(this._editSummarySection,"hidden"));this.emit("content-update")}else this._showStatus(t.NLS_noInfo)},_handleComponentsError:function(E){E&&"cancel"===E.dojoType||this._showStatus(t.NLS_noInfo)}});b.setObject("dijit._PopupRenderer",A,B);return A})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on ../Evented dijit/_WidgetBase".split(" "),
function(D,A,a,b,g,d){return D([d,g],{_onMap:function(e){var f=this.constructor._onMap;f&&f.FINAL||(delete this.constructor._onMap,f=this.registerConnectEvents(),f.FINAL=!0);e=e.toLowerCase();if(f[e])var n=this[f[e].method];else e=this._onCamelCase(e),this[e]&&(n=e);return n},on:function(e,f){var n=this._onMap(e),h=e.replace(/\-/g,""),k="on"+h in this.domNode;return n||!k?this.inherited(arguments):this.own(b(this.domNode,h,f))[0]},emit:function(e,f,n){var h,k=e.toLowerCase(),c=this.constructor._onMap||
this.registerConnectEvents();var l=this[this._onMap(k)];f=f||{};f.target||(f.target=this);if(l&&c&&c[k]){this._onObj2Arr(function(){h=Array.prototype.slice.call(arguments)},c[k].argKeys)(f);var r=A.mixin({},arguments);r[2]=h;r[0]=c[k].name.replace(/^on/,"")}return this.inherited(r||arguments)}})})},"esri/dijit/Legend/utils":function(){define(["dojo/_base/lang","../../lang","dojo/i18n!../../nls/jsapi"],function(D,A,a){var b=a.widgets.legend;return{getVisualVariableTitle:function(g,d){var e=g.field,
f=g.normalizationField,n=!1,h=!1,k=!1,c;e=D.isFunction(e)?null:e;f=D.isFunction(f)?null:f;if(g.legendOptions&&g.legendOptions.title)var l=g.legendOptions.title;else if(g.valueExpressionTitle)l=g.valueExpressionTitle;else{if(d.renderer&&d.renderer.authoringInfo&&d.renderer.authoringInfo.visualVariables){var r=d.renderer.authoringInfo.visualVariables;for(c=0;c<r.length;c++){var m=r[c];if("colorInfo"===m.type&&"ratio"===m.style){n=!0;break}else if("colorInfo"===m.type&&"percent"===m.style){h=!0;break}else if("colorInfo"===
m.type&&"percentTotal"===m.style){k=!0;break}}}(n=k&&"showRatioPercentTotal"||h&&"showRatioPercent"||n&&"showRatio"||f&&"showNormField"||e&&"showField"||null)&&(l=A.substitute({field:e&&d.getFieldLabel(e),normField:f&&d.getFieldLabel(f)},"showField"===n?"${field}":b[n]))}return l},getRendererTitle:function(g,d){if(g){if("esri.renderer.ClassBreaksRenderer"===g.declaredClass){var e=g.attributeField;var f=g.normalizationField;var n="percent-of-total"===g.normalizationType}e=D.isFunction(e)?null:e;f=
D.isFunction(f)?null:f;if(g.legendOptions&&g.legendOptions.title)var h=g.legendOptions.title;else g.valueExpressionTitle?h=g.valueExpressionTitle:(n=f&&"showNormField"||(n?"showNormPct":null)||e&&"showField"||null)&&(h=A.substitute({field:e&&d.getFieldLabel(e),normField:f&&d.getFieldLabel(f)},"showField"===n?"${field}":b[n]))}return h}}})},"esri/layers/clustering/GeohashAggregation":function(){define("dojo/has dojo/_base/declare dojo/_base/lang dojo/_base/array ../../kernel ../../Evented ../../geometry/Point ../../geometry/Extent ../../geometry/mathUtils ../../support/expressionUtils ../../core/timerUtils ../support/attributeUtils ./geohashUtils ./statUtils".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){D=A(d,{loaded:!1,started:!1,map:null,layer:null,lod:null,tolerance:null,clusterMode:null,clusterRadius:null,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0,clusters:null,clustersEnabled:!0,statisticInfos:null,defaults:{lod:1,tolerance:0,clusterMode:"auto",clusterRadius:80,sortEnabled:!0,filterEnabled:!0,bufferEnabled:!0,updateEnabled:!0},_eventHandles:null,_updateHandle:null,_indexHandle:null,_cellIndex:null,_globalIndex:null,_perfProfile:null,
_indexUpdated:!1,_cellSizeScaleFactor:1.5,_extentScaleFactor:1.25,_maxGeohashLength:12,_minClusterRadius:15,_levelChange:!0,_clusterFieldPrefix:"cluster_",_mapLevelChange:!1,constructor:function(m){this._update=a.hitch(this,this._update);this._indexFeatures=a.hitch(this,this._indexFeatures);this._eventHandles=[];this._globalIndex={numFeatures:null,fullExtent:null,lodStats:null};this._perfProfile={lastIndex:{total:null,numFeatures:0},lastUpdate:{cells:null,clusters:null,total:null}};this.clusters=
[];this.map=m.map;this.layer=m.layer;this.setLod(m.lod);this.setTolerance(m.tolerance);this.setClusterMode(m.clusterMode);this.setClusterRadius(m.clusterRadius);this.setSortEnabled(m.sortEnabled);this.setFilterEnabled(m.filterEnabled);this.setBufferEnabled(m.bufferEnabled);this.setUpdateEnabled(m.updateEnabled);this.setStatisticInfos(m.statisticInfos);this._load();this.loaded?this._startup():this._eventHandles.push(this.on("load",a.hitch(this,this._startup)))},destroy:function(m){this._displayFeatures(!0,
m);b.forEach(this._eventHandles,function(q){q.remove()});k.clearTimeout(this._updateHandle);k.clearTimeout(this._indexHandle);this._cellIndex=this._globalIndex=this._eventHandles=this._updateHandle=this._indexHandle=this.map=this.layer=this.clusters=null},setLod:function(m){var q=this.lod;this.lod=m||this.defaults.lod;q!==this.lod&&this.update()},setTolerance:function(m){var q=this.tolerance;this.tolerance=m||this.defaults.tolerance;q!==this.tolerance&&this.update()},setClusterMode:function(m){var q=
this.clusterMode;this.clusterMode=m||this.defaults.clusterMode;this._evalClusterParams();q!==this.clusterMode&&this.update()},setClusterRadius:function(m){var q=this.clusterRadius;this.clusterRadius=null!=m?m:this.defaults.clusterRadius;this._evalClusterParams();q!==this.clusterRadius&&this.update()},setSortEnabled:function(m){var q=this.sortEnabled;this.sortEnabled=null!=m?!!m:this.defaults.sortEnabled;q!==this.sortEnabled&&this.update()},setFilterEnabled:function(m){var q=this.filterEnabled;this.filterEnabled=
null!=m?!!m:this.defaults.filterEnabled;q!==this.filterEnabled&&this.update()},setBufferEnabled:function(m){var q=this.bufferEnabled;this.bufferEnabled=null!=m?!!m:this.defaults.bufferEnabled;q!==this.bufferEnabled&&this.update()},setUpdateEnabled:function(m){var q=this.updateEnabled;(this.updateEnabled=null!=m?!!m:this.defaults.updateEnabled)&&q!==this.updateEnabled&&(this._mapLevelChange=!0,this.update())},setStatisticInfos:function(m){this.statisticInfos=m||[];this.loaded&&this._applyStatInfos(this.statisticInfos)},
update:function(){this.loaded&&null==this._updateHandle&&(this._updateHandle=k.setTimeout(this._update,k.priority.HIGH))},isUpdateScheduled:function(){return null!=this._updateHandle},index:function(){this.loaded&&null==this._indexHandle&&(this._indexHandle=k.setTimeout(this._indexFeatures,k.priority.HIGH))},getCell:function(m){return this._cellIndex[m.length][m]},getCluster:function(m){var q;b.some(this.clusters,function(v){-1<b.indexOf(v.geohashes,m)&&(q=v);return!!q});return q},getCellsInCluster:function(m){var q=
[];b.forEach(m&&m.geohashes,function(v){(v=this.getCell(v))&&q.push(v)},this);return q},getFeaturesInCluster:function(m){var q=[];m=this.getCellsInCluster(m);b.forEach(m,function(v){Array.prototype.push.apply(q,v.features)});return q},toggleFeatureVisibility:function(m){this.index()},getCurrentLodStats:function(){var m=this._globalIndex.lodStats;return m&&m[this.lod]},getNumFeatures:function(){return this._globalIndex.numFeatures},getFullExtent:function(){var m=this._globalIndex.fullExtent;return m&&
Infinity!==m.xmin?new f(m):null},_load:function(){this._displayFeatures(!1);this._checkLoadStatus();this.map.loaded||this._eventHandles.push(this.map.on("load",a.hitch(this,this._checkLoadStatus)));this.layer.loaded||this._eventHandles.push(this.layer.on("load",a.hitch(this,this._checkLoadStatus)))},_checkLoadStatus:function(){if(this.map.loaded&&this.layer.loaded){if("esriGeometryPoint"!==this.layer.geometryType)var m=Error("GeohashAggregation is supported only for points");else{var q=this.map.spatialReference;
q.isWebMercator()||4326===q.wkid||(m=Error("GeohashAggregation is supported only when map spatial reference is WGS84 or WebMercator"))}m?(this.loadError=m,this.emit("load-error",{error:m})):(this.loaded=!0,this.emit("load"))}},_startup:function(){this._evalUpdateStatus();this.index();this._processExtentChange();this._eventHandles.push(this.layer.on("update-end",a.hitch(this,this.index)),this.layer.on("edits-complete",a.hitch(this,this.index)),this.layer.on("graphics-clear",a.hitch(this,this.index)),
this.layer.on("suspend",a.hitch(this,this._evalUpdateStatus)),this.layer.on("resume",a.hitch(this,this._evalUpdateStatus)),this.map.on("extent-change",a.hitch(this,this._processExtentChange)))},_evalUpdateStatus:function(){this.setUpdateEnabled(!this.layer.suspended)},_processExtentChange:function(m){this._mapLevelChange=!(!m||!m.levelChange);this._evalClusterParams();this.update()},_update:function(){this._updateHandle=null;if(this.updateEnabled){this.emit("update-start");if(this.clustersEnabled){var m=
this.map.geographicExtent;if(m){var q=this._getIntersectingCells(m);m=this._getClusters(q.cells,m);this.clusters=m.clusters;this._applyStatInfosToClusters();q=q.profile;m=m.profile;var v=q.total+m.total;q.total=this._getElapsedTime(q.total);m.total=this._getElapsedTime(m.total);var B=this._perfProfile.lastUpdate={};B.cells=q;B.clusters=m;B.total=this._getElapsedTime(v)}}else this.clusters=[],this._perfProfile.lastUpdate=null;q=this._indexUpdated;this._indexUpdated=!1;m=this._mapLevelChange;this._mapLevelChange=
!1;this.emit("update-end",{levelChange:this._levelChange,mapLevelChange:m,indexChange:q})}},_displayFeatures:function(m,q){var v=this.layer,B=!m;v.suspendGraphics(B);!1!==q&&(B?v.clearNodes():v.redraw())},_indexFeatures:function(){this._indexHandle=null;var m=this._getTime();this._initializeIndexing();var q=0,v=this._globalIndex.fullExtent;b.forEach(this.layer.graphics,function(z){if(z.visible){var x=z.geometry,y=this._getLngLat(x);if(y){var u=x.getCacheValue("_geohash");void 0===u&&(u=l.pointToGeohash(y),
x.setCacheValue("_geohash",u||null))}u&&(this._addGeohashToIndex(u,z,y),q++,this._updateExtent(v,y))}},this);this._applyStatInfosToIndex();this._globalIndex.numFeatures=q;for(var B=this._globalIndex.lodStats,w=1;w<=this._maxGeohashLength;w++)B[w]=this._getLODStats(w,q);this._perfProfile.lastIndex.total=this._getElapsedTime(m,this._getTime());this._perfProfile.lastIndex.numFeatures=q;this._indexUpdated=!0;this.emit("index-complete");this.started||(this.started=!0,this.emit("start"));this.update()},
_initializeIndexing:function(){this._globalIndex={numFeatures:0,fullExtent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},lodStats:{}};for(var m=this._cellIndex=[],q=1;q<=this._maxGeohashLength;q++)m[q]={}},_getLngLat:function(m){if(m){var q=m.getLongitude();m=m.getLatitude();m=null!=q&&null!=m?{x:q,y:m}:null}return m},_addGeohashToIndex:function(m,q,v){for(var B=this._cellIndex,w="",z=0;z<this._maxGeohashLength;z++){w+=m[z];var x=B[w.length],y=x[w];y||(y=x[w]={count:0,centroid:{x:null,
y:null},extent:{xmin:Infinity,ymin:Infinity,xmax:-Infinity,ymax:-Infinity},features:[],geohash:w,statistics:null});this._updateItem(y,1,v,!0);y.features.push(q)}},_getLODStats:function(m,q){var v=this._cellIndex[m],B=0,w=Infinity,z=-Infinity,x=null,y;for(y in v){var u=v[y];B++;u.count<w&&(w=u.count);u.count>z&&(z=u.count)}0<B&&(x=Number((q/B).toFixed(2)));return{lod:m,count:B,min:Infinity===w?null:w,max:-Infinity===z?null:z,avg:x}},_evalClusterParams:function(){if(this.loaded&&"auto"===this.clusterMode){var m=
this._getClusterParams(this.map.getResolutionInMeters(),this.clusterRadius,this._minClusterRadius);this._levelChange=this.lod!==m.lod;this.lod=m.lod;this.tolerance=m.tolerance}},_getClusterParams:function(m,q,v){q<v&&(q=v);m=Math.ceil(m*q);q=this._getClosestLODRange(m).max;do v=this._getCellSize(q),(v=m>=this._cellSizeScaleFactor*v||1===v)||(q+=1);while(!v);v=m/this._getCellSize(q);return{lod:q,tolerance:m,multiplier:Number(v.toFixed(2))}},_getClosestLODRange:function(m){for(var q,v=this._maxGeohashLength;1<=
v;v--)if(this._getCellSize(v)>=m){q=v;break}null==q&&(q=1);m=q+1;m>this._maxGeohashLength&&(m=this._maxGeohashLength);return{min:q,max:m}},_getCellSize:function(m){m=l.getCellSizeInMeters(m);return Math.ceil(Math.min(m.width,m.height))},_sorter:function(m,q){var v=m.centroid,B=q.centroid;return m.count>q.count?-1:m.count<q.count?1:v.x>B.x?-1:v.x<B.x?1:0},_getIntersectingCells:function(m){var q=this._getTime();this.bufferEnabled&&(m=m.expand(this._extentScaleFactor));var v=l.getIntersecting(m,this.lod,
this.bufferEnabled?this.tolerance:0);m=this._getTime();var B=[],w=this.tolerance,z=this.sortEnabled;b.forEach(v,function(x){(x=this.getCell(x))&&B.push(x)},this);w&&z&&B.sort(this._sorter);v=this._getTime();return{cells:B,profile:{findCells:this._getElapsedTime(q,m),scanAndSortCells:this._getElapsedTime(m,v),total:v-q}}},_getClusters:function(m,q){var v=this._getTime(),B=[],w={},z={findCells:0};b.forEach(m,function(y,u){var t=this._createCluster(y,w,z);t&&B.push(t)},this);this._markIntersecting(B,
q);this.filterEnabled&&(B=this._getIntersectingClusters(B));var x=this._getTime();return{clusters:B,profile:{findCellsInCluster:this._getElapsedTime(z.findCells),total:x-v}}},_markIntersecting:function(m,q){var v=q.normalize();b.forEach(m,function(B){var w=B.centroid.x,z=B.centroid.y;B.isIntersecting=b.some(v,function(x){return w>=x.xmin&&w<=x.xmax&&z>=x.ymin&&z<=x.ymax})})},_getIntersectingClusters:function(m){return b.filter(m,function(q){return q.isIntersecting})},_createCluster:function(m,q,v){if(!q[m.geohash]){var B=
[{cell:m,distance:0}];if(this.tolerance){var w=this._getTime(),z=l.getNeighborsWithinDistance(m.centroid,this.lod,this.tolerance);v.findCells+=this._getTime()-w;b.forEach(z,function(x){if(x!==m.geohash&&(x=this.getCell(x))){var y=this._calculateDistance(m.centroid,x.centroid);y<=this.tolerance&&B.push({cell:x,distance:y})}},this)}return this._mergeCells(B,q)}},_calculateDistance:function(m,q){return n.getLength(l.geographicToWebMercator(m),l.geographicToWebMercator(q))},_mergeCells:function(m,q){var v=
this._initializeCluster({},m[0].cell.geohash);b.forEach(m,function(B){var w=B.cell,z=w.geohash;B=B.distance;var x=q[z];if(x)if(B<x.distance)this._removeCellFromCluster(z,q);else return;q[z]={cluster:v,distance:B};this._updateItem(v,w.count,w.centroid);v.geohashes.push(z)},this);return v},_removeCellFromCluster:function(m,q){var v=q[m].cluster;delete q[m];var B=b.indexOf(v.geohashes,m);-1<B&&v.geohashes.splice(B,1);this._reevaluateCluster(v)},_reevaluateCluster:function(m){var q=m.geohashes;m=this._initializeCluster(m,
m.primary);b.forEach(q,function(v){var B=this.getCell(v);B&&(this._updateItem(m,B.count,B.centroid),m.geohashes.push(v))},this)},_initializeCluster:function(m,q){m.count=0;m.centroid=new e(null,null);m.geohashes=[];m.primary=q;m.statistics=null;return m},_applyStatInfos:function(m){m=this._getValidStatInfos(m);this._applyStatInfosToIndex(m);this._applyStatInfosToClusters(m)},_getValidStatInfos:function(m){var q=[];b.forEach(m,function(v){var B=v.attributeInfo;v=v.statisticType;var w="angle"===B.attributeType;
if(r.isSupportedStatisticType(v)&&(!w||"avg"===v)){var z="arithmetic"===B.rotationType;q.push({attributeCache:c.createAttributeCache(B,"type"===v),identifier:r.getStatisticId(B,v),statFunctions:r.getStatisticFunctions(v),isAngular:w,isDate:"date"===B.attributeType,isArithmetic:z})}});return q},_applyStatInfosToIndex:function(m){m=m||this._getValidStatInfos(this.statisticInfos);var q=this._cellIndex;if(q)for(var v=1;v<=this._maxGeohashLength;v++){var B=q[v],w;for(w in B)this._applyStatInfosToCell(B[w],
m)}},_applyStatInfosToCell:function(m,q){var v=this._initializeStats(m,q);b.forEach(m.features,function(B){this._calcFeatureStats(B,q,v)},this);this._summarizeStats(m,v,q)},_calcFeatureStats:function(m,q,v){m.attributes&&b.forEach(q,function(B){var w=v[B.identifier],z=B.attributeCache;z=z?m._getDataValue(z.attributeInfo,z,h):null;B.statFunctions.updateCellStat(w,z,B)})},_applyStatInfosToClusters:function(m){m=m||this._getValidStatInfos(this.statisticInfos);var q=this._clusterFieldPrefix;b.forEach(this.clusters,
function(v){var B=this._initializeStats(v,m);b.forEach(this.getCellsInCluster(v),function(w){this._calcCellStats(w,m,B)},this);this._summarizeStats(v,B,m,q);v.attributes[q+"id"]=v.primary},this)},_calcCellStats:function(m,q,v){var B=m.statistics;b.forEach(q,function(w){var z=w.identifier;w.statFunctions.updateClusterStat(v[z],B[z],w)})},_initializeStats:function(m,q){var v=m.statistics={};b.forEach(q,function(B){v[B.identifier]=B.statFunctions.initialize(B)});return v},_summarizeStats:function(m,
q,v,B){var w=m.attributes={};B=B||"";w[B+"count"]=m.count;b.forEach(v,function(z){var x=this._getStatFieldName(z,B);w[x]=z.statFunctions.summarize(q[z.identifier],z)},this)},_getStatFieldName:function(m,q){return(q||"")+m.identifier},_updateItem:function(m,q,v,B){var w=v.y,z=m.centroid,x=m.count;z.x=(x*z.x+q*v.x)/(x+q);z.y=(x*z.y+q*w)/(x+q);m.count+=q;B&&this._updateExtent(m.extent,v)},_updateExtent:function(m,q){var v=q.x,B=q.y;v<m.xmin&&(m.xmin=v);v>m.xmax&&(m.xmax=v);B<m.ymin&&(m.ymin=B);B>m.ymax&&
(m.ymax=B)},_getTime:function(){return window.performance?window.performance.now():(new Date).getTime()},_getElapsedTime:function(m,q){var v=null!=m&&null!=q?q-m:m;if(null!=v){var B="millisecond";1E3<=v&&(v/=1E3,B="second",60<=v&&(v/=60,B="minute"));B={value:Number(v.toFixed(2)),unit:B}}return B}});a.setObject("layers.clustering.GeohashAggregation",D,g);return D})},"esri/core/timerUtils":function(){define([],function(){function D(d){var e,f=d.length;for(e=0;e<f;e++)d[e]()}var A={LOW:1,HIGH:2},a,b=
{};b[A.LOW]=[];b[A.HIGH]=[];var g=function(){clearTimeout(a);a=null;var d=b[A.HIGH];b[A.HIGH]=[];D(d);d=b[A.LOW];b[A.LOW]=[];D(d)};return{priority:A,callbackQueue:b,setTimeout:function(d,e){var f=[e,b[e].push(d)-1];a||(a=setTimeout(g,0));return f},clearTimeout:function(d){d&&b[d[0]].splice(d[1],1)}}})},"esri/layers/clustering/geohashUtils":function(){define("dojo/has dojo/string dojo/_base/lang dojo/_base/array ../../kernel ../../geometry/Point ../../geometry/Extent ../../SpatialReference ../../geometry/webMercatorUtils".split(" "),
function(D,A,a,b,g,d,e,f,n){function h(L){var J=L.spatialReference;if(!J)return{x:L.x,y:L.y};var S=J.isWebMercator(),P;4326===J.wkid?P={x:L.x,y:L.y}:S&&(P={x:L.getLongitude(),y:L.getLatitude()});return P}function k(L){var J=L.spatialReference,S=!(!J||!J.isWebMercator()),P;J&&4326===J.wkid?P=new e(L.toJson()):S&&(P=n.webMercatorToGeographic(L,!0));return P}function c(L,J){J.x=d.prototype._normalizeX(L.x,f.prototype._info[4326]);J.y=L.y;return J}function l(L){L=G.decimals[L].toString(2);return A.pad(L,
G.bitsPerBase32Char,"0")}function r(L,J){J=J.slice();J.splice(1,0,0);for(var S=J[0],P=J[2],Q=0;Q<L.length;Q++){Number(L[Q])?J[0]=J[1]:J[2]=J[1];var M=J[1]=(J[0]+J[2])/2;S=J[0];P=J[2]}return{value:M,min:S,max:P}}function m(L,J,S){var P=[];J=J.slice();J.splice(1,0,0);for(var Q=J[0],M=J[2],N=0;N<S;N++)L>=J[1]?(J[0]=J[1],Q=1):(J[2]=J[1],Q=0),J[1]=(J[0]+J[2])/2,P.push(Q),Q=J[0],M=J[2];return{value:P.join(""),min:Q,max:M}}function q(L){var J=L*G.bitsPerBase32Char;0===J%2?L=J/=2:(L=(J+1)/2,J-=L);return{lon:L,
lat:J}}function v(L){var J=0;L=L.split("").reverse().join("");for(var S=0;S<L.length;S++)J+=Number(L[S])*Math.pow(2,S);return G.base32[J]}function B(L,J){var S={x:L.xmin,y:L.ymax},P={x:L.xmax,y:L.ymin},Q={x:L.xmax,y:L.ymax};return{sw:H.pointToGeohash({x:L.xmin,y:L.ymin},J),nw:H.pointToGeohash(S,J),se:H.pointToGeohash(P,J),ne:H.pointToGeohash(Q,J)}}function w(L,J,S,P,Q){var M=L;do Q[M]||(Q[M]=!0,P.push(M)),(L=M===J)||(M=F(M,S));while(!L)}function z(L,J,S,P){var Q=B(L,J);L=[];w(Q.sw,Q.nw,"n",L,{});
J=[];w(Q.se,Q.ne,"n",J,{});for(Q=0;Q<L.length;Q++)w(L[Q],J[Q],"e",S,P)}function x(L){return b.filter(L,function(J){return 180===J.xmax?!0:!1})[0]}function y(L){return b.filter(L,function(J){return-180===J.xmin?!0:!1})[0]}function u(L,J,S,P){var Q=H.geographicToWebMercator(L);L={x:Q.x-J,y:Q.y-J};J=H.webMercatorToGeographic({x:Q.x+J,y:Q.y+J},!0);L=H.webMercatorToGeographic(L,!0);return new e(null!=S?S:L.x,L.y,null!=P?P:J.x,J.y)}function t(L,J,S,P){L=B(L,J);var Q,M;"min"===P?M=180:"max"===P&&(Q=-180);
var N=Q;P=M;var K=H.geohashToCell(L.sw).extent;J=H.geohashToCell(L.ne).extent;L=null!=N?N:K.xmin;K=K.ymin;P=null!=P?P:J.xmax;J=J.ymax;L=u({x:L,y:K},S,Q,M);S=u({x:P,y:J},S,Q,M);return new e(L.xmin,L.ymin,S.xmax,S.ymax)}function C(L,J,S){var P=L,Q=0;do Q++,(L=P===J)||(P=F(P,S));while(!L);return Q}function E(L,J){var S=B(L,J),P=C(S.nw,S.ne,"e");return{rows:C(S.nw,S.sw,"s"),cols:P}}function F(L,J){var S=L.length%2,P=L.slice(-1),Q=G.decimals[P],M=L.slice(0,-1);-1!=G.borders[J][S].indexOf(P)&&M&&(M=F(M,
J));return M+G.neighbors[J][S][Q]}var G={base32:"0123456789bcdefghjkmnpqrstuvwxyz",decimals:function(){for(var L={},J=0;32>J;J++)L["0123456789bcdefghjkmnpqrstuvwxyz"[J]]=J;return L}(),neighbors:{n:[null,"238967debc01fg45kmstqrwxuvhjyznp"],s:[null,"bc01fg45238967deuvhjyznpkmstqrwx"],e:[null,"14365h7k9dcfesgujnmqp0r2twvyx8zb"],w:[null,"p0r21436x8zb9dcf5h7kjnmqesgutwvy"]},borders:{n:[null,"bcfguvyz"],s:[null,"0145hjnp"],e:[null,"prxz"],w:[null,"028b"]},bitsPerBase32Char:5,maxGeohashLength:12,longitudeRange:[-180,
180],latitudeRange:[-90,90]};G.neighbors.n[0]="14365h7k9dcfesgujnmqp0r2twvyx8zb";G.neighbors.s[0]="p0r21436x8zb9dcf5h7kjnmqesgutwvy";G.neighbors.e[0]="238967debc01fg45kmstqrwxuvhjyznp";G.neighbors.w[0]="bc01fg45238967deuvhjyznpkmstqrwx";G.borders.n[0]="prxz";G.borders.s[0]="028b";G.borders.e[0]="bcfguvyz";G.borders.w[0]="0145hjnp";var H={geographicToWebMercator:function(L){L=d.lngLatToXY(L.x,L.y);return{x:L[0],y:L[1]}},webMercatorToGeographic:function(L,J){var S=d.xyToLngLat(L.x,L.y,J);return{x:S[0],
y:S[1]}},geohashToCell:function(L){var J;var S=[];for(J=0;J<L.length;J++)S.push(l(L[J]));S=S.join("");J=[];for(var P=[],Q=0;Q<S.length;Q++)0===Q%2?J.push(S[Q]):P.push(S[Q]);J=J.join("");P=P.join("");J=[J,P];S=r(J[0],G.longitudeRange);P=r(J[1],G.latitudeRange);J=S.value;return{point:{x:J,y:P.value},extent:{xmin:S.min,xmax:S.max,ymin:P.min,ymax:P.max},geohash:L}},pointToCell:function(L,J){J=J||G.maxGeohashLength;var S=h(L);if(S){S=c(S,S);var P=q(J);var Q=m(S.x,G.longitudeRange,P.lon);var M=m(S.y,G.latitudeRange,
P.lat);P=Q.value;var N=M.value;Q={xmin:Q.min,xmax:Q.max,ymin:M.min,ymax:M.max};M=[];for(var K=Math.ceil((P.length+N.length)/G.bitsPerBase32Char),X=0,da=0,Y=0;Y<K*G.bitsPerBase32Char;Y++){var aa=0===Y%2?P[X++]:N[da++];null==aa&&(aa=0);M.push(aa)}P=M.join("");N=G.bitsPerBase32Char;M=P.length/N;K=[];for(X=0;X<M;X++)da=P.substr(X*N,N),K.push(v(da));P=K.join("");return{point:S,extent:Q,geohash:P}}},geohashToPoint:function(L){return H.geohashToCell(L).point},pointToGeohash:function(L,J){var S=H.pointToCell(L,
J);return S&&S.geohash},getCells:function(L){return b.map(L,function(J){return H.geohashToCell(J)})},getCellSize:function(L){var J=G.longitudeRange,S=G.latitudeRange;J=Math.abs(J[1]-J[0]);S=Math.abs(S[1]-S[0]);L=q(L||1);return{width:J/Math.pow(2,L.lon),height:S/Math.pow(2,L.lat)}},getCellSizeInMeters:function(L){L=H.getCellSize(L);var J=n.metersPerDegree;L.width*=J;L.height*=J;return L},getIntersecting:function(L,J,S){J=J||1;S=S||0;var P=[],Q=k(L);if(Q){S&&(Q=H.expandExtent(L,J,S));L=Q.normalize();
var M={};b.forEach(L,function(N){z(N,J,P,M)})}return P},countIntersecting:function(L,J,S){J=J||1;S=S||0;var P=0,Q=k(L);if(Q){S&&(Q=H.expandExtent(L,J,S));L=Q.normalize();if(2===L.length){P=x(L);Q=y(L);S=E(P,J);var M=E(Q,J);L=S.rows;S=S.cols+M.cols;P={x:P.xmin,y:P.ymax};Q={x:Q.xmax,y:Q.ymax};P=c(P,{});Q=c(Q,{});P=H.pointToGeohash(P,J);J=H.pointToGeohash(Q,J);P===J&&S--;J={rows:L,cols:S}}else J=E(L[0],J);P=J.cols*J.rows}return P},getChildren:function(L){L=L||"";var J=[],S;for(S in G.decimals)J.push(L+
S);return J},getNeighbors:function(L){var J=F(L,"n"),S=F(L,"s");return[J,F(J,"e"),F(J,"w"),S,F(S,"e"),F(S,"w"),F(L,"e"),F(L,"w")]},getExtentFromDistance:function(L,J){J=J||1E3;var S,P=h(L);P&&(S=u(P,J));return S},expandExtent:function(L,J,S){J=J||1;S=S||0;if(L=k(L)){if(S){L=L.normalize();if(2===L.length){var P=S;S=x(L);L=y(L);S=t(S,J,P,"min");L=t(L,J,P,"max");360<=S.getWidth()+L.getWidth()?(J=-180,L=180):(J=S.xmin,L=L.xmax);return new e(J,S.ymin,L,S.ymax)}return t(L[0],J,S)}return L}},getNeighborsWithinDistance:function(L,
J,S){S=S||1E3;J=J||1;var P=[];if(L=h(L)){S=u(L,S).normalize();var Q={};b.forEach(S,function(M){z(M,J,P,Q)})}return P}};a.setObject("layers.clustering.geohashUtils",H,g);return H})},"esri/layers/clustering/statUtils":function(){define(["dojo/_base/lang","../support/attributeUtils"],function(D,A){function a(d){return"number"===typeof d&&!isNaN(d)&&Infinity!==d&&-Infinity!==d}var b={sum:{initialize:function(){return{count:0,sum:null}},updateCellStat:function(d,e){a(e)&&(d.count++,d.sum+=e)},updateClusterStat:function(d,
e){e.count&&(d.count+=e.count,d.sum+=e.sum)},summarize:function(d){return d.sum}},avg:{initialize:function(d){return{count:0,sum:null,avg:null,sum_cosine:null,sum_sine:null}},updateCellStat:function(d,e,f){a(e)&&(d.count++,f.isAngular?(f.isArithmetic||(e=-1*e+90),d.sum_cosine+=Math.cos(e*Math.PI/180),d.sum_sine+=Math.sin(e*Math.PI/180)):d.sum+=e)},updateClusterStat:function(d,e,f){e.count&&(d.count+=e.count,f.isAngular?(d.sum_cosine+=e.sum_cosine,d.sum_sine+=e.sum_sine):d.sum+=e.sum)},summarize:function(d,
e){if(0<d.count){var f=d.count;e.isAngular?(f=180*Math.atan2(d.sum_sine/f,d.sum_cosine/f)/Math.PI,e.isArithmetic||(f=-1*(f-90)),d.avg=0>f?f+360:f):(d.avg=d.sum/f,e.isDate&&(d.avg=Math.ceil(d.avg)))}return d.avg}},type:{initialize:function(){return{uvInfos:{}}},updateCellStat:function(d,e){if(null==e||""===e||"string"===typeof e&&""===D.trim(e))e=null;var f=d.uvInfos;null==f[e]?f[e]={count:1,value:e}:f[e].count++},updateClusterStat:function(d,e){var f=d.uvInfos,n=e.uvInfos,h;for(h in n){var k=n[h];
null==f[h]?f[h]={count:k.count,value:k.value}:f[h].count+=k.count}},summarize:function(d){d=d.uvInfos;var e,f=-Infinity;for(e in d){var n=d[e];if(n.count>f){f=n.count;var h=n.value}else n.count===f&&(h=null)}return h}}},g={isSupportedStatisticType:function(d){return b.hasOwnProperty(d)},getStatisticFunctions:function(d){return b[d]},getStatisticId:function(d,e){var f=A.getAttributeIdSource(d);f=f&&A.getAttributeId(f)||d.field;return e+"_"+f},getClusterField:function(d,e){return"cluster_"+g.getStatisticId(d,
e)},getStatisticHash:function(d,e){var f=[g.getStatisticId(d,e)];d.attributeType&&f.push(d.attributeType.toLowerCase());d.rotationType&&f.push(d.rotationType.toLowerCase());return f.join("_")}};return g})},"esri/layers/agscommon":function(){define("./ArcGISMapServiceLayer ./LayerInfo ./TimeInfo ./LayerTimeOptions ./TimeReference ./Field ./Domain ./RangeDomain ./CodedValueDomain ./InheritedDomain ./LayerSource ./LayerMapSource ./LayerDataSource ./DataSource ./TableDataSource ./QueryDataSource ./JoinDataSource ./RasterDataSource ./DynamicLayerInfo ./LayerDrawingOptions ../geometry ../utils".split(" "),
function(){return{}})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../renderers/jsonUtils ./LabelClass".split(" "),function(D,A,a,b,g,d,e,f){D=D(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(n){if(n&&(A.mixin(this,n),n.renderer&&(this.renderer=e.fromJson(n.renderer)),n.labelingInfo&&0<n.labelingInfo.length)){this.labelingInfo=[];var h;a.forEach(n.labelingInfo,function(k){h=new f(k);
this.labelingInfo.push(h)},this)}},toJson:function(){var n={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};this.labelingInfo&&0<this.labelingInfo.length&&(n.labelingInfo=[],a.forEach(this.labelingInfo,function(h){n.labelingInfo.push(h.toJson())}));return d.fixJson(n)}});A.setObject("layers.LayerDrawingOptions",D,g);return D})},"esri/geometry":function(){define("./units ./SpatialReference ./geometry/Geometry ./geometry/Point ./geometry/ScreenPoint ./geometry/Multipoint ./geometry/Polyline ./geometry/Polygon ./geometry/Extent ./geometry/Rect ./geometry/geodesicUtils ./geometry/jsonUtils ./geometry/mathUtils ./geometry/normalizeUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v){return{units:D,SpatialReference:A,Geometry:a,Point:b,ScreenPoint:g,Multipoint:d,Polyline:e,Polygon:f,Extent:n,Rect:h,geodesicUtils:k,jsonUtils:c,mathUtils:l,normalizeUtils:r,scaleUtils:m,screenUtils:q,webMercatorUtils:v}})},"esri/units":function(){define(["dojo/has","./kernel"],function(D,A){var a={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",
FEET_US:"esriFeetUS",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILES_US:"esriMilesUS",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",YARDS_US:"esriYardsUS",ACRES:"esriAcres",ACRES_US:"esriAcresUS",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_MILES_US:"esriSquareMilesUS",SQUARE_FEET:"esriSquareFeet",SQUARE_FEET_US:"esriSquareFeetUS",
SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_YARDS_US:"esriSquareYardsUS",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles",METERS_PER_SECOND:"esriMetersPerSecond",KILOMETERS_PER_HOUR:"esriKilometersPerHour",KNOTS:"esriKnots",FEET_PER_SECOND:"esriFeetPerSecond",MILES_PER_HOUR:"esriMilesPerHour",
RADIANS:"esriDURadians"};return A.Units=a})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Geometry ./Point ./Extent ../srUtils".split(" "),function(D,A,a,b,g,d,e,f,n){function h(c){return new f(parseFloat(c.x),parseFloat(c.y)-parseFloat(c.height),parseFloat(c.x)+parseFloat(c.width),parseFloat(c.y),c.spatialReference)}var k=D(d,{declaredClass:"esri.geometry.Rect",type:"rect",x:0,y:0,width:100,height:100,constructor:function(c,l,r,m,q){g.isObject(c)&&
"extent"===c.type&&(l=c.ymax,r=c.getWidth(),m=c.getHeight(),q=c.spatialReference,c=c.xmin);g.isObject(c)?(g.mixin(this,c),this.spatialReference&&(this.spatialReference=n.createSpatialReference(this.spatialReference))):(this.x=c,this.y=l,this.width=r,this.height=m,this.spatialReference=q);this.verifySR()},getCenter:function(){return new e(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(c,l){return new k(this.x+c,this.y+l,this.width,this.height,this.spatialReference)},
intersects:function(c){return c.x+c.width<=this.x||c.y+c.height<=this.y||c.y>=this.y+this.height||c.x>=this.x+this.width?!1:!0},getExtent:function(){return h(this)},update:function(c,l,r,m,q){this.x=c;this.y=l;this.width=r;this.height=m;this.spatialReference=q;this.clearCache();return this}});A.setObject("geometry.Rect",k,b);b.geometry._rectToExtent=h;b.geometry._extentToRect=function(c){return new k(c)};return k})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point ./Polyline ./Polygon".split(" "),
function(D,A,a,b,g,d,e,f){function n(B){return!!(B&&B.wkid&&v[B.wkid])}function h(B){return n(B)?v[B.wkid]:v[4326]}function k(B){var w=B.spatialReference,z=h(w),x=z.a;z=z.eSq;var y=Math.sqrt(z),u=Math.sin(B.y*q);return new d(x*B.x*q,0<z?x*(1-z)*(u/(1-z*u*u)-1/(2*y)*Math.log((1-y*u)/(1+y*u)))*.5:x*u,w)}function c(B,w,z,x,y){var u=h(y),t=u.a,C=u.b;u=u.f;var E=Math.sin(z);z=Math.cos(z);var F=(1-u)*Math.tan(B);B=1/Math.sqrt(1+F*F);var G=F*B,H=Math.atan2(F,z);F=B*E;var L=F*F,J=1-L;t=J*(t*t-C*C)/(C*C);
var S=1+t/16384*(4096+t*(-768+t*(320-175*t))),P=t/1024*(256+t*(-128+t*(74-47*t)));t=x/(C*S);for(var Q=2*Math.PI,M,N,K,X;1E-12<Math.abs(t-Q);)K=Math.cos(2*H+t),M=Math.sin(t),N=Math.cos(t),X=P*M*(K+P/4*(N*(-1+2*K*K)-P/6*K*(-3+4*M*M)*(-3+4*K*K))),Q=t,t=x/(C*S)+X;x=G*M-B*N*z;C=u/16*J*(4+u*(4-3*J));return new d((w+(Math.atan2(M*E,B*N-G*M*z)-(1-C)*u*F*(t+C*M*(K+C*N*(-1+2*K*K)))))/q,Math.atan2(G*N+B*M*z,(1-u)*Math.sqrt(L+x*x))/q,y)}function l(B,w,z,x,y){var u=h(y),t=u.a;y=u.b;var C=u.f,E=x-w,F=Math.atan((1-
C)*Math.tan(B)),G=Math.atan((1-C)*Math.tan(z)),H=Math.sin(F);F=Math.cos(F);var L=Math.sin(G);G=Math.cos(G);var J=E,S=1E3;do{var P=Math.sin(J);var Q=Math.cos(J);var M=Math.sqrt(G*P*G*P+(F*L-H*G*Q)*(F*L-H*G*Q));if(0===M)return 0;Q=H*L+F*G*Q;var N=Math.atan2(M,Q);var K=F*G*P/M;var X=1-K*K;P=Q-2*H*L/X;isNaN(P)&&(P=0);var da=C/16*X*(4+C*(4-3*X));var Y=J;J=E+(1-da)*C*K*(N+da*M*(P+da*Q*(-1+2*P*P)))}while(1E-12<Math.abs(J-Y)&&0<--S);if(0===S)return y=x-w,{azimuth:Math.atan2(Math.sin(y)*Math.cos(z),Math.cos(B)*
Math.sin(z)-Math.sin(B)*Math.cos(z)*Math.cos(y)),geodesicDistance:Math.acos(Math.sin(B)*Math.sin(z)+Math.cos(B)*Math.cos(z)*Math.cos(x-w))*u.radius};B=X*(t*t-y*y)/(y*y);w=B/1024*(256+B*(-128+B*(74-47*B)));return{azimuth:Math.atan2(G*Math.sin(J),F*L-H*G*Math.cos(J)),geodesicDistance:y*(1+B/16384*(4096+B*(-768+B*(320-175*B))))*(N-w*M*(P+w/4*(Q*(-1+2*P*P)-w/6*P*(-3+4*M*M)*(-3+4*P*P)))),reverseAzimuth:Math.atan2(F*Math.sin(J),F*L*Math.cos(J)-H*G)}}function r(B,w){if(!(B instanceof e||B instanceof f))throw Error("_geodesicDensify: the input geometry is neither polyline nor polygon");
var z=B.spatialReference,x=h(z).radius/1E4;w<x&&(w=x);x=B instanceof e;var y=[],u;D.forEach(x?B.paths:B.rings,function(t){y.push(u=[]);u.push([t[0][0],t[0][1]]);var C,E;var F=t[0][0]*q;var G=t[0][1]*q;for(C=0;C<t.length-1;C++){var H=t[C+1][0]*q;var L=t[C+1][1]*q;if(F!==H||G!==L){L=l(G,F,L,H,z);H=L.azimuth;L=L.geodesicDistance;var J=L/w;if(1<J){for(E=1;E<=J-1;E++){var S=c(G,F,H,E*w,z);u.push([S.x,S.y])}E=c(G,F,H,(L+Math.floor(J-1)*w)/2,z);u.push([E.x,E.y])}G=c(G,F,H,L,z);u.push([G.x,G.y]);F=G.x*q;
G=G.y*q}}});return x?new e({paths:y,spatialReference:z}):new f({rings:y,spatialReference:z})}var m={esriMeters:1,esriKilometers:1E3,esriYards:.9144,esriFeet:.3048,esriMiles:1609.344,esriNauticalMiles:1852,esriInches:.0254,esriDecimeters:.1,esriCentimeters:.01,esriMillimeters:.001,esriSquareMeters:1,esriSquareKilometers:1E6,esriSquareYards:.83612736,esriSquareFeet:.09290304,esriSquareMiles:2589988.110336,esriAcres:4046.8564224,esriHectares:1E4,esriAres:100,esriSquareInches:6.4516E-4,esriSquareMillimeters:1E-6,
esriSquareCentimeters:1E-4,esriSquareDecimeters:.01},q=Math.PI/180,v={4326:{a:6378137,b:6356752.31424518,f:1/298.257223563,eSq:.006694379990197414,radius:6371008.771415059},104900:{a:2439700,b:2439700,f:0,eSq:0,radius:2439700},104901:{a:6051E3,b:6051E3,f:0,eSq:0,radius:6051E3},104902:{a:6051800,b:6051800,f:0,eSq:0,radius:6051800},104903:{a:1737400,b:1737400,f:0,eSq:0,radius:1737400},104904:{a:3393400,b:3375730,f:1/192.04301075,eSq:.01038722,radius:3387510},104905:{a:3396190,b:3376200,f:1/169.89444722,
eSq:.01173737,radius:3389526.6666666665},104906:{a:6200,b:6200,f:0,eSq:0,radius:6200},104907:{a:11100,b:11100,f:0,eSq:0,radius:11100},104912:{a:2409300,b:2409300,f:0,eSq:0,radius:2409300},104915:{a:1562090,b:1562090,f:0,eSq:0,radius:1562090},104916:{a:2632345,b:2632345,f:0,eSq:0,radius:2632345},104918:{a:1821460,b:1821460,f:0,eSq:0,radius:1821460},104929:{a:249400,b:249400,f:0,eSq:0,radius:249400},104943:{a:2575E3,b:2575E3,f:0,eSq:0,radius:2575E3},104971:{a:3396190,b:3396190,f:0,eSq:0,radius:3396190},
104972:{a:47E4,b:47E4,f:0,eSq:0,radius:47E4},104973:{a:255E3,b:255E3,f:0,eSq:0,radius:255E3},104974:{a:2439400,b:2439400,f:0,eSq:0,radius:2439400}};a={isSupported:n,getSpheroidInfo:h,geodesicDensify:r,geodesicLengths:function(B,w){var z=[];D.forEach(B,function(x,y){var u=0,t=x.spatialReference;D.forEach(x.paths,function(C,E){var F=0,G;for(G=1;G<C.length;G++){var H=C[G-1][0]*q;var L=C[G][0]*q;var J=C[G-1][1]*q;var S=C[G][1]*q;if(J!==S||H!==L)H=l(J,H,S,L,t),F+=H.geodesicDistance}u+=F});u/=m[w];z.push(u)});
return z},geodesicAreas:function(B,w){var z=[],x=[];D.forEach(B,function(y,u){var t=.0015696101447650193*h(y.spatialReference).radius;z.push(r(y,t))});D.forEach(z,function(y,u){var t=0,C=y.spatialReference;D.forEach(y.rings,function(E,F){var G=k(new d(E[0][0],E[0][1],C)),H=k(new d(E[E.length-1][0],E[E.length-1][1],C)),L=H.x*G.y-G.x*H.y,J;for(J=0;J<E.length-1;J++)G=k(new d(E[J+1][0],E[J+1][1],C)),H=k(new d(E[J][0],E[J][1],C)),L+=H.x*G.y-G.x*H.y;t+=L});t/=m[w];x.push(t/-2)});return x},_unitsDictionary:m,
_toEqualAreaPoint:k,_directGeodeticSolver:c,_inverseGeodeticSolver:l};A.mixin(A.getObject("geometry",!0,b),a);return a})},"arcgisonline/map/thumbnail/buildThumbnailURLFromWebMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array esri/arcgis/utils arcgisonline/map/thumbnail/createThumbnailImage arcgisonline/map/thumbnail/createHiddenMap".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c){return function(l,r,m,q){var v=
function(B,w){m(w);B.destroy();A.byId("hiddenMapDiv").removeChild(A.byId("hiddenMap"))};c(l,r,f.hitch(this,function(B){k(B,f.hitch(this,v,B),q)}),q)}})},"esri/arcgis/utils":function(){define("require dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/on dojo/DeferredList dojo/dom-construct dojo/sniff dojox/gfx/_base ../kernel ../config ../Color ../lang ../request ../SpatialReference ../map ../urlUtils ../geometry/Point ../geometry/ScreenPoint ../geometry/Extent ../geometry/webMercatorUtils ../symbols/jsonUtils ../renderers/jsonUtils ../dijit/PopupTemplate ../dijit/Popup ../tasks/query ../tasks/GeometryService ../layers/ArcGISTiledMapServiceLayer ../layers/FeatureLayer dojo/i18n!../nls/jsapi".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E,F,G,H,L,J,S,P){function Q(ia){return!(!ia||"BingMapsAerial"!==ia.layerType&&"BingMapsAerial"!==ia.type)}function M(ia){return!(!ia||"BingMapsRoad"!==ia.layerType&&"BingMapsRoad"!==ia.type)}function N(ia){return Q(ia)||M(ia)||!(!ia||"BingMapsHybrid"!==ia.layerType&&"BingMapsHybrid"!==ia.type)}function K(ia){return!(!ia||"OpenStreetMap"!==ia.layerType&&"OpenStreetMap"!==ia.type)}function X(ia){return!!(ia&&ia.url&&(-1<"ArcGISFeatureLayer ArcGISImageServiceLayer ArcGISImageServiceVectorLayer ArcGISMapServiceLayer ArcGISStreamLayer ArcGISTiledImageServiceLayer ArcGISTiledMapServiceLayer".split(" ").indexOf(ia.layerType)||
!ia.layerType&&!ia.type))}function da(ia){return v({url:Mb.arcgisUrl+"/"+ia.itemId+"/data",content:{f:"json"},callbackParamName:"callback"},{disableIdentityLookup:!0,_preLookup:!0})}function Y(ia,Sa){var Pa={f:"json"};Sa&&(Pa.token=Sa);return v({url:ia,content:Pa,callbackParamName:"callback"},{disableIdentityLookup:!0})}function aa(ia){!ia.layerDefinition||ia.layerDefinition.drawingInfo&&ia.layerDefinition.drawingInfo.labelingInfo||(ia.showLabels=!1);ia.itemProperties.layerDefinition&&(ia.layerDefinition?
(ia.layerDefinition.drawingInfo||(ia.layerDefinition.drawingInfo=ia.itemProperties.layerDefinition.drawingInfo),q.isDefined(ia.layerDefinition.definitionExpression)||(ia.layerDefinition.definitionExpression=ia.itemProperties.layerDefinition.definitionExpression),q.isDefined(ia.layerDefinition.minScale)||(ia.layerDefinition.minScale=ia.itemProperties.layerDefinition.minScale),q.isDefined(ia.layerDefinition.maxScale)||(ia.layerDefinition.maxScale=ia.itemProperties.layerDefinition.maxScale)):ia.layerDefinition=
ia.itemProperties.layerDefinition);!ia.itemProperties.popupInfo||ia.popupInfo||ia.disablePopup||(ia.popupInfo=ia.itemProperties.popupInfo);q.isDefined(ia.itemProperties.showLabels)&&!q.isDefined(ia.showLabels)&&(ia.showLabels=ia.itemProperties.showLabels);q.isDefined(ia.itemProperties.showLegend)&&!q.isDefined(ia.showLegend)&&(ia.showLegend=ia.itemProperties.showLegend);q.isDefined(ia.itemProperties.refreshInterval)&&!q.isDefined(ia.refreshInterval)&&(ia.refreshInterval=ia.itemProperties.refreshInterval)}
function ca(ia){aa(ia);ia.itemProperties.layerDefinition&&ia.layerDefinition&&(!q.isDefined(ia.layerDefinition.maximumTrackPoints)&&q.isDefined(ia.itemProperties.layerDefinition.maximumTrackPoints)&&(ia.layerDefinition.maximumTrackPoints=ia.itemProperties.layerDefinition.maximumTrackPoints),!ia.layerDefinition.definitionGeometry&&ia.itemProperties.layerDefinition.definitionGeometry&&(ia.layerDefinition.definitionGeometry=ia.itemProperties.layerDefinition.definitionGeometry));ia.itemProperties.purgeOptions&&
!ia.purgeOptions&&(ia.purgeOptions=ia.itemProperties.purgeOptions)}function I(ia,Sa){var Pa=new g,Ka=ia.itemData,Na=[],Ua=[];a.forEach(Ka.operationalLayers,function(Oa){if(Oa.itemId&&X(Oa)){var Za=Oa.url.toLowerCase();-1<Za.indexOf("/featureserver")||-1<Za.indexOf("/mapserver/")?(Ua.push(Oa),Na.push(da(Oa))):-1<Za.indexOf("/mapserver")&&-1===Za.indexOf("/mapserver/")&&(!Oa.layers||!q.isDefined(Oa.minScale)&&!q.isDefined(Oa.maxScale))?(Ua.push(Oa),Na.push(da(Oa))):-1<Za.indexOf("/imageserver")?(Ua.push(Oa),
Na.push(da(Oa))):-1<Za.indexOf("/streamserver")&&(Ua.push(Oa),Na.push(da(Oa)))}});Ka.baseMap&&Ka.baseMap.baseMapLayers&&a.forEach(Ka.baseMap.baseMapLayers,function(Oa){Oa.itemId&&"VectorTileLayer"!==Oa.layerType&&(Ua.push(Oa),Na.push(da(Oa)))});if(0<Na.length){var Ta={};(new n(Na)).addCallback(function(Oa){a.forEach(Ua,function(Za,bb){var cb=Oa[bb][1];if(cb&&!(cb instanceof Error)&&(Ta[Za.itemId]=cb,X(Za))){var jb=Za.url.toLowerCase();(-1<jb.indexOf("/featureserver")||-1<jb.indexOf("/mapserver/"))&&
cb.layers?a.forEach(cb.layers,function($a){var kb="/featureserver/"+$a.id;(kb=jb.match(kb+"$")==kb)||(kb="/mapserver/"+$a.id,kb=jb.match(kb+"$")==kb);kb&&(Za.itemProperties=$a,aa(Za))}):-1<jb.indexOf("/streamserver")?(Za.itemProperties=cb,ca(Za)):-1<jb.indexOf("/mapserver")?(cb.layers&&!Za.layers&&(Za.layers=cb.layers),q.isDefined(cb.minScale)&&!q.isDefined(Za.minScale)&&(Za.minScale=cb.minScale),q.isDefined(cb.maxScale)&&!q.isDefined(Za.maxScale)&&(Za.maxScale=cb.maxScale),q.isDefined(cb.refreshInterval)&&
!q.isDefined(Za.refreshInterval)&&(Za.refreshInterval=cb.refreshInterval),cb.visibleLayers&&!Za.visibleLayers&&(Za.visibleLayers=cb.visibleLayers)):-1<jb.indexOf("/imageserver")&&(q.isDefined(cb.minScale)&&!q.isDefined(Za.minScale)&&(Za.minScale=cb.minScale),q.isDefined(cb.maxScale)&&!q.isDefined(Za.maxScale)&&(Za.maxScale=cb.maxScale),q.isDefined(cb.refreshInterval)&&!q.isDefined(Za.refreshInterval)&&(Za.refreshInterval=cb.refreshInterval),!cb.popupInfo||Za.popupInfo||Za.disablePopup||(Za.popupInfo=
cb.popupInfo),cb.renderingRule&&!Za.renderingRule&&(Za.renderingRule=cb.renderingRule,cb.renderingRule.functionName&&(Za.renderingRule.rasterFunction=cb.renderingRule.functionName)),cb.bandIds&&!Za.bandIds&&(Za.bandIds=cb.bandIds),cb.mosaicRule&&!Za.mosaicRule&&(Za.mosaicRule=cb.mosaicRule),cb.format&&!Za.format&&(Za.format=cb.format),q.isDefined(cb.compressionQuality)&&!q.isDefined(Za.compressionQuality)&&(Za.compressionQuality=cb.compressionQuality),!cb.layerDefinition||!cb.layerDefinition.definitionExpression||
q.isDefined(Za.layerDefinition)&&q.isDefined(Za.layerDefinition.definitionExpression)||(Za.layerDefinition=Za.layerDefinition||{},Za.layerDefinition.definitionExpression=cb.layerDefinition.definitionExpression),cb=A.getObject("layerDefinition.drawingInfo.renderer",!1,cb),null==A.getObject("layerDefinition.drawingInfo.renderer",!1,Za)&&null!=cb&&(Za.layerDefinition=Za.layerDefinition||{},Za.layerDefinition.drawingInfo=Za.layerDefinition.drawingInfo||{},Za.layerDefinition.drawingInfo.renderer=cb))}});
ia.relatedItemsData=Ta;Pa.callback(ia)})}else Pa.callback(ia);return Pa}function T(ia,Sa){var Pa=new g,Ka=ia.itemData,Na=Ka.baseMap.baseMapLayers[0];if(N(Na))if(Na.portalUrl&&l.id)delete Sa.bingMapsKey,l.id.checkSignInStatus(z.urlToObject(Mb.arcgisUrl).path).then(A.hitch(null,function(Ta,Oa,Za,bb,cb){Y(Na.portalUrl,cb.token).then(A.hitch(null,pa,Ta,Oa,Za,bb),A.hitch(null,ya,Ta,Oa,Za,bb))},ia,Sa,Ka,Pa),A.hitch(null,function(Ta,Oa,Za,bb,cb){Y(Na.portalUrl).then(A.hitch(null,pa,Ta,Oa,Za,bb),A.hitch(null,
ya,Ta,Oa,Za,bb))},ia,Sa,Ka,Pa));else if(Sa.bingMapsKey){var Ua=new ec({bingMapsKey:Sa.bingMapsKey,mapStyle:ec.MAP_STYLE_AERIAL});b.connect(Ua,"onLoad",A.hitch(this,function(){Pa.callback([ia,Sa])}));b.connect(Ua,"onError",function(Ta){delete Sa.bingMapsKey;ia.itemData=Da(Ka);Na=ia.itemData.baseMap.baseMapLayers[0];Na.errors=[];Na.errors.push({message:"The owner of the application has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Pa.callback([ia,Sa])})}else ia.itemData=
Da(Ka),Na=ia.itemData.baseMap.baseMapLayers[0],Na.errors=[],Na.errors.push({message:"The owner of the application has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."}),Pa.callback([ia,Sa]);else Pa.callback([ia,Sa]);return Pa}function ba(ia){var Sa=new g;ia=ia.itemData;var Pa=ia.baseMap&&ia.baseMap.baseMapLayers;if(ac&&!ac.supported())for(ia=0;ia<Pa.length;ia++){var Ka=Pa[ia];if(!Ka.isReference){if("VectorTileLayer"===Ka.layerType){var Na=Ka.itemId;var Ua=ia}break}}Na?
Fb(Na,!1).addBoth(function(Ta){var Oa=/^https?:\/\/basemaps(dev)?\.arcgis\.com\/arcgis\/rest\/services\/World_Basemap\/VectorTileServer/i;Ta&&Ta.item&&Oa.test(Ta.item.url)&&(Pa[Ua]={id:"FB_"+Ka.id,layerType:"ArcGISTiledMapServiceLayer",opacity:"opacity"in Ka?Ka.opacity:1,visibility:"visibility"in Ka?Ka.visibility:!0,url:"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer"});Sa.resolve()}):Sa.resolve();return Sa}function pa(ia,Sa,Pa,Ka,Na){Na.bingKey?(Sa.bingMapsKey=
Na.bingKey,Na=new ec({bingMapsKey:Sa.bingMapsKey,mapStyle:ec.MAP_STYLE_AERIAL}),b.connect(Na,"onLoad",A.hitch(this,function(){Ka.callback([ia,Sa])})),b.connect(Na,"onError",function(Ua){delete Sa.bingMapsKey;ia.itemData=Da(Pa);Ua=ia.itemData.baseMap.baseMapLayers[0];Ua.errors=[];Ua.errors.push({message:"The owner of the map has not provided a valid Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([ia,Sa])})):ya(ia,Sa,Pa,Ka)}function ya(ia,Sa,Pa,Ka){delete Sa.bingMapsKey;
ia.itemData=Da(Pa);Pa=ia.itemData.baseMap.baseMapLayers[0];Pa.errors=[];Pa.errors.push({message:"The owner of the map has not provided a Bing Key for the Bing Map it includes. Switching to Esri layers."});Ka.callback([ia,Sa])}function Da(ia){Q(ia.baseMap.baseMapLayers[0])?ia.baseMap={title:"Imagery",baseMapLayers:[{id:"World_Imagery_2017",visibility:!0,opacity:1,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]}:M(ia.baseMap.baseMapLayers[0])?ia.baseMap={title:"Streets",
baseMapLayers:[{id:"World_Street_Map_8421",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]}:ia.baseMap={title:"Imagery with Labels",baseMapLayers:[{id:"World_Imagery_6611",opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{id:"World_Boundaries_and_Places_1145",isReference:!0,opacity:1,visibility:!0,url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer"}]};
return ia}function Ha(ia,Sa,Pa,Ka){var Na=ia.dynamicLayerInfos||ia.layerInfos,Ua=Sa.layers;if(Ua&&Na)if(Ka.usePopupManager){var Ta;a.forEach(Na,function(kb){var mb=kb.id;if(!kb.subLayerIds)for(kb=0;kb<Ua.length;kb++){var ob=Ua[kb];if(ob.id===mb&&ob.popupInfo&&!ob.disablePopup){Ta||(Ta={});Ta[mb]={infoTemplate:new Pa(ob.popupInfo),layerUrl:ob.layerUrl};break}}});Ta&&ia.setInfoTemplates(Ta)}else{var Oa=[],Za=[],bb=[],cb=[],jb=[],$a=[];a.forEach(Na,function(kb){var mb=kb.id;if(!kb.subLayerIds&&-1!==
a.indexOf(ia.visibleLayers,mb))for(kb=0;kb<Ua.length;kb++){var ob=Ua[kb];if(ob.id===mb){Za.push(mb);Oa.push(ob.popupInfo);bb.push(ob.layerUrl||"");ob.layerDefinition&&ob.layerDefinition.definitionExpression?cb.push(ob.layerDefinition.definitionExpression):cb.push("");jb.push(q.isDefined(ob.minScale)?ob.minScale:null);$a.push(q.isDefined(ob.maxScale)?ob.maxScale:null);break}}});Oa.length&&(ia.__popups=Oa,ia.__popupIds=Za,ia.__popupUrls=bb,ia.__popupWhereClauses=cb,ia.__popupMinScales=jb,ia.__popupMaxScales=
$a,ia.__resourceInfo=Sa.resourceInfo)}}function ta(ia){if(!ia)return!1;var Sa=(new e(Mb.arcgisUrl)).authority;return-1!==ia.indexOf(".arcgis.com/")||-1!==ia.indexOf(Sa)}function xa(ia){return ia?-1!==ia.indexOf("/services.arcgisonline.com/")||-1!==ia.indexOf("/server.arcgisonline.com/"):!1}function ra(ia){"https:"===location.protocol&&(ta(ia)||xa(ia))&&(ia=ia.replace("http:","https:"));return ia}function Aa(ia,Sa,Pa){var Ka=[];ia.displayLevels||(Ka=a.map(ia.resourceInfo.tileInfo.lods,function(Ta){return Ta.level}));
if(ia.exclusionAreas){var Na=A.clone(ia.exclusionAreas);Na=a.map(Na,function(Ta){Ta.geometry=new u(Ta.geometry);return Ta})}var Ua=ia.resourceInfo&&"Raster"===ia.resourceInfo.cacheType;Ua?(Ka=ia.layerDefinition&&ia.layerDefinition.drawingInfo&&ia.layerDefinition.drawingInfo.renderer,Ka=new Nc(ra(ia.url),{resourceInfo:ia.resourceInfo,opacity:ia.opacity,visible:ia.visibility,id:ia.id,minScale:ia.minScale,maxScale:ia.maxScale,refreshInterval:ia.refreshInterval,multidimensionalDefinition:ia.multidimensionalDefinition,
bandIds:ia.bandIds,renderer:Ka||null})):Ka=new J(ra(ia.url),{resourceInfo:ia.resourceInfo,opacity:ia.opacity,visible:ia.visibility,displayLevels:ia.displayLevels||Ka,id:ia.id,minScale:ia.minScale,maxScale:ia.maxScale,refreshInterval:ia.refreshInterval,exclusionAreas:Na});Pa.ignorePopups||(Ua&&ia.popupInfo&&!ia.disablePopup?Ka.setInfoTemplate(new Sa(ia.popupInfo)):Ha(Ka,ia,Sa,Pa));return Ka}function ua(ia,Sa){if(!ia||!Sa||0===Sa.length)return[];var Pa=","+Sa+",",Ka=[],Na,Ua=",";for(Na=0;Na<ia.length;Na++)if(null!==
ia[Na].subLayerIds){if(-1===Pa.indexOf(","+ia[Na].id+",")||-1<Ua.indexOf(","+ia[Na].id+","))Ua+=ia[Na].subLayerIds.toString()+","}else-1<Pa.indexOf(","+ia[Na].id+",")&&-1===Ua.indexOf(","+ia[Na].id+",")&&Ka.push(ia[Na].id);return Ka}function Ja(ia,Sa,Pa){var Ka=new hc;Ka.format="png24";ia.resourceInfo&&ia.resourceInfo.supportedImageFormatTypes&&-1<ia.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")&&(Ka.format="png32");Ka=new gc(ra(ia.url),{resourceInfo:ia.resourceInfo,opacity:ia.opacity,visible:ia.visibility,
id:ia.id,imageParameters:Ka,minScale:ia.minScale,maxScale:ia.maxScale,refreshInterval:ia.refreshInterval});var Na=ia.visibleLayers;if(!ia.visibleLayers){var Ua="";a.forEach(Ka.layerInfos,function($a){$a.defaultVisibility&&(Ua+=(0<Ua.length?",":"")+$a.id)});Na=Ua}if(ia.layers&&0<ia.layers.length){var Ta=[],Oa=[],Za,bb=[],cb,jb;a.forEach(ia.layers,function($a){var kb=$a.layerDefinition;kb&&kb.definitionExpression&&(Ta[$a.id]=kb.definitionExpression);if(kb&&kb.source){Za=null;jb=kb.source;if("mapLayer"===
jb.type){var mb=a.filter(ia.resourceInfo.layers,function(ob){return ob.id===jb.mapLayerId});mb.length&&(Za=A.mixin(mb[0],$a))}else Za=A.mixin({},$a);Za&&(Za.source=jb,delete Za.popupInfo,Za=new Ib(Za),ia.visibleLayers&&(mb="string"==typeof ia.visibleLayers?ia.visibleLayers.split(","):ia.visibleLayers,-1<a.indexOf(mb,$a.id)?Za.defaultVisibility=!0:Za.defaultVisibility=!1),Oa.push(Za))}kb&&null!=kb.transparency&&(mb=kb.drawingInfo||{},null==mb.transparency&&(mb.transparency=kb.transparency,kb.drawingInfo=
mb));kb&&kb.source&&kb.drawingInfo&&(cb=new jc(kb.drawingInfo),bb[$a.id]=cb)},this);0<Ta.length&&Ka.setLayerDefinitions(Ta);0<Oa.length?(Ka.setDynamicLayerInfos(Oa,!0),0<bb.length&&Ka.setLayerDrawingOptions(bb,!0)):(Na=ua(Ka.layerInfos,Na),Ka.setVisibleLayers(Na))}else Na=ua(Ka.layerInfos,Na),Ka.setVisibleLayers(Na);Pa.ignorePopups||Ha(Ka,ia,Sa,Pa);return Ka}function ha(ia,Sa,Pa){var Ka=new Zb;Ka.bandIds=ia.bandIds;null!=ia.format&&(Ka.format=ia.format,null!=ia.compressionQuality&&(Ka.compressionQuality=
ia.compressionQuality));if(ia.renderingRule&&ia.renderingRule.rasterFunction){var Na=new Ec(ia.renderingRule);Ka.renderingRule=Na}ia.mosaicRule&&(Na=new Ac(ia.mosaicRule),Ka.mosaicRule=Na);q.isDefined(ia.noData)&&(Ka.noData=ia.noData);q.isDefined(ia.noDataInterpretation)&&(Ka.noDataInterpretation=ia.noDataInterpretation);q.isDefined(ia.interpolation)&&(Ka.interpolation=ia.interpolation);Na=ia.layerType?"ArcGISImageServiceVectorLayer"===ia.layerType:!1;q.isDefined(ia.layerType)||(Na=ia.resourceInfo.hasMultidimensions&&
("esriImageServiceDataTypeVector-UV"===ia.resourceInfo.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===ia.resourceInfo.serviceDataType));Ka={resourceInfo:ia.resourceInfo,opacity:ia.opacity,visible:ia.visibility,id:ia.id,imageServiceParameters:Ka,minScale:ia.minScale,maxScale:ia.maxScale,refreshInterval:ia.refreshInterval};Ka=Na?new Kb(ra(ia.url),Ka):new Sb(ra(ia.url),Ka);ia.layerDefinition&&(ia.layerDefinition.drawingInfo&&ia.layerDefinition.drawingInfo.renderer&&(Na=E.fromJson(ia.layerDefinition.drawingInfo.renderer),
Ka.setRenderer(Na)),ia.layerDefinition.definitionExpression&&Ka.setDefinitionExpression(ia.layerDefinition.definitionExpression,!0));Pa.ignorePopups||!ia.popupInfo||ia.disablePopup||Ka.setInfoTemplate(new Sa(ia.popupInfo));return Ka}function ma(ia,Sa,Pa){var Ka=[102113,102100,3857],Na=Pa||new B(Sa[0].layerObject.fullExtent.spatialReference),Ua=new B(ia.resourceInfo.fullExtent.spatialReference);return Na.wkt==Ua.wkt&&(Na.wkid==Ua.wkid||q.isDefined(Na.latestWkid)&&Na.latestWkid==Ua.wkid||q.isDefined(Ua.latestWkid)&&
Na.wkid==Ua.latestWkid||q.isDefined(Na.latestWkid)&&Na.latestWkid==Ua.latestWkid)||Na.wkid&&Ua.wkid&&a.some(Ka,function(Ta){return Ta===Ua.wkid})&&a.some(Ka,function(Ta){return Ta===Na.wkid})?!0:!1}function R(ia,Sa,Pa){if(!Sa[0].layerObject.tileInfo)return!1;ia=ia.resourceInfo.tileInfo;Sa=Sa[0].layerObject.tileInfo;Pa=Pa.width>Pa.height?Pa.width:Pa.height;for(var Ka=!1,Na=!1,Ua=0;Ua<ia.lods.length;Ua++){for(var Ta=ia.lods[Ua].scale/ia.dpi,Oa=0;Oa<Sa.lods.length;Oa++){var Za=Sa.lods[Oa].scale/Sa.dpi;
if(Math.abs(Za-Ta)/Za<1/Pa)if(Ka){Na=!0;break}else Ka=!0}if(Na)break}return Na||Ka&&(1===ia.lods.length||1===Sa.lods.length)?!0:!1}function Ea(ia,Sa,Pa,Ka,Na,Ua){var Ta=Pa._clazz;if(K(ia))var Oa=new wc({id:ia.id,opacity:ia.opacity,visible:null!==ia.visibility&&void 0!==ia.visibility?ia.visibility:!0});else if(ia&&("WFS"===ia.layerType||"WFS"===ia.type)){var Za={customParameters:ia.wfsInfo.customParameters,geometryType:ia.layerDefinition.geometryType,id:ia.id,labelingInfo:ia.layerDefinition.drawingInfo.labelingInfo,
maxFeatures:ia.wfsInfo.maxFeatures,mode:ia.mode,name:ia.wfsInfo.name,showLabels:!0,swapXY:ia.wfsInfo.swapXY,title:ia.title,url:ia.url,version:ia.wfsInfo.version,visible:ia.visibility,wkid:ia.layerDefinition.spatialReference.wkid};Oa=new Vb;Oa.fromJson(Za,function(){q.isDefined(ia.opacity)&&Oa.setOpacity(ia.opacity);q.isDefined(ia.visibility)&&Oa.setVisibility(ia.visibility);(ia.minScale||ia.maxScale)&&Oa.setScaleRange(ia.minScale,ia.maxScale);Oa.renderer=E.fromJson(ia.layerDefinition.drawingInfo.renderer,
{geometryType:Za.geometryType});!Pa.ignorePopups&&ia.popupInfo&&Oa.setInfoTemplate(new Ta(ia.popupInfo));Oa.emit("fromJsonComplete")})}else if(ia&&("WMS"===ia.layerType||"WMS"===ia.type)){var bb=[],cb=[];a.forEach(ia.layers,function(mb){cb.push(new Xb({name:mb.name,title:mb.title,legendURL:mb.legendURL||mb.legendUrl,queryable:mb.queryable,showPopup:mb.showPopup}));bb.push(mb.name)},this);ia.visibleLayers&&(bb=ia.visibleLayers);Ka=new u(ia.extent[0][0],ia.extent[0][1],ia.extent[1][0],ia.extent[1][1],
new B({wkid:4326}));Ka={customLayerParameters:ia.customLayerParameters,customParameters:ia.customParameters,extent:Ka,layerInfos:cb,version:ia.version,maxWidth:ia.maxWidth,maxHeight:ia.maxHeight,featureInfoFormat:ia.featureInfoFormat,getFeatureInfoURL:ia.featureInfoUrl,getMapURL:ia.mapUrl,spatialReferences:ia.spatialReferences,title:ia.title,copyright:ia.copyright,minScale:ia.minScale||0,maxScale:ia.maxScale||0,format:ia.format};Oa=new lc(ia.url,{id:ia.id,visibleLayers:bb,format:"png",transparent:ia.firstLayer?
!1:!0,opacity:ia.opacity,visible:null!==ia.visibility?ia.visibility:!0,resourceInfo:Ka,refreshInterval:ia.refreshInterval});Oa.spatialReference.wkid=Ka.spatialReferences[0]}else if(ia&&("KML"===ia.layerType||"KML"===ia.type)){var jb=ia.url;if(l.id){var $a=l.id.findCredential(z.urlToObject(Mb.arcgisUrl).path);$a&&(Sa=Mb.arcgisUrl.substring(Mb.arcgisUrl.indexOf("//")+2,Mb.arcgisUrl.indexOf("/",Mb.arcgisUrl.indexOf("//")+3)),Na=Sa.split("."),Na=Na[Na.length-2]+"."+Na[Na.length-1],Ua=jb.indexOf(Na),-1<
Ua&&(jb="https://"+Sa+jb.substring(Ua+Na.length),jb+="?token\x3d"+$a.token))}Oa=new vc(jb,{id:ia.id,visible:null!==ia.visibility?ia.visibility:!0,outSR:Ka,refreshInterval:ia.refreshInterval});b.connect(Oa,"onLoad",function(){(ia.opacity||0===ia.opacity)&&Oa.setOpacity(ia.opacity);q.isDefined(ia.minScale)&&q.isDefined(ia.maxScale)&&Oa.setScaleRange(ia.minScale,ia.maxScale);ia.visibleFolders&&a.forEach(Oa.folders,function(mb){-1<a.indexOf(ia.visibleFolders,mb.id)?Oa.setFolderVisibility(mb,!0):Oa.setFolderVisibility(mb,
!1)},this)})}else if(!ia||"WebTiledLayer"!==ia.layerType&&"WebTiledLayer"!==ia.type)if(!ia||"GeoRSS"!==ia.layerType&&"GeoRSS"!==ia.type)if(ia&&("CSV"===ia.layerType||"CSV"===ia.type)&&ia.url)Ka={layerDefinition:ia.layerDefinition,columnDelimiter:ia.columnDelimiter,id:ia.id?ia.id:null,visible:null!==ia.visibility?ia.visibility:!0,opacity:ia.opacity,refreshInterval:ia.refreshInterval},ia.locationInfo&&(Ka.latitudeFieldName=ia.locationInfo.latitudeFieldName,Ka.longitudeFieldName=ia.locationInfo.longitudeFieldName),
!Pa.ignorePopups&&ia.popupInfo&&(Ka.infoTemplate=new Ta(ia.popupInfo)),Oa=new uc(ia.url,Ka);else if("VectorTileLayer"!==ia.layerType||!ia.styleUrl||ia.resourceInfo&&ia.resourceInfo instanceof Error)if(ia.layerDefinition&&!ia.url)Ka=d.fromJson(d.toJson(ia)),delete Ka.id,delete Ka.opacity,delete Ka.visibility,Oa=new S(Ka,{id:ia.id,opacity:ia.opacity,visible:ia.visibility,outFields:["*"],autoGeneralize:!0}),Pa.ignorePopups||!Ka.popupInfo||Ka.disablePopup||Oa.setInfoTemplate(new Ta(Ka.popupInfo)),Xa(Oa);
else if(N(ia))Pa.bingMapsKey?(Ka=ec.MAP_STYLE_AERIAL_WITH_LABELS,Q(ia)?Ka=ec.MAP_STYLE_AERIAL:M(ia)&&(Ka=ec.MAP_STYLE_ROAD),Oa=new ec({bingMapsKey:Pa.bingMapsKey,mapStyle:Ka,opacity:ia.opacity,id:ia.id}),b.connect(Oa,"onError",A.hitch(this,function(mb){mb.errors=mb.errors||[];mb.errors.push({message:"This application does not have a valid Bing Key for the Bing layer that is included in this map. [type:"+(mb?mb.layerType||mb.type:"")+"]"})},ia))):(ia.errors=ia.errors||[],ia.errors.push({message:"This application does not provide a Bing Key for the Bing layer that is included in this map. [type:"+
(ia?ia.layerType||ia.type:"")+"]"}));else if(ia.resourceInfo&&(ia.resourceInfo.mapName||""===ia.resourceInfo.mapName))Oa=!0===ia.resourceInfo.singleFusedMapCache&&(ia.baseMapLayer||ma(ia,Sa,Ka)&&R(ia,Na,Ua))?Aa(ia,Ta,Pa):Ja(ia,Ta,Pa);else if(ia.resourceInfo&&ia.resourceInfo.pixelSizeX)Oa=!0===ia.resourceInfo.singleFusedMapCache&&"ArcGISImageServiceLayer"!==ia.layerType&&(ia.baseMapLayer||"Raster"===ia.resourceInfo.cacheType||ma(ia,Sa,Ka)&&R(ia,Na,Ua))?Aa(ia,Ta,Pa):ha(ia,Ta,Pa);else if(ia.resourceInfo&&
"Feature Layer"===ia.resourceInfo.type){ia.capabilities&&(ia.resourceInfo.capabilities=ia.capabilities);var kb;!1===Pa.editable?kb=!1:Pa.privileges&&-1===a.indexOf(Pa.privileges,"features:user:edit")&&l.id&&l.id.findCredential(ia.url)&&(kb=!1);Oa=new S(ra(ia.url),{resourceInfo:ia.resourceInfo,opacity:ia.opacity,visible:ia.visibility,id:ia.id,mode:ia.mode===S.MODE_SELECTION?S.MODE_SELECTION:S.MODE_AUTO,editable:kb,outFields:["*"],autoGeneralize:!0,refreshInterval:ia.refreshInterval});Pa.ignorePopups||
!ia.popupInfo||ia.disablePopup||Oa.setInfoTemplate(new Ta(ia.popupInfo));ia.layerDefinition&&(ia.layerDefinition.drawingInfo&&ia.layerDefinition.drawingInfo.renderer&&(Ka=E.fromJson(ia.layerDefinition.drawingInfo.renderer,{geometryType:Oa.geometryType}),Ka.isMaxInclusive=!0,Oa.setRenderer(Ka)),ia.layerDefinition.drawingInfo&&ia.layerDefinition.drawingInfo.labelingInfo&&(Ka=a.map(ia.layerDefinition.drawingInfo.labelingInfo,function(mb){return new ic(mb)}),Oa.setLabelingInfo(Ka)),ia.layerDefinition.definitionExpression&&
Oa.setDefinitionExpression(ia.layerDefinition.definitionExpression),q.isDefined(ia.layerDefinition.minScale)&&Oa.setMinScale(ia.layerDefinition.minScale),q.isDefined(ia.layerDefinition.maxScale)&&Oa.setMaxScale(ia.layerDefinition.maxScale));Xa(Oa)}else ia.resourceInfo&&ia.resourceInfo.streamUrls&&(Ka={resourceInfo:ia.resourceInfo,opacity:ia.opacity,visible:ia.visibility,id:ia.id},ia.layerDefinition&&(jb=ia.layerDefinition.drawingInfo,ia.layerDefinition.definitionGeometry&&($a=$a||{},$a.geometry=ia.layerDefinition.definitionGeometry),
q.isDefined(ia.layerDefinition.definitionExpression)&&($a=$a||{},$a.where=ia.layerDefinition.definitionExpression),q.isDefined(ia.layerDefinition.maximumTrackPoints)&&(Ka.maximumTrackPoints=ia.layerDefinition.maximumTrackPoints)),$a&&(Ka.filter=$a),ia.purgeOptions&&(Ka.purgeOptions=ia.purgeOptions),Oa=new Fc(ra(ia.url),Ka),jb&&jb.renderer&&(Ka=jb.renderer,Oa.setRenderer(E.fromJson(Ka,{geometryType:ia.resourceInfo.geometryType}))),jb&&jb.labelingInfo&&(Ka=a.map(jb.labelingInfo,function(mb){return new ic(mb)}),
Oa.setLabelingInfo(Ka)),Pa.ignorePopups||!ia.popupInfo||ia.disablePopup||Oa.setInfoTemplate(new Ta(ia.popupInfo)),ia.layerDefinition&&(q.isDefined(ia.layerDefinition.minScale)&&Oa.setMinScale(ia.layerDefinition.minScale),q.isDefined(ia.layerDefinition.maxScale)&&Oa.setMaxScale(ia.layerDefinition.maxScale)),f.once(Oa,"error",function(mb){ia.errors.push({message:"Error loading stream layer. Check websocket url"})}));else Oa=new ac(ia.styleUrl,{id:ia.id,minScale:ia.minScale,maxScale:ia.maxScale,opacity:ia.opacity,
visible:ia.visibility,resourceInfo:ia.resourceInfo});else Oa=new dc(ia.url,{id:ia.id,opacity:ia.opacity,outSpatialReference:Ka,refreshInterval:ia.refreshInterval}),b.connect(Oa,"onLoad",function(){!1===ia.visibility&&Oa.hide();q.isDefined(ia.minScale)&&q.isDefined(ia.maxScale)&&Oa.setScaleRange(ia.minScale,ia.maxScale);var mb=Oa.getFeatureLayers();a.forEach(mb,function(ob){ia.pointSymbol&&"esriGeometryPoint"===ob.geometryType?(ob.renderer.symbol=C.fromJson(ia.pointSymbol),1===mb.length&&(Oa.pointSymbol=
C.fromJson(ia.pointSymbol))):ia.lineSymbol&&"esriGeometryPolyline"===ob.geometryType?(ob.renderer.symbol=C.fromJson(ia.lineSymbol),1===mb.length&&(Oa.polylineSymbol=C.fromJson(ia.lineSymbol))):ia.polygonSymbol&&"esriGeometryPolygon"===ob.geometryType&&(ob.renderer.symbol=C.fromJson(ia.polygonSymbol),1===mb.length&&(Oa.polygonSymbol=C.fromJson(ia.polygonSymbol)))})});else if(Oa=new Oc(ia.templateUrl,{id:ia.id,visible:null!==ia.visibility?ia.visibility:!0,opacity:ia.opacity,copyright:ia.copyright,fullExtent:ia.fullExtent&&
new u(ia.fullExtent),initialExtent:ia.fullExtent&&new u(ia.fullExtent),subDomains:ia.subDomains,tileInfo:ia.tileInfo?new kc(ia.tileInfo):null,refreshInterval:ia.refreshInterval,wmtsInfo:ia.wmtsInfo}),q.isDefined(ia.minScale)||q.isDefined(ia.maxScale))Oa.loaded?Oa.setScaleRange(ia.minScale,ia.maxScale):b.connect(Oa,"onLoad",function(){Oa.setScaleRange(ia.minScale,ia.maxScale)});Oa&&(Oa.arcgisProps={title:ia.title},ia.baseMapLayer&&(ia.isReference?(Oa.attr("data-reference",!0),Oa._basemapGalleryLayerType=
"reference"):Oa._basemapGalleryLayerType="basemap"),Oa instanceof S&&ia.layerDefinition&&ia.layerDefinition.featureReduction&&"cluster"===ia.layerDefinition.featureReduction.type&&(Ka=ia.layerDefinition.featureReduction,Ka.clusterSize&&(Ka.clusterSize=c.pt2px(Ka.clusterSize)),Ka.clusterRadius&&(Ka.clusterRadius=c.pt2px(Ka.clusterRadius)),Ka.popupInfo&&(Ka.infoTemplate=new F(Ka.popupInfo),delete Ka.popupInfo),Oa.setFeatureReduction(Ka)));return Oa}function Ia(ia,Sa,Pa,Ka,Na){a.forEach(ia,function(Oa){Oa.layerObject=
Ea(Oa,ia,Sa,Pa,Ka,Na)});var Ua=a.filter(ia,function(Oa){return!Oa.isReference}),Ta=a.filter(ia,function(Oa){return!!Oa.isReference});return ia=Ua.concat(Ta)}function ea(ia){var Sa=null;ia=ia[0];ia.url&&X(ia)&&ia.resourceInfo.spatialReference&&(Sa=new B,ia.resourceInfo.spatialReference.wkid&&(Sa.wkid=ia.resourceInfo.spatialReference.wkid),ia.resourceInfo.spatialReference.wkt&&(Sa.wkt=ia.resourceInfo.spatialReference.wkt));N(ia)||K(ia)?Sa=new B({wkid:102100}):ia&&("WMS"===ia.layerType||"WMS"===ia.type)&&
(Sa=new B({wkid:ia.spatialReferences[0]}));return Sa}function Ya(ia,Sa,Pa,Ka,Na,Ua,Ta,Oa){a.forEach(Sa,function(Za){if(X(Za)||Za&&"VectorTileLayer"===Za.layerType)Za.resourceInfo=ia[Za.deferredsPos][1],delete Za.deferredsPos});Ua=Ua||ea(Sa);Sa=Ia(Sa,Pa,Ua,Ta,Oa);Na.callback(Sa);return Na}function Xa(ia){!window.CanvasRenderingContext2D&&ia.renderer&&"esri.renderer.HeatmapRenderer"===ia.renderer.declaredClass&&ia.setRenderer(E.fromJson({type:"simple",symbol:{color:[77,77,77,255],size:6,angle:0,xoffset:0,
yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{color:[255,255,255,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}}}))}function Ba(ia,Sa,Pa){ia.message=ia.message?ia.message+(" [url:"+Sa+"]"):"[url:"+Sa+"]";Pa.push(ia);r.defaults.io.errorHandler(ia)}function U(ia,Sa){var Pa=ra(ia);return v({url:Pa,content:{f:"json"},callbackParamName:"callback",error:function(Ka,Na){Ba(Ka,Pa,Sa)}})}function la(ia){var Sa=Mb.arcgisUrl+"/"+ia.itemId+"/data";return v({url:Sa,content:{f:"json"},callbackParamName:"callback",
error:function(Pa,Ka){ia.errors=ia.errors||[];Ba(Pa,Sa,ia.errors)}})}function na(ia,Sa){return Gc.loadMetadata(ia).otherwise(function(Pa){Ba(Pa,ia,Sa);return Pa})}function V(ia,Sa,Pa){var Ka=new g;if(!(Pa.featureCollection&&Pa.featureCollection.layers||Pa.layers))return ia.errors=ia.errors||[],ia.errors.push({message:"Invalid Feature Collection item data. [item id: "+ia.itemId+"]"}),Ka.errback(),Ka;Pa.layers&&(Pa.featureCollection={layers:Pa.layers},delete Pa.layers,q.isDefined(Pa.showLegend)&&(Pa.featureCollection.showLegend=
Pa.showLegend,delete Pa.showLegend));fa(ia,Pa.featureCollection,Sa).then(function(Na){Pa.featureCollection=Na;ia.featureCollection&&ia.featureCollection.layers?a.forEach(Pa.featureCollection.layers,function(Ua,Ta){var Oa=ia.featureCollection.layers[Ta];Oa.popupInfo||Oa.layerDefinition?Oa.layerDefinition?(q.isDefined(Oa.layerDefinition.minScale)&&q.isDefined(Oa.layerDefinition.maxScale)&&(Oa.layerDefinition.minScale!==Ua.layerDefinition.minScale||Oa.layerDefinition.maxScale!==Ua.layerDefinition.maxScale)&&
(delete Ua.layerDefinition.minScale,delete Ua.layerDefinition.maxScale),Oa.layerDefinition.drawingInfo&&d.toJson(Oa.layerDefinition.drawingInfo)!==d.toJson(Ua.layerDefinition.drawingInfo)&&delete Ua.layerDefinition.drawingInfo,Oa.layerDefinition.showLegend!==Ua.layerDefinition.showLegend&&delete Ua.layerDefinition.showLegend,Oa.layerDefinition=A.mixin(Oa.layerDefinition,Ua.layerDefinition)):Oa.layerDefinition=Ua.layerDefinition:(Oa.popupInfo=Ua.popupInfo,Oa.layerDefinition=Ua.layerDefinition);Oa.featureSet=
Ua.featureSet;Oa.nextObjectId=Ua.nextObjectId}):(ia.featureCollection=ia.featureCollection||{},ia.featureCollection=A.mixin(ia.featureCollection,Pa.featureCollection));Ka.callback(ia)});return Ka}function fa(ia,Sa,Pa){var Ka=new g;D(["./csv"],function(Na){var Ua=[];a.forEach(Sa.layers,function(Ta){Ta.featureSet&&Ta.featureSet.features&&Ta.featureSet.features.length&&Ta.featureSet.features[0].geometry&&Ta.featureSet.features[0].geometry.spatialReference&&(Ta.deferredsPos=Ua.length,Ua.push(Na.projectFeatureCollection(Ta,
Pa,Ta.featureSet.features[0].geometry.spatialReference)))});(new n(Ua)).addCallback(function(){a.forEach(Sa.layers,function(Ta){q.isDefined(Ta.deferredsPos)&&(Ua[Ta.deferredsPos].results&&Ua[Ta.deferredsPos].results.length?Ta=Ua[Ta.deferredsPos].results[0]:(Ta.errors=Ta.errors||[],Ta.errors.push({message:"Errors projecting feature collection. ["+ia.title+" - "+Ta.layerDefinition.name+"]"})),delete Ta.deferredsPos)});Ka.callback(Sa)})});return Ka}function qa(ia,Sa,Pa,Ka,Na){var Ua=new g,Ta=new g,Oa=
[];a.forEach(ia.operationalLayers,function(bb){bb.itemId&&"Feature Collection"==bb.type&&Oa.push(la(bb).then(A.hitch(null,V,bb,Pa)))});if(0===Oa.length)va(ia,Sa,Pa,Ka,Ta,Na);else{var Za=new n(Oa);Za.addCallback(function(bb){va(ia,Sa,Pa,Ka,Ta,Na)})}Ta.then(function(bb){Oa=[];a.forEach(bb,function(jb){jb=jb.layerObject;if(jb instanceof S&&!jb.loaded&&!jb.loadError){var $a=new g;f.once(jb,"load, error",function(){$a.callback(jb)});Oa.push($a)}else jb&&"esri.layers.WFSLayer"===jb.declaredClass&&!jb.loadError&&
($a=new g,f.once(jb,"fromJsonComplete, error",function(kb){$a.callback(jb)}),Oa.push($a))});if(Oa.length){var cb=new g;Za=new n(Oa);Za.addCallback(function(){cb.callback(bb)});return cb.promise}return bb}).then(function(bb){var cb=[];a.forEach(bb,function(jb){var $a=jb.layerObject;$a&&($a instanceof S||"esri.layers.StreamLayer"===$a.declaredClass)?$a.loaded&&$a.labelingInfo&&(jb.showLabels||$a._collection?cb.push($a):$a.setShowLabels&&$a.setShowLabels(!1)):$a&&"esri.layers.WFSLayer"===$a.declaredClass&&
$a.loaded&&$a.labelingInfo&&cb.push($a)});cb.length?D(["../layers/LabelLayer"],function(jb){var $a=new jb;a.forEach(cb,function(kb){$a.addFeatureLayer(kb)});bb.push({layerObject:$a});Ua.callback(bb)}):Ua.callback(bb)});return Ua}function va(ia,Sa,Pa,Ka,Na,Ua){var Ta=[],Oa=[],Za=[];a.forEach(ia.operationalLayers,function(bb,cb){if(bb.featureCollection&&bb.featureCollection.layers){var jb=bb.featureCollection.layers.length;a.forEach(bb.featureCollection.layers,function($a,kb){var mb=!0;bb.visibleLayers&&
-1==a.indexOf(bb.visibleLayers,kb)&&(mb=!1);$a.visibility=(null!=bb.visibility?!!bb.visibility:!0)&&mb;$a.opacity=bb.opacity;$a.id=(bb.id||"operational"+cb)+"_"+kb;bb.title&&($a.title=1!==jb&&$a.layerDefinition.name&&bb.title!==$a.layerDefinition.name?bb.title+" - "+$a.layerDefinition.name:bb.title);null==$a.disablePopup&&($a.disablePopup=bb.disablePopup);Za.push($a)},this)}else Za.push(bb)});a.forEach(ia.baseMap.baseMapLayers,function(bb,cb){bb.baseMapLayer=!0;bb.id=bb.id||"base"+cb;Ta.push(bb)});
a.forEach(Za,function(bb,cb){bb.id=bb.id||"operational"+cb;Ta.push(bb)});a.forEach(Ta,function(bb){if(X(bb)||bb&&"VectorTileLayer"===bb.layerType)bb.deferredsPos=Oa.length,bb.errors=bb.errors||[],bb.url?Oa.push(U(bb.url,bb.errors)):Oa.push(na(bb.styleUrl,bb.errors))});0===Oa.length?(Pa=Pa||ea(Ta),Ta=Ia(Ta,Sa,Pa,Ka,Ua),Na.callback(Ta)):(new n(Oa)).addCallback(function(bb){Ya(bb,Ta,Sa,Oa,Na,Pa,Ka,Ua)});return Na}function Fa(ia,Sa,Pa,Ka){var Na=ia.minScale,Ua=ia.maxScale;if(10.1>=Pa.version&&Sa)for(ia=
Sa.length-1;0<=ia;ia--){if(Sa[ia].id==Ka)if(0==Na&&0<Sa[ia].minScale?Na=Sa[ia].minScale:0<Na&&0==Sa[ia].minScale?Na=Pa.minScale:0<Na&&0<Sa[ia].minScale&&(Na=Math.min(Na,Sa[ia].minScale)),Ua=Math.max(Pa.maxScale||0,Sa[ia].maxScale||0),Pa.setScaleRange(Na,Ua),-1<Sa[ia].parentLayerId)Ka=Sa[ia].parentLayerId;else break}else 10.1<Pa.version&&(a.forEach(ia.layerInfos,function(Ta){Ta.id==Ka&&(0==Na&&0<Ta.minScale?Na=Ta.minScale:0<Na&&0==Ta.minScale||0<Na&&0<Ta.minScale&&(Na=Math.min(Na,Ta.minScale)),Ua=
Math.max(Ua||0,Ta.maxScale||0))}),Pa.setScaleRange(Na,Ua))}function Ca(ia,Sa,Pa,Ka){var Na=ia.url,Ua=ia.__popupIds,Ta=ia.__popupUrls,Oa=ia.__popupWhereClauses,Za=ia.__popupMinScales,bb=ia.__popupMaxScales,cb=ia.__resourceInfo,jb=[];a.forEach(ia.__popups,function($a,kb){if($a){var mb=[];a.forEach($a.fieldInfos,function(Gb){"shape"!==Gb.fieldName.toLowerCase()&&mb.push(Gb.fieldName)});if(ia.dynamicLayerInfos&&0<ia.dynamicLayerInfos.length){var ob=a.filter(ia.dynamicLayerInfos,function(Gb){return Ua[kb]==
Gb.id})[0].source;var Ub=new S(Na+"/dynamicLayer",{parentLayer:ia,id:ia.id+"_"+Ua[kb],source:ob,outFields:mb,mode:S.MODE_SELECTION,infoTemplate:$a&&new Pa($a),drawMode:!1,visible:ia.visible,autoGeneralize:!0});var Hc=function(Gb,mc){0<Oa[Gb].length&&mc.setDefinitionExpression(Oa[Gb]);if(q.isDefined(Za[Gb])||q.isDefined(bb[Gb]))if(q.isDefined(ia.minScale)||q.isDefined(ia.maxScale)){var bc=ia.minScale,Pc=ia.maxScale;0==bc&&0<Za[Gb]?bc=Za[Gb]:0<bc&&0==Za[Gb]||0<bc&&0<Za[Gb]&&(bc=Math.min(bc,Za[Gb]));
Pc=Math.max(Pc||0,bb[Gb]||0);mc.setScaleRange(bc,Pc)}else mc.setScaleRange(Za[Gb],bb[Gb]);else Fa(ia,Sa||cb.layers,mc,Ua[Gb])};Ub.loaded?Hc(kb,Ub):b.connect(Ub,"onLoad",function(Gb){Hc(kb,Ub)})}else{var yc=null,Bc=Na+"/"+Ua[kb];if(Ta[kb].length)Bc=Ta[kb];else if(Sa)for(ob=0;ob<Sa.length;ob++)if(Sa[ob].id===Ua[kb]){yc=Sa[ob];break}Ub=new S(ra(Bc),{parentLayer:ia,id:ia.id+"_"+Ua[kb],outFields:mb,mode:S.MODE_SELECTION,infoTemplate:$a&&new Pa($a),drawMode:!1,visible:ia.visible,resourceInfo:yc,autoGeneralize:!0});
Ub.loaded?(0<Oa[kb].length&&Ub.setDefinitionExpression(Oa[kb]),Fa(ia,Sa||cb.layers,Ub,Ua[kb])):b.connect(Ub,"onLoad",function(Gb){0<Oa[kb].length&&Ub.setDefinitionExpression(Oa[kb]);Fa(ia,Sa||cb.layers,Gb,Ua[kb])})}jb.push(Ub)}});0<jb.length&&(b.connect(ia,"onVisibilityChange",A.hitch(this,function($a,kb){a.forEach($a,function(mb){kb?mb.show():mb.hide()})},jb)),b.connect(Ka,"onLayerRemove",A.hitch(this,function($a,kb,mb){$a.id===mb.id&&a.forEach(kb,function(ob){Ka.removeLayer(ob)})},ia,jb)));delete ia.__popups;
delete ia.__popupIds;delete ia.__popupUrls;delete ia.__popupWhereClauses;delete ia.__popupMinScales;delete ia.__popupMaxScales;delete ia.__resourceInfo;return jb}function La(ia){return v({url:ra(ia.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}})}function Wa(ia,Sa,Pa){var Ka=[];a.forEach(ia,function(Ua){var Ta=Ua.__popups;Ta&&1<Ta.length&&10<=Ua.version&&(Ua.__deferredsPos=Ka.length,Ka.push(La(Ua)))});var Na=[];0<Ka.length?(new n(Ka)).addCallback(function(Ua){a.forEach(ia,
function(Ta){Ta.__popups&&0<Ta.__popups.length&&(Ta.__deferredsPos||0===Ta.__deferredsPos?(Na=Na.concat(Ca(Ta,Ua[Ta.__deferredsPos][1].layers,Pa,Sa)),delete Ta.__deferredsPos):Na=Na.concat(Ca(Ta,null,Pa,Sa)))});Sa.addLayers(Na)}):(a.forEach(ia,function(Ua){Ua.__popups&&0<Ua.__popups.length&&(Na=Na.concat(Ca(Ua,null,Pa,Sa)))}),Sa.addLayers(Na))}function Va(ia){a.forEach(ia,function(Sa){var Pa=Sa.layer;Pa.toJson&&(Sa=Pa.toJson(),Sa.featureSet&&Pa.name&&-1<Pa.name.indexOf("Text")&&a.forEach(Sa.featureSet.features,
function(Ka,Na){if(Ka.attributes.TEXT){var Ua=Pa.graphics[Na];Ua.symbol.setText(Ka.attributes.TEXT);Ka.symbol.horizontalAlignment&&(Ua.symbol.align=Ka.symbol.horizontalAlignment);Ua.setSymbol(Ua.symbol);Ua.setAttributes(Ka.attributes)}},this))})}function Ma(ia){var Sa=6;a.forEach(ia,function(Pa){if(Pa=Pa.renderer)"esri.renderer.SimpleRenderer"===Pa.declaredClass?((Pa=Pa.symbol)&&Pa.xoffset&&(Sa=Math.max(Sa,Math.abs(Pa.xoffset))),Pa&&Pa.yoffset&&(Sa=Math.max(Sa,Math.abs(Pa.yoffset)))):"esri.renderer.UniqueValueRenderer"!==
Pa.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==Pa.declaredClass||a.forEach(Pa.infos,function(Ka){(Ka=Ka.symbol)&&Ka.xoffset&&(Sa=Math.max(Sa,Math.abs(Ka.xoffset)));Ka&&Ka.yoffset&&(Sa=Math.max(Sa,Math.abs(Ka.yoffset)))})});return Sa}function eb(ia){var Sa=this,Pa=Sa.infoWindow,Ka=ia.graphic;if(Sa.loaded){Pa.hide();Pa.clearFeatures();var Na=[];a.forEach(Sa.graphicsLayerIds,function($a){($a=Sa.getLayer($a))&&$a instanceof S&&$a.loaded&&$a.visible&&($a.clearSelection(),$a.infoTemplate&&!$a.suspended&&
Na.push($a))});a.forEach(Sa.layerIds,function($a){($a=Sa.getLayer($a))&&(-1!==$a.declaredClass.indexOf("ArcGISImageServiceLayer")||-1!==$a.declaredClass.indexOf("RasterXLayer"))&&$a.loaded&&$a.visible&&$a.infoTemplate&&Na.push($a)});Ka=Ka&&Ka.getInfoTemplate()?Ka:null;if(Na.length||Ka){var Ua=Ma(Na),Ta=ia.screenPoint,Oa=Sa.toMap(new y(Ta.x-Ua,Ta.y+Ua));Ua=Sa.toMap(new y(Ta.x+Ua,Ta.y-Ua));var Za=new u(Oa.x,Oa.y,Ua.x,Ua.y,Sa.spatialReference),bb=new H;bb.geometry=Za;bb.timeExtent=Sa.timeExtent;var cb=
!0;Oa=a.map(Na,function($a){$a=$a&&$a.isFeatureReductionActive&&$a.isFeatureReductionActive()?$a.getFeatureReductionLayer():$a;if(-1!==$a.declaredClass.indexOf("ArcGISImageServiceLayer")){bb.geometry=ia.mapPoint;cb=!1;var kb=$a.queryVisibleRasters(bb,{rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0});kb.addCallback(function(){return $a.getVisibleRasters()})}else if(-1!==$a.declaredClass.indexOf("RasterXLayer"))kb=$a.fetchPopupFromTiles({geometry:ia.mapPoint});else if("function"===
typeof $a.selectFeatures)kb=$a.selectFeatures(bb),kb.addCallback(function(){return $a.getSelectedFeatures()});else{kb=new g;var mb=a.filter($a.graphics,function(ob){return ob&&ob.visible&&Za.intersects(ob.geometry)});kb.resolve(mb)}return kb});Ka&&(Ua=new g,Ua.callback([Ka]),Oa.splice(0,0,Ua));if(!a.some(Oa,function($a){return-1===$a.fired})){var jb=Ka?1:0;a.forEach(Na,function($a){jb=-1!==$a.declaredClass.indexOf("ArcGISImageServiceLayer")?jb+$a.getVisibleRasters().length:-1!==$a.declaredClass.indexOf("RasterXLayer")?
jb+$a.getPopupFromTiles().length:jb+$a.getSelectedFeatures().length});if(!jb)return}Pa.setFeatures(Oa);Pa.show(ia.mapPoint,{closestFirst:cb})}}}function ib(ia,Sa){var Pa=Sa.mapOptions||{};if(!Pa.infoWindow){var Ka=new G({visibleWhenEmpty:!1},h.create("div"));Pa.infoWindow=Ka}q.isDefined(Pa.showInfoWindowOnClick)||Sa.usePopupManager||(Pa.showInfoWindowOnClick=!1);Pa=new w(ia,Pa);b.connect(Pa,"onLayersAddResult",Va);return Pa}function lb(ia,Sa,Pa,Ka,Na,Ua){if(Ka.map){var Ta=Ka.map;var Oa=Ka.clickEventHandle;
var Za=Ka.clickEventListener;var bb=Ka.errors}else{var cb=Pa.itemData;!Na.mapOptions.backgroundColor&&cb.background&&cb.background.color&&null!=cb.background.color[0]&&(Na.mapOptions.backgroundColor=m.toDojoColor(cb.background.color));Ta=ib(Ka,Na);Na.ignorePopups||Na.disableClickBehavior||Na.usePopupManager||(Oa=b.connect(Ta,"onClick",eb),Za=eb)}Ta.addLayers(ia);Na.ignorePopups||Na.usePopupManager||Wa(ia,Ta,Na._clazz);var jb=bb||[];a.forEach(Sa,function($a){$a.errors&&(jb=jb.concat($a.errors))},this);
Ta.loaded?Ua.callback({map:Ta,itemInfo:Pa,errors:jb,clickEventHandle:Oa,clickEventListener:Za}):b.connect(Ta,"onLoad",function(){Ua.callback({map:Ta,itemInfo:Pa,errors:jb,clickEventHandle:Oa,clickEventListener:Za})})}function rb(ia,Sa,Pa,Ka,Na){var Ua=[];a.forEach(Na,function(Za){A.isArray(Za.layerObject)?a.forEach(Za.layerObject,function(bb){Ua.push(bb)}):Ua.push(Za.layerObject)});if(N(Na[0]))var Ta=setInterval(function(){if(Na[0].layerObject&&Na[0].layerObject.loaded)clearInterval(Ta),sb(ia,Sa,
Pa,Ka,Na,Ua);else if(Na[0].errors){clearInterval(Ta);var Za="";Na[0].errors&&Na[0].errors.length&&(Za=" ("+Na[0].errors[0].message+")");Ka.errback(Error(P.arcgis.utils.baseLayerError+Za))}},10);else if(!Ua[0]&&Na[0].baseMapLayer){var Oa="";Na[0].errors&&Na[0].errors.length&&(Oa=" ("+Na[0].errors[0].message+")");Ka.errback(Error(P.arcgis.utils.baseLayerError+Oa))}else sb(ia,Sa,Pa,Ka,Na,Ua)}function sb(ia,Sa,Pa,Ka,Na,Ua){try{var Ta=Pa.mapOptions||{};Pa.mapOptions=Ta;Ua=a.filter(Ua,q.isDefined);if(Sa.map||
Ta.extent)lb(Ua,Na,ia,Sa,Pa,Ka);else{var Oa=Ua[0].spatialReference;if(Ta.center&&(null!=Ta.zoom||Ta.scale)&&(A.isArray(Ta.center)&&(Ta.center=new x(Ta.center)),t.canProject(Ta.center,Oa))){lb(Ua,Na,ia,Sa,Pa,Ka);return}var Za=ia.item;if(Za&&Za.extent&&Za.extent.length){var bb=new u(Za.extent[0][0],Za.extent[0][1],Za.extent[1][0],Za.extent[1][1],new B({wkid:4326}));4326===Oa.wkid?(Ta.extent=bb,lb(Ua,Na,ia,Sa,Pa,Ka)):900913===Oa.wkid||102100===Oa.wkid||102113===Oa.wkid||3857===Oa.wkid?(bb.xmin=Math.max(bb.xmin,
-180),bb.xmax=Math.min(bb.xmax,180),bb.ymin=Math.max(bb.ymin,-89.99),bb.ymax=Math.min(bb.ymax,89.99),Ta.extent=t.geographicToWebMercator(bb),lb(Ua,Na,ia,Sa,Pa,Ka)):Pa.geometryServiceURL||r.defaults.geometryService?(Pa.geometryServiceURL?new L(Pa.geometryServiceURL):r.defaults.geometryService).project([bb],Oa,function(cb){cb=cb[0];Ta.extent=Ta.extent||cb;lb(Ua,Na,ia,Sa,Pa,Ka)},function(){lb(Ua,Na,ia,Sa,Pa,Ka)}):Ka.errback(Error(P.arcgis.utils.geometryServiceError))}else lb(Ua,Na,ia,Sa,Pa,Ka)}}catch(cb){Ka.errback(cb)}}
function tb(ia){var Sa=[];a.forEach(ia.operationalLayers,function(Pa){Pa.featureCollection?Sa.push({featureCollection:Pa.featureCollection,visibility:null!=Pa.visibility?!!Pa.visibility:!0,title:Pa.title}):Pa.layerObject&&Sa.push({layer:Pa.layerObject,visibility:null!=Pa.visibility?!!Pa.visibility:!0,title:Pa.title})});return Sa}function Ab(ia){var Sa=[],Pa=ia.baseMap.baseMapLayers;ia.operationalLayers&&(Pa=Pa.concat(ia.operationalLayers));a.forEach(Pa,function(Ka){var Na={};if(Ka.featureCollection&&
(!Ka||"CSV"!==Ka.layerType&&"CSV"!==Ka.type))!0===Ka.featureCollection.showLegend&&a.forEach(Ka.featureCollection.layers,function(Oa){if(!1!==Oa.showLegend){var Za=Oa.layerObject.renderer;Na={layer:Oa.layerObject,title:Ka.title,defaultSymbol:Za&&Za.defaultSymbol&&Za.defaultLabel?!0:!1};1<Ka.featureCollection.layers.length&&(Na.title+=" - "+Oa.layerDefinition.name);Sa.push(Na)}});else if(Ka.baseMapLayer&&!0===Ka.showLegend&&Ka.layerObject||!Ka.baseMapLayer&&!1!==Ka.showLegend&&Ka.layerObject&&!(Ka.layerObject instanceof
S&&Ka.layerObject.mode===S.MODE_SELECTION)){var Ua=Ka.layerObject.renderer,Ta=Ka.layerObject.declaredClass;Ua=!Ua||Ua&&Ua.defaultSymbol&&Ua.defaultLabel?!0:!1;if(10.1>Ka.layerObject.version&&("esri.layers.ArcGISDynamicMapServiceLayer"===Ta||"esri.layers.ArcGISTiledMapServiceLayer"===Ta)||"esri.layers.ArcGISImageServiceLayer"===Ta)Ua=!0;Na={layer:Ka.layerObject,title:Ka.title,defaultSymbol:Ua};Ka.layers&&(Ta=a.map(a.filter(Ka.layers,function(Oa){return!1===Oa.showLegend}),function(Oa){return Oa.id}),
Ta.length&&(Na.hideLayers=Ta));Sa.push(Na)}});return Sa}function Cb(ia,Sa){function Pa(bb,cb){a.forEach(bb,function(jb,$a){switch(jb){case "../layers/ArcGISDynamicMapServiceLayer":gc=cb[$a];break;case "../layers/ArcGISImageServiceLayer":Sb=cb[$a];break;case "../layers/ArcGISImageServiceVectorLayer":Kb=cb[$a];break;case "../layers/CSVLayer":uc=cb[$a];break;case "../layers/DynamicLayerInfo":Ib=cb[$a];break;case "../layers/GeoRSSLayer":dc=cb[$a];break;case "../layers/ImageParameters":hc=cb[$a];break;
case "../layers/ImageServiceParameters":Zb=cb[$a];break;case "../layers/KMLLayer":vc=cb[$a];break;case "../layers/LabelClass":ic=cb[$a];break;case "../layers/LayerDrawingOptions":jc=cb[$a];break;case "../layers/MosaicRule":Ac=cb[$a];break;case "../layers/OpenStreetMapLayer":wc=cb[$a];break;case "../layers/RasterFunction":Ec=cb[$a];break;case "../layers/RasterXLayer":Nc=cb[$a];break;case "../layers/StreamLayer":Fc=cb[$a];break;case "../layers/TileInfo":kc=cb[$a];break;case "../layers/VectorTileLayer":ac=
cb[$a];break;case "../layers/vectorTiles/layers/support/vectorTileLayerLoader":Gc=cb[$a];break;case "../virtualearth/VETiledLayer":ec=cb[$a];break;case "../layers/WebTiledLayer":Oc=cb[$a];break;case "../layers/WFSLayer":Vb=cb[$a];break;case "../layers/WMSLayer":lc=cb[$a];break;case "../layers/WMSLayerInfo":Xb=cb[$a]}})}var Ka=new g,Na=ia.itemData,Ua=[];Na.baseMap&&Na.baseMap.baseMapLayers&&(Ua=Ua.concat(Na.baseMap.baseMapLayers));Na.operationalLayers&&(Ua=Ua.concat(Na.operationalLayers));Na=a.map(Ua,
function(bb){return bb&&bb.layerType});var Ta=[],Oa=[];Ua=!1;for(var Za=0;Za<Na.length;Za++){switch(Na[Za]){case "ArcGISFeatureLayer":-1===a.indexOf(Ta,"../layers/LabelClass")&&Ta.push("../layers/LabelClass");break;case "ArcGISImageServiceLayer":case "ArcGISTiledImageServiceLayer":-1===a.indexOf(Ta,"../layers/ArcGISImageServiceLayer")&&(Ta.push("../layers/ArcGISImageServiceLayer"),Oa.push("../layers/ImageServiceParameters"),Oa.push("../layers/MosaicRule"),Oa.push("../layers/RasterFunction"),Ta.push("../layers/RasterXLayer"));
break;case "ArcGISImageServiceVectorLayer":-1===a.indexOf(Ta,"../layers/ArcGISImageServiceVectorLayer")&&(Ta.push("../layers/ArcGISImageServiceVectorLayer"),Oa.push("../layers/ImageServiceParameters"),Oa.push("../layers/MosaicRule"),Oa.push("../layers/RasterFunction"));break;case "ArcGISMapServiceLayer":case "ArcGISTiledMapServiceLayer":-1===a.indexOf(Ta,"../layers/ArcGISDynamicMapServiceLayer")&&(Ta.push("../layers/ArcGISDynamicMapServiceLayer"),Oa.push("../layers/DynamicLayerInfo"),Oa.push("../layers/ImageParameters"),
Oa.push("../layers/LayerDrawingOptions"));break;case "ArcGISStreamLayer":-1===a.indexOf(Ta,"../layers/StreamLayer")&&Ta.push("../layers/StreamLayer");-1===a.indexOf(Ta,"../layers/LabelClass")&&Ta.push("../layers/LabelClass");break;case "BingMapsAerial":case "BingMapsHybrid":case "BingMapsRoad":-1===a.indexOf(Ta,"../virtualearth/VETiledLayer")&&Ta.push("../virtualearth/VETiledLayer");break;case "CSV":-1===a.indexOf(Ta,"../layers/CSVLayer")&&(Ta.push("../layers/CSVLayer"),Oa.push("./csv"));break;case "GeoRSS":-1===
a.indexOf(Ta,"../layers/GeoRSSLayer")&&Ta.push("../layers/GeoRSSLayer");break;case "KML":-1===a.indexOf(Ta,"../layers/KMLLayer")&&Ta.push("../layers/KMLLayer");break;case "OpenStreetMap":-1===a.indexOf(Ta,"../layers/OpenStreetMapLayer")&&Ta.push("../layers/OpenStreetMapLayer");break;case "VectorTileLayer":-1===a.indexOf(Ta,"../layers/VectorTileLayer")&&Ta.push("../layers/VectorTileLayer");-1===a.indexOf(Oa,"../layers/vectorTiles/layers/support/vectorTileLayerLoader")&&Oa.push("../layers/vectorTiles/layers/support/vectorTileLayerLoader");
break;case "WebTiledLayer":-1===a.indexOf(Ta,"../layers/WebTiledLayer")&&(Ta.push("../layers/WebTiledLayer"),Oa.push("../layers/TileInfo"));break;case "WFS":-1===a.indexOf(Ta,"../layers/WFSLayer")&&Ta.push("../layers/WFSLayer");break;case "WMS":-1===a.indexOf(Ta,"../layers/WMSLayer")&&(Ta.push("../layers/WMSLayer"),Oa.push("../layers/WMSLayerInfo"));break;default:Ua=!0}if(Ua)break}Ua&&(Ta=Yb,Oa=xc);Ta.length?D(Ta,function(){Pa(Ta,arguments);Oa.length?D(Oa,function(){Pa(Oa,arguments);Ka.resolve()}):
Ka.resolve()}):Ka.resolve();return Ka}function nb(ia){ia=ia.itemData;var Sa=function(Ka,Na){"GroupLayer"===Ka.layerType?a.forEach(Ka.layers,function(Ua){Ua.visibility=!1===Ka.visibility?!1:Ua.visibility;Ua.opacity=q.isDefined(Ka.opacity)?q.isDefined(Ua.opacity)?Ua.opacity*Ka.opacity:Ka.opacity:Ua.opacity;Sa(Ua,Na)}):Na.push(Ka)},Pa=[];a.forEach(ia.operationalLayers,function(Ka){Sa(Ka,Pa)});ia.operationalLayers=Pa}function yb(ia,Sa,Pa,Ka){nb(Ka);var Na=Ka.itemData;Na.baseMap&&Na.baseMap.baseMapLayers&&
Na.baseMap.baseMapLayers.length&&(Na.baseMap.baseMapLayers[0].firstLayer=!0);var Ua=Sa.layerMixins,Ta=Ua&&Ua.length;if(Ta){var Oa=function(Za){for(var bb=0;bb<Ta;bb++){var cb=Ua[bb];if(cb.mixin)if(cb.hasOwnProperty("id")){if(Za.id===cb.id){A.mixin(Za,cb.mixin);break}}else if(Za.url===cb.url){A.mixin(Za,cb.mixin);break}}};a.forEach(Na.baseMap&&Na.baseMap.baseMapLayers,Oa);a.forEach(Na.operationalLayers,Oa)}Cb(Ka,Sa).then(function(){return ba(Ka,Sa)}).then(function(){return T(Ka,Sa)}).then(function(Za){var bb=
Za[0],cb=Za[1];if(bb.itemData.operationalLayers&&0!==bb.itemData.operationalLayers.length){var jb=new g,$a=bb.itemData.baseMap.baseMapLayers.slice(),kb=a.filter(bb.itemData.baseMap.baseMapLayers,function(mb){return!mb.isReference});Za={item:bb.item,itemData:{baseMap:{baseMapLayers:kb},background:A.clone(bb.itemData.background)}};bb.itemData.baseMap.baseMapLayers=a.filter(bb.itemData.baseMap.baseMapLayers,function(mb){return mb.isReference});I(Za,cb).addCallback(function(mb){qa(mb.itemData,cb).addCallback(A.hitch(null,
rb,mb,ia,cb,jb))});jb.then(function(mb){I(bb,cb).addCallback(function(ob){qa(ob.itemData,cb,mb.map.spatialReference,kb,mb.map).addCallback(function(Ub){ob.itemData.baseMap.baseMapLayers=$a;rb(ob,mb,cb,Pa,Ub)})})},A.hitch(Pa,Pa.errback))}else I(bb,cb).addCallback(function(mb){qa(mb.itemData,cb).addCallback(A.hitch(null,rb,mb,ia,cb,Pa))})})}function Fb(ia,Sa){"undefined"===typeof Sa&&(Sa=!0);Mb._arcgisUrl&&0<Mb._arcgisUrl.length&&(Mb.arcgisUrl=Mb._arcgisUrl);var Pa={},Ka=new g;v({url:Mb.arcgisUrl+"/"+
ia,content:{f:"json"},callbackParamName:"callback",load:function(Na){Pa.item=Na;Sa?v({url:Mb.arcgisUrl+"/"+ia+"/data",content:{f:"json"},callbackParamName:"callback",load:function(Ua){Pa.itemData=Ua;Ka.callback(Pa)},error:function(Ua){Ka.errback(Ua)}}):Ka.callback(Pa)},error:function(Na){Ka.errback(Na)}});return Ka}var gc,Sb,Kb,uc,Ib,dc,hc,Zb,vc,ic,jc,Ac,wc,Ec,Nc,Fc,kc,ac,Gc,ec,Oc,Vb,lc,Xb,Yb="../layers/ArcGISDynamicMapServiceLayer ../layers/ArcGISImageServiceLayer ../layers/ArcGISImageServiceVectorLayer ../layers/CSVLayer ../layers/GeoRSSLayer ../layers/KMLLayer ../layers/LabelClass ../layers/OpenStreetMapLayer ../layers/RasterXLayer ../layers/StreamLayer ../layers/VectorTileLayer ../virtualearth/VETiledLayer ../layers/WebTiledLayer ../layers/WFSLayer ../layers/WMSLayer".split(" "),
xc="./csv ../layers/DynamicLayerInfo ../layers/ImageParameters ../layers/ImageServiceParameters ../layers/LayerDrawingOptions ../layers/MosaicRule ../layers/RasterFunction ../layers/TileInfo ../layers/vectorTiles/layers/support/vectorTileLayerLoader ../layers/WMSLayerInfo".split(" ");var Mb={arcgisUrl:z.getProtocolForWebResource()+"//www.arcgis.com/sharing/rest/content/items",getItem:Fb,createMap:function(ia,Sa,Pa){var Ka=new g;Pa=Pa||{};var Na=Pa.infoTemplateClass;Pa._clazz=Na&&(A.isObject(Na)?Na:
A.getObject(Na))||F;A.isString(ia)?Fb(ia).addCallback(A.hitch(null,yb,Sa,Pa,Ka)).addErrback(A.hitch(Ka,Ka.errback)):yb(Sa,Pa,Ka,ia);Ka.addCallback(function(Ua){var Ta=Ua.map;Ta&&(Ta.tables=A.getObject("itemInfo.itemData.tables",!1,Ua)||[])});return Ka},getLayerList:function(ia){return ia&&ia.itemInfo&&ia.itemInfo.itemData?tb(ia.itemInfo.itemData):[]},getLegendLayers:function(ia){return ia&&ia.itemInfo&&ia.itemInfo.itemData?Ab(ia.itemInfo.itemData):[]},_arcgisUrl:null,_getItemProps:I,_getItemData:da,
_getBingKey:Y,_portalUrlResponse:pa,_portalUrlFailure:ya,_processFSItemProperties:aa,_processSSItemProperties:ca,_getLayers:qa,_preBuildLayerObjects:Ya,_buildLayerObjects:Ia,_preCreateMap:rb,_getMapSR:ea,_createMap:lb,_addSelectionLayers:Wa,_createSelectionFeatureLayers:Ca,_getServiceInfo:U,_getFeatureCollectionItem:la,_mergeFeatureCollectionItem:V,_projectFeatureCollection:fa,_getLayersInfo:La,_initLayer:Ea,_loadAsCached:Aa,_loadAsDynamic:Ja,_processPopups:Ha,_onLayersAddResult:Va,_sameSpatialReferenceAsBasemap:ma,
_sameTilingSchemeAsBasemap:R,_showPopup:eb,_calculateClickTolerance:Ma,_getVisibleFeatureLayers:ua,_updateLayerScaleInfo:Fa,_checkUrl:ra,_isHostedService:ta,_isAgolService:xa,_getLegendLayers:Ab};A.setObject("arcgis.utils",Mb,l);return Mb})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/a11yclick dijit/registry ./kernel ./config ./sniff ./lang ./_coremap ./MapNavigationManager dojo/i18n!./nls/jsapi".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t){var C={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},E={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},F=b.connect,G=b.disconnect,H=l.create,L=m.set,J=g.hitch,S=r.getMarginBox,P=A.deprecated,Q=g.mixin,M=0;A=a(y,{declaredClass:"esri.Map",constructor:function(N,K){K=K||{};Q(this,{_slider:null,_navDiv:null,_mapParams:Q({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",
sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},K)});Q(this,{isMapNavigation:null!=K.isMapNavigation?K.isMapNavigation:!0,isDoubleClickZoom:null!=K.isDoubleClickZoom?K.isDoubleClickZoom:!0,isClickRecenter:null!=K.isClickRecenter?K.isClickRecenter:!0,isPan:null!=K.isPan?K.isPan:!0,isRubberBandZoom:null!=K.isRubberBandZoom?K.isRubberBandZoom:!0,isPinchZoom:null!=K.isPinchZoom?K.isPinchZoom:!0,isKeyboardNavigation:null!=K.isKeyboardNavigation?K.isKeyboardNavigation:!0,isScrollWheel:null!=
K.isScrollWheel?K.isScrollWheel:!0,isShiftDoubleClickZoom:!1,isScrollWheelZoom:!1,isPanArrows:!1,isZoomSlider:!1});g.isFunction(B._css)&&(B._css=B._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var X=z("esri-transforms")&&z("esri-transitions");this.navigationMode=this._mapParams.navigationMode||X&&"css-transforms"||"classic";"css-transforms"!==this.navigationMode||X||(this.navigationMode="classic");this.fadeOnZoom=x.isDefined(this._mapParams.fadeOnZoom)?
this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode;"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1);this.setMapCursor("default");this.smartNavigation=K&&K.smartNavigation;if(!(x.isDefined(this.smartNavigation)||!z("mac")||z("esri-touch")||z("esri-pointer")||3.5>=z("ff"))){var da=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|_)([\d]+)\D/i);da&&x.isDefined(da[1])&&x.isDefined(da[3])&&(X=parseInt(da[1],10),da=parseInt(da[3],10),this.smartNavigation=10<X||10===X&&6<=
da)}this.showAttribution=x.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0;this._onLoadHandler_connect=F(this,"onLoad",this,"_onLoadInitNavsHandler");var Y=H("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(X=g.getObject("esri.dijit.Attribution",!1))this._initAttribution(X,Y);else{var aa=M++,ca=this;this._rids&&this._rids.push(aa);D(["./dijit/Attribution"],function(I){var T=ca._rids?d.indexOf(ca._rids,aa):
-1;-1!==T&&(ca._rids.splice(T,1),ca._initAttribution(I,Y))})}this._mapParams.logo&&(X={},6===z("ie")&&(X.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+D.toUrl("./images/map/logo-med.png")+"')"),this._ogol=H("div",{style:X,tabIndex:"0",title:"Esri"},Y),this._setLogoSize(),this._onMapResizeLogo_connect=F(this,"onResize",this,"_setLogoSize"),this._ogol_connect=F(this._ogol,q,this,"_openLogoLink"));this.navigationManager=new u(this);K&&
K.basemap&&(this._onLoadFix=!0,this.setBasemap(K.basemap),this._onLoadFix=!1);if(this.autoResize=this._mapParams.autoResize)X=this._getEnclosingResizableWidget(this.container)||window,da=this.resize,this._rszSignal=f.pausable(X,"resize",da),this._oriSignal=f.pausable(window,"orientationchange",da),n.after(X,"resize",da,!0),this._startResizeTimer()},_startResizeTimer:function(){clearTimeout(this._persistentTimer);this._persistentTimer=setTimeout(this._timedResize,2*this.resizeDelay)},_getEnclosingResizableWidget:function(N){var K=
v.getEnclosingWidget(N);return K?K.resize?K:this._getEnclosingResizableWidget(N.parentNode):K},_setLogoSize:function(){this._ogol&&(25E4>this.root.clientWidth*this.root.clientHeight?(c.remove(this._ogol,"logo-med"),c.add(this._ogol,"logo-sm")):(c.remove(this._ogol,"logo-sm"),c.add(this._ogol,"logo-med")))},_initAttribution:function(N,K){var X=H("span",{"class":"esriAttribution"},K,"first");L(X,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px");this._connects.push(F(X,q,function(){c.contains(this,
"esriAttributionOpen")?c.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&c.add(this,"esriAttributionOpen")}));this.attribution=new N({map:this},X)},_cleanUp:function(){this.disableMapNavigation();this.navigationManager.destroy();var N=this._slider;N&&N.destroy&&!N._destroyed&&N.destroy();N=this._navDiv;var K=this.attribution;N&&l.destroy(N);K&&K.destroy();this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal);d.forEach(this._connects,G);
clearInterval(this._persistentTimer);this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=this._persistentTimer=null;this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(N){var K=this.getLevel();return!this.__tileInfo||!(K===this.getMinZoom()&&0>N||K===this.getMaxZoom()&&0<N)},_onLoadInitNavsHandler:function(){this._evalMapNavigation();this._createNav();
if("small"===this._mapParams.sliderStyle||!this._createSlider)this._createSimpleSlider();else if(this._mapParams.slider){var N=-1!==this._getSliderClass(!0).indexOf("Horizontal");N=[N?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",N?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",N?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(d.some(N,function(da){return!g.getObject(da,!1)})){N=d.map(N,function(da){return da.replace(/\./g,"/")});var K=M++,X=this;this._rids&&
this._rids.push(K);D(N,function(){var da=X._rids?d.indexOf(X._rids,K):-1;-1!==da&&(X._rids.splice(da,1),X._createSlider.apply(X,arguments))})}else N=d.map(N,function(da){return g.getObject(da,!1)}),this._createSlider.apply(this,N)}G(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var N,K=c.add,X=this.id;this._navDiv=H("div",{id:X+"_navdiv"},this.root);K(this._navDiv,"navDiv");var da=this.width/2,Y=this.height/2;for(N in C){var aa=C[N];var ca=H("div",{id:X+"_pan_"+N},this._navDiv);
K(ca,"fixedPan "+aa);if("up"===N||"down"===N){var I=parseInt(S(ca).w,10)/2;L(ca,{left:da-I+"px",zIndex:30})}else I=parseInt(S(ca).h,10)/2,L(ca,{top:Y-I+"px",zIndex:30});this._connects.push(F(ca,"onclick",J(this,this[aa])))}this._onMapResizeNavHandler_connect=F(this,"onResize",this,"_onMapResizeNavHandler");for(N in E)aa=E[N],ca=H("div",{id:X+"_pan_"+N,style:{zIndex:30}},this._navDiv),K(ca,"fixedPan "+aa),this._connects.push(F(ca,"onclick",J(this,this[aa])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(N,
K,X){N=this.id;K/=2;X/=2;var da=h.byId,Y;for(Y in C){var aa=da(N+"_pan_"+Y);if("up"===Y||"down"===Y){var ca=parseInt(S(aa).w,10)/2;L(aa,"left",K-ca+"px")}else ca=parseInt(S(aa).h,10)/2,L(aa,"top",X-ca+"px")}},_createSimpleSlider:function(){if(this._mapParams.slider){var N=this._slider=H("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),K=H("div",{"class":"esriSimpleSliderIncrementButton",tabIndex:"0",role:"button"},N),X=H("div",{"class":"esriSimpleSliderDecrementButton",
tabIndex:"0",role:"button"},N);this._addZoomButtonTooltips(K,X);this._incButton=K;this._decButton=X;this._simpleSliderZoomHandler(null,null,null,this.getLevel());var da=t.widgets.zoomSlider;this._addZoomButtonIcon(K,"+",da.zoomIn);this._addZoomButtonIcon(X,"\x26minus;",da.zoomOut);8>z("ie")&&c.add(X,"dj_ie67Fix");this._connects.push(F(K,q,this,this._simpleSliderChangeHandler));this._connects.push(F(X,q,this,this._simpleSliderChangeHandler));(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(F(this,
"onZoomEnd",this,this._simpleSliderZoomHandler));10>z("ie")&&h.setSelectable(N,!1);this.root.appendChild(N);this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(N){e.stop(N);N=-1!==N.currentTarget.className.indexOf("IncrementButton")?!0:!1;this._extentUtil({numLevels:N?1:-1})},_simpleSliderZoomHandler:function(N,K,X,da){var Y;N=this._incButton;K=this._decButton;-1<da&&da===this.getMaxZoom()?Y=N:-1<da&&da===this.getMinZoom()&&(Y=K);Y?(c.add(Y,"esriSimpleSliderDisabledButton"),c.remove(Y===N?
K:N,"esriSimpleSliderDisabledButton")):(c.remove(N,"esriSimpleSliderDisabledButton"),c.remove(K,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(N){N=N?"Large":"Simple";var K=this._mapParams.sliderOrientation,X=this._mapParams.sliderPosition||"";K=K&&"horizontal"===K.toLowerCase()?"esri"+N+"SliderHorizontal":"esri"+N+"SliderVertical";if(X)switch(X.toLowerCase()){case "top-left":X="esri"+N+"SliderTL";break;case "top-right":X="esri"+N+"SliderTR";break;case "bottom-left":X="esri"+N+"SliderBL";
break;case "bottom-right":X="esri"+N+"SliderBR"}return"esri"+N+"Slider "+K+" "+X},_addZoomButtonIcon:function(N,K,X){l.create("span",{"aria-hidden":"true",role:"presentation",innerHTML:K},N);l.create("span",{"class":"esriIconFallbackText",innerHTML:X},N)},_addZoomButtonTooltips:function(N,K){var X=t.widgets.zoomSlider;k.set(N,"title",X.zoomIn);k.set(K,"title",X.zoomOut)},_createSlider:function(N,K,X){if(this._mapParams.slider){var da=H("div",{id:this.id+"_zoom_slider"},this.root),Y=w.defaults.map,
aa=this._getSliderClass(!0),ca=-1!==aa.indexOf("Horizontal"),I=this.getNumLevels();if(0<I){var T,ba,pa=this._mapParams.sliderLabels,ya=!!pa,Da=!1!==pa;if(Da){var Ha=ca?"bottomDecoration":"rightDecoration";if(!pa)for(pa=[],Y=0;Y<I;Y++)pa[Y]="";d.forEach([{"class":"esriLargeSliderTicks",container:Ha,count:I,dijitClass:K},{"class":ya&&"esriLargeSliderLabels",container:Ha,count:I,labels:pa,dijitClass:X}],function(xa){var ra=H("div"),Aa=xa.dijitClass;delete xa.dijitClass;da.appendChild(ra);Aa===K?T=new Aa(xa,
ra):ba=new Aa(xa,ra)})}N=this._slider=new N({id:da.id,"class":aa,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:I,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},da);N.startup();Da&&(T.startup(),ba.startup());this._slider_connect=F(N,"onChange",this,"_onSliderChangeHandler");this._connects.push(F(this,"onExtentChange",this,"_onExtentChangeSliderHandler"));this._connects.push(F(N._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{N=this._slider=
new N({id:da.id,"class":aa,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:Y.sliderChangeImmediate,style:"height:50px; z-index:30;"},da);X=N.domNode.firstChild.childNodes;for(Y=1;3>=Y;Y++)L(X[Y],"visibility","hidden");N.startup();this._slider_connect=F(N,"onChange",this,"_onDynSliderChangeHandler");this._connects.push(F(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}Y=N.incrementButton;X=N.decrementButton;ca?this._addZoomButtonTooltips(Y,X):this._addZoomButtonTooltips(X,
Y);Y.style.outline="none";X.style.outline="none";N.sliderHandle.style.outline="none";N._onKeyPress=function(){};if(ca=N._movable){var ta=ca.onMouseDown;ca.onMouseDown=function(xa){9>z("ie")&&1!==xa.button||ta.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect);this._slider_connect=F(this._slider,"onChange",this,"_onSliderChangeDragHandler");this._slidermovestop_connect=F(this._slider._movable,"onMoveStop",this,
"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(N){this._extentUtil({targetLevel:N})},_onSliderMoveEndHandler:function(){G(this._slider_connect);G(this._slidermovestop_connect)},_onSliderChangeHandler:function(N){this.setLevel(N)},_updateSliderValue:function(N,K){G(this._slider_connect);var X=this._slider,da=X._onChangeActive;X._onChangeActive=!1;X.set("value",N);X._onChangeActive=da;this._slider_connect=F(X,"onChange",this,K)},_onExtentChangeSliderHandler:function(N,K,X,da){G(this._slidermovestop_connect);
this._updateSliderValue(da.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(N){this._extentUtil({numLevels:0<N?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(N){window.open(w.defaults.map.logoLink,"_blank");e.stop(N)},enableMapNavigation:function(){this.isMapNavigation||(this.isMapNavigation=!0,this._evalMapNavigation())},disableMapNavigation:function(){this.isMapNavigation&&(this.isMapNavigation=
!1,this._evalMapNavigation())},_evalMapNavigation:function(){this.isMapNavigation?this.navigationManager.enableNavigation():this.navigationManager.disableNavigation()},_evalNavigationFeature:function(N){if(this.isMapNavigation&&this["is"+N])this.navigationManager["enable"+N]();else this.navigationManager["disable"+N]()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.isDoubleClickZoom=!0,this._evalNavigationFeature("DoubleClickZoom"))},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&
(this.isDoubleClickZoom=!1,this._evalNavigationFeature("DoubleClickZoom"))},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(P(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(P(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",
null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.isClickRecenter=!0,this._evalNavigationFeature("ClickRecenter"))},disableClickRecenter:function(){this.isClickRecenter&&(this.isClickRecenter=!1,this._evalNavigationFeature("ClickRecenter"))},enablePan:function(){this.isPan||(this.isPan=!0,this._evalNavigationFeature("Pan"))},disablePan:function(){this.isPan&&(this.isPan=!1,this._evalNavigationFeature("Pan"))},
enableRubberBandZoom:function(){this.isRubberBandZoom||(this.isRubberBandZoom=!0,this._evalNavigationFeature("RubberBandZoom"))},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.isRubberBandZoom=!1,this._evalNavigationFeature("RubberBandZoom"))},enablePinchZoom:function(){this.isPinchZoom||(this.isPinchZoom=!0,this._evalNavigationFeature("PinchZoom"))},disablePinchZoom:function(){this.isPinchZoom&&(this.isPinchZoom=!1,this._evalNavigationFeature("PinchZoom"))},enableKeyboardNavigation:function(){this.isKeyboardNavigation||
(this.isKeyboardNavigation=!0,this._evalNavigationFeature("KeyboardNavigation"))},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.isKeyboardNavigation=!1,this._evalNavigationFeature("KeyboardNavigation"))},enableScrollWheel:function(){this.isScrollWheel||(this.isScrollWheel=!0,this._evalNavigationFeature("ScrollWheel"))},disableScrollWheel:function(){this.isScrollWheel&&(this.isScrollWheel=!1,this._evalNavigationFeature("ScrollWheel"))},enableScrollWheelZoom:function(){this.isScrollWheelZoom||
(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},enableScrollWheelPan:function(){this.isScrollWheelPan||this.navigationManager.enableScrollWheelPan()},disableScrollWheelPan:function(){this.isScrollWheelPan&&this.navigationManager.disableScrollWheelPan()},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=
!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(L(this._slider.domNode||this._slider,"visibility","inherit"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(L(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)},onClick:function(N){N.graphic||(N.graphic=this.syncHitTestForWebGL(N))}});return B.Map=A})},"esri/_coremap":function(){define("require module dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix ./kernel ./config ./basemaps ./lang ./Evented ./fx ./deferredUtils ./tileUtils ./urlUtils ./PluginTarget ./Color ./promiseList ./arcade/Dictionary ./geometry/Point ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./geometry/scaleUtils ./geometry/screenUtils ./geometry/webMercatorUtils ./layers/GraphicsLayer ./layers/TileInfo ./layers/LOD ./layers/ArcGISTiledMapServiceLayer ./layers/MapImageLayer ./layers/OpenStreetMapLayer ./layers/support/webglUtils ./dijit/Popup ./plugins/popupManager dojo/uacss".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E,F,G,H,L,J,S,P,Q,M,N,K,X,da,Y,aa,ca,I,T,ba,pa,ya,Da){function Ha(V,fa){var qa=V.lods;qa.sort(function(La,Wa){return La.scale>Wa.scale?-1:La.scale<Wa.scale?1:0});var va=[];qa=f.filter(qa,function(La){if(-1===ma(va,La.scale))return va.push(La.scale),!0});var Fa=fa.lods=[],Ca;f.forEach(qa,function(La,Wa){Ca=Fa[Wa]=new I(La);Ca.level=Wa});fa.tileInfo=new ca(R(V,{lods:Fa}))}var ta,xa=da.toMapPoint,ra=da.toScreenPoint,Aa=g.connect,ua=g.disconnect,
Ja=e.hitch,ha=q.set,ma=f.indexOf,R=e.mixin,Ea=0,Ia=x.defaults.map,ea=Ia.layerNamePrefix,Ya=Ia.graphicsLayerNamePrefix,Xa=new RegExp("^"+ea+"(\\d+)$"),Ba=new RegExp("^"+Ya+"(\\d+)$"),U=function(){},la=0,na=ya.isWebGLEnabled();b=b([t,H],{declaredClass:"esri._CoreMap",tables:null,resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',
invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,webglEnabled:na,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],
load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],"before-unload":["map"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,
"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(V,fa){fa=fa||{};this.registerConnectEvents();R(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_basemapPending:!1,_connects:[],_layerAddPromises:{},
_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,_minResolution:0,_maxResolution:0,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,_labels:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[],_webglContextOwners:[]});var qa=this.container=k.byId(V),va=this.id=c.get(qa,"id")||B.getUniqueId(this.declaredClass);l.add(qa,"map");
var Fa=m.getContentBox(qa),Ca=l.add,La=r.create;this.position=new Q(0,0);this._reposition();var Wa=this.width=0<Fa.w?Fa.w:Ia.width,Va=this.height=0<Fa.h?Fa.h:Ia.height,Ma=this.root=La("div",{id:va+"_root",style:{width:Wa+"px",height:Va+"px",direction:"ltr"}});Ca(Ma,"esriMapContainer");Fa=this.__container=La("div",{id:va+"_container"},Ma);ha(Fa,"position","absolute");Ca(Fa,"esriMapContainer");qa.appendChild(Ma);qa=this._params=R({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,
showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},fa);this.setWebGLEnabled(null!=qa.webglEnabled?qa.webglEnabled:this.webglEnabled);this.maxWebGLContexts=null!=qa.maxWebGLContexts?qa.maxWebGLContexts:-1;this.wrapAround180=qa.wrapAround180;this.optimizePanAnimation=qa.optimizePanAnimation;this.setBackgroundColor(qa.backgroundColor);u.isDefined(qa.resizeDelay)&&(this.resizeDelay=qa.resizeDelay);qa.lods&&(Ha({rows:512,cols:512,dpi:96,format:"JPEG",
compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:qa.lods},qa),this.__tileInfo=qa.tileInfo);this.extent=qa.extent;this._extentUtil({mapCenter:qa.center,targetLevel:qa.zoom,targetScale:qa.scale});this.__visibleRect=new N(0,0,Wa,Va);this.__visibleDelta=new N(0,0,Wa,Va);va=this._layersDiv=La("div",{id:va+"_layers"});Ca(va,"esriMapLayers");Fa.appendChild(va);this._zoomAnimDiv=La("div",{style:{position:"absolute"}});qa.infoWindow?this.infoWindow=qa.infoWindow:(Ca=this.infoWindow=
new Da(qa.popupOptions,La("div")),Ca.startup(),Ca._ootb=!0,ha(Ca.domNode,"zIndex",40));if(qa.showLabels){var eb=this;D(["./layers/LabelLayer"],function(ib){ta=ib;eb._createLabelLayer()});this.on("load",function(){eb._createLabelLayer()})}this.addPlugin(this._getAbsMid("./plugins/popupManager"),{enabled:qa.showInfoWindowOnClick});this._zoomStartHandler=Ja(this,this._zoomStartHandler);this._zoomingHandler=Ja(this,this._zoomingHandler);this._zoomEndHandler=Ja(this,this._zoomEndHandler);this._panningHandler=
Ja(this,this._panningHandler);this._panEndHandler=Ja(this,this._panEndHandler);this._endTranslate=Ja(this,this._endTranslate);this._timedResize=Ja(this,this._timedResize);this._execResize=Ja(this,this._execResize);this._processLabelLayers=Ja(this,this._processLabelLayers);this._updateLabelLayers=Ja(this,this._updateLabelLayers);this.resize=Ja(this,this.resize);h.addOnWindowUnload(this,this.destroy)},_getAbsMid:function(V){return D.toAbsMid?D.toAbsMid(V):A.id.replace(/\/[^\/]*$/ig,"/")+V},_cleanUp:function(){var V=
this.infoWindow;V&&(V._ootb&&V.destroy?V.destroy():V.unsetMap(this),delete this.infoWindow);ua(this._tsTimeExtentChange_connect);this.removePlugin("./plugins/popupManager");r.destroy(this.root);this.root=null},_addLayer:function(V,fa,qa){if(V.id){var va=V.id.match(V instanceof aa?Ba:Xa);va&&va[1]&&(va=Number(va[1]),Ea<=va&&(Ea=va+1))}var Fa=V.id||(V instanceof aa?Ya:ea)+Ea++;V.id=Fa;this._layers[Fa]=V;V._isRefLayer="top"===qa;qa=!u.isDefined(qa)||0>qa||qa>fa.length||"top"===qa?fa.length:qa;var Ca;
if(!V._isRefLayer)for(;(Ca=this.getLayer(fa[qa-1]))&&Ca._isRefLayer;)qa--;if(va=!this._firstLayerId&&!this.loaded&&!this._basemapPending&&0===qa&&(fa===this.layerIds||fa===this.graphicsLayerIds))this._firstLayerId=Fa;fa.splice(qa,0,Fa);var La=Ja(this,this._addLayerHandler),Wa=this;qa=this._connects;Ca=function(){V.loaded?Wa._onLoadFix?(Wa._onLoadFix=!1,setTimeout(function(){La(V)},0)):La(V):(Wa["_"+Fa+"_addtoken_load"]=Aa(V,"onLoad",Wa,"_addLayerHandler"),Wa["_"+Fa+"_addtoken_err"]=Aa(V,"onError",
Wa,function(Va){La(V,Va,fa)}))};this.loaded||va||V.loaded&&-1===ma(this.graphicsLayerIds,Fa)?Ca():qa.push(Aa(this,"onLoad",Ca));return V},_forgetLayer:function(V){V=V.id;ua(this["_"+V+"_addtoken_load"]);ua(this["_"+V+"_addtoken_err"]);var fa=this._layerAddPromises[V];fa&&(delete this._layerAddPromises[V],fa.cancel())},_addLayerHandler:function(V,fa,qa){fa?this._attachLayerToMap(V,fa,qa):V._prepareToAttach?(this._layerAddPromises[V.id]=V._prepareToAttach(this)).always(e.hitch(this,function(va){va&&
"cancel"===va.dojoType||this._attachLayerToMap(V,null,qa)})):V.declaredClass&&(-1<V.declaredClass.toLowerCase().indexOf("vectortilelayer")||-1<V.declaredClass.toLowerCase().indexOf("rasterxlayer")&&V.useWebGL)&&!this.isWebGLContextAvailable()?(fa=Error("Too many WebGL contexts. Unable to add the layer: ",V.url),this._attachLayerToMap(V,fa,this.layerIds)):this._attachLayerToMap(V,fa,qa)},_attachLayerToMap:function(V,fa,qa){var va=this.id,Fa=V.id,Ca=ma(V instanceof aa?this.graphicsLayerIds:this.layerIds,
Fa),La=Ca,Wa=!1,Va=this._params;this._forgetLayer(V);if(fa)delete this._layers[Fa],-1!==Ca&&(qa.splice(Ca,1),this.onLayerAddResult(V,fa));else{-1===Ca&&(Ca=ma(this._internalLayerIds,Fa),La=20+Ca,Wa=!0);if(Fa===this._firstLayerId){fa=V.spatialReference;qa=this.extent&&this.extent.spatialReference;!qa||qa.equals(fa)||!V.tileInfo&&V.url||(qa=null);qa=this.spatialReference=qa||fa;this.wrapAround180=this.wrapAround180&&qa&&qa._isWrappable()?!0:!1;V.tileInfo&&(this.__tileInfo?(fa=this.__tileInfo.lods,this.__tileInfo=
R({},V.tileInfo),this.__tileInfo.lods=fa):(Ha(R({},V.tileInfo),Va),this.__tileInfo=Va.tileInfo));if(this.wrapAround180){fa=this.__tileInfo;qa=qa._getInfo();if(!fa||Math.abs(qa.origin[0]-fa.origin.x)>qa.dx)this.wrapAround180=!1;this.wrapAround180&&fa&&F._addFrameInfo(fa,qa)}Va.units=V.units;if((fa=this.__tileInfo&&this.__tileInfo.lods)&&fa.length){qa=Va.minScale;Ca=Va.maxScale;var Ma=-1,eb=-1,ib=!1,lb=!1,rb;for(rb=0;rb<fa.length;rb++)0<qa&&!ib&&qa>=fa[rb].scale&&(Ma=fa[rb].level,ib=!0),0<Ca&&!lb&&
Ca>=fa[rb].scale&&(eb=0<rb?fa[rb-1].level:-1,lb=!0);-1===Va.minZoom&&(Va.minZoom=0===qa?fa[0].level:Ma);-1===Va.maxZoom&&(Va.maxZoom=0===Ca?fa[fa.length-1].level:eb);for(rb=0;rb<fa.length;rb++)Va.minZoom===fa[rb].level&&(Va.minScale=fa[rb].scale,this._minResolution=fa[rb].resolution),Va.maxZoom===fa[rb].level&&(Va.maxScale=fa[rb].scale,this._maxResolution=fa[rb].resolution)}else Va.minZoom=Va.maxZoom=Va.zoom=-1}V instanceof aa?(this._gc||(this._gc=new aa._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=
va+"_gc"),this._attachGraphicsLayer(V).id=va+"_"+Fa):(La=V._setMap(this,this._layersDiv,La,this.__LOD),La.id=va+"_"+Fa,this._layerDivs[Fa]=La,this._reorderLayers(this.layerIds),Wa||-1===V.declaredClass.indexOf("VETiledLayer")||this._onBingLayerAdd(V));Fa===this._firstLayerId&&(this.graphics=new aa({id:va+"_graphics",displayOnPan:Va.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20));if(V===this.graphics){qa=this._layers[this._firstLayerId];va=Va.zoom;La=Va.scale;fa=Va.center;
qa=qa.initialExtent||qa.fullExtent;this._firstLayerId=null;this.extent&&(this.extent=this._convertGeometry(this,this.extent));!this.extent&&qa&&(fa&&(fa=this._convertGeometry(qa,fa)),fa&&(qa=qa.centerAt(fa),fa=null));if(fa=this.extent||qa&&new M(qa.toJson()))-1<va?fa=this.__getExtentForLevel(va,null,fa).extent:0<La&&(fa=X.getExtentForScale(this,La,fa));if(!fa)return;Va=this._fixExtent(fa,Va.fitExtent);this.extent=Va.extent;this.__LOD=Va.lod;this.__setExtent(this.extent);this.loaded=!0;this.attr("data-loaded",
"");this.infoWindow.setMap(this);this.onLoad(this)}Wa||(this.onLayerAdd(V),this.onLayerAddResult(V));ua(this[Fa+"_addLayerHandler_connect"])}},_convertGeometry:function(V,fa){var qa=V&&V.spatialReference,va=fa&&fa.spatialReference;qa&&va&&!qa.equals(va)&&(qa._canProject(va)?qa.isWebMercator()?fa=Y.geographicToWebMercator(fa):4326===qa.wkid&&(fa=Y.webMercatorToGeographic(fa,!0)):fa=null);return fa},_attachGraphicsLayer:function(V){var fa=V.id;V=V._setMap(this,this._gc._surface);this._layerDivs[fa]=
V;this._reorderLayers(this.graphicsLayerIds);return V},_detachGraphicsLayer:function(V){V.loaded&&V.getMap()&&V._unsetMap(this,this._gc._surface)},_reorderLayers:function(V){var fa=this.onLayerReorder,qa=r.place,va=this._layerDivs,Fa=this._layers,Ca=this._gc?this._gc._surface.getEventSource():null;if(V===this.graphicsLayerIds)f.forEach(V,function(eb,ib){var lb=va[eb],rb=Fa[eb];lb&&(this._gc._reorderLayer(rb,lb,ib),fa(rb,ib))},this);else{var La=this.graphics,Wa=La?La.id:null,Va=this._layersDiv,Ma;
f.forEach(V,function(eb,ib){Ma=va[eb];eb!==Wa&&Ma&&(qa(Ma,Va,ib),fa(Fa[eb],ib))});this._mapImageLyr&&this._placeMapImageLyr();Ca&&(Ca=9>v("ie")?Ca.parentNode:Ca,qa(Ca,Ca.parentNode,"last"))}this.onLayersReordered([].concat(V))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(V){var fa=parseFloat(V.left),qa=parseFloat(V.top);V=new M(fa,qa-parseFloat(V.height),fa+parseFloat(V.width),qa,this.spatialReference);fa=this.extent.getWidth()/
V.getWidth();this.__zoom(V,fa,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var V=this._zoomAnimDiv,fa=V.extent,qa=this.extent.getWidth()/fa.getWidth(),va=V.anchor,Fa=V.newLod,Ca=V.levelChange;V.extent=V.anchor=V.levelChange=V.startingExtent=V.newLod=this._delta=this._zoomAnim=null;this.__zoomEnd(fa,qa,va,Fa,Ca)},_panningHandler:function(V){if(isNaN(parseFloat(V.left))||isNaN(parseFloat(V.top))){var fa=Math.round,qa=this._panAnim.node;V.left=-1*(this._delta.x-fa(this.width/2))+"px";V.top=
-1*(this._delta.y-fa(this.height/2))+"px";q.set(qa,"left",V.left);q.set(qa,"top",V.top)}V=new Q(parseFloat(V.left),parseFloat(V.top));fa=this.toMap(V);this.onPan(this.extent.offset(this.extent.xmin-fa.x,this.extent.ymax-fa.y),V)},_panEndHandler:function(V){this.__panning=!1;var fa=Math.round;V=new Q(-fa(parseFloat(V.style.left)),-fa(parseFloat(V.style.top)));fa=V.x;var qa=V.y,va=this.__visibleRect,Fa=this.__visibleDelta;va.x+=-fa;va.y+=-qa;Fa.x+=-fa;Fa.y+=-qa;ha(this._zoomAnimDiv,{left:"0px",top:"0px"});
va=this.extent;Fa=this._ratioW;var Ca=this._ratioH;va=new M(va.xmin+fa/Fa,va.ymin-qa/Ca,va.xmax+fa/Fa,va.ymax-qa/Ca,this.spatialReference);V.setX(-V.x);V.setY(-V.y);this._delta=this._panAnim=null;this._updateExtent(va);this.onPanEnd(va,V);this._fireExtChg([va,V,!1,this.__LOD])},_fixExtent:function(V,fa){for(var qa=this._reshapeExtent(V),va=1.25;!0===fa&&(qa.extent.getWidth()<V.getWidth()||qa.extent.getHeight()<V.getHeight())&&0<qa.lod.level&&3>=va;)qa=this._reshapeExtent(V.expand(va)),va+=.25;return qa},
_getFrameWidth:function(){var V=-1,fa=this.spatialReference._getInfo();this.__LOD?(fa=this.__LOD._frameInfo)&&(V=fa[3]):fa&&(V=Math.round(2*fa.valid[1]/(this.extent.getWidth()/this.width)));return V},_fixAspectRatio:function(V){var fa=V.getWidth(),qa=V.getHeight(),va=fa/qa,Fa=this.width/this.height,Ca=0,La=0;this.width>this.height?fa>qa?Fa>va?Ca=qa*Fa-fa:La=fa/Fa-qa:Ca=qa*Fa-fa:this.width<this.height?fa<qa?Fa>va?Ca=qa*Fa-fa:La=fa/Fa-qa:La=fa/Fa-qa:fa<qa?Ca=qa-fa:fa>qa&&(La=fa/Fa-qa);Ca&&(V.xmin-=
Ca/2,V.xmax+=Ca/2);La&&(V.ymin-=La/2,V.ymax+=La/2);return V},_reshapeExtent:function(V){V=this._fixAspectRatio(V);return this._getAdjustedExtent(V)},_getAdjustedExtent:function(V){if(this.__tileInfo)return F.getCandidateTileInfo(this,this.__tileInfo,V);var fa=X.getScale(this,V),qa=this.getMinScale(),va=this.getMaxScale();!qa||fa<=qa?!va||fa>=va||(V=X.getExtentForScale(this,va,V)):V=X.getExtentForScale(this,qa,V);return{extent:V}},_onBingLayerAdd:function(V){this["__"+V.id+"_vis_connect"]=g.connect(V,
"onVisibilityChange",this,"_toggleBingLogo");this._toggleBingLogo(V.visible)},_onBingLayerRemove:function(V){g.disconnect(this["__"+V.id+"_vis_connect"]);delete this["__"+V.id+"_vis_connect"];var fa=f.some(this.layerIds,function(qa){return(V=this._layers[qa])&&V.visible&&-1!==V.declaredClass.indexOf("VETiledLayer")},this);this._toggleBingLogo(fa)},_toggleBingLogo:function(V){V&&!this._bingLogo?(V={left:this._mapParams&&this._mapParams.nav?"25px":""},6===v("ie")&&(V.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled\x3d'true', sizingMethod\x3d'crop', src\x3d'"+
D.toUrl("./images/map/bing-logo-lg.png")+"')"),V=this._bingLogo=r.create("div",{style:V},this.root),l.add(V,"bingLogo-lg")):!V&&this._bingLogo&&(r.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(V,fa){var qa=this._zoomAnim,va=this._panAnim;if(qa&&qa._active)qa.stop(),qa._fire("onEnd",[qa.node]);else if(va&&va._active){va.stop();this._panAnim=null;va=va.curve.getValue(va._getStep());qa=Math.round(parseFloat(va.left));va=Math.round(parseFloat(va.top));var Fa=this.navigationManager._dragOrigin;
this.__pan(qa,va);Fa&&(Fa.x-=qa,Fa.y-=va);return}this.__panning=!0;this.onPanStart(this.extent,new Q(V,fa))},__pan:function(V,fa){var qa=this.extent,va=this._ratioW,Fa=this._ratioH;this.onPan(new M(qa.xmin-V/va,qa.ymin+fa/Fa,qa.xmax-V/va,qa.ymax+fa/Fa,this.spatialReference),new Q(V,fa))},__panEnd:function(V,fa){var qa=this.__visibleRect,va=this.__visibleDelta;qa.x+=V;qa.y+=fa;va.x+=V;va.y+=fa;qa=new Q(V,fa);va=this.extent;var Fa=this._ratioW,Ca=this._ratioH;va=new M(va.xmin-V/Fa,va.ymin+fa/Ca,va.xmax-
V/Fa,va.ymax+fa/Ca,this.spatialReference);this.__panning=!1;this._updateExtent(va);this.onPanEnd(va,qa);this._fireExtChg([va,qa,!1,this.__LOD])},__zoomStart:function(V,fa){this.__zooming=!0;this.onZoomStart(V,1,fa,this.__LOD?this.__LOD.level:null)},__zoom:function(V,fa,qa){this.onZoom(V,fa,qa)},__zoomEnd:function(V,fa,qa,va,Fa){ha(this._layersDiv,{left:"0px",top:"0px"});this._delta=new Q(0,0);this.__visibleRect.x=this.__visibleRect.y=0;V=new M(V);this.__LOD=va;this._ratioW=this.width/V.getWidth();
this._ratioH=this.height/V.getHeight();var Ca=this._delta;this._delta=null;this.__zooming=!1;this._updateExtent(V,Fa);this.onZoomEnd(V,fa,qa,va?va.level:null);this._fireExtChg([V,Ca,Fa,va])},_extentUtil:function(V,fa,qa,va,Fa){var Ca=new d,La=this.width,Wa=this.height;if(V){var Va=V.numLevels;var Ma=V.targetLevel;var eb=u.isDefined(Ma);var ib=V.factor;var lb=V.mapAnchor;var rb=V.screenAnchor;var sb=V.mapCenter;var tb=V.levelOrFactor;var Ab=V.targetScale;var Cb=u.isDefined(Ab)&&0<Ab}if(fa){var nb=
fa.dx;var yb=fa.dy;sb=fa.mapCenter}e.isArray(sb)&&(sb=new P(sb));var Fb=this._panAnim;fa=(V=this._stopAnim())?V.divExtent:this.extent;var gc=this.__tileInfo,Sb=this._params;if(!this.loaded){if(qa)fa&&(qa=this._convertGeometry(fa,qa)),qa&&(this.extent=qa,Sb.zoom=Sb.scale=-1,Sb.center=null);else if(sb||eb||Cb){if(sb)if(fa){if(sb=this._convertGeometry(fa,sb))this.extent=fa.centerAt(sb),Sb.center=null}else Sb.center=sb;eb&&-1<Ma?(Sb.zoom=Ma,Sb.scale=-1):Cb&&(Sb.scale=Ab,Sb.zoom=-1)}Ca.resolve();return Ca}if(sb&&
(sb=this._convertGeometry(this,sb),!sb)||lb&&(lb=this._convertGeometry(this,lb),!lb)||qa&&(qa=this._convertGeometry(this,qa),!qa))return Ca.reject(),Ca;Fb&&lb&&rb&&(lb=xa(this.extent,La,Wa,rb));V&&lb&&rb&&(lb=xa(V.divExtent,La,Wa,rb));if(eb)if(gc)Va=this.getMinZoom(),eb=this.getMaxZoom(),Ma<Va?Ma=Va:Ma>eb&&(Ma=eb),Va=Ma-(V?V.level:this.getLevel());else{Va=0<Ma?-1:1;var Kb=tb?Ma:null}if(!qa)if(u.isDefined(Va))gc?(La=V?V.level:this.getLevel(),La=this.__getExtentForLevel(La+Va,sb,fa).extent):(La=(V?
V.end:this.extent).expand(Kb||(0<Va?.5*Va:2*-Va)),Kb&&sb&&(La=La.centerAt(sb))),La&&(sb?qa=La:(nb=lb||fa.getCenter(),Wa=La.getWidth(),yb=La.getHeight(),La=nb.x>=fa.xmin&&nb.x<=fa.xmax?(nb.x-fa.xmin)/fa.getWidth():.5,qa=nb.y>=fa.ymin&&nb.y<=fa.ymax?(nb.y-fa.ymin)/fa.getHeight():.5,La=nb.x-La*Wa,nb=nb.y-qa*yb,qa=new M(La,nb,La+Wa,nb+yb,this.spatialReference)));else if(Cb)qa=X.getExtentForScale(this,Ab,fa);else if(u.isDefined(ib))qa=fa.expand(ib);else if(nb||yb)V?(qa=V.end,lb=qa.getCenter(),Kb=ra(qa,
La,Wa,lb),Kb.x+=nb,Kb.y+=yb,Kb=xa(qa,La,Wa,Kb),qa=qa.offset(Kb.x-lb.x,Kb.y-lb.y)):(nb=new Q(La/2+nb,Wa/2+yb),nb=xa(fa,La,Wa,nb),Wa=fa.getWidth(),yb=fa.getHeight(),La=nb.x-Wa/2,nb=nb.y-yb/2,qa=new M(La,nb,La+Wa,nb+yb,this.spatialReference));qa||(sb?(fa=V?V.end:fa,Wa=fa.getWidth(),yb=fa.getHeight(),La=sb.x-Wa/2,nb=sb.y-yb/2,qa=new M(La,nb,La+Wa,nb+yb,this.spatialReference)):V&&(qa=V.end));qa?(this._extentDfd&&-1===this._extentDfd.fired&&(this._extentDfd.then(null,U),this._extentDfd.reject()),this._extentDfd=
Ca,this.__setExtent(qa,null,rb,va,V,Fa)):Ca.reject();return Ca},__setExtent:function(V,fa,qa,va,Fa,Ca){try{if(this._firstLayerId)this.extent=V;else{var La=!0,Wa=this.spatialReference,Va=Fa?Fa.divExtent:this.extent,Ma=this._fixExtent(V,va||!1);V=Ma.extent;var eb=V.getWidth(),ib=V.getHeight(),lb=Math.round;if(Va){var rb=lb(1E6*Va.getWidth()),sb=lb(1E6*eb),tb=lb(1E6*Va.getHeight()),Ab=lb(1E6*ib);La=rb!==sb||tb!==Ab}var Cb,nb=Fa&&Fa.rect,yb=Fa&&Fa.divExtent;if(Ia.zoomDuration&&La&&Va){yb=yb||new M(Va);
nb=nb||{left:Va.xmin,top:Va.ymax,width:Va.getWidth(),height:Va.getHeight()};var Fb={left:V.xmin,top:V.ymax,width:eb,height:ib};var gc=new P(V.xmin,V.ymax,Wa),Sb=new P(V.xmin,V.ymin,Wa),Kb=new P(this.extent.xmin,this.extent.ymax,Wa),uc=new P(this.extent.xmin,this.extent.ymin,Wa);(Cb=K.getLineIntersection(Kb,gc,uc,Sb,Wa))||Fa||(La=!1)}this._ratioW=this.width/eb;this._ratioH=this.height/ib;var Ib=this._zoomAnimDiv;if(La)if(ha(this._layersDiv,{left:"0px",top:"0px"}),fa=new Q(0,0),this.__visibleRect.x=
this.__visibleRect.y=0,nb&&Fb){this._delta=fa;Ib.id="_zAD";Ib.startingExtent=yb;Ib.extent=V;Ib.levelChange=La;Ib.newLod=Ma.lod;Ib.anchor=qa?qa:!Cb&&Fa?Fa.anchor:ra(this.extent,this.width,this.height,Cb);var dc=this.extent.getWidth()/V.getWidth();Ia.zoomAnimationThrottled&&1024<(1>dc?1/dc:dc)?(this.__zoomStart(yb,Ib.anchor),this.__zoom(yb,1,Ib.anchor),this._fireOnScale(1,Ib.anchor,!0),this.__zoomEnd(V,dc,Ib.anchor,Ma.lod,La)):(this._zoomAnim=C.resize({node:Ib,start:nb,end:Fb,duration:Ia.zoomDuration,
rate:Ia.zoomRate,beforeBegin:Fa?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(dc,Ib.anchor,Ca))}else this._updateExtent(V,La,Ca),this._fireExtChg([this.extent,fa,La,this.__LOD=Ma.lod]);else if(!this.__panning)if(!1===this.loaded||Ca)this._updateExtent(V,La,Ca),this._fireExtChg([this.extent,fa,La,this.__LOD=Ma.lod]);else{this.__panning=!0;nb=(new N(0,0,this.width,this.height,this.spatialReference)).getCenter();nb.x=lb(nb.x);nb.y=lb(nb.y);
var hc=this._delta=this.toScreen(V.getCenter()),Zb=Math.abs(nb.x-hc.x),vc=Math.abs(nb.y-hc.y);this.optimizePanAnimation&&(Zb>2*this.width||vc>2*this.height)?(this.__panStart(0,0),this.__pan(0,0),this.__visibleRect.x=this.__visibleRect.y=this.__visibleDelta.x=this.__visibleDelta.y=0,this.__panning=!1,this._delta=null,this._updateExtent(V,!1,Ca),this.onPanEnd(this.extent,new Q(0,0)),this._fireExtChg([this.extent,new Q(0,0),!0,this.__LOD])):(this.onPanStart(this.extent,new Q(0,0)),this._panAnim=C.slideTo({node:Ib,
left:nb.x-hc.x,top:nb.y-hc.y,duration:Ia.panDuration,rate:Ia.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play())}}}catch(ic){}},_fireOnScale:function(V,fa,qa){if("css-transforms"===this.navigationMode){var va=this.__visibleDelta;this.onScale(w.scaleAt(V,{x:-1*(this.width/2-(fa.x-va.x)),y:-1*(this.height/2-(fa.y-va.y))}),qa)}},_stopAnim:function(){var V=this._zoomAnim,fa=this._panAnim;if(V&&V._active){V.stop();fa=V.curve.getValue(V._getStep());var qa=parseFloat(fa.left),
va=parseFloat(fa.top);V=V.node;return{anchor:V.anchor,start:V.startingExtent,end:V.extent,level:V.newLod&&V.newLod.level,rect:fa,divExtent:new M(qa,va-parseFloat(fa.height),qa+parseFloat(fa.width),va,this.spatialReference)}}fa&&fa._active&&(fa.stop(),fa._fire("onEnd",[fa.node]))},__getExtentForLevel:function(V,fa,qa){var va=this.__tileInfo;va=va&&va.lods;V=u.isDefined(V)?V:0;qa=qa||this.extent;fa=fa||qa&&qa.getCenter();if(va){if(fa){qa=this.getMinZoom();var Fa=this.getMaxZoom();V>Fa&&(V=Fa);V<qa&&
(V=qa);V=va[V];va=this.width*V.resolution/2;qa=this.height*V.resolution/2;return{extent:new M(fa.x-va,fa.y-qa,fa.x+va,fa.y+qa,fa.spatialReference),lod:V}}}else return qa?{extent:qa.expand(!V||1>V?1:V).centerAt(fa)}:void 0},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var V=--this._jobs;V?0>V&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(V,fa){this[V]&&this[V].apply(this,
fa)},_updateExtent:function(V,fa,qa){this.extent=V;V=this.spatialReference;this._viewInfo={view:new S({viewingMode:"map",scale:this.getScale()}),sr:V,version:fa?++la:la};(fa||qa)&&this._setClipRect();this._calcGeographicExtent()},_calcGeographicExtent:function(){var V=this.spatialReference;V&&(V.isWebMercator()?this.geographicExtent=Y.webMercatorToGeographic(this._getAvailExtent(),!0):4326===V.wkid&&(this.geographicExtent=new M(this._getAvailExtent().toJson())))},_fireExtChg:function(V){this.attr("data-zoom",
this.getZoom());this.attr("data-scale",this.getScale());this._fireEvent("onExtentChange",V);if(V=this._extentDfd)delete this._extentDfd,V.resolve()},attr:function(V,fa){var qa=this.container;qa&&(null==fa?qa.removeAttribute(V):qa.setAttribute(V,fa));return this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect();this._calcGeographicExtent()},onBeforeUnload:function(){},onUnload:function(){},onExtentChange:function(V,fa,qa){},onTimeExtentChange:function(){},onWebGLEnabledChange:function(){},
onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||
(this.onBeforeUnload(this),this.removeAllLayers(),this.releaseAllWebGLContexts(),this._cleanUp(),clearTimeout(this._resizeTimerHandle),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(V){ha(this.__container,"cursor",this.cursor=V)},setMapCursor:function(V){this.setCursor(this._cursor=V)},resetMapCursor:function(){this.setCursor(this._cursor)},setBackgroundColor:function(V){V&&!V.declaredClass&&(V=new L(V));this.backgroundColor=V||null;var fa="";V&&(fa=9>v("ie")?
V.toHex():"rgba("+V.toRgba().join(",")+")");q.set(this.root,{backgroundColor:fa})},setInfoWindow:function(V){var fa=this.infoWindow;fa&&fa.unsetMap(this);this.infoWindow=V;this.loaded&&V&&V.setMap(this)},setInfoWindowOnClick:function(V){this._params.showInfoWindowOnClick=V;this.popupManager&&this.popupManager.set("enabled",V)},getInfoWindowAnchor:function(V){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(V)||"upperright"},toScreen:function(V,fa){return ra(this.extent,
this.width,this.height,V,fa)},toMap:function(V){return xa(this.extent,this.width,this.height,V)},addLayer:function(V,fa){V&&!this.getLayer(V.id)&&this._addLayer(V,V instanceof aa?this.graphicsLayerIds:this.layerIds,fa);return V},addLayers:function(V){var fa=[],qa=V.length,va,Fa=V.length;var Ca=g.connect(this,"onLayerAddResult",function(La,Wa){-1!==f.indexOf(V,La)&&(qa--,fa.push({layer:La,success:!Wa,error:Wa}),qa||(g.disconnect(Ca),this.onLayersAddResult(fa)))});for(va=0;va<Fa;va++)this.addLayer(V[va]);
return this},removeLayer:function(V,fa){var qa=V.id,va=V instanceof aa?this.graphicsLayerIds:this.layerIds,Fa=ma(va,qa);0<=Fa&&(this._forgetLayer(V),va.splice(Fa,1),this.loaded||this._firstLayerId!==qa||(this._firstLayerId=null),V instanceof aa?this._detachGraphicsLayer(V):V.loaded&&(V.getMap()&&V._unsetMap(this,this._layersDiv),-1!==V.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(V)),delete this._layers[qa],delete this._layerDivs[qa],fa||this._reorderLayers(va),this.onLayerRemove(V))},
removeAllLayers:function(){var V=this.layerIds,fa;for(fa=V.length-1;0<=fa;fa--)this.removeLayer(this._layers[V[fa]],1);V=this.graphicsLayerIds;for(fa=V.length-1;0<=fa;fa--)this.removeLayer(this._layers[V[fa]],1);this.onLayersRemoved()},reorderLayer:function(V,fa){e.isString(V)&&(a.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),V=this.getLayer(V));var qa=V.id,va=V instanceof aa?this.graphicsLayerIds:
this.layerIds;0>fa?fa=0:fa>=va.length&&(fa=va.length-1);var Fa=ma(va,qa);-1!==Fa&&Fa!==fa&&(va.splice(Fa,1),va.splice(fa,0,qa),this._reorderLayers(va))},getLayer:function(V){return this._layers[V]},setWebGLEnabled:function(V){var fa=this.webglEnabled;this.webglEnabled=(V||!1)&&na;if(fa!==this.webglEnabled)this.onWebGLEnabledChange()},isWebGLContextAvailable:function(){return ya.isContextAvailable()&&(-1===this.maxWebGLContexts||0<this.maxWebGLContexts&&this._webglContextOwners.length<this.maxWebGLContexts)},
ownsWebGLContext:function(V){return-1!==f.indexOf(this._webglContextOwners,V)},acquireWebGLContext:function(V){return-1!==f.indexOf(this._webglContextOwners,V)?!0:this.isWebGLContextAvailable()?(ya.acquireContext(V),this._webglContextOwners.push(V),!0):!1},releaseWebGLContext:function(V){var fa=f.indexOf(this._webglContextOwners,V);-1!==fa&&this._webglContextOwners.splice(fa,1);ya.releaseContext(V)},releaseAllWebGLContexts:function(){var V=this._webglContextOwners.slice(0);f.forEach(V,function(fa){this.releaseWebGLContext(fa)},
this)},syncHitTestForWebGL:function(V){var fa,qa=V.screenPoint;V=this.graphicsLayerIds.slice(0).reverse();f.some(V,function(va){va=this.getLayer(va);va.loaded&&!va.suspended&&va.hasWebGLSurface()&&(fa=va._div.syncHitTest(qa.x,qa.y));return!!fa},this);return fa},setExtent:function(V,fa){V=new M(V.toJson());var qa=V.getWidth(),va=V.getHeight();return 0===qa&&0===va?this.centerAt(new P({x:V.xmin,y:V.ymin,spatialReference:V.spatialReference&&V.spatialReference.toJson()})):this._extentUtil(null,null,V,
fa)},getTargetExtent:function(V){if(V)return V=new M(V.toJson()),0!==V.getWidth()&&0!==V.getHeight()&&(V=(V=this._convertGeometry(this,V))&&this._fixExtent(V).extent),V},centerAt:function(V){return this._extentUtil(null,{mapCenter:V})},centerAndZoom:function(V,fa){return this._extentUtil({targetLevel:fa,mapCenter:V,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:X.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/
this.width:0},getResolutionInMeters:function(){return this.getResolution()*X.getUnitValueForSR(this.spatialReference)},getResolutionForPopup:function(){var V=this.getResolution(),fa=this.getResolutionInMeters(),qa=fa/16;return 10>=qa?0:V/fa*qa},getMinResolution:function(){return this._minResolution},getMaxResolution:function(){return this._maxResolution},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},getViewInfo:function(){return this._viewInfo},
setScale:function(V){return this._extentUtil({targetScale:V})},getLayersVisibleAtScale:function(V){var fa=[];(V=V||this.getScale())&&f.forEach(this.layerIds.concat(this.graphicsLayerIds),function(qa){qa=this.getLayer(qa);qa.isVisibleAtScale(V)&&fa.push(qa)},this);return fa},getNumLevels:function(){var V=this.getMinZoom(),fa=this.getMaxZoom();return V===fa&&0>V?0:fa-V+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(V){if(-1<V)return this._extentUtil({targetLevel:V})},
getZoom:function(){return this.getLevel()},setZoom:function(V){return this.setLevel(V)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(V){if(e.isObject(V)){var fa=V;V=fa.title}else fa=y&&y[V];if(fa){this._basemapDfd&&!this._basemapDfd.isFulfilled()&&this._basemapDfd.cancel();var qa=[],va=0;f.forEach(fa.baseMapLayers||fa.layers,function(Ca){var La={id:Ca.id,displayLevels:Ca.displayLevels,opacity:u.isDefined(Ca.opacity)?Ca.opacity:
null,visible:u.isDefined(Ca.visibility)?Ca.visibility:null};if(La=this._createBaseLayerInstance(Ca,La,V))qa.push(La),Ca.isReference||va++},this);qa.length&&va&&(this._basemapDfd=J(qa).otherwise(Ja(this,function(Ca){this._basemapPending=!1;Ca&&"cancel"===Ca.dojoType&&f.forEach(qa,function(La){La.cancel()});throw Ca;})).then(function(Ca){var La=[],Wa=[];f.forEach(Ca,function(Va){Va&&(Va.layerInfo&&La.push(Va.layerInfo),Va.layer&&Wa.push(Va.layer))});return{basemapName:V,infos:La,layers:Wa}}).then(Ja(this,
this._waitForBaseLayers)).then(Ja(this,this._setBasemap)),this._basemapPending=!this.loaded&&!this._basemapDfd.isFulfilled())}else{fa=[];for(var Fa in y)fa.push(Fa)}},_createBaseLayerInstance:function(V,fa,qa){var va=new d;if(V.type)switch(V.type){case "OpenStreetMap":va.resolve({layerInfo:V,layer:new pa(fa)});break;case "VectorTile":D(["./layers/VectorTileLayer"],function(Ca){Fa=G.normalize(V.url);va.promise.isFulfilled()||va.resolve({layerInfo:V,layer:new Ca(Fa,fa)})});break;default:return null}else{var Fa=
G.normalize(V.url);va.resolve({layerInfo:V,layer:new T(Fa,fa)})}return va.promise},_waitForBaseLayers:function(V){var fa=new d(E._dfdCanceller);fa.promise.otherwise(function(va){if(va&&"cancel"===va.dojoType){for(var Fa in fa._layerEvents)va=fa._layerEvents[Fa],g.disconnect(va[0]),g.disconnect(va[1]);delete fa._layerEvents}});if(!this.loaded)return fa.resolve(V),fa.promise;var qa=function(va){fa._pendingLayers--;va=f.indexOf(V.layers,this);-1<va&&(va=fa._layerEvents[va])&&(g.disconnect(va[0]),g.disconnect(va[1]));
0>=fa._pendingLayers&&(delete fa._layerEvents,fa.isFulfilled()||fa.resolve(V))};fa._pendingLayers=0;fa._layerEvents={};f.forEach(V.layers,function(va,Fa){va&&fa._pendingLayers++});f.forEach(V.layers,function(va,Fa){va&&(va.loaded?qa(va):fa._layerEvents[Fa]=[g.connect(va,"onLoad",va,qa),g.connect(va,"onError",va,qa)])});return fa.promise},_setBasemap:function(V){var fa=V.layers,qa=V.infos,va=0,Fa=!0;this._basemapPending=!1;this.loaded&&(f.forEach(fa,function(La,Wa){La.loaded&&(qa[Wa].isReference||
va++)}),Fa=va);if(Fa){if(this.basemapLayerIds){var Ca={basemapName:this._basemap,infos:y&&y[this._basemap]&&y[this._basemap].baseMapLayers};Ca.basemapName||(f.forEach(this.basemapLayerIds,function(La){if(this.getLayer(La)instanceof pa)return Ca.basemapName="osm",Ca.infos=y&&y.osm&&y.osm.baseMapLayers,!1},this),Ca.basemapName||(Ca=null))}this._removeBasemap();this._basemap=V.basemapName;this.basemapLayerIds=this._addBasemapLayers(fa,qa);this.attr("data-basemap",this.getBasemap());this.emit("basemap-change",
{current:V,previous:Ca})}},_addBasemapLayers:function(V,fa){var qa=[],va=[],Fa=0;f.forEach(V,function(Ca,La){fa[La].isReference?qa.push(Ca):(this.addLayer(Ca,Fa++),va.push(Ca.id))},this);qa.length&&f.forEach(qa,function(Ca){Ca.attr("data-reference",!0);this.addLayer(Ca,"top");va.push(Ca.id)},this);return va},_removeBasemap:function(){var V=this.basemapLayerIds,fa;V&&V.length&&f.forEach(V,function(qa){(fa=this.getLayer(qa))&&this.removeLayer(fa)},this)},getBasemap:function(){return this._basemap||
""},translate:function(V,fa){V=V||0;fa=fa||0;if(!this._txTimer){this._tx=this._ty=0;var qa=this.toScreen(this.extent.getCenter());this.__panStart(qa.x,qa.y)}this._tx+=V;this._ty+=fa;this.__pan(this._tx,this._ty);clearTimeout(this._txTimer);this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer);this._txTimer=null;var V=this._tx,fa=this._ty;this._tx=this._ty=0;this.__panEnd(V,fa)},setTimeExtent:function(V){V=(this.timeExtent=V)?new V.constructor(V.toJson()):
null;this.onTimeExtentChange(V)},setTimeSlider:function(V){this.timeSlider&&(ua(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null);V&&(this.timeSlider=V,this.setTimeExtent(V.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=Aa(V,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(V){if(this.visible!==V){this.visible=V;V||(this._display=this.container.style.display);this.container.style.display=V?this._display:"none";if(this.autoResize){var fa=
V?"resume":"pause";this._rszSignal[fa]();this._oriSignal[fa]()}V&&this.resize()}return this},resize:function(V){clearTimeout(this._resizeTimerHandle);this._destroyed||(!0===V?this._execResize():this._resizeTimerHandle=setTimeout(this._execResize,this.resizeDelay))},_timedResize:function(){this._resizeTimerHandle||this._execResize()},_execResize:function(){clearTimeout(this._resizeTimerHandle);this._resizeTimerHandle=null;this.reposition();this._resize();this.autoResize&&this._startResizeTimer()},
_resize:function(){var V=this.width,fa=this.height,qa=q.get(this.container,"display"),va=m.getContentBox(this.container);if(!("none"===qa||0>=va.w||0>=va.h||V===va.w&&fa===va.h)){if(qa=this._zoomAnim||this._panAnim)qa.stop(),qa._fire("onEnd",[qa.node]);ha(this.root,{width:(this.width=va.w)+"px",height:(this.height=va.h)+"px"});va=this.width;qa=this.height;this.attribution&&this.attribution.domNode&&q.set(this.attribution.domNode,"maxWidth",Math.floor(va*this._mapParams.attributionWidth)+"px");this.__visibleRect.update(this.__visibleRect.x,
this.__visibleRect.y,va,qa);this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,va,qa);var Fa=new N(this.extent);V=(new N(Fa.x,Fa.y,va/V*Fa.width,qa/fa*Fa.height,this.spatialReference)).getExtent();this.onResize(V,va,qa);this._extentUtil(null,null,V,null,!0)}},reposition:function(){var V=this.position,fa=V.x,qa=V.y;this._reposition();V=this.position;if(fa!==V.x||qa!==V.y)this.onReposition(V.x,V.y)},_reposition:function(){var V=m.position(this.container,!0),fa=m.getPadBorderExtents(this.container);
this.position.update(V.x+fa.l,V.y+fa.t)},_setClipRect:function(){delete this._clip;var V=7>=v("ie")||void 0===v("ie")&&7<=v("trident")?"rect(auto,auto,auto,auto)":"auto";if(this.wrapAround180){var fa=this.width,qa=this.height,va=this._getFrameWidth(),Fa=fa-va;0<Fa&&(V=Fa/2,V="rect(0px,"+(V+va)+"px,"+qa+"px,"+V+"px)",qa=this.extent.getWidth(),fa=va/fa*qa,this._clip=[(qa-fa)/2,fa])}ha(this.__container,"clip",V)},_getAvailExtent:function(){var V=this.extent,fa=this._clip;if(fa){if(!V._clip){var qa=new N(V);
qa.width=fa[1];qa.x+=fa[0];V._clip=qa.getExtent()}return V._clip}return V},_fixedPan:function(V,fa){return this._extentUtil(null,{dx:V,dy:fa})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*
this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(V){V=V||{};if("esri.SnappingManager"===V.declaredClass)this.snappingManager=V;else{var fa=Ea++,qa=this;this._rids&&this._rids.push(fa);D(["./SnappingManager"],function(va){var Fa=qa._rids?f.indexOf(qa._rids,fa):-1;-1!==Fa&&(qa._rids.splice(Fa,1),qa.snappingManager=new va(e.mixin({map:qa},V)))})}return this.snappingManager},
disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy();this.snappingManager=null},_createLabelLayer:function(){!this._labels&&ta&&this.loaded&&(this._labels=new ta({id:"_internal_LabelLayer"}),this._labels._setMap(this,this._gc._surface),this._processLabelLayers(),this.on("layers-reordered",this._processLabelLayers))},_processLabelLayers:function(){null==this._labelProcessor&&(this._labelProcessor=setTimeout(this._updateLabelLayers,0))},_updateLabelLayers:function(){this._labelProcessor=
null;this._labels&&(this._labels.removeAllFeatureLayers(),f.forEach(this.graphicsLayerIds,function(V){V=this.getLayer(V);"function"===typeof V.applyEdits?this._labels.addFeatureLayer(V):"esri.layers.WFSLayer"===V.declaredClass&&this._labels.addFeatureLayer(V)},this))},_getMapImageLyr:function(){this.loaded&&!this._mapImageLyr&&(this._mapImageLyr=new ba,this._mapImageLyr._setMap(this,this._layersDiv),this._placeMapImageLyr());return this._mapImageLyr},_placeMapImageLyr:function(){for(var V=this.layerIds,
fa=this._layerDivs,qa=!1,va,Fa,Ca=V.length-1;0<=Ca;Ca--)if(va=V[Ca],Fa=this.getLayer(va),va=fa[va],Fa&&va&&!Fa._isReference){r.place(this._mapImageLyr._div,va,"after");qa=!0;break}qa||r.place(this._mapImageLyr._div,this._layersDiv,"first")}});return z._CoreMap=b})},"esri/basemaps":function(){define(["require","dojo/has","./kernel","dojo/i18n!./nls/jsapi"],function(D,A,a,b){D={streets:{title:b.basemaps.streets,thumbnailUrl:D.toUrl("./images/basemap/streets.jpg"),itemId:"d8855ee4d3d74413babfb0f41203b168",
baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:b.basemaps.satellite,thumbnailUrl:D.toUrl("./images/basemap/satellite.jpg"),itemId:"86de95d4e0244cba80f0fa2c9403a7b2",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:b.basemaps.hybrid,thumbnailUrl:D.toUrl("./images/basemap/hybrid.jpg"),itemId:"413fd05bbd7342f5991d5ec96f4f8b18",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},
{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},terrain:{title:b.basemaps.terrain,thumbnailUrl:D.toUrl("./images/basemap/terrain.jpg"),itemId:"aab054ab883c4a4094c72e949566ad40",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0}]},topo:{title:b.basemaps.topo,
thumbnailUrl:D.toUrl("./images/basemap/topo.jpg"),itemId:"6e03e8c26aad4b9c92a87c1063ddb0e3",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:b.basemaps.gray,thumbnailUrl:D.toUrl("./images/basemap/gray.jpg"),itemId:"8b3b470883a744aeb60e5fff0a319ce7",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
isReference:!0}]},"dark-gray":{title:b.basemaps["dark-gray"],thumbnailUrl:D.toUrl("./images/basemap/dark-gray.jpg"),itemId:"da65bacab5bd4defb576f839b6b28098",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer"},{url:"https://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:b.basemaps.oceans,thumbnailUrl:D.toUrl("./images/basemap/oceans.jpg"),itemId:"48b8cec7ebf04b5fbdcaf70d09daff21",
baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{url:"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0}]},"national-geographic":{title:b.basemaps["national-geographic"],thumbnailUrl:D.toUrl("./images/basemap/national-geographic.jpg"),itemId:"509e2d6b034246d692a461724ae2d62c",baseMapLayers:[{url:"https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},
osm:{title:b.basemaps.osm,thumbnailUrl:D.toUrl("./images/basemap/osm.jpg"),itemId:"5d2bfa736f8448b3a1708e1f6be23eed",baseMapLayers:[{type:"OpenStreetMap"}]},"dark-gray-vector":{title:b.basemaps["dark-gray"],thumbnailUrl:D.toUrl("./images/basemap/dark-gray.jpg"),itemId:"c11ce4f7801740b2905eb03ddc963ac8",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",type:"VectorTile"}]},"gray-vector":{title:b.basemaps.gray,thumbnailUrl:D.toUrl("./images/basemap/gray.jpg"),
itemId:"8a2cba3b0ebf4140b7c0dc5ee149549a",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",type:"VectorTile"}]},"streets-vector":{title:b.basemaps.streets,thumbnailUrl:D.toUrl("./images/basemap/streets.jpg"),itemId:"de26a3cf4cc9451298ea173c4b324736",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",type:"VectorTile"}]},"topo-vector":{title:b.basemaps.topo,
thumbnailUrl:D.toUrl("./images/basemap/topo.jpg"),itemId:"7dc6cea0b1764a1f9af2e679f642f0f5",baseMapLayers:[{url:"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{url:"https://www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",type:"VectorTile"}]},"streets-night-vector":{title:b.basemaps["streets-night-vector"],thumbnailUrl:D.toUrl("./images/basemap/streets-night.jpg"),itemId:"86f556a2d1fd468181855a35e344567f",
baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",type:"VectorTile"}]},"streets-relief-vector":{title:b.basemaps["streets-relief-vector"],thumbnailUrl:D.toUrl("./images/basemap/streets-relief.jpg"),itemId:"b266e6d17fc345b498345613930fbd76",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",type:"VectorTile"}]},"streets-navigation-vector":{title:b.basemaps["streets-navigation-vector"],
thumbnailUrl:D.toUrl("./images/basemap/streets-navigation.jpg"),itemId:"63c47b7177f946b49902c24129b87252",baseMapLayers:[{url:"https://www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",type:"VectorTile"}]}};return a.basemaps=D})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has ./kernel".split(" "),function(D,A,a,b,g,d,e,f,n){f={animateRange:function(h){var k=
h.range;return new A.Animation(a.mixin({curve:new A._Line(k.start,k.end)},h))},resize:function(h){var k=h.node=b.byId(h.node),c=h.start,l=h.end;c||(c=g.getMarginBox(k),k=g.getPadBorderExtents(k),c=h.start={left:c.l+k.l,top:c.t+k.t,width:c.w-k.w,height:c.h-k.h});l||(l=h.anchor?h.anchor:{x:c.left,y:c.top},k=h.size,l=h.end={left:c.left-(k.width-c.width)*(l.x-c.left)/c.width,top:c.top-(k.height-c.height)*(l.y-c.top)/c.height,width:k.width,height:k.height});return A.animateProperty(a.mixin({properties:{left:{start:c.left,
end:l.left},top:{start:c.top,end:l.top},width:{start:c.width,end:l.width},height:{start:c.height,end:l.height}}},h))},slideTo:function(h){var k=h.node=b.byId(h.node),c=d.getComputedStyle,l=null,r=null,m=function(){return function(){var q="absolute"==k.style.position?"absolute":"relative";l="absolute"==q?k.offsetTop:parseInt(c(k).top)||0;r="absolute"==q?k.offsetLeft:parseInt(c(k).left)||0;"absolute"!=q&&"relative"!=q&&(q=g.position(k,!0),l=q.y,r=q.x,k.style.position="absolute",k.style.top=l+"px",k.style.left=
r+"px")}}();m();h=A.animateProperty(a.mixin({properties:{top:{start:l,end:h.top||0},left:{start:r,end:h.left||0}}},h));D.connect(h,"beforeBegin",h,m);return h},flash:function(h){h=a.mixin({end:"#f00",duration:500,count:1},h);h.duration/=2*h.count;var k=b.byId(h.node),c=h.start;c||(c=d.getComputedStyle(k).backgroundColor);var l=h.end,r=[],m=h.count;k={node:k,duration:h.duration};for(h=0;h<m;h++)r.push(A.animateProperty(a.mixin({properties:{backgroundColor:{start:c,end:l}}},k))),r.push(A.animateProperty(a.mixin({properties:{backgroundColor:{start:l,
end:c}}},k)));return e.chain(r)}};a.mixin(a.getObject("fx",!0,n),f);return f})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(D,A,a,b,g,d,e,f,n,h,k){a.isAsync||h(0,function(){k(["./fx/Toggler"])});a=a.fx={};h={_fire:function(r,m){this[r]&&this[r].apply(this,m||[]);return this}};var c=function(r){this._index=-1;this._animations=r||[];this._current=this._onAnimateCtx=this._onEndCtx=
null;this.duration=0;b.forEach(this._animations,function(m){m&&("undefined"!=typeof m.duration&&(this.duration+=m.duration),m.delay&&(this.duration+=m.delay))},this)};c.prototype=new A;D.extend(c,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove();this._onEndCtx.remove();this._onAnimateCtx=this._onEndCtx=null;this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=g.after(this._current,
"onAnimate",D.hitch(this,"_onAnimate"),!0),this._onEndCtx=g.after(this._current,"onEnd",D.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(r,m){this._current||(this._current=this._animations[this._index=0]);if(!m&&"playing"==this._current.status())return this;var q=g.after(this._current,"beforeBegin",D.hitch(this,function(){this._fire("beforeBegin")}),!0),v=g.after(this._current,"onBegin",D.hitch(this,function(w){this._fire("onBegin",arguments)}),!0),B=g.after(this._current,"onPlay",
D.hitch(this,function(w){this._fire("onPlay",arguments);q.remove();v.remove();B.remove()}));this._onAnimateCtx&&this._onAnimateCtx.remove();this._onAnimateCtx=g.after(this._current,"onAnimate",D.hitch(this,"_onAnimate"),!0);this._onEndCtx&&this._onEndCtx.remove();this._onEndCtx=g.after(this._current,"onEnd",D.hitch(this,"_onEnd"),!0);this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var r=g.after(this._current,"onPause",D.hitch(this,function(m){this._fire("onPause",
arguments);r.remove()}),!0);this._current.pause()}return this},gotoPercent:function(r,m){this.pause();var q=this.duration*r;this._current=null;b.some(this._animations,function(v,B){if(q<=v.duration)return this._current=v,this._index=B,!0;q-=v.duration;return!1},this);this._current&&this._current.gotoPercent(q/this._current.duration);m&&this.play();return this},stop:function(r){if(this._current){if(r){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=
this._animations[this._index]}var m=g.after(this._current,"onStop",D.hitch(this,function(q){this._fire("onStop",arguments);m.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop();this._onAnimateCtx&&this._onAnimateCtx.remove();this._onEndCtx&&this._onEndCtx.remove()}});D.extend(c,h);a.chain=function(r){return new c(D.isArray(r)?r:Array.prototype.slice.call(r,0))};var l=function(r){this._animations=r||
[];this._connects=[];this.duration=this._finished=0;b.forEach(r,function(q){var v=q.duration;q.delay&&(v+=q.delay);this.duration<v&&(this.duration=v);this._connects.push(g.after(q,"onEnd",D.hitch(this,"_onEnd"),!0))},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var m=this;b.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(q){m._connects.push(g.after(m._pseudoAnimation,q,function(){m._fire(q,arguments)},!0))})};D.extend(l,
{_doAction:function(r,m){b.forEach(this._animations,function(q){q[r].apply(q,m)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(r,m){var q=this._pseudoAnimation;q[r].apply(q,m)},play:function(r,m){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(r,m){var q=this.duration*r;b.forEach(this._animations,
function(v){v.gotoPercent(v.duration<q?1:q/v.duration,m)});this._call("gotoPercent",arguments);return this},stop:function(r){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop();b.forEach(this._connects,function(r){r.remove()})}});D.extend(l,h);a.combine=function(r){return new l(D.isArray(r)?r:Array.prototype.slice.call(r,0))};a.wipeIn=function(r){var m=r.node=e.byId(r.node),q=m.style,v;r=
d.animateProperty(D.mixin({properties:{height:{start:function(){v=q.overflow;q.overflow="hidden";if("hidden"==q.visibility||"none"==q.display)return q.height="1px",q.display="",q.visibility="",1;var w=f.get(m,"height");return Math.max(w,1)},end:function(){return m.scrollHeight}}}},r));var B=function(){q.height="auto";q.overflow=v};g.after(r,"onStop",B,!0);g.after(r,"onEnd",B,!0);return r};a.wipeOut=function(r){var m=(r.node=e.byId(r.node)).style,q;r=d.animateProperty(D.mixin({properties:{height:{end:1}}},
r));g.after(r,"beforeBegin",function(){q=m.overflow;m.overflow="hidden";m.display=""},!0);var v=function(){m.overflow=q;m.height="auto";m.display="none"};g.after(r,"onStop",v,!0);g.after(r,"onEnd",v,!0);return r};a.slideTo=function(r){var m=null,q=null,v=function(B){return function(){var w=f.getComputedStyle(B),z=w.position;m="absolute"==z?B.offsetTop:parseInt(w.top)||0;q="absolute"==z?B.offsetLeft:parseInt(w.left)||0;"absolute"!=z&&"relative"!=z&&(w=n.position(B,!0),m=w.y,q=w.x,B.style.position=
"absolute",B.style.top=m+"px",B.style.left=q+"px")}}(r.node=e.byId(r.node));v();r=d.animateProperty(D.mixin({properties:{top:r.top||0,left:r.left||0}},r));g.after(r,"beforeBegin",v,!0);return r};return a})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(D,A,a,b,g,d,e,f,n){D=D(null,{declaredClass:"esri.layers.TileInfo",constructor:function(h){A.mixin(this,h);this.width=
this.cols;this.height=this.rows;this._levelToLOD={};h=this.spatialReference;var k=this.origin;h&&(h=this.spatialReference=new e(h.toJson?h.toJson():h));k&&(this.origin=new f(k.toJson?k.toJson():k),!k.spatialReference&&h&&this.origin.setSpatialReference(new e(h.toJson())));this.lods=a.map(this.lods,function(r){return new n(r)});a.forEach(this.lods,function(r){this._levelToLOD[r.level]=r},this);h=!1;k=this.spatialReference;var c=this.origin;if(k&&c){var l=k._getInfo();l&&(h=k._isWrappable()&&Math.abs(l.origin[0]-
c.x)<=l.dx)}this.isWrappable=h;this._initializeUpsampleLevels()},toJson:function(){return d.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(h){return h.toJson()})})},lodAt:function(h){return this._levelToLOD&&this._levelToLOD[h]||null},updateTileInfo:function(h){var k=this.lodAt(h.level),
c=k.resolution*this.width;k=k.resolution*this.height;h.id=h.level+"/"+h.row+"/"+h.col;h.extent||(h.extent=[0,0,0,0]);h.extent[0]=this.origin.x+h.col*c;h.extent[1]=this.origin.y-(h.row+1)*k;h.extent[2]=h.extent[0]+c;h.extent[3]=h.extent[1]+k},upsampleTile:function(h){var k=this._upsampleLevels[h.level];if(!k||-1===k.parentLevel)return!1;h.level=k.parentLevel;h.row=Math.floor(h.row/k.factor+.001);h.col=Math.floor(h.col/k.factor+.001);this.updateTileInfo(h);return!0},_initializeUpsampleLevels:function(){var h=
this.lods;this._upsampleLevels=[];for(var k=null,c=0;c<h.length;c++){var l=h[c];this._upsampleLevels[l.level]={parentLevel:k?k.level:-1,factor:k?k.resolution/l.resolution:0};k=l}}});A.setObject("layers.TileInfo",D,g);return D})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,A,a,b,g){D=D(null,{declaredClass:"esri.layers.LOD",constructor:function(d){A.mixin(this,d)},toJson:function(){return g.fixJson({level:this.level,levelValue:this.levelValue,
resolution:this.resolution,scale:this.scale})}});A.setObject("layers.LOD",D,b);return D})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query ../kernel ../urlUtils ../SpatialReference ./TiledMapServiceLayer ./ArcGISMapServiceLayer ./TileInfo ./TimeInfo ./TileMap".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m){A=A([k,c],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_isReference:!1,_referenceLayers:"Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Reference Ocean/World_Ocean_Reference Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Reference_Overlay Reference/World_Transportation".split(" "),constructor:function(q,v){v&&(v.roundrobin&&(D.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),v.tileServers=v.roundrobin),this._setTileServers(v.tileServers),
this._loadCallback=v.loadCallback);this._params=a.mixin({},this._url.query);this._initLayer=a.hitch(this,this._initLayer);var B=v&&v.resourceInfo;B?this._initLayer(B):(this._load=a.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(q){if(q&&0<q.length){this.tileServers=q;var v,B=q.length;for(v=0;v<B;v++)q[v]=n.urlToObject(q[v]).path}},_initLayer:function(q,v){this.inherited(arguments);this.resourceInfo=
g.toJson(q);this.tileInfo=new l(q.tileInfo);!1!==this.resampling&&(q.capabilities&&-1<q.capabilities.indexOf("Tilemap")?(this.resampling=!0,this.tileMap=new m(this)):this.resampling=!!q.resampling);!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new h(this.tileInfo.spatialReference.toJson()));this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format;q.timeInfo&&(this.timeInfo=new r(q.timeInfo));q.mensurationCapabilities&&(this.mensurationCapabilities=
q.mensurationCapabilities);var B=this._url.path,w=this._loadCallback,z=n.getProtocolForWebResource(!0),x=B.match(/^https?:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);x=x&&x[2];if(!this.tileServers)if(q.tileServers)this._setTileServers(q.tileServers);else{var y=-1!==B.search(/^https?:\/\/server\.arcgisonline\.com/i),u=-1!==B.search(/^https?:\/\/services\.arcgisonline\.com/i);(y||u)&&this._setTileServers([B,B.replace(y?/server\.arcgisonline/i:
/services\.arcgisonline/i,y?"services.arcgisonline":"server.arcgisonline")])}if(x){x=x.toLowerCase();for(B=0;B<this._agolAttrs.length;B++)if(y=this._agolAttrs[B],y.toLowerCase()===x){this.hasAttributionData=!0;this.attributionDataUrl=this.attributionDataUrl||z+"//static.arcgis.com/attribution/"+y;break}for(B=0;B<this._referenceLayers.length;B++)if(y=this._referenceLayers[B],y.toLowerCase()===x){this._isReference=!0;break}}this.loaded=!0;this.onLoad(this);w&&(delete this._loadCallback,w(this))},getTileUrl:function(q,
v,B){var w=this.tileServers,z=this._getToken(),x=this._url.query;q=(w?w[v%w.length]:this._url.path)+"/tile/"+q+"/"+v+"/"+B;q=n.upgradeToHTTPS(q);this.resampling&&!this.tileMap&&(q+="?blankTile\x3dfalse");x&&(q=this.resampling&&!this.tileMap?q+("\x26"+e.objectToQuery(x)):q+("?"+e.objectToQuery(x)));!z||x&&x.token||(q+=(-1===q.indexOf("?")?"?":"\x26")+"token\x3d"+z);q=this.addTimestampToURL(q);return n.addProxy(q)}});a.setObject("layers.ArcGISTiledMapServiceLayer",A,f);return A})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/dom dojox/collections/ArrayList dojox/gfx/matrix ../kernel ../config ../sniff ../domUtils ../tileUtils ../geometry/Point ../geometry/Rect ../geometry/Extent ./layer".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x){D=D(x,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(y,u){A.connect(this,"onLoad",this,"_initTiledLayer");this._lowestLevel=(this._displayLevels=u?u.displayLevels:null)?this._displayLevels[0]:0;this.resampling=u?u.resampling:void 0;this._resamplingTolerance=u?u.resamplingTolerance:null;this.exclusionAreas=u?u.exclusionAreas:null;var t=a.hitch;this._addImage=t(this,this._addImage);this._tileLoadHandler=t(this,this._tileLoadHandler);
this._tileErrorHandler=t(this,this._tileErrorHandler);this._popTile=t(this,this._popTile);this._cleanUpRemovedImages=t(this,this._cleanUpRemovedImages);this._fireOnUpdateEvent=t(this,this._fireOnUpdateEvent);this._transitionEnd=t(this,this._transitionEnd);this._tileMapCallback=t(this,this._tileMapCallback)},opacity:1,isPNG32:!1,_multiple:1,isResampling:!1,_initTiledLayer:function(){var y=this.tileInfo,u=y.lods;this.resampling=null!=this.resampling?this.resampling:!1;this._tileW=y.width;this._tileH=
y.height;var t=this.scales=[],C=this._displayLevels,E=-Infinity,F=Infinity,G=this.fullExtent,H=new B(G.xmin,G.ymax);G=new B(G.xmax,G.ymin);var L=v.getContainingTileCoords,J,S=u.length;for(J=0;J<S;J++){var P=u[J];var Q=L(y,H,P);P.startTileRow=0>Q.row?0:Q.row;P.startTileCol=0>Q.col?0:Q.col;Q=L(y,G,P);P.endTileRow=Q.row;P.endTileCol=Q.col;C&&-1===b.indexOf(C,P.level)||(t[J]=P.scale,E=P.scale>E?P.scale:E,F=P.scale<F?P.scale:F)}-Infinity===E||this._hasMin||this.setMinScale(E);Infinity===F||this._hasMax||
this.setMaxScale(F);this.setExclusionAreas(this.exclusionAreas);this._patchIE=6<=m("ie")&&7>m("ie")&&(this.isPNG32||"Mixed"===y.format)},isVisibleAtScale:function(y){return y?x.prototype._isMapAtVisibleScale.call(this,y,!0):!1},_isMapAtVisibleScale:function(y){var u=this.inherited(arguments,[y,!0]);if(u){var t=this._map;u=this.scales;var C=t.getScale(),E=!1,F=t.width>t.height?t.width:t.height;for(t=0;t<u.length;t++)if(Math.abs(u[t]-C)/u[t]<1/F){E=!0;break}u=E}return u},_setMap:function(y,u,t,C){this.inherited(arguments);
this._map=y;var E=this._div=d.create("div",null,u),F=y.__visibleDelta,G=A.connect,H=l._css.names,L={position:"absolute",width:y.width+"px",height:y.height+"px",overflow:"visible"},J=r.defaults.map.zoomDuration;"css-transforms"===y.navigationMode?(L[H.transform]=l._css.translate(-F.x,-F.y),n.set(E,L),delete L[H.transform],L[H.transition]=H.transformName+" "+J+"ms ease",n.set(this._active=d.create("div",null,E),L),this._active._remove=0,this._passives=[]):(L.left=-F.x+"px",L.top=-F.y+"px",n.set(E,L));
this._onResizeHandler_connect=G(y,"onResize",this,"_onResizeHandler");this._opacityChangeHandler_connect=G(this,"onOpacityChange",this,"_opacityChangeHandler");F=this.tileInfo;G=F.spatialReference;H=G._getInfo();(this._wrap=y.wrapAround180&&G._isWrappable()&&Math.abs(H.origin[0]-F.origin.x)<=H.dx)&&v._addFrameInfo(F,H);this.setExclusionAreas(this.exclusionAreas);this.evaluateSuspension();if(this.suspended&&!y.loaded)var S=A.connect(y,"onLoad",this,function(){A.disconnect(S);S=null;this.setExclusionAreas(this.exclusionAreas);
this.evaluateSuspension()});return E},_unsetMap:function(y,u){this.suspended||this._suspendImpl();d.destroy(this._div);this._map=this._div=null;var t=A.disconnect;t(this._onResizeHandler_connect);t(this._opacityChangeHandler_connect);this.inherited(arguments)},onSuspend:function(){this.inherited(arguments);this._suspendImpl()},_suspendImpl:function(){q.hide(this._div);clearTimeout(this._wakeTimer);this._wakeTimer=null;this._disableDrawConnectors();var y=this._tiles,u=this._tileIds,t=this._loadingList,
C,E,F=A.disconnect,G=d.destroy;t&&0<t.count&&(t.forEach(function(L){if(C=y[L])F(C._onload_connect),F(C._onerror_connect),F(C._onabort_connect),C._onload_connect=C._onerror_connect=C._onabort_connect=null}),t.clear(),this._fireUpdateEnd());this._removeList.clear();for(t=u.length-1;0<=t;t--)(C=(E=u[t])&&y[E])&&G(C);if("css-transforms"===this._map.navigationMode){u=this._active;E=this._passives;this._noDom=0;for(t=E.length-1;0<=t;t--){var H=E[t];H._endHandle&&F(H._endHandle);H._matrix=H._multiply=H._endHandle=
null;H._marked=H._remove=0;E.splice(t,1);G(H)}u._matrix=u._multiply=null;u._marked=u._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments);this._tileIds=[];this._tiles=[];this._tileBounds=[];this._ct=null;this._removeList=new k;this._loadingList=new k;q.show(this._div);this._enableDrawConnectors();this._wakeTimer=this._wakeTimer||setTimeout(a.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,
null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var y=this._map,u=A.connect;if("css-transforms"===y.navigationMode){if(this._onScaleHandler_connect=u(y,"onScale",this,this._onScaleHandler),m("esri-mobile")){this._standby=[];var t=this,C=function(){t._noDom=1};this._onPanStartHandler_connect=u(y,"onPanStart",C);this._onZoomStartHandler_connect=u(y,"onZoomStart",C)}}else this._onZoomHandler_connect=u(y,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=u(y,"onPan",this,"_onPanHandler");
this._onExtentChangeHandler_connect=u(y,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var y=A.disconnect;y(this._onPanHandler_connect);y(this._onZoomHandler_connect);y(this._onScaleHandler_connect);y(this._onExtentChangeHandler_connect);y(this._onPanStartHandler_connect);y(this._onZoomStartHandler_connect);this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=
null},_onResizeHandler:function(y,u,t){y={width:u+"px",height:t+"px"};u=n.set;u(this._div,y);if("css-transforms"===this._map.navigationMode)for(this._active&&u(this._active,y),t=this._passives.length-1;0<=t;t--)u(this._passives[t],y)},_onExtentChangeHandler:function(y,u,t,C){u=this._map;var E=this._standby;clearTimeout(this._wakeTimer);this._wakeTimer=null;if(!u._isPanningOrZooming()){if("css-transforms"===u.navigationMode){if(t)for(C=this._passives.length-1;0<=C;C--){var F=this._passives[C];n.set(F,
l._css.names.transition,"none");F._marked?(this._passives.splice(C,1),F.parentNode&&F.parentNode.removeChild(F),d.destroy(F)):0<F.childNodes.length&&(F._multiply=F._multiply?c.multiply(F._matrix,F._multiply):F._matrix)}this._noDom=0;if(E&&E.length)for(C=E.length-1;0<=C;C--)F=E[C],n.set(F,"visibility","inherit"),this._popTile(F),E.splice(C,1)}this._fireUpdateStart();this._rrIndex=0;C=v.getCandidateTileInfo(u,this.tileInfo,y);y=u.__visibleDelta;if(!this._ct||C.lod.level!==this._ct.lod.level||t){F=C&&
this._ct&&C.lod.level!==this._ct.lod.level;this._ct=C;var G=this._tiles,H=this._tileIds,L=this._tileBounds,J=this._removeList,S=H.length;this._cleanUpRemovedImages();for(C=0;C<S;C++){E=H[C];var P=G[E];L[E]=H[C]=null;"css-transforms"===u.navigationMode&&F&&P.parentNode&&u.fadeOnZoom&&(P._fadeOut=F,P.parentNode._remove++);J.add(P)}t&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}C=y.x;t=y.y;"css-transforms"===u.navigationMode?(E={},E[l._css.names.transform]=l._css.translate(C,t),n.set(this._div,
E)):n.set(this._div,{left:C+"px",top:t+"px"});this.__coords_dx=C;this.__coords_dy=t;this._updateImages(new w(0,0,y.width,y.height));0===this._loadingList.count?(this._cleanUpRemovedImages(),this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0;t=this._tileW;G=this._tileH;y=new w(-y.x,-y.y,y.width,y.height);for(C=this._tileIds.length-1;0<=C;C--)(E=this._tileIds[C])?(F=this._tiles[E],H=f.getMarginBox(F),H=new w(H.l,H.t,t,G),"css-transforms"===u.navigationMode&&(H.x=F._left,H.y=F._top),y.intersects(H)?
this._tileBounds[E]=H:(this._loadingList.contains(E)&&this._popTile(F),d.destroy(F),this._tileIds.splice(C,1),delete this._tileBounds[E],delete this._tiles[E])):(this._tileIds.splice(C,1),delete this._tileBounds[E],delete this._tiles[E])}},_onPanHandler:function(y,u){var t=this._map,C=t.__visibleDelta.offset(u.x,u.y);this.__coords_dx=this.__coords_dy=0;"css-transforms"===t.navigationMode?(t={},t[l._css.names.transform]=l._css.translate(C.x,C.y),n.set(this._div,t),m("esri-mobile")||this._updateImages({x:-C.x,
y:-C.y,width:C.width,height:C.height})):(n.set(this._div,{left:C.x+"px",top:C.y+"px"}),this._updateImages({x:-C.x,y:-C.y,width:C.width,height:C.height}));0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(y,u){var t,C={},E=l._css.names,F=this._map,G=r.defaults.map.zoomDuration;for(t=this._passives.length-1;0<=t;t--){var H=this._passives[t];0===H.childNodes.length?(this._passives.splice(t,1),d.destroy(H)):("none"===H.style[E.transition]&&n.set(H,E.transition,
E.transformName+" "+G+"ms ease"),n.set(H,E.transition,u?"none":E.transformName+" "+G+"ms ease"),H._matrix=y,C[E.transform]=l._css.matrix(H._multiply?c.multiply(y,H._multiply):y),n.set(H,C))}this._active&&0===this._active.childNodes.length||(n.set(this._active,E.transition,u?"none":E.transformName+" "+G+"ms ease"),this._active._matrix=y,C[E.transform]=l._css.matrix(this._active._matrix),n.set(this._active,C),this._passives.push(this._active),C={position:"absolute",width:F.width+"px",height:F.height+
"px",overflow:"visible"},C[E.transition]=E.transformName+" "+G+"ms ease",n.set(this._active=d.create("div",null,this._div),C),this._active._remove=0,F.fadeOnZoom&&d.place(this._active,this._div,"first"))},_onZoomHandler:function(y,u,t){y=f.getMarginBox(this._div);t=t.offset(-y.l,-y.t);this._previousScale&&1!==u||(this._previousScale=1);var C,E=this._tileW*u,F=this._tileH*u,G=this._tileBounds,H=this._tiles,L=this._previousScale,J=this._multiple,S=n.set,P,Q;if((y=m("ie"))&&8>y)b.forEach(this._tileIds,
function(da){Q="";C=G[da];P=H[da].style.margin.split(" ");b.forEach(P,function(Y){""!==Q&&(Q+=" ");Y=parseFloat(Y);Q+=Y/L*u+"px"});S(H[da],{left:C.x-(E-C.width)*(t.x-C.x)/C.width+"px",top:C.y-(F-C.height)*(t.y-C.y)/C.height+"px",margin:1!==J&&-1===Q.indexOf("NaN")?Q:"",zoom:u})});else{var M=E*J,N=F*J,K,X;b.forEach(this._tileIds,function(da){Q="";C=G[da];K=C.x-(E-C.width)*(t.x-C.x)/C.width;X=C.y-(F-C.height)*(t.y-C.y)/C.height;P=H[da].style.margin.split(" ");b.forEach(P,function(Y){""!==Q&&(Q+=" ");
Y=parseFloat(Y);Q+=Y/L*u+"px"});S(H[da],{left:K+"px",top:X+"px",margin:1!==J&&-1===Q.indexOf("NaN")?Q:"",width:M+"px",height:N+"px"})})}this._previousScale=u},_updateImages:function(y){if(this._ct){var u=this._tileW,t=this._tileH,C=this._ct;var E=C.lod;C=C.tile;var F=C.offsets,G=C.coords,H=G.row;G=G.col;var L=E.level,J=this.opacity,S=this._tileIds,P=this._loadingList,Q=this._addImage,M=this._map.id,N=this.id,K=y.x,X=y.y,da=E.startTileRow,Y=E.endTileRow,aa=E.startTileCol,ca=E.endTileCol,I=b.indexOf,
T=F.x-this.__coords_dx,ba=F.y-this.__coords_dy;var pa=u-T+-y.x;var ya=t-ba+-y.y;var Da=Math.ceil;pa=0<pa?pa%u:u-Math.abs(pa)%u;ya=0<ya?ya%t:t-Math.abs(ya)%t;K=0<K?Math.floor((K+T)/u):Da((K-(u-T))/u);X=0<X?Math.floor((X+ba)/t):Da((X-(t-ba))/t);ba=K+Da((y.width-pa)/u);y=X+Da((y.height-ya)/t);if(this._wrap){var Ha=E._frameInfo;var ta=Ha[0];var xa=Ha[1];Ha=Ha[2]}for(ya=K;ya<=ba;ya++)for(K=X;K<=y;K++)Da=H+K,pa=G+ya,this._wrap&&(pa<xa?(pa%=ta,pa=pa<xa?pa+ta:pa):pa>Ha&&(pa%=ta)),!this._isExcluded(L,Da,pa)&&
Da>=da&&Da<=Y&&pa>=aa&&pa<=ca&&(E=M+"_"+N+"_tile_"+L+"_"+K+"_"+ya,-1===I(S,E)&&(P.add(E),S.push(E),Q(L,K,Da,ya,pa,E,u,t,J,C,F)))}},_cleanUpRemovedImages:function(){var y=this._removeList,u=d.destroy,t,C=l._css.names;y.forEach(function(F){F._fadeOut||(F.style.filter="",F.style.zoom=1,u(F))});if("css-transforms"===this._map.navigationMode)for(t=this._passives.length-1;0<=t;t--){var E=this._passives[t];0===E.childNodes.length?(this._passives.splice(t,1),u(E)):this._map.fadeOnZoom&&!E._marked&&E._remove===
E.childNodes.length&&(E._marked=1,2048>l._css.getScaleFromMatrix(n.get(E,C.transform))?(n.set(E,C.transition,"opacity 0.65s"),n.set(E,"opacity",0),A.disconnect(E._endHandle),E._endHandle=A.connect(E,C.endEvent,this._transitionEnd)):this._transitionEnd({propertyName:"opacity",target:E}))}y.clear()},_transitionEnd:function(y){var u=y.target;"opacity"===y.propertyName&&(A.disconnect(u._endHandle),u._endHandle=null,y=b.indexOf(this._passives,u),-1<y&&this._passives.splice(y,1),u.parentNode&&u.parentNode.removeChild(u),
d.destroy(u))},_addImage:function(y,u,t,C,E,F,G,H,L,J,S){if(this._patchIE)J=this._tiles[F]=d.create("div"),J.id=F,e.add(J,"layerTile"),n.set(J,{left:G*C-S.x+"px",top:H*u-S.y+"px",width:G+"px",height:H+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src\x3d'"+this.getTileUrl(y,t,E)+"', sizingMethod\x3d'scale')"}),1>L&&n.set(J,"opacity",L),y=J.appendChild(d.create("div")),n.set(y,{opacity:0,width:G+"px",height:H+"px"}),this._div.appendChild(J),J=null,this._loadingList.remove(F),this._fireOnUpdateEvent();
else{J=this._tiles[F]=d.create("img");var P=A.connect;J.id=F;J._uid=y+"_"+t+"_"+E;J.alt="";e.add(J,"layerTile");C=G*C-S.x;S=H*u-S.y;u=this._map;var Q=l._css.names;G={width:G+"px",height:H+"px",visibility:"hidden"};"css-transforms"===u.navigationMode?(G[Q.transform]=l._css.translate(C,S),n.set(J,G),J._left=C,J._top=S):(G.left=C+"px",G.top=S+"px",n.set(J,G));1>L&&n.set(J,"opacity",L);J._onload_connect=P(J,"onload",this,"_tileLoadHandler");J._onerror_connect=P(J,"onerror",a.hitch(this,"_tileErrorHandler",
t,E));J._onabort_connect=P(J,"onabort",this,"_tileAbortHandler");if(this.tileMap)this.tileMap.getTile(y,t,E,F,this._tileMapCallback);else if(F=this.getTileUrl(y,t,E,J))this._failedRequests&&this._failedRequests[F]?(n.set(J,this._failedRequests[F].css),J.src=this._failedRequests[F].src,this._multiple=parseInt(this._failedRequests[F].css.width)/this._tileW,this.isResampling=1!==this._multiple):(this._multiple=1,this.isResampling=!1,J.src=F);"css-transforms"===u.navigationMode?this._active.appendChild(J):
this._div.appendChild(J);J=null}},_tileMapCallback:function(y,u){if(!this.suspended){var t=this._tiles[u.id]||h.byId(u.id);var C=u.level+"_"+u.row+"_"+u.col;t&&t._uid===C?(this._multiple=2*(u.level-y.level)||1,this.isResampling=1!==this._multiple,C=this.tileMap.style(y,u),n.set(t,C),t.src=this.getTileUrl(y.level,y.row,y.col)):this._popTile(u)}},getTileUrl:function(y,u,t){},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},
_popTile:function(y){var u=A.disconnect;u(y._onload_connect);u(y._onerror_connect);u(y._onabort_connect);y._onload_connect=y._onerror_connect=y._onabort_connect=null;this._loadingList.remove(y.id);this._fireOnUpdateEvent()},_tileLoadHandler:function(y){y=y.currentTarget;this._noDom?this._standby.push(y):(n.set(y,"visibility","inherit"),this._popTile(y))},_tileAbortHandler:function(y){y=y.currentTarget;this.onError(Error("Unable to load tile: "+y.src));n.set(y,"visibility","hidden");this._popTile(y)},
_tileErrorHandler:function(y,u,t){t=t.currentTarget;var C=!0;if(this.tileMap||!this.resampling)C=!1;else{var E=new g(t.src);E=E.path.split("/");E=parseInt(E[E.length-3]);var F=this._ct.lod.level-E+1;this._multiple=Math.pow(2,F);if(E===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance)C=!1}C?(this.isResampling=!0,this._resample(t,y,u)):(this.onError(Error("Unable to load tile: "+t.src)),n.set(t,"visibility","hidden"),
this._popTile(t))},_resample:function(y,u,t){var C=(new g(y.src)).path.split("/"),E=this._multiple,F=parseInt(C[C.length-3])-1,G=parseInt(u/E),H=parseInt(t/E);C=t%E;var L=u%E;G=this.getTileUrl(F,G,H);u=this.getTileUrl(F+Math.log(E)/Math.LN2,u,t);E={width:this._tileW*E+"px",height:this._tileH*E+"px",margin:"-"+this._tileW*L+"px 0 0 -"+(this._tileH*C+"px")};this._failedRequests||(this._failedRequests={});this._failedRequests[u]={src:G,css:E};n.set(y,E);m("chrome")&&y.setAttribute("src",null);y.src=
G},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(y){if(this.opacity!=y)this.onOpacityChange(this.opacity=y)},onOpacityChange:function(){},_opacityChangeHandler:function(y){var u=n.set,t,C;if("css-transforms"===this._map.navigationMode){if(this._active){var E=this._active.childNodes;for(t=E.length-1;0<=t;t--)u(E[t],"opacity",y)}for(t=this._passives.length-
1;0<=t;t--)for(E=this._passives[t].childNodes,C=E.length-1;0<=C;C--)u(E[C],"opacity",y)}else for(E=this._div.childNodes,t=E.length-1;0<=t;t--)u(E[t],"opacity",y)},setExclusionAreas:function(y){this.exclusionAreas=y;if(this.loaded&&this._map&&this._map.loaded){var u=this._map.spatialReference,t=this.tileInfo,C=t.origin,E=t.lods,F=E[0].level,G=E[E.length-1].level,H,L,J;if(this.exclusionAreas&&this.exclusionAreas.length){this._exclusionsPerZoom=[];var S=0;for(H=y.length;S<H;S++){var P=y[S];if((J=P.geometry)&&
"extent"===J.type&&J.xmin<=J.xmax&&J.ymin<=J.ymax){if(!u.equals(J.spatialReference))if(u._canProject(J.spatialReference)){if(u.isWebMercator()){var Q=B.lngLatToXY(J.xmin,J.ymin);J=B.lngLatToXY(J.xmax,J.ymax)}else Q=B.xyToLngLat(J.xmin,J.ymin,!0),J=B.xyToLngLat(J.xmax,J.ymax,!0);J=new z(Q[0],Q[1],J[0],J[1],u)}else continue;var M=-1;if(P.minZoom&&-1!==P.minZoom)M=P.minZoom;else if(P.minScale&&-1!==P.minScale){var N=0;for(L=E.length;N<L;N++)if(E[N].scale<=P.minScale){M=E[N].level;break}}M=Math.max(M,
F);Q=-1;if(P.maxZoom&&-1!==P.maxZoom)Q=P.maxZoom;else if(P.maxScale&&-1!==P.maxScale)for(N=0,L=E.length;N<L;N++)if(E[N].scale<P.maxScale){Q=E[N-1].level;break}else if(E[N].scale===P.maxScale){Q=E[N].level;break}Q=-1===Q?G:Math.min(Q,G);for(P=M;P<=Q;P++){N=0;for(L=E.length;N<L;N++)if(E[N].level===P){var K=E[N];break}K&&(this._exclusionsPerZoom[P]||(this._exclusionsPerZoom[P]=[]),N=1/K.resolution/t.rows,L=1/K.resolution/t.cols,this._exclusionsPerZoom[P].push({rowFrom:Math.floor((C.y-J.ymax)*N),rowTo:Math.ceil((C.y-
J.ymin)*N),colFrom:Math.floor((J.xmin-C.x)*L),colTo:Math.ceil((J.xmax-C.x)*L)}))}}}}else this._exclusionsPerZoom=null;this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}},_isExcluded:function(y,u,t){var C;if(!this._exclusionsPerZoom)return!1;var E=this._exclusionsPerZoom[y];if(!E)return!1;var F=0;for(C=E.length;F<C;F++)if(y=E[F],u>=y.rowFrom&&u<y.rowTo&&t>=y.colFrom&&t<y.colTo)return!0;return!1}});a.setObject("layers.TiledMapServiceLayer",D,l);return D})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel",
"dojo/_base/array","./_base"],function(D,A,a){a.ArrayList=function(b){var g=[];b&&(g=g.concat(b));this.count=g.length;this.add=function(d){g.push(d);this.count=g.length};this.addRange=function(d){if(d.getIterator)for(d=d.getIterator();!d.atEnd();)this.add(d.get());else for(var e=0;e<d.length;e++)g.push(d[e]);this.count=g.length};this.clear=function(){g.splice(0,g.length);this.count=0};this.clone=function(){return new a.ArrayList(g)};this.contains=function(d){for(var e=0;e<g.length;e++)if(g[e]==d)return!0;
return!1};this.forEach=function(d,e){D.forEach(g,d,e)};this.getIterator=function(){return new a.Iterator(g)};this.indexOf=function(d){for(var e=0;e<g.length;e++)if(g[e]==d)return e;return-1};this.insert=function(d,e){g.splice(d,0,e);this.count=g.length};this.item=function(d){return g[d]};this.remove=function(d){d=this.indexOf(d);0<=d&&g.splice(d,1);this.count=g.length};this.removeAt=function(d){g.splice(d,1);this.count=g.length};this.reverse=function(){g.reverse()};this.sort=function(d){d?g.sort(d):
g.sort()};this.setByIndex=function(d,e){g[d]=e;this.count=g.length};this.toArray=function(){return[].concat(g)};this.toString=function(d){return g.join(d||",")}};return a.ArrayList})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(D,A,a){D=A.getObject("dojox.collections",!0);D.DictionaryEntry=function(b,g){this.key=b;this.value=g;this.valueOf=function(){return this.value};this.toString=function(){return String(this.value)}};D.Iterator=
function(b){var g=0;this.element=b[g]||null;this.atEnd=function(){return g>=b.length};this.get=function(){return this.atEnd()?null:this.element=b[g++]};this.map=function(d,e){return a.map(b,d,e)};this.reset=function(){g=0;this.element=b[g]}};D.DictionaryIterator=function(b){var g=[],d={},e;for(e in b)d[e]||g.push(b[e]);var f=0;this.element=g[f]||null;this.atEnd=function(){return f>=g.length};this.get=function(){return this.atEnd()?null:this.element=g[f++]};this.map=function(n,h){return a.map(g,n,
h)};this.reset=function(){f=0;this.element=g[f]}};return D})},"esri/layers/TileMap":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/io-query ../request ../urlUtils".split(" "),function(D,A,a,b,g,d,e){return D(null,{declaredClass:"esri.layers.TileMap",constructor:function(f){this.layer=f;this._tileMaps={}},getTile:function(f,n,h,k,c){f={id:k,level:f,row:n,col:h};n=this._getResamplingBudget();0<n?this._process({tile:f,requestedTile:f,callback:c,resamplingBudget:n}):
(c||this.callback).call(this,f,f)},statusOf:function(f,n,h){var k=this._getResamplingBudget();f={level:f,row:n,col:h};if(0===k)return 1;for(;0<=k;){n=this._tileToTileMap(f);if(!this._tileMaps[n.uid])return-1;n=this._tileMaps[n.uid];if(!n.promise.isFulfilled())return-1;if(this._isTileAvailable(f,n))return 1;f=this._parentTile(f);if(!f)break;k--}return 0},style:function(f,n){if(f.level!==n.level||f.row!==n.row||f.col!==n.col){var h=this.layer.tileInfo,k=h.lods,c=h.cols;h=h.rows;for(var l,r,m=k.length-
1;!l||!r;)l||k[m].level!==f.level||(l=k[m]),r||k[m].level!==n.level||(r=k[m]),m--;l=Math.round(l.resolution/r.resolution);r=n.col%l*-1*c;k=n.row%l*-1*h;l={width:c*l+"px",height:h*l+"px",margin:k+"px 0 0 "+r+"px","will-change":"transform"};r=0===r?0:-1*r;k=0===k?0:-1*k;l.clip="rect("+k+"px,"+(r+c)+"px,"+(k+h)+"px,"+r+"px)";return l}},_process:function(f){var n=f.tile,h=this._tileToTileMap(n),k=this._parentTile(n);this._getTileMap(h).then(A.hitch(this,function(c){h=c;this._isTileAvailable(n,h)?(f.callback||
this.callback).call(this,n,f.requestedTile):0<f.resamplingBudget&&k?(f.resamplingBudget--,f.tile=k,this._process(f)):(f.callback||this.callback).call(this,f.requestedTile,f.requestedTile)}),A.hitch(this,function(){(f.callback||this.callback).call(this,f.requestedTile,f.requestedTile)}))},_getTileMap:function(f){var n,h,k=null;if(this._tileMaps[f.uid]){f=this._tileMaps[f.uid];var c=f.promise}else{this._tileMaps[f.uid]=f;var l=new b;d({url:this._getTileMapUrl(f.level,f.row,f.col),handleAs:"json",content:{f:"json"},
callbackParamName:"callback",timeout:3E3,load:function(r){A.mixin(f,r);if(f.data&&0<f.data.length){h=f.data.length;if(1===h)k=f.data[0];else for(k=f.data[0],n=1;n<h;n++)if(f.data[n]!==k){k=null;break}null!==k&&(delete f.data,f.value=k);null==f.valid&&(f.valid=!0)}l.resolve(f)},error:function(r){r&&422===r.code?(A.mixin(f,{location:{top:f.row,left:f.col,width:8,height:8},valid:!0,value:0}),l.resolve(f)):l.reject()}});c=f.promise=l.promise}return c},_parentTile:function(f){var n=this.layer.tileInfo.lods,
h,k,c=null;a.some(n,function(l,r){return f.level===l.level?(h=l,k=r,!0):!1});0<k&&(n=n[k-1],c={id:f.id,level:n.level,row:Math.floor(f.row*h.resolution/n.resolution+.01),col:Math.floor(f.col*h.resolution/n.resolution+.01)});return c},_tileToTileMap:function(f){var n=8*Math.floor(f.row/8),h=8*Math.floor(f.col/8);return{uid:f.level+"_"+n+"_"+h,level:f.level,row:n,col:h}},_isTileAvailable:function(f,n){if(n.valid)if(void 0!==n.value)var h=n.value;else{h=n.location.left;var k=n.location.top;h=(f.row-k)*
n.location.width+(f.col-h);h=h<n.data.length?n.data[h]:0}else h=0;return h},_getTileMapUrl:function(f,n,h){var k=this.layer,c=k.tileServers,l=k._getToken(),r=k._url.query;f=(c?c[n%c.length]:k._url.path)+"/tilemap/"+f+"/"+n+"/"+h+"/8/8";r&&(f+="?"+g.objectToQuery(r));!l||r&&r.token||(f+=(-1===f.indexOf("?")?"?":"\x26")+"token\x3d"+l);return f=k.addTimestampToURL(f)},_getResamplingBudget:function(){var f=this.layer,n=0;f.resampling&&(n=f._resamplingTolerance,null===n||void 0===n)&&(n=f.tileInfo.lods.length);
return n}})})},"esri/layers/MapImageLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-style ../kernel ../config ../sniff ../domUtils ../geometry/Point ../geometry/webMercatorUtils ./layer".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l){var r=D([l],{declaredClass:"esri.layers.MapImageLayer","-chains-":{constructor:"manual"},constructor:function(m){this.inherited(arguments,[null,m]);this._mapImages=[];var q=a.hitch;this._panStart=
q(this,this._panStart);this._pan=q(this,this._pan);this._extentChange=q(this,this._extentChange);this._zoom=q(this,this._zoom);this._zoomStart=q(this,this._zoomStart);this._scale=q(this,this._scale);this._resize=q(this,this._resize);A.connect(this,"onSuspend",this,this._onSuspend);A.connect(this,"onResume",this,this._onResume);this.loaded=!0;this.onLoad(this)},opacity:1,addImage:function(m){var q=this._mapImages.push(m);--q;m._idx=q;m._layer=this;this._div&&this._createImage(m,q)},removeImage:function(m){if(m){var q=
m._idx,v=this._mapImages;if(v[q]===m){delete v[q];if(q=m._node)this._clearEvents(q),q.e_idx=q.e_bl=q.e_tr=q.e_l=q.e_t=q.e_w=q.e_h=null,q.parentNode&&(q.parentNode.removeChild(q),g.destroy(q));m._node=m._idx=m._layer=null}}},removeAllImages:function(){var m=this._mapImages,q,v=m.length;for(q=0;q<v;q++){var B=m[q];B&&this.removeImage(B)}this._mapImages=[]},getImages:function(){var m=this._mapImages,q=[],v,B=m.length;for(v=0;v<B;v++)m[v]&&q.push(m[v]);return q},setOpacity:function(m){this.opacity!=m&&
(this._opacityChanged(this.opacity=m),this.onOpacityChange())},onOpacityChange:function(){},_opacityChanged:function(m){var q=this._div;if(q)if(!n("ie")||8<n("ie"))d.set(q,"opacity",m);else{var v=q.childNodes;var B=v.length;for(q=0;q<B;q++)d.set(v[q],"opacity",m)}},_createImage:function(m,q){var v=g.create("img");d.set(v,{position:"absolute"});1>m.opacity?d.set(v,"opacity",m.opacity):8>=n("ie")&&d.set(v,"opacity",this.opacity);!m.rotation||9>n("ie")||d.set(v,e._css.names.transform,e._css.rotate(360-
m.rotation));m._node=v;v.e_idx=q;v.e_layer=this;v.e_load=A.connect(v,"onload",r.prototype._imageLoaded);v.e_error=A.connect(v,"onerror",r.prototype._imageError);v.e_abort=A.connect(v,"onabort",r.prototype._imageError);v.src=m.href},_imageLoaded:function(m,q){var v=q||m.target||m.currentTarget,B=v.e_layer,w=B._mapImages[v.e_idx],z=B._map;z&&(z.__zooming||z.__panning||!B._sr)?B._standby.push(v):(B._clearEvents(v),w&&w._node===v&&z&&B._attach(w))},_imageError:function(m){m=m.target||m.currentTarget;
var q=m.e_layer,v=q._mapImages[m.e_idx];q._clearEvents(m);v&&(v._node=null)},_clearEvents:function(m){var q=A.disconnect;q(m.e_load);q(m.e_error);q(m.e_abort);m.e_load=m.e_error=m.e_abort=m.e_layer=null},_attach:function(m){var q=m.extent,v=q.spatialReference,B=this._sr,w=this._div,z=m._node,x=new k({x:q.xmin,y:q.ymin,spatialReference:v});q=new k({x:q.xmax,y:q.ymax,spatialReference:v});B.equals(v)||(B.isWebMercator()&&4326===v.wkid?(x=c.geographicToWebMercator(x),q=c.geographicToWebMercator(q)):v.isWebMercator()&&
4326===B.wkid&&(x=c.webMercatorToGeographic(x),q=c.webMercatorToGeographic(q)));z.e_bl=x;z.e_tr=q;m.visible&&(this._setPos(z,w._left,w._top),(this._active||w).appendChild(z))},_setPos:function(m,q,v){var B=m.e_bl,w=m.e_tr,z=this._map;B=z.toScreen(B);w=z.toScreen(w);q=B.x-q;v=w.y-v;var x=Math.abs(w.x-B.x);B=Math.abs(B.y-w.y);w={width:x+"px",height:B+"px"};var y=this._mapImages[m.e_idx];"css-transforms"===z.navigationMode?w[e._css.names.transform]=e._css.translate(q,v)+(y.rotation?" "+e._css.rotate(360-
y.rotation):""):(w.left=q+"px",w.top=v+"px");d.set(m,w);m.e_l=q;m.e_t=v;m.e_w=x;m.e_h=B},managedSuspension:!0,_setMap:function(m,q){this.inherited(arguments);var v=this._div=g.create("div",null,q),B=e._css.names,w={position:"absolute"},z=m.__visibleDelta;if(!n("ie")||8<n("ie"))w.opacity=this.opacity;"css-transforms"===m.navigationMode?(w[B.transform]=e._css.translate(z.x,z.y),d.set(v,w),v._left=z.x,v._top=z.y,w={position:"absolute",width:m.width+"px",height:m.height+"px",overflow:"visible"},this._active=
g.create("div",null,v),d.set(this._active,w),this._passive=g.create("div",null,v),d.set(this._passive,w)):(v._left=0,v._top=0,d.set(v,w));this._standby=[];B=this._mapImages;z=B.length;for(w=0;w<z;w++){var x=B[w];x._node||this._createImage(x,x._idx)}h.hide(v);return v},_unsetMap:function(m,q){this._disconnect();var v=this._div;if(v){var B=this._mapImages,w,z=B.length;for(w=0;w<z;w++){var x=B[w];if(x){var y=x._node;y&&(this._clearEvents(y),y.e_idx=y.e_bl=y.e_tr=y.e_l=y.e_t=y.e_w=y.e_h=null);x._node=
null}}q.removeChild(v);g.destroy(v)}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;this.inherited(arguments)},_onSuspend:function(){this._disconnect();h.hide(this._div)},_onResume:function(m){m.firstOccurrence&&(this._sr=this._map.spatialReference,this._processStandbyList());m=this._map;var q=this._div,v=m.__visibleDelta;"css-transforms"===m.navigationMode&&(q._left=v.x,q._top=v.y,d.set(q,e._css.names.transform,e._css.translate(q._left,q._top)));this._redraw("css-transforms"===
m.navigationMode);this._connect(m);h.show(q)},_connect:function(m){if(!this._connections){var q=A.connect,v="css-transforms"===m.navigationMode;this._connections=[q(m,"onPanStart",this._panStart),q(m,"onPan",this._pan),q(m,"onExtentChange",this._extentChange),v&&q(m,"onZoomStart",this._zoomStart),v?q(m,"onScale",this._scale):q(m,"onZoom",this._zoom),v&&q(m,"onResize",this._resize)];v&&this._resize(m.extent,m.width,m.height)}},_disconnect:function(){this._connections&&(b.forEach(this._connections,
A.disconnect),this._connections=null)},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top},_pan:function(m,q){var v=this._div;v._left=this._panL+q.x;v._top=this._panT+q.y;"css-transforms"===this._map.navigationMode?d.set(v,e._css.names.transform,e._css.translate(v._left,v._top)):d.set(v,{left:v._left+"px",top:v._top+"px"})},_extentChange:function(m,q,v){v?this._redraw("css-transforms"===this._map.navigationMode):q&&this._pan(m,q);this._processStandbyList()},_processStandbyList:function(){var m,
q=this._standby;if(q&&q.length)for(m=q.length-1;0<=m;m--)this._imageLoaded(null,q[m]),q.splice(m,1)},_redraw:function(m){if(m){m=this._passive;var q=e._css.names;d.set(m,q.transition,"none");this._moveImages(m,this._active);d.set(m,q.transform,"none")}m=this._active||this._div;q=this._div._left;var v=this._div._top,B,w=m.childNodes.length;for(B=0;B<w;B++){var z=m.childNodes[B];this._setPos(z,q,v)}},_zoom:function(m,q,v){m=this._div;var B=m._left,w=m._top,z,x=m.childNodes.length;for(z=0;z<x;z++){var y=
m.childNodes[z];var u=y.e_w*q,t=y.e_h*q,C=(v.x-B-y.e_l)*(u-y.e_w)/y.e_w,E=(v.y-w-y.e_t)*(t-y.e_h)/y.e_h;C=isNaN(C)?0:C;E=isNaN(E)?0:E;d.set(y,{left:y.e_l-C+"px",top:y.e_t-E+"px",width:u+"px",height:t+"px"})}},_zoomStart:function(){this._moveImages(this._active,this._passive)},_moveImages:function(m,q){var v=m.childNodes;var B=v.length;if(0<B)for(--B;0<=B;B--)q.appendChild(v[B])},_scale:function(m,q){var v=e._css.names,B=this._passive;d.set(B,v.transition,q?"none":v.transformName+" "+f.defaults.map.zoomDuration+
"ms ease");({})[v.transform]=e._css.matrix(m);d.set(B,v.transform,e._css.matrix(m))},_resize:function(m,q,v){d.set(this._active,{width:q+"px",height:v+"px"});d.set(this._passive,{width:q+"px",height:v+"px"})}});a.setObject("layers.MapImageLayer",r,e);return r})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../urlUtils ../SpatialReference ../geometry/Extent ./TiledMapServiceLayer ./TileInfo".split(" "),function(D,A,a,b,g,d,e,f,n){D=D(f,{declaredClass:"esri.layers.OpenStreetMapLayer",
constructor:function(h){this.spatialReference=new d({wkid:102100});this.tileInfo=new n({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-2.0037508342787E7,y:2.0037508342787E7},spatialReference:{wkid:102100},lods:[{level:0,scale:5.91657527591555E8,resolution:156543.033928},{level:1,scale:2.95828763795777E8,resolution:78271.5169639999},{level:2,scale:1.47914381897889E8,resolution:39135.7584820001},{level:3,scale:7.3957190948944E7,resolution:19567.8792409999},{level:4,scale:3.6978595474472E7,
resolution:9783.93962049996},{level:5,scale:1.8489297737236E7,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},
{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817},{level:19,scale:1128.497176,resolution:.298582141647617}]});this.fullExtent=new e({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,
spatialReference:{wkid:102100}});this.initialExtent=new e({xmin:-2.003750834E7,ymin:-2.003750834E7,xmax:2.003750834E7,ymax:2.003750834E7,spatialReference:{wkid:102100}});this.tileServers=h&&h.tileServers||["//a.tile.openstreetmap.org","//b.tile.openstreetmap.org","//c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=h?h.displayLevels:null;this.copyright=h&&h.copyright||"Map data \u00a9 OpenStreetMap contributors, CC-BY-SA";this.loaded=!0;this.onLoad(this);(h=
h&&h.loadCallback)&&h(this)},getTileUrl:function(h,k,c){h=this.tileServers[k%this.serversLength]+"/"+h+"/"+c+"/"+k+".png";h=g.normalize(h);h=this.addTimestampToURL(h);return g.addProxy(h)}});A.setObject("layers.OpenStreetMapLayer",D,b);return D})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry ../kernel ../lang ../domUtils ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/normalizeUtils ../InfoWindowBase ../PopupBase dojo/i18n!../nls/jsapi dojo/NodeList-dom ./PopupTemplate ./PopupRenderer".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E){D=D([t,C,f],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1E3,location:null,constructor:function(F,G){this.initialize();A.mixin(this,F);this.domNode=h.byId(G);var H=this._nls=A.mixin({},E.widgets.popup),L=this.domNode;c.add(L,"esriPopup");(this._isRTL=
!r.isBodyLtr())&&m.set(L,"direction","rtl");k.set(L,"innerHTML","\x3cdiv class\x3d'esriPopupWrapper' style\x3d'position: absolute;'\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'titlePane'\x3e\x3cdiv class\x3d'spinner hidden' title\x3d'"+H.NLS_searching+"...'\x3e\x3c/div\x3e\x3cdiv class\x3d'title'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton prev hidden' title\x3d'"+H.NLS_prevFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton next hidden' title\x3d'"+H.NLS_nextFeature+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton maximize' title\x3d'"+
H.NLS_maximize+"'\x3e\x3c/div\x3e\x3cdiv class\x3d'titleButton close' title\x3d'"+H.NLS_close+"'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer content'\x3e\x3cdiv class\x3d'contentPane'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'sizer'\x3e\x3cdiv class\x3d'actionsPane'\x3e\x3cdiv class\x3d'actionList hidden'\x3e\x3ca title\x3d'"+H.NLS_zoomTo+"' class\x3d'action zoomTo' href\x3d'javascript:void(0);'\x3e\x3cspan\x3e"+H.NLS_zoomTo+"\x3c/span\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'pointer hidden'\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d'outerPointer hidden'\x3e\x3c/div\x3e");
this._sizers=g.query(".sizer",L);H=g.query(".titlePane",L)[0];this._title=g.query(".title",H)[0];this._prevFeatureButton=g.query(".prev",H)[0];this._nextFeatureButton=g.query(".next",H)[0];this._maxButton=g.query(".maximize",H)[0];this._spinner=g.query(".spinner",H)[0];this._contentPane=g.query(".contentPane",L)[0];this._positioner=g.query(".esriPopupWrapper",L)[0];this._pointer=g.query(".pointer",L)[0];this._outerPointer=g.query(".outerPointer",L)[0];this._actionList=g.query(".actionsPane .actionList",
L)[0];this._contentUpdateHandles={};this._eventConnections=[b.connect(g.query(".close",H)[0],"onclick",this,this.hide),b.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),b.connect(this._nextFeatureButton,"onclick",this,this.selectNext),b.connect(this._maxButton,"onclick",this,this._toggleSize),b.connect(g.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),b.connect(this,"onClearFeatures",this,this._featuresCleared),b.connect(this,"onSelectionChange",this,this._featureSelected),
b.connect(this,"onDfdComplete",this,this._updateUI)];d("esri-touch")&&(L=w.setScrollable(this._contentPane),this._eventConnections.push(L[0],L[1]));this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(F){this.inherited(arguments);l.place(this.domNode,F.root);this.highlight&&this.enableHighlight(F);this._maxHeight=m.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments)},setTitle:function(F){this.popupWindow&&
(B.isDefined(F)&&""!==F||(F="\x26nbsp;"),this.destroyDijits(this._title),this.place(F,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(F){this.popupWindow&&(B.isDefined(F)&&""!==F||(F="\x26nbsp;"),this._destroyContent(),this.place(F,this._contentPane),this.isShowing&&(this._startupContent(),this.reposition()))},show:function(F,G){if(this.popupWindow)if(this._delayHide=!1,F){var H=this.map;if(F.spatialReference){this.location=F;var L=H.toScreen(F)}else this.location=
H.toMap(F),L=F;var J=H._getFrameWidth();if(-1!==J&&(L.x%=J,0>L.x&&(L.x+=J),H.width>J))for(H=(H.width-J)/2;L.x<H;)L.x+=J;this._maximized?this.restore():this._setPosition(L);G&&G.closestFirst&&this.showClosestFirst(this.location);this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this._startupContent(),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),
this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(F,G){this.popupWindow&&(this._sizers.style({width:F+"px"}),m.set(this._contentPane,"maxHeight",G+"px"),this._maxHeight=G,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this.location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this.location))},addActions:function(F){return a.map(F,function(G){var H=l.create("a",{href:"javascript:void(0);",className:"action "+
G.className,title:G.title,innerHTML:G.title},this._actionList);b.connect(H,"onclick",G.callback);return{action:G,node:H}},this)},removeActions:function(F){a.forEach(F,function(G){l.destroy(G.node)})},getCurrentAnchor:function(){return this._anchor},maximize:function(){var F=this.map;if(F&&!this._maximized&&this.popupWindow){this._maximized=!0;var G=this._maxButton;c.remove(G,"maximize");c.add(G,"restore");k.set(G,"title",this._nls.NLS_restore);G=this.marginLeft;var H=this.marginTop,L=F.width-2*G;
F=F.height-2*H;m.set(this.domNode,{left:this._isRTL?null:G+"px",right:this._isRTL?G+"px":null,top:H+"px",bottom:null});m.set(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=m.get(this._sizers[0],"width");this._savedHeight=m.get(this._contentPane,"maxHeight");this._sizers.style({width:L+"px"});m.set(this._contentPane,{maxHeight:F-65+"px",height:F-65+"px"});this._showPointer("");this._unfollowMap();c.add(this.domNode,"esriPopupMaximized");this.onMaximize()}},restore:function(){if(this.map&&
this._maximized&&this.popupWindow){this._maximized=!1;var F=this._maxButton;c.remove(F,"restore");c.add(F,"maximize");k.set(F,"title",this._nls.NLS_maximize);m.set(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this.location);this._followMap();c.remove(this.domNode,"esriPopupMaximized");this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap();this.cleanup();this.isShowing&&this.hide();this.destroyDijits(this._title);
this._destroyContent();a.forEach(this._eventConnections,b.disconnect);l.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(F,G){this._transientAnchor=
G&&G.anchor;this.inherited(arguments);this._updateUI()},clearFeatures:function(F){F||(this._transientAnchor=null);this.inherited(arguments)},postscript:null,_highlightSetter:function(F){var G=this.highlight,H=this.map;this.highlight=F;if(H&&F!==G)if(F){if(this.enableHighlight(H),F=this.features&&this.features[this.selectedIndex])this.updateHighlight(H,F),this.showHighlight()}else this.disableHighlight(H)},_pagingControlsSetter:function(F){var G=this.pagingControls,H=this.map;this.pagingControls=F;
H&&F!==G&&this._updatePagingControls()},_pagingInfoSetter:function(F){var G=this.pagingInfo,H=this.map;this.pagingInfo=F;H&&F!==G&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(F){var G=this.popupWindow,H=this.map;this.popupWindow=F;H&&F!==G&&(F?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(F){var G=this.anchor;this.anchor=F;this.map&&F!==G&&this.reposition()},_startupContent:function(){var F=this._contentPane;
this.startupDijits(F);a.forEach(this._getPopupRendererDijits(F),function(G){if(!this._contentUpdateHandles[G.id]){var H=G.on("content-update",A.hitch(this,function(){this.reposition()}));this._contentUpdateHandles[G.id]=H}},this)},_destroyContent:function(){var F=this._contentPane;a.forEach(this._getPopupRendererDijits(F),function(G){var H=this._contentUpdateHandles[G.id];H&&(H.remove(),delete this._contentUpdateHandles[G.id])},this);this.destroyDijits(F)},_getPopupRendererDijits:function(F){F=this.getDijits(F);
return F=a.filter(F,function(G){return G&&G.set&&/_PopupRenderer/.test(G.declaredClass)})},_featuresCleared:function(){this.setTitle("\x26nbsp;");this.setContent("\x26nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight()},_featureSelected:function(){this._updateUI();this._updateWindow()},_updateWindow:function(){var F=this.selectedIndex;if(0<=F){var G=this.features[F].getContent();if(!this.titleInBody&&G&&A.isString(G.id)){var H=q.byId(G.id);H&&H.set&&/_PopupRenderer/.test(H.declaredClass)&&
H.set("showTitle",!1)}this.setContent(G);this.updateHighlight(this.map,this.features[F]);this.showHighlight()}},_toggleVisibility:function(F){this._setVisibility(F);this.isShowing=F},_setVisibility:function(F){c.toggle(this.domNode,"esriPopupVisible",F);c.toggle(this.domNode,"esriPopupHidden",!F)},_waitAndHide:function(F){var G=this;this._delayHide=!0;setTimeout(function(){G._delayHide&&(G._delayHide=!1,G.hide())},F)},_followMap:function(){this._unfollowMap();var F=this.map;this._handles=[b.connect(F,
"onPanStart",this,this._onPanStart),b.connect(F,"onPan",this,this._onPan),b.connect(F,"onZoomStart",this,this._onZoomStart),b.connect(F,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var F=this._handles;F&&(a.forEach(F,b.disconnect),this._handles=null)},_onPanStart:function(){var F=this.domNode.style;this._panOrigin={left:F.left,top:F.top,right:F.right,bottom:F.bottom}},_onPan:function(F,G){var H=this._panOrigin,L=G.x,J=G.y,S=H.left,P=H.top,Q=H.right;H=H.bottom;S&&(S=parseFloat(S)+
L+"px");P&&(P=parseFloat(P)+J+"px");Q&&(Q=parseFloat(Q)-L+"px");H&&(H=parseFloat(H)-J+"px");m.set(this.domNode,{left:S,top:P,right:Q,bottom:H})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(F,G,H){H&&(this._setVisibility(!0),this.show(this._targetLocation||this.location));this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_getTargetAnchor:function(){return this._transientAnchor||this.anchor},_setPosition:function(F){var G=
F.x,H=F.y;F=this.offsetX||0;var L=this.offsetY||0,J=0,S=0,P=this.map,Q=P.position.x,M=P.position.y,N=P.width,K=P.height;P="Left";var X="bottom",da="right",Y="top",aa=r.getContentBox(this._positioner),ca=aa.w/2,I=aa.h/2,T=m.get(this._sizers[0],"height")+this._maxHeight+m.get(this._sizers[2],"height"),ba=T/2,pa=0,ya=0,Da=N,Ha=K,ta=G,xa=H,ra=this._getTargetAnchor().toLowerCase();if("auto"===ra){if(ra=e.getBox)ra=ra(),pa=Math.max(ra.l,Q),Da=Math.min(ra.l+ra.w,Q+N),ya=Math.max(ra.t,M),Ha=Math.min(ra.t+
ra.h,M+K),ta+=Q,xa+=M;Q=xa-ya>=T;M=Ha-xa>=T;N=Da-ta>=aa.w;aa=ta-pa>=aa.w;xa-ya>ba&&Ha-xa>=ba&&(N?(X="",P="Left",Y="",da="right"):aa&&(X="",P="Right",Y="",da="left"));P&&X&&ta-pa>ca&&Da-ta>=ca&&(Q?(P="",X="bottom",da="",Y="top"):M&&(P="",X="top",da="",Y="bottom"));P&&X&&(N&&Q?(P="Left",X="bottom",da="right",Y="top"):N&&M?(P="Left",X="top",da="right",Y="bottom"):aa&&M?(P="Right",X="top",da="left",Y="bottom"):aa&&Q&&(P="Right",X="bottom",da="left",Y="top"));this._anchor=Y&&da?Y+"-"+da:Y||da}else X=P=
"",-1!==ra.indexOf("top")?X="bottom":-1!==ra.indexOf("bottom")&&(X="top"),-1!==ra.indexOf("left")?P="Right":-1!==ra.indexOf("right")&&(P="Left"),this._anchor=this._getTargetAnchor();da=X+P;switch(da){case "top":case "bottom":S=14;break;case "Left":case "Right":J=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":S=14,J=-16}m.set(this.domNode,{left:G+"px",top:H+"px",right:null,bottom:null});G={left:null,right:null,top:null,bottom:null};P?G[P.toLowerCase()]=J+F+"px":G.left=
-ca+"px";X?G[X]=S+L+"px":G.top=-I+"px";m.set(this._positioner,G);this._showPointer(da)},_showPointer:function(F){c.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" "));c.remove(this._outerPointer,["right","left","hidden"]);"Right"===F||"Left"===F?(F=F.toLowerCase(),c.add(this._outerPointer,F)):c.add(this._pointer,F)},_setPagerCallbacks:function(F,G,H){if(this.pagingControls&&(F!==this||this._pagerScope&&this._pagerScope!==this)&&F!==this._pagerScope){this._pagerScope=
F;F===this&&(G=this.selectPrevious,H=this.selectNext);var L=this._eventConnections;b.disconnect(L[1]);b.disconnect(L[2]);G&&(L[1]=b.connect(this._prevFeatureButton,"onclick",F,G));H&&(L[2]=b.connect(this._nextFeatureButton,"onclick",F,H))}},_getLocation:function(F){var G=F&&F.geometry;if(G)switch(G.type){case "point":var H=G;if(F.isAggregate()){F=F.getChildGraphics();var L=F[0];F=(L=L.geometry&&L.geometry.spatialReference)&&new y({points:a.map(F,function(J){J=J.geometry;return[J.x,J.y]}),spatialReference:L.toJson()});
L=u.getDenormalizedExtent(F)}break;case "multipoint":H=G.getPoint(0);L=u.getDenormalizedExtent(G);break;case "polyline":case "polygon":H=G.getPoint(0,0),L=u.getDenormalizedExtent(G)}return[H,L]},_zoomToFeature:function(F){F.preventDefault();var G=this.features,H=this.selectedIndex;F=this.map;if(G)if(H=this._getLocation(G[H]),G=H[0],H=H[1],G||(G=this.location),H&&H.intersects(this.location)||(this.location=G),H&&H.getWidth()&&H.getHeight())F.setExtent(H,!0);else{var L=F.getNumLevels();H=F.getLevel();
var J=F.getMaxZoom(),S=this.zoomFactor||1;0<L?H!==J&&(L=H+S,L>J&&(L=J),F.navigationManager._wheelZoom({value:L-H,mapPoint:G},!0)):F.navigationManager._wheelZoom({value:1/Math.pow(2,S)*2,mapPoint:G},!0)}},_updatePagingControls:function(){var F=this._prevFeatureButton,G=this._nextFeatureButton,H=this.selectedIndex,L=this.features?this.features.length:0;this.pagingControls&&1<L?(0===H?c.add(F,"hidden"):c.remove(F,"hidden"),H===L-1?c.add(G,"hidden"):c.remove(G,"hidden")):(c.add(F,"hidden"),c.add(G,"hidden"))},
_updatePagingInfo:function(){var F=this.features?this.features.length:0,G=this._nls,H="\x26nbsp;";this.pagingInfo&&1<F&&G.NLS_pagingInfo&&(H=B.substitute({index:this.selectedIndex+1,total:F},G.NLS_pagingInfo));F&&(G=this.getSelectedFeature(),F=G.getInfoTemplate(),G=G.getTitle(),F&&!/esri\.InfoTemplate/.test(F.declaredClass)&&this.titleInBody||!G||(H=G+("\x26nbsp;"===H?"":" "+H)));this.setTitle(H)},_updateUI:function(){if(this.popupWindow){var F=this.features,G=this.deferreds,H=F?F.length:0,L=this._spinner,
J=this._actionList,S=this._nls;this._updatePagingControls();this._updatePagingInfo();H?c.remove(J,"hidden"):c.add(J,"hidden");G&&G.length?F?c.remove(L,"hidden"):this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+S.NLS_searching+"...\x3c/div\x3e"):c.add(L,"hidden");H||G&&G.length?this._delayHide=!1:(this.setContent("\x3cdiv style\x3d'text-align: center;'\x3e"+S.NLS_noInfo+".\x3c/div\x3e"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay))}}});A.setObject("dijit.Popup",D,v);return D})},
"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry ./kernel ./lang ./geometry/ScreenPoint".split(" "),function(D,A,a,b,g,d,e,f,n,h,k){D=D(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var c=A.hitch;this.__set_title=c(this,this.__set_title);this.__err_title=c(this,this.__err_title);this.__set_content=c(this,this.__set_content);this.__err_content=c(this,this.__err_content)},
setMap:function(c){this.map=c},unsetMap:function(c){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(c,l){h.isDefined(c)?A.isObject(c)?d.place(c,l,"only"):l.innerHTML=c:l.innerHTML=""},startupDijits:function(c){this._processDijits(c)},destroyDijits:function(c){this._processDijits(c,!0)},getDijits:function(c){var l=[];c&&1===c.children.length&&(c=c.children[0])&&(l=(l=f.byNode(c))?
[l]:f.findWidgets(c));return l},_processDijits:function(c,l){var r=this.getDijits(c);a.forEach(r,function(m){if(l){if(m._started&&!m._destroyed)try{m.destroyRecursive?m.destroyRecursive():m.destroy&&m.destroy()}catch(q){}}else if(!m._started)try{m.startup()}catch(q){}})},__registerMapListeners:function(){this.__unregisterMapListeners();var c=this.map;this.__handles=[b.connect(c,"onPan",this,this.__onMapPan),b.connect(c,"onZoomStart",this,this.__onMapZmStart),b.connect(c,"onExtentChange",this,this.__onMapExtChg)]},
__unregisterMapListeners:function(){var c=this.__handles;c&&(a.forEach(c,b.disconnect,b),this.__handles=null)},__onMapPan:function(c,l){this.move(l,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new k(this.coords));this.hide(null,!0)},__onMapExtChg:function(c,l,r){c=this.map;var m=this.mapCoords;m?this.show(m,null,!0):(l=r?c.toScreen(this.__mcoords):this.coords.offset(l&&l.x||0,l&&l.y||0),this.show(l,null,!0))},__setValue:function(c,l){this[c].innerHTML="";var r="_dfd"+
c,m=this[r];m&&-1===m.fired&&(m.cancel(),this[r]=null);h.isDefined(l)&&(l instanceof g?(this[r]=l,l.addCallbacks(this["__set"+c],this["__err"+c])):this.__render(c,l))},__set_title:function(c){this._dfd_title=null;this.__render("_title",c)},__err_title:function(c){this._dfd_title=null},__set_content:function(c){this._dfd_content=null;this.__render("_content",c)},__err_content:function(c){this._dfd_content=null},__render:function(c,l){var r=this[c];this.place(l,r);this.isShowing&&(this.startupDijits(r),
"_title"===c&&this._adjustContentArea&&this._adjustContentArea())}});return n.InfoWindowBase=D})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has ./kernel ./graphic ./geometry/Point ./geometry/jsonUtils ./geometry/mathUtils ./geometry/webMercatorUtils ./symbols/SimpleMarkerSymbol ./symbols/SimpleLineSymbol ./symbols/CartographicLineSymbol ./symbols/SimpleFillSymbol ./tasks/query ./Evented ./PopupInfo".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B){function w(z){return"sizeInfo"===z.type}D=D(B,{declaredClass:"esri.PopupBase",_featureLayers:{},_updateEndHandles:[],_mapLevelChangeHandle:null,_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0;this.selectedIndex=-1;this.on("clear-features",A.hitch(this,this._resetUpdateEndListeners));
this.on("dfd-complete",A.hitch(this,this._processFeatures));this.on("set-features",A.hitch(this,this._processFeatures));this.on("selection-change",A.hitch(this,this._checkFeatureResolution))},cleanup:function(){this.features=this.deferreds=null;this._resetUpdateEndListeners();this._untrackMapLevelChange()},setFeatures:function(z){if(z&&z.length){this.clearFeatures(!0);var x,y;z[0]instanceof g?y=z:x=z;x?this._updateFeatures(null,x):(this.deferreds=y,y=y.slice(0),a.forEach(y,function(u){u.addBoth(A.hitch(this,
this._updateFeatures,u))},this))}},clearFeatures:function(z){this.features=this.deferreds=this._marked=null;this.count=0;var x=this.selectedIndex;this.selectedIndex=-1;if(-1<x)this.onSelectionChange();this.onClearFeatures({isIntermediate:!!z})},getSelectedFeature:function(){var z=this.features;if(z)return z[this.selectedIndex]},select:function(z){0>z||z>=this.count||(this.selectedIndex=z,this.onSelectionChange())},enableHighlight:function(z){this._highlighted=z.graphics.add(new f(new n(0,0,z.spatialReference)));
this._highlighted.attr("data-popup-highlight","");this._highlighted.hide();this._trackMapLevelChange(z);this.markerSymbol||(z=this.markerSymbol=new l,z.setStyle(l.STYLE_TARGET),z._setDim(16,16,0),z.setOutline(new m(r.STYLE_SOLID,new b([0,255,255]),2,m.CAP_ROUND,m.JOIN_ROUND)),z.setColor(new b([0,0,0,0])));this.lineSymbol||(this.lineSymbol=new r(r.STYLE_SOLID,new b([0,255,255]),2));this.fillSymbol||(this.fillSymbol=new q(q.STYLE_NULL,new r(r.STYLE_SOLID,new b([0,255,255]),2),new b([0,0,0,0])));this.clusterFillSymbol||
(this.clusterFillSymbol=new q(q.STYLE_SOLID,new r(r.STYLE_SOLID,new b([0,255,255]),1.33),null))},disableHighlight:function(z){var x=this._highlighted;x&&(x.hide(),z.graphics.remove(x),delete this._highlighted);this._untrackMapLevelChange();this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var z=this.features&&this.features[this.selectedIndex];this._highlighted&&z&&z.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},
updateHighlight:function(z,x){var y=x.geometry,u=this._highlighted;if(y&&u){u.hide();!u._graphicsLayer&&z&&z.graphics.add(u);u.setGeometry(h.fromJson(y.toJson()));switch(y.type){case "point":case "multipoint":var t=x.getLayer(),C=x.symbol||t&&t._getSymbol(x);if(t&&C){var E;y=C.xoffset||0;var F=C.yoffset||0,G=C.angle||0;switch(C.type){case "simplemarkersymbol":var H=E=C.size||0;break;case "picturemarkersymbol":H=C.width||0;E=C.height||0;break;case "textsymbol":H=E=C.font&&C.font.size||0}var L=x.symbol?
null:t._getRenderer(x);(t=this._getSizeInfo(L))?C=t=L.getSize(x,{sizeInfo:t,shape:C.style,resolution:z&&z.getResolutionInMeters&&z.getResolutionInMeters()}):null!=x.size?C=t=x.size:(C=H,t=E);L=this.markerSymbol;C&&t&&(y&&(y=y/H*C),F&&(F=F/E*t),L._setDim(C+4,t+4,0));L.setOffset(y,F);L.setAngle(G)}break;case "polyline":L=this.lineSymbol;break;case "polygon":L=this.fillSymbol}u.setSymbol(L)}else u&&u.hide()},showClosestFirst:function(z){var x=this.features;if(x&&x.length){if(1<x.length){var y,u=Infinity,
t=-1,C,E=k.getLength,F=z.spatialReference;z=z.normalize();for(y=x.length-1;0<=y;y--)if(C=x[y].geometry){var G=C.spatialReference;var H=0;try{var L="point"===C.type?C:C.getExtent().getCenter();L=L.normalize();F&&G&&!F.equals(G)&&F._canProject(G)&&(L=F.isWebMercator()?c.geographicToWebMercator(L):c.webMercatorToGeographic(L));H=E(z,L)}catch(J){}0<H&&H<u&&(u=H,t=y)}0<t&&(x.splice(0,0,x.splice(t,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=z)},_trackMapLevelChange:function(z){this._untrackMapLevelChange();
this._mapLevelChangeHandle=z.on("extent-change",A.hitch(this,function(x){x.levelChange&&this._checkFeatureResolution()}))},_untrackMapLevelChange:function(){this._mapLevelChangeHandle&&(this._mapLevelChangeHandle.remove(),this._mapLevelChangeHandle=null)},_unbind:function(z){z=a.indexOf(this.deferreds,z);if(-1!==z)return this.deferreds.splice(z,1),this.deferreds.length?1:(this.deferreds=null,2)},_fireComplete:function(z){var x=this._marked;x&&(this._marked=null,this.showClosestFirst(x));this.onDfdComplete(z)},
_updateFeatures:function(z,x){if(z){if(this.deferreds){var y=this._unbind(z);if(y)if(x&&x instanceof Error){if(this._fireComplete(x),2===y)this.onSetFeatures()}else if(x&&x.length)if(this.features){var u=a.filter(x,function(t){return-1===a.indexOf(this.features,t)},this);this.features=this.features.concat(u);this.count=this.features.length;this._fireComplete();if(2===y)this.onSetFeatures()}else{this.features=x;this.count=x.length;this.selectedIndex=0;this._fireComplete();if(2===y)this.onSetFeatures();
this.select(0)}else if(this._fireComplete(),2===y)this.onSetFeatures()}}else this.features=x,this.count=x.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)},_getSizeInfo:function(z){return z?z.sizeInfo||a.filter(z.visualVariables,w)[0]:null},_resetUpdateEndListeners:function(){this._featureLayers={};a.forEach(this._updateEndHandles,function(z){z.remove()});this._updateEndHandles=[]},_processFeatures:function(){a.forEach(this.features,function(z){(z=z.getLayer())&&!this._featureLayers[z.id]&&
(1===z.currentMode||0===z.currentMode&&6===z.mode)&&z.objectIdField&&z.hasXYFootprint&&z.queryFeatures&&(this._featureLayers[z.id]=z,z=z.on("update-end",A.hitch(this,this._fLyrUpdateEndHandler)),this._updateEndHandles.push(z))},this)},_fLyrUpdateEndHandler:function(z){if(!z.error){var x=this,y=z.target,u=y.getSelectedFeatures(),t=0===y.currentMode&&6===y.mode,C={},E=[];a.forEach(this.features,function(F){if(F.getLayer()===y){var G=F.attributes[y.objectIdField];C[G]=F;E.push(G)}});E.length&&(z=new v,
z.objectIds=E,y.queryFeatures(z,function(F){a.forEach(F.features,function(G){var H=C[G.attributes[y.objectIdField]],L=!1;H.geometry!==G.geometry||y.hasWebGLSurface()?(H.setGeometry(G.geometry),L=!0):t&&u&&-1!==a.indexOf(u,G)&&(L=!0);L&&this._highlighted&&H===this.getSelectedFeature()&&this._highlighted.setGeometry(G.geometry)},x)}))}},_checkFeatureResolution:function(){var z=this.getSelectedFeature(),x=this.map;if(z&&x){var y=z.getLayer();if(y){var u=z.getResolution();2===y.currentMode&&z.geometry&&
u&&u>x.getResolution()&&(x=x.getResolutionForPopup(),(y=this._refetchFeature(z,x,y))&&y.then(A.hitch(this,this._updateFeatureResolution,z,x)))}}},_refetchFeature:function(z,x,y){if(z=this._createQueryForCustomResolution(z,x,y))return y.queryFeatures(z).then(function(u){return u&&u.features[0]})},_createQueryForCustomResolution:function(z,x,y){y=y.objectIdField;var u=z.attributes;u=u&&y&&u[y];if(null==u)return null;var t=new v;t.objectIds=[u];t.maxAllowableOffset=x;t.outFields=[y];t.outSpatialReference=
z.geometry.spatialReference;return t},_updateFeatureResolution:function(z,x,y){z.getResolution()!==x&&(z.setResolution(x),z.setGeometry(y.geometry),this._highlighted&&z===this.getSelectedFeature()&&this._highlighted.setGeometry(z.geometry))}});return e.PopupBase=D})},"esri/plugins/popupManager":function(){define(["../PopupManager"],function(D){return{add:function(A,a){A.popupManager||(A.popupManager=new D(a),A.popupManager.setMap(A))},remove:function(A){var a=A.popupManager;a&&(a.unsetMap(),A.popupManager=
void 0)}}})},"esri/PopupManager":function(){define("./geometry/Extent ./geometry/ScreenPoint ./kernel ./layerUtils ./tasks/query dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/_base/lang esri/sniff dojo/on dojo/promise/all dojo/Stateful require".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m){var q;f=f(r,{declaredClass:"esri.PopupManager",enabled:!1,map:null,_mapClickHandle:null,_featureLayersCache:{},constructor:function(v){this._mapClickHandler=h.hitch(this,this._mapClickHandler)},
setMap:function(v){if(this.map)if(v!==this.map)this.unsetMap();else return;this.map=v;this._setupClickHandler()},unsetMap:function(){this.map&&(this.map=null);this._mapClickHandle&&(this._mapClickHandle.remove(),this._mapClickHandle=null)},getMapLayer:function(v){var B;if(v&&(B=v.getLayer())&&(v=B.id,this._featureLayersCache[v])){var w=v.lastIndexOf("_");-1<w&&(v=v.substring(0,w),B=this.map.getLayer(v))}return B},_enabledSetter:function(v){this.enabled=v;this._setupClickHandler()},_setupClickHandler:function(){this._mapClickHandle&&
(this._mapClickHandle.remove(),this._mapClickHandle=null);this.enabled&&this.map&&(this._mapClickHandle=this.map.on("click",this._mapClickHandler))},_mapClickHandler:function(v){var B=this.map.infoWindow,w=v.graphic;B&&this.map.loaded&&(B.clearFeatures&&B.setFeatures?this._showPopup(v):w&&w.getInfoTemplate()&&this._showInfoWindow(w,v.mapPoint))},_showPopup:function(v){var B=this.map,w=B.infoWindow,z=this,x=[],y=[B.graphics].concat(e.map(B.graphicsLayerIds,B.getLayer,B));e.forEach(y,function(C){var E=
C.getFeatureReduction&&C.getFeatureReduction();C&&C.loaded&&C.infoTemplate&&!C.suspended&&(!E||!z._isReductionEnabled(C)||E.infoTemplate&&!E.disablePopup)&&x.push(C)});var u=[];e.forEach(B.layerIds,function(C){(C=B.getLayer(C))&&C.loaded&&!C.suspended&&(z._isImageServiceLayer(C)&&C.infoTemplate?x.push(C):"esri.layers.WMSLayer"===C.declaredClass&&C.getFeatureInfoURL?x.push(C):"esri.layers.ArcGISDynamicMapServiceLayer"!==C.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==C.declaredClass||!C.infoTemplates||
u.push(C))});var t=B.getResolutionForPopup();this._getSubLayerFeatureLayers(u,t).then(function(C){x=x.concat(C);C=v.graphic&&v.graphic.getParentGraphic()||v.graphic;var E=null;C&&C.getInfoTemplate()&&!z._isImageServiceLayer(C.getLayer())&&(E=C);if(x.length||E){var F=z._calculateClickTolerance(x),G=v.screenPoint;C=B.toMap(new A(G.x-F,G.y+F));F=B.toMap(new A(G.x+F,G.y-F));var H=new D(C.x,C.y,F.x,F.y,B.spatialReference);if(H=H.intersects(B.extent)){var L=new g,J=!!E,S=!0;C=e.map(x,function(P){L.timeExtent=
P.useMapTime?B.timeExtent:null;var Q=z._isReductionEnabled(P);P=Q?P.getFeatureReductionLayer():P;var M=z._featureLayersCache[P.id];if(z._isImageServiceLayer(P)){L.geometry=v.mapPoint;S=!1;var N={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};z._isTiledImageServiceLayer(P)?N=P.fetchPopupFromTiles(L):(N=P.queryVisibleRasters(L,N),N.addCallback(function(){var X=P.getVisibleRasters();J=J||0<X.length;return X}))}else if("esri.layers.WMSLayer"===P.declaredClass){N=new n;var K=P._getPopupGraphic(B,
v.screenPoint);K?(N.resolve([K]),J=!0):N.resolve([])}else M||"function"===typeof P.queryFeatures&&(0===P.currentMode||1===P.currentMode)?(L.geometry=H,N=P.queryFeatures(L),N.addCallback(function(X){var da=[];e.forEach(X.features,function(Y){Y.visible&&(da.push(Y),M&&Y.setResolution(t))});J=J||0<da.length;return da})):(N=new n,K=e.filter(P.graphics,function(X){return X&&X.visible&&H.intersects(X.geometry)}),Q&&z._isParentLayer(P,E)&&(Q=z._findGraphicById(K,E,"cluster_id"))&&(E=Q),J=J||0<K.length,N.resolve(K));
return N});E&&(F=new n,F.resolve([E]),C.unshift(F));e.some(C,function(P){return!P.isFulfilled()})||J?(w.setFeatures(C),w.show(v.mapPoint,{closestFirst:S})):(w.hide(),w.clearFeatures())}}})},_getSubLayerFeatureLayers:function(v,B,w){B=B||null;var z=w||new n,x=[];w=v.length;var y=this.map.getScale(),u=!1,t=this,C=0;a:for(;C<w;C++){var E=v[C],F=E.dynamicLayerInfos||E.layerInfos;if(F){var G=null;E._params&&(E._params.layers||E._params.dynamicLayers)&&(G=E.visibleLayers);G=b._getVisibleLayers(F,G);for(var H=
b._getLayersForScale(y,F),L=F.length,J=0;J<L;J++){var S=F[J],P=S.id,Q=E.infoTemplates[P];if(!S.subLayerIds&&Q&&Q.infoTemplate&&-1<e.indexOf(G,P)&&-1<e.indexOf(H,P)){if(!q){u=!0;break a}var M=E.id+"_"+P,N=this._featureLayersCache[M];N&&N.loadError||(N||((N=Q.layerUrl)||(N=S.source?this._getLayerUrl(E.url,"/dynamicLayer"):this._getLayerUrl(E.url,P)),N=new q(N,{parentLayer:E,id:M,drawMode:!1,mode:q.MODE_SELECTION,outFields:this._getOutFields(Q.infoTemplate),resourceInfo:Q.resourceInfo,source:S.source}),
this._featureLayersCache[M]=N),N.setDefinitionExpression(E.layerDefinitions&&E.layerDefinitions[P]),N.setGDBVersion(E.gdbVersion),N.setInfoTemplate(Q.infoTemplate),N.setMaxAllowableOffset(B),N.setUseMapTime(!!E.useMapTime),E.layerDrawingOptions&&E.layerDrawingOptions[P]&&E.layerDrawingOptions[P].renderer&&N.setRenderer(E.layerDrawingOptions[P].renderer),x.push(N))}}}}if(u){var K=new n;m(["./layers/FeatureLayer"],function(da){q=da;K.resolve()});K.then(function(){t._getSubLayerFeatureLayers(v,B,z)})}else{var X=
[];e.forEach(x,function(da){if(!da.loaded){var Y=new n;c.once(da,"load, error",function(){Y.resolve()});X.push(Y.promise)}});X.length?l(X).then(function(){x=e.filter(x,function(da){return!da.loadError&&da.isVisibleAtScale(y)});z.resolve(x)}):(x=e.filter(x,function(da){return da.isVisibleAtScale(y)}),z.resolve(x))}return z.promise},_getLayerUrl:function(v,B){var w=v.indexOf("?");return-1===w?v+"/"+B:v.substring(0,w)+"/"+B+v.substring(w)},_getOutFields:function(v){var B=v.info&&v.info.fieldInfos;if(B&&
B.length&&"esri.dijit.PopupTemplate"===v.declaredClass){var w=[];e.forEach(B,function(z){var x=z.fieldName&&z.fieldName.toLowerCase();x&&"shape"!==x&&0!==x.indexOf("relationships/")&&w.push(z.fieldName)})}else w=["*"];return w},_calculateClickTolerance:function(v){var B=k("esri-touch")?9:6,w,z;e.forEach(v,function(x){if(w=x.renderer)"esri.renderer.SimpleRenderer"===w.declaredClass?((z=w.symbol)&&z.xoffset&&(B=Math.max(B,Math.abs(z.xoffset))),z&&z.yoffset&&(B=Math.max(B,Math.abs(z.yoffset)))):"esri.renderer.UniqueValueRenderer"!==
w.declaredClass&&"esri.renderer.ClassBreaksRenderer"!==w.declaredClass||e.forEach(w.infos,function(y){(z=y.symbol)&&z.xoffset&&(B=Math.max(B,Math.abs(z.xoffset)));z&&z.yoffset&&(B=Math.max(B,Math.abs(z.yoffset)))})});return B},_showInfoWindow:function(v,B){var w=this.map.infoWindow,z=v.geometry;z=z&&"point"===z.type?z:B;var x=v.getContent();w.setTitle(v.getTitle());if(x&&h.isString(x.id)){var y=d.byId(x.id);y&&y.set&&/_PopupRenderer/.test(y.declaredClass)&&y.set("showTitle",!1)}w.setContent(x);w.show(z)},
_findGraphicById:function(v,B,w){var z,x=(B=B.attributes)&&B[w];e.some(v,function(y){var u=y.attributes;u&&u[w]===x&&(z=y);return!!z});return z},_isParentLayer:function(v,B){var w=B&&B.getLayer();return v&&w===v},_isReductionEnabled:function(v){return v&&v.isFeatureReductionActive&&v.isFeatureReductionActive()},_isImageServiceLayer:function(v){return"esri.layers.ArcGISImageServiceLayer"===v.declaredClass||"esri.layers.ArcGISImageServiceVectorLayer"===v.declaredClass||"esri.layers.RasterXLayer"===
v.declaredClass},_isTiledImageServiceLayer:function(v){return"esri.layers.RasterXLayer"===v.declaredClass}});return a.PopupManager=f})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys dijit/focus ./kernel ./MouseEvents ./TouchEvents ./PointerEvents ./config ./sniff ./lang ./fx ./graphic ./tileUtils ./geometry/ScreenPoint ./geometry/Extent ./geometry/Rect ./geometry/mathUtils ./symbols/SimpleFillSymbol".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u){var t=b.connect,C=b.disconnect,E=r("chrome"),F=r("safari"),G=[e.NUMPAD_PLUS,61,187,e.NUMPAD_MINUS,173,189,e.UP_ARROW,e.NUMPAD_8,e.RIGHT_ARROW,e.NUMPAD_6,e.DOWN_ARROW,e.NUMPAD_2,e.LEFT_ARROW,e.NUMPAD_4,e.PAGE_UP,e.NUMPAD_9,e.PAGE_DOWN,e.NUMPAD_3,e.END,e.NUMPAD_1,e.HOME,e.NUMPAD_7];D=D(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(H,L){this.map=H;A.mixin(this,L);var J=H.__container;r("esri-pointer")?(this.pointerEvents=
new c(J,{map:H}),this.eventModel="pointer"):r("esri-touch")?(r("ios")||(this.mouseEvents=new h(J,{map:H})),this.touchEvents=new k(J,{map:H,mouseEvents:this.mouseEvents}),this.eventModel="touch"):(this.mouseEvents=new h(J,{map:H}),this.eventModel="mouse");this._zoomRect=new v(null,new u(l.defaults.map.zoomSymbol));this._keyDx=this._keyDy=0;this._adjustPinch=A.hitch(this,this._adjustPinch);this._adjustPinchEnd=A.hitch(this,this._adjustPinchEnd)},_panInit:function(H){var L=this.mouseEvents;d.isLeft(H)&&
this.map.isPan&&!H.shiftKey&&(this._dragOrigin=new w(0,0),A.mixin(this._dragOrigin,H.screenPoint),C(this._panStartHandle),C(this._panHandle),C(this._panEndHandle),this._panStartHandle=t(L,"onMouseDragStart",this,this._panStart),this._panHandle=t(L,"onMouseDrag",this,this._pan),this._panEndHandle=t(L,"onMouseUp",this,this._panEnd),E||F)&&(H.preventDefault(),f.curNode&&f.curNode.blur())},_panStart:function(H){this.map.setCursor("move");this.map.__panStart(H.screenPoint.x,H.screenPoint.y)},_pan:function(H){this.map.__pan(H.screenPoint.x-
this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)},_panEnd:function(H){C(this._panStartHandle);C(this._panHandle);C(this._panEndHandle);this._panStartHandle=this._panHandle=this._panEndHandle=null;var L=this.map;L.__panning&&(L.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y),L.resetMapCursor())},_zoomInit:function(H){var L=this.map,J=this.pointerEvents||this.mouseEvents;(d.isLeft(H)||H.pointerType)&&L.isRubberBandZoom&&H.shiftKey&&(L.setCursor("crosshair"),this._dragOrigin=
A.mixin({},H.screenPoint),this._zoomDir=H.ctrlKey||H.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=t(J,"onSwipeMove",this,this._zoom),this._zoomEndHandle=t(J,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=t(J,"onMouseDrag",this,this._zoom),this._zoomEndHandle=t(J,"onMouseUp",this,this._zoomEnd)),E&&H.preventDefault())},_zoom:function(H){var L=this.map,J=this._normalizeRect(H).offset(L.__visibleRect.x,L.__visibleRect.y);H=L.graphics;var S=this._zoomRect;S.geometry||L.setCursor("crosshair");
S.geometry&&H.remove(S,!0);var P=L.toMap(new w(J.x,J.y));J=L.toMap(new w(J.x+J.width,J.y+J.height));J=new x(P.x,P.y,J.x-P.x,P.y-J.y,L.spatialReference);J._originOnly=!0;S.setGeometry(J);H.add(S,!0)},_zoomEnd:function(H){var L=this._zoomRect,J=this.map,S=J.extent,P=J.spatialReference;C(this._zoomHandle);C(this._zoomEndHandle);this._zoomHandle=this._zoomEndHandle=null;if(J._canZoom(this._zoomDir)&&L.getDojoShape()){J.graphics.remove(L);L.geometry=null;H=this._normalizeRect(H);H.x+=J.__visibleRect.x;
H.y+=J.__visibleRect.y;if(-1===this._zoomDir){var Q=S.getWidth();H=(Q*J.width/H.width-Q)/2;P=new z(S.xmin-H,S.ymin-H,S.xmax+H,S.ymax+H,P)}else S=J.toMap({x:H.x,y:H.y+H.height}),H=J.toMap({x:H.x+H.width,y:H.y}),P=new z(S.x,S.y,H.x,H.y,P);J._extentUtil(null,null,P)}L.getDojoShape()&&J.graphics.remove(L,!0);this._zoomDir=0;J.resetMapCursor()},_wheelZoom:function(H,L){var J=this.map;if(!L){if(J.smartNavigation&&!H.shiftKey&&!J._isPanningOrZooming()){J.disableScrollWheelZoom();this._setScrollWheelPan(!0);
this._wheelPan(H);return}var S=H.timeStamp;if(!m.isDefined(S)||0>=S)S=(new Date).getTime();if(100>(this._mwts?S-this._mwts:S))return;this._mwts=S}J._canZoom(H.value)&&J._extentUtil({numLevels:H.value,mapAnchor:H.mapPoint,screenAnchor:H.screenPoint})},_wheelPan:function(H){var L=this.map;if(H.shiftKey&&!L._isPanningOrZooming())this._setScrollWheelPan(!1),L.enableScrollWheelZoom(),this._wheelZoom(H);else{var J=0,S=0;r("ff")?H.axis===H.HORIZONTAL_AXIS?J=-H.detail:S=-H.detail:(J=H.wheelDeltaX,S=H.wheelDeltaY);
L.translate(J,S)}},_setScrollWheelPan:function(H){this.map.isScrollWheelPan=H;this.mouseEvents&&this.mouseEvents.enableMouseWheel(H);C(this._mwMacHandle);this._mwMacHandle=null;H&&(this._mwMacHandle=t(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(H.mapPoint)},_recenterZoom:function(H){H.shiftKey&&!this.map._isPanningOrZooming()&&(H.value=H.ctrlKey||H.metaKey?-1:1,this._wheelZoom(H,!0))},
_dblClickZoom:function(H){this.map._isPanningOrZooming()||(H.value=1,this._wheelZoom(H,!0))},_twoFingerTap:function(H){this.map._isPanningOrZooming()||(H.value=-1,this._wheelZoom(H,!0))},_keyDown:function(H){var L=H.keyCode,J=this.map;if(-1!==a.indexOf(G,L)){if(L===e.NUMPAD_PLUS||61===L||187===L)J._extentUtil({numLevels:1});else if(L===e.NUMPAD_MINUS||173===L||189===L)J._extentUtil({numLevels:-1});else{J.__panning||J.__panStart(0,0);switch(L){case e.UP_ARROW:case e.NUMPAD_8:this._keyDy+=10;break;
case e.RIGHT_ARROW:case e.NUMPAD_6:this._keyDx-=10;break;case e.DOWN_ARROW:case e.NUMPAD_2:this._keyDy-=10;break;case e.LEFT_ARROW:case e.NUMPAD_4:this._keyDx+=10;break;case e.PAGE_UP:case e.NUMPAD_9:this._keyDx-=10;this._keyDy+=10;break;case e.PAGE_DOWN:case e.NUMPAD_3:this._keyDx-=10;this._keyDy-=10;break;case e.END:case e.NUMPAD_1:this._keyDx+=10;this._keyDy-=10;break;case e.HOME:case e.NUMPAD_7:this._keyDx+=10;this._keyDy+=10;break;default:return}J.__pan(this._keyDx,this._keyDy)}g.stop(H)}},_keyEnd:function(H){var L=
this.map;L.__panning&&H.keyCode!==e.SHIFT&&(L.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(H){var L=this.map;L=L._zoomAnim||L._panAnim;if(H.shiftKey)return!1;L&&L._active&&(L.stop(),L._fire("onEnd",[L.node]));this._dragOrigin=new w(0,0);A.mixin(this._dragOrigin,H.screenPoint);C(this._swipeHandle);C(this._swipeEndHandle);this._swipeHandle=t(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe);this._swipeEndHandle=t(this.touchEvents||this.pointerEvents,
"onSwipeEnd",this,this._swipeEnd)},_swipe:function(H){var L=this.map;L.__panning?(this._panX=H.screenPoint.x,this._panY=H.screenPoint.y,L.__pan(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-this._dragOrigin.y)):(L.setCursor("move"),L.__panStart(H.screenPoint.x,H.screenPoint.y))},_swipeEnd:function(H){C(this._swipeHandle);C(this._swipeEndHandle);this._swipeHandle=this._swipeEndHandle=null;var L=this.map;L.__panning&&(L.resetMapCursor(),L.__panEnd(H.screenPoint.x-this._dragOrigin.x,H.screenPoint.y-
this._dragOrigin.y))},_pinchInit:function(H){var L=this.map,J=L._zoomAnim||L._panAnim;J&&J._active?(J.stop(),J._fire("onEnd",[J.node])):L.__panning&&(H.screenPoint=new w(this._panX,this._panY),H.mapPoint=L.toMap(H.screenPoint),this._swipeEnd(H));C(this._pinchHandle);C(this._pinchEndHandle);this._pinchHandle=t(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch);this._pinchEndHandle=t(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(H){var L=this.map;
if(H.screenPoints){this.currLength=y.getLength(H.screenPoints[0],H.screenPoints[1]);if(L.__zooming){var J=this.currLength/this._length;this._zoomStartExtent=this.__scaleExtent(L.extent,J,this._dragOrigin);L.__zoom(this._zoomStartExtent,J,this._dragOrigin)}else this._dragOrigin=new w((H.screenPoints[0].x+H.screenPoints[1].x)/2,(H.screenPoints[0].y+H.screenPoints[1].y)/2),this._length=this.currLength,L.__zoomStart(L.extent,this._dragOrigin);this._pinchScale=J;L._fireOnScale(this.currLength/this._length,
this._dragOrigin,!0)}},_pinchEnd:function(H){H=this.map;C(this._pinchHandle);C(this._pinchEndHandle);this._pinchHandle=this._pinchEndHandle=null;this._pinchScale=0;if(H.__zooming&&null===H._zoomAnim){var L=this.currLength/this._length,J=H.extent.getWidth();this._zoomAnimAnchor=H.toMap(this._dragOrigin);this._zoomStartExtent=this.__scaleExtent(H.extent,1/L,this._zoomAnimAnchor);if(H.__tileInfo){var S=B.getCandidateTileInfo(H,H.__tileInfo,this._zoomStartExtent),P=H.__getExtentForLevel(S.lod.level,this._zoomAnimAnchor),
Q=H.getMinZoom(),M=H.getMaxZoom(),N=P.extent;P=P.lod;var K=J/N.getWidth(),X=S.lod.level;1>L?K>L&&X--:K<L&&X++;X<Q?X=Q:X>M&&(X=M);X!==S.lod.level&&(P=H.__getExtentForLevel(X,this._zoomAnimAnchor),N=P.extent,P=P.lod);this._zoomEndExtent=N;this._zoomEndLod=P;H._zoomAnim=q.animateRange({range:{start:J/this._zoomStartExtent.getWidth(),end:K},duration:l.defaults.map.zoomDuration,rate:l.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd});H._zoomAnim.play();H._fireOnScale(H.extent.getWidth()/
this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,H._fireOnScale(H.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(H){var L=this.__scaleExtent(this.map.extent,H,this._zoomAnimAnchor);this.map.__zoom(L,H,this._dragOrigin)},_adjustPinchEnd:function(){var H=this.map,L=H.extent.getWidth()/this._zoomEndExtent.getWidth(),J=this.__scaleExtent(H.extent,1/L,this._zoomAnimAnchor),S=this._dragOrigin,
P=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=H._zoomAnim=this._zoomAnimAnchor=null;H.__zoomEnd(J,L,S,P,!0)},__scaleExtent:function(H,L,J){J=J||H.getCenter();L=H.expand(L);var S=H.xmin-(L.getWidth()-H.getWidth())*(J.x-H.xmin)/H.getWidth();J=H.ymax-(L.getHeight()-H.getHeight())*(J.y-H.ymax)/H.getHeight();return new z(S,J-L.getHeight(),S+L.getWidth(),J,H.spatialReference)},_normalizeRect:function(H){H=H.screenPoint;var L=this._dragOrigin.x,J=this._dragOrigin.y;
H=new x((H.x<L?H.x:L)-this.map.__visibleRect.x,(H.y<J?H.y:J)-this.map.__visibleRect.y,Math.abs(H.x-L),Math.abs(H.y-J));delete H.spatialReference;0===H.width&&(H.width=1);0===H.height&&(H.height=1);return H},setImmediateClick:function(H){switch(this.eventModel){case "mouse":this.mouseEvents.setImmediateClick(H);break;case "touch":this.touchEvents.setImmediateTap(H);this.mouseEvents&&this.mouseEvents.setImmediateClick(H);break;case "pointer":this.pointerEvents.setImmediateTap(H)}},enablePan:function(){this.disablePan();
switch(this.eventModel){case "mouse":this._panInitHandle=t(this.mouseEvents,"onMouseDown",this,this._panInit);break;case "touch":this._panInitHandle=t(this.mouseEvents,"onMouseDown",this,this._panInit);this._swipeInitHandle=t(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case "pointer":this._swipeInitHandle=t(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){C(this._panInitHandle);this._panInitHandle=null;C(this._swipeInitHandle);this._swipeInitHandle=null},
enableRubberBandZoom:function(){this.disableRubberBandZoom();this._zoomInitHandle=this.pointerEvents?t(this.pointerEvents,"onSwipeStart",this,this._zoomInit):t(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){C(this._zoomInitHandle);this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom();if("touch"===this.eventModel||"pointer"===this.eventModel)this._pinchInitHandle=t(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit)},
disablePinchZoom:function(){C(this._pinchInitHandle);this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom();this._wheelHandle=t(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){C(this._wheelHandle);this._wheelHandle=null},enableScrollWheelPan:function(){var H=this.map;H&&H.loaded&&H.smartNavigation&&(this.disableScrollWheelPan(),this._setScrollWheelPan(!0))},disableScrollWheelPan:function(){var H=this.map;
H&&H.loaded&&H.smartNavigation&&this._setScrollWheelPan(!1)},enableDoubleClickZoom:function(){this.disableDoubleClickZoom();switch(this.eventModel){case "mouse":this._dblClickHandle=t(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case "touch":this._dblClickHandle=t(this.mouseEvents,"onDblClick",this,this._dblClickZoom);this._dblTapHandle=t(this.touchEvents,"onDoubleTap",this,this._dblClickZoom);this._zoomOutHandle=t(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case "pointer":this._dblTapHandle=
t(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=t(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){C(this._dblClickHandle);C(this._zoomOutHandle);this._dblTapHandle&&C(this._dblTapHandle);this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom();this._sDblClickHandle=t(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},
disableShiftDoubleClickZoom:function(){C(this._sDblClickHandle);this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter();this._recenterHandle=t(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){C(this._recenterHandle);this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation();this._keyHandle=t(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown);this._keyEndHandle=
t(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){C(this._keyHandle);C(this._keyEndHandle);this._keyHandle=this._keyEndHandle=null},enableScrollWheel:function(){var H=this.map;H&&(H.smartNavigation?this.enableScrollWheelPan():H.enableScrollWheelZoom())},disableScrollWheel:function(){var H=this.map;H&&(H.disableScrollWheelZoom(),H.smartNavigation&&this.disableScrollWheelPan())},enableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),
H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},disableNavigation:function(){var H=this.map;H&&H.loaded&&(H._evalNavigationFeature("DoubleClickZoom"),H._evalNavigationFeature("ClickRecenter"),H._evalNavigationFeature("Pan"),H._evalNavigationFeature("RubberBandZoom"),H._evalNavigationFeature("PinchZoom"),
H._evalNavigationFeature("KeyboardNavigation"),H._evalNavigationFeature("ScrollWheel"))},destroy:function(){this.touchEvents&&this.touchEvents.destroy();this.mouseEvents&&this.mouseEvents.destroy();this.pointerEvents&&this.pointerEvents.destroy();var H,L=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,
this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(H=0;H<L.length;H++)C(L[H]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=
this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}});return n.MapNavigationManager=D})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(D,
A,a,b,g,d,e,f,n,h){var k=g.connect,c=g.disconnect;D=D([f],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==b("mac")?1:3,wheelDivisor:2>b("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(l,r){this.node=l;a.mixin(this,r);var m=function(q){d.stop(q);return!1};b("mozilla")&&A.style(l,"MozUserSelect","none");this._handles=[k(l,"onselectstart",m),k(l,"ondragstart",m),k(l,"onmouseenter",this,this._onMouseEnterHandler),k(l,
"onmouseleave",this,this._onMouseLeaveHandler),k(l,"onmousedown",this,this._onMouseDownHandler),k(l,"onclick",this,this._onClickHandler),k(l,"ondblclick",this,this._onDblClickHandler)];this._onMouseMoveHandler_connect=k(l,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=k(l,"onmouseup",this,this._onMouseUpHandler);this._fireClickEvent=a.hitch(this,this._fireClickEvent);this._initialDuration=this.doubleClickDuration;this.preventPageScroll=(m=this.map)?m.isScrollWheelZoom||
m.isScrollWheelPan:this.preventPageScroll;this.enableMouseWheel(!1)},_fire:function(l,r){if(!this._preventClick||"onClick"!==l&&"onDblClick"!==l){if(this[l])this[l](r);if(this.map&&this.map[l])this.map[l](r)}},_processEvent:function(l){l=d.fix(l,l.target);var r=this.map,m=r&&r.position;m&&("DOMMouseScroll"===l.type&&3>b("ff")?l.screenPoint=new h(window.scrollX+l.screenX-m.x,window.scrollY+l.screenY-m.y):l.screenPoint=new h(l.pageX-m.x,l.pageY-m.y),l.mapPoint=r.extent?r.toMap(l.screenPoint):new n);
l.numPoints=0;return l},_onMouseEnterHandler:function(l){c(this._onKeyDown_connect);c(this._onKeyUp_connect);this._onKeyDown_connect=k(document,"onkeydown",this,this._onKeyDownHandler);this._onKeyUp_connect=k(document,"onkeyup",this,this._onKeyUpHandler);this._fire("onMouseOver",this._processEvent(l))},_onMouseLeaveHandler:function(l){c(this._onKeyDown_connect);c(this._onKeyUp_connect);this._onKeyDown_connect=this._onKeyUp_connect=null;this._fire("onMouseOut",this._processEvent(l))},_onMouseMoveHandler:function(l){this._dragEnd?
this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(l))},_onMouseDownHandler:function(l){c(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=null;this.node.setCapture&&this.node.setCapture(!1);c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=k(document,"onmousemove",this,this._onMouseDragHandler);this._startX=l.pageX;this._startY=l.pageY;this._fire("onMouseDown",this._processEvent(l))},_onMouseUpHandler:function(l){var r=this.node;r.releaseCapture&&r.releaseCapture();
c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=null;c(this._onMouseMoveHandler_connect);this._onMouseMoveHandler_connect=k(r,"onmousemove",this,this._onMouseMoveHandler);this._fire("onMouseUp",this._processEvent(l))},_onMouseDragHandler:function(l){c(this._onMouseDragHandler_connect);this._onMouseDragHandler_connect=k(document,"onmousemove",this,this._onMouseDraggingHandler);c(this._onMouseUpHandler_connect);this._onMouseUpHandler_connect=k(document,"onmouseup",this,this._onDragMouseUpHandler);
this._docLeaveConnect=k(document,"onmouseout",this,this._onDocMouseOut);this._fire("onMouseDragStart",this._processEvent(l))},_onMouseDraggingHandler:function(l){d.stop(l);this._fire("onMouseDrag",this._processEvent(l))},_onDragMouseUpHandler:function(l){var r=this.node;r.releaseCapture&&r.releaseCapture();this._dragEnd=!0;c(this._docLeaveConnect);c(this._onMouseDragHandler_connect);c(this._onMouseUpHandler_connect);this._docLeaveConnect=this._onMouseDragHandler_connect=null;this._onMouseMoveHandler_connect=
k(r,"onmousemove",this,this._onMouseMoveHandler);this._onMouseUpHandler_connect=k(r,"onmouseup",this,this._onMouseUpHandler);l=this._processEvent(l);this._fire("onMouseDragEnd",l);this._fire("onMouseUp",l)},_onDocMouseOut:function(l){var r=9>b("ie")?l.toElement:l.relatedTarget,m=r&&r.nodeName.toLowerCase();(!r||(b("chrome")||b("safari"))&&"html"===m)&&this._onDragMouseUpHandler(l)},_onClickHandler:function(l){l=this._processEvent(l);if(l.pageX===this._startX&&l.pageY===this._startY){clearTimeout(this._clickTimer);
var r={},m="movementX"in l,q;for(q in l)"mozInputSource"===q||"mozPressure"===q||m&&("webkitMovementX"===q||"webkitMovementY"===q)||(r[q]=l[q]);this._clickEvent=r;this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration)}},_fireClickEvent:function(){clearTimeout(this._clickTimer);9>b("ie")&&(this._clickEvent.graphic=e._ieGraphic,delete e._ieGraphic);this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(l){clearTimeout(this._clickTimer);this._fire("onDblClick",this._processEvent(l))},
_onMouseWheelHandler:function(l){var r=this.map;(r?r.isScrollWheelZoom||r.isScrollWheelPan:this.preventPageScroll)&&d.stop(l);r=b("ff")||b("mozilla")?-l.detail/this.mozWheelDivisor:l.wheelDelta/this.wheelDivisor;var m=Math.abs(r);m=m<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;l.value=0>r?-m:m;this._fire("onMouseWheel",this._processEvent(l))},_onKeyDownHandler:function(l){this._fire("onKeyDown",l)},_onKeyUpHandler:function(l){this._fire("onKeyUp",l)},enableMouseWheel:function(l){c(this._scrollHandle);
this._scrollHandle=k(this.node,b("ff")||b("mozilla")?l?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(l){this.doubleClickDuration=l?0:this._initialDuration},preventClickEvents:function(l){this._preventClick=l},destroy:function(){var l=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]),
r;for(r=0;r<l.length;r++)c(l[r]);clearTimeout(this._clickTimer);this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}});return e.MouseEvents=D})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),
function(D,A,a,b,g,d,e,f,n){D=D([e],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(h,k){this.node=h;a.mixin(this,k);A.setSelectable(h,!1);this._touchStart=a.hitch(this,this._touchStart);this._touchMove=a.hitch(this,this._touchMove);this._touchEnd=a.hitch(this,this._touchEnd);this._touchCancel=a.hitch(this,this._touchCancel);this._fireClickEvent=a.hitch(this,this._fireClickEvent);h.addEventListener("touchstart",
this._touchStart,!1);h.addEventListener("touchmove",this._touchMove,!1);h.addEventListener("touchend",this._touchEnd,!1);h.addEventListener("touchcancel",this._touchCancel,!1);this.map&&b("ios")&&(this._mouseOver=a.hitch(this,this._mouseOver),this._mouseOut=a.hitch(this,this._mouseOut),this._mouseDown=a.hitch(this,this._mouseDown),this._mouseUp=a.hitch(this,this._mouseUp),this._mouseClick=a.hitch(this,this._mouseClick),h.addEventListener("mouseover",this._mouseOver,!1),h.addEventListener("mouseout",
this._mouseOut,!1),h.addEventListener("mousedown",this._mouseDown,!1),h.addEventListener("mouseup",this._mouseUp,!1),h.addEventListener("click",this._mouseClick,!1));this._numTouches=0;this._nodeTouches=[];this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_touchStart:function(h){var k=this._touches,c,l=h.changedTouches.length,r,m,q=(new Date).getTime();this._touchStartTS=q;if(!(b("android")&&b("safari")&&1===h.targetTouches.length&&h.touches.length===h.targetTouches.length&&h.targetTouches.length===
h.changedTouches.length&&0===h.changedTouches[0].identifier&&k[h.changedTouches[0].identifier])){this._addTouch(h);for(c=0;c<l;c++){var v=h.changedTouches[c];var B=k[v.identifier]={};B.startX=v.pageX;B.startY=v.pageY;B.startTS=q;-1===this._touchIds.indexOf(v.identifier)&&this._touchIds.push(v.identifier)}this._swipeActive&&(r=this._nodeTouches[0]);this._pinchActive&&(m=this._nodeTouches[1]);1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(h,
r))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(h,[r,m]))):2===this._numTouches?this._swipeActive&&(r&&(B=k[this._touchIds[0]],B.startX=r.pageX,B.startY=r.pageY,B.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(h,r))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(h,r))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(h,[r,m])))}},_touchMove:function(h){h.preventDefault();
this._updateTouch(h);var k=this._touches,c,l=h.changedTouches.length,r;if(!(b("android")&&b("safari")&&1===h.targetTouches.length&&h.touches.length===h.targetTouches.length&&h.targetTouches.length===h.changedTouches.length&&0===h.changedTouches[0].identifier&&k[h.changedTouches[0].identifier]&&1<this._touchIds.length)){for(c=0;c<l;c++){var m=h.changedTouches[c];if(r=k[m.identifier]){var q=Math.abs(m.pageX-r.startX);m=Math.abs(m.pageY-r.startY);!r.moved&&(q>=this.tapRadius||m>=this.tapRadius)&&(r.moved=
r.absMoved=!0);var v=v?v:r.moved}}1===this._numTouches?(k=h.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(h,k)):v&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(h,k)))):2===this._numTouches&&(c=this._nodeTouches[0],l=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(h,[c,l])):v&&(v=k[c.identifier],r=k[l.identifier],k=Math.abs(v.startX-r.startX),v=Math.abs(v.startY-r.startY),r=Math.abs(c.pageX-l.pageX),
q=Math.abs(c.pageY-l.pageY),Math.abs(Math.sqrt(r*r+q*q)-Math.sqrt(k*k+v*v))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(h,[c,l])))))}},_touchEnd:function(h){this._removeTouch(h);var k=this._touches,c=h.changedTouches,l,r=c.length,m,q,v=(new Date).getTime(),B=this._touchIds;for(l=0;l<r;l++)if(q=k[c[l].identifier])q.absMoved&&(m=!0),q.pageX=c[l].pageX,q.pageY=c[l].pageY,q.endTS=v;if(0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=
!1,this._fire("onSwipeEnd",this._processTouchEvent(h,c[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(h,c));else{if(!m){r=Infinity;m=-Infinity;v=Infinity;var w=-Infinity,z=this.tapStartTolerance,x=[],y=!0;for(l=0;l<B.length;l++)q=k[B[l]],x.push(q),q.startTS<r&&(r=q.startTS),q.startTS>m&&(m=q.startTS),q.endTS<v&&(v=q.endTS),q.endTS>w&&(w=q.endTS),delete k[B[l]];1===x.length&&c[0]&&(k=Math.abs(c[0].pageY-x[0].startY),Math.abs(c[0].pageX-x[0].startX)>=
this.tapRadius||k>=this.tapRadius)&&(y=!1);y&&Math.abs(m-r)<=z&&Math.abs(w-v)<=z&&this._basicTap(h,x)}}else 1===this._numTouches&&this._pinchActive&&(l=this._nodeTouches[0],q=k[l.identifier],q.startX=l.pageX,q.startY=l.pageY,this._pinchActive=q.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(h,[c[0],l])))},_touchCancel:function(h){this._numTouches&&this._touchEnd(h)},_basicTap:function(h,k){var c=(new Date).getTime(),l=this;h=this._processTouchEvent(h,k);this._taps.push({touchInfos:k,ts:c,
event:h});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",h);clearTimeout(this._tapTimer);this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var r=l;l=null;clearTimeout(r._tapTimer);r._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(h){var k=this._taps,c=k[0],l=k[1],r=c.touchInfos,m=l&&l.touchInfos;k.length&&(h||(this._taps=[]),c&&l?r.length===m.length?l.ts-c.ts<=this.doubleTapDuration?(1===r.length?
(h=Math.abs(r[0].startX-m[0].startX),r=Math.abs(r[0].startY-m[0].startY),r=h<=this.doubleTapRadius&&r<=this.doubleTapRadius):r=!0,r?this._processedDoubleTap(k):this._processedTap(l)):this._processedTap(l):this._processedTap(l):this._processedTap(c||l))},_processedTap:function(h){var k=h.event;this._fire("onProcessedTap",k);1===h.touchInfos.length?this._fire("onTap",this._fixEvent(k)):2===h.touchInfos.length&&this._fire("onTwoFingerTap",k)},_processedDoubleTap:function(h){var k=1===h[1].touchInfos.length;
if(k){var c=[this._fixEvent(h[0].event),this._fixEvent(h[1].event)];c[1].relatedEvents=c}h=[h[0].event,h[1].event];h[1].relatedEvents=h;this._fire("onProcessedDoubleTap",h[1]);k&&(this._fire("onDoubleTap",c[1]),this._fire("onDblClick",c[1]))},_addTouch:function(h){var k=h.changedTouches,c=this._nodeTouches,l;this._numTouches+=k.length;for(h=0;h<k.length;h++){var r=c.length;var m=!1;for(l=0;l<r&&!(m=c[l].identifier===k[h].identifier);l++);m?this._numTouches--:c.push(k[h])}for(h=c.length-1;0<=h;h--)g.isDescendant(c[h].target,
document.body)||(c.splice(h,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(h){var k=[],c=[],l=h.changedTouches,r=this._nodeTouches;this._numTouches-=l.length;0>this._numTouches&&(this._numTouches=0);for(h=0;h<l.length;h++)k.push(l[h].identifier);for(h=r.length-1;0<=h;h--)-1!==k.indexOf(r[h].identifier)&&c.push(r.splice(h,1)[0]);return c},_updateTouch:function(h){var k=[],c=h.changedTouches,l=this._nodeTouches;for(h=0;h<c.length;h++)k.push(c[h].identifier);for(h=
0;h<l.length;h++){var r=k.indexOf(l[h].identifier);-1!==r&&l.splice(h,1,c[r])}},_mouseOver:function(h){this._fire("onMouseOver",this._processMouseEvent(h))},_mouseOut:function(h){this._fire("onMouseOut",this._processMouseEvent(h))},_mouseDown:function(h){this._fire("onMouseDown",this._processMouseEvent(h))},_mouseUp:function(h){this._fire("onMouseUp",this._processMouseEvent(h))},_mouseClick:function(h){clearTimeout(this._clickTimer);300<(new Date).getTime()-this._touchStartTS?this._fire("onClick",
this._processMouseEvent(h)):(this._clickEvent=h,this._clickTimer=setTimeout(this._fireClickEvent,this.doubleTapDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer);this._fire("onClick",this._processMouseEvent(this._clickEvent))},_fire:function(h,k){"onDblClick"===h&&clearTimeout(this._clickTimer);if("onDblClick"===h&&this.mouseEvents){this.mouseEvents.preventClickEvents(!0);var c=this;setTimeout(function(){c.mouseEvents.preventClickEvents(!1)},350)}if(this[h])this[h](k);if(this.map&&
this.map[h])this.map[h](k)},_fixEvent:function(h){var k={},c;for(c in h)k[c]=h[c];this.map&&(k.screenPoint=k.screenPoints[0],k.mapPoint=k.mapPoints[0]);return k},_processTouchEvent:function(h,k){var c=this.map,l=c&&c.position,r=0;if(l&&k)if(a.isArray(k)){var m;h.screenPoints=[];h.mapPoints=[];for(m=0;m<k.length;m++)if(k[m]){var q=new n(k[m].pageX-l.x,k[m].pageY-l.y);h.screenPoints.push(q);h.mapPoints.push(c.extent?c.toMap(q):new f)}else r++}else h.screenPoint=new n(k.pageX-l.x,k.pageY-l.y),h.mapPoint=
c.extent?c.toMap(h.screenPoint):new f;h.numPoints=k?a.isArray(k)?k.length-r:1:0;return h},_processMouseEvent:function(h){var k=this.map,c=k&&k.position;c&&(h.screenPoint=new n(h.pageX-c.x,h.pageY-c.y),h.mapPoint=k.extent?k.toMap(h.screenPoint):new f);return h},setImmediateTap:function(h){this._immediate=h},destroy:function(){var h=this.node;h.removeEventListener("touchstart",this._touchStart,!1);h.removeEventListener("touchmove",this._touchMove,!1);h.removeEventListener("touchend",this._touchEnd,
!1);h.removeEventListener("touchcancel",this._touchCancel,!1);this.map&&(h.removeEventListener("mouseover",this._mouseOver,!1),h.removeEventListener("mouseout",this._mouseOut,!1),h.removeEventListener("mousedown",this._mouseDown,!1),h.removeEventListener("mouseup",this._mouseUp,!1),h.removeEventListener("click",this._mouseClick,!1));A.setSelectable(h,!0);clearTimeout(this._tapTimer);clearTimeout(this._clickTimer);this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=
null}});return d.TouchEvents=D})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./kernel ./Evented ./geometry/Point ./geometry/ScreenPoint".split(" "),function(D,A,a,b,g,d,e,f){D=D([d],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==b("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,_dragging:!1,constructor:function(n,
h){this.node=n;A.mixin(this,h);void 0!==n.style.msTouchAction?n.style.msTouchAction="none":void 0!==n.style.touchAction&&(n.style.touchAction="none");var k=navigator.msPointerEnabled,c=function(l){l.preventDefault()};n.addEventListener("selectstart",c,!1);n.addEventListener("dragstart",c,!1);this._pointerDown=A.hitch(this,this._pointerDown);this._pointerMove=A.hitch(this,this._pointerMove);this._pointerUp=A.hitch(this,this._pointerUp);this._pointerCancel=A.hitch(this,this._pointerCancel);n.addEventListener(k?
"MSPointerDown":"pointerdown",this._pointerDown,!1);n.addEventListener(k?"MSPointerMove":"pointermove",this._pointerMove,!1);n.addEventListener(k?"MSPointerUp":"pointerup",this._pointerUp,!1);n.addEventListener(k?"MSPointerCancel":"pointercancel",this._pointerCancel,!1);this.map&&(this._mouseOver=A.hitch(this,this._mouseOver),this._mouseOut=A.hitch(this,this._mouseOut),this._mouseLeave=A.hitch(this,this._mouseLeave),this._mouseDown=A.hitch(this,this._mouseDown),this._mouseUp=A.hitch(this,this._mouseUp),
this._mouseClick=A.hitch(this,this._mouseClick),this._mouseWheel=A.hitch(this,this._mouseWheel),this._mouseMove=A.hitch(this,this._mouseMove),this._mouseEnter=A.hitch(this,this._mouseEnter),this._onKeyDown=A.hitch(this,this._onKeyDown),this._onKeyUp=A.hitch(this,this._onKeyUp),n.addEventListener("mouseover",this._mouseOver,!1),n.addEventListener("mouseout",this._mouseOut,!1),n.addEventListener("mouseleave",this._mouseLeave,!1),n.addEventListener("mousedown",this._mouseDown,!1),n.addEventListener("mouseup",
this._mouseUp,!1),n.addEventListener("click",this._mouseClick,!1),n.addEventListener("mousewheel",this._mouseWheel,!1),n.addEventListener("mousemove",this._mouseMove,!1),n.addEventListener("mouseenter",this._mouseEnter,!1));this._numTouches=0;this._touches={};this._touchIds=[];this._taps=[];this._immediate=!1},_pointerDown:function(n){if(-1<a.indexOf(this._touchIds,n.pointerId))this._pointerUp(n);else{var h=this._touches,k=n.target,c=n.pointerId,l=this._touchIds,r=(new Date).getTime();var m=h[c]=
{};m.pointerId=c;m.startX=m.pageX=n.pageX;m.startY=m.pageY=n.pageY;m.startTS=r;l.push(c);this._numTouches++;k.setPointerCapture?k.setPointerCapture(c):k.msSetPointerCapture&&k.msSetPointerCapture(c);k=h[l[0]];h=h[l[1]];1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(k&&(k.startX=k.pageX,k.startY=k.pageY,k.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(n,k))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(n,k))):
this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(n,[k,h]))))}},_pointerMove:function(n){var h=this._touches,k=this._touchIds,c;if((c=h[n.pointerId])&&(c.pageX!==n.pageX||c.pageY!==n.pageY)){c.pageX=n.pageX;c.pageY=n.pageY;var l=Math.abs(c.pageX-c.startX);var r=Math.abs(c.pageY-c.startY);!c.moved&&(l>=this.tapRadius||r>=this.tapRadius)&&(c.moved=c.absMoved=!0);if(1===this._numTouches)this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(n,n)):c.moved&&
(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(n,n)));else if(2===this._numTouches)if(c=h[k[0]],h=h[k[1]],this._pinchActive)this._fire("onPinchMove",this._processTouchEvent(n,[c,h]));else if(c.moved||h.moved){k=Math.abs(c.startX-h.startX);l=Math.abs(c.startY-h.startY);r=Math.abs(c.pageX-h.pageX);var m=Math.abs(c.pageY-h.pageY);Math.abs(Math.sqrt(r*r+m*m)-Math.sqrt(k*k+l*l))>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(n,[c,h])))}}},
_pointerUp:function(n){var h=this._touches,k,c=this.node,l=n.target,r=n.pointerId,m=this._touchIds,q=m.slice(0),v=a.map(q,function(x){return h[x]}),B=(new Date).getTime();if(k=h[r])if(k.pageX=n.pageX,k.pageY=n.pageY,k.endTS=B,this._numTouches--,l.releasePointerCapture?l.releasePointerCapture(r):l.msReleasePointerCapture&&l.msReleasePointerCapture(r),0===this._numTouches)if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(n,n));
else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(n,n));else{if(!k.absMoved){l=Infinity;r=-Infinity;m=Infinity;B=-Infinity;var w=this.tapStartTolerance,z;for(z=0;z<q.length;z++)k=v[z],k.startTS<l&&(l=k.startTS),k.startTS>r&&(r=k.startTS),k.endTS<m&&(m=k.endTS),k.endTS>B&&(B=k.endTS);Math.abs(r-l)<=w&&Math.abs(B-m)<=w&&this._basicTap(n,v)}}else 1===this._numTouches&&this._pinchActive&&(m.splice(a.indexOf(m,n.pointerId),1),delete h[n.pointerId],k=h[m[0]],
k.startX=k.pageX,k.startY=k.pageY,k.moved=!1,document.msElementsFromPoint&&(q=document.msElementsFromPoint(k.pageX,k.pageY),a.some(q,function(x){return x===c})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(n,[n,k])))},_pointerCancel:function(n){this._numTouches&&this._pointerUp(n)},_basicTap:function(n,h){var k=(new Date).getTime(),c=this,l=this._immediate;n=this._processTouchEvent(n,h);this._taps.push({touchInfos:h,
ts:k,event:n});2<this._taps.length&&this._taps.shift();this._fire("onBasicTap",n);clearTimeout(this._tapTimer);k=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration;this._tapTimer=setTimeout(function(){var r=c;c=null;clearTimeout(r._tapTimer);r._analyzeTap(l)},l?0:k)},_analyzeTap:function(n){var h=this._taps,k=h[0],c=h[1],l=k.touchInfos,r=c&&c.touchInfos;h.length&&(n||(this._taps=[]),k&&c?l.length===r.length?c.ts-k.ts<=this.doubleTapDuration?(1===l.length?(n=Math.abs(l[0].startX-
r[0].startX),l=Math.abs(l[0].startY-r[0].startY),l=n<=this.doubleTapRadius&&l<=this.doubleTapRadius):l=!0,l?this._processedDoubleTap(h):this._processedTap(c)):this._processedTap(c):this._processedTap(c):this._processedTap(k||c))},_processedTap:function(n){var h=n.event;this._fire("onProcessedTap",h);1===n.touchInfos.length?this._fire("onTap",this._fixEvent(h)):2===n.touchInfos.length&&this._fire("onTwoFingerTap",h)},_processedDoubleTap:function(n){var h=1===n[1].touchInfos.length;if(h){var k=[this._fixEvent(n[0].event),
this._fixEvent(n[1].event)];k[1].relatedEvents=k}n=[n[0].event,n[1].event];n[1].relatedEvents=n;this._fire("onProcessedDoubleTap",n[1]);h&&(this._fire("onDoubleTap",k[1]),this._fire("onDblClick",k[1]))},_mouseOver:function(n){this._fire("onMouseOver",this._processMouseEvent(n))},_mouseMove:function(n){this._dragging?this._fire("onMouseDrag",this._processMouseEvent(n)):this._fire("onMouseMove",this._processMouseEvent(n))},_mouseOut:function(n){this._fire("onMouseOut",this._processMouseEvent(n))},_mouseLeave:function(n){document.removeEventListener("keydown",
this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseOut",this._processMouseEvent(n))},_mouseDown:function(n){this._downX=n.pageX;this._downY=n.pageY;this._fire("onMouseDown",this._processMouseEvent(n));0===n.button&&(this._dragging=!0,this._fire("onMouseDragStart",this._processMouseEvent(n)))},_mouseUp:function(n){this._dragging&&(this._dragging=!1,this._fire("onMouseDragEnd",this._processMouseEvent(n)));this._fire("onMouseUp",this._processMouseEvent(n))},
_mouseClick:function(n){Math.abs(n.pageX-this._downX)<=this.clickRadius&&Math.abs(n.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(n))},_mouseWheel:function(n){var h=this.map;(h?h.isScrollWheelZoom||h.isScrollWheelPan:this.preventPageScroll)&&n.preventDefault();h=n.wheelDelta?n.wheelDelta/this.wheelDivisor:-n.detail/this.mozWheelDivisor;var k=Math.abs(h);k=k<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;n.value=0>h?-k:k;this._fire("onMouseWheel",this._processMouseEvent(n))},
_mouseEnter:function(n){document.removeEventListener("keydown",this._onKeyDown,!1);document.removeEventListener("keyup",this._onKeyUp,!1);document.addEventListener("keydown",this._onKeyDown,!1);document.addEventListener("keyup",this._onKeyUp,!1);this._fire("onMouseEnter",this._processMouseEvent(n))},_onKeyDown:function(n){this._fire("onKeyDown",n)},_onKeyUp:function(n){this._fire("onKeyUp",n)},_fire:function(n,h){if(this[n])this[n](h);if(this.map&&this.map[n])this.map[n](h)},_fixEvent:function(n){var h=
{},k;for(k in n)h[k]=n[k];h.preventDefault=function(){n.preventDefault()};h.stopPropagation=function(){n.stopPropagation()};this.map&&(h.screenPoint=h.screenPoints[0],h.mapPoint=h.mapPoints[0]);return h},_processTouchEvent:function(n,h){var k=this.map,c=k&&k.position,l=0;if(c&&h)if(A.isArray(h)){var r;n.screenPoints=[];n.mapPoints=[];for(r=0;r<h.length;r++)if(h[r]){var m=new f(h[r].pageX-c.x,h[r].pageY-c.y);n.screenPoints.push(m);n.mapPoints.push(k.extent?k.toMap(m):new e)}else l++}else n.screenPoint=
new f(h.pageX-c.x,h.pageY-c.y),n.mapPoint=k.extent?k.toMap(n.screenPoint):new e;n.numPoints=h?A.isArray(h)?h.length-l:1:0;return n},_processMouseEvent:function(n){var h=this.map,k=h&&h.position;k&&(n.screenPoint=new f(n.pageX-k.x,n.pageY-k.y),n.mapPoint=h.extent?h.toMap(n.screenPoint):new e);return n},setImmediateTap:function(n){this._immediate=n},destroy:function(){var n=this.node;n.removeEventListener("MSPointerDown",this._pointerDown,!1);n.removeEventListener("MSPointerMove",this._pointerMove,
!1);n.removeEventListener("MSPointerUp",this._pointerUp,!1);n.removeEventListener("MSPointerCancel",this._pointerCancel,!1);this.map&&(n.removeEventListener("mouseover",this._mouseOver,!1),n.removeEventListener("mousemove",this._mouseMove,!1),n.removeEventListener("mouseout",this._mouseOut,!1),n.removeEventListener("mouseleave",this._mouseLeave,!1),n.removeEventListener("mousedown",this._mouseDown,!1),n.removeEventListener("mouseup",this._mouseUp,!1),n.removeEventListener("click",this._mouseClick,
!1),n.removeEventListener("mouseenter",this._mouseEnter,!1));clearTimeout(this._tapTimer);this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}});return g.PointerEvents=D})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../request ../deferredUtils ./Task ../geometry/Extent ../geometry/Polyline ../geometry/Polygon ../geometry/Multipoint ../geometry/jsonUtils".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m){D=D(h,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"densify-complete":["geometries"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],
"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(q){q=A.hitch;this._projectHandler=q(this,this._projectHandler);this._simplifyHandler=q(this,this._simplifyHandler);this._bufferHandler=q(this,this._bufferHandler);this._areasAndLengthsHandler=q(this,this._areasAndLengthsHandler);this._lengthsHandler=
q(this,this._lengthsHandler);this._labelPointsHandler=q(this,this._labelPointsHandler);this._relationHandler=q(this,this._relationHandler);this._convexHullHandler=q(this,this._convexHullHandler);this._unionHandler=q(this,this._unionHandler);this._autoCompleteHandler=q(this,this._autoCompleteHandler);this._reshapeHandler=q(this,this._reshapeHandler);this._cutHandler=q(this,this._cutHandler);this._intersectHandler=q(this,this._intersectHandler);this._differenceHandler=q(this,this._differenceHandler);
this._trimExtendHandler=q(this,this._trimExtendHandler);this._densifyHandler=q(this,this._densifyHandler);this._generalizeHandler=q(this,this._densifyHandler);this._offsetHandler=q(this,this._offsetHandler);this._distanceHandler=q(this,this._distanceHandler);this._toGeoCoordinateHandler=q(this,this._toGeoCoordinateHandler);this._fromGeoCoordinateHandler=q(this,this._fromGeoCoordinateHandler);this.registerConnectEvents()},_encodeGeometries:function(q){var v=[],B,w=q.length;for(B=0;B<w;B++)v.push(q[B].toJson());
return{geometryType:m.getJsonType(q[0]),geometries:v}},_decodeGeometries:function(q,v,B){var w=m.getGeometryType(v);q=q.geometries;var z=[],x={spatialReference:B.toJson()},y=A.mixin;a.forEach(q,function(u,t){z[t]=new w(y(u,x))});return z},_toProjectGeometry:function(q){var v=q.spatialReference.toJson();return q instanceof k?new l({rings:[[[q.xmin,q.ymin],[q.xmin,q.ymax],[q.xmax,q.ymax],[q.xmax,q.ymin],[q.xmin,q.ymin]]],spatialReference:v}):new c({paths:[[].concat(q.points)],spatialReference:v})},
_fromProjectedGeometry:function(q,v,B){return"esriGeometryEnvelope"===v?(q=q.rings[0],new k(q[0][0],q[0][1],q[2][0],q[2][1],B)):new r({points:q.paths[0],spatialReference:B.toJson()})},project:function(q,v,B,w){var z=A.mixin({},this._url.query,{f:"json"});if(q.geometries){w=B;B=v;v=q.outSR;var x=q.geometries[0];z=A.mixin(z,q.toJson())}else x=q[0],z=A.mixin(z,{outSR:v.wkid||b.toJson(v.toJson()),inSR:x.spatialReference.wkid||b.toJson(x.spatialReference.toJson()),geometries:b.toJson(this._encodeGeometries(q))});
var y=m.getJsonType(x),u=this._projectHandler,t=this._errorHandler,C=new g(n._dfdCanceller);C._pendingDfd=f({url:this._url.path+"/project",content:z,callbackParamName:"callback",load:function(E,F){u(E,F,y,v,B,w,C)},error:function(E){t(E,w,C)}});return C},_projectHandler:function(q,v,B,w,z,x,y){try{var u=this._decodeGeometries(q,B,w);this._successHandler([u],"onProjectComplete",z,y)}catch(t){this._errorHandler(t,x,y)}},onProjectComplete:function(){},simplify:function(q,v,B){var w=q[0].spatialReference,
z=A.mixin({},this._url.query,{f:"json",sr:w.wkid?w.wkid:b.toJson(w.toJson()),geometries:b.toJson(this._encodeGeometries(q))}),x=m.getJsonType(q[0]),y=this._simplifyHandler,u=this._errorHandler,t=new g(n._dfdCanceller);t._pendingDfd=f({url:this._url.path+"/simplify",content:z,callbackParamName:"callback",load:function(C,E){y(C,E,x,w,v,B,t)},error:function(C){u(C,B,t)}});return t},_simplifyHandler:function(q,v,B,w,z,x,y){try{var u=this._decodeGeometries(q,B,w);this._successHandler([u],"onSimplifyComplete",
z,y)}catch(t){this._errorHandler(t,x,y)}},onSimplifyComplete:function(){},convexHull:function(q,v,B){var w=q[0].spatialReference;q=A.mixin({},this._url.query,{f:"json",sr:b.toJson(w.toJson()),geometries:b.toJson(this._encodeGeometries(q))});var z=this._convexHullHandler,x=this._errorHandler,y=new g(n._dfdCanceller);y._pendingDfd=f({url:this._url.path+"/convexHull",content:q,callbackParamName:"callback",load:function(u,t){z(u,t,w,v,B,y)},error:function(u){x(u,B,y)}});return y},_convexHullHandler:function(q,
v,B,w,z,x){try{var y=m.fromJson(q.geometry).setSpatialReference(B);this._successHandler([y],"onConvexHullComplete",w,x)}catch(u){this._errorHandler(u,z,x)}},onConvexHullComplete:function(){},union:function(q,v,B){var w=q[0].spatialReference;q=A.mixin({},this._url.query,{f:"json",sr:b.toJson(w.toJson()),geometries:b.toJson(this._encodeGeometries(q))});var z=this._unionHandler,x=this._errorHandler,y=new g(n._dfdCanceller);y._pendingDfd=f({url:this._url.path+"/union",content:q,callbackParamName:"callback",
load:function(u,t){z(u,t,w,v,B,y)},error:function(u){x(u,B,y)}});return y},_unionHandler:function(q,v,B,w,z,x){try{var y=m.fromJson(q.geometry).setSpatialReference(B);this._successHandler([y],"onUnionComplete",w,x)}catch(u){this._errorHandler(u,z,x)}},onUnionComplete:function(){},autoComplete:function(q,v,B,w){var z=q[0].spatialReference;q=A.mixin({},this._url.query,{f:"json",sr:b.toJson(z.toJson()),polygons:b.toJson(this._encodeGeometries(q).geometries),polylines:b.toJson(this._encodeGeometries(v).geometries)});
var x=this._autoCompleteHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/autoComplete",content:q,callbackParamName:"callback",load:function(t,C){x(t,C,z,B,w,u)},error:function(t){y(t,w,u)}});return u},_autoCompleteHandler:function(q,v,B,w,z,x){try{var y=q.geometries;q=[];var u,t=y.length;for(u=0;u<t;u++)q[u]=new l({spatialReference:B,rings:y[u].rings});this._successHandler([q],"onAutoCompleteComplete",w,x)}catch(C){this._errorHandler(C,z,x)}},onAutoCompleteComplete:function(){},
reshape:function(q,v,B,w){var z=q.spatialReference;q=A.mixin({},this._url.query,{f:"json",sr:b.toJson(z.toJson()),target:b.toJson({geometryType:m.getJsonType(q),geometry:q.toJson()}),reshaper:b.toJson(v.toJson())});var x=this._reshapeHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/reshape",content:q,callbackParamName:"callback",load:function(t,C){x(t,C,z,B,w,u)},error:function(t){y(t,w,u)}});return u},_reshapeHandler:function(q,v,B,w,z,x){try{var y=m.fromJson(q.geometry).setSpatialReference(B);
this._successHandler([y],"onReshapeComplete",w,x)}catch(u){this._errorHandler(u,z,x)}},onReshapeComplete:function(){},cut:function(q,v,B,w){var z=q[0].spatialReference,x=a.map(q,function(C){return C.toJson()});q=A.mixin({},this._url.query,{f:"json",sr:b.toJson(z.toJson()),target:b.toJson({geometryType:m.getJsonType(q[0]),geometries:x}),cutter:b.toJson(v.toJson())});var y=this._cutHandler,u=this._errorHandler,t=new g(n._dfdCanceller);t._pendingDfd=f({url:this._url.path+"/cut",content:q,callbackParamName:"callback",
load:function(C,E){y(C,E,z,B,w,t)},error:function(C){u(C,w,t)}});return t},_cutHandler:function(q,v,B,w,z,x){try{var y=q.geometries,u={};u.cutIndexes=q.cutIndexes;u.geometries=[];a.forEach(y,function(t){u.geometries.push(m.fromJson(t).setSpatialReference(B))});this._successHandler([u],"onCutComplete",w,x)}catch(t){this._errorHandler(t,z,x)}},onCutComplete:function(){},intersect:function(q,v,B,w){var z=q[0].spatialReference;q=A.mixin({},this._url.query,{f:"json",sr:b.toJson(z.toJson()),geometries:b.toJson(this._encodeGeometries(q)),
geometry:b.toJson({geometryType:m.getJsonType(v),geometry:v.toJson()})});var x=this._intersectHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/intersect",content:q,callbackParamName:"callback",load:function(t,C){x(t,C,z,B,w,u)},error:function(t){y(t,w,u)}});return u},_intersectHandler:function(q,v,B,w,z,x){try{var y=[];a.forEach(q.geometries,function(u){y.push(m.fromJson(u).setSpatialReference(B))});this._successHandler([y],"onIntersectComplete",w,x)}catch(u){this._errorHandler(u,
z,x)}},onIntersectComplete:function(){},difference:function(q,v,B,w){var z=q[0].spatialReference;q=A.mixin({},this._url.query,{f:"json",sr:b.toJson(z.toJson()),geometries:b.toJson(this._encodeGeometries(q)),geometry:b.toJson({geometryType:m.getJsonType(v),geometry:v.toJson()})});var x=this._differenceHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/difference",content:q,callbackParamName:"callback",load:function(t,C){x(t,C,z,B,w,u)},error:function(t){y(t,
w,u)}});return u},_differenceHandler:function(q,v,B,w,z,x){try{var y=[];a.forEach(q.geometries,function(u){y.push(m.fromJson(u).setSpatialReference(B))});this._successHandler([y],"onDifferenceComplete",w,x)}catch(u){this._errorHandler(u,z,x)}},onDifferenceComplete:function(){},buffer:function(q,v,B){var w=A.mixin({},this._url.query,{f:"json"},q.toJson()),z=q.outSpatialReference||q.geometries[0].spatialReference,x=this._bufferHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+
"/buffer",content:w,callbackParamName:"callback",load:function(t,C){x(t,C,z,v,B,u)},error:function(t){y(t,B,u)}});return u},_bufferHandler:function(q,v,B,w,z,x){try{var y=q.geometries;q=[];var u,t=y.length;for(u=0;u<t;u++)q[u]=new l({spatialReference:B,rings:y[u].rings});this._successHandler([q],"onBufferComplete",w,x)}catch(C){this._errorHandler(C,z,x)}},onBufferComplete:function(){},areasAndLengths:function(q,v,B){q=A.mixin({},this._url.query,{f:"json"},q.toJson());var w=this._areasAndLengthsHandler,
z=this._errorHandler,x=new g(n._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/areasAndLengths",content:q,callbackParamName:"callback",load:function(y,u){w(y,u,v,B,x)},error:function(y){z(y,B,x)}});return x},_areasAndLengthsHandler:function(q,v,B,w,z){try{this._successHandler([q],"onAreasAndLengthsComplete",B,z)}catch(x){this._errorHandler(x,w,z)}},onAreasAndLengthsComplete:function(){},lengths:function(q,v,B){q=A.mixin({},this._url.query,{f:"json"},q.toJson());var w=this._lengthsHandler,z=this._errorHandler,
x=new g(n._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/lengths",content:q,callbackParamName:"callback",load:function(y,u){w(y,u,v,B,x)},error:function(y){z(y,B,x)}});return x},_lengthsHandler:function(q,v,B,w,z){try{this._successHandler([q],"onLengthsComplete",B,z)}catch(x){this._errorHandler(x,w,z)}},onLengthsComplete:function(){},labelPoints:function(q,v,B){var w=a.map(q,function(t){return t.toJson()}),z=q[0].spatialReference;w=A.mixin({},this._url.query,{f:"json",sr:z.wkid?z.wkid:b.toJson(z.toJson()),
polygons:b.toJson(w)});var x=this._labelPointsHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/labelPoints",content:w,callbackParamName:"callback",load:function(t,C){x(t,C,q,z,v,B,u)},error:function(t){y(t,B,u)}});return u},_labelPointsHandler:function(q,v,B,w,z,x,y){try{var u=[];a.forEach(q.labelPoints,function(t){u.push(m.fromJson(t).setSpatialReference(w))});this._successHandler([u],"onLabelPointsComplete",z,y)}catch(t){this._errorHandler(t,x,y)}},onLabelPointsComplete:function(){},
relation:function(q,v,B){q=A.mixin({},this._url.query,{f:"json"},q.toJson());var w=this._relationHandler,z=this._errorHandler,x=new g(n._dfdCanceller);x._pendingDfd=f({url:this._url.path+"/relation",content:q,callbackParamName:"callback",load:function(y,u){w(y,u,v,B,x)},error:function(y){z(y,B,x)}});return x},_relationHandler:function(q,v,B,w,z){try{this._successHandler([q.relations],"onRelationComplete",B,z)}catch(x){this._errorHandler(x,w,z)}},onRelationComplete:function(){},trimExtend:function(q,
v,B){var w=A.mixin({},this._url.query,{f:"json"},q.toJson()),z=q.sr,x=this._trimExtendHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/trimExtend",content:w,callbackParamName:"callback",load:function(t,C){x(t,C,z,v,B,u)},error:function(t){y(t,B,u)}});return u},_trimExtendHandler:function(q,v,B,w,z,x){try{var y=q.geometries;q=[];var u,t=y.length;for(u=0;u<t;u++)q[u]=new c({spatialReference:B,paths:y[u].paths});this._successHandler([q],"onTrimExtendComplete",
w,x)}catch(C){this._errorHandler(C,z,x)}},onTrimExtendComplete:function(){},densify:function(q,v,B){var w=A.mixin({},this._url.query,{f:"json"},q.toJson()),z=q.geometries[0].spatialReference,x=this._densifyHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/densify",content:w,callbackParamName:"callback",load:function(t,C){x(t,C,z,v,B,u)},error:function(t){y(t,B,u)}});return u},_densifyHandler:function(q,v,B,w,z,x){try{var y=[];a.forEach(q.geometries,function(u){y.push(m.fromJson(u).setSpatialReference(B))});
this._successHandler([y],"onDensifyComplete",w,x)}catch(u){this._errorHandler(u,z,x)}},onDensifyComplete:function(){},generalize:function(q,v,B){var w=A.mixin({},this._url.query,{f:"json"},q.toJson()),z=q.geometries[0].spatialReference,x=this._generalizeHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/generalize",content:w,callbackParamName:"callback",load:function(t,C){x(t,C,z,v,B,u)},error:function(t){y(t,B,u)}});return u},_generalizeHandler:function(q,
v,B,w,z,x){try{var y=[];a.forEach(q.geometries,function(u){y.push(m.fromJson(u).setSpatialReference(B))});this._successHandler([y],"onGeneralizeComplete",w,x)}catch(u){this._errorHandler(u,z,x)}},onGeneralizeComplete:function(){},offset:function(q,v,B){var w=A.mixin({},this._url.query,{f:"json"},q.toJson()),z=q.geometries[0].spatialReference,x=this._offsetHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=f({url:this._url.path+"/offset",content:w,callbackParamName:"callback",load:function(t,
C){x(t,C,z,v,B,u)},error:function(t){y(t,B,u)}});return u},_offsetHandler:function(q,v,B,w,z,x){try{var y=[];a.forEach(q.geometries,function(u){y.push(m.fromJson(u).setSpatialReference(B))});this._successHandler([y],"onOffsetComplete",w,x)}catch(u){this._errorHandler(u,z,x)}},onOffsetComplete:function(){},distance:function(q,v,B){var w=A.mixin({},this._url.query,{f:"json"},q.toJson()),z=q.geometry1.spatialReference,x=this._distanceHandler,y=this._errorHandler,u=new g(n._dfdCanceller);u._pendingDfd=
f({url:this._url.path+"/distance",content:w,callbackParamName:"callback",load:function(t,C){x(t,C,z,v,B,u)},error:function(t){y(t,B,u)}});return u},_distanceHandler:function(q,v,B,w,z,x){try{q=q&&q.distance,this._successHandler([q],"onDistanceComplete",w,x)}catch(y){this._errorHandler(y,z,x)}},onDistanceComplete:function(){},toGeoCoordinateString:function(q,v,B){var w={};A.isObject(q.sr)?w.sr=q.sr.wkid||b.toJson(q.sr.toJson()):w.sr=q.sr;w.coordinates=b.toJson(q.coordinates);w.conversionType=q.conversionType||
"MGRS";w.conversionMode=q.conversionMode;w.numOfDigits=q.numOfDigits;w.rounding=q.rounding;w.addSpaces=q.addSpaces;q=A.mixin({},this._url.query,{f:"json"},w);var z=this._toGeoCoordinateHandler,x=this._errorHandler,y=new g(n._dfdCanceller);y._pendingDfd=f({url:this._url.path+"/toGeoCoordinateString",content:q,callbackParamName:"callback",load:function(u,t){z(u,t,v,B,y)},error:function(u){x(u,B,y)}});return y},_toGeoCoordinateHandler:function(q,v,B,w,z){try{this._successHandler([q.strings],"onToGeoCoordinateStringComplete",
B,z)}catch(x){this._errorHandler(x,w,z)}},onToGeoCoordinateStringComplete:function(){},fromGeoCoordinateString:function(q,v,B){var w={};A.isObject(q.sr)?w.sr=q.sr.wkid||b.toJson(q.sr.toJson()):w.sr=q.sr;w.strings=b.toJson(q.strings);w.conversionType=q.conversionType||"MGRS";w.conversionMode=q.conversionMode;q=A.mixin({},this._url.query,{f:"json"},w);var z=this._fromGeoCoordinateHandler,x=this._errorHandler,y=new g(n._dfdCanceller);y._pendingDfd=f({url:this._url.path+"/fromGeoCoordinateString",content:q,
callbackParamName:"callback",load:function(u,t){z(u,t,v,B,y)},error:function(u){x(u,B,y)}});return y},_fromGeoCoordinateHandler:function(q,v,B,w,z){try{this._successHandler([q.coordinates],"onToGeoCoordinateStringComplete",B,z)}catch(x){this._errorHandler(x,w,z)}},onFromGeoCoordinateStringComplete:function(){}});A.mixin(D,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,
UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,
UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,
UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",
UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});A.setObject("tasks.GeometryService",D,e);return D})},"arcgisonline/map/thumbnail/createThumbnailImage":function(){define("dojo/_base/lang arcgisonline/map/core/getScaleForExtent esri/kernel esri/tasks/PrintTemplate esri/tasks/PrintTask esri/tasks/PrintParameters".split(" "),
function(D,A,a,b,g,d){var e=window.esriGeowConfig;return function(f,n,h,k,c){for(var l=600,r=400,m=function(q){return k&&(q=A(f.extent,q),k[0].scale<q)?!1:!0};!m(l)&&!(l*=2,r*=2,1600<=l););m=new b;m.layout="MAP_ONLY";m.format="png32";m.preserveScale=!1;m.showAttribution=!1;m.showLabels=!1;m.exportOptions={width:l,height:r,dpi:96};c||(c=new g(e.self.helperServices.printTask.url,{}));l=new d;l.map=f;l.template=m;a.config.defaults.io.timeout=12E4;c.execute(l,D.hitch(this,function(q){a.config.defaults.io.timeout=
6E4;return n(q.url)}),D.hitch(this,function(q){a.config.defaults.io.timeout=6E4;if(h)return h(q)}))}})},"arcgisonline/map/core/getScaleForExtent":function(){define(["esri/config","esri/WKIDUnitConversion"],function(D,A){return function(a,b){var g=20015077/180,d=a.spatialReference;if(d){var e=d.wkid;var f=d.wkt}d=null;e?d=A.values[A[e]]:f&&-1!==f.search(/^PROJCS/i)&&(e=/UNIT\[([^\]]+)\]\]$/i.exec(f))&&e[1]&&(d=parseFloat(e[1].split(",")[1]));return a.getWidth()/b*(d||g)*39.37*D.defaults.screenDPI}})},
"esri/tasks/PrintTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.PrintTemplate",label:null,exportOptions:{width:800,height:1100,dpi:96},layoutOptions:null,format:"PNG32",layout:"MAP_ONLY",outScale:0,preserveScale:!0,forceFeatureAttributes:!1,showAttribution:null,showLabels:!0});A.setObject("tasks.PrintTemplate",D,b);return D})},"esri/tasks/PrintTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has ../kernel ../lang ../layerUtils ../deferredUtils ../Color ../request ../urlUtils ../geometry/Polygon ../renderers/SimpleRenderer ../symbols/FillSymbol ./Geoprocessor ./PrintTemplate ./Task dojo/dom-attr dojo/dom-construct dojox/gfx/_base dojox/gfx/canvas dojox/json/query ./PrintParameters ./LegendLayer".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t){D=D(w,{declaredClass:"esri.tasks.PrintTask",constructor:function(C,E){this.url=C;this.printGp=new v(this.url);this._handler=A.hitch(this,this._handler);E&&E.async&&(this.async=!0);this._colorEvaluator=t("$..color")},async:!1,_vtlExtent:null,_cimVersion:null,_is11xService:!1,_loadGpServerMetadata:!0,execute:function(C,E,F){if(!this._loadGpServerMetadata)return this._execute(C,E,F);var G=new g(h._dfdCanceller),H=this._url.path,L=H.lastIndexOf("/GPServer/");
0<L&&(H=H.slice(0,L+9));G._pendingDfd=c({url:H,callbackParamName:"callback",content:A.mixin({},this._url.query,{f:"json"})}).then(A.hitch(this,function(J){this._loadGpServerMetadata=!1;this.async="esriExecutionTypeAsynchronous"===J.executionType;this._cimVersion=J.cimVersion;this._is11xService=!!this._cimVersion;G._pendingDfd=this._execute(C);return G._pendingDfd})).then(A.hitch(this,function(J){this._successHandler([J],null,E,G)})).otherwise(function(J){F&&F(J);G.errback(J)});return G},_handler:function(C,
E,F,G,H){try{if(this.async)"esriJobSucceeded"===C.jobStatus?this.printGp.getResultData(C.jobId,"Output_File",A.hitch(this,function(J){L=J.value;this._successHandler([L],"onComplete",F,H)})):this._errorHandler(Error(C.jobStatus),G,H);else{var L=C[0].value;this._successHandler([L],"onComplete",F,H)}}catch(J){this._errorHandler(J,G,H)}},_execute:function(C,E,F){var G=this._handler,H=this._errorHandler,L=C.template||new B;L.hasOwnProperty("showLabels")||(L.showLabels=!0);var J=L.exportOptions,S;J&&(S=
{outputSize:[J.width,J.height],dpi:J.dpi});J=L.layoutOptions;var P=[];if(J){this.legendAll=!1;J.legendLayers?a.forEach(J.legendLayers,function(T){var ba={};ba.id=T.layerId;T.subLayerIds&&(ba.subLayerIds=T.subLayerIds);P.push(ba)}):this.legendAll=!0;if("Miles"===J.scalebarUnit||"Kilometers"===J.scalebarUnit){var Q="esriKilometers";var M="esriMiles"}else if("Meters"===J.scalebarUnit||"Feet"===J.scalebarUnit)Q="esriMeters",M="esriFeet";var N={esriMiles:"mi",esriKilometers:"km",esriFeet:"ft",esriMeters:"m"};
N={titleText:J.titleText,authorText:J.authorText,copyrightText:J.copyrightText,customTextElements:J.customTextElements,scaleBarOptions:{metricUnit:Q,metricLabel:N[Q],nonMetricUnit:M,nonMetricLabel:N[M]},legendOptions:{operationalLayers:P}}}Q=this._getPrintDefinition(C.map,L);C.outSpatialReference&&(Q.mapOptions.spatialReference=C.outSpatialReference.toJson());C.template&&f.isDefined(C.template.showAttribution)&&(Q.mapOptions.showAttribution=C.template.showAttribution);A.mixin(Q,{exportOptions:S,layoutOptions:N});
this.allLayerslegend&&A.mixin(Q.layoutOptions,{legendOptions:{operationalLayers:this.allLayerslegend}});if(Q.operationalLayers){S=Q.operationalLayers;var K=function(T){return f.fixJson(A.mixin(T,{type:"esriSLS",cap:void 0,join:void 0,meterLimit:void 0}))},X=RegExp("[\\u4E00-\\u9FFF\\u0E00-\\u0E7F\\u0900-\\u097F\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF]"),da=/[\u0600-\u06FF]/,Y=function(T){var ba=T.text,pa=(T=T.font)&&T.family&&T.family.toLowerCase();ba&&T&&("arial"===pa||"arial unicode ms"===
pa)&&(T.family=X.test(ba)?"Arial Unicode MS":"Arial","normal"!==T.style&&da.test(ba)&&(T.family="Arial Unicode MS"))};for(N=0;N<S.length;N++)if(S[N].featureCollection&&S[N].featureCollection.layers)for(M=0;M<S[N].featureCollection.layers.length;M++){var aa=S[N].featureCollection.layers[M];if(aa.layerDefinition&&aa.layerDefinition.drawingInfo&&aa.layerDefinition.drawingInfo.renderer&&aa.layerDefinition.drawingInfo.renderer.symbol){var ca=aa.layerDefinition.drawingInfo.renderer;"esriCLS"===ca.symbol.type?
ca.symbol=K(ca.symbol):"esriTS"===ca.symbol.type?Y(ca.symbol):ca.symbol.outline&&"esriCLS"===ca.symbol.outline.type&&(ca.symbol.outline=K(ca.symbol.outline))}if(aa.featureSet&&aa.featureSet.features)for(J=0;J<aa.featureSet.features.length;J++)ca=aa.featureSet.features[J],ca.symbol&&("esriCLS"===ca.symbol.type?ca.symbol=K(ca.symbol):"esriTS"===ca.symbol.type?Y(ca.symbol):ca.symbol.outline&&"esriCLS"===ca.symbol.outline.type&&(ca.symbol.outline=K(ca.symbol.outline)))}}L={Web_Map_as_JSON:b.toJson(f.fixJson(Q)),
Format:L.format,Layout_Template:L.layout};C.extraParameters&&(L=A.mixin(L,C.extraParameters));var I=new g(h._dfdCanceller);C=function(T,ba){G(T,ba,E,F,I)};Q=function(T){H(T,F,I)};I._pendingDfd=this.async?this.printGp.submitJob(L,C,null,Q):this.printGp.execute(L,C,Q);return I},onComplete:function(){},_createMultipointLayer:function(){return{layerDefinition:{name:"multipointLayer",geometryType:"esriGeometryMultipoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryMultipoint",features:[]}}},
_createPolygonLayer:function(){return{layerDefinition:{name:"polygonLayer",geometryType:"esriGeometryPolygon",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolygon",features:[]}}},_createPointLayer:function(){return{layerDefinition:{name:"pointLayer",geometryType:"esriGeometryPoint",drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPoint",features:[]}}},_createPolylineLayer:function(){return{layerDefinition:{name:"polylineLayer",geometryType:"esriGeometryPolyline",
drawingInfo:{renderer:null}},featureSet:{geometryType:"esriGeometryPolyline",features:[]}}},_convertSvgSymbol:function(C){if(!(8>=d("ie")||!C.path&&"image/svg+xml"!==C.contentType)){var E=u.createSurface(x.create("div"),1024,1024);var F="image/svg+xml"===C.contentType?E.createObject(u.Image,{src:"data:image/svg+xml;base64,"+C.imageData,width:y.pt2px(C.width),height:y.pt2px(C.height),x:0,y:0}):E.createObject(u.Path,C.path).setFill(C.color).setStroke(C.outline);"pendingRender"in E&&E._render(!0);var G=
E.rawNode.getContext("2d"),H=Math.ceil(F.getBoundingBox().width),L=Math.ceil(F.getBoundingBox().height);F=G.getImageData(F.getBoundingBox().x,F.getBoundingBox().y,H,L);G.canvas.width=H;G.canvas.height=L;G.putImageData(F,0,0);G=G.canvas.toDataURL("image/png");C={type:"esriPMS",imageData:G.substr(22,G.length),angle:C.angle,contentType:"image/png",height:C.size?C.size:y.px2pt(L),width:C.size?H/L*C.size:y.px2pt(H),xoffset:C.xoffset,yoffset:C.yoffset};E.destroy();return C}},_convertSvgRenderer:function(C){"simple"===
C.type&&C.symbol&&(C.symbol.path||"image/svg+xml"===C.symbol.contentType)?C.symbol=this._convertSvgSymbol(C.symbol):"uniqueValue"===C.type?(C.defaultSymbol&&(C.defaultSymbol.path||"image/svg+xml"===C.defaultSymbol.contentType)&&(C.defaultSymbol=this._convertSvgSymbol(C.defaultSymbol)),C.uniqueValueInfos&&a.forEach(C.uniqueValueInfos,function(E){if(E.symbol.path||"image/svg+xml"===E.symbol.contentType)E.symbol=this._convertSvgSymbol(E.symbol)},this)):"classBreaks"===C.type&&(C.defaultSymbol&&(C.defaultSymbol.path||
"image/svg+xml"===C.defaultSymbol.contentType)&&(C.defaultSymbol=this._convertSvgSymbol(C.defaultSymbol)),C.classBreakInfos&&a.forEach(C.classBreakInfos,function(E){if(E.symbol.path||"image/svg+xml"===E.symbol.contentType)E.symbol=this._convertSvgSymbol(E.symbol)},this))},_createFeatureCollection:function(C,E,F,G){var H=this._createPolygonLayer(),L=this._createPolylineLayer(),J=this._createPointLayer(),S=this._createMultipointLayer(),P=this._createPointLayer();P.layerDefinition.name="textLayer";delete P.layerDefinition.drawingInfo;
if("esri.layers.FeatureLayer"===C.declaredClass||"esri.layers.StreamLayer"===C.declaredClass)H.layerDefinition.name=L.layerDefinition.name=J.layerDefinition.name=S.layerDefinition.name=A.getObject("arcgisProps.title",!1,C)||C.name||C.id;var Q=C.renderer&&"esri.renderer.SimpleRenderer"===C.renderer.declaredClass;if(!C.renderer||C.renderer.valueExpression||A.isFunction(C.renderer.attributeField))delete H.layerDefinition.drawingInfo,delete L.layerDefinition.drawingInfo,delete J.layerDefinition.drawingInfo,
delete S.layerDefinition.drawingInfo;else{var M=C.renderer.toJson({useLegacyRotationProperties:!0});if("temporal"===M.type){M={latestObservationRenderer:M.latestObservationRenderer,trackLinesRenderer:M.trackRenderer,observationAger:M.observationAger,renderer:M.observationRenderer};var N={};C._trackIdField&&(N.trackIdField=C._trackIdField);C._startTimeField&&(N.startTimeField=C._startTimeField);C._endTimeField&&(N.endTimeField=C._endTimeField);H.layerDefinition.drawingInfo=M;H.layerDefinition.timeInfo=
N;L.layerDefinition.drawingInfo=M;L.layerDefinition.timeInfo=N;J.layerDefinition.drawingInfo=M;J.layerDefinition.timeInfo=N;S.layerDefinition.drawingInfo=M;S.layerDefinition.timeInfo=N}else H.layerDefinition.drawingInfo.renderer=M,L.layerDefinition.drawingInfo.renderer=M,J.layerDefinition.drawingInfo.renderer=M,S.layerDefinition.drawingInfo.renderer=M}M=C.fields;M||!C.renderer||C.renderer.valueExpression||A.isFunction(C.renderer.attributeField)||("esri.renderer.ClassBreaksRenderer"===C.renderer.declaredClass?
(M=[{name:C.renderer.attributeField,type:"esriFieldTypeDouble"}],C.renderer.normalizationField&&M.push({name:C.renderer.normalizationField,type:"esriFieldTypeDouble"})):"esri.renderer.UniqueValueRenderer"===C.renderer.declaredClass&&(M=[{name:C.renderer.attributeField,type:"esriFieldTypeString"}],C.renderer.attributeField2&&M.push({name:C.renderer.attributeField2,type:"esriFieldTypeString"}),C.renderer.attributeField3&&M.push({name:C.renderer.attributeField3,type:"esriFieldTypeString"})));M&&(H.layerDefinition.fields=
M,L.layerDefinition.fields=M,J.layerDefinition.fields=M,S.layerDefinition.fields=M);M=C.graphics;C.isFeatureReductionActive&&C.isFeatureReductionActive()&&(M=C.getSingleGraphics());N=M.length;var K;for(K=0;K<N;K++){var X=M[K];if(!1!==X.visible&&X.geometry){var da=X.toJson();da.symbol&&da.symbol.outline&&da.symbol.outline.color&&da.symbol.outline.color[3]&&!this._is11xService&&(da.symbol.outline.color[3]=255);if(C.renderer&&!da.symbol&&(A.isFunction(C.renderer.attributeField)||C.renderer.valueExpression||
this._isFeatureCollectionRequired(C.renderer,C)||"esri.renderer.DotDensityRenderer"===C.renderer.declaredClass||F)){F=F||C.renderer;var Y=null;try{Y=F.getSymbol(X)}catch(aa){}if(!Y)continue;da.symbol=Y.toJson();this._isFeatureCollectionRequired(F,C)&&this._applyVisualVariables(da.symbol,{renderer:F,graphic:X,symbol:Y,mapResolution:E&&E.getResolutionInMeters(),mapScale:E&&E.getScale()})}da.symbol&&(da.symbol.path||"image/svg+xml"===da.symbol.contentType?da.symbol=this._convertSvgSymbol(da.symbol):
da.symbol.text&&delete da.attributes);switch(X.geometry.type){case "polygon":H.featureSet.features.push(da);break;case "polyline":L.featureSet.features.push(da);break;case "point":da.symbol&&da.symbol.text?P.featureSet.features.push(da):J.featureSet.features.push(da);break;case "multipoint":S.featureSet.features.push(da);break;case "extent":da.geometry=r.fromExtent(X.geometry).toJson(),H.featureSet.features.push(da)}}}E=[];0<H.featureSet.features.length&&E.push(H);0<L.featureSet.features.length&&
E.push(L);0<S.featureSet.features.length&&E.push(S);0<J.featureSet.features.length&&E.push(J);0<P.featureSet.features.length&&E.push(P);if(!E.length)return null;a.forEach(E,function(aa){var ca=a.every(aa.featureSet.features,function(I){return I.symbol});if(Q||ca)G&&G.forceFeatureAttributes||a.forEach(aa.featureSet.features,function(I){delete I.attributes}),G.forceFeatureAttributes||delete aa.layerDefinition.fields;ca&&delete aa.layerDefinition.drawingInfo});a.forEach(E,function(aa){aa.layerDefinition.drawingInfo&&
aa.layerDefinition.drawingInfo.renderer&&this._convertSvgRenderer(aa.layerDefinition.drawingInfo.renderer)},this);return{id:C.id,opacity:C.opacity,minScale:C.minScale||0,maxScale:C.maxScale||0,featureCollection:{layers:E}}},_getPrintDefinition:function(C,E){var F={operationalLayers:this._createOperationalLayers(C,E)},G=this._vtlExtent||C.extent,H=C.spatialReference;this._vtlExtent=null;C.spatialReference._isWrappable()&&(G=G._normalize(!0),H=G.spatialReference);G={mapOptions:{showAttribution:C.showAttribution,
extent:G.toJson(),spatialReference:H.toJson()}};E.preserveScale&&A.mixin(G.mapOptions,{scale:E.outScale||C.getScale()});C.timeExtent&&A.mixin(G.mapOptions,{time:[C.timeExtent.startTime.getTime(),C.timeExtent.endTime.getTime()]});H={};A.mixin(H,G,F);return H},_createOperationalLayers:function(C,E){var F,G=[],H=0;E.preserveScale&&(H=E.outScale||C.getScale());this.allLayerslegend=this.legendAll?[]:null;this._vtlExtent=null;var L=a.map(C.layerIds,C.getLayer,C);C._mapImageLyr&&L.push(C._mapImageLyr);for(F=
0;F<L.length;F++){var J=L[F];if(J.loaded&&J.visible&&(!H||J.isVisibleAtScale(H))){var S=J.declaredClass;var P={id:J.id,title:A.getObject("arcgisProps.title",!1,J)||J.id,opacity:J.opacity,minScale:J.minScale||0,maxScale:J.maxScale||0};P=A.mixin(P,this._getUrlAndToken(J));J.getNode()&&z.get(J.getNode(),"data-reference")&&(P._isRefLayer=!0);switch(S){case "esri.layers.ArcGISDynamicMapServiceLayer":var Q=[];S=!!J._params.layers;if(J._params.dynamicLayers)S=E.outScale?J._getDynLayerObjs(E.outScale):b.fromJson(J._params.dynamicLayers),
a.forEach(S,function(da){Q.push({id:da.id,name:da.name,layerDefinition:da});delete da.id;delete da.name;delete da.maxScale;delete da.minScale}),0===Q.length&&(P.visibleLayers=[-1]);else if(J.supportsDynamicLayers){if(S||J.layerDefinitions||J.layerTimeOptions){var M=J.createDynamicLayerInfosFromLayerInfos(),N=null;S&&(N=J.visibleLayers);N=n._getVisibleLayers(M,N);var K=n._getLayersForScale(E.outScale||C.getScale(),M);a.forEach(M,function(da){if(!da.subLayerIds){var Y=da.id;-1<a.indexOf(N,Y)&&-1<a.indexOf(K,
Y)&&(da={source:da.source.toJson()},J.layerDefinitions&&J.layerDefinitions[Y]&&(da.definitionExpression=J.layerDefinitions[Y]),J.layerTimeOptions&&J.layerTimeOptions[Y]&&(da.layerTimeOptions=J.layerTimeOptions[Y].toJson()),Q.push({id:Y,layerDefinition:da}))}});0===Q.length&&(P.visibleLayers=[-1])}}else a.forEach(J.layerInfos,function(da){var Y={id:da.id,layerDefinition:{}};J.layerDefinitions&&J.layerDefinitions[da.id]&&(Y.layerDefinition.definitionExpression=J.layerDefinitions[da.id]);J.layerTimeOptions&&
J.layerTimeOptions[da.id]&&(Y.layerDefinition.layerTimeOptions=J.layerTimeOptions[da.id].toJson());(Y.layerDefinition.definitionExpression||Y.layerDefinition.layerTimeOptions)&&Q.push(Y)}),S&&(P.visibleLayers=J.visibleLayers.length?J.visibleLayers:[-1]);Q.length&&(P.layers=Q);G.push(P);this.allLayerslegend&&this.allLayerslegend.push({id:J.id,subLayerIds:J.visibleLayers});break;case "esri.layers.ArcGISImageServiceLayer":P=A.mixin(P,{url:J.url,bandIds:J.bandIds,compressionQuality:J.compressionQuality,
format:J.format,interpolation:J.interpolation});J.mosaicRule&&A.mixin(P,{mosaicRule:J.mosaicRule.toJson()});if(J.renderingRule||J.renderer)this._is11xService?(J.renderingRule&&(P.renderingRule=J.renderingRule.toJson()),J.renderer&&(P.layerDefinition=P.layerDefinition||{},P.layerDefinition.drawingInfo=P.layerDefinition.drawingInfo||{},P.layerDefinition.drawingInfo.renderer=J.renderer.toJson())):(S=J.getExportImageRenderingRule())&&A.mixin(P,{renderingRule:S.toJson()});G.push(P);this.allLayerslegend&&
this.allLayerslegend.push({id:J.id});break;case "esri.layers.RasterXLayer":this._is11xService&&(P=A.mixin(P,{url:J.url,bandIds:J.bandIds,interpolation:J.interpolation}),J.renderer&&(P.layerDefinition=P.layerDefinition||{},P.layerDefinition.drawingInfo=P.layerDefinition.drawingInfo||{},P.layerDefinition.drawingInfo.renderer=J.renderer.toJson()),G.push(P),this.allLayerslegend&&this.allLayerslegend.push({id:J.id}));break;case "esri.layers.WMSLayer":P=A.mixin(P,{url:J.url,title:J.title,type:"wms",version:J.version,
transparentBackground:J.imageTransparency,visibleLayers:J.visibleLayers});G.push(P);this.allLayerslegend&&this.allLayerslegend.push({id:J.id,subLayerIds:J.visibleLayers});break;case "esri.virtualearth.VETiledLayer":S=J.mapStyle;"roadOnDemand"===S?S="Road":"aerialWithLabelsOnDemand"===S&&(S="Hybrid");P=A.mixin(P,{visibility:J.visible,type:"BingMaps"+S,culture:J.culture,key:J.bingMapsKey});G.push(P);break;case "esri.layers.OpenStreetMapLayer":P=A.mixin(P,{credits:J.copyright,type:"OpenStreetMap",url:l.getAbsoluteUrl(J.tileServers[0])});
G.push(P);break;case "esri.layers.WMTSLayer":P=A.mixin(P,{url:J.url,type:"wmts",layer:J._identifier,style:J._style,format:J.format,tileMatrixSet:J._tileMatrixSetId});G.push(P);break;case "esri.layers.MapImageLayer":S=J.getImages();a.forEach(S,function(da,Y){da.visible&&da.href&&(P={id:J.id+"_image"+Y,type:"image",title:J.id,minScale:J.minScale||0,maxScale:J.maxScale||0,opacity:J.opacity*da.opacity,extent:da.extent.toJson()},"data:image/png;base64,"===da.href.substr(0,22)?P.imageData=da.href.substr(22):
P.url=da.href,G.push(P))});break;case "esri.layers.VectorTileLayer":delete P.url;delete P.token;if(this._is11xService&&J.currentStyleInfo.serviceUrl&&J.currentStyleInfo.styleUrl&&(S=e.id&&e.id.findCredential(J.currentStyleInfo.styleUrl),M=e.id&&e.id.findCredential(J.currentStyleInfo.serviceUrl),!S&&!M||"2.1.0"!==this._cimVersion)){P.type="VectorTileLayer";P.styleUrl=J.currentStyleInfo.styleUrl;S&&(P.token=S.token);M&&M.token!==P.token&&(P.additionalTokens=[{url:J.currentStyleInfo.serviceUrl,token:M.token}]);
G.push(P);break}P.type="image";S=this._vtlExtent||C.extent.offset(0,0);var X=E.exportOptions&&E.exportOptions.dpi||96;M={format:"png",pixelRatio:X/96};"MAP_ONLY"!==E.layout||!E.preserveScale||E.outScale&&E.outScale!==C.getScale()||96!==X||!E.exportOptions||E.exportOptions.width%2===C.width%2&&E.exportOptions.height%2===C.height%2||(M.area={x:0,y:0,width:C.width,height:C.height},E.exportOptions.width%2!==C.width%2&&--M.area.width,E.exportOptions.height%2!==C.height%2&&--M.area.height,this._vtlExtent||
(X=C.toMap({x:M.area.width,y:M.area.height}),S.update(S.xmin,X.y,X.x,S.ymax,S.spatialReference),this._vtlExtent=S));P.extent=S._normalize(!0).toJson();S=J.takeScreenshot(M);S.isResolved()&&S.then(function(da){"data:image/png;base64,"===da.dataURL.substr(0,22)&&(P.imageData=da.dataURL.substr(22))});P.imageData&&G.push(P);break;case "esri.layers.WebTiledLayer":S=J.url.replace(/\$\{/g,"{");P=A.mixin(P,{type:"WebTiledLayer",urlTemplate:S,credits:J.copyright});J.subDomains&&0<J.subDomains.length&&(P.subDomains=
J.subDomains);J._wmtsInfo&&(P.wmtsInfo=J._wmtsInfo);delete P.url;G.push(P);break;default:if(J.getTileUrl||J.getImageUrl)P=A.mixin(P,{url:J.url}),G.push(P)}}}L=a.map(C.graphicsLayerIds,C.getLayer,C);for(F=0;F<L.length;F++)J=L[F],J.isFeatureReductionActive&&J.isFeatureReductionActive()&&(J.getSingleGraphics().length?L.splice(++F,0,J.getFeatureReductionLayer()):L[F]=J.getFeatureReductionLayer());for(F=0;F<L.length;F++)if(J=L[F],J.loaded&&J.visible&&(!H||J.isVisibleAtScale(H)))switch(S=J.declaredClass,
S){case "esri.layers.CSVLayer":if(this._is11xService){P={id:J.id,url:J.url,title:J.title,opacity:J.opacity,minScale:J.minScale||0,maxScale:J.maxScale||0,type:"CSV",locationInfo:{latitudeFieldName:J.latitudeFieldName,longitudeFieldName:J.longitudeFieldName},layerDefinition:{drawingInfo:{renderer:J.renderer&&J.renderer.toJson({useLegacyRotationProperties:!0})}}};G.push(P);break}case "esri.layers.FeatureLayer":case "esri.layers.LabelLayer":case "esri.layers.StreamLayer":if("esri.layers.LabelLayer"===
S&&!E.showLabels||J.renderer&&"esri.renderer.HeatmapRenderer"===J.renderer.declaredClass)continue;S=null;J.url&&J.renderer&&("esri.renderer.ScaleDependentRenderer"===J.renderer.declaredClass?"scale"===J.renderer.rangeType?S=J.renderer.getRendererInfoByScale(C.getScale())&&J.renderer.getRendererInfoByScale(C.getScale()).renderer:"zoom"===J.renderer.rangeType&&(S=J.renderer.getRendererInfoByZoom(C.getZoom())&&J.renderer.getRendererInfoByZoom(C.getZoom()).renderer):S=J.renderer);M=S&&"esri.layers.CSVLayer"!==
J.declaredClass&&!this._isFeatureCollectionRequired(S,J)&&!S.valueExpression;X=J.isFeatureReductionActive&&J.isFeatureReductionActive();if(S&&!X&&"esri.renderer.DotDensityRenderer"!==S.declaredClass&&"esri.layers.StreamLayer"!==J.declaredClass&&(this._is11xService||M)&&("esri.renderer.SimpleRenderer"===S.declaredClass||"esri.renderer.TemporalRenderer"===S.declaredClass||null==S.attributeField||A.isString(S.attributeField)&&J._getField(S.attributeField,!0)))if(P={id:J.id,title:A.getObject("arcgisProps.title",
!1,J)||J.id,opacity:J.opacity,minScale:J.minScale||0,maxScale:J.maxScale||0,layerDefinition:{drawingInfo:{renderer:S.toJson({useLegacyRotationProperties:!0})}}},P=A.mixin(P,this._getUrlAndToken(J)),"esri.renderer.TemporalRenderer"===S.declaredClass&&(M=P.layerDefinition.drawingInfo,M.latestObservationRenderer=M.renderer.latestObservationRenderer,M.trackLinesRenderer=M.renderer.trackRenderer,M.observationAger=M.renderer.observationAger,M.renderer=M.renderer.observationRenderer,J._trackIdField&&(P.layerDefinition.timeInfo=
{trackIdField:J._trackIdField})),this._convertSvgRenderer(P.layerDefinition.drawingInfo.renderer),this._is11xService||1>J.opacity||"esri.renderer.TemporalRenderer"===S.declaredClass||this._updateLayerOpacity(P))if(J._params.source&&(S=J._params.source.toJson(),A.mixin(P.layerDefinition,{source:S})),J.getDefinitionExpression()&&A.mixin(P.layerDefinition,{definitionExpression:J.getDefinitionExpression()}),2!==J.mode)0<J.getSelectedFeatures().length&&(S=a.map(J.getSelectedFeatures(),function(da){return da.attributes[J.objectIdField]}),
0<S.length&&J.getSelectionSymbol()&&A.mixin(P,{selectionObjectIds:S,selectionSymbol:J.getSelectionSymbol().toJson()}));else{S=a.map(J.getSelectedFeatures(),function(da){return da.attributes[J.objectIdField]});if(0===S.length||!J._params.drawMode)break;A.mixin(P.layerDefinition,{objectIds:S});S=null;J.getSelectionSymbol()&&(S=new m(J.getSelectionSymbol()));A.mixin(P.layerDefinition.drawingInfo,{renderer:S&&S.toJson()})}else P=this._createFeatureCollection(J,C,null,E);else P=S&&(S.valueExpression||
this._isFeatureCollectionRequired(S,J)||"esri.renderer.DotDensityRenderer"===S.declaredClass)?this._createFeatureCollection(J,C,S,E):this._createFeatureCollection(J,C,null,E);if(!P)continue;G.push(P);this.allLayerslegend&&this.allLayerslegend.push({id:J.id});break;case "esri.layers._GraphicsLayer":case "esri.layers.GraphicsLayer":case "esri.layers.WFSLayer":P=this._createFeatureCollection(J,C,null,E);if(!P)continue;G.push(P);this.allLayerslegend&&this.allLayerslegend.push({id:J.id});break;case "esri.layers.ArcGISImageServiceVectorLayer":P=
{id:J.id,title:A.getObject("arcgisProps.title",!1,J)||J.id,opacity:J.opacity,minScale:J.minScale||0,maxScale:J.maxScale||0,visibility:J.visible,symbolTileSize:J.symbolTileSize,layerDefinition:{drawingInfo:{renderer:J.renderer.toJson({useLegacyRotationProperties:!0})}}},P=A.mixin(P,this._getUrlAndToken(J)),J.mosaicRule&&A.mixin(P,{mosaicRule:J.mosaicRule.toJson()}),G.push(P),this.allLayerslegend&&this.allLayerslegend.push({id:J.id})}H&&a.forEach(G,function(da){da.minScale=0;da.maxScale=0});C.graphics&&
0<C.graphics.graphics.length&&(P=this._createFeatureCollection(C.graphics,C,null,E))&&G.push(P);C._labels&&E.showLabels&&(P=this._createFeatureCollection(C._labels,C,null,E))&&G.push(P);a.forEach(G,function(da,Y,aa){da._isRefLayer&&(delete da._isRefLayer,aa.splice(Y,1),aa.push(da))});return G},_getUrlAndToken:function(C){return{token:C._getToken(),url:C._url?C._url.path:null}},_updateLayerOpacity:function(C){var E=this._colorEvaluator(C);E=a.filter(E,function(L){return A.isArray(L)&&4===L.length});
var F=!0;if(E.length){var G=E[0][3],H;for(H=1;H<E.length;H++)if(G!==E[H][3]){F=!1;break}if(F)for(C.opacity=G/255,H=0;H<E.length;H++)E[H][3]=255}return F},_isFeatureCollectionRequired:function(C,E){if(E&&E.isFeatureReductionActive&&E.isFeatureReductionActive())return!0;var F=!1,G=this._getVariable(C,"rotationInfo",!1);G&&(F=(F=G.field)&&A.isFunction(F)||G.valueExpression);return C.hasVisualVariables("sizeInfo")||C.hasVisualVariables("colorInfo")||C.hasVisualVariables("opacityInfo")||F},_getVariable:function(C,
E,F){if(C)var G=(C=C.getVisualVariablesForType(E,F))&&C[0];return G},_applyVisualVariables:function(C,E){var F=E.renderer,G=E.graphic,H=E.symbol,L=E.mapResolution,J=E.mapScale,S=H.type;if("textsymbol"!==S&&"shieldlabelsymbol"!==S){var P=this._getVariable(F,"sizeInfo",!1),Q=this._getVariable(F,"colorInfo",!1),M=this._getVariable(F,"opacityInfo",!1),N=this._getVariable(F,"rotationInfo",!1);H instanceof q&&(P=this._getVariable(F,"sizeInfo","outline")||P);L=P?F.getSize(G,{sizeInfo:P,shape:"simplemarkersymbol"===
S?H.style:null,resolution:L,scale:J}):G.size;null!=L&&("simplemarkersymbol"===S?C.size=y.px2pt(L):"picturemarkersymbol"===S?(J=H.width/H.height*L,C.width=y.px2pt(J),C.height=y.px2pt(L),0!==H.xoffset&&(C.xoffset=y.px2pt(H.xoffset/H.width*J)),0!==H.yoffset&&(C.yoffset=y.px2pt(H.yoffset/H.height*L))):"simplelinesymbol"===S?C.width=y.px2pt(L):C.outline&&(C.outline.width=y.px2pt(L)));Q&&(!(H=F.getColor(G,{colorInfo:Q}))||"simplemarkersymbol"!==S&&"simplelinesymbol"!==S&&"simplefillsymbol"!==S||(C.color=
k.toJsonColor(H)));M&&(S=F.getOpacity(G,{opacityInfo:M}),null!=S&&C.color&&(C.color[3]=Math.round(255*S)));N&&(F=F.getRotationAngle(G,{rotationInfo:N}))&&(C.angle=-F)}}});A.setObject("tasks.PrintTask",D,e);return D})},"dojox/gfx/canvas":function(){define("./_base dojo/_base/lang dojo/_base/array dojo/_base/declare dojo/_base/window dojo/dom-geometry dojo/dom ./shape ./path ./arc ./matrix ./decompose ./bezierutils".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l){function r(Q,M,N,K,X,da,Y,aa,ca,I){var T=
M.length,ba=0;if(I){var pa=I.l/X;ba=I.i}else pa=M[0]/X;for(;da<Y;){if(da+pa>Y){var ya={l:(da+pa-Y)*X,i:ba};pa=Y-da}ba%2||(Q.beginPath(),Q.arc(N,K,X,da,da+pa,aa),ca&&Q.stroke());da+=pa;++ba;pa=M[ba%T]/X}return ya}function m(Q,M,N,K){var X=0,da=0,Y=0;if(K){var aa=K.l;Y=K.i}else aa=M[0];for(;1>da;)da=l.tAtLength(Q,aa),1==da&&(X=l.computeLength(Q),X={l:aa-X,i:Y}),Q=l.splitBezierAtT(Q,da),Y%2||N.push(Q[0]),Q=Q[1],++Y,aa=M[Y%M.length];return X}function q(Q,M,N,K){var X=[M.last.x,M.last.y].concat(N),da=
!(Q instanceof Array);N=4===N.length?"quadraticCurveTo":"bezierCurveTo";var Y=[];M=m(X,M.canvasDash,Y,K);for(K=0;K<Y.length;++K)X=Y[K],da?(Q.moveTo(X[0],X[1]),Q[N].apply(Q,X.slice(2))):(Q.push("moveTo",[X[0],X[1]]),Q.push(N,X.slice(2)));return M}function v(Q,M,N,K,X,da,Y){var aa=0,ca=0,I=0,T=l.distance(N,K,X,da),ba=0;M=M.canvasDash;var pa=N,ya=K,Da=!(Q instanceof Array);Y?(I=Y.l,ba=Y.i):I+=M[0];for(;.01<Math.abs(1-ca);){I>T&&(aa={l:I-T,i:ba},I=T);ca=I/T;Y=N+(X-N)*ca;var Ha=K+(da-K)*ca;ba++%2||(Da?
(Q.moveTo(pa,ya),Q.lineTo(Y,Ha)):(Q.push("moveTo",[pa,ya]),Q.push("lineTo",[Y,Ha])));pa=Y;ya=Ha;I+=M[ba%M.length]}return aa}var B=D.canvas={},w=null,z=k.multiplyPoint,x=Math.PI,y=2*x,u=x/2;c=A.extend;if(g.global.CanvasRenderingContext2D){g=g.doc.createElement("canvas").getContext("2d");var t="function"==typeof g.setLineDash,C="function"==typeof g.fillText}var E={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,
3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};B.Shape=b("dojox.gfx.canvas.Shape",f.Shape,{_render:function(Q){Q.save();this._renderTransform(Q);this._renderClip(Q);this._renderShape(Q);this._renderFill(Q,!0);this._renderStroke(Q,!0);Q.restore()},_renderClip:function(Q){this.canvasClip&&(this.canvasClip.render(Q),Q.clip())},_renderTransform:function(Q){if("canvasTransform"in this){var M=this.canvasTransform;Q.translate(M.dx,M.dy);Q.rotate(M.angle2);Q.scale(M.sx,M.sy);Q.rotate(M.angle1)}},
_renderShape:function(Q){},_renderFill:function(Q,M){if("canvasFill"in this){var N=this.fillStyle;if("canvasFillImage"in this){var K=N.width,X=N.height,da=this.canvasFillImage.width,Y=this.canvasFillImage.height,aa=Math.min(K==da?1:K/da,X==Y?1:X/Y),ca=(K-aa*da)/2,I=(X-aa*Y)/2;w.width=K;w.height=X;var T=w.getContext("2d");T.clearRect(0,0,K,X);T.drawImage(this.canvasFillImage,0,0,da,Y,ca,I,aa*da,aa*Y);this.canvasFill=Q.createPattern(w,"repeat");delete this.canvasFillImage}Q.fillStyle=this.canvasFill;
M&&("pattern"!==N.type||0===N.x&&0===N.y||Q.translate(N.x,N.y),Q.fill())}else Q.fillStyle="rgba(0,0,0,0.0)"},_renderStroke:function(Q,M){var N=this.strokeStyle;N?(Q.strokeStyle=N.color.toString(),Q.lineWidth=N.width,Q.lineCap=N.cap,"number"==typeof N.join?(Q.lineJoin="miter",Q.miterLimit=N.join):Q.lineJoin=N.join,this.canvasDash?t?(Q.setLineDash(this.canvasDash),M&&Q.stroke()):this._renderDashedStroke(Q,M):M&&Q.stroke()):M||(Q.strokeStyle="rgba(0,0,0,0.0)")},_renderDashedStroke:function(Q,M){},getEventSource:function(){return null},
on:function(){},connect:function(){},disconnect:function(){},canvasClip:null,setClip:function(Q){this.inherited(arguments);var M=Q?"width"in Q?"rect":"cx"in Q?"ellipse":"points"in Q?"polyline":"d"in Q?"path":null:null;if(Q&&!M)return this;this.canvasClip=Q?F(M,Q):null;this.parent&&this.parent._makeDirty();return this}});var F=function(Q,M){switch(Q){case "ellipse":return{canvasEllipse:J({shape:M}),render:function(N){return B.Ellipse.prototype._renderShape.call(this,N)}};case "rect":return{shape:A.delegate(M,
{r:0}),render:function(N){return B.Rect.prototype._renderShape.call(this,N)}};case "path":return{canvasPath:G(M),render:function(N){this.canvasPath._renderShape(N)}};case "polyline":return{canvasPolyline:M.points,render:function(N){return B.Polyline.prototype._renderShape.call(this,N)}}}return null},G=function(Q){var M=new dojox.gfx.canvas.Path;M.canvasPath=[];M._setPath(Q.d);return M},H=function(Q,M,N){var K=Q.prototype[M];Q.prototype[M]=N?function(){this.parent&&this.parent._makeDirty();K.apply(this,
arguments);N.call(this);return this}:function(){this.parent&&this.parent._makeDirty();return K.apply(this,arguments)}};H(B.Shape,"setTransform",function(){this.matrix?this.canvasTransform=D.decompose(this.matrix):delete this.canvasTransform});H(B.Shape,"setFill",function(){var Q=this.fillStyle;if(Q){if("object"==typeof Q&&"type"in Q){var M=this.surface.rawNode.getContext("2d");switch(Q.type){case "linear":case "radial":var N="linear"==Q.type?M.createLinearGradient(Q.x1,Q.y1,Q.x2,Q.y2):M.createRadialGradient(Q.cx,
Q.cy,0,Q.cx,Q.cy,Q.r);a.forEach(Q.colors,function(K){N.addColorStop(K.offset,D.normalizeColor(K.color).toString())});break;case "pattern":w||(w=document.createElement("canvas")),M=new Image,this.surface.downloadImage(M,Q.src),this.canvasFillImage=M}}else N=Q.toString();this.canvasFill=N}else delete this.canvasFill});H(B.Shape,"setStroke",function(){var Q=this.strokeStyle;if(Q){var M=this.strokeStyle.style.toLowerCase();M in E&&(M=E[M]);if(M instanceof Array){this.canvasDash=M=M.slice();var N;for(N=
0;N<M.length;++N)M[N]*=Q.width;if("butt"!=Q.cap){for(N=0;N<M.length;N+=2)M[N]-=Q.width,1>M[N]&&(M[N]=1);for(N=1;N<M.length;N+=2)M[N]+=Q.width}}else delete this.canvasDash}else delete this.canvasDash;this._needsDash=!t&&!!this.canvasDash});H(B.Shape,"setShape");B.Group=b("dojox.gfx.canvas.Group",B.Shape,{constructor:function(){f.Container._init.call(this)},_render:function(Q){Q.save();this._renderTransform(Q);this._renderClip(Q);for(var M=0;M<this.children.length;++M)this.children[M]._render(Q);Q.restore()},
destroy:function(){f.Container.clear.call(this,!0);B.Shape.prototype.destroy.apply(this,arguments)}});B.Rect=b("dojox.gfx.canvas.Rect",[B.Shape,f.Rect],{_renderShape:function(Q){var M=this.shape,N=Math.min(M.r,M.height/2,M.width/2),K=M.x,X=K+M.width,da=M.y;M=da+M.height;var Y=K+N,aa=X-N,ca=da+N,I=M-N;Q.beginPath();Q.moveTo(Y,da);N?(Q.arc(aa,ca,N,-u,0,!1),Q.arc(aa,I,N,0,u,!1),Q.arc(Y,I,N,u,x,!1),Q.arc(Y,ca,N,x,x+u,!1)):(Q.lineTo(aa,da),Q.lineTo(X,I),Q.lineTo(Y,M),Q.lineTo(K,ca));Q.closePath()},_renderDashedStroke:function(Q,
M){var N=this.shape,K=Math.min(N.r,N.height/2,N.width/2),X=N.x,da=X+N.width,Y=N.y,aa=Y+N.height,ca=X+K,I=da-K,T=Y+K,ba=aa-K;K?(Q.beginPath(),N=v(Q,this,ca,Y,I,Y),M&&Q.stroke(),N=r(Q,this.canvasDash,I,T,K,-u,0,!1,M,N),Q.beginPath(),N=v(Q,this,da,T,da,ba,N),M&&Q.stroke(),N=r(Q,this.canvasDash,I,ba,K,0,u,!1,M,N),Q.beginPath(),N=v(Q,this,I,aa,ca,aa,N),M&&Q.stroke(),N=r(Q,this.canvasDash,ca,ba,K,u,x,!1,M,N),Q.beginPath(),N=v(Q,this,X,ba,X,T,N),M&&Q.stroke(),r(Q,this.canvasDash,ca,T,K,x,x+u,!1,M,N)):(Q.beginPath(),
N=v(Q,this,ca,Y,I,Y),N=v(Q,this,I,Y,da,ba,N),N=v(Q,this,da,ba,ca,aa,N),v(Q,this,ca,aa,X,T,N),M&&Q.stroke())}});var L=[];(function(){var Q=h.curvePI4;L.push(Q.s,Q.c1,Q.c2,Q.e);for(var M=45;360>M;M+=45){var N=k.rotateg(M);L.push(z(N,Q.c1),z(N,Q.c2),z(N,Q.e))}})();var J=function(Q){var M=[],N=Q.shape,K=k.normalize([k.translate(N.cx,N.cy),k.scale(N.rx,N.ry)]);var X=z(K,L[0]);M.push([X.x,X.y]);for(N=1;N<L.length;N+=3){var da=z(K,L[N]);var Y=z(K,L[N+1]);X=z(K,L[N+2]);M.push([da.x,da.y,Y.x,Y.y,X.x,X.y])}if(Q._needsDash){X=
[];da=M[0];for(N=1;N<M.length;++N)Y=[],m(da.concat(M[N]),Q.canvasDash,Y),da=[M[N][4],M[N][5]],X.push(Y);Q._dashedPoints=X}return M};B.Ellipse=b("dojox.gfx.canvas.Ellipse",[B.Shape,f.Ellipse],{setShape:function(){this.inherited(arguments);this.canvasEllipse=J(this);return this},setStroke:function(){this.inherited(arguments);t||(this.canvasEllipse=J(this));return this},_renderShape:function(Q){var M=this.canvasEllipse,N;Q.beginPath();Q.moveTo.apply(Q,M[0]);for(N=1;N<M.length;++N)Q.bezierCurveTo.apply(Q,
M[N]);Q.closePath()},_renderDashedStroke:function(Q,M){var N=this._dashedPoints;Q.beginPath();for(var K=0;K<N.length;++K)for(var X=N[K],da=0;da<X.length;++da){var Y=X[da];Q.moveTo(Y[0],Y[1]);Q.bezierCurveTo(Y[2],Y[3],Y[4],Y[5],Y[6],Y[7])}M&&Q.stroke()}});B.Circle=b("dojox.gfx.canvas.Circle",[B.Shape,f.Circle],{_renderShape:function(Q){var M=this.shape;Q.beginPath();Q.arc(M.cx,M.cy,M.r,0,y,1)},_renderDashedStroke:function(Q,M){var N=this.shape,K=0,X=this.canvasDash.length;for(i=0;K<y;){var da=this.canvasDash[i%
X]/N.r;i%2||(Q.beginPath(),Q.arc(N.cx,N.cy,N.r,K,K+da,0),M&&Q.stroke());K+=da;++i}}});B.Line=b("dojox.gfx.canvas.Line",[B.Shape,f.Line],{_renderShape:function(Q){var M=this.shape;Q.beginPath();Q.moveTo(M.x1,M.y1);Q.lineTo(M.x2,M.y2)},_renderDashedStroke:function(Q,M){var N=this.shape;Q.beginPath();v(Q,this,N.x1,N.y1,N.x2,N.y2);M&&Q.stroke()}});B.Polyline=b("dojox.gfx.canvas.Polyline",[B.Shape,f.Polyline],{setShape:function(){this.inherited(arguments);var Q=this.shape.points,M=Q[0],N;this.bbox=null;
this._normalizePoints();if(Q.length)if("number"==typeof M)M=Q;else for(M=[],N=0;N<Q.length;++N){var K=Q[N];M.push(K.x,K.y)}else M=[];this.canvasPolyline=M;return this},_renderShape:function(Q){var M=this.canvasPolyline;if(M.length){Q.beginPath();Q.moveTo(M[0],M[1]);for(var N=2;N<M.length;N+=2)Q.lineTo(M[N],M[N+1])}},_renderDashedStroke:function(Q,M){var N=this.canvasPolyline,K=0;Q.beginPath();for(var X=0;X<N.length;X+=2)K=v(Q,this,N[X],N[X+1],N[X+2],N[X+3],K);M&&Q.stroke()}});B.Image=b("dojox.gfx.canvas.Image",
[B.Shape,f.Image],{setShape:function(){this.inherited(arguments);var Q=new Image;this.surface.downloadImage(Q,this.shape.src);this.canvasImage=Q;return this},_renderShape:function(Q){var M=this.shape;Q.drawImage(this.canvasImage,M.x,M.y,M.width,M.height)}});B.Text=b("dojox.gfx.canvas.Text",[B.Shape,f.Text],{_setFont:function(){this.fontStyle?this.canvasFont=D.makeFontString(this.fontStyle):delete this.canvasFont},getTextWidth:function(){var Q=this.shape,M=0;if(Q.text){var N=this.surface.rawNode.getContext("2d");
N.save();this._renderTransform(N);this._renderFill(N,!1);this._renderStroke(N,!1);this.canvasFont&&(N.font=this.canvasFont);M=N.measureText(Q.text).width;N.restore()}return M},_render:function(Q){Q.save();this._renderTransform(Q);this._renderFill(Q,!1);this._renderStroke(Q,!1);this._renderShape(Q);Q.restore()},_renderShape:function(Q){var M=this.shape;M.text&&(Q.textAlign="middle"===M.align?"center":M.align,this.canvasFont&&(Q.font=this.canvasFont),this.canvasFill&&Q.fillText(M.text,M.x,M.y),this.strokeStyle&&
(Q.beginPath(),Q.strokeText(M.text,M.x,M.y),Q.closePath()))}});H(B.Text,"setFont");C||B.Text.extend({getTextWidth:function(){return 0},getBoundingBox:function(){return null},_renderShape:function(){}});var S={M:"_moveToA",m:"_moveToR",L:"_lineToA",l:"_lineToR",H:"_hLineToA",h:"_hLineToR",V:"_vLineToA",v:"_vLineToR",C:"_curveToA",c:"_curveToR",S:"_smoothCurveToA",s:"_smoothCurveToR",Q:"_qCurveToA",q:"_qCurveToR",T:"_qSmoothCurveToA",t:"_qSmoothCurveToR",A:"_arcTo",a:"_arcTo",Z:"_closePath",z:"_closePath"};
B.Path=b("dojox.gfx.canvas.Path",[B.Shape,n.Path],{constructor:function(){this.lastControl={}},setShape:function(){this.canvasPath=[];this._dashedPath=[];return this.inherited(arguments)},setStroke:function(){this.inherited(arguments);t||(this.segmented=!1,this._confirmSegmented());return this},_setPath:function(){this._dashResidue=null;this.inherited(arguments)},_updateWithSegment:function(Q){var M=A.clone(this.last);this[S[Q.action]](this.canvasPath,Q.action,Q.args,this._needsDash?this._dashedPath:
null);this.last=M;this.inherited(arguments)},_renderShape:function(Q){var M=this.canvasPath;Q.beginPath();for(var N=0;N<M.length;N+=2)Q[M[N]].apply(Q,M[N+1])},_renderDashedStroke:t?function(){}:function(Q,M){var N=this._dashedPath;Q.beginPath();for(var K=0;K<N.length;K+=2)Q[N[K]].apply(Q,N[K+1]);M&&Q.stroke()},_moveToA:function(Q,M,N,K){Q.push("moveTo",[N[0],N[1]]);K&&K.push("moveTo",[N[0],N[1]]);for(M=2;M<N.length;M+=2)Q.push("lineTo",[N[M],N[M+1]]),K&&(this._dashResidue=v(K,this,N[M-2],N[M-1],N[M],
N[M+1],this._dashResidue));this.last.x=N[N.length-2];this.last.y=N[N.length-1];this.lastControl={}},_moveToR:function(Q,M,N,K){M="x"in this.last?[this.last.x+=N[0],this.last.y+=N[1]]:[this.last.x=N[0],this.last.y=N[1]];Q.push("moveTo",M);K&&K.push("moveTo",M);for(M=2;M<N.length;M+=2)Q.push("lineTo",[this.last.x+=N[M],this.last.y+=N[M+1]]),K&&(this._dashResidue=v(K,this,K[K.length-1][0],K[K.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_lineToA:function(Q,M,N,K){for(M=
0;M<N.length;M+=2)K&&(this._dashResidue=v(K,this,this.last.x,this.last.y,N[M],N[M+1],this._dashResidue)),Q.push("lineTo",[N[M],N[M+1]]);this.last.x=N[N.length-2];this.last.y=N[N.length-1];this.lastControl={}},_lineToR:function(Q,M,N,K){for(M=0;M<N.length;M+=2)Q.push("lineTo",[this.last.x+=N[M],this.last.y+=N[M+1]]),K&&(this._dashResidue=v(K,this,K[K.length-1][0],K[K.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_hLineToA:function(Q,M,N,K){for(M=0;M<N.length;++M)Q.push("lineTo",
[N[M],this.last.y]),K&&(this._dashResidue=v(K,this,K[K.length-1][0],K[K.length-1][1],N[M],this.last.y,this._dashResidue));this.last.x=N[N.length-1];this.lastControl={}},_hLineToR:function(Q,M,N,K){for(M=0;M<N.length;++M)Q.push("lineTo",[this.last.x+=N[M],this.last.y]),K&&(this._dashResidue=v(K,this,K[K.length-1][0],K[K.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_vLineToA:function(Q,M,N,K){for(M=0;M<N.length;++M)Q.push("lineTo",[this.last.x,N[M]]),K&&(this._dashResidue=
v(K,this,K[K.length-1][0],K[K.length-1][1],this.last.x,N[M],this._dashResidue));this.last.y=N[N.length-1];this.lastControl={}},_vLineToR:function(Q,M,N,K){for(M=0;M<N.length;++M)Q.push("lineTo",[this.last.x,this.last.y+=N[M]]),K&&(this._dashResidue=v(K,this,K[K.length-1][0],K[K.length-1][1],this.last.x,this.last.y,this._dashResidue));this.lastControl={}},_curveToA:function(Q,M,N,K){for(M=0;M<N.length;M+=6)Q.push("bezierCurveTo",N.slice(M,M+6)),K&&(this._dashResidue=q(K,this,Q[Q.length-1],this._dashResidue));
this.last.x=N[N.length-2];this.last.y=N[N.length-1];this.lastControl.x=N[N.length-4];this.lastControl.y=N[N.length-3];this.lastControl.type="C"},_curveToR:function(Q,M,N,K){for(M=0;M<N.length;M+=6)Q.push("bezierCurveTo",[this.last.x+N[M],this.last.y+N[M+1],this.lastControl.x=this.last.x+N[M+2],this.lastControl.y=this.last.y+N[M+3],this.last.x+N[M+4],this.last.y+N[M+5]]),K&&(this._dashResidue=q(K,this,Q[Q.length-1],this._dashResidue)),this.last.x+=N[M+4],this.last.y+=N[M+5];this.lastControl.type="C"},
_smoothCurveToA:function(Q,M,N,K){for(M=0;M<N.length;M+=4){var X="C"==this.lastControl.type;Q.push("bezierCurveTo",[X?2*this.last.x-this.lastControl.x:this.last.x,X?2*this.last.y-this.lastControl.y:this.last.y,N[M],N[M+1],N[M+2],N[M+3]]);K&&(this._dashResidue=q(K,this,Q[Q.length-1],this._dashResidue));this.lastControl.x=N[M];this.lastControl.y=N[M+1];this.lastControl.type="C"}this.last.x=N[N.length-2];this.last.y=N[N.length-1]},_smoothCurveToR:function(Q,M,N,K){for(M=0;M<N.length;M+=4){var X="C"==
this.lastControl.type;Q.push("bezierCurveTo",[X?2*this.last.x-this.lastControl.x:this.last.x,X?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+N[M],this.last.y+N[M+1],this.last.x+N[M+2],this.last.y+N[M+3]]);K&&(this._dashResidue=q(K,this,Q[Q.length-1],this._dashResidue));this.lastControl.x=this.last.x+N[M];this.lastControl.y=this.last.y+N[M+1];this.lastControl.type="C";this.last.x+=N[M+2];this.last.y+=N[M+3]}},_qCurveToA:function(Q,M,N,K){for(M=0;M<N.length;M+=4)Q.push("quadraticCurveTo",
N.slice(M,M+4));K&&(this._dashResidue=q(K,this,Q[Q.length-1],this._dashResidue));this.last.x=N[N.length-2];this.last.y=N[N.length-1];this.lastControl.x=N[N.length-4];this.lastControl.y=N[N.length-3];this.lastControl.type="Q"},_qCurveToR:function(Q,M,N,K){for(M=0;M<N.length;M+=4)Q.push("quadraticCurveTo",[this.lastControl.x=this.last.x+N[M],this.lastControl.y=this.last.y+N[M+1],this.last.x+N[M+2],this.last.y+N[M+3]]),K&&(this._dashResidue=q(K,this,Q[Q.length-1],this._dashResidue)),this.last.x+=N[M+
2],this.last.y+=N[M+3];this.lastControl.type="Q"},_qSmoothCurveToA:function(Q,M,N,K){for(M=0;M<N.length;M+=2){var X="Q"==this.lastControl.type;Q.push("quadraticCurveTo",[this.lastControl.x=X?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=X?2*this.last.y-this.lastControl.y:this.last.y,N[M],N[M+1]]);K&&(this._dashResidue=q(K,this,Q[Q.length-1],this._dashResidue));this.lastControl.type="Q"}this.last.x=N[N.length-2];this.last.y=N[N.length-1]},_qSmoothCurveToR:function(Q,M,N,K){for(M=
0;M<N.length;M+=2){var X="Q"==this.lastControl.type;Q.push("quadraticCurveTo",[this.lastControl.x=X?2*this.last.x-this.lastControl.x:this.last.x,this.lastControl.y=X?2*this.last.y-this.lastControl.y:this.last.y,this.last.x+N[M],this.last.y+N[M+1]]);K&&(this._dashResidue=q(K,this,Q[Q.length-1],this._dashResidue));this.lastControl.type="Q";this.last.x+=N[M];this.last.y+=N[M+1]}},_arcTo:function(Q,M,N,K){M="a"==M;for(var X=0;X<N.length;X+=7){var da=N[X+5],Y=N[X+6];M&&(da+=this.last.x,Y+=this.last.y);
var aa=h.arcAsBezier(this.last,N[X],N[X+1],N[X+2],N[X+3]?1:0,N[X+4]?1:0,da,Y);a.forEach(aa,function(ca){Q.push("bezierCurveTo",ca)});K&&(this._dashResidue=q(K,this,p,this._dashResidue));this.last.x=da;this.last.y=Y}this.lastControl={}},_closePath:function(Q,M,N,K){Q.push("closePath",[]);K&&(this._dashResidue=v(K,this,this.last.x,this.last.y,K[1][0],K[1][1],this._dashResidue));this.lastControl={}}});a.forEach("moveTo lineTo hLineTo vLineTo curveTo smoothCurveTo qCurveTo qSmoothCurveTo arcTo closePath".split(" "),
function(Q){H(B.Path,Q)});B.TextPath=b("dojox.gfx.canvas.TextPath",[B.Shape,n.TextPath],{_renderShape:function(Q){},_setText:function(){},_setFont:function(){}});B.Surface=b("dojox.gfx.canvas.Surface",f.Surface,{constructor:function(){f.Container._init.call(this);this.pendingImageCount=0;this.makeDirty()},destroy:function(){f.Container.clear.call(this,!0);this.inherited(arguments)},setDimensions:function(Q,M){this.width=D.normalizedLength(Q);this.height=D.normalizedLength(M);if(!this.rawNode)return this;
var N=!1;this.rawNode.width!=this.width&&(this.rawNode.width=this.width,N=!0);this.rawNode.height!=this.height&&(this.rawNode.height=this.height,N=!0);N&&this.makeDirty();return this},getDimensions:function(){return this.rawNode?{width:this.rawNode.width,height:this.rawNode.height}:null},_render:function(Q){!this.rawNode||!Q&&this.pendingImageCount||(Q=this.rawNode.getContext("2d"),Q.clearRect(0,0,this.rawNode.width,this.rawNode.height),this.render(Q),"pendingRender"in this&&(clearTimeout(this.pendingRender),
delete this.pendingRender))},render:function(Q){Q.save();for(var M=0;M<this.children.length;++M)this.children[M]._render(Q);Q.restore()},makeDirty:function(){this.pendingImagesCount||"pendingRender"in this||this._batch||(this.pendingRender=setTimeout(A.hitch(this,this._render),0))},downloadImage:function(Q,M){var N=A.hitch(this,this.onImageLoad);!this.pendingImageCount++&&"pendingRender"in this&&(clearTimeout(this.pendingRender),delete this.pendingRender);Q.onload=N;Q.onerror=N;Q.onabort=N;Q.src=
M},onImageLoad:function(){--this.pendingImageCount||(this.onImagesLoaded(),this._render())},onImagesLoaded:function(){},getEventSource:function(){return null},connect:function(){},disconnect:function(){},on:function(){}});B.createSurface=function(Q,M,N){if(!M&&!N){var K=d.position(Q);M=M||K.w;N=N||K.h}"number"==typeof M&&(M+="px");"number"==typeof N&&(N+="px");K=new B.Surface;Q=e.byId(Q);var X=Q.ownerDocument.createElement("canvas");X.width=D.normalizedLength(M);X.height=D.normalizedLength(N);Q.appendChild(X);
K.rawNode=X;K._parent=Q;return K.surface=K};var P=f.Container;b={openBatch:function(){++this._batch;return this},closeBatch:function(){this._batch=0<this._batch?--this._batch:0;this._makeDirty();return this},_makeDirty:function(){this._batch||this.surface.makeDirty()},add:function(Q){this._makeDirty();return P.add.apply(this,arguments)},remove:function(Q,M){this._makeDirty();return P.remove.apply(this,arguments)},clear:function(){this._makeDirty();return P.clear.apply(this,arguments)},getBoundingBox:P.getBoundingBox,
_moveChildToFront:function(Q){this._makeDirty();return P._moveChildToFront.apply(this,arguments)},_moveChildToBack:function(Q){this._makeDirty();return P._moveChildToBack.apply(this,arguments)}};n={createObject:function(Q,M){var N=new Q;N.surface=this.surface;N.setShape(M);this.add(N);return N}};c(B.Group,b);c(B.Group,f.Creator);c(B.Group,n);c(B.Surface,b);c(B.Surface,f.Creator);c(B.Surface,n);B.fixTarget=function(Q,M){return!0};return B})},"dojox/gfx/arc":function(){define(["./_base","dojo/_base/lang",
"./matrix"],function(D,A,a){function b(h){var k=Math.cos(h);h=Math.sin(h);var c={x:k+4/3*(1-k),y:h-4/3*k*(1-k)/h};return{s:{x:k,y:-h},c1:{x:c.x,y:-c.y},c2:c,e:{x:k,y:h}}}var g=2*Math.PI,d=Math.PI/4,e=Math.PI/8,f=d+e,n=b(e);return D.arc={unitArcAsBezier:b,curvePI4:n,arcAsBezier:function(h,k,c,l,r,m,q,v){r=!!r;m=!!m;var B=a._degToRad(l);l=k*k;var w=c*c,z=a.multiplyPoint(a.rotate(-B),{x:(h.x-q)/2,y:(h.y-v)/2}),x=z.x*z.x,y=z.y*z.y;l=Math.sqrt((l*w-l*y-w*x)/(l*y+w*x));isNaN(l)&&(l=0);l={x:l*k*z.y/c,y:-l*
c*z.x/k};r==m&&(l={x:-l.x,y:-l.y});l=a.multiplyPoint([a.translate((h.x+q)/2,(h.y+v)/2),a.rotate(B)],l);k=a.normalize([a.translate(l.x,l.y),a.rotate(B),a.scale(k,c)]);l=a.invert(k);h=a.multiplyPoint(l,h);v=a.multiplyPoint(l,q,v);q=Math.atan2(h.y,h.x);l=q-Math.atan2(v.y,v.x);m&&(l=-l);0>l?l+=g:l>g&&(l-=g);c=e;v=n;c=m?c:-c;h=[];for(r=l;0<r;r-=d)r<f&&(c=r/2,v=b(c),c=m?c:-c,r=0),z=a.normalize([k,a.rotate(q+c)]),m?(l=a.multiplyPoint(z,v.c1),B=a.multiplyPoint(z,v.c2),z=a.multiplyPoint(z,v.e)):(l=a.multiplyPoint(z,
v.c2),B=a.multiplyPoint(z,v.c1),z=a.multiplyPoint(z,v.s)),h.push([l.x,l.y,B.x,B.y,z.x,z.y]),q+=2*c;return h}}})},"dojox/gfx/decompose":function(){define(["./_base","dojo/_base/lang","./matrix"],function(D,A,a){function b(n,h){return Math.abs(n-h)<=1E-6*(Math.abs(n)+Math.abs(h))}function g(n,h,k,c){if(!isFinite(n))return k;if(!isFinite(k))return n;h=Math.abs(h);c=Math.abs(c);return(h*n+c*k)/(h+c)}function d(n){n=a.normalize(n);var h=-n.xx-n.yy,k=n.xx*n.yy-n.xy*n.yx,c=Math.sqrt(h*h-4*k);h=-(h+(0>h?
-c:c))/2;k/=h;c=n.xy/(h-n.xx);var l=1,r=n.xy/(k-n.xx),m=1;b(h,k)&&(c=1,r=l=0,m=1);isFinite(c)||(c=1,l=(h-n.xx)/n.xy,isFinite(l)||(c=(h-n.yy)/n.yx,l=1,isFinite(c)||(c=1,l=n.yx/(h-n.yy))));isFinite(r)||(r=1,m=(k-n.xx)/n.xy,isFinite(m)||(r=(k-n.yy)/n.yx,m=1,isFinite(r)||(r=1,m=n.yx/(k-n.yy))));n=Math.sqrt(c*c+l*l);var q=Math.sqrt(r*r+m*m);isFinite(c/=n)||(c=0);isFinite(l/=n)||(l=0);isFinite(r/=q)||(r=0);isFinite(m/=q)||(m=0);return{value1:h,value2:k,vector1:{x:c,y:l},vector2:{x:r,y:m}}}function e(n,
h){var k=0>n.xx*n.yy||0<n.xy*n.yx?-1:1,c=h.angle1=(Math.atan2(n.yx,n.yy)+Math.atan2(-k*n.xy,k*n.xx))/2;k=Math.cos(c);c=Math.sin(c);h.sx=g(n.xx/k,k,-n.xy/c,c);h.sy=g(n.yy/k,k,n.yx/c,c);return h}function f(n,h){var k=0>n.xx*n.yy||0<n.xy*n.yx?-1:1,c=h.angle2=(Math.atan2(k*n.yx,k*n.xx)+Math.atan2(-n.xy,n.yy))/2;k=Math.cos(c);c=Math.sin(c);h.sx=g(n.xx/k,k,n.yx/c,c);h.sy=g(n.yy/k,k,-n.xy/c,c);return h}return D.decompose=function(n){var h=a.normalize(n);n={dx:h.dx,dy:h.dy,sx:1,sy:1,angle1:0,angle2:0};if(b(h.xy,
0)&&b(h.yx,0))return A.mixin(n,{sx:h.xx,sy:h.yy});if(b(h.xx*h.yx,-h.xy*h.yy))return e(h,n);if(b(h.xx*h.xy,-h.yx*h.yy))return f(h,n);var k=new a.Matrix2D(h);var c=A.mixin(k,{dx:0,dy:0,xy:k.yx,yx:k.xy});k=d([h,c]);c=d([c,h]);k=new a.Matrix2D({xx:k.vector1.x,xy:k.vector2.x,yx:k.vector1.y,yy:k.vector2.y});c=new a.Matrix2D({xx:c.vector1.x,xy:c.vector1.y,yx:c.vector2.x,yy:c.vector2.y});h=new a.Matrix2D([a.invert(k),h,a.invert(c)]);e(c,n);h.xx*=n.sx;h.yy*=n.sy;f(k,n);h.xx*=n.sx;h.yy*=n.sy;return A.mixin(n,
{sx:h.xx,sy:h.yy})}})},"dojox/gfx/bezierutils":function(){define(["./_base"],function(D){D=D.bezierutils={};D.tAtLength=function(e,f){var n=0,h=6==e.length,k=0,c=0,l=h?b:d,r=function(m,q){for(var v=0,B=0;B<m.length-2;B+=2)v+=a(m[B],m[B+1],m[B+2],m[B+3]);B=h?a(e[0],e[1],e[4],e[5]):a(e[0],e[1],e[6],e[7]);v-B>q||k+v>f+q?(++c,v=l(m,.5),r(v[0],q),Math.abs(k-f)<=q||r(v[1],q)):(k+=v,n+=1/(1<<c))};f&&r(e,.5);return n};var A=D.computeLength=function(e){for(var f=6==e.length,n=0,h=0;h<e.length-2;h+=2)n+=a(e[h],
e[h+1],e[h+2],e[h+3]);h=f?a(e[0],e[1],e[4],e[5]):a(e[0],e[1],e[6],e[7]);return.1<n-h?(e=f?b(e,.5):g(e,.5),n=A(e[0],f),n+=A(e[1],f)):n},a=D.distance=function(e,f,n,h){return Math.sqrt((n-e)*(n-e)+(h-f)*(h-f))},b=function(e,f){var n=1-f,h=n*n,k=f*f,c=e[0],l=e[1],r=e[2],m=e[3],q=e[4],v=e[5],B=h*c+2*n*f*r+k*q;h=h*l+2*n*f*m+k*v;return[[c,l,n*c+f*r,n*l+f*m,B,h],[B,h,n*r+f*q,n*m+f*v,q,v]]},g=function(e,f){var n=1-f,h=n*n,k=h*n,c=f*f,l=c*f,r=e[0],m=e[1],q=e[2],v=e[3],B=e[4],w=e[5],z=e[6],x=e[7],y=k*r+3*h*
f*q+3*n*c*B+l*z;k=k*m+3*h*f*v+3*n*c*w+l*x;return[[r,m,n*r+f*q,n*m+f*v,h*r+2*n*f*q+c*B,h*m+2*n*f*v+c*w,y,k],[y,k,h*q+2*n*f*B+c*z,h*v+2*n*f*w+c*x,n*B+f*z,n*w+f*x,z,x]]},d=D.splitBezierAtT=function(e,f){return 6==e.length?b(e,f):g(e,f)};return D})},"dojox/json/query":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojox","dojo/_base/array"],function(D,A,a){A.getObject("json",!0,a);a.json._slice=function(b,g,d,e){var f=b.length,n=[];d=d||f;g=0>g?Math.max(0,g+f):Math.min(f,g);for(d=0>d?Math.max(0,
d+f):Math.min(f,d);g<d;g+=e)n.push(b[g]);return n};a.json._find=function(b,g){function d(n){g&&(!0!==g||n instanceof Array?n[g]&&e.push(n[g]):e.push(n));for(var h in n){var k=n[h];g?k&&"object"==typeof k&&d(k):e.push(k)}}var e=[];if(g instanceof Array){if(1==g.length)return b[g[0]];for(var f=0;f<g.length;f++)e.push(b[g[f]])}else d(b);return e};a.json._distinctFilter=function(b,g){for(var d=[],e={},f=0,n=b.length;f<n;++f){var h=b[f];g(h,f,b)&&("object"==typeof h&&h?h.__included||(h.__included=!0,d.push(h)):
e[h+typeof h]||(e[h+typeof h]=!0,d.push(h)))}f=0;for(n=d.length;f<n;++f)d[f]&&delete d[f].__included;return d};return a.json.query=function(b,g){function d(c,l,r,m,q,v,B,w){return f[w].match(/[\*\?]/)||"~"==B?"/^"+f[w].substring(1,f[w].length-1).replace(/\\([btnfr\\"'])|([^\w\*\?])/g,"\\$1$2").replace(/([\*\?])/g,"[\\w\\W]$1")+("~"==B?"$/i":"$/")+".test("+l+")":c}var e=0,f=[];b=b.replace(/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'|[\[\]]/g,function(c){e+="["==c?1:"]"==c?-1:0;return"]"==c&&0<e?"`]":'"'==c.charAt(0)||
"'"==c.charAt(0)?"`"+(f.push(c)-1):c});var n="";b.replace(/(\]|\)|push|pop|shift|splice|sort|reverse)\s*\(/,function(){throw Error("Unsafe function call");});b=b.replace(/([^<>=]=)([^=])/g,"$1\x3d$2").replace(/@|(\.\s*)?[a-zA-Z\$_]+(\s*:)?/g,function(c){return"."==c.charAt(0)?c:"@"==c?"$obj":(c.match(/:|^(\$|Math|true|false|null)$/)?"":"$obj.")+c}).replace(/\.?\.?\[(`\]|[^\]])*\]|\?.*|\.\.([\w\$_]+)|\.\*/g,function(c,l,r){return(l=c.match(/^\.?\.?(\[\s*\^?\?|\^?\?|\[\s*==)(.*?)\]?$/))?(r="",c.match(/^\./)&&
(n="dojox.json._find("+n,r=",true)"),n=(l[1].match(/=/)?"dojo.map":l[1].match(/\^/)?"dojox.json._distinctFilter":"dojo.filter")+"("+n,r+",function($obj){return "+l[2]+"})"):(l=c.match(/^\[\s*([\/\\].*)\]/))?".concat().sort(function(a,b){"+l[1].replace(/\s*,?\s*([\/\\])\s*([^,\\\/]+)/g,function(m,q,v){return"var av\x3d "+v.replace(/\$obj/,"a")+",bv\x3d "+v.replace(/\$obj/,"b")+";if(av\x3ebv||bv\x3d\x3dnull){return "+("/"==q?1:-1)+";}\nif(bv\x3eav||av\x3d\x3dnull){return "+("/"==q?-1:1)+";}\n"})+"return 0;})":
(l=c.match(/^\[(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)\]/))?(n="dojox.json._slice("+n,","+(l[1]||0)+","+(l[2]||0)+","+(l[3]||1)+")"):c.match(/^\.\.|\.\*|\[\s*\*\s*\]|,/)?(n="dojox.json._find("+n,("."==c.charAt(1)?",'"+r+"'":c.match(/,/)?","+c:"")+")"):c}).replace(/(\$obj\s*((\.\s*[\w_$]+\s*)|(\[\s*`([0-9]+)\s*`\]))*)(==|~)\s*`([0-9]+)/g,d).replace(/`([0-9]+)\s*(==|~)\s*(\$obj\s*((\.\s*[\w_$]+)|(\[\s*`([0-9]+)\s*`\]))*)/g,function(c,l,r,m,q,v,B,w){return d(c,m,q,v,B,w,r,l)});b=n+("$"==b.charAt(0)?"":"$")+
b.replace(/`([0-9]+|\])/g,function(c,l){return"]"==l?"]":f[l]});for(var h=eval("1\x26\x26function($,$1,$2,$3,$4,$5,$6,$7,$8,$9){var $obj\x3d$;return "+b+"}"),k=0;k<arguments.length-1;k++)arguments[k]=arguments[k+1];return g?h.apply(this,arguments):h}})},"esri/tasks/PrintParameters":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.PrintParameters",map:null,template:null,outSpatialReference:null,extraParameters:null});
A.setObject("tasks.PrintParameters",D,b);return D})},"esri/tasks/LegendLayer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel"],function(D,A,a,b){D=D(null,{declaredClass:"esri.tasks.LegendLayer",layerId:null,subLayerIds:null});A.setObject("tasks.LegendLayer",D,b);return D})},"arcgisonline/map/thumbnail/createHiddenMap":function(){define("dojo/on dojo/dom dojo/json dojo/aspect dojo/Deferred dojo/promise/all dojo/dom-construct dojo/_base/lang dojo/_base/array ../../esriGeowConfig esri/arcgis/utils".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k){return function(c,l,r,m){var q=A.byId("hiddenMapDiv");A.byId("hiddenMapDiv")||(q=e.create("div",{id:"hiddenMapDiv",style:{position:"absolute",left:"-1000px",top:"-1000px",width:"200px",height:"130px"}},document.body));e.create("div",{id:"hiddenMap",style:{width:"200px",height:"130px"}},q);q={item:{}};q.item.extent=l;q.itemData=c;k.arcgisUrl=h.restBaseUrl+"content/items";k.createMap(q,"hiddenMap",{mapOptions:{nav:!1},bingMapsKey:window.esriGeowConfig.self.bingKey}).then(function(v){var B=
function(u){var t=new g;u._heatmapManager?b.after(u._heatmapManager,"recalculateHeatmap",function(){t.resolve()}):t.resolve();return t},w=function(u){var t=new g;if(u.updating){"esri.layers.VectorTileLayer"===u.declaredClass&&setTimeout(function(){C&&(C.remove(),t.resolve())},1E4);var C=D(u,"update-end",function(){C.remove();t.resolve()})}else t.resolve();return t},z=function(u){var t=new g;"esri.layers.VectorTileLayer"===u.declaredClass&&setTimeout(function(){C&&(C.remove(),t.resolve())},5E3);var C=
D(u,"update-start",function(){C.remove();w(u).then(function(){t.resolve()})});return t},x=function(u){var t=new g,C=setInterval(f.hitch(this,function(E,F){E.graphics&&E.graphics.length?(clearInterval(C),t.resolve()):10<F[0]?(clearInterval(C),t.resolve()):F[0]+=1},u,[0]),500);return t},y=[];n.forEach(v.map.graphicsLayerIds,function(u){u=v.map.getLayer(u);u.renderer&&"heatmap"===u.renderer.type?y.push(B(u)):"esri.layers.WFSLayer"===u.declaredClass?y.push(x(u)):u.updating&&y.push(w(u))});n.forEach(v.map.layerIds,
function(u){u=v.map.getLayer(u);u.updating?y.push(w(u)):"esri.layers.VectorTileLayer"===u.declaredClass&&y.push(z(u))});y.length?d(y).then(function(u){setTimeout(function(){r(v.map)},1E3)}):r(v.map)},function(v){m&&m(v)})}})},"arcgisonline/map/thumbnail/getExtentWithFeatures":function(){define("dojo/Deferred esri/layers/FeatureLayer esri/layers/StreamLayer esri/SpatialReference arcgisonline/map/core/projectExtent arcgisonline/map/core/getExtentFromCenter arcgisonline/map/core/getScaleForExtent".split(" "),
function(D,A,a,b,g,d,e){return function(f,n,h){function k(){c.resolve(n)}var c=new D;if(!(f.layer instanceof A)||f.layer instanceof a)return c.resolve(n),c;var l=f.layer;f.layers&&(l=f.layers[0]);l.addPlugin("esri/plugins/FeatureLayerStatistics").then(function(){l.statisticsPlugin.getSuggestedScaleRange().then(function(r){if(r.center){var m=d(r.center,1280,r.minScale);if(0<r.relaxedMinScale)for(var q=e(m,200),v=800;q>r.relaxedMinScale&&!(m=d(r.center,v,r.minScale),q=e(m,200),v-=200,0>=v););g(m,new b({wkid:4326}),
function(B){n=[[B[0].xmin,B[0].ymin],[B[0].xmax,B[0].ymax]];k()},k)}else k()},k)},k);return c}})},"esri/layers/StreamLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/array dojo/_base/Color dojo/_base/lang dojo/Deferred dojo/has dojo/io-query dojo/on dojo/aspect ../kernel ../request ../graphic ./FeatureLayer ./StreamMode ./StreamTrackManager ../geometry/jsonUtils ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleMarkerSymbol ../renderers/SimpleRenderer ./PurgeOptions".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y){D=D([r],{declaredClass:"esri.layers.StreamLayer",_preventInit:!0,constructor:function(u,t){t=t||{};t.mode&&t.mode!==r.MODE_STREAM||(this._isStream=!0,this.currentMode=this.mode=r.MODE_STREAM,this._mode=new m(this));this.purgeOptions=new y(this,t.purgeOptions||{});this.purgeInterval=t.purgeInterval||0;this._reconnectAttempts=0;this.maxReconnectAttempts=10;this.socket=this._reconnectTimeoutId=null;this._keepLatestQueried=!1;this._keepLatestUrl=null;
this._relatedQueried=!1;this._joinField=this._relatedUrl=null;this._refreshing=!1;this._attemptReconnect=g.hitch(this,this._attemptReconnect);this._purge=g.hitch(this,this._purge);this._processServiceJson=g.hitch(this,this._processServiceJson);if(g.isObject(u)&&u.layerDefinition)this._initFeatureLayer(u,t);else{var C=this;c({url:u,content:g.mixin({f:"json"}),callbackParamName:"callback"}).then(function(E){C._processServiceJson(E,t)},function(E){C._errorHandler(E)})}},_processServiceJson:function(u,
t){var C=this;u.relatedFeatures&&u.relatedFeatures.featuresUrl&&u.relatedFeatures.joinField?(this._relatedUrl=u.relatedFeatures.featuresUrl,this.objectIdField=this._joinField=u.relatedFeatures.joinField,c({url:this._relatedUrl,content:{f:"json"},callbackParamName:"callback"}).then(function(E){E=E.fields||[];var F=a.map(u.fields,function(G){return G.name.toLowerCase()});a.forEach(E,function(G){-1===a.indexOf(F,G.name.toLowerCase())&&u.fields.push(G)});t.resourceInfo=u;C._initFeatureLayer(C._url,t)},
function(E){C.onError({error:E})})):(t.resourceInfo=u,this._initFeatureLayer(this._url,t))},_initLayer:function(u,t){this.inherited(arguments);if(u){var C;if(u.layerDefinition)this.purgeOptions=new y(this,this._params.purgeOptions||{}),this.socketUrl=this._params.socketUrl||u.layerDefinition.socketUrl||void 0;else{if(this._params.socketUrl)this.socketUrl=this._params.socketUrl;else{var E=this._getWebsocketConnectionInfo(u),F=E.urls;F&&F.length?(this._socketUrls=F,this.socketUrl=F[0],this.socketDirection=
"broadcast"===this._params.socketDirection?"broadcast":"subscribe",this.socketUrl+="/"+this.socketDirection,this._websocketToken=E.token,F.length>this.maxReconnectAttempts&&(this.maxReconnectAttempts=F.length)):(this.socketUrl=void 0,E="No web socket urls were retrieved from the Stream Service. Layer will not attempt to connect.","https:"===location.protocol&&(E+=" An insecure web socket connection cannot be made from a secure web page."),this.onError(Error(E)))}if(this._params.filter)try{this._filter=
C=this._makeFilter(this._params.filter)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=null}if(this._params.geometryDefinition||this._outFields||this._defnExpr){C=C||{};C.geometry=this._params.geometryDefinition;C.outFields=this._outFields;C.where=this._defnExpr;try{this._filter=C=this._makeFilter(C)}catch(G){this.onError(Error("Error trying to create filter object: "+G+". Layer will not have filter applied")),this._filter=
null}}}this.maximumTrackPoints=this._params.maximumTrackPoints||0===this._params.maximumTrackPoints?this._params.maximumTrackPoints:1;(this._params.refreshRate||0===this._params.refreshRate)&&this._mode&&this._mode._setRefreshRate&&this._mode._setRefreshRate(this._params.refreshRate);this._keepLatestUrl=u.keepLatestArchive?u.keepLatestArchive.featuresUrl:null;u.relatedFeatures&&u.relatedFeatures.featuresUrl&&u.relatedFeatures.joinField&&(this._relatedUrl=u.relatedFeatures.featuresUrl,this.objectIdField=
this._joinField=u.relatedFeatures.joinField);this.objectIdField||this._makeObjectIdField();this._map&&this.socketUrl&&!this._connected&&this.connect()}},_isWebGLCompatible:function(){return!1},_setMap:function(u){var t=this.inherited(arguments),C=this._getRenderer();this.timeInfo&&(this._trackIdField||C&&(C.latestObservationRenderer||C.trackRenderer))&&(this._trackManager=new q(this),this._trackManager.initialize(u));this.socketUrl&&!this._connected&&this._map&&this.connect();return t},_unsetMap:function(u,
t){a.forEach(this._connects,A.disconnect);(this._connected||this._reconnecting||this.socket)&&this.disconnect();this._togglePurgeT();this.inherited(arguments);this._map=null},_suspend:function(){this._togglePurgeT();this.inherited(arguments)},_resume:function(){this.inherited(arguments);this._togglePurgeT(!0)},clear:function(){try{this._mode&&this._mode._clearDrawBuffer&&this._mode._clearDrawBuffer(),this._mode&&this._mode._clearTimeBin&&this._mode._clearTimeBin(),this._mode&&this._mode._clearFeatureMap&&
this._mode._clearFeatureMap(),this._trackManager&&this._trackManager.clearTracks()}catch(u){}this.inherited(arguments);this._trackManager&&this._trackManager.createTracklineContainer()},redraw:function(){this._mode&&this._mode._flushDrawBuffer&&this._mode._flushDrawBuffer();this.inherited(arguments)},setDefinitionExpression:function(u){this.setFilter({where:u})},getDefinitionExpression:function(){if(this._filter)var u=this._filter.where;return u},destroy:function(){this.disconnect();this.inherited(arguments)},
onResume:function(u){this.inherited(arguments)},setGeometryDefinition:function(u){this.setFilter({geometry:u})},getGeometryDefinition:function(){if(this._filter)var u=this._filter.geometry;return u},connect:function(u){var t=new d,C={},E=this._filter,F,G,H=this.socketUrl,L;try{this._connected||this._connecting?t.reject(Error("Cannot start new connection process. Layer is connecting.")):(this._connecting=!0,this._getRelatedFeatures().then(function(){return this._getKeepLatestFeatures()}.bind(this)).then(function(){this._websocketToken&&
(C.token=this._websocketToken);this._map&&this._map.spatialReference&&this.spatialReference&&this._map.spatialReference.wkid!==this.spatialReference.wkid&&(C.outSR=this._map.spatialReference.wkid);if(E)for(G in E)null!==E[G]&&(F="geometry"===G?JSON.stringify(E[G]):E[G],C[G]=F);H+="?"+f.objectToQuery(C);L=this._createConnection(H,u);t.resolve(L)}.bind(this)).otherwise(function(J){t.reject(J)}))}catch(J){u&&(u(J,!1),t.reject(J)),this.onConnectionError({error:J})}return t.promise},disconnect:function(u){var t=
this._refreshing?"Disconnecting as part of layer refresh cycle":"Connection closed from client",C=this._refreshing?!0:!1;this._reconnectTimeoutId&&clearTimeout(this._reconnectTimeoutId);this._refreshing=this._reconnecting=this._connecting=this._connected=!1;this.socket&&this.socket.close();this.onDisconnect({willReconnect:C,message:t});u&&u(null,!0)},setFilter:function(u){if(this._collection)return this.onError("Filter can only be set when the source of the layer is a Stream Service"),!1;try{if(void 0!==
u.outFields){var t=Error("Outfields property cannot be changed after layer is created");this.onFilterChange({filter:this.getFilter(),error:t});return!1}var C=this._makeFilter(u)}catch(E){return t=Error(E),this.onFilterChange({filter:this.getFilter(),error:t}),!1}if(this.socket)u={filter:C},this.socket.send(JSON.stringify(u));else n.once(this,"connect",function(E){this.setFilter(C)});return!0},getFilter:function(){var u=this._filter,t={},C=["geometry","outFields","where"];u&&a.forEach(C,function(E){var F=
u[E];F&&("geometry"===E?F=v.fromJson(F):"outFields"===E&&(F=F.split(",")),t[E]=F)});return t},setMaximumTrackPoints:function(u){if(!u&&0!==u)return!1;this.maximumTrackPoints=u;this._mode.propertyChangeHandler(3)},getUniqueValues:function(u){var t={},C=[];var E=this._getField(u,!0);if(!E)return C;u=E.name;a.forEach(this.graphics||[],function(F){F=(F.attributes||{})[u];void 0===F||t[F]||(t[F]=1,C.push(F))});C.sort(function(F,G){return F<G?-1:F>G?1:0});return C},getLatestObservations:function(){var u=
[];return u=this._trackManager?this._trackManager.getLatestObservations():this.graphics},setPurgeInterval:function(u){var t=this.purgeInterval;this.purgeInterval=u;this._togglePurgeT();u&&this._togglePurgeT(!0);if(t!==u)this.onPurgeIntervalChange();return this},_togglePurgeT:function(u){if(u&&this.purgeInterval){var t=this;clearTimeout(this._purgeT);this._mode&&this._mode._flushDrawBuffer&&(this._purgeT=setTimeout(function(){t.updating||t.suspended||(t._mode._flushDrawBuffer(),t._togglePurgeT(!0))},
6E4*this.purgeInterval))}else this._purgeT&&(clearTimeout(this._purgeT),this._purgeT=null)},onMessage:function(){},onConnect:function(){},onDisconnect:function(){},onFilterChange:function(){},onAttemptReconnect:function(){},onConnectionError:function(){},onPurgeIntervalChange:function(){},_createConnection:function(u,t){var C=this,E=new WebSocket(u);E.onopen=function(){C.socket=E;C._connected=!0;C._connecting=!1;C._reconnecting=!1;C._reconnectAttempts=0;C._bind();C.onConnect();t&&t(null,!0)};E.onclose=
function(F){var G=!0,H=C._connected,L=null;if(C._connected||C._reconnecting){if(F.code){var J="Connection failed: ";if(1001===F.code)J+=F.reason||"Service is going away.",G=!1;else if(4400===F.code)J+=F.reason||"Invalid url parameters. Check filter properties.",G=!1;else if(4404===F.code)J+="Service not found",G=!1;else if(4401===F.code||4403===F.code)J+="Not authorized",G=!1}G&&(C._reconnectAttempts+=1,C._reconnectAttempts>C.maxReconnectAttempts&&(J="Maximum reconnect attempts exceeded",G=!1,H=!0));
C._connected=!1;H&&(J&&(L=Error(J)),C.onDisconnect({error:L,willReconnect:G}));G?C._attemptReconnect():C.socket=null}else C.socket||(L=Error("Could not make connection to service"),C.onConnectionError({error:L})),C.socket=null,C._connected=!1};E.onerror=function(F){};return E},_getKeepLatestFeatures:function(){var u=new d;this._map&&this._keepLatestUrl&&!this._keepLatestQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._keepLatestUrl).then(function(){u.resolve()}.bind(this)).otherwise(function(t){u.reject(t)}).always(function(){this._keepLatestQueried=
!0}.bind(this)):u.resolve();return u.promise},_getRelatedFeatures:function(){var u=new d;this._map&&this._relatedUrl&&!this._relatedQueried&&this._mode._fetchArchive?this._mode._fetchArchive(this._relatedUrl).then(function(){u.resolve()}.bind(this)).otherwise(function(t){u.reject(t)}).always(function(){this._relatedQueried=!0}.bind(this)):u.resolve();return u.promise},_purge:function(){var u,t=[];if(this.purgeOptions.displayCount&&this.graphics.length>this.purgeOptions.displayCount)for(u=0;u<this.graphics.length-
this.purgeOptions.displayCount;u++){var C=this.graphics[u];t.push(C)}0<t.length&&(this._mode._removeFeatures(t),this._trackManager&&this._trackManager.removeFeatures(t))},_bind:function(){var u=this;this.socket.onmessage=function(t){u._onMessage(JSON.parse(t.data))}},_onMessage:function(u){var t=this;this.onMessage(u);var C={create:function(E){t._create(E)},update:function(E){t._update(E)},"delete":function(E){t._delete(E)}};if(u.type)C[u.type](u.feature);else u.hasOwnProperty("filter")?t._handleFilterMessage(u):
this._create(u)},_create:function(u){function t(F){if(!C._featureHasOID(F,E)){if(!F.geometry)return!1;F.attributes=F.attributes||{};F.attributes[E]=C._nextId++}F=F.declaredClass?F:new l(F);C._mode.drawFeature(F)}var C=this,E=C.objectIdField;u.length?u.forEach(function(F){F&&t(F)}):u&&t(u)},_delete:function(u){var t=this,C=u[t.objectIdField]||u.attributes[t.objectIdField],E=!1;this.graphics.forEach(function(F){F.attributes[t.objectIdField]==C&&(E=F)});E&&this.remove(E)},_update:function(u){var t=this,
C=!1;this.graphics.forEach(function(E){E.attributes[t.objectIdField]==u.attributes[t.objectIdField]&&(C=E)});C&&(u.attributes&&C.setAttributes(u.attributes),u.geometry&&C.setGeometry(v.fromJson(u.geometry)))},_makeFilter:function(u){var t=null;u=u||{};if(void 0!==u.geometry)if(t=t||{},null===u.geometry)t.geometry=null;else{var C="string"===typeof u.geometry?v.fromJson(JSON.parse(u.geometry)):u.geometry.declaredClass?u.geometry:v.fromJson(u.geometry);if(!C||"point"===C.type)throw"Query object contains invalid geometry";
"extent"!==C.type&&(C=C.getExtent());if(!C||0===C.getHeight()&&0===C.getWidth())throw"Invalid filter geometry: Extent cannot have a height and width of 0";t.spatialRel="esriSpatialRelIntersects";t.geometryType="esriGeometryEnvelope";t.geometry=C.toJson()}void 0!==u.where&&(t=t||{},t.where=u.where);if(void 0!==u.outFields&&(t=t||{},u="string"===typeof u.outFields?"*"===u.outFields?null:u.outFields.replace(/,\s+/g,",").split(","):null===u.outFields?null:u.outFields,u=this._makeOutFields(u))){if(u.errors&&
0<u.errors.length)throw"Invalid filter outFields. "+u.errors.join(",");t.outFields=u.fields?u.fields.join(","):null}return t},_makeOutFields:function(u){var t=this,C=[],E=[],F={fields:null};if(!u||0===u.length)return F;a.forEach(u,function(G){if("*"===G)return F;var H=t._getField(G,!0);H?C.push(H.name):E.push("Field named "+G+" not found in schema.")});u=t._getOutFields();a.forEach(u,function(G){t._getField(G)&&-1===a.indexOf(C,G)&&C.push(G)});F.fields=C;F.errors=E;return F},_handleFilterMessage:function(u){u.error?
(u=Error(u.error.join(",")),this.onFilterChange({filter:this.getFilter(),error:u})):(u=u.filter,u.geometry&&"string"===typeof u.geometry&&(u.geometry=JSON.parse(u.geometry)),this._filter=u,this.onFilterChange({filter:this.getFilter()}))},_getWebsocketConnectionInfo:function(u){var t={urls:[]},C,E=[],F=[],G;u.streamUrls&&a.forEach(u.streamUrls,function(J){"ws"===J.transport&&(C=J.urls,t.token=J.token)});if(!C)return t;a.forEach(C,function(J){0===J.lastIndexOf("wss",0)?F.push(J):E.push(J)});u="https:"===
location.protocol||0===this.url.lastIndexOf("https:",0)?F:0===E.length?F:E;if(1<u.length)for(G=0;G<u.length-1;G++){var H=G+Math.floor(Math.random()*(u.length-G));var L=u[H];u[H]=u[G];u[G]=L}t.urls=u;return t},_attemptReconnect:function(){var u=this;this._reconnectTimeoutId=null;u._connected=!1;if(!u._socketUrls)return!1;if(!u._collection&&!u._reconnecting&&u.socket&&u.credential)return u._reconnecting=!0,u._getServiceConnectionMetadata(u._attemptReconnect),!1;u._reconnecting=!0;u.socket=null;if(u._reconnectAttempts>
u.maxReconnectAttempts)return u._reconnecting=!1;u.socketUrl=u._socketUrls[u._reconnectAttempts>u._socketUrls.length-1?u._reconnectAttempts%u._socketUrls.length:u._reconnectAttempts];u.socketUrl+="/"+u.socketDirection;var t=u._randomIntFromInterval(0,1E3);this._reconnectTimeoutId=setTimeout(function(){u.onAttemptReconnect({count:u._reconnectAttempts,url:u.socketUrl});u.connect()},1E3*u._reconnectAttempts+t)},_getServiceConnectionMetadata:function(u){var t=this,C=t._url.path;u="function"===typeof u?
u:null;c({url:C,content:g.mixin({f:"json"},this._url.query),callbackParamName:"callback"}).then(function(E){E=t._getWebsocketConnectionInfo(E);t._websocketToken=E.token;u&&u()},function(E){t.onError(Error(E))})},_setDefaultRenderer:function(){var u=this.geometryType,t=new b([5,112,176,.8]),C=new b([255,255,255]);C=new w(w.STYLE_SOLID,C,1);if("esriGeometryPoint"===u||"esriGeometryMultipoint"===u)var E=new z(z.STYLE_CIRCLE,10,C,t);else if("esriGeometryPolyline"===u)E=new w(w.STYLE_SOLID,t,2);else if("esriGeometryPolygon"===
u||"esriGeometryEnvelope"===u)t=new b([5,112,176,.2]),C=new b([5,112,176,.8]),C=new w(w.STYLE_SOLID,C,1),E=new B(B.STYLE_SOLID,C,t);E&&this.setRenderer(new x(E))},_makeObjectIdField:function(){var u=1,t,C=[];if(!this.objectIdField){var E=this.fields.length;for(t=0;t<E;t++)C.push(this.fields[t].name.toLowerCase());for(;-1!==a.indexOf(C,"objectid_"+u);)u+=1;this.objectIdField="objectid_"+u;this.fields.push({name:"objectid_"+u,type:"esriFieldTypeOID",alias:"objectid_"+u,nullable:!1})}},_featureHasOID:function(u,
t){return u.attributes&&(u.attributes[t]||0===u.attributes[t])},_randomIntFromInterval:function(u,t){return Math.floor(Math.random()*(t-u+1)+u)}});g.setObject("layers.StreamLayer",D,k);return D})},"esri/layers/StreamTrackManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../graphic ../geometry/Point ../geometry/Polyline ./TrackManager".split(" "),function(D,A,a,b,g,d,e,f,n){D=D([n],{declaredClass:"esri.layers._StreamTrackManager",constructor:function(h){this.inherited(arguments);
var k=h.getMap().spatialReference;this.isWebMercator=k.isWebMercator();this.canWrap=k._isWrappable();this.wrapThreshold=this.isWebMercator?2.0037508342788905E7:180},initialize:function(h){this.inherited(arguments)},addFeatures:function(h,k){function c(z,x){var y,u;q[z]||(q[z]=[]);var t=q[z];if(0<w){x.length>w&&x.splice(0,x.length-w);var C=x.length+t.length;C>w&&(y=t.splice(0,C-w))}C=x.length;for(u=0;u<C;u+=1)t.push(x[u]);return{deletes:y,adds:x}}var l={},r={},m;if(k)return this.inherited(arguments),
l;var q=this.trackMap;var v=this.layer;var B=v._trackIdField;var w=v.maximumTrackPoints||0;a.forEach(h,function(z){var x=z.attributes[B];z.visible&&(r[x]||(r[x]=[]),r[x].push(z))});for(m in r)r.hasOwnProperty(m)&&(v=c(m,r[m]),l[m]=v);return l},removeFeatures:function(h){var k=[],c=this.layer.objectIdField,l=this.layer._trackIdField;h&&(a.forEach(h,function(r){var m;var q=r.attributes[l];var v=r.attributes[c];if(m=this.trackMap[q])for(r=0;r<m.length;r+=1){var B=m[r];if(B.attributes[c]===v){this.trackMap[q].splice(r,
1);-1===a.indexOf(q)&&k.push(q);break}}},this),0<h.length&&this.refreshTracks(k))},drawTracks:function(h){function k(B){var w=m[B],z=w&&1<w.length,x=c.trackLineMap[B];x&&!z&&(l.remove(x),delete c.trackLineMap[B],x=null);if(!z)return!1;z=[];for(var y=[],u,t=w.length,C=0;C<t;C++)if(u=w[C].geometry){u=u.normalize();var E=u.x,F=0,G=!1;H&&c.canWrap&&(F=E-H.x,Math.abs(F)>c.wrapThreshold&&(G=!0));G?(y.push([c.getWrappedX(E),u.y]),z.push(y.slice(0)),y=[[E,u.y]]):y.push([E,u.y]);var H=new e(E,u.y,q)}1<y.length&&
z.push(y);w={};w[v]=B;if(z.length)if(x){for(var L=x.geometry;L.paths.length;)L.removePath(L.paths.length-1);z.forEach(function(J){L.addPath(J)});x.setGeometry(L)}else x=new d(new f({paths:z,spatialReference:q}),null,w),l.add(x),c.trackLineMap[B]=x}var c=this,l=this.container,r;if(l){var m=this.trackMap;var q=this.map.spatialReference;var v=this.layer._trackIdField;if(h)a.forEach(h,function(B){k(B)});else for(r in m)m.hasOwnProperty(r)&&k(r)}},refreshTracks:function(h){function k(m){var q;m=c[m]||
[];var v=m.length;for(q=0;q<v;q++)l._repaint(m[q],null,!0)}var c=this.trackMap,l=this.layer,r;this.drawTracks(h);if(h)a.forEach(h,function(m){k(m)});else for(r in c)c.hasOwnProperty(r)&&k(r)},getLatestObservations:function(){var h,k=this.trackMap,c=[];for(h in k)if(k.hasOwnProperty(h)){var l=k[h];c.push(l[l.length-1])}return c},destroy:function(){this.inherited(arguments);this.trackLineMap=null},getWrappedX:function(h){var k=this.isWebMercator,c=k?2.0037508342788905E7:180;k=k?-2.0037508342788905E7:
-180;return(0<h?k:c)-((0<h?c:k)-h)}});A.setObject("layers._StreamTrackManager",D,g);return D})},"esri/layers/PurgeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful","dojo/has","../kernel"],function(D,A,a,b,g){D=D([a],{declaredClass:"esri.layers.PurgeOptions",constructor:function(d,e){this.parent=d;for(var f in e)this[f]=e[f]},_displayCountSetter:function(d){this.displayCount=d;this.parent.refresh()}});A.setObject("layers.PurgeOptions",D,g);return D})},"arcgisonline/map/core/projectExtent":function(){define(["arcgisonline/map/utils/contains",
"esri/geometry/Extent","esri/geometry/webMercatorUtils","esri/geometry/Polygon","esri/tasks/GeometryService"],function(D,A,a,b,g){function d(e,f){if(e&&f.xmin>f.xmax){var n=e.valid[1]-f.xmin,h=f.xmax-e.valid[0];n>h?f.xmax=e.valid[1]+h:f.xmin=e.valid[0]-n}}return function(e,f,n,h,k,c){var l=[102113,102100,3857],r=e.spatialReference.wkid;if(r===f.wkid)return n([e],null);if(4326==r&&D(l,f.wkid))return e.ymin=Math.max(e.ymin,-89.99),e.ymax=Math.min(e.ymax,89.99),e=a.geographicToWebMercator(e),k=e.spatialReference._getInfo(),
d(k,e),e.spatialReference.wkid=f.wkid,n([e],null);if(D(l,r)&&4326==f.wkid)return e=a.webMercatorToGeographic(e),k=e.spatialReference._getInfo(),d(k,e),n([e],null);c||(c=new g(window.esriGeowConfig.self.helperServices.geometry.url));if(k&&k.wrapAround180&&"extent"===e.type){var m=e;e=b.fromExtent(e)}c.project([e],f,function(q,v){if(!(q&&0<q.length&&q[0]&&"extent"==q[0].type)||isNaN(q[0].xmin)||isNaN(q[0].ymin)||isNaN(q[0].xmax)||isNaN(q[0].ymax)){if(q&&0<q.length&&q[0]&&"point"==q[0].type&&!isNaN(q[0].x)&&
!isNaN(q[0].y))return n(q,v);if(m&&"polygon"===q[0].type){if(1===q[0].rings.length)q[0]=new A(q[0].getExtent());else{var B=(new b(q[0].spatialReference.toJson())).addRing(q[0].rings[0]).getExtent(),w=(new b(q[0].spatialReference.toJson())).addRing(q[0].rings[1]).getExtent();q[0]=w;q[0].xmin=w.xmin-B.getWidth();q[0].ymin=Math.min(w.ymin,B.ymin);q[0].ymax=Math.max(w.ymax,B.ymax)}return n(q,v)}if(h)return h()}else return n(q,v)},h)}})},"arcgisonline/map/utils/contains":function(){define([],function(){return function(D,
A){for(var a=D.length;a--;)if(D[a]===A)return!0;return!1}})},"arcgisonline/map/core/getExtentFromCenter":function(){define(["esri/geometry/Extent","arcgisonline/map/core/getExtentForScale"],function(D,A){return function(a,b,g){a=new D(a.x-1,a.y-.5,a.x+1,a.y+.5,a.spatialReference);return A(a,b,g)}})},"arcgisonline/map/core/getExtentForScale":function(){define(["esri/config","esri/WKIDUnitConversion"],function(D,A){return function(a,b,g){var d=20015077/180,e=a.spatialReference;if(e){var f=e.wkid;var n=
e.wkt}e=null;f?e=A.values[A[f]]:n&&-1!==n.search(/^PROJCS/i)&&(f=/UNIT\[([^\]]+)\]\]$/i.exec(n))&&f[1]&&(e=parseFloat(f[1].split(",")[1]));return a.expand(g*b/(39.37*(e||d)*D.defaults.screenDPI)/a.getWidth())}})},"arcgisonline/map/thumbnail/getItemData":function(){define(["dojo/Deferred","dojo/_base/lang","arcgisonline/sharing/util"],function(D,A,a){return function(b,g,d){a.request({url:window.esriGeowConfig.restBaseUrl+"content/items/"+b+"/data"},{disableIdentityLookup:!0}).then(A.hitch(this,function(e){if(e&&
(e.wfsInfo||e.wmtsInfo))var f=e;else if(e&&e.layers)f=e.layers;else if(d){d();return}g&&g(f)}),A.hitch(this,function(e){d&&d(e)}))}})},"arcgisonline/map/layer/getServiceInfo":function(){define("dojo/_base/lang dojo/_base/array dojo/topic dojo/Deferred esri/kernel esri/request esri/SpatialReference esri/geometry/Extent arcgisonline/sharing/util arcgisonline/map/core/projectExtent arcgisonline/sharing/dijit/dialog/GeneralDlg".split(" "),function(D,A,a,b,g,d,e,f,n,h,k){var c=window.esriGeowConfig;return function B(r,
m,q,v){var w=function(t,C){clearTimeout(y);a.publish("ServiceAnswerReceived",[]);var E=t.fullExtent;E||(E=t.extent);!E||E.spatialReference&&(E.spatialReference.wkid||E.spatialReference.wkt)||(t.fullExtent=null,E=t.extent=null);(c.allSSL||"https:"==location.protocol)&&t.tileServers&&t.tileServers.length&&A.forEach(t.tileServers,function(F,G){if(n.isHostedService(F)||n.supportsHttps(F))t.tileServers[G]=F.replace("http:","https:")});E?q&&q(t,r,C):t.spatialReference&&(t.spatialReference.wkid||t.spatialReference.wkt)?
(E=new f(-180,-90,180,90,new e({wkid:4326})),h(E,new e(t.spatialReference),D.hitch(this,function(F){t.fullExtent=F[0];t.extent=F[0];q&&q(t,r,C)}),D.hitch(this,function(F,G){v&&(F.details=[],F.details.push("Missing extent and could not project GCS into service spatial reference."),v(F,G))}))):q&&q(t,r,C)},z=function(t,C){clearTimeout(y);a.publish("ServiceAnswerReceived",[]);v&&v(t,C)},x=!1,y=setTimeout(function(){clearTimeout(y);y=null;var t=r.toLowerCase();if(-1===t.indexOf("/arcgis/rest/")&&-1<t.indexOf("/arcgis/"))return r=
r.replace("/arcgis/","/arcgis/rest/").replace("/ArcGIS/","/ArcGIS/rest/"),B(r,m,q,v);g.id.isBusy()?x=!0:m?(k.prototype.statics.getInstance().show({title:g.i18nBundle.generalDlg.waitDlgTitle,message:m}),y=setTimeout(function(){clearTimeout(y);y=null;g.id.isBusy()?x=!0:z("Request timed out.",{args:{url:r}})},45E3)):z("Request timed out.",{args:{url:r}})},1E4),u=r+(-1<r.indexOf("?")?"\x26f\x3djson":"?f\x3djson");d({url:u,callbackParamName:"callback",load:function(t,C){if(y||x)clearTimeout(y),t?t.error&&
""!==t.error?z(t.error,C):w(t,C):z("Request error.",{args:{url:r}})},error:function(t){if(y||x)clearTimeout(y),t&&t.message&&-1<t.message.indexOf("Aborted the Sign-In process")?a.publish("ServiceAnswerReceived",[]):z(t,{args:{url:r}})}})}})},"arcgisonline/map/thumbnail/buildThumbnailURLFromImageryItem":function(){define("require exports tslib esri/IdentityManager esri/request esri/urlUtils".split(" "),function(D,A,a,b,g,d){function e(c,l){return new Promise(function(r,m){return window.require(["esri/layers/ArcGISImageServiceLayer",
"esri/layers/MosaicRule","esri/layers/RasterFunction","esri/renderers/jsonUtils"],function(q,v,B,w){var z;q=new q(c);q.onError(function(){return m(Error("failed to generate thumbnail for service "+c))});var x=l.layerProperties;x&&((null===(z=x.bandIds)||void 0===z?0:z.length)&&q.setBandIds(x.bandIds,!0),x.mosaicRule&&q.setMosaicRule(new v(x.mosaicRule),!0),x.renderingRule&&q.setRenderingRule(new B(x.renderingRule),!0),x.renderer&&q.setRenderer(w.fromJson(x.renderer),!0));q.getImageUrl(l.extent||l.serviceInfo.extent,
l.size[0],l.size[1],function(y){if(!l.returnDataURL)return r({url:y});g["default"]({url:y,content:{},handleAs:"arraybuffer"}).then(function(u){var t=n(u);if(t)return h(u,t);m(Error("failed to generate thumbnail for service "+c))})})})})}function f(c,l){var r,m,q;return a.__awaiter(this,void 0,void 0,function(){var v,B,w,z,x,y,u,t,C,E,F,G,H,L,J,S,P,Q,M,N,K,X;return a.__generator(this,function(da){switch(da.label){case 0:return v=l.serviceInfo,B=l.size,w=l.query,z=l.layerProperties,x=l.returnDataURL,
y=null!==(r=l.extent)&&void 0!==r?r:v.extent,u=y.xmin,t=y.ymin,C=y.xmax,E=y.ymax,F=y.spatialReference,G=u+","+t+","+C+","+E,H=F?F.wkid||F.wkt:null,L=v.serviceDataType,J=v.bandCount,S=2===J&&(null===L||void 0===L?0:L.includes("Vector"))?{rasterFunction:"VectorFieldRenderer",rasterFunctionArguments:{MagnitudeBandID:0,DirectionBandID:1,IsUVComponents:"esriImageServiceDataTypeVector-UV"===L,ReferenceSystem:1,MassFlowAngleRepresentation:0,SymbolTileSize:30,SymbolTileSizeUnits:100,CalculationMethod:"Vector Average",
SymbologyName:"Single Arrow",MinimumMagnitude:1,MaximumMagnitude:-1,MinimumSymbolSize:40,MaximumSymbolSize:80},outputPixelType:"U8",variableName:"Raster"}:null===z||void 0===z?void 0:z.renderingRule,P=(null===z||void 0===z?void 0:z.mosaicRule)&&JSON.stringify(z.mosaicRule),Q=x?"image":"json",M=x?"arraybuffer":"json",[4,g["default"]({url:c+"/exportImage",content:a.__assign({bbox:G,bboxSR:H,size:B.join(","),bandIds:null===(m=null===z||void 0===z?void 0:z.bandIds)||void 0===m?void 0:m.join(","),mosaicRule:P,
renderingRule:S&&JSON.stringify(S),f:Q},w),handleAs:M})];case 1:N=da.sent();if(x){K=n(N);if(!K)throw Error("failed to generate thumbnail for service "+c);return[2,h(N,K)]}(X=(null===(q=b["default"].findCredential(c))||void 0===q?void 0:q.token)||(null===w||void 0===w?void 0:w.token))&&(null===N||void 0===N?0:N.href)&&(N.href+="?token\x3d"+X);return[2,{url:null===N||void 0===N?void 0:N.href}]}})})}function n(c){if(!c||10>c.byteLength)return null;c=new Uint8Array(c,0,4);return 255===c[0]&&216===c[1]?
"jpeg":137===c[0]&&80===c[1]&&78===c[2]&&71===c[3]?"png":null}function h(c,l){var r=new Blob([c],{type:"image/"+l}),m=new FileReader;m.readAsDataURL(r);return new Promise(function(q){m.onloadend=function(){q({dataURL:m.result})}})}function k(c){var l,r;"string"===typeof c.extent?(c=c.extent.split(",").map(function(m){return parseFloat(m)}),4===c.length&&(r=[[c[0],c[1]],[c[2],c[3]]])):0<(null===(l=c.extent)||void 0===l?void 0:l.length)&&(r=c.extent);return(null===r||void 0===r?0:r.length)?{xmin:r[0][0],
ymin:r[0][1],xmax:r[1][0],ymax:r[1][1],spatialReference:{wkid:4326}}:null}Object.defineProperty(A,"__esModule",{value:!0});b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);A["default"]=function(c,l,r){var m,q,v,B,w,z;void 0===r&&(r=!0);return a.__awaiter(this,void 0,void 0,function(){var x,y,u,t,C,E,F,G,H,L,J,S,P,Q,M,N,K,X,da;return a.__generator(this,function(Y){switch(Y.label){case 0:return x=d["default"].urlToObject(c.url),y=x.path,u=x.query,(t=c.serviceInfo)&&Object.keys(t).length?
[3,2]:[4,g["default"]({url:y,content:a.__assign({f:"json"},u)})];case 1:t=Y.sent(),Y.label=2;case 2:if(null===t||void 0===t||!t.bandCount)throw Error("failed to access service info for service: "+y);if(C=null===(m=t.capabilities)||void 0===m?void 0:m.toLowerCase().includes("tilesonly"))throw Error("unsupported thumbnail request for tiled imagery");if(null===(q=c.itemData)||void 0===q)return[3,3];F=q;return[3,5];case 3:return[4,c.getData()];case 4:F=Y.sent(),Y.label=5;case 5:E=null!==(v=F)&&void 0!==
v?v:{};G=E.bandIds;H=E.mosaicRule;L=E.renderingRule;J=null===(w=null===(B=E.layerDefinition)||void 0===B?void 0:B.drawingInfo)||void 0===w?void 0:w.renderer;if((S=(null===G||void 0===G?void 0:G.length)||H||L||J)||c.isHostedService||!(10.1<=t.currentVersion))return[3,7];P=y+"/info/thumbnail";return[4,g["default"]({url:P,content:a.__assign({},u),handleAs:"arraybuffer"})];case 6:Q=Y.sent();if(M=n(Q)){if(r)return[2,h(Q,M)];K=(N=(null===(z=b["default"].findCredential(y))||void 0===z?void 0:z.token)||(null===
u||void 0===u?void 0:u.token))?P+"?token\x3d"+N:P;return[2,{url:K}]}Y.label=7;case 7:return X=k(c),da=S?{bandIds:G,mosaicRule:H,renderingRule:L,renderer:J}:null,J?[2,e(y,{serviceInfo:t,extent:X,size:l,layerProperties:da,query:u,returnDataURL:r})]:[2,f(y,{serviceInfo:t,extent:X,size:l,layerProperties:da,query:u,returnDataURL:r})]}})})}})},"arcgisonline/pages/portal/CommentsUtil":function(){define("require exports tslib ./Comment ../../sharing/util dojo/promise/all dojo/Deferred dojo/_base/lang".split(" "),
function(D,A,a,b,g,d,e,f){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);return function(){function n(){}n.fetchComments=function(h,k,c){var l=this,r=new e["default"],m=c.item,q=(null===m||void 0===m?void 0:m.itemUrl)+"/comments",v,B=(null===c||void 0===c?void 0:c.parentId)||"none";h=h||(null===c||void 0===c?void 0:c.nextStart)||c.start;var w=c.sortField,z=c.sortOrder;k=k||c.overrideNum||c.num;var x=c.comments;if(-1===h)r.resolve(x);
else{var y={parentId:B,sortField:w,sortOrder:z,start:h,num:k};g["default"].request({url:q,content:y}).then(function(u){return l._toPortalComments(m,u)}).then(function(u){v=f["default"].mixin(c,u,{num:c.num,comments:[].concat(c.comments||[]).concat(u.comments)});y=u;return y.comments}).then(function(u){return l._getOwnerProfiles(u)}).then(function(u){y.comments=y.comments.map(function(t,C){t.ownerProfile=u[C];return t});r.resolve({commentsInfo:v,comments:v.comments})})}return r};n._toPortalComments=
function(h,k){var c=new e["default"],l=h.portal;k.comments=k.comments.map(function(r){return new b["default"](a.__assign(a.__assign({},r),{item:h,portal:l}))});c.resolve(k);return c};n._getOwnerProfiles=function(h){h=h.map(function(k){return k.portal.getUserProfile(k.owner)});return d["default"](h)};return n}()})},"arcgisonline/pages/portal/Comment":function(){define("require exports tslib ../pageUtil ../../tsutils/declareDecorator dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),
function(D,A,a,b,g,d,e,f,n){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);return function(){function h(k){this.owner=k.owner||"deletedUser";this.repliesInfo={parentId:this.id,sortField:"created",sortOrder:"desc",start:0,num:100,comments:[],item:this.item};this.comment=b["default"].linkify(unescape(k.comment))}h.prototype.postscript=function(){};h.prototype.getReplies=function(k,c){var l=this,r=new d["default"],
m=window.require("arcgisonline/pages/portal/CommentsUtil");this.numReplies?m.fetchComments(k,c,this.repliesInfo).then(function(q){l.repliesInfo=e["default"].mixin(l.repliesInfo,q.commentsInfo);l.replies=l.repliesInfo.comments;r.resolve(l.replies)}):r.resolve([]);return r};return h=a.__decorate([g["default"](n["default"].PortalComment,f["default"])],h)}()})},"arcgisonline/pages/item/_Info":function(){define("require exports tslib ../../sharing/util ../utils/arrays dojo/i18n!../../nls/arcgisonline ../utils/url".split(" "),
function(D,A,a,b,g,d,e){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);return{Unknown:{privileges:[],openIn:[],types:[],attributes:[],classification:"file"},"Feature Service":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:"is-layer is-2d is-scene-2 is-feature is-data is-desktopPro".split(" "),classification:"layer",hasServiceInfo:!0},"Map Service":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",
openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-tile","is-desktopPro","is-mapService"],classification:"layer",hasServiceInfo:!0},"Map Image Layer":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-scene-2","is-desktopPro","is-service","is-mapImage"],classification:"layer",hasServiceInfo:!0},"Image Service":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer",
"sceneViewer"],types:["is-2d","is-desktopPro","is-service","is-scene-2","is-imageManagement"],classification:"layer",hasServiceInfo:!0},"Scene Service":{defaultOpenText:d["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-service","is-pro"],classification:"layer",hasServiceInfo:!0},Table:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-table","is-data","is-desktopPro"],classification:"layer",
hasServiceInfo:!0},"Feature Collection":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-data","is-publish","is-views","is-pro"],classification:"layer"},"Route Layer":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-publish","is-views"],classification:"layer"},"Geocoding Service":{types:["is-service"],classification:"layer"},"Geoenrichment Service":{types:["is-service"],
classification:"layer"},"Network Analysis Service":{types:["is-service"],classification:"layer"},"Globe Service":{types:["is-desktop"],classification:"layer",openLyr:!0},"Geoprocessing Service":{types:["is-desktop","is-service"],classification:"layer"},Tool:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-desktop","is-service","is-tool"],classification:"layer",hasServiceInfo:!0},"Geodata Service":{types:["is-service"],classification:"layer"},
"Geometry Service":{classification:"layer"},"Workflow Manager Service":{types:["is-service"],classification:"layer"},"Stream Service":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d","is-service","is-streamLayer","is-pro"],classification:"layer",hasServiceInfo:!0},Feed:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","iotFeed"],types:["is-2d","is-service","is-feedLayer","is-pro"],classification:"layer",
hasServiceInfo:!0},"GeoBIM Project":{defaultOpenText:d["default"].itemLinks.openGeoBIM,defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"GeoBIM Application":{defaultOpenText:d["default"].itemLinks.openGeoBIM,defaultOpenIcon:"launch",openIn:["geoBIM"],types:["is-geoBIM"]},"Knowledge Graph":{types:["is-service"],classification:"layer",hasServiceInfo:!0},"Big Data Analytic":{defaultOpenText:d["default"].itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-bigDataAnalytic"],
classification:"app"},"Real Time Analytic":{defaultOpenText:d["default"].itemLinks.openAnalyticsIoT,defaultOpenIcon:"launch",openIn:["iotViewer"],types:["is-realTimeAnalytic"],classification:"app"},WMS:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},WFS:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],
types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},OGCFeatureServer:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-2d"],classification:"layer"},WMTS:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer"],types:["is-2d","is-desktopPro","is-scene-2"],classification:"layer"},KML:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],
types:["is-2d","is-desktopPro"],classification:"layer"},"Elevation Layer":{defaultOpenText:d["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"layer",hasServiceInfo:!0},"Vector Tile Service":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","sceneViewer","viewStyle","downloadStyle"],types:["is-vectorTile","is-service","is-scene-2","is-pro"],classification:"layer",hasServiceInfo:!0,hasViewStyle:!0},
"Relational Database Connection":{classification:"layer"},Markup:{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer"],types:["is-featureCollection","is-views"],classification:"layer"},"Web Map":{defaultOpenText:d["default"].itemLinks.openMapViewer,defaultOpenIcon:"launch",openIn:["mapViewer","createPresentation","openPresentation"],types:["is-map","is-desktopPro"],classification:"map",openPkg:!0},"Web Scene":{defaultOpenText:d["default"].itemLinks.openSceneViewer,
defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d","is-scene","is-pro"],classification:"map"},"3D Web Scene":{defaultOpenText:d["default"].itemLinks.openSceneViewer,defaultOpenIcon:"launch",openIn:["sceneViewer"],types:["is-3d"],classification:"map"},"Web Mapping Application":{defaultOpenText:d["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp","downloadAttachment"],types:["is-app","is-web"],classification:"app",hasItemData:!0},"Hub Initiative":{defaultOpenText:d["default"].itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Initiative":{defaultOpenText:d["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Site Application":{defaultOpenText:d["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Site Application":{defaultOpenText:d["default"].itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Page":{defaultOpenText:d["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},"Hub Event":{defaultOpenText:d["default"].itemLinks.viewInHub,defaultOpenIcon:"launch",openIn:["hubEventViewer"],types:["is-hubEvent"],classification:"app"},"Site Page":{defaultOpenText:d["default"].itemLinks.viewApp,defaultOpenIcon:"launch",
openIn:["appViewer","configureApp"],types:["is-app","is-web"],classification:"app"},Application:{defaultOpenText:d["default"].itemLinks.viewApp,defaultOpenIcon:"launch",openIn:["appViewer"],classification:"app",types:["is-app"]},"Mobile Application":{defaultOpenText:d["default"].itemLinks.getApp,defaultOpenIcon:"launch",openIn:["appViewer","downloadAttachment"],types:["is-mobile-app","is-mobile"],classification:"app"},"Desktop Application":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",
openIn:["downloadAttachment"],types:["is-file","is-update","is-platform"],classification:"app"},"Native Application":{classification:"app"},"Workforce Project":{defaultOpenText:d["default"].itemLinks.openWorkforce,defaultOpenIcon:"launch",openIn:["workforceViewer"],types:["is-workforceProject"],classification:"app",hasItemData:!0},Workflow:{defaultOpenText:d["default"].itemLinks.openWorkflow,defaultOpenIcon:"launch",openIn:["workflowViewer"],types:["is-workflow","is-pro"],classification:"app",hasItemData:!0},
Form:{defaultOpenText:d["default"].itemLinks.openSurvey123,defaultOpenIcon:"launch",openIn:["surveyViewer"],classification:"app"},"Insights Workbook":{defaultOpenText:d["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights"],classification:"app"},"Insights Page":{defaultOpenText:d["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsPage"],classification:"app"},"Insights Model":{defaultOpenText:d["default"].itemLinks.openInsights,
defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsModel"],classification:"app"},"Insights Theme":{defaultOpenText:d["default"].itemLinks.openInsights,defaultOpenIcon:"launch",openIn:["insightsViewer"],types:["is-insights","is-insightsTheme"],classification:"app"},"Ortho Mapping Project":{defaultOpenText:d["default"].itemLinks.openOrthoMaker,defaultOpenIcon:"launch",openIn:["orthoMaker"],types:["is-orthoMaker"],classification:"app"},Mission:{defaultOpenText:d["default"].itemLinks.openMission,
defaultOpenIcon:"launch",openIn:["missionViewer"],types:["is-mission"],classification:"app"},"Hub Initiative Template":{defaultOpenText:d["default"].itemLinks.openHubInitiative,defaultOpenIcon:"launch",openIn:["hubInitiative"],types:["is-hubInitiative"],classification:"app"},"QuickCapture Project":{types:["is-quickCaptureProject"],classification:"app"},Solution:{classification:"solution",hasItemData:!0},"GeoAI Studio Project":{defaultOpenText:d["default"].itemLinks.openGeoAIStudio,defaultOpenIcon:"launch",
openIn:["geoAIStudioUrlViewer"],types:["is-geoAIStudioProject"],classification:"app"},StoryMap:{classification:"app",types:["is-storymap"]},Notebook:{defaultOpenText:d["default"].itemLinks.openNotebook,defaultOpenIcon:"launch",openIn:["notebookViewer"],types:["is-notebook","is-download"],classification:"notebook"},"Data Store":{types:["is-data-store"],classification:"data store"},"Excalibur Imagery Project":{defaultOpenText:d["default"].itemLinks.openExcalibur,defaultOpenIcon:"launch",openIn:["excaliburViewer"],
types:["is-excaliburProject"],classification:"app"},"Urban Model":{defaultOpenText:d["default"].itemLinks.openUrbanModel,defaultOpenIcon:"launch",openIn:["urbanViewer"],types:["is-urbanModel"],classification:"app"},"Web Experience":{defaultOpenText:d["default"].itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],types:["is-webExperience"],classification:"app"},"Web Experience Template":{defaultOpenText:d["default"].itemLinks.view,defaultOpenIcon:"launch",openIn:["webExperienceViewer"],
types:["is-webExperienceTemplate"],classification:"app"},"360 VR Experience":{defaultOpenText:d["default"].itemLinks.view,defaultOpenIcon:"launch",openIn:["vrExperienceViewer"],types:["is-vrExperience","is-file","is-update"],classification:"app"},CSV:{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature","is-documentUrl"],classification:"file"},Shapefile:{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"File Geodatabase":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},GeoJSON:{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-feature"],classification:"file"},"Service Definition":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update","is-publish","is-feature","is-tile"],classification:"file"},"Tile Package":{defaultOpenText:d["default"].itemLinks.openArcMap,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-desktopPro"],classification:"file",openPkg:!0},"Compact Tile Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-tile","is-compact"],classification:"file",openPkg:!0},"Scene Layer Package":{defaultOpenText:d["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-scene-package"],classification:"file"},"Vector Tile Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-vector-tile","is-desktop"],classification:"file",openPkg:!0},"Deep Learning Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file",openPkg:!0},"Image Collection":{defaultOpenText:d["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update","is-publish","is-image-collection"],classification:"file"},Layout:{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file",openData:!0},"Desktop Add In":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Add In":{defaultOpenText:d["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GML:{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Explorer Add In":{types:["is-explorer","is-update"],classification:"file"},"Operations Dashboard Add In":{types:["is-views"],classification:"file",isRetired:!0},"Survey123 Add In":{types:["is-file","is-update"],classification:"file"},"Operations Dashboard Extension":{types:["is-views"],classification:"file",
isRetired:!0},"AppBuilder Extension":{types:["is-views"],classification:"file"},"AppBuilder Widget Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Viewer Add In":{types:["is-file","is-desktop","is-update"],classification:"file",openData:!0},"ArcGIS Pro Configuration":{types:["is-file","is-update"],classification:"file"},"Globe Document":{types:["is-desktop","is-update"],classification:"file",openData:!0},
"Map Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Pro Map":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Published Map":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"Scene Document":{types:["is-desktop","is-update","is-views"],classification:"file",openData:!0},"CityEngine Web Scene":{defaultOpenText:d["default"].itemLinks.viewApp,
defaultOpenIcon:"launch",openIn:["cityEngineViewer"],types:["is-city-engine","is-download","is-update"],classification:"file"},"Desktop Style":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Geoprocessing Sample":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Task File":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",
types:["is-file","is-update","is-pro"],classification:"file"},Layer:{defaultOpenText:d["default"].itemLinks.openArcMap,types:["is-update","is-desktopPro"],classification:"file",openData:!0},"Pro Layer":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Pro Report":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},Style:{defaultOpenText:d["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Operation View":{types:["is-operationView","is-views"],isRetired:!0,classification:"file"},Dashboard:{defaultOpenText:d["default"].itemLinks.dashboardView,openIn:["dashboard"],types:["is-dashboard","is-views"],classification:"file"},"Geoprocessing Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Layer Package":{defaultOpenText:d["default"].itemLinks.openArcMap,
defaultOpenIcon:"download-to",types:["is-file","is-desktopPro","is-update"],classification:"file",openData:!0},"Pro Layer Package":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-pro","is-update"],classification:"file"},"Locator Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"Map Package":{defaultOpenText:d["default"].itemLinks.openArcMap,
defaultOpenIcon:"download-to",types:["is-desktopPro","is-file","is-download","is-update"],classification:"file",openData:!0},"Pro Map Package":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro","is-download","is-update"],classification:"file"},"Mobile Basemap Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Windows Mobile Package":{defaultOpenText:d["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Toolbox Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-desktop","is-update"],classification:"file",openPkg:!0},"ArcPad Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Basemap Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},"Mobile Map Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Mobile Scene Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Package":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},
"Pro Project":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-pro"],classification:"file"},"Insights Workbook Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"launch",types:["is-file"],classification:"file"},"Apache Parquet":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"launch",types:["is-file"],classification:"file"},"Rule Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file",
"is-update"],classification:"file"},"Window Mobile Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Workflow Manager Package":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},GeoPackage:{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Export Package":{defaultOpenText:d["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Desktop Application Template":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Native Application Template":{classification:"file"},"Native Application Installer":{types:["is-file","is-update"],classification:"file"},"Application Configuration":{classification:"file"},"Viewer Configuration":{classification:"file"},"Windows Viewer Configuration":{classification:"file"},
"Map Template":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Project Template":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-file","is-update","is-pro"],classification:"file"},"Raster function template":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update","is-download"],classification:"file"},"Feature Collection Template":{classification:"file"},
"Layer Template":{classification:"file"},"Administrative Report":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Report Template":{classification:"file"},"Color Set":{classification:"file"},"Explorer Layer":{types:["is-explorer","is-update","is-views"],classification:"file"},"Explorer Map":{types:["is-explorer","is-update","is-views"],classification:"file"},"Symbol Set":{classification:"file"},"Document Link":{defaultOpenText:d["default"].itemLinks.open,
defaultOpenIcon:"launch",openIn:["appViewer"],types:["is-link","is-documentUrl","is-views"],classification:"file"},PDF:{defaultOpenText:d["default"].itemLinks.open,defaultOpenIcon:"launch",types:["is-dataUrl","is-pdf","is-update","is-documentUrl"],classification:"file"},"CAD Drawing":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"CSV Collection":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-file","is-update"],classification:"file"},Image:{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"KML Collection":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Code Attachment":{types:["is-file","is-update"],classification:"file"},"Code Sample":{defaultOpenText:d["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"Earth Configuration":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file","is-update"],classification:"file"},"iWork Keynote":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Numbers":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",
types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"iWork Pages":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Excel":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:"is-publish is-feature is-dataUrl is-file is-update is-documentUrl".split(" "),classification:"file"},"Microsoft Powerpoint":{defaultOpenText:d["default"].itemLinks.download,
defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Microsoft Word":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Visio Document":{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-dataUrl","is-file","is-update","is-documentUrl"],classification:"file"},"Statistical Data Collection":{types:[],
classification:"file"},netCDF:{defaultOpenText:d["default"].itemLinks.download,defaultOpenIcon:"download-to",types:["is-file"],classification:"file"},"Link Chart":{defaultOpenText:d["default"].itemLinks.openPro,defaultOpenIcon:"launch",types:["is-linkChart","is-pro"],classification:"app"},getItemInfo:function(f){var n,h,k,c,l,r=this[f.displayName]?f.displayName:f.type,m=this[f.type];"GeoJson"===f.type&&(f.type="GeoJSON");var q=null===(n=null===f||void 0===f?void 0:f.iconUrl)||void 0===n?void 0:n.split("/").pop();
"featureshosted16.png"===q&&(q="features16.png");f.isUtilityNetwork&&(q="utilitynetwork16.png");"Data Store"===f.type&&(q="datastore16.png");f.svgIconUrl16=q?"js/arcgisonline/img/item-types/"+q.replace("16.png","16.svg"):f.iconUrl;f.svgIconUrl32=q?"js/arcgisonline/img/item-types/"+q.replace("16.png","32.svg"):f.iconUrl;this[f.displayName]&&(m=this[f.displayName]);m=a.__assign({privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"},m);"Feature Collection"===f.type&&g["default"].includes(f.typeKeywords,
"Table")&&(m.types=g["default"].filterOut(m.types,["is-data"]));if("Feature Service"===f.type){n=["is-data","is-layer"];if(g["default"].includes(f.typeKeywords,"Multipatch")||g["default"].includes(f.typeKeywords,"HasOnlyMultipatchGeometries"))n=a.__spreadArray(a.__spreadArray([],n),["is-scene-2"]);m.types=g["default"].filterOut(m.types,n)}f.isUtilityNetwork&&(m.displayName=f.displayName+" ("+d["default"].itemProperties.utilityNetwork+((f.canUpdate||f.canDelete)&&f.isHostedService?", "+d["default"].viewsWidget.hostedData:
"")+")");"Application"!==f.type||f.url||(m.openIn=[],m.defaultOpenText=null);n="Desktop Add In;Globe Document;Map Document;Published Map;Scene Document;Geoprocessing Package;Geoprocessing Service;Globe Service;Locator Package".split(";");b["default"].couldHaveArcGISDesktop()&&-1<n.indexOf(r)&&(m.defaultOpenText=g["default"].includes(f.types,"is-desktopPro")?d["default"].itemLinks.openArcMap:d["default"].itemLinks.openDesktop,m.defaultOpenIcon="launch");"Layer"===f.type&&g["default"].includes(f.typeKeywords,
"lyrx")&&(m=a.__assign(a.__assign({},m),this["Pro Layer"]));"Layer Package"===f.type&&g["default"].includes(f.typeKeywords,"lpkx")&&(m=a.__assign(a.__assign({},m),this["Pro Layer Package"]));"Map Package"===f.type&&g["default"].includes(f.typeKeywords,"mpkx")&&(m=a.__assign(a.__assign({},m),this["Pro Map Package"]));"Compact Tile Package"===f.type&&(f.type="Tile Package");"Dashboard"===f.type&&b["default"]._isOperationsViewSupportedBrowser(!0)&&(m.types.push("is-browser"),f.isSupportedBrowser=!0);
m.types=g["default"].concatUnique(m.types,"public"===f.access?["is-public"]:["is-not-public"]);b["default"].couldHaveArcGISDesktop()||(m.types=m.types.filter(function(v){return"is-desktop"!==v&&"is-desktopPro"!==v}));r=null===(k=null===(h=f.portalUser)||void 0===h?void 0:h.userRole)||void 0===k?void 0:k.canUpdateOrgItems();if("StoryMap"===f.type){if(g["default"].includes(f.typeKeywords,"smstatusunpublishedchanges")||g["default"].includes(f.typeKeywords,"smstatuspublished"))m.types.push("is-published-storymap"),
m.defaultOpenText=d["default"].itemLinks.view,m.defaultOpenIcon="launch",m.openIn=["storyMapViewer"];if(f.isOwner||f.canUpdate&&(f.isAdmin||r))m.types.push("is-editable-storymap"),m.openIn=m.openIn||[],m.openIn.push("configureStoryMap"),m.defaultOpenText=m.defaultOpenText||d["default"].configAGOLUtilServices.configure,m.defaultOpenIcon="launch"}"Web Experience"===f.type&&(g["default"].includes(f.typeKeywords,"status: Published")||g["default"].includes(f.typeKeywords,"status: Changed"))&&m.types.push("is-published-webExperience");
"Web Experience Template"===f.type&&(g["default"].includes(f.typeKeywords,"status: Published")||g["default"].includes(f.typeKeywords,"status: Changed"))&&m.types.push("is-published-webExperienceTemplate");"Web Mapping Application"===f.type&&(g["default"].includes(f.typeKeywords,"configurableApp")&&(f.isOwner||f.isAdmin||r)&&m.types.push("can-configure"),f.url=e.redirectExternalAppURL(f,f.url));"Web Map"===f.type&&(h=f.portalUser,k=f.isOwner||f.isAdmin,(null===(c=null===h||void 0===h?void 0:h.userRole)||
void 0===c?0:c.canCreateItem())&&(null===h||void 0===h?0:h.isOrgUser)&&k&&(m.openIn.push("fieldMaps"),m.types.push("is-fieldMaps")));"Image Service"!==f.type||g["default"].includes(f.typeKeywords,"Managed Image Collection")||(m.types=m.types.filter(function(v){return"is-imageManagement"!==v}));f.canOpenInNewMapViewer&&(m.defaultOpenText="modern"===f.portal.defaultMapViewer?d["default"].itemLinks.openMapViewerBeta:d["default"].itemLinks.openMapViewer,m.types.push("can-openInNewMapViewer"));"KML"===
f.type&&f.name&&!f.url&&m.types.push("is-download");-1<f.type.indexOf("GeoBIM")&&(null===(l=f.portal)||void 0===l||!l.canCreateGeoBIM)&&(m={privileges:[],openIn:[],types:["is-views"],attributes:[],classification:"file"});return m}}})},"arcgisonline/pages/utils/url":function(){define(["require","exports","tslib","../utils/arrays"],function(D,A,a,b){Object.defineProperty(A,"__esModule",{value:!0});A.redirectExternalAppURL=A.sanitizeServerURL=void 0;b=a.__importDefault(b);A.sanitizeServerURL=function(g){g=
g||"";var d=g.split("/"),e=d.indexOf("FeatureServer");0<e&&(g=e-1,d.splice(g,1,d[g].replace(/:/g,"")),g=d.join("/"));return g};A.redirectExternalAppURL=function(g,d,e){var f=["Web Mapping Application","Dashboard"],n=b["default"].find([{org:".mapsdevext.arcgis.com",www:"devext.arcgis.com"},{org:".maps.arcgis.com",www:"www.arcgis.com"},{org:".mapsqa.arcgis.com",www:"qaext.arcgis.com"}],function(h){return-1<(null===d||void 0===d?void 0:d.indexOf(h.org))});if(!g.portalUser&&"self"!==g.contentOrigin&&
"public"===g.access&&(e||-1<f.indexOf(g.type))&&d){if(0===d.indexOf("/apps/"))return"https://"+g.portal.portalHostname+d;if(n)return g=d.split(n.org),"https://"+n.www+g[g.length-1]}return d}})},"arcgisonline/pages/utils/item":function(){define("require exports tslib ../utils/arrays ../pageUtil ../../sharing/util ../../esriGeowConfig dojo/string dojo/Deferred dojo/promise/all dojo/i18n!../../nls/arcgisonline dojo/text!../dijit/Card/badges/authoritative.html dojo/text!../dijit/Card/badges/deprecated.html dojo/text!../dijit/Card/badges/solution.html dojo/text!../dijit/Card/badges/living-atlas.html dojo/text!../dijit/Card/badges/marketplace.html dojo/text!../dijit/Card/badges/open-data.html dojo/text!../dijit/Card/badges/premium.html dojo/text!../dijit/Card/badges/retired.html dojo/text!../dijit/Card/badges/public-data-collection.html dojo/text!../dijit/Card/badges/subscriber.html dojo/text!../dijit/Card/badges/collaboration.html".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);z=a.__importDefault(z);x=a.__importDefault(x);y=a.__importDefault(y);return function(){function u(){}
u.getBadges=function(t,C,E){var F,G,H,L=[],J={i18n:k["default"],hideText:C?"":"hide",tooltipClass:"tooltip tooltip-bottom-left tooltip-multiline"};C=C?"":"Labeled";var S=t.groupDesignations&&t.groupDesignations.split(", "),P=null===(F=t.portal)||void 0===F?void 0:F.isPortal;"org_authoritative"===t.contentStatus&&(J.tooltipLabel=k["default"].badges["authoritativeTooltip"+C],L.push(f["default"].substitute(c["default"],J)));"public_authoritative"===t.contentStatus&&(t.verified||P)&&(J.tooltipLabel=f["default"].substitute(k["default"].badges["publicAuthoritativeTooltip"+
C],{name:P?t.portal.name:t.verified.name}),L.push(f["default"].substitute(c["default"],J)));"Solution"===t.type&&-1<t.typeKeywords.indexOf("ArcGIS Solution")&&(J.tooltipLabel=k["default"].badges["solutionTooltip"+C],L.push(f["default"].substitute(r["default"],J)));"deprecated"===t.contentStatus&&(J.tooltipLabel=k["default"].badges["deprecatedTooltip"+C],L.push(f["default"].substitute(l["default"],J)));-1<(null===(G=t.typeKeywords)||void 0===G?void 0:G.indexOf("Public Data Collection"))&&E&&(J.tooltipLabel=
k["default"].badges["publicDataCollectionTooltip"+C],L.push(f["default"].substitute(z["default"],J)));t.isRetired&&(J.tooltipLabel=k["default"].badges["retiredTooltip"+C],L.push(f["default"].substitute(w["default"],J)));S&&-1<S.indexOf("livingatlas")&&(J.tooltipLabel=k["default"].badges["livingAtlasTooltip"+C],L.push(f["default"].substitute(m["default"],J)));S&&-1<S.indexOf("opendata")&&L.push(f["default"].substitute(v["default"],J));t.isPremium&&(E=(null===(H=t.portal)||void 0===H?0:H.user)?t.portal.user.orgId?
"org":"public":"anon",J.tooltipLabel=k["default"].badges[E+(t.requiresCredits?"PremiumTooltip":"SubscriberTooltip")+C],L.push(f["default"].substitute(t.requiresCredits?B["default"]:x["default"],J)));t.listed&&!P&&L.push(f["default"].substitute(q["default"],J));t.origin&&L.push(f["default"].substitute(y["default"],J));return L.join("")};u.isItemAdmin=function(t,C){var E,F=!1;F=t.owner;var G=null!==C&&void 0!==C?C:t.portal,H=-1<(null===(E=t.itemControl)||void 0===E?void 0:E.indexOf("admin"));E=["esri_livingatlas",
"esri_demographics","esri_boundaries"];return F=G.isPortal&&!t.isOwner&&H&&-1<F.indexOf("esri_")&&!b["default"].includes(E,F)?!1:!!H};u.canShareItem=function(t,C){var E,F,G=C||{},H=G.userRole,L=G.canShare,J=(null===H||void 0===H?void 0:H.canPurchaseMarketplace())||(null===H||void 0===H?void 0:H.canTrialMarketplace()),S=t.access||"private",P=t.isAdmin||t.isOwner||G.isOrgAdmin&&t.isOwnedByMyOrg,Q="public"===S&&"AppBuilder Extension"!==t.type&&"AppBuilder Widget Package"!==t.type;S="org"===S&&(null===
(E=t.ownerProfile)||void 0===E?void 0:E.orgId)===C.orgId;E="licenseByUser"===(null===(F=t.listingProperties)||void 0===F?void 0:F.licenseBy);F="Native Application Installer"!==t.type&&"API Key"!==t.type&&!d["default"].isProApp(t)&&!E;return L&&F&&(P||J&&t.listed||((null===H||void 0===H?0:H.canShareItemToGroup())||!G.isOrgUser)&&(Q||S))?!0:!1};u.canDeleteItem=function(t,C){var E=C||{},F=E.userRole;E=t.isAdmin||t.isOwner||E.isOrgAdmin&&t.isOwnedByMyOrg;F=(null===F||void 0===F?void 0:F.isCustom())&&
F.canDeleteOrgItems();return!!(E||t.isOwnedByMyOrg&&F)};u.getProtectedItems=function(t){var C=new n["default"],E=[],F=[],G=[];t.forEach(function(H){H["protected"]?E.push(H):H.portal.isPortal?G.push(H):F.push(H)});t=G.map(function(H){return H.canBeDeleted().then(function(L){L&&!L.success?(H.error=L,E.push(H)):F.push(H)})});h["default"](t).then(function(){C.resolve({protectedItems:E,unprotectedItems:F})});return C};u.deleteItemsByOwner=function(t,C){var E=new n["default"],F=e["default"].restBaseUrl+
"content/users/"+t;if(1===C.length){var G=C[0];F=""+F+(G.folderId&&"/"!==G.folderId?"/"+G.folderId:"")+"/items/"+G.id+"/delete";d["default"].request({url:F,content:""},{usePost:!0}).then(function(H){return E.resolve([H])},function(H){return E.resolve([H])})}else 1<C.length&&(F+="/deleteItems",G={items:C.map(function(H){return H.id}).join(",")},d["default"].request({url:F,content:G},{usePost:!0}).then(function(H){return E.resolve(H.results)},function(H){return E.resolve([H])}));return E};u.deleteItems=
function(t){var C=this,E=new n["default"],F={},G=[],H=[],L=[];t.forEach(function(S){var P;"Deep Learning Package"===(null===S||void 0===S?void 0:S.type)?G.push(g["default"].uninstallDeepLearningPackage(S).then(function(Q){var M;"uninstallFail"===(null===Q||void 0===Q?void 0:Q.messageCode)?H.push(Q):F[S.owner]=[S].concat(null!==(M=F[S.owner])&&void 0!==M?M:[])})):F[S.owner]=[S].concat(null!==(P=F[S.owner])&&void 0!==P?P:[])});var J=Object.keys(F).map(function(S){return C.deleteItemsByOwner(S,F[S])});
h["default"](G).then(function(){return h["default"](J)}).then(function(S){S.forEach(function(P){P.forEach(function(Q){Q.success?L.push(Q):H.push(Q)})});E.resolve({removed:L,errors:H})});return E};u.getContentStatus=function(t){if(t.contentStatus&&-1<t.contentStatus.indexOf("authoritative")){var C=t.portal;return"public"===t.access&&(null===C||void 0===C?0:C.isVerified)?"public_authoritative":"org_authoritative"}return t.contentStatus};u.shouldOpenToItemURLInNewTab=function(t){return-1<"Web Mapping Application;Mobile Application;Document Link;Site Application;Hub Site Application;StoryMap".split(";").indexOf(t.type)};
u.shouldOpenInNewTab=function(t){return-1<["CityEngine Web Scene","Dashboard","Operation View"].indexOf(t.type)};return u}()})},"arcgisonline/pages/utils/socialMedia":function(){define(["require","exports","tslib","../../esriGeowConfig","esri/lang"],function(D,A,a,b,g){b=a.__importDefault(b);g=a.__importDefault(g);return function(){function d(){}d.canShowSocialMediaLinks=function(e){var f=e.isPortal,n=g["default"].isDefined(e.canSharePublic)?!!e.canSharePublic:!0,h=!!e.portalProperties&&g["default"].isDefined(e.portalProperties.showSocialMediaLinks);
e=h&&!0===e.portalProperties.showSocialMediaLinks;return b["default"].showSocialMediaLinks&&!0===b["default"].showSocialMediaLinks&&(f?n&&e:n&&(!h||e))};d.canShowSocialMediaLinksOnItems=function(e){var f=e.portalUser,n=!!f&&!f.orgId,h=!!f&&!!f.orgId;f=!f||n||h&&(f.userRole.canShareItemToPublic()||f.userRole.canShareOthersItemsToPublic());return this.canShowSocialMediaLinks(e)&&f};d.canShowSocialMediaLinksOnGroups=function(e){var f=e.portalUser,n=!!f&&!f.orgId,h=!!f&&!!f.orgId;f=!f||n||h&&f.userRole.canShareGroupToPublic();
return this.canShowSocialMediaLinks(e)&&f};return d}()})},"arcgisonline/pages/portal/PortalUser":function(){define("require exports tslib ./PortalGroup ./LicenseInfo ../utils/arrays ../utils/mapViewer ../../sharing/util ../../sharing/dijit/Role ../../tsutils/declareDecorator dojo/cookie dojo/_base/lang dojo/Deferred dojo/Stateful dojo/topic esri/arcgis/Portal esri/lang".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);f=a.__importDefault(f);
n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);return function(){function B(w){var z;w=this.portal||{};this.setRole(this.viewOnly);this.viewOnly&&this.copyViewOnlyRoleProperties();c["default"].mixin(this,{thumbnailUrl:this.thumbnailUrl||f["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),defaultThumbnailUrl:f["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg")});
c["default"].mixin(this,g["default"]);this.token=null===(z=this.credential)||void 0===z?void 0:z.token;this.id=this.username;this.orgUrl=w.urlKey&&w.customBaseUrl?w.urlKey+"."+w.customBaseUrl:w.portalUrl;this.accountId=this.orgId;this.computeFlags()}B.prototype.postscript=function(){};B.prototype.setRole=function(w){return this.userRole=new n["default"]({portalUser:this,viewOnly:w})};B.prototype.getDefaultMapViewer=function(){var w=this,z=new l["default"];this.defaultMapViewer?z.resolve(this.defaultMapViewer):
this.getProperties().then(function(x){var y,u=w.portal;w.defaultMapViewer=e.determineUserMapViewer({isSignedIn:!0,isViewingOrg:!!u.id,properties:x})||e.determineOrgMapViewer({mapViewer:null===(y=u.portalProperties)||void 0===y?void 0:y.mapViewer,created:u.created,subscriptionInfo:u.subscriptionInfo,isPortal:u.isPortal});z.resolve(w.defaultMapViewer)});return z};B.prototype.getProperties=function(){var w=this,z=this.portal.url+"community/users/"+this.username+"/properties",x=new l["default"];this.userProperties?
x.resolve(this.userProperties):f["default"].request({url:z}).then(function(y){w.userProperties=(null===y||void 0===y?void 0:y.properties)||null;x.resolve(w.userProperties)},function(y){x.reject(y)});return x};B.prototype.computeFlags=function(){var w,z=this.portal.supportsHostedServices||!1,x=(null===(w=this.portal.helperServices)||void 0===w?void 0:w.rasterAnalytics)&&v["default"].isDefined(this.portal.helperServices.rasterAnalytics.url);this.isOrgUser=this.portal.urlKey&&this.portal.customBaseUrl||
this.portal.isPortal?!0:!1;this.isOrgAdmin=this.userRole.isAdmin();this.canShare=!this.isOrgUser||this.userRole.canShareItemToGroup()||this.userRole.canShareItemToOrg()||this.portal.canSharePublic&&this.userRole.canShareItemToPublic();this.canShareOthers=this.userRole.canShareOthersItemsToGroup()||this.userRole.canShareOthersItemsToOrg()||this.portal.canSharePublic&&this.userRole.canShareOthersItemsToPublic();this.canViewOthersOrgItems=!this.userRole.isCustom()||this.userRole.isCustom()&&this.userRole.canViewOrgItems();
this.canReassignOrgItems=this.isOrgAdmin||this.userRole.canReassignOrgItems();this.canUseGeocode=(this.canCreateItems=!this.isOrgUser||this.userRole.canCreateItem())&&this.userRole.canUseGeocode();this.canPublishTiles=this.userRole.canPublishTiles();this.canPublishFeatures=this.userRole.canPublishFeatures();this.canPublishScenes=this.userRole.canPublishScenes();this.canPublishVectorTiles=this.userRole.canPublishVectorTiles();this.canPublishImageCollection=x&&this.userRole.canPublishImageCollection()?
!0:!1;this.canUserPublish=z&&this.canCreateItems&&(this.canPublishTiles||this.canPublishFeatures||this.canPublishScenes||this.canPublishVectorTiles||this.canPublishImageCollection);this.canManageLicenses=this.isOrgAdmin||this.userRole.canManageLicenses();this.canManageWebsite=this.isOrgAdmin||this.userRole.canManageWebsite()};B.prototype.copyViewOnlyRoleProperties=function(){this.role=this.userRole.baseRole;this.roleId=this.userRole.id;this.privileges=this.userRole.privileges;this.level="1"};B.prototype.getTags=
function(){var w=this,z=new l["default"];this.tags&&this.tags.length?z.resolve(this.tags):this.inherited(arguments).then(function(x){w.set("tags",x);z.resolve(w.tags)},function(x){w.set("tags",[]);z.resolve([])});return z};B.prototype.getContentTags=function(){var w=this,z,x=new l["default"];(null===(z=this.contentTags)||void 0===z?0:z.length)?x.resolve(this.contentTags):f["default"].loadUserTags(this.username).then(function(y){w.set("contentTags",y);x.resolve(w.contentTags)},function(y){w.set("contentTags",
[]);x.resolve([])});return x};B.prototype.getCurrentFolder=function(){if(!v["default"].isDefined(this.currentFolder)){var w=f["default"].getCookie("ESRI_Content"),z=w&&"/"!==w.folderId?w.folderId:this.username;this.set("currentFolder",{id:z,isAll:null===w||void 0===w?void 0:w.isAll,isHome:"/"!==z&&z&&z!==this.username?!1:!0})}return this.currentFolder};B.prototype.setCurrentFolder=function(w){var z=f["default"].getCookie("ESRI_Content")||{},x=(null===w||void 0===w?void 0:w.id)||w||this.username,y=
"all"===x;w={folderId:x===this.username||y?"/":x,isAll:y,isHome:(null===w||void 0===w?0:w.isHome)||"/"===x||!x||x===this.username?!0:!1};c["default"].mixin(z,w);k["default"]("ESRI_Content",JSON.stringify(z),{path:"/",sameSite:"Strict"});this.set("currentFolder",c["default"].mixin(w,{id:x}))};B.prototype.getFolders=function(){var w=this,z=new l["default"];f["default"].request({url:this.userContentUrl,content:{num:1}}).then(this._toFolders.bind(this)).then(function(x){w.set("folders",x);z.resolve(x.slice(0))});
return z};B.prototype.createFolder=function(w){var z=this,x=new l["default"],y=this.userContentUrl+"/createFolder";w={folderName:w.replace(/ /g,"_"),title:w};f["default"].request({url:y,content:w},{usePost:!0}).then(function(u){z.folders.push(u.folder);z.folders.shift();z.set("folders",z._toFolders({folders:z.folders}));m["default"].publish("folders/refresh");x.resolve(u.folder)},function(u){x.reject(u)});return x};B.prototype.updateFolder=function(w,z){var x=this,y=new l["default"];f["default"].request({url:this.userContentUrl+
"/"+w+"/updateFolder",content:{newTitle:z}},{usePost:!0}).then(function(){return x.getFolders()},function(u){y.reject(u)}).then(function(u){y.resolve(u);m["default"].publish("folders/refresh")},function(u){y.reject(u)});return y};B.prototype.deleteFolder=function(w){var z=this,x=new l["default"];f["default"].request({url:this.userContentUrl+"/"+w+"/delete"},{usePost:!0}).then(function(y){var u,t=null===(u=null===y||void 0===y?void 0:y.folder)||void 0===u?void 0:u.id;z.folders=z.folders.filter(function(C){return(null===
C||void 0===C?void 0:C.id)!==t});z.folders.shift();z.set("folders",z._toFolders({folders:z.folders}));x.resolve(y.folder)},function(y){x.reject(y)});return x};B.prototype.deleteItems=function(w){var z=new l["default"],x=this.userContentUrl+"/deleteItems";w={items:w.map(function(y){return y.id})};f["default"].request({url:x,content:w},{usePost:!0}).then(function(){z.resolve(!0)},function(y){z.reject(y)});return z};B.prototype._toFolders=function(w){var z=this;w=(null===w||void 0===w?void 0:w.folders)||
[];w=w.sort(function(x,y){return x.title.localeCompare(y.title)});d["default"].find(w,function(x){return x.id===z.username})||w.unshift({username:this.username,id:this.username,title:this.username,created:"now"});return w};B.prototype.getGroups=function(){var w=this,z=this.portal.url+"community/users/"+this.username,x=new l["default"];this.userGroups?x.resolve(this.adminGroups||this.userGroups):f["default"].request({url:z}).then(function(y){w.userGroups=(null===y||void 0===y?0:y.groups)?w._toGroup(y.groups):
[];x.resolve(w.userGroups)},function(y){x.reject(y)});return x};B.prototype.getSharedOwnershipGroups=function(){var w=this,z=new l["default"];this.ownershipGroups&&z.resolve(0<this.ownershipGroups.length?this.ownershipGroups:null);this.getGroups().then(function(){z.resolve(0<w.ownershipGroups.length?w.ownershipGroups:null)});return z};B.prototype._toGroup=function(w){var z=this;this.ownershipGroups=[];return(null!==w&&void 0!==w?w:[]).map(function(x){var y=new b["default"](c["default"].mixin(x,{portal:z.portal}));
z._isSharedOwnershipGroup(x)&&z.ownershipGroups.push(x);return c["default"].mixin(x,{portalGroup:y})})};B.prototype._isSharedOwnershipGroup=function(w){var z=w.capabilities&&w.capabilities.join(",")||"";return(w.owner===this.username||!w.isViewOnly||w.userMembership&&"admin"===w.userMembership.memberType)&&-1<z.toLowerCase().indexOf("updateitemcontrol")};return B=a.__decorate([h["default"](q["default"].PortalUser,r["default"])],B)}()})},"arcgisonline/pages/portal/PortalGroup":function(){define("require exports tslib ./PortalItem ../utils/arrays ../utils/getLivingAtlasCategorySet ../utils/resources ../utils/socialMedia ../utils/verified ../utils/itemsgroups ../../sharing/util ../../tsutils/declareDecorator dojo/promise/all dojo/Deferred dojo/_base/lang dojo/Stateful esri/arcgis/Portal".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);return function(){function B(w){var z,x,y,u,t,C,E;this.portalUser=null!==(x=null===(z=this.portal)||void 0===z?void 0:z.getPortalUser())&&void 0!==x?x:null;this.groupContentUrl=this.url.replace("/community/",
"/content/");this.searchContentUrl=this.portal.portalUrl+"search";this.canShowSocialMediaLinks=f["default"].canShowSocialMediaLinksOnGroups(this.portal);this.isOwner="owner"===(null===(y=this.userMembership)||void 0===y?void 0:y.memberType);this.isManager="admin"===(null===(u=this.userMembership)||void 0===u?void 0:u.memberType);this.isMember="member"===(null===(t=this.userMembership)||void 0===t?void 0:t.memberType);this.isPublic="public"===this.access;this.belongsToGroup=this.userMembership&&g["default"].includes(["owner",
"admin","member"],this.userMembership.memberType);this.isSharedOwnership=g["default"].includes(this.capabilities,"updateitemcontrol");this.computeIsOpenDataEnabled();this.computeIsBackedByEnterpriseGroup();this.title=null!==(C=this.title)&&void 0!==C?C:"";this.snippet=null!==(E=this.snippet)&&void 0!==E?E:"";this.thumbnailUrl=this.thumbnail?this.url+"/info/"+this.thumbnail+"?token\x3d"+k["default"].getToken():"./images/group-no-image.png";this.portal.isPortal&&!this.membershipAccess&&(this.membershipAccess=
"org")}B.prototype.postscript=function(){};B.prototype.getOwnerProfile=function(w,z){var x=this,y=this.owner,u=new r["default"];this.ownerProfile?u.resolve(this.ownerProfile):(this.isOwner?(y=new r["default"],y.resolve(this.portalUser)):y=this.portal.getUserProfile(y),y.then(function(t){x.isAdmin=x.isOwner||x._isGroupAdmin(t);l["default"]({folders:x.isAdmin&&z?t.getFolders():null,tags:x.isAdmin&&w?t.getTags():null,contentTags:x.isAdmin&&w?t.getContentTags():null}).then(function(){x.set("ownerProfile",
t);u.resolve(t)})}));return u};B.prototype._isOpenDataSetter=function(w){this.isOpenData=w;this.computeIsOpenDataEnabled()};B.prototype._providerSetter=function(w){this.provider=w;this.computeIsBackedByEnterpriseGroup()};B.prototype._providerGroupNameSetter=function(w){this.providerGroupName=w;this.computeIsBackedByEnterpriseGroup()};B.prototype.leave=function(){var w=this,z=new r["default"];k["default"].request({url:this.url+"/leave"},{usePost:!0}).then(function(x){w.set("isMember",!1);z.resolve(x)});
return z};B.prototype.join=function(){var w=this,z=new r["default"];k["default"].request({url:this.url+"/join"},{usePost:!0}).then(function(x){w.autoJoin&&(w.set("belongsToGroup",!0),w.set("isMember",!0));z.resolve(x)},function(x){z.reject(x)});return z};B.prototype.getApplications=function(){var w=this,z=new r["default"];k["default"].request({url:this.url+"/applications"}).then(function(x){w.set("applications",x.applications);z.resolve(x.applications)},function(x){z.reject(x)});return z};B.prototype.groupContent=
function(w,z){var x=this;void 0===w&&(w={});var y=w.q;y=void 0===y?"":y;var u=w.sortField;u=void 0===u?"modified":u;var t=w.sortOrder;t=void 0===t?"desc":t;var C=w.num;C=void 0===C?12:C;var E=w.start;E=void 0===E?1:E;var F=this.portalUser,G=this.portal,H=new r["default"];k["default"].request({url:""+this.groupContentUrl+(z?"/search":"")+"?"+("string"===typeof w?w:"sortField\x3d"+u+"\x26sortOrder\x3d"+t+"\x26num\x3d"+C+"\x26start\x3d"+E+(y?"\x26q\x3d":"")+y)}).then(function(L){return h.getAllItemsGroups({response:L,
portalUser:F,url:G.url})}).then(function(L){return x.toPortalItems(L)}).then(function(L){return H.resolve(L)},function(L){H.reject(L)});return H};B.prototype.search=function(w){var z=this,x=new r["default"],y=this.portal.portalUrl+"search";w=a.__assign({q:"group:"+this.id,sortField:"modified",sortOrder:"desc",num:12,start:1},w||{});k["default"].request({url:y,content:w}).then(function(u){return z.toPortalItems(u)}).then(function(u){return x.resolve(u)},function(u){x.reject(u)});return x};B.prototype.toPortalItems=
function(w){var z=this,x=new r["default"];w.results&&(w.items=w.results,delete w.results);var y=w.items.map(function(u){return new b["default"](a.__assign(a.__assign({},u),{portal:z.portal}))}).map(function(u){return n["default"].setVerifiedInfo(u)});l["default"](y).then(function(u){w.items=u;x.resolve(w)},function(u){return 0});return x};B.prototype.groupMembers=function(w){var z=this;w=w||{};var x=new r["default"],y=m["default"].clone(w);w=this.url+"/userlist";y=a.__assign(a.__assign({},{sortField:"joined",
sortOrder:"desc",num:25,start:1}),y);k["default"].request({url:w,content:y}).then(function(u){return z.toMembers(u)}).then(function(u){return x.resolve(u)},function(u){x.reject(u)});return x};B.prototype.toMembers=function(w){var z=this,x=new r["default"],y=window.require("arcgisonline/pages/portal/PortalUser");w.users=w.users.map(function(u){return new y(a.__assign(a.__assign({},u),{portal:z.portal}))});x.resolve(w);return x};B.prototype.allGroupMembers=function(w){var z=this;w=w||{};var x=new r["default"],
y=m["default"].clone(w);w=this.url+"/userlist";y=a.__assign(a.__assign({},{sortField:"joined",sortOrder:"desc",num:25,start:1}),y);e["default"].fetchAllResources(w,y,"users").then(function(u){return z.toMembers({total:u.length,users:u})}).then(function(u){return x.resolve(u)},function(u){x.reject(u)});return x};B.prototype.itemCount=function(){var w=new r["default"];this.search({num:1}).then(function(z){return w.resolve(z&&z.total||0)});return w};B.prototype._isGroupAdmin=function(w){var z,x;w=w||
this.portal.portalUser||{};var y=w.username,u=(null===(z=this.groupOwner)||void 0===z?void 0:z.orgId)||void 0;z=this._getAdmins();z=g["default"].includes(z,y);y=w.orgId||u?w.orgId===u:!1;u=w.isOrgAdmin&&y;w=(null===(x=w.userRole)||void 0===x?void 0:x.isCustom())&&y&&w.userRole.canUpdateOrgGroups();return z||u||w};B.prototype.isGroupOwnerOrgMember=function(){return this.portal.portalUser?this.orgId&&this.portal.portalUser.orgId===this.orgId:!1};B.prototype._getAdmins=function(){var w,z;return(null!==
(z=null===(w=this.members)||void 0===w?void 0:w.users)&&void 0!==z?z:[]).filter(function(x){return"admin"===x.memberType}).map(function(x){return x.username})};B.prototype._canRemoveContent=function(w){var z,x=w||this.portal.portalUser||{},y=(null===(z=this.groupOwner)||void 0===z?void 0:z.username)||{};w=this._isGroupAdmin(w);x=x.username===y;return w||x};B.prototype._canAssignToThisGroup=function(w){var z,x;w=w||this.portal.portalUser||{};var y=(null===(z=this.groupOwner)||void 0===z?void 0:z.orgId)||
void 0;y=w.orgId||y?w.orgId===y:!1;z=w.isOrgAdmin&&y;w=(null===(x=w.userRole)||void 0===x?void 0:x.isCustom())&&y&&w.userRole.canAssignUsersToOrgGroups();return(z||w)&&!this.isOwner};B.prototype._canChangeOwner=function(w){var z,x;w=w||this.portal.portalUser||{};var y=(null===(z=this.groupOwner)||void 0===z?void 0:z.orgId)||{};y=w.orgId||y?w.orgId===y:!1;z=w.isOrgAdmin&&y;w=(null===(x=w.userRole)||void 0===x?void 0:x.isCustom())&&y&&w.userRole.canReassignOrgGroups();return!(!z&&!w)};B.prototype._canManageMembershipRequests=
function(w){var z;w=w||this.portal.portalUser||{};var x=w.username,y=(null===(z=this.groupOwner)||void 0===z?void 0:z.orgId)||{};z=this._getAdmins();y=w.orgId||y?w.orgId===y:!1;x=g["default"].includes(z,x);w=w.isOrgAdmin&&y;return!!(this.isOwner||x||w)};B.prototype._canInviteOthers=function(w){var z,x,y=w||this.portal.portalUser||{};w=y.username;var u=(null===(z=this.groupOwner)||void 0===z?void 0:z.orgId)||{};z=this._getAdmins();var t=y.orgId||u?y.orgId===u:!1;u=y.isOrgAdmin&&t;y=(null===(x=y.userRole)||
void 0===x?void 0:x.isCustom())&&t&&y.userRole.canAssignUsersToOrgGroups();x=g["default"].includes(z,w);return!!(this.isOwner||x||u||y)};B.prototype._canJoinGroup=function(w){var z,x,y;w=w||this.portal.portalUser||{};var u=(null===(z=this.groupOwner)||void 0===z?void 0:z.orgId)||{};z=w.orgId||u?w.orgId===u:!1;u=!this.isInvitationOnly;var t=!this.belongsToGroup,C=null===(x=w.userRole)||void 0===x?void 0:x.canJoinOrgGroup();x=!w.orgId||(null===(y=w.userRole)||void 0===y?void 0:y.canJoinNonOrgGroup());
return t&&u?z?C:C||x:!1};B.prototype._canDeleteGroup=function(w,z){var x,y,u=w||this.portal.portalUser||{},t=u.username,C=(null===(x=this.groupOwner)||void 0===x?void 0:x.orgId)||{};x=this._getAdmins();t=g["default"].includes(x,t);u=(u.orgId||C?u.orgId===C:!1)&&(null===(y=u.userRole)||void 0===y?void 0:y.canDeleteOrgGroups());return z&&z.isAdminView?z.canDelete:!!(this.isOwner||t||u)};B.prototype.getCategories=function(){var w=this,z=new r["default"],x,y,u,t;k["default"].request({url:this.url+"/categorySchema"}).then(function(C){x=
C.categorySchema||[];w.categorySchema=[];x.forEach(function(E){w._isReferencingCategorySet(E)?(y=-1<E.source.indexOf("portal.regions"),u=-1<E.source.indexOf("contentCategorySetsGroupQuery.LivingAtlas")):w.categorySchema.push(E)});y||u?d["default"](w.portal,"LivingAtlas",y).then(function(E){t=(null===E||void 0===E?0:E.length)?E.shift():{};w.categorySchema=m["default"].mixin(t.categorySchema,{isLivingAtlas:!0});z.resolve(w.categorySchema)}):z.resolve(w.categorySchema)},function(C){z.reject(C)});return z};
B.prototype.allowExternalMembers=function(){return"org"!==this.membershipAccess};B.prototype._isReferencingCategorySet=function(w){var z,x;return-1<(null===(z=w.source)||void 0===z?void 0:z.indexOf("portal.regions"))||-1<(null===(x=w.source)||void 0===x?void 0:x.indexOf("contentCategorySetsGroupQuery.LivingAtlas"))};B.prototype.computeIsOpenDataEnabled=function(){this.isOpenDataEnabled=this.portal&&!this.portal.isPortal&&!0===this.isOpenData};B.prototype.computeIsBackedByEnterpriseGroup=function(){this.isBackedByEnterpriseGroup=
"enterprise"===this.provider&&!!this.providerGroupName};return B=a.__decorate([c["default"](v.PortalGroup,q["default"])],B)}()})},"arcgisonline/pages/utils/getLivingAtlasCategorySet":function(){define("require exports tslib ../portal/PortalItem ../../sharing/util dojo/promise/all dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/kernel dojo/_base/lang".split(" "),function(D,A,a,b,g,d,e,f,n,h){function k(w){var z=new e["default"];g["default"].request({url:w.portalUrl+"portals/self",content:{culture:n["default"].locale,
"default":!0}}).then(function(x){z.resolve(null===x||void 0===x?void 0:x.contentCategorySetsGroupQuery)});return z}function c(w,z){var x=new e["default"],y=window.require("arcgisonline/pages/portal/PortalGroup");z?w.queryGroups(z,!0).then(function(u){(u=u.total?u.results.shift():null)?x.resolve(new y(h["default"].mixin(u,{portal:w}))):x.reject(!1)}):x.reject(!1);return x}function l(w,z,x,y){var u=new e["default"];y?z?r(w,y,z).then(function(t){return m(w,x,[t])}).then(function(t){return u.resolve(t)}):
y.groupContent().then(function(t){return u.resolve(t.items)}).then(function(t){return m(w,x,t)}).then(function(t){return u.resolve(t)}):u.reject(!1);return u}function r(w,z,x){var y=new e["default"],u;z.search({q:"group:"+z.id+' typekeywords:"'+x+'"',num:1}).then(function(t){u=t.total?t.items.shift():{};y.resolve(new b["default"](h["default"].mixin(u,{portal:w})))});return y}function m(w,z,x){var y=new e["default"];x=h["default"].isArray(x)?x:[x];z=z&&!w.isPortal;x=x.map(function(u){return q(w,z,
u)});d["default"](x).then(function(u){y.resolve(u)});return y}function q(w,z,x){var y=new e["default"],u=[B(x)];z&&u.push(v(w));d["default"](u).then(function(t){x.set("categorySchema",t);y.resolve(x)});return y}function v(w){var z=new e["default"],x={title:"Region",description:"Living Atlas Regions",displayName:f["default"].common.regions};w.getRegions().then(function(y){y=(y||[]).map(function(u){return h["default"].mixin(u,{displayName:u.localizedName,name:u.region})});x=h["default"].mixin(x,{categories:y});
z.resolve(x)});return z}function B(w){var z=new e["default"];w.getData().then(function(x){x=null===x||void 0===x?void 0:x.categorySchema;x=(null===x||void 0===x?0:x.length)?x.shift():{};z.resolve(h["default"].mixin(x,{displayName:f["default"].GroupWidget.categories}))});return z}b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);return function(w,z,x){var y=new e["default"];k(w).then(function(u){return c(w,
u)}).then(function(u){return l(w,z,x,u)}).then(function(u){return y.resolve(u)},function(u){return y.resolve(null)});return y}})},"arcgisonline/pages/utils/verified":function(){define(["require","exports","tslib","../../sharing/util","dojo/Deferred"],function(D,A,a,b,g){b=a.__importDefault(b);g=a.__importDefault(g);return function(){function d(){}d.getVerifiedInfo=function(e){var f,n,h,k=new g["default"],c=d.orgHash,l=null!==(f=e.orgId)&&void 0!==f?f:null===(n=e.portal)||void 0===n?void 0:n.id;f=
null===(h=e.portal)||void 0===h?void 0:h.isPortal;if(e.contentStatus&&"public_authoritative"===e.contentStatus&&l&&!f)if(c[l])k.resolve(d.orgHash[l]);else{var r=location.protocol+"//"+e.portal.portalHostname+"/sharing/rest/portals/"+l;b["default"].request({url:r}).then(function(m){return d.getOrgProps(r).then(function(q){q&&(m.localizedOrgProperties=q);return m})}).then(function(m){var q,v,B=(m.allSSL?"https://":"http://")+(m.urlKey||"")+"."+m.customBaseUrl+"/",w=m.thumbnail?B+"sharing/rest/portals/self/resources/"+
m.thumbnail:"./images/group-no-image.png";c[m.id]={name:m.name,description:null===(v=null===(q=m.localizedOrgProperties)||void 0===q?void 0:q["default"])||void 0===v?void 0:v.description,url:B+"home/",thumbnail:w};k.resolve(c[m.id])},function(m){return 0})}else k.resolve(!1);return k};d.getOrgProps=function(e){var f=new g["default"];b["default"].request({url:e+"/resources/localizedOrgProperties",content:{start:1,num:100}}).then(function(n){n&&!n.code?f.resolve(n):f.resolve(!1)},function(){f.resolve(!1)});
return f};d.setVerifiedInfo=function(e){var f=new g["default"];d.getVerifiedInfo(e).then(function(n){e.verified=n;f.resolve(e)});return f};d.orgHash={};return d}()})},"arcgisonline/pages/utils/itemsgroups":function(){define("require exports tslib dojo/_base/Deferred ./arrays ./promises arcgisonline/sharing/util".split(" "),function(D,A,a,b,g,d,e){function f(c){var l=c.response,r=c.url,m=c.portalUser;c=c.contentUser;var q=[];m&&(q=q.concat(m.userGroups||[]));c&&(q=q.concat(c.groups||[]));if(l.results&&
0<(null===q||void 0===q?void 0:q.length)){var v=l.results.map(function(B){return B.id}).join(",");m=q.map(function(B){return B.id});m=g["default"].batch(m,100).map(function(B){return n(r,B,v)});return d["default"].eachAlwaysValues(m).then(function(B){B=h(B);return k(l,B)})}m=new b["default"];m.resolve(l);return m}function n(c,l,r){if(!r||0===l.length)return r=new b["default"],r.resolve({}),r;c+="content/itemsgroups";l=l.join(",");return e["default"].request({url:c,content:{items:r,groups:l}})}function h(c){return c.reduce(function(l,
r){r&&Object.keys(r).forEach(function(m){m&&r[m]&&(l[m]=r[m])});return l},{})}function k(c,l){if(l){var r={};c.results.forEach(function(m){return r[m.id]=m});Object.keys(l).forEach(function(m){var q=l[m];if(q&&q.items){m=l[m];var v=m.groupId,B=m.groupTitle,w=m.groupThumbnail;m.items.forEach(function(z){z=r[z.itemId];z.groupData=z.groupData||[];z.sharedGroups=z.sharedGroups||0;0!==z.groupData.length&&g["default"].find(z.groupData,function(x){return x.id===v})||(z.groupData.push({groupId:v,groupTitle:B,
groupThumbnail:w}),z.sharedGroups+=1)})}})}return c}Object.defineProperty(A,"__esModule",{value:!0});A.parseItemsGroups=A.collateItemsGroupsResponse=A.fetchItemsGroupsPage=A.getAllItemsGroups=A.getItemGroups=void 0;b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);A.getItemGroups=function(c){var l=c.url,r=c.portalUser,m=c.contentUser;c={results:[c.item]};var q=new b["default"];f({response:c,url:l,portalUser:r,contentUser:m}).then(function(v){q.resolve(null===
v||void 0===v?void 0:v.results[0])});return q};A.getAllItemsGroups=f;A.fetchItemsGroupsPage=n;A.collateItemsGroupsResponse=h;A.parseItemsGroups=k})},"arcgisonline/pages/utils/promises":function(){define(["require","exports","tslib","dojo/Deferred","dojo/promise/all"],function(D,A,a,b,g){b=a.__importDefault(b);g=a.__importDefault(g);return{isPromise:function(d){return d&&"function"===typeof d.then},resolve:function(d){var e=new b["default"];e.resolve(d);return e.promise},reject:function(d){var e=new b["default"];
e.reject(d);return e.promise},when:function(d){return this.isPromise(d)?d:this.resolve(d)},create:function(d,e,f){var n=this,h=new b["default"](f);d(function(k){return n.when(k).then(h.resolve,h.reject)});return h.promise},all:g["default"],filter:function(d,e){var f=d.slice();return this.all(d.map(function(n,h){return e(n,h)})).then(function(n){return f.filter(function(h,k){return n[k]})})},eachAlways:function(d){if(d){if("function"!==typeof d.forEach){var e=Object.keys(d),f=e.map(function(n){return d[n]});
return this.eachAlways(f).then(function(n){var h={};e.forEach(function(k,c){h[k]=n[c]});return h})}return this.create(function(n){var h=[],k=d.length;0===k&&n(h);d.forEach(function(c){var l={promise:c};h.push(l);c.then(function(r){l.value=r})["catch"](function(r){l.error=r}).then(function(){--k;0===k&&n(h)})})},function(n){d.forEach(function(h){h.cancel(n)})})}},eachAlwaysValues:function(d){return this.eachAlways(d).then(function(e){return e.filter(function(f){return f.value}).map(function(f){return f.value})})},
after:function(d,e){var f=this,n=0;return this.create(function(h){n=window.setTimeout(function(){f.resolve(e)},d)},function(){n&&(clearTimeout(n),n=0)})},timeout:function(d,e,f){var n=0,h=new b["default"](d.cancel);d.then(function(k){h.isFulfilled()||(h.resolve(k),n&&(clearTimeout(n),n=0))});d["catch"](function(k){h.isFulfilled()||(h.reject(k),n&&(clearTimeout(n),n=0))});n=window.setTimeout(function(){h.reject(f||Error("promiseUtils:timeout\n          The wrapped promise did not resolve within "+
e+"ms"))},e);return h.promise}}})},"arcgisonline/pages/portal/LicenseInfo":function(){define("require exports tslib ../utils/organization ../../sharing/geow/Licenses dojo/Deferred".split(" "),function(D,A,a,b,g,d){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);return{_licensesAPI:new g["default"],licenses:{arcgiswebapps:{valid:!1,className:"web-apps-not-licensed"},arcgisinsights:{valid:!1,className:"insights-not-licensed"},hubforarcgis:{valid:!1},orthomaker:{valid:!1,className:"orthomaker-not-licensed"},
opsdashboard:{valid:!1,className:"web-dashboard-not-licensed"},workforce:{valid:!1,className:"workforce-not-licensed"},survey123:{valid:!1,className:"survey123-not-licensed"},arcgisurban:{valid:!1,className:"arcgisUrban-not-licensed"},analytics4iot:{valid:!1,isCapability:!0}},getLicenseInfo:function(){var e=this,f=new d["default"],n=this.licenses||{};this._getSubscriptionInfo().then(function(){return e._getProvisionedListings()}).then(function(){return f.resolve(n)});return f},_getSubscriptionInfo:function(){var e=
this,f=new d["default"],n=this.licenses||{};this.portal.user&&this.isOrgUser?b["default"].getSubscriptionInfo().then(function(h){var k;e.orgCapabilities=null!==(k=null===h||void 0===h?void 0:h.orgCapabilities)&&void 0!==k?k:[];e.orgCapabilities.forEach(function(c){return e._addCapabilityInfo(c)});f.resolve(n)}):f.resolve(n);return f},_addCapabilityInfo:function(e){var f,n,h=this.licenses||{},k=(null===(f=e.id)||void 0===f?void 0:f.toLowerCase())||null;e&&(f=null!==(n=h[k])&&void 0!==n?n:{},h[k]=a.__assign(a.__assign(a.__assign({},
f),e),{title:e.id,valid:!0}))},_getProvisionedListings:function(){var e=this,f=new d["default"],n=this.portal.user,h={returnAppClientIds:!0,returnAllProvisions:!0},k=this.licenses||{};n&&this.isOrgUser?this._licensesAPI.getUserProvisionedListings(n.username,h).then(function(c){e.provisionedListings=null!==c&&void 0!==c?c:[];e.provisionedListings.forEach(function(l){return e._addListingInfo(l)});f.resolve(k)},function(){f.resolve([])}):(Object.keys(k).forEach(function(c){k[c].isCapability||(k[c].valid=
!0)}),f.resolve(k));return f},_addListingInfo:function(e){var f,n=this.licenses||{},h=(null===(f=e.clientId)||void 0===f?void 0:f.toLowerCase())||null;h&&(n[h]=a.__assign(a.__assign({},n[h]||{}),{valid:!0,itemId:e.itemId,clientId:e.clientId}))},isLicensed:function(e){var f,n,h;e=null!==(f=null===e||void 0===e?void 0:e.toLowerCase())&&void 0!==f?f:"";f=this.licenses||{};return null!==(h=null===(n=null===f||void 0===f?void 0:f[e])||void 0===n?void 0:n.valid)&&void 0!==h?h:!1}}})},"arcgisonline/sharing/geow/Licenses":function(){define("require exports tslib dojo/Deferred dojo/string dojo/i18n!../../nls/arcgisonline esri/lang ../../esriGeowConfig ../../pages/pageUtil ../../pages/utils/organization ../../pages/utils/promises ../../pages/components/ManageBlockedApps/blocked-apps-service ../util".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);return function(){function r(){this.proEntitlements=[];this._productListings=[];this.productEntitlements={};this._remainingProEntitlements={};this._remainingProductEntitlements={};this.appUserCounts=[];this._userEntitlementsUrl=f["default"].restBaseUrl+
"content/listings/${itemId}/userEntitlements";this._userEntitlementUrl=this._userEntitlementsUrl+"/${username}";this._userSessionsUrl=f["default"].restBaseUrl+"content/listings/${itemId}/users/${username}/sessions"}r.terminateUserSession=function(m,q,v){var B=l["default"].getSecureUrl(f["default"].restBaseUrl);return l["default"].request({url:B+"content/listings/"+m+"/terminateUserSession",content:{username:q,sessionId:v}},{usePost:!0})};r.prototype.provisionUserEntitlements=function(m,q,v){return n["default"].sendAllResourcesSerially(f["default"].restBaseUrl+
"content/listings/"+m+"/provisionUserEntitlements",25,q.users,function(B){return{userEntitlements:JSON.stringify({users:B,entitlements:q.entitlements}),suppressCustomerEmail:!v}})};r.prototype.retrieveProvisionedUserEntitlement=function(m,q){var v=g["default"].substitute(this._userEntitlementUrl,{itemId:m,username:q});return l["default"].request({url:v})};r.prototype.retrieveProvisionedUserEntitlements=function(m,q,v){m=g["default"].substitute(this._userEntitlementsUrl,{itemId:m});return l["default"].request({url:m,
content:{start:q?q:1,num:v?v:10}})};r.prototype.retrieveSessionInformation=function(m,q){var v=g["default"].substitute(this._userSessionsUrl,{itemId:m,username:q});return l["default"].request({url:v})};r.prototype.provisionUserAppBundle=function(m,q,v){var B=new b["default"],w=new b["default"];v?w.resolve():this.getAppBundles(!0).then(function(z){z=z.appBundles.filter(function(x){return x.appBundleItemId===m})[0];z.maxUsers-z.assigned>=q.length?w.resolve():B.reject()});w.then(function(){n["default"].sendAllResourcesWithDelay(f["default"].restBaseUrl+
"content/listings/"+m+"/provisionUserAppBundle",25,q,function(z){return{users:JSON.stringify(z),revoke:v}},500).then(function(z){B.resolve(z)},function(z){B.reject(z)})});return B};r.prototype.updateUserLicenseType=function(m,q){var v=new b["default"];n["default"].sendAllResourcesSerially(f["default"].restBaseUrl+"portals/self/updateUserLicenseType",25,m,function(B){return{users:JSON.stringify(B),userLicenseType:q}}).then(function(B){v.resolve(B)},function(){v.reject()});return v};r.prototype.getUserCounts=
function(m){return l["default"].request({url:f["default"].restBaseUrl+"portals/self/users/counts?type\x3d"+m})};r.prototype.getUserLicenseType=function(m){var q=this,v=new b["default"],B;c["default"].getBlockedAppsWithInfo().then(function(w){B=w;return l["default"].request({url:f["default"].restBaseUrl+"/community/users/"+m+"/userLicenseType"})}).then(function(w){w.apps.forEach(function(z){z.isAppBundle?z.apps.forEach(function(x){x.blocked=c["default"].isBlocked(B,x)}):z.blocked=c["default"].isBlocked(B,
z)});q.addFieldMapsMobileToUserType(w);v.resolve(w)},function(){v.resolve()});return v};r.prototype.getUserAppBundles=function(m){return n["default"].fetchAllResources(f["default"].restBaseUrl+"/community/users/"+m+"/appBundles",{num:10},"appBundles")};r.prototype.getUserProvisionedListings=function(m,q,v){var B=q||{},w=new b["default"],z;v?c["default"].getBlockedAppsWithInfo().then(function(x){w.resolve(x)}):w.resolve([]);return w.then(function(x){z=x;return n["default"].fetchAllResources(f["default"].restBaseUrl+
"/community/users/"+m+"/provisionedListings",B,"provisionedListings")}).then(function(x){h["default"].licensesConfig&&x.forEach(function(y){var u=h["default"].licensesConfig.apps.filter(function(t){return t.title===y.title})[0];u&&u.label&&(y.title=u.label);y.blocked=c["default"].isBlocked(z,y)});return x})};r.prototype.getUserEntitlements=function(m,q){return l["default"].request({url:f["default"].restBaseUrl+"/content/listings/"+m+"/userEntitlements/"+q})};r.prototype.getLicenseTypes=function(m){var q=
this,v=new b["default"],B;c["default"].getBlockedAppsWithInfo().then(function(w){B=w;return n["default"].fetchAllResources(f["default"].restBaseUrl+"portals/self/userLicenseTypes",{num:10},"userLicenseTypes")}).then(function(w){(null===B||void 0===B?0:B.length)&&w.forEach(function(z){z.apps.forEach(function(x){x.isAppBundle?x.apps.forEach(function(y){y.blocked=B.some(function(u){var t;return u.itemid&&u.itemid===y.id||u.title===y.title||(null===(t=u.related)||void 0===t?void 0:t.some(function(C){return C.itemid&&
C.itemid===y.id||C.title===y.title}))})}):x.blocked=B.some(function(y){var u;return y.itemid&&y.itemid===x.id||y.title===x.title||(null===(u=y.related)||void 0===u?void 0:u.some(function(t){return t.itemid&&t.itemid===x.id||t.title===x.title}))})})});q.getUserCounts("userLicenseType").then(function(z){w.forEach(function(y){var u=z.results.filter(function(t){return t.key===y.id})[0];y.assigned=u?u.count:0;q.addFieldMapsMobileToUserType(y)});var x=w.filter(function(y){return m||0!==y.assigned||0!==
y.maxUsers});n["default"].sortListByStrProp(x,"name");v.resolve({userLicenseTypes:x})})});return v};r.prototype.getAppBundles=function(m){var q=this,v=new b["default"],B;c["default"].getBlockedAppsWithInfo().then(function(w){B=w;return l["default"].request({url:f["default"].restBaseUrl+"portals/self/appBundles"})}).then(function(w){w.appBundles.forEach(function(z){"Field Apps"===z.name&&z.apps.push({id:"fieldmapsmobile",title:"ArcGIS Field Maps",type:"Mobile Application",entitlements:["fieldmapsmobile"]});
z.apps.forEach(function(x){x.blocked=B.some(function(y){var u;return y.itemid&&y.itemid===x.id||y.title===x.title||(null===(u=y.related)||void 0===u?void 0:u.some(function(t){return t.itemid&&t.itemid===x.id||t.title===x.title}))})})});q.getUserCounts("appBundle").then(function(z){w.appBundles.forEach(function(x){var y=z.results.filter(function(u){return u.key===x.appBundleItemId})[0];x.assigned=y?y.count:0});w.appBundles=w.appBundles.filter(function(x){return 0!==x.maxUsers||0!==x.assigned});n["default"].sortListByStrProp(w.appBundles,
"name");m?v.resolve(w):k["default"].eachAlways(w.appBundles.map(function(x){return q.getUsersForAppBundle(x.appBundleItemId)})).then(function(x){x.forEach(function(y,u){w.appBundles[u].usernames=y.value.results.map(function(t){return t.username})});k["default"].eachAlways(w.appBundles.map(function(y){return q.getAppBundleListing(y.appBundleItemId)})).then(function(y){w.appBundles.forEach(function(u,t){u.allowedLevels=y[t].value.allowedUserLevels?y[t].value.allowedUserLevels.split(",").map(function(C){return C.trim()}):
[]});v.resolve(w)})})})});return v};r.prototype.getAppBundleListing=function(m){return l["default"].request({url:l["default"].getSecureUrl(f["default"].restBaseUrl)+"content/listings/"+m})};r.prototype.getUsersForAppBundle=function(m){return l["default"].request({url:f["default"].restBaseUrl+"portals/self/users/search",content:{q:"appbundle: "+m}})};r.prototype.getLicensedEntitlements=function(){var m=this,q=new b["default"],v;h["default"].initLicensesConfig(f["default"].portal).then(function(){return c["default"].getBlockedAppsWithInfo()}).then(function(B){v=
B;return m.retrieveProductListings()}).then(function(){m._retrieveUserEntitlements().then(function(){var B;m._hasNegativeLicenses();var w=[];if(m._hasProListing()){var z={};m.appUserCounts.forEach(function(t){t.key!==m._proListing.listing.itemId||z[t.secondaryKey]||(z[t.secondaryKey]={num:0})});var x=!(m._proListing.provision.orgEntitlements&&m._proListing.provision.orgEntitlements.entitlements),y=[];var u=x?z:m._proListing.provision.orgEntitlements.entitlements;x||Object.keys(z).forEach(function(t){u[t]||
(u[t]=z[t],y.push(t))});Object.keys(u).forEach(function(t){var C;x||(x=-1!==y.indexOf(t));var E=(null===(C=m.appUserCounts.filter(function(J){return J.key===m._proListing.listing.itemId&&J.secondaryKey===t})[0])||void 0===C?void 0:C.count)||0;C=u[t].num;var F=C-E,G=m.proEntitlements.filter(function(J){return-1!==J.entitlements.indexOf(t)}),H=-1===["desktopBasicN","desktopStdN","desktopAdvN"].indexOf(t),L=m._isLicenseExpired(m._proListing.provision.endDate,x,C,E);E={title:r.getProEntitlementTitle(t),
key:t,total:C,used:E,remaining:F,status:g["default"].substitute(r.i18n.licensesUsed,{used:E,total:C}),isPro:!0,proEntitlements:m.proEntitlements,allowedLevels:["2"],itemId:m._proListing.listing.itemId,usernames:G.map(function(J){return J.username}),extNotSupported:r.getExtNotSupported(t),expiration:m._proListing.provision.endDate,isExpired:L,isExtension:H,trial:m._proListing.provision.trial};w.push(E)})}null===(B=m._productListings)||void 0===B?void 0:B.forEach(function(t){var C,E=t.listing,F=E.itemId,
G={},H=!(t.provision.orgEntitlements&&t.provision.orgEntitlements.entitlements),L=E.title,J=m.appUserCounts.filter(function(Q){return Q.key===F})[0];J&&(G[J.secondaryKey]={num:0});u=H?G:t.provision.orgEntitlements.entitlements;G&&Object.keys(G).length&&Object.keys(G).forEach(function(Q){u[Q]||(u[Q]=G[Q])});var S=[],P="esri"===E.owner||"esri_apps"===E.owner;!P&&u&&Object.keys(u).length&&(S=Object.keys(u),J=S[0],u=(C={},C[J]=u[J],C));Object.keys(u).forEach(function(Q){var M,N;if(h["default"].licensesConfig){var K=
h["default"].licensesConfig.apps.filter(function(Y){return Y.entitlement===Q})[0];K&&(L=K.label||K.title)}K=(null===(M=m.appUserCounts.filter(function(Y){return Y.key===F&&Y.secondaryKey===Q})[0])||void 0===M?void 0:M.count)||0;M={drone2MapAdvN:"ArcGIS Drone2Map Advanced",drone2MapStdN:"ArcGIS Drone2Map Standard"};M[Q]&&(L=M[Q]);M=u[Q].num;var X=M-K,da=m._isLicenseExpired(t.provision.endDate,H,M,K);K={title:L,key:Q,total:M,used:K,remaining:X,status:g["default"].substitute(r.i18n.licensesUsed,{used:K,
total:M}),icon:E.icon,properties:E.properties,itemId:F,type:E.type,allowedLevels:E.allowedUserLevels?E.allowedUserLevels.split(",").map(function(Y){return Y.trim()}):[],usernames:m.productEntitlements[F]?m.productEntitlements[F].map(function(Y){return Y.username}):[],expiration:t.provision.endDate,isExpired:da,trial:t.provision.trial,requiredListings:E.requiredListings,dependentListings:E.dependentListings,owner:E.owner,isBusinessAnalyst:h["default"].isBusinessAnalyst(Q),isDrone2Map:h["default"].isDrone2Map(Q),
blocked:v.some(function(Y){var aa;return Y.itemid&&Y.itemid===F||Y.title===L||(null===(aa=Y.related)||void 0===aa?void 0:aa.some(function(ca){return ca.itemid&&ca.itemid===F||ca.title===L}))}),entitlementKeys:S,isEsriApp:P};"ArcGIS for Power BI"===K.title&&(null===(N=h["default"].licensesConfig)||void 0===N?0:N.hidePowerBI)||w.push(K)})});n["default"].sortListByStrProp(w,"title");q.resolve(w)})});return q};r.prototype.getProListing=function(){return this._hasProListing()?this._proListing:void 0};
r.prototype.getDisconnectSettingForListing=function(m){m=l["default"].getSecureUrl(f["default"].restBaseUrl)+"content/listings/"+m+"/disconnectSettings";return l["default"].request({url:m})};r.prototype.updateDisconnectSettingForListing=function(m,q,v){m=l["default"].getSecureUrl(f["default"].restBaseUrl)+"content/listings/"+m+"/setDisconnectSettings";var B=new b["default"];q={canDisconnect:q};e["default"].isDefined(v)&&(q.maxDisconnectTime=v);l["default"].request({url:m,content:q},{usePost:!0}).then(function(w){w&&
w.code&&w.messageCode?B.resolve({error:!0,messageCode:w.messageCode}):B.resolve(w)},function(w){var z={error:!0,messageCode:void 0};w&&w.messageCode&&(z.messageCode=w.messageCode);B.resolve(z)});return B};r.getExtNotSupported=function(m){return this._extNotSupported[m]};r.getProEntitlementTitle=function(m){switch(m){case "desktopBasicN":return r.i18n.licenseTypes.agsProLabel+" "+r.i18n.licenseTypes.basicLabel;case "desktopStdN":return r.i18n.licenseTypes.agsProLabel+" "+r.i18n.licenseTypes.standardLabel;
case "desktopAdvN":return r.i18n.licenseTypes.agsProLabel+" "+r.i18n.licenseTypes.advancedLabel;case "spatialAnalystN":return r.i18n.licenseTypes.spatialAnalyst;case "3DAnalystN":return r.i18n.licenseTypes.threeDAnalyst;case "networkAnalystN":return r.i18n.licenseTypes.networkAnalyst;case "geostatAnalystN":return r.i18n.licenseTypes.geostatisticalAnalyst;case "dataReviewerN":return r.i18n.licenseTypes.dataReviewer;case "workflowMgrN":return r.i18n.licenseTypes.workflowManager;case "dataInteropN":return r.i18n.licenseTypes.dataInterop;
case "defenseN":return r.i18n.licenseTypes.defenseMapping;case "FMVN":return r.i18n.licenseTypes.fullMotionVideo;case "businessBasicN":return r.i18n.licenseTypes.businessBasic;case "businessStdN":return r.i18n.licenseTypes.businessStd;case "roadsHighwaysN":return r.i18n.licenseTypes.roadsHighways;case "publisherN":return r.i18n.licenseTypes.publisher;case "productionMapN":return r.i18n.licenseTypes.productionMapping;case "schematicsN":return r.i18n.licenseTypes.schematics;case "trackingN":return r.i18n.licenseTypes.tracking;
case "aviationN":return r.i18n.licenseTypes.aviation;case "airportsN":return r.i18n.licenseTypes.airports;case "maritimeN":return r.i18n.licenseTypes.maritime;case "bathymetryN":return r.i18n.licenseTypes.bathymetry;case "smpNAmericaN":return r.i18n.licenseTypes.streetMapNA;case "smpEuropeN":return r.i18n.licenseTypes.streetMapEU;case "smpAsiaPacificN":return r.i18n.licenseTypes.streetMapAPAC;case "smpMidEAfricaN":return r.i18n.licenseTypes.streetMapMEA;case "smpLAmericaN":return r.i18n.licenseTypes.streetMapLA;
case "smpJapanN":return r.i18n.licenseTypes.streetMapJA;case "LocRefDesktopN":return r.i18n.licenseTypes.locationRef;case "imageAnalystN":return r.i18n.licenseTypes.imageAnalyst;case "locateXTN":return r.i18n.licenseTypes.locateXT;case "indoorsN":return r.i18n.licenseTypes.indoors;default:return""}};r.prototype._hasNegativeLicenses=function(){var m=this,q={},v=!1,B=!1;this._proListing&&(this._proListing.provision.orgEntitlements&&this._proListing.provision.orgEntitlements.entitlements&&(q=this._convertOrgEntitlementsToPurchaseMap(this._proListing.provision.orgEntitlements.entitlements)),
this._remainingProEntitlements=a.__assign({},q),this.proEntitlements.forEach(function(w){w.entitlements.forEach(function(z){m._remainingProEntitlements[z]||(m._remainingProEntitlements[z]=0);--m._remainingProEntitlements[z];0>m._remainingProEntitlements[z]&&(v=!0)})}));this._productListings&&0<this._productListings.length&&(this._remainingProductEntitlements={},this._productListings.forEach(function(w){q={};var z=w.listing.itemId;w.provision.orgEntitlements&&w.provision.orgEntitlements.entitlements&&
(q=m._convertOrgEntitlementsToPurchaseMap(w.provision.orgEntitlements.entitlements));m._remainingProductEntitlements[z]=a.__assign({},q);m.productEntitlements[z]&&m.productEntitlements[z].forEach(function(x){x.entitlements.forEach(function(y){m._remainingProductEntitlements[z]||(m._remainingProductEntitlements[z]={});m._remainingProductEntitlements[z][y]||(m._remainingProductEntitlements[z][y]=0);--m._remainingProductEntitlements[z][y];0>m._remainingProductEntitlements[z][y]&&(B=!0)})})}));return v||
B};r.prototype._convertOrgEntitlementsToPurchaseMap=function(m){var q={};if(m)for(var v in m)m[v]&&e["default"].isDefined(m[v].num)?q[v]=m[v].num:q[v]=m[v];return q};r.prototype._hasProListing=function(){var m=this;return!!(this._proListing&&this._proListing.provision&&(this._proListing.provision.orgEntitlements&&!n["default"].isEmptyObject(this._proListing.provision.orgEntitlements)||this.appUserCounts.some(function(q){var v;return q.key===(null===(v=m._proListing.listing)||void 0===v?void 0:v.itemId)})))};
r.prototype._isLicenseExpired=function(m,q,v,B){var w=e["default"].isDefined(m),z=-1===m;m=m<Date.now();return w&&!z&&m||q||0===v&&0<B};r.prototype.retrieveProductListings=function(){var m=this,q=new b["default"];l["default"].findLicenseByUserProducts().then(function(v){v&&v.pro&&(m._proListing=a.__assign({},v.pro));v&&v.products&&(m._productListings=a.__spreadArray([],v.products));q.resolve()},function(){m._proListing=void 0;m._productListings=void 0;q.resolve()});return q};r.prototype.retrieveUserEntitlementsForListing=
function(m){m=g["default"].substitute(this._userEntitlementsUrl,{itemId:m});return n["default"].fetchAllResources(m,{},"userEntitlements")};r.prototype.getAppUserCounts=function(){var m=this;return n["default"].fetchAllResources(f["default"].restBaseUrl+"portals/self/users/counts?type\x3dapp").then(function(q){m.appUserCounts=q})};r.prototype._retrieveUserEntitlements=function(){var m=new b["default"];this.getAppUserCounts().then(function(){m.resolve()},function(){m.resolve()});return m};r.prototype.addFieldMapsMobileToUserType=
function(m){m.apps.forEach(function(q){q.isAppBundle&&"Field Apps"===q.title&&q.apps.push({id:"fieldmapsmobile",title:"ArcGIS Field Maps",type:"Mobile Application",entitlements:["fieldmapsmobile"]})})};r.prototype._retrieveProUserEntitlements=function(){var m=g["default"].substitute(this._userEntitlementsUrl,{itemId:this._proListing.listing.itemId});return n["default"].fetchAllResources(m,{},"userEntitlements")};r.prototype._retrieveProductUserEntitlements=function(){var m=this,q={};this._productListings.forEach(function(v){v=
v.listing.itemId;var B=g["default"].substitute(m._userEntitlementsUrl,{itemId:v});q[v]=n["default"].fetchAllResources(B,{},"userEntitlements")});return q};r.prototype.getUserLicensedItems=function(m){return a.__awaiter(this,void 0,void 0,function(){var q;return a.__generator(this,function(v){switch(v.label){case 0:return v.trys.push([0,2,,3]),[4,l["default"].request({url:f["default"].restBaseUrl+"community/users/"+m,content:{returnUserLicensedItems:!0}})];case 1:return q=v.sent(),[2,(null===q||void 0===
q?void 0:q.userLicensedItems)||[]];case 2:return v.sent(),[2,[]];case 3:return[2]}})})};r.i18n=a.__assign({},d["default"].manageLicenses);r._extNotSupported={desktopBasicN:"defenseN roadsHighwaysN productionMapN aviationN airportsN maritimeN bathymetryN LocRefDesktopN".split(" "),desktopStdN:["maritimeN"],desktopAdvN:[]};return r}()})},"arcgisonline/pages/components/ManageBlockedApps/blocked-apps-service":function(){define("require exports tslib dojo/Deferred dojo/promise/all arcgisonline/sharing/util arcgisonline/esriGeowConfig".split(" "),
function(D,A,a,b,g,d,e){Object.defineProperty(A,"__esModule",{value:!0});b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);var f,n,h,k,c,l,r=function(){var B=new b["default"];if(e["default"].self.isPortal)return B.resolve([]),B;if(h)return h;if((null===n||void 0===n?0:n.blockedApps)&&3E3>=Date.now()-n.timestamp)return B.resolve(n.blockedApps),h=void 0,B;h=B;d["default"].request({url:e["default"].restBaseUrl+"portals/self/signinSettings"}).then(function(w){n=
{blockedApps:null===w||void 0===w?void 0:w.blockedApps,timestamp:Date.now()};B.resolve(null===w||void 0===w?void 0:w.blockedApps);h=void 0},function(){B.resolve([]);h=void 0});return B},m=function(){var B=new b["default"];if(l)return B.resolve(l),B;if(k)return k;k=B;d["default"].request({url:e["default"].restBaseUrl+"search",content:{num:10,start:0,sortField:"title",sortOrder:"asc",q:e["default"].blockedAppsConfigItemQuery}}).then(function(w){k=void 0;l=w;B.resolve(w)},function(){k=void 0;B.resolve(void 0)});
return B},q=function(B){var w=new b["default"];if(!B)return w.resolve(void 0),w;if(c)return c;c=w;d["default"].request({url:e["default"].restBaseUrl+"content/items/"+B+"/data"}).then(function(z){c=void 0;f=(null===z||void 0===z?void 0:z.blockedApps)||[];w.resolve(f)},function(){c=void 0;w.resolve(f)});return w},v=function(){var B=new b["default"];if(e["default"].self.isPortal)return B.resolve([]),B;if(f)return B.resolve(f),B;m().then(function(w){var z,x;if(w)return w=null===(x=null===(z=w.results)||
void 0===z?void 0:z[0])||void 0===x?void 0:x.id,q(w);B.resolve(f)}).then(function(w){B.resolve(w)});return B};A["default"]={updateBlockedApps:function(B){B=a.__assign({blockedApps:B.length?JSON.stringify(B):""},!B.length&&{clearEmptyFields:!0});return d["default"].request({url:e["default"].restBaseUrl+"portals/self/setSigninSettings",content:B},{usePost:!0})},getBlockedApps:r,getBlockableApps:v,getBlockedAppsWithInfo:function(){var B=new b["default"];if(e["default"].self.isPortal)return B.resolve([]),
B;g["default"]({blockable:v(),clientIds:r()}).then(function(w){var z=w.blockable,x=w.clientIds;(null===z||void 0===z?0:z.length)&&x||B.resolve([]);B.resolve((z||[]).filter(function(y){return-1<(null===x||void 0===x?void 0:x.indexOf(y.clientid))}))},function(){B.resolve([])});return B},isBlocked:function(B,w){return B.some(function(z){var x;return z.itemid&&(z.itemid===w.id||z.itemid===w.itemId)||z.title===w.title||(null===(x=z.related)||void 0===x?void 0:x.some(function(y){return y.itemid&&(y.itemid===
w.id||y.itemid===w.itemId)||y.title===w.title}))})},extractClientIds:function(B){var w=[];B.forEach(function(z){var x,y;w.push(z.clientid);null===(y=null===(x=z.related)||void 0===x?void 0:x.forEach)||void 0===y?void 0:y.call(x,function(u){w.push(u.clientid)})});return w}}})},"arcgisonline/sharing/dijit/Role":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/arrays ./_LevelAwareMixin ../../tsutils/declareDecorator dojo/i18n!../../nls/arcgisonline dojo/json esri/lang".split(" "),
function(D,A,a,b,g,d,e,f,n,h){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);return function(){function k(c){this.declaredClass="arcgisonline.sharing.dijit.Role";this.description=this.name=this.baseRole=this.id=null;this.privileges=[];this.privilegeObj={portal:{admin:{inviteUsers:!1,disableUsers:!1,viewUsers:!1,updateUsers:!1,deleteUsers:!1,changeUserRoles:!1,viewGroups:!1,updateGroups:!1,
deleteGroups:!1,reassignGroups:!1,assignToGroups:!1,manageEnterpriseGroups:!1,viewItems:!1,updateItems:!1,deleteItems:!1,reassignItems:!1,manageLicenses:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,createUpdateCapableGroup:!1,updateItemCategorySchema:!1,manageCollaborations:!1,manageSecurity:!1,manageWebsite:!1,manageRoles:!1,manageServers:!1,manageUtilityServices:!1,manageCredits:!1},publisher:{publishFeatures:!1,publishTiles:!1,publishScenes:!1,publishTiledImagery:!1,publishDynamicImagery:!1,
publishServerServices:!1,publishServerGPServices:!1,publishKnowledgeGraph:!1,registerDataStores:!1,bulkPublishFromDataStores:!1,enumerateDataStores:!1},user:{createGroup:!1,joinGroup:!1,joinNonOrgGroup:!1,invitePartneredCollaborationMembers:!1,addExternalMembersToGroup:!1,createItem:!1,shareToGroup:!1,shareToOrg:!1,shareToPublic:!1,shareGroupToOrg:!1,shareGroupToPublic:!1,viewOrgUsers:!1,viewOrgItems:!1,viewOrgGroups:!1,viewTracks:!1}},features:{user:{edit:!1,fullEdit:!1,manageVersions:!1}},opendata:{user:{openDataAdmin:!1,
designateGroup:!1}},premium:{user:{geocode:!1,networkanalysis:!1,spatialanalysis:!1,geoenrichment:!1,demographics:!1,featurereport:!1},publisher:{geoanalytics:!1,rasteranalysis:!1,createNotebooks:!1,scheduleNotebooks:!1,publishNotebooks:!1,createAdvancedNotebooks:!1}},marketplace:{admin:{manage:!1,purchase:!1,startTrial:!1}}};c=c||{};var l=c.portalUser;l?(this.id=l.roleId?l.roleId:l.role,this.baseRole=l.role,this.setPrivileges(l.privileges)):(this.id=c.id,this.baseRole=c.role,this.name=c.name,this.description=
c.description,c.privileges&&this.setPrivileges(c.privileges));c.viewOnly&&this.setViewOnly()}k.prototype.setViewOnly=function(){var c=this;this.baseRole="org_user";this.id=this.SYSTEM_ROLES.VIEWER;var l=this._buildPrivilegesArray().filter(function(r){return g["default"].includes(c.SYSTEM_ROLES.PRIVILEGES[c.id],r)});this.setPrivileges(l)};k.prototype.isViewer=function(){return h["default"].isDefined(this.id)&&this.id===this.SYSTEM_ROLES.VIEWER};k.prototype.isDataEditor=function(){return h["default"].isDefined(this.id)&&
this.id===this.SYSTEM_ROLES.DATA_EDITOR};k.prototype.isFacilitator=function(){return h["default"].isDefined(this.id)&&this.id===this.SYSTEM_ROLES.FACILITATOR};k.prototype.isUser=function(){return h["default"].isDefined(this.id)&&("org_user"===this.id||"account_user"===this.id)};k.prototype.isPublisher=function(){return h["default"].isDefined(this.id)&&("org_publisher"===this.id||"account_publisher"===this.id)};k.prototype.isAdmin=function(){return h["default"].isDefined(this.id)&&("org_admin"===this.id||
"account_admin"===this.id)};k.prototype.isBasedOnUser=function(){return this.isUser()||h["default"].isDefined(this.baseRole)&&("org_user"===this.baseRole||"account_user"===this.baseRole)};k.prototype.isBasedOnPublisher=function(){return this.isPublisher()||h["default"].isDefined(this.baseRole)&&("org_publisher"===this.baseRole||"account_publisher"===this.baseRole)};k.prototype.isBasedOnAdmin=function(){return this.isAdmin()||h["default"].isDefined(this.baseRole)&&("org_admin"===this.baseRole||"account_admin"===
this.baseRole)};k.prototype.isCustom=function(){return!this.isUser()&&!this.isPublisher()&&!this.isAdmin()&&h["default"].isDefined(this.id)&&0<this.id.length};k.prototype.isBuiltIn=function(){var c=this.isUser()||this.isPublisher()||this.isAdmin(),l=this.isViewer()||this.isDataEditor()||this.isFacilitator();return c||l};k.prototype.canInviteUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.inviteUsers};k.prototype.canDisableUsers=function(){var c;return null===
(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.disableUsers};k.prototype.canViewUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewUsers};k.prototype.canGetCoordinators=function(){return this.canViewUsers()||this.canViewOrgUsers()};k.prototype.canUpdateUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateUsers};k.prototype.canDeleteUsers=function(){var c;return null===(c=this.privilegeObj)||void 0===
c?void 0:c.portal.admin.deleteUsers};k.prototype.canChangeUserRoles=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.changeUserRoles};k.prototype.canViewOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewGroups};k.prototype.canUpdateOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateGroups};k.prototype.canDeleteOrgGroups=function(){var c;return null===(c=this.privilegeObj)||
void 0===c?void 0:c.portal.admin.deleteGroups};k.prototype.canReassignOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.reassignGroups};k.prototype.canAssignUsersToOrgGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.assignToGroups};k.prototype.canManageEnterpriseGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageEnterpriseGroups};k.prototype.canViewOrgItems=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.viewItems};k.prototype.canUpdateOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateItems};k.prototype.canDeleteOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.deleteItems};k.prototype.canReassignOrgItems=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.reassignItems};k.prototype.canManageItems=
function(){return this.isAdmin()||this.canViewUsers()&&this.canViewOrgItems()&&(this.canUpdateOrgItems()||this.canDeleteOrgItems()||this.canReassignOrgItems())};k.prototype.canManageLicenses=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageLicenses};k.prototype.canShareOthersItemsToGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.shareToGroup};k.prototype.canShareOthersItemsToOrg=function(){var c;return null===
(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.shareToOrg};k.prototype.canShareOthersItemsToPublic=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.shareToPublic};k.prototype.canCreateUpdateCapableGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.createUpdateCapableGroup};k.prototype.canUpdateItemCategories=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.updateItemCategorySchema};
k.prototype.canManageCollaborations=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageCollaborations};k.prototype.canManageSecurity=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageSecurity};k.prototype.canManageWebsite=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageWebsite};k.prototype.canManageRoles=function(){var c;return null===(c=this.privilegeObj)||void 0===c?
void 0:c.portal.admin.manageRoles};k.prototype.canManageServers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageServers};k.prototype.canManageUtilityServices=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageUtilityServices};k.prototype.canManageCredits=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.admin.manageCredits};k.prototype.canCreateGroup=function(){var c;return null===
(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.createGroup};k.prototype.canJoinOrgGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.joinGroup};k.prototype.canJoinNonOrgGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.joinNonOrgGroup};k.prototype.canManageCollaborationGroupMembers=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.invitePartneredCollaborationMembers};k.prototype.canAddExternalMembersToGroup=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.addExternalMembersToGroup};k.prototype.canPublishFeatures=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishFeatures};k.prototype.canPublishTiles=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishTiles};k.prototype.canPublishScenes=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishScenes};
k.prototype.canPublishTiledImagery=function(){var c,l;return(null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishTiledImagery)&&!(null===(l=b["default"].self)||void 0===l?0:l.isPortal)&&this._hasImageEntitlement()};k.prototype.canPublishDynamicImagery=function(){var c,l;return(null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishDynamicImagery)&&((null===(l=b["default"].self)||void 0===l?void 0:l.isPortal)||this._hasImageEntitlement())};k.prototype.canPublishServerServices=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishServerServices};k.prototype.canPublishServerGPServices=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishServerGPServices};k.prototype.canPublishKnowledgeGraphServices=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.publishKnowledgeGraph};k.prototype.canPublishVectorTiles=function(){return!0};k.prototype.canPublishImageCollection=
function(){var c=b["default"].self&&b["default"].self.isPortal,l=this.canPublishDynamicImagery()||this.canPublishTiledImagery();return c?this.canPublishDynamicImagery():l};k.prototype.canCreateItem=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.createItem};k.prototype.canShareItemToGroup=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareToGroup};k.prototype.canShareItemToOrg=function(){var c;return null===(c=this.privilegeObj)||
void 0===c?void 0:c.portal.user.shareToOrg};k.prototype.canShareItemToPublic=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareToPublic};k.prototype.canShareGroupToOrg=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareGroupToOrg};k.prototype.canShareGroupToPublic=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.shareGroupToPublic};k.prototype.canViewOrgUsers=function(){var c;return null===
(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgUsers};k.prototype.canViewOrgUserContent=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgItems};k.prototype.canViewOrgUserGroups=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewOrgGroups};k.prototype.canViewTracks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.user.viewTracks};k.prototype.canEditFeatures=function(){var c;
return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.edit};k.prototype.canEditFeaturesFullControl=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.fullEdit};k.prototype.canManageVersions=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.features.user.manageVersions};k.prototype.canManageOpenData=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.opendata.user.openDataAdmin};k.prototype.canDesignateOpenDataGroups=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.opendata.user.designateGroup};k.prototype.canUseGeocode=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.geocode};k.prototype.canUseNetworkAnalysis=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.networkanalysis};k.prototype.canUseSpatialAnalysis=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.spatialanalysis};
k.prototype.canUseGeoenrichment=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.geoenrichment};k.prototype.canUseDemographics=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.demographics};k.prototype.canUseFeatureReport=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.user.featurereport};k.prototype.canUseGeoanalytics=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:
c.premium.publisher.geoanalytics};k.prototype.canUseRasterAnalysis=function(){var c;return(null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.rasteranalysis)&&this.canPublishImageCollection()};k.prototype.canPurchaseMarketplace=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.marketplace.admin.purchase};k.prototype.canManageMarketplace=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.marketplace.admin.manage};k.prototype.canTrialMarketplace=
function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.marketplace.admin.startTrial};k.prototype.canCreateNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.createNotebooks};k.prototype.canScheduleNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.scheduleNotebooks};k.prototype.canPublishNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.publishNotebooks};
k.prototype.canCreateAdvancedNotebooks=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.premium.publisher.createAdvancedNotebooks};k.prototype.canBulkPublishFromDataStores=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.bulkPublishFromDataStores};k.prototype.canEnumerateDataStores=function(){var c;return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.enumerateDataStores};k.prototype.canRegisterDataStores=function(){var c;
return null===(c=this.privilegeObj)||void 0===c?void 0:c.portal.publisher.registerDataStores};k.prototype.setPrivileges=function(c){this.privileges=c;this._initPrivilegesObject();h["default"].isDefined(c)&&this._readPrivileges(c)};k.prototype.stringify=function(){return n["default"].stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()})};k.prototype.stringifyRole=function(){return n["default"].stringify({id:this.id,name:this.name,description:this.description})};
k.prototype.stringifyPrivileges=function(){return n["default"].stringify({privileges:this._buildPrivilegesArray()})};k.prototype.stringifyPretty=function(){return n["default"].stringify({id:this.id,name:this.name,description:this.description,privileges:this._buildPrivilegesArray()},null,"  ")};k.prototype.summarize=function(){var c=[],l=b["default"].self&&b["default"].self.isPortal,r=b["default"].self&&b["default"].self.portalProperties&&b["default"].self.portalProperties.openData&&!0===b["default"].self.portalProperties.openData.enabled,
m=this.privilegeObj;m.portal.user.viewOrgUsers&&c.push(l?f["default"].customRoles.users.canViewOrgUsersSumPortal:f["default"].customRoles.users.canViewOrgUsersSum);m.portal.user.createGroup&&c.push(f["default"].customRoles.groups.canCreateSum);m.portal.user.joinGroup&&c.push(l?f["default"].customRoles.groups.canJoinIntSumPortal:f["default"].customRoles.groups.canJoinIntSum);m.portal.user.joinNonOrgGroup&&c.push(f["default"].customRoles.groups.canJoinExt);m.portal.user.viewOrgGroups&&c.push(l?f["default"].customRoles.groups.canViewOrgGroupsPortal:
f["default"].customRoles.groups.canViewOrgGroups);!l&&m.portal.user.invitePartneredCollaborationMembers&&c.push(f["default"].customRoles.groups.canInvitePartnered);!l&&m.portal.user.addExternalMembersToGroup&&c.push(f["default"].customRoles.groups.canAddExternal);m.portal.user.createItem&&c.push(f["default"].customRoles.items.canCreateSum);m.portal.publisher.publishFeatures&&c.push(f["default"].customRoles.items.canPublishFeatures);m.portal.publisher.publishTiles&&c.push(f["default"].customRoles.items.canPublishTiles);
m.portal.publisher.publishScenes&&c.push(f["default"].customRoles.items.canPublishScenes);m.portal.publisher.publishTiledImagery&&c.push(f["default"].customRoles.items.canPublishTiledImagery);m.portal.publisher.publishDynamicImagery&&c.push(f["default"].customRoles.items.canPublishDynamicImagery);l&&m.portal.publisher.publishServerServices&&c.push(f["default"].customRoles.items.canPublishServerServices);l&&m.portal.publisher.registerDataStores&&c.push(f["default"].customRoles.items.canRegisterDataStore);
m.portal.user.viewOrgItems&&c.push(l?f["default"].customRoles.items.canViewOrgItemsPortal:f["default"].customRoles.items.canViewOrgItems);m.portal.user.viewTracks&&c.push(f["default"].customRoles.items.canViewTracks);m.portal.user.shareToGroup&&c.push(f["default"].customRoles.itemSharing.canShareGroupsSum);m.portal.user.shareToOrg&&c.push(l?f["default"].customRoles.itemSharing.canShareOrgSumPortal:f["default"].customRoles.itemSharing.canShareOrgSum);m.portal.user.shareToPublic&&c.push(f["default"].customRoles.itemSharing.canSharePublicSum);
m.portal.user.shareGroupToOrg&&c.push(l?f["default"].customRoles.groupSharing.canShareOrgPortal:f["default"].customRoles.groupSharing.canShareOrg);m.portal.user.shareGroupToPublic&&c.push(f["default"].customRoles.groupSharing.canSharePublic);r&&m.opendata.user.openDataAdmin&&c.push(f["default"].customRoles.openData.canAdmin);m.premium.user.geocode&&c.push(f["default"].customRoles.geoservices.canUseGeocoding);m.premium.user.networkanalysis&&c.push(f["default"].customRoles.geoservices.canUseNA);m.premium.user.spatialanalysis&&
c.push(f["default"].customRoles.geoservices.canUseSA);m.premium.user.geoenrichment&&c.push(f["default"].customRoles.geoservices.canUseGeoenrichment);m.premium.user.demographics&&c.push(f["default"].customRoles.geoservices.canUseDemographics);m.premium.user.featurereport&&c.push(f["default"].customRoles.geoservices.canUseFeatureReport);l&&(m.premium.publisher.geoanalytics&&c.push(f["default"].customRoles.geoservices.canUseGeoanalytics),m.premium.publisher.rasteranalysis&&c.push(f["default"].customRoles.geoservices.canUseRasterAnalysis));
m.features.user.edit&&c.push(f["default"].customRoles.features.canEditSum);m.features.user.fullEdit&&c.push(f["default"].customRoles.features.canManageSum);m.features.user.manageVersions&&c.push(f["default"].customRoles.versioning.canManage);r&&m.opendata.user.designateGroup&&c.push(f["default"].customRoles.openData.canDesignate);m.portal.admin.viewUsers&&c.push(l?f["default"].customRoles.userAdmin.canViewSumPortal:f["default"].customRoles.userAdmin.canViewSum);m.portal.admin.updateUsers&&c.push(l?
f["default"].customRoles.userAdmin.canUpdateSumPortal:f["default"].customRoles.userAdmin.canUpdateSum);m.portal.admin.deleteUsers&&c.push(l?f["default"].customRoles.userAdmin.canDeleteSumPortal:f["default"].customRoles.userAdmin.canDeleteSum);m.portal.admin.inviteUsers&&c.push(l?f["default"].customRoles.userAdmin.canAddSum:f["default"].customRoles.userAdmin.canInviteSum);m.portal.admin.disableUsers&&c.push(l?f["default"].customRoles.userAdmin.canDisableSumPortal:f["default"].customRoles.userAdmin.canDisableSum);
m.portal.admin.changeUserRoles&&c.push(l?f["default"].customRoles.userAdmin.canChangeRolesSumPortal:f["default"].customRoles.userAdmin.canChangeRolesSum);m.portal.admin.manageLicenses&&c.push(l?f["default"].customRoles.userAdmin.canManageLicensesSumPortal:f["default"].customRoles.userAdmin.canManageLicensesSum);m.portal.admin.viewGroups&&c.push(l?f["default"].customRoles.groupAdmin.canViewSumPortal:f["default"].customRoles.groupAdmin.canViewSum);m.portal.admin.updateGroups&&c.push(l?f["default"].customRoles.groupAdmin.canUpdateSumPortal:
f["default"].customRoles.groupAdmin.canUpdateSum);m.portal.admin.deleteGroups&&c.push(l?f["default"].customRoles.groupAdmin.canDeleteSumPortal:f["default"].customRoles.groupAdmin.canDeleteSum);m.portal.admin.reassignGroups&&c.push(l?f["default"].customRoles.groupAdmin.canReassignSumPortal:f["default"].customRoles.groupAdmin.canReassignSum);m.portal.admin.assignToGroups&&c.push(l?f["default"].customRoles.groupAdmin.canAssignSumPortal:f["default"].customRoles.groupAdmin.canAssignSum);m.portal.admin.manageEnterpriseGroups&&
c.push(f["default"].customRoles.groupAdmin.canLink);m.portal.admin.createUpdateCapableGroup&&c.push(f["default"].customRoles.groupAdmin.canCreateUpdateCapable);m.portal.admin.viewItems&&c.push(l?f["default"].customRoles.itemAdmin.canViewSumPortal:f["default"].customRoles.itemAdmin.canViewSum);m.portal.admin.updateItems&&c.push(l?f["default"].customRoles.itemAdmin.canUpdateSumPortal:f["default"].customRoles.itemAdmin.canUpdateSum);m.portal.admin.deleteItems&&c.push(l?f["default"].customRoles.itemAdmin.canDeleteSumPortal:
f["default"].customRoles.itemAdmin.canDeleteSum);m.portal.admin.reassignItems&&c.push(l?f["default"].customRoles.itemAdmin.canReassignSumPortal:f["default"].customRoles.itemAdmin.canReassignSum);m.portal.admin.updateItemCategorySchema&&c.push(f["default"].customRoles.itemAdmin.canManageItemCategories);m.portal.admin.manageCollaborations&&c.push(l?f["default"].customRoles.settingsAdmin.canManageCollabPortalSum:f["default"].customRoles.settingsAdmin.canManageCollabSum);m.portal.admin.manageSecurity&&
c.push(l?f["default"].customRoles.settingsAdmin.canManageSecurityPortalSum:f["default"].customRoles.settingsAdmin.canManageSecuritySum);m.portal.admin.manageWebsite&&c.push(l?f["default"].customRoles.settingsAdmin.canManageWebsitePortalSum:f["default"].customRoles.settingsAdmin.canManageWebsiteSum);m.portal.admin.manageRoles&&c.push(l?f["default"].customRoles.settingsAdmin.canManageRolesPortalSum:f["default"].customRoles.settingsAdmin.canManageRolesSum);m.portal.admin.manageServers&&c.push(f["default"].customRoles.settingsAdmin.canManageServersSum);
m.portal.admin.manageUtilityServices&&c.push(l?f["default"].customRoles.settingsAdmin.canManageUtilityServicesPortalSum:f["default"].customRoles.settingsAdmin.canManageUtilityServicesSum);m.portal.admin.manageCredits&&c.push(f["default"].customRoles.settingsAdmin.canManageCreditsSum);l&&m.portal.publisher.publishServerGPServices&&c.push(f["default"].customRoles.items.canPublishServerGPServices);l&&m.portal.publisher.publishKnowledgeGraph&&c.push(f["default"].customRoles.items.canPublishKnowledgeGraph);
m.portal.admin.shareToGroup&&c.push(l?f["default"].customRoles.itemAdmin.canShareToGroupSumPortal:f["default"].customRoles.itemAdmin.canShareToGroupSum);m.portal.admin.shareToOrg&&c.push(l?f["default"].customRoles.itemAdmin.canShareToOrgSumPortal:f["default"].customRoles.itemAdmin.canShareToOrgSum);m.portal.admin.shareToPublic&&c.push(l?f["default"].customRoles.itemAdmin.canShareToPublicSumPortal:f["default"].customRoles.itemAdmin.canShareToPublicSum);l||(m.marketplace.admin.manage&&c.push(f["default"].customRoles.marketplace.canAdminSum),
m.marketplace.admin.purchase&&c.push(f["default"].customRoles.marketplace.canPurchaseSum),m.marketplace.admin.startTrial&&c.push(f["default"].customRoles.marketplace.canTrialSum));m.premium.publisher.createAdvancedNotebooks&&c.push(f["default"].customRoles.geoservices.canUseAdvancedNotebooks);m.premium.publisher.createNotebooks&&c.push(f["default"].customRoles.items.canCreateNotebooks);m.premium.publisher.publishNotebooks&&c.push(f["default"].customRoles.items.canPublishNotebooks);m.premium.publisher.scheduleNotebooks&&
c.push(f["default"].customRoles.itemAdmin.canScheduleNotebooks);return c};k.prototype._initPrivilegesObject=function(){this._applyToAll(!1)};k.prototype._readPrivileges=function(c){var l=this;h["default"].isDefined(c)&&c instanceof Array&&c.forEach(function(r){l._readPrivilege(r)})};k.prototype._readPrivilege=function(c){this._applyEffectToAction(!0,c)};k.prototype._hasImageEntitlement=function(){var c,l,r;return!(null===(r=null===(l=null===(c=b["default"].self)||void 0===c?void 0:c.communitySelf)||
void 0===l?void 0:l.userLicensedItems)||void 0===r||!r.some(function(m){var q;return null===(q=m.entitlements)||void 0===q?void 0:q.some(function(v){return"image"===v.toLowerCase()})}))};k.prototype._applyEffectToAction=function(c,l){switch(l){case "portal:admin:inviteUsers":this.privilegeObj.portal.admin.inviteUsers=c;break;case "portal:admin:disableUsers":this.privilegeObj.portal.admin.disableUsers=c;break;case "portal:admin:viewUsers":this.privilegeObj.portal.admin.viewUsers=c;break;case "portal:admin:updateUsers":this.privilegeObj.portal.admin.updateUsers=
c;break;case "portal:admin:deleteUsers":this.privilegeObj.portal.admin.deleteUsers=c;break;case "portal:admin:changeUserRoles":this.privilegeObj.portal.admin.changeUserRoles=c;break;case "portal:admin:viewGroups":this.privilegeObj.portal.admin.viewGroups=c;break;case "portal:admin:updateGroups":this.privilegeObj.portal.admin.updateGroups=c;break;case "portal:admin:deleteGroups":this.privilegeObj.portal.admin.deleteGroups=c;break;case "portal:admin:reassignGroups":this.privilegeObj.portal.admin.reassignGroups=
c;break;case "portal:admin:assignToGroups":this.privilegeObj.portal.admin.assignToGroups=c;break;case "portal:admin:manageEnterpriseGroups":this.privilegeObj.portal.admin.manageEnterpriseGroups=c;break;case "portal:admin:viewItems":this.privilegeObj.portal.admin.viewItems=c;break;case "portal:admin:updateItems":this.privilegeObj.portal.admin.updateItems=c;break;case "portal:admin:deleteItems":this.privilegeObj.portal.admin.deleteItems=c;break;case "portal:admin:reassignItems":this.privilegeObj.portal.admin.reassignItems=
c;break;case "portal:admin:manageLicenses":this.privilegeObj.portal.admin.manageLicenses=c;break;case "portal:admin:shareToGroup":this.privilegeObj.portal.admin.shareToGroup=c;break;case "portal:admin:shareToOrg":this.privilegeObj.portal.admin.shareToOrg=c;break;case "portal:admin:shareToPublic":this.privilegeObj.portal.admin.shareToPublic=c;break;case "portal:admin:createUpdateCapableGroup":this.privilegeObj.portal.admin.createUpdateCapableGroup=c;break;case "portal:admin:updateItemCategorySchema":this.privilegeObj.portal.admin.updateItemCategorySchema=
c;break;case "portal:admin:manageCollaborations":this.privilegeObj.portal.admin.manageCollaborations=c;break;case "portal:admin:manageSecurity":this.privilegeObj.portal.admin.manageSecurity=c;break;case "portal:admin:manageWebsite":this.privilegeObj.portal.admin.manageWebsite=c;break;case "portal:admin:manageRoles":this.privilegeObj.portal.admin.manageRoles=c;break;case "portal:admin:manageServers":this.privilegeObj.portal.admin.manageServers=c;break;case "portal:admin:manageUtilityServices":this.privilegeObj.portal.admin.manageUtilityServices=
c;break;case "portal:admin:manageCredits":this.privilegeObj.portal.admin.manageCredits=c;break;case "portal:publisher:publishFeatures":this.privilegeObj.portal.publisher.publishFeatures=c;break;case "portal:publisher:publishTiles":this.privilegeObj.portal.publisher.publishTiles=c;break;case "portal:publisher:publishScenes":this.privilegeObj.portal.publisher.publishScenes=c;break;case "portal:publisher:publishTiledImagery":this.privilegeObj.portal.publisher.publishTiledImagery=c;break;case "portal:publisher:publishDynamicImagery":this.privilegeObj.portal.publisher.publishDynamicImagery=
c;break;case "portal:publisher:publishServerServices":this.privilegeObj.portal.publisher.publishServerServices=c;break;case "portal:publisher:publishServerGPServices":this.privilegeObj.portal.publisher.publishServerGPServices=c;break;case "portal:publisher:bulkPublishFromDataStores":this.privilegeObj.portal.publisher.bulkPublishFromDataStores=c;break;case "portal:publisher:enumerateDataStores":this.privilegeObj.portal.publisher.enumerateDataStores=c;break;case "portal:publisher:registerDataStores":this.privilegeObj.portal.publisher.registerDataStores=
c;break;case "portal:user:createGroup":this.privilegeObj.portal.user.createGroup=c;break;case "portal:user:joinGroup":this.privilegeObj.portal.user.joinGroup=c;break;case "portal:user:joinNonOrgGroup":this.privilegeObj.portal.user.joinNonOrgGroup=c;break;case "portal:user:invitePartneredCollaborationMembers":this.privilegeObj.portal.user.invitePartneredCollaborationMembers=c;break;case "portal:user:addExternalMembersToGroup":this.privilegeObj.portal.user.addExternalMembersToGroup=c;break;case "portal:user:createItem":this.privilegeObj.portal.user.createItem=
c;break;case "portal:user:shareToGroup":this.privilegeObj.portal.user.shareToGroup=c;break;case "portal:user:shareToOrg":this.privilegeObj.portal.user.shareToOrg=c;break;case "portal:user:shareToPublic":this.privilegeObj.portal.user.shareToPublic=c;break;case "portal:user:shareGroupToOrg":this.privilegeObj.portal.user.shareGroupToOrg=c;break;case "portal:user:shareGroupToPublic":this.privilegeObj.portal.user.shareGroupToPublic=c;break;case "portal:user:viewOrgUsers":this.privilegeObj.portal.user.viewOrgUsers=
c;break;case "portal:user:viewOrgItems":this.privilegeObj.portal.user.viewOrgItems=c;break;case "portal:user:viewOrgGroups":this.privilegeObj.portal.user.viewOrgGroups=c;break;case "portal:user:viewTracks":this.privilegeObj.portal.user.viewTracks=c;break;case "features:user:edit":this.privilegeObj.features.user.edit=c;break;case "features:user:fullEdit":this.privilegeObj.features.user.fullEdit=c;break;case "features:user:manageVersions":this.privilegeObj.features.user.manageVersions;break;case "opendata:user:openDataAdmin":this.privilegeObj.opendata.user.openDataAdmin=
c;break;case "opendata:user:designateGroup":this.privilegeObj.opendata.user.designateGroup=c;break;case "premium:user:geocode":this.privilegeObj.premium.user.geocode=c;break;case "premium:user:networkanalysis":this.privilegeObj.premium.user.networkanalysis=c;break;case "premium:user:spatialanalysis":this.privilegeObj.premium.user.spatialanalysis=c;break;case "premium:user:geoenrichment":this.privilegeObj.premium.user.geoenrichment=c;break;case "premium:user:demographics":this.privilegeObj.premium.user.demographics=
c;break;case "premium:user:featurereport":this.privilegeObj.premium.user.featurereport=c;break;case "premium:publisher:geoanalytics":this.privilegeObj.premium.publisher.geoanalytics=c;break;case "premium:publisher:rasteranalysis":this.privilegeObj.premium.publisher.rasteranalysis=c;break;case "marketplace:admin:purchase":this.privilegeObj.marketplace.admin.purchase=c;break;case "marketplace:admin:manage":this.privilegeObj.marketplace.admin.manage=c;break;case "marketplace:admin:startTrial":this.privilegeObj.marketplace.admin.startTrial=
c;break;case "premium:publisher:createNotebooks":this.privilegeObj.premium.publisher.createNotebooks=c;break;case "premium:publisher:scheduleNotebooks":this.privilegeObj.premium.publisher.scheduleNotebooks=c;break;case "premium:publisher:publishNotebooks":this.privilegeObj.premium.publisher.publishNotebooks=c;break;case "premium:publisher:createAdvancedNotebooks":this.privilegeObj.premium.publisher.createAdvancedNotebooks=c}};k.prototype._applyToAll=function(c){this.privilegeObj.portal.admin.inviteUsers=
c;this.privilegeObj.portal.admin.disableUsers=c;this.privilegeObj.portal.admin.viewUsers=c;this.privilegeObj.portal.admin.updateUsers=c;this.privilegeObj.portal.admin.deleteUsers=c;this.privilegeObj.portal.admin.changeUserRoles=c;this.privilegeObj.portal.admin.viewGroups=c;this.privilegeObj.portal.admin.updateGroups=c;this.privilegeObj.portal.admin.deleteGroups=c;this.privilegeObj.portal.admin.reassignGroups=c;this.privilegeObj.portal.admin.assignToGroups=c;this.privilegeObj.portal.admin.manageEnterpriseGroups=
c;this.privilegeObj.portal.admin.viewItems=c;this.privilegeObj.portal.admin.updateItems=c;this.privilegeObj.portal.admin.deleteItems=c;this.privilegeObj.portal.admin.reassignItems=c;this.privilegeObj.portal.admin.manageLicenses=c;this.privilegeObj.portal.admin.shareToGroup=c;this.privilegeObj.portal.admin.shareToOrg=c;this.privilegeObj.portal.admin.shareToPublic=c;this.privilegeObj.portal.admin.createUpdateCapableGroup=c;this.privilegeObj.portal.admin.updateItemCategorySchema=c;this.privilegeObj.portal.admin.manageCollaborations=
c;this.privilegeObj.portal.admin.manageSecurity=c;this.privilegeObj.portal.admin.manageWebsite=c;this.privilegeObj.portal.admin.manageRoles=c;this.privilegeObj.portal.admin.manageServers=c;this.privilegeObj.portal.admin.manageUtilityServices=c;this.privilegeObj.portal.admin.manageCredits=c;this.privilegeObj.portal.publisher.publishFeatures=c;this.privilegeObj.portal.publisher.publishTiles=c;this.privilegeObj.portal.publisher.publishScenes=c;this.privilegeObj.portal.publisher.publishServerServices=
c;this.privilegeObj.portal.publisher.publishServerGPServices=c;this.privilegeObj.portal.user.createGroup=c;this.privilegeObj.portal.user.joinGroup=c;this.privilegeObj.portal.user.joinNonOrgGroup=c;this.privilegeObj.portal.user.invitePartneredCollaborationMembers=c;this.privilegeObj.portal.user.addExternalMembersToGroup=c;this.privilegeObj.portal.user.createItem=c;this.privilegeObj.portal.user.shareToGroup=c;this.privilegeObj.portal.user.shareToOrg=c;this.privilegeObj.portal.user.shareToPublic=c;this.privilegeObj.portal.user.shareGroupToOrg=
c;this.privilegeObj.portal.user.shareGroupToPublic=c;this.privilegeObj.portal.user.viewOrgUsers=c;this.privilegeObj.portal.user.viewOrgItems=c;this.privilegeObj.portal.user.viewOrgGroups=c;this.privilegeObj.portal.user.viewTracks=c;this.privilegeObj.features.user.edit=c;this.privilegeObj.opendata.user.openDataAdmin=c;this.privilegeObj.opendata.user.designateGroup=c;this.privilegeObj.premium.user.geocode=c;this.privilegeObj.premium.user.networkanalysis=c;this.privilegeObj.premium.user.spatialanalysis=
c;this.privilegeObj.premium.user.geoenrichment=c;this.privilegeObj.premium.user.demographics=c;this.privilegeObj.premium.user.featurereport=c;this.privilegeObj.premium.publisher.geoanalytics=c;this.privilegeObj.premium.publisher.rasteranalysis=c;this.privilegeObj.marketplace.admin.purchase=c;this.privilegeObj.marketplace.admin.manage=c;this.privilegeObj.marketplace.admin.startTrial=c;this.privilegeObj.premium.publisher.createNotebooks=c;this.privilegeObj.premium.publisher.scheduleNotebooks=c;this.privilegeObj.premium.publisher.publishNotebooks=
c;this.privilegeObj.premium.publisher.createAdvancedNotebooks=c};k.prototype._buildPrivilegesArray=function(){var c=[];!0===this.privilegeObj.portal.admin.inviteUsers&&c.push("portal:admin:inviteUsers");!0===this.privilegeObj.portal.admin.disableUsers&&c.push("portal:admin:disableUsers");!0===this.privilegeObj.portal.admin.viewUsers&&c.push("portal:admin:viewUsers");!0===this.privilegeObj.portal.admin.updateUsers&&c.push("portal:admin:updateUsers");!0===this.privilegeObj.portal.admin.deleteUsers&&
c.push("portal:admin:deleteUsers");!0===this.privilegeObj.portal.admin.changeUserRoles&&c.push("portal:admin:changeUserRoles");!0===this.privilegeObj.portal.admin.viewGroups&&c.push("portal:admin:viewGroups");!0===this.privilegeObj.portal.admin.updateGroups&&c.push("portal:admin:updateGroups");!0===this.privilegeObj.portal.admin.deleteGroups&&c.push("portal:admin:deleteGroups");!0===this.privilegeObj.portal.admin.reassignGroups&&c.push("portal:admin:reassignGroups");!0===this.privilegeObj.portal.admin.assignToGroups&&
c.push("portal:admin:assignToGroups");!0===this.privilegeObj.portal.admin.manageEnterpriseGroups&&c.push("portal:admin:manageEnterpriseGroups");!0===this.privilegeObj.portal.admin.viewItems&&c.push("portal:admin:viewItems");!0===this.privilegeObj.portal.admin.updateItems&&c.push("portal:admin:updateItems");!0===this.privilegeObj.portal.admin.deleteItems&&c.push("portal:admin:deleteItems");!0===this.privilegeObj.portal.admin.reassignItems&&c.push("portal:admin:reassignItems");!0===this.privilegeObj.portal.admin.manageLicenses&&
c.push("portal:admin:manageLicenses");!0===this.privilegeObj.portal.admin.shareToGroup&&c.push("portal:admin:shareToGroup");!0===this.privilegeObj.portal.admin.shareToOrg&&c.push("portal:admin:shareToOrg");!0===this.privilegeObj.portal.admin.shareToPublic&&c.push("portal:admin:shareToPublic");!0===this.privilegeObj.portal.admin.createUpdateCapableGroup&&c.push("portal:admin:createUpdateCapableGroup");!0===this.privilegeObj.portal.admin.updateItemCategorySchema&&c.push("portal:admin:updateItemCategorySchema");
!0===this.privilegeObj.portal.admin.manageCollaborations&&c.push("portal:admin:manageCollaborations");!0===this.privilegeObj.portal.admin.manageSecurity&&c.push("portal:admin:manageSecurity");!0===this.privilegeObj.portal.admin.manageWebsite&&c.push("portal:admin:manageWebsite");!0===this.privilegeObj.portal.admin.manageRoles&&c.push("portal:admin:manageRoles");!0===this.privilegeObj.portal.admin.manageServers&&c.push("portal:admin:manageServers");!0===this.privilegeObj.portal.admin.manageUtilityServices&&
c.push("portal:admin:manageUtilityServices");!0===this.privilegeObj.portal.admin.manageCredits&&c.push("portal:admin:manageCredits");!0===this.privilegeObj.portal.publisher.publishFeatures&&c.push("portal:publisher:publishFeatures");!0===this.privilegeObj.portal.publisher.publishTiles&&c.push("portal:publisher:publishTiles");!0===this.privilegeObj.portal.publisher.publishScenes&&c.push("portal:publisher:publishScenes");!0===this.privilegeObj.portal.publisher.publishTiledImagery&&c.push("portal:publisher:publishTiledImagery");
!0===this.privilegeObj.portal.publisher.publishDynamicImagery&&c.push("portal:publisher:publishDynamicImagery");!0===this.privilegeObj.portal.publisher.publishServerServices&&c.push("portal:publisher:publishServerServices");!0===this.privilegeObj.portal.publisher.publishServerGPServices&&c.push("portal:publisher:publishServerGPServices");!0===this.privilegeObj.portal.publisher.bulkPublishFromDataStores&&c.push("portal:publisher:bulkPublishFromDataStores");!0===this.privilegeObj.portal.publisher.enumerateDataStores&&
c.push("portal:publisher:enumerateDataStores");!0===this.privilegeObj.portal.publisher.registerDataStores&&c.push("portal:publisher:registerDataStores");!0===this.privilegeObj.portal.user.createGroup&&c.push("portal:user:createGroup");!0===this.privilegeObj.portal.user.joinGroup&&c.push("portal:user:joinGroup");!0===this.privilegeObj.portal.user.joinNonOrgGroup&&c.push("portal:user:joinNonOrgGroup");!0===this.privilegeObj.portal.user.invitePartneredCollaborationMembers&&c.push("portal:user:invitePartneredCollaborationMembers");
!0===this.privilegeObj.portal.user.addExternalMembersToGroup&&c.push("portal:user:addExternalMembersToGroup");!0===this.privilegeObj.portal.user.createItem&&c.push("portal:user:createItem");!0===this.privilegeObj.portal.user.shareToGroup&&c.push("portal:user:shareToGroup");!0===this.privilegeObj.portal.user.shareToOrg&&c.push("portal:user:shareToOrg");!0===this.privilegeObj.portal.user.shareToPublic&&c.push("portal:user:shareToPublic");!0===this.privilegeObj.portal.user.shareGroupToOrg&&c.push("portal:user:shareGroupToOrg");
!0===this.privilegeObj.portal.user.shareGroupToPublic&&c.push("portal:user:shareGroupToPublic");!0===this.privilegeObj.portal.user.viewOrgUsers&&c.push("portal:user:viewOrgUsers");!0===this.privilegeObj.portal.user.viewOrgItems&&c.push("portal:user:viewOrgItems");!0===this.privilegeObj.portal.user.viewOrgGroups&&c.push("portal:user:viewOrgGroups");!0===this.privilegeObj.portal.user.viewTracks&&c.push("portal:user:viewTracks");!0===this.privilegeObj.features.user.edit&&c.push("features:user:edit");
!0===this.privilegeObj.features.user.fullEdit&&c.push("features:user:fullEdit");!0===this.privilegeObj.features.user.manageVersions&&c.push("features:user:manageVersions");!0===this.privilegeObj.opendata.user.openDataAdmin&&c.push("opendata:user:openDataAdmin");!0===this.privilegeObj.opendata.user.designateGroup&&c.push("opendata:user:designateGroup");!0===this.privilegeObj.premium.user.geocode&&c.push("premium:user:geocode");!0===this.privilegeObj.premium.user.networkanalysis&&c.push("premium:user:networkanalysis");
!0===this.privilegeObj.premium.user.spatialanalysis&&c.push("premium:user:spatialanalysis");!0===this.privilegeObj.premium.user.geoenrichment&&c.push("premium:user:geoenrichment");!0===this.privilegeObj.premium.user.demographics&&c.push("premium:user:demographics");!0===this.privilegeObj.premium.user.featurereport&&c.push("premium:user:featurereport");!0===this.privilegeObj.premium.publisher.geoanalytics&&c.push("premium:publisher:geoanalytics");!0===this.privilegeObj.premium.publisher.rasteranalysis&&
c.push("premium:publisher:rasteranalysis");!0===this.privilegeObj.marketplace.admin.purchase&&c.push("marketplace:admin:purchase");!0===this.privilegeObj.marketplace.admin.manage&&c.push("marketplace:admin:manage");!0===this.privilegeObj.marketplace.admin.startTrial&&c.push("marketplace:admin:startTrial");!0===this.privilegeObj.premium.publisher.createNotebooks&&c.push("premium:publisher:createNotebooks");!0===this.privilegeObj.premium.publisher.scheduleNotebooks&&c.push("premium:publisher:scheduleNotebooks");
!0===this.privilegeObj.premium.publisher.publishNotebooks&&c.push("premium:publisher:publishNotebooks");!0===this.privilegeObj.premium.publisher.createAdvancedNotebooks&&c.push("premium:publisher:createAdvancedNotebooks");return c};return k=a.__decorate([e["default"](d["default"])],k)}()})},"arcgisonline/sharing/dijit/_LevelAwareMixin":function(){define(["require","exports","tslib"],function(D,A,a){Object.defineProperty(A,"__esModule",{value:!0});A.LevelAwareInfo=void 0;D="portal:user:joinGroup portal:user:viewOrgGroups portal:user:viewOrgItems portal:user:viewOrgUsers premium:user:demographics premium:user:featurereport premium:user:geocode premium:user:networkanalysis".split(" ");
var b=a.__spreadArray(["features:user:edit"],D);A.LevelAwareInfo={SYSTEM_ROLES:{VIEWER:"iAAAAAAAAAAAAAAA",DATA_EDITOR:"iBBBBBBBBBBBBBBB",FACILITATOR:"iCCCCCCCCCCCCCCC",PRIVILEGES:{iAAAAAAAAAAAAAAA:D,iBBBBBBBBBBBBBBB:b,iCCCCCCCCCCCCCCC:a.__spreadArray("portal:admin:createUpdateCapableGroup portal:user:invitePartneredCollaborationMembers portal:user:addExternalMembersToGroup portal:publisher:publishFeatures portal:publisher:publishTiles portal:publisher:publishServerServices portal:user:createGroup portal:user:createItem portal:user:joinNonOrgGroup portal:user:shareGroupToOrg portal:user:shareGroupToPublic portal:user:shareToGroup portal:user:shareToOrg portal:user:shareToPublic portal:user:viewOrgUsers portal:user:viewOrgItems portal:user:viewOrgGroups premium:user:geoenrichment premium:user:spatialanalysis premium:publisher:geoanalytics premium:publisher:rasteranalysis portal:publisher:bulkPublishFromDataStores portal:publisher:enumerateDataStores portal:publisher:registerDataStores".split(" "),
b)}},LICENSE_LEVELS:{ONE:"1",ONE_PLUS_EDIT:"11",TWO:"2"}};a=function(){return function(){this.SYSTEM_ROLES=A.LevelAwareInfo.SYSTEM_ROLES;this.LICENSE_LEVELS=A.LevelAwareInfo.LICENSE_LEVELS}}();A["default"]=a})},"arcgisonline/pages/organization/widgets/GroupIcon":function(){define("require exports tslib dojo/text!./templates/_groupIcon.html dijit/_TemplatedMixin dijit/_WidgetBase ../../portal/PortalGroup ../../utils/dom ../../utils/formatters ../../utils/strings ../../../tsutils/declareDecorator".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);return function(){function c(l,r){this.templateString=b["default"];this.hide=n["default"].hide;this.show=n["default"].show;this.firstChar=n["default"].firstChar;this.stripHTML=n["default"].stripHTML;this.empty=n["default"].empty;this.cssClasses="";this.size="50";this.letterSize="4";this.tooltipClass=
"tooltip";this._viewBoxSize="65"}c.prototype.postMixInProperties=function(){var l;this.inherited(arguments);this._group=new e["default"](a.__assign(a.__assign({},this.group),{portal:this.portal}));this._group.fillColor=this._group.id?"#"+this._group.id.substr(this._group.id.length-6):h["default"].stringToHex(this._group.title);this._group.useLetter=!(null===(l=this._group.title.charAt(0))||void 0===l||!l.match(/^\w+$/));this._group.useLetter&&(this._viewBoxSize=this.size)};c.prototype.postCreate=
function(){var l=this;this._img.addEventListener("error",function(){f["default"].hideNode(l._img);l._svg.classList.remove("hide")})};return c=a.__decorate([k["default"](d["default"],g["default"])],c)}()})},"arcgisonline/pages/utils/notifications":function(){define("require exports tslib moment/moment dojo/promise/all dojo/Deferred dojo/string ../../esriGeowConfig ../../sharing/util dojo/i18n!../../nls/arcgisonline".split(" "),function(D,A,a,b,g,d,e,f,n,h){function k(c){return n["default"].request({url:f["default"].restBaseUrl+
"community/users/"+c.username+"/notifications/"+c.id+"/delete"},{usePost:!0})}b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);return{fetchNotifications:function(c,l){var r=c.username||c.email;return r?n["default"].request({url:f["default"].restBaseUrl+"community/users/"+r+"/notifications"}).then(function(m){return(m.notifications||[]).map(function(q){if(q&&q.received&&q.id){var v={date:b["default"](q.received).fromNow(),
id:q.id,text:""};"webapp_not_copied"===q.type&&l.isPortal&&(q.type="webapp_not_copied_portal");h["default"].notifications.types[q.type]&&(q.data.baseUrl=f["default"].baseUrl,v.text=e["default"].substitute(h["default"].notifications.types[q.type],q.data));"message_received"===q.type&&q.data&&q.data.message&&(v.text=q.data.message);q=v.text&&v}else q=null;return q}).filter(function(q){return q})}):(r=new d["default"],r.resolve([]),r)},deleteNotifications:function(c,l){var r=l.map(function(m){return{username:c.username,
id:m}}).map(k);return g["default"](r)}}})},"arcgisonline/pages/utils/notebook":function(){define("require exports tslib ../../esriGeowConfig esri/lang ../../sharing/util dojo/Deferred dojo/request dojo/promise/all dojo/on dojo/string dojo/dom-construct dojo/dom-class dojo/dom-attr arcgisonline/pages/pageUtil arcgisonline/sharing/dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);
e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);return function(){function B(){}B.notebookServerConfigured=function(){var w,z;if(b["default"].self&&b["default"].self.isPortal)return b["default"].notebookServerEnabled&&b["default"].self.supportsHostedNotebooks?!0:!1;var x=-1!==["Trial Developer",
"Trial","Trial Press","Developer Subscription"].indexOf(null===(w=b["default"].self.subscriptionInfo)||void 0===w?void 0:w.type);return b["default"].notebookServerEnabled&&(!x||-1!==((null===(z=b["default"].self)||void 0===z?void 0:z.allowedBetaFeatures)||[]).indexOf("notebooks"))};B.closeNotebook=function(w,z){var x=z.split("/"),y=x[x.length-3],u=x[x.length-1];y&&u&&B.notebookRequest(w+"/admin/system/containers/"+y+"/notebooks","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(t){var C;
if(null===(C=t.selectedNotebooks)||void 0===C?0:C.length)t=t.selectedNotebooks.filter(function(E){return E.FileName===u}),t.length&&B.closeNotebookRequest(w,y,t[0].id)})};B.closeNotebookRequest=function(w,z,x){return B.notebookRequest(w+"/admin/system/containers/"+z+"/notebooks/"+x+"/closeNotebook","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};B.getNotebookServer=function(){var w=new e["default"];(b["default"].portal||b["default"].self).isPortal?b["default"].userInfo?b["default"].portal.getFederatedServers().then(function(z){g["default"].isDefined(z)&&
g["default"].isDefined(z.servers)&&g["default"].isDefined(z.servers.length)?(z=z.servers.filter(function(x){return"ARCGIS_NOTEBOOK_SERVER"===x.serverType&&"NotebookServer"===x.serverFunction}),z.length?(z=z[0],z.adminContext="/admin",w.resolve(z)):w.resolve(null)):w.resolve(null)},function(z){w.resolve(null)}):w.resolve(null):d["default"].request({url:b["default"].restBaseUrl+"/portals/self/urls"}).then(function(z){var x,y;(z=null===(y=null===(x=null===z||void 0===z?void 0:z.urls)||void 0===x?void 0:
x.notebooks)||void 0===y?void 0:y.https)?w.resolve({url:"https://"+z,adminContext:""}):w.resolve(null)},function(z){w.resolve(null)});return w};B.notebooksBetaFormatter=function(w){return w};B.buildSelfSignedErrorMessage=function(w,z,x){w.messageHTML="\n      \x3ch4\x3e\n        "+(x?v["default"].notebookViewer.openNotebookServerCertificateError:v["default"].notebookViewer.openNotebookCertificateError)+"\n      \x3c/h4\x3e\n      \x3cp\x3e\n        "+v["default"].notebookViewer.openNotebookCertificateErrorDescription+
"\n      \x3c/p\x3e\n      \x3col\x3e\n        \x3cli\x3e\n          "+v["default"].notebookViewer.openNotebookCertificateErrorStep1+'\n          \x3ca href\x3d"'+(z.url+z.adminContext)+'" target\x3d"_blank" \x3e\n            '+(z.url+z.adminContext)+"\n          \x3c/a\x3e\n        \x3c/li\x3e\n        \x3cli\x3e"+v["default"].notebookViewer.openNotebookCertificateErrorStep2+"\x3c/li\x3e\n        \x3cli\x3e"+v["default"].notebookViewer.openNotebookCertificateErrorStep3+"\x3c/li\x3e\n      \x3c/ol\x3e"};
B.getNotebookServerMachines=function(w){var z=new e["default"],x=[],y={useJsonFormatParam:!0,useCredentials:!0};B.notebookRequest(w+"/admin/machines/","GET",null,y).then(function(u){u=(null===u||void 0===u?void 0:u.machines)||[];u.length?(u.forEach(function(t){var C=new e["default"];n["default"]({hardware:B.getNotebookServerMachineHardware(w,t,y),health:B.getNotebookServerMachineHealth(w,t,y)}).then(function(E){C.resolve({machineName:t.machineName,hardware:E.hardware,health:E.health})});x.push(C)}),
n["default"](x).then(function(t){z.resolve(t)})):z.resolve([])});return z};B.getNotebookServerMachineHardware=function(w,z,x){var y=new e["default"];B.notebookRequest(w+"/admin/machines/"+z.machineName+"/hardware","GET",null,x).then(function(u){y.resolve(u)},function(u){y.resolve({error:u})});return y};B.getNotebookServerMachineHealth=function(w,z,x){var y=new e["default"];B.notebookRequest(w+"/admin/machines/"+z.machineName+"/status","GET",null,x).then(function(u){y.resolve(u)},function(u){y.resolve({error:u})});
return y};B.getNotebookServerOS=function(w){var z=new e["default"],x={useJsonFormatParam:!0,useCredentials:!0};B.notebookRequest(w+"/admin/machines/","GET",null,x).then(function(y){((null===y||void 0===y?void 0:y.machines)||[]).length?B.notebookRequest(w+"/admin/machines/"+y.machines[0].machineName+"/hardware","GET",null,x).then(function(u){u=-1!==(u.os||"").toLowerCase().indexOf("windows")?"windows":"linux";z.resolve(u)},function(u){z.reject(u)}):z.reject()});return z};B.getNotebookRuntimes=function(w){var z=
new e["default"];B.getNotebookServer().then(function(x){null!==x?B.getNotebookRuntimesBase(x.url).then(function(y){w?z.resolve({runtimes:y.runtimes,server:x}):z.resolve(y.runtimes)},function(y){z.reject(y)}):z.reject()});return z};B.getNotebookRuntimesBase=function(w){return B.notebookRequest(w+"/admin/notebooks/runtimes","GET",null,{useJsonFormatParam:!0,useCredentials:!0})};B.getNotebookRuntimeInfo=function(w,z){var x=this,y=new e["default"];w&&z?this.getNotebookRuntimes(!0).then(function(u){var t=
u.runtimes.filter(function(C){return C.name.toLowerCase()===w.toLowerCase()&&C.version.toLowerCase()===z.toLowerCase()});1!==t.length?y.reject():x.notebookRequest(u.server.url+"/admin/notebooks/runtimes/"+t[0].id+"/manifest","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(C){y.resolve(C)},function(C){y.reject(C)})},function(u){y.reject(u)}):y.reject();return y};B.startNotebookServerPoller=function(){return window.setInterval(function(){B.getNotebookServerInfo()},6E5)};B.getNotebookServerInfo=
function(){var w=new e["default"];B.getNotebookServer().then(function(z){null!==z?B.pingNotebookServer(z.url).then(function(x){w.resolve(x)},function(x){w.reject(x)}):w.reject()});return w};B.pingNotebookServer=function(w){var z=new e["default"];B.notebookRequest(w+"/rest/info","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){z.resolve(x)},function(x){z.reject(x)});return z};B.getSampleNotebooksGroup=function(){var w=new e["default"],z=b["default"].self&&b["default"].self.isPortal?
"esri sample notebooks":"arcgis sample notebooks";d["default"].request({url:b["default"].restBaseUrl+"community/groups",content:{q:"title:("+z+') AND owner:"esri_notebook"'}}).then(function(x){x=(x.results||[]).filter(function(y){return(y.title||"").toLowerCase()===z});1===x.length?w.resolve({id:x[0].id}):w.resolve({id:null})},function(x){w.resolve({id:null})});return w};B.getSampleNotebooksUrl=function(){var w=new e["default"];B.getSampleNotebooksGroup().then(function(z){z.id&&w.resolve(b["default"].baseUrl+
"group.html?id\x3d"+z.id+"#content")});return w};B.getSampleNotebooks=function(){var w=new e["default"];B.getSampleNotebooksGroup().then(function(z){z.id?d["default"].request({url:b["default"].restBaseUrl+"content/groups/"+z.id}).then(function(x){w.resolve({items:(x.items||[]).filter(function(y){return"notebook"===(y.type||"").toLowerCase()})})},function(x){w.resolve({items:[]})}):w.resolve({items:[]})});return w};B.getAllNotebooks=function(w){var z=new e["default"];B.notebookRequest(w+"/admin/notebooks",
"GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){z.resolve(x)},function(x){z.reject({error:x})});return z};B.getNotebookServerDirectories=function(w){var z=new e["default"];B.notebookRequest(w+"/admin/system/directories","GET",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){z.resolve(x)},function(x){z.resolve({error:x})});return z};B.deleteDataDirectory=function(w,z){var x=new e["default"];B.notebookRequest(w+"/admin/system/directories/"+z+"/unregister","POST",
null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(y){x.resolve(y)},function(y){x.resolve({error:y})});return x};B.deleteNotebookRuntime=function(w,z){var x=new e["default"];B.notebookRequest(w+"/admin/notebooks/runtimes/"+z+"/unregister","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(y){x.resolve(y)},function(y){x.resolve({error:y})});return x};B.getAllContainers=function(w){var z=new e["default"],x={allUsers:b["default"].userRole.isAdmin()};B.notebookRequest(w+"/admin/system/containers",
"GET",x,{useJsonFormatParam:!0,useCredentials:!0}).then(function(y){z.resolve(y)},function(y){z.resolve({error:y})});return z};B.terminateContainer=function(w,z){var x=new e["default"];B.notebookRequest(w+"/admin/system/containers/"+z+"/terminateContainer","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(y){x.resolve(y)},function(y){x.resolve({error:y})});return x};B.getNotebookServerLogs=function(w,z){var x=new e["default"];B.notebookRequest(w+"/admin/logs/query","GET",z,{useJsonFormatParam:!0,
useCredentials:!0}).then(function(y){x.resolve(y)},function(y){x.resolve({error:y})});return x};B.deleteNotebookServerLogs=function(w){var z=new e["default"];B.notebookRequest(w+"/admin/logs/clean","POST",null,{useJsonFormatParam:!0,useCredentials:!0}).then(function(x){z.resolve(x)},function(x){z.reject({error:x})});return z};B.createNotebookRuntimeProperties=function(w,z,x){void 0===x&&(x=null);x=x||z.value;w=w.filter(function(y){return y.id===x})[0];return JSON.stringify({notebookRuntimeName:w.name,
notebookRuntimeVersion:w.version})};B.formatNotebookRuntimeVersion=function(w){return{"10.7":"1.0","10.7.0":"1.0","10.7.1":"2.0","10.8":"3.0","10.8.0":"3.0","10.8.1":"4.0"}[w]||w};B.showRuntimeInfo=function(w,z,x){var y=x.target;"runtime-button"===(null===y||void 0===y?void 0:y.name)&&(y.disabled=!0);x.stopPropagation();x.preventDefault();w=w||r["default"].get(x.currentTarget,"data-runtime-name");z=z||r["default"].get(x.currentTarget,"data-runtime-version");var u=w+(z?" - "+B.formatNotebookRuntimeVersion(z):
""),t=m["default"].createSpecifiedDialog(q["default"]);l["default"].add(t._dialog.domNode,"notebook__runtime-info-dialog");B.getNotebookRuntimeInfo(w,z).then(function(C){C=B.buildRuntimeInfoTable(C,u);t.show({title:u,content:C})},function(C){t.show({title:v["default"].generalDlg.errorDlgTitle,message:v["default"].notebookViewer.tabContent.info.runtimeInfoError})});h["default"].once(t,"hide",function(){t.destroyRecursive();"runtime-button"===(null===y||void 0===y?void 0:y.name)&&(y.disabled=!1)})};
B.buildRuntimeInfoTable=function(w,z){var x=c["default"].create("div",null);if((w.libraries||[]).length){c["default"].create("p",{innerHTML:k["default"].substitute(v["default"].notebookViewer.tabContent.info.runtimeMessage,[z])},x);var y=c["default"].create("table",{"class":"table"},x),u=c["default"].create("thead",null,y);u=c["default"].create("tr",null,u);c["default"].create("th",{innerHTML:v["default"].notebookViewer.tabContent.info.name},u);c["default"].create("th",{innerHTML:v["default"].notebookViewer.tabContent.info.version},
u);var t=c["default"].create("tbody",null,y);w.libraries.forEach(function(C){var E=c["default"].create("tr",null,t);c["default"].create("td",{innerHTML:C.name},E);c["default"].create("td",{innerHTML:C.version},E)})}else c["default"].create("p",{innerHTML:k["default"].substitute(v["default"].notebookViewer.tabContent.info.runtimeMessageNoManifest,[z])},x);return x.outerHTML};B.getContainerLogs=function(w,z){return B.notebookRequest(w+"/admin/system/containers/"+z+"/logs","POST",null,{useJsonFormatParam:!0,
useCredentials:!0})};B.getContainerInformation=function(w,z){var x=new e["default"],y={useJsonFormatParam:!0,useCredentials:!0};n["default"]({containerInfo:B.notebookRequest(w+"/admin/system/containers/"+z,"GET",null,y),containerStats:B.notebookRequest(w+"/admin/system/containers/"+z+"/statistics","GET",null,y)}).then(function(u){x.resolve(u)},function(u){x.reject(u)});return x};B.createRuntimeSelect=function(w,z,x,y){void 0===y&&(y=!1);w=w||[];w.sort(function(C,E){return E.esriProvidedRuntime-C.esriProvidedRuntime});
var u=b["default"].userRole.canCreateAdvancedNotebooks();u||(w=w.filter(function(C){return!C.requiresAdvancedPrivileges}));var t={esriProvided:0,custom:0};w.forEach(function(C){var E={value:y?B.createNotebookRuntimeProperties(w,null,C.id):C.id,innerHTML:C.name+(C.version?" - "+B.formatNotebookRuntimeVersion(C.version):"")};B.formatNotebookRuntimeVersion(z)!==B.formatNotebookRuntimeVersion(C.version)&&C.esriProvidedRuntime||(C.esriProvidedRuntime?(t.esriProvided++,u?C.requiresAdvancedPrivileges&&!C.supportsGPU&&
(E.selected=""):E.selected=""):t.custom++,c["default"].create("option",E,x))});return t};B.showNotebookPreview=function(w,z,x){var y=new e["default"];z=b["default"].restBaseUrl+"content/items/"+z+"/resources/"+x;d["default"].request({url:z,content:{"request.preventCache":+new Date}},{useProxy:d["default"].shouldUseProxy(z)}).then(function(u){if(u.html){var t=w.contentWindow.document;t.open();t.write(u.html);t.close();y.resolve({success:!0})}else y.resolve({success:!1,error:u.error})}.bind(this),function(u){y.resolve({success:!1,
error:u})}.bind(this));return y};B.canScheduleNotebooks=function(w,z){var x=new e["default"],y="Notebook"===(null===z||void 0===z?void 0:z.type),u=B.notebookServerConfigured();y&&u&&B.getNotebookRuntimes().then(function(t){var C,E,F,G=null===(C=z.properties)||void 0===C?void 0:C.notebookRuntimeName,H=B.formatNotebookRuntimeVersion(null===(E=z.properties)||void 0===E?void 0:E.notebookRuntimeVersion);t=(t||[]).some(function(L){return G===L.name&&H===B.formatNotebookRuntimeVersion(L.version)&&"1.0"!==
H&&"2.0"!==H});(null===(F=null===w||void 0===w?void 0:w.userRole)||void 0===F?0:F.canScheduleNotebooks())&&(null===z||void 0===z?0:z.isOwner)&&t&&document.body.classList.add("can-schedule-notebooks");x.resolve(!0)},function(t){x.resolve(!1)});return x};B.getNotebooksInContainer=function(w,z){return B.notebookRequest(z+"/admin/system/containers/"+w+"/notebooks","POST",null,{useJsonFormatParam:!0,useCredentials:!0})};B.getNotebookDataAccessUrl=function(w){return d["default"].request({url:b["default"].restBaseUrl+
"content/users/"+w+"/generateDirectAccessUrl",content:{storeType:"notebookWorkspace"}},{usePost:!0})};B.getParametersJson=function(w){return new Promise(function(z,x){d["default"].request({url:w}).then(function(y){y=a.__spreadArray(a.__spreadArray([],y.inputs.map(function(u){u.direction="input";return u})),y.outputs.map(function(u){u.direction="output";return u}));y.forEach(function(u,t){u.idx=t});z({initialized:!0,parameters:y})},function(y){404===y.code?z({initialized:!1,parameters:[]}):x(y)})})};
B.publishAsWebtool=function(w,z){return B.notebookRequest(w+"/admin/services/createService","POST",z,{useJsonFormatParam:!0,useCredentials:!0})};B.notebookRequest=function(w,z,x,y){y=y||{};var u={},t={"X-Requested-With":null},C=b["default"].userInfo?b["default"].userInfo.token:null;y.useJsonFormatParam&&(u.f="json");"GET"===z&&(u=a.__assign(a.__assign({},u),x));y.bypassCustomHeaders||(t["X-Esri-Authorization"]="Bearer "+C,y.useJsonBody&&(t["Content-Type"]="application/json"));y.contentType&&(t["Content-Type"]=
y.contentType);u={data:y.useJsonBody?x?JSON.stringify(x):null:x,method:z,handleAs:"json",headers:Object.keys(t).length?t:null,query:Object.keys(u).length?u:null,preventCache:!1===y.preventCache?!1:!0,withCredentials:y.bypassCustomHeaders?!1:!0};t={url:w};"multipart/form-data"===y.contentType?t.form=x:t.content=x;return y.useProxy?d["default"].request(t,{usePost:"POST"===z,useProxy:y.useProxy}):f["default"](w,u)};return B}()})},"arcgisonline/sharing/geow/Account":function(){define("require exports tslib dijit/registry dojo/_base/kernel dojo/Deferred dojo/json dojo/promise/all dojo/on dojo/request/iframe dojo/sniff dojo/data/util/sorter dojo/when dojo/_base/url esri/config esri/lang esri/request esri/IdentityManager ../../pages/utils/promises ../../pages/utils/signin ../../esriGeowConfig ../util ./Geow ../dijit/Role ../dijit/dialog/GeneralDlg dojo/i18n!../../nls/arcgisonline".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);z=a.__importDefault(z);x=a.__importDefault(x);y=a.__importDefault(y);u=
a.__importDefault(u);t=a.__importDefault(t);C=a.__importDefault(C);E=a.__importDefault(E);return function(){function F(){}F.loadMapSettings=function(G){this.getSelf(function(H){var L;if(H){u["default"].setCookies(H);H.allSSL&&(x["default"].allSSL=H.allSSL);q["default"].isDefined(x["default"].allSSL)&&x["default"].allSSL&&"http:"===location.protocol&&(window.location=y["default"].getSecureUrl(location.href));H.basemapGalleryGroupQuery&&(x["default"].basemapGalleryGroupQuery=H.basemapGalleryGroupQuery);
H.templatesGroupQuery&&(x["default"].templatesGroupQuery=H.templatesGroupQuery);H.defaultBasemap&&(x["default"].defaultBasemap=H.defaultBasemap);H.defaultExtent&&(x["default"].defaultExtent=H.defaultExtent);H.symbolSetsGroupQuery&&(x["default"].symbolSetsGroupQuery=H.symbolSetsGroupQuery);H.staticImagesUrl&&(x["default"].staticImagesUrl=H.staticImagesUrl);H.layerTemplatesGroupQuery&&(x["default"].layerTemplatesGroupQuery=H.layerTemplatesGroupQuery);H.colorSetsGroupQuery&&(x["default"].colorSetsGroupQuery=
H.colorSetsGroupQuery);H.helpBase&&(x["default"].help=H.helpBase,x["default"].helpBase=H.helpBase);H.helpMap&&H.helpMap.m&&(x["default"].helpMap=H.helpMap.m);H.urlKey&&(x["default"].urlKey=H.urlKey);var J=void 0,S=void 0;if(H.authorizedCrossOriginDomains&&0<H.authorizedCrossOriginDomains.length)for(J=0;J<H.authorizedCrossOriginDomains.length;J++)S=H.authorizedCrossOriginDomains[J],q["default"].isDefined(S)&&0<S.length&&m["default"].defaults.io.corsEnabledServers.push({host:S,withCredentials:!0});
z["default"].checkForOrgUserOnOnlineBaseHostAndRedirect(H);H.isPortal&&-1===(null===(L=y["default"]._cookies)||void 0===L?void 0:L.arcgis_auth)&&delete y["default"]._cookies.arcgis_auth;L=!1===x["default"].isMultiTenant;S=(J=y["default"].getUser())?!0:!1;var P=window.location.pathname.toLowerCase(),Q=-1!==P.indexOf(x["default"].signin),M=-1!==P.indexOf("troubleshoot.html");P=-1!==P.indexOf("setup.html");L||!J||"account_admin"!==J.role&&"org_admin"!==J.role||!H.id||H.urlKey||P||(window.location.href=
x["default"].baseUrl+"setup.html");L?(!H.access||"private"!==H.access||S||Q||M||(window.location.href=""+y["default"].getSecureUrl()+x["default"].signin+"?returnUrl\x3d"+encodeURIComponent(window.location.href)),H.isPortal&&"singletenant"===H.portalMode&&("7080"===location.port||"7443"===location.port)&&y["default"].checkForIAA().then(function(N){if(null===N||void 0===N?0:N.hasIAA)if(H.portalHostname.match(/:7080\//)&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")&&(window.location.href=
y["default"].getHttpUrl(x["default"].baseUrl)+"error.html?c\x3dWebAdaptorRequired"),!H.portalHostname.match(/:7080\//)&&80!==x["default"].self.httpPort&&443!==x["default"].self.httpsPort&&"http:"===location.protocol&&-1===location.href.indexOf("error.html")){N=new r["default"](location.href);var K=N.path.indexOf("/home/");K=N.path.substring(K+6);N=q["default"].isDefined(N.query)?"?"+N.query:"";window.location.href=""+y["default"].getHttpUrl("http://"+H.portalHostname)+"/home/"+K+N}})):H.id||!H.urlKey||
S||Q||M||(window.location.href=""+x["default"].baseUrl.replace("http:","https:")+x["default"].signin+"?returnUrl\x3d"+encodeURIComponent(window.location.href))}G&&G(H)})};F.getSelf=function(G,H,L){var J=this;if(this._isRequestingSelf)setTimeout(this.getSelf.bind(this,G,H),75);else{var S=x["default"].restBaseUrl+"/portals/helpmap?culture\x3d"+g["default"].locale,P=x["default"].restBaseUrl+"portals/self?culture\x3d"+g["default"].locale;L&&(S+="\x26token\x3d"+L,P+="\x26token\x3d"+L);var Q=x["default"].restBaseUrl+
"/community/self";Q=(L=B["default"].findCredential(x["default"].restBaseUrl))?{url:Q,content:{returnUserLicensedItems:!0,token:L.token}}:null;S=x["default"]&&x["default"].self||w["default"].eachAlways({helpMapResult:y["default"]._requestWithAppHandlers({url:S}),selfResult:y["default"]._requestWithAppHandlers({url:P}),communitySelfResult:L?y["default"]._requestWithAppHandlers(Q):w["default"].resolve(null)}).then(function(M){var N,K,X;if(null===(N=M.selfResult)||void 0===N?0:N.error)throw M.selfResult.error;
var da=M.selfResult.value;if(null===(K=M.helpMapResult)||void 0===K?0:K.value)da.helpMap=M.helpMapResult.value.helpMap;if(null===(X=M.communitySelfResult)||void 0===X?0:X.value)da.communitySelf=M.communitySelfResult.value;if(da.user)return B["default"].checkAppAccess(x["default"].restBaseUrl,J.getAppClientId()).always(function(Y){J.setupAfterSelf(da,!(null===Y||void 0===Y||!Y.viewOnly));J._isRequestingSelf=!1;10>=k["default"]("ie")&&J.throwawayIEPostFix();return da});J.setupAfterSelf(da);J._isRequestingSelf=
!1;10>=k["default"]("ie")&&J.throwawayIEPostFix();return da},function(M){throw M;});this._isRequestingSelf=!x["default"].self;return l["default"](S,G,H)}};F.getAppClientId=function(){return-1<window.location.href.indexOf("webmap/viewer.html")?"arcgisWebApps":"arcgisonline"};F.setupAfterSelf=function(G,H){var L,J;x["default"].self=G;x["default"].userInfo=G.user&&a.__assign(a.__assign({},x["default"].userInfo||{}),G.user);if(null===(L=x["default"].userInfo)||void 0===L?0:L.orgId)x["default"].userInfo.accountId=
x["default"].userInfo.orgId;if(null===(J=G.user)||void 0===J?0:J.role)x["default"].userRole=new t["default"]({id:G.user.roleId?G.user.roleId:G.user.role,role:G.user.role,privileges:G.user.privileges?G.user.privileges:void 0,viewOnly:H}),H&&(x["default"].self.user.role=x["default"].userInfo.role=G.user.role=x["default"].userRole.baseRole,x["default"].self.user.roleId=x["default"].userInfo.roleId=G.user.roleId=x["default"].userRole.id,x["default"].self.user.privileges=x["default"].userInfo.privileges=
G.user.privileges=x["default"].userRole.privileges,x["default"].self.user.level=x["default"].userInfo.level=G.user.level="1");this.normalizeOrgIdAndRole()};F.normalizeOrgIdAndRole=function(){q["default"].isDefined(x["default"].self.user)&&(q["default"].isDefined(x["default"].self.user.orgId)&&(x["default"].self.user.accountId=x["default"].self.user.orgId),q["default"].isDefined(x["default"].self.user.role)&&(x["default"].self.user.role=y["default"].normalizeOrgRole(x["default"].self.user.role)));
q["default"].isDefined(x["default"].userInfo)&&(q["default"].isDefined(x["default"].userInfo.orgId)&&(x["default"].userInfo.accountId=x["default"].userInfo.orgId),q["default"].isDefined(x["default"].userInfo.role)&&(x["default"].userInfo.role=y["default"].normalizeOrgRole(x["default"].userInfo.role)))};F.throwawayIEPostFix=function(){var G=document.createElement("form");G.encoding="multipart/form-data";G.method="POST";var H=document.createElement("input");H.type="hidden";H.name="f";H.value="json";
G.appendChild(H);H=document.createElement("input");H.type="hidden";H.name="q";H.value="*";G.appendChild(H);H=document.createElement("input");H.type="hidden";H.name="callback.html";H.value="textarea";G.appendChild(H);h["default"].post(x["default"].restBaseUrl+"community/users",{form:G,handleAs:"json"}).then(function(){}).otherwise(function(){})};F.updateAccount=function(G,H,L){var J;if(null!==y["default"].getUser()){var S="";G.defaultBasemap&&(S=e["default"].stringify(G.defaultBasemap));var P=0<(null===
(J=G.metadataFormats)||void 0===J?void 0:J.length)?G.metadataFormats.join(","):"",Q=!!x["default"].userRole,M=x["default"].userRole.isAdmin(),N=x["default"].self&&(x["default"].self.canListApps||x["default"].self.canListData),K=Q&&(M||x["default"].userRole.canManageCredits());J=Q&&(M||x["default"].userRole.canManageSecurity());var X=Q&&(M||x["default"].userRole.canManageWebsite());N=N&&Q&&(M||x["default"].userRole.canManageMarketplace());Q=Q&&(M||x["default"].userRole.canManageUtilityServices());
M=X||J||Q||K;K={clearEmptyFields:!0};X&&(K.name=G.name,K.description=G.description,K.culture=G.culture,K.cultureFormat=G.cultureFormat,K.region=G.region,K.featuredItemsGroupQuery=G.featuredItemsGroupQuery,K.thumbnail=G.thumbnail,K.basemapGalleryGroupQuery=G.basemapGalleryGroupQuery,K.defaultBasemap=S,K.defaultExtent=G.defaultExtent?e["default"].stringify(G.defaultExtent):"",K.featuredGroups=e["default"].stringify(G.featuredGroups),K.homePageFeaturedContent=G.homePageFeaturedContent,K.homePageFeaturedContentCount=
G.homePageFeaturedContentCount,K.rotatorPanels=e["default"].stringify(G.rotatorPanels),K.showHomePageDescription=G.showHomePageDescription,K.templatesGroupQuery=G.templatesGroupQuery,K.analysisLayersGroupQuery=G.analysisLayersGroupQuery,K.galleryTemplatesGroupQuery=G.galleryTemplatesGroupQuery,K.stylesGroupQuery=G.stylesGroupQuery,K.bingKey=G.bingKey,K.canShareBingPublic=G.canShareBingPublic,K.backgroundImage=G.backgroundImage,K.units=G.units,K.metadataEditable=G.metadataEditable,K.metadataFormats=
P,K.useVectorBasemaps=G.useVectorBasemaps);Q&&G.helperServices&&(K.geocodeService=e["default"].stringify(G.helperServices.geocode),K.printServiceTask=e["default"].stringify(G.helperServices.printTask),K.geometryService=e["default"].stringify(G.helperServices.geometry),K.routeServiceLayer=e["default"].stringify(G.helperServices.route),q["default"].isDefined(G.helperServices.asyncRoute)&&(K.asyncRouteService=e["default"].stringify(G.helperServices.asyncRoute)),q["default"].isDefined(G.helperServices.closestFacility)&&
(K.closestFacilityService=e["default"].stringify(G.helperServices.closestFacility)),q["default"].isDefined(G.helperServices.asyncClosestFacility)&&(K.asyncClosestFacilityService=e["default"].stringify(G.helperServices.asyncClosestFacility)),q["default"].isDefined(G.helperServices.serviceArea)&&(K.serviceAreaService=e["default"].stringify(G.helperServices.serviceArea)),q["default"].isDefined(G.helperServices.asyncServiceArea)&&(K.asyncServiceAreaService=e["default"].stringify(G.helperServices.asyncServiceArea)),
q["default"].isDefined(G.helperServices.syncVRP)&&(K.syncVRPService=e["default"].stringify(G.helperServices.syncVRP)),q["default"].isDefined(G.helperServices.asyncVRP)&&(K.asyncVRPService=e["default"].stringify(G.helperServices.asyncVRP)),q["default"].isDefined(G.helperServices.asyncLocationAllocation)&&(K.asyncLocationAllocationService=e["default"].stringify(G.helperServices.asyncLocationAllocation)),q["default"].isDefined(G.helperServices.routingUtilities)&&(K.routingUtilitiesService=e["default"].stringify(G.helperServices.routingUtilities)),
q["default"].isDefined(G.helperServices.traffic)&&(K.trafficService=e["default"].stringify(G.helperServices.traffic)),q["default"].isDefined(G.helperServices.asyncODCostMatrix)&&(K.asyncODCostMatrixService=e["default"].stringify(G.helperServices.asyncODCostMatrix)),y["default"].isPortal()&&(q["default"].isDefined(G.helperServices.analysis)&&(K.analysisService=e["default"].stringify(G.helperServices.analysis)),q["default"].isDefined(G.helperServices.asyncGeocode)&&(K.asyncGeocodeService=e["default"].stringify(G.helperServices.asyncGeocode)),
q["default"].isDefined(G.helperServices.geoenrichment)&&(K.geoenrichmentService=e["default"].stringify(G.helperServices.geoenrichment)),q["default"].isDefined(G.helperServices.hydrology)&&(K.hydrologyService=e["default"].stringify(G.helperServices.hydrology)),q["default"].isDefined(G.helperServices.orthomappingElevation)&&(K.orthomappingElevationService=e["default"].stringify(G.helperServices.orthomappingElevation)),q["default"].isDefined(G.helperServices.elevation)&&(K.elevationService=e["default"].stringify(G.helperServices.elevation)),
q["default"].isDefined(G.helperServices.elevationSync)&&(K.elevationSyncService=e["default"].stringify(G.helperServices.elevationSync)),q["default"].isDefined(G.helperServices.defaultElevationLayers)&&(K.elevation3DService=e["default"].stringify(G.helperServices.defaultElevationLayers))));N&&(K.orgUrl=G.orgUrl,K.orgEmail=G.orgEmail,K.orgPhone=G.orgPhone);J&&(K.access=G.access,K.allSSL=G.allSSL,K.commentsEnabled=G.commentsEnabled,K.canSharePublic=G.canSharePublic,K.canSearchPublic=G.canSearchPublic,
K.urlKey=G.urlKey,K.canSignInIDP=G.canSignInIDP,K.canSignInArcGIS=G.canSignInArcGIS,K.useStandardizedQuery=G.useStandardizedQuery,K.mfaEnabled=G.mfaEnabled,K.mfaAdmins=e["default"].stringify(G.mfaAdmins),K.authorizedCrossOriginDomains=e["default"].stringify(G.authorizedCrossOriginDomains),K.allowedOrigins=G.allowedOrigins,K.allowedRedirectUris=e["default"].stringify(G.allowedRedirectUris),K.updateUserProfileDisabled=G.updateUserProfileDisabled,K.eueiEnabled=G.eueiEnabled,K.contacts=e["default"].stringify(G.contacts||
[]));M&&(K.portalProperties=e["default"].stringify(G.portalProperties));G=Object.keys(K);1===G.length&&"clearEmptyFields"===G[0]?null===H||void 0===H?void 0:H():(G=y["default"].getSecureUrl(x["default"].restBaseUrl)+"portals/self/update",y["default"].request({url:G,content:K},{usePost:!0}).then(H.bind(this),L.bind(this)))}};F.checkUsernames=function(G,H,L){var J="";0<(null===G||void 0===G?void 0:G.length)&&(J=G.join(","));y["default"].request({url:x["default"].restBaseUrl+"community/checkUsernames",
content:{usernames:J}},{usePost:!0}).then(H,L)};F.getPendingAccountUsers=function(G,H,L){if(null!==y["default"].getUser()){G=1;var J=10,S;q["default"].isDefined(H.start)&&(G=H.start);q["default"].isDefined(H.num)&&(J=H.num);if(q["default"].isDefined(H.sortField))var P=H.sortField;if(q["default"].isDefined(H.sortOrder))var Q=H.sortOrder;q["default"].isDefined(H.type)&&(S=H.type);H=x["default"].restBaseUrl+"portals/self/invitations?start\x3d"+G+"\x26num\x3d"+J;P&&(H+="\x26sortField\x3d"+P);Q&&(H+="\x26sortOrder\x3d"+
Q);S&&(H+="\x26type\x3d"+S);y["default"].request({url:H}).then(L.bind(this))}};F.getInvitation=function(G,H,L){null!==y["default"].getUser()&&y["default"].request({url:x["default"].restBaseUrl+"community/invitations/"+G}).then(H.bind(this),L)};F.acceptInvitation=function(G,H,L){null!==y["default"].getUser()&&y["default"].request({url:x["default"].restBaseUrl+"community/invitations/"+G+"/accept",content:{invitationId:G}},{usePost:!0}).then(H.bind(this),L.bind(this))};F.updateUserRole=function(G,H,
L,J){var S=null,P=y["default"].getUser();if(null!==P){S=P.accountId;var Q=P.username||P.email;if(null!==S)if(Q===G&&"account_admin"===P.role&&"account_admin"!==H){var M=new C["default"];n["default"].once(M._dialog,"hide",function(){M._dialog.destroyRecursive();M.destroyRecursive()});M.onOkClick=function(){b["default"].byId("general-dialog").hide();L(null)};M.show(E["default"].common.errors.accountAdmin)}else y["default"].request({url:x["default"].restBaseUrl+"portals/self/updateUserRole",content:{user:G,
role:H}},{usePost:!0}).then(L.bind(this),J.bind(this))}};F.deleteUser=function(G,H,L){null!==y["default"].getUser()&&y["default"].request({url:x["default"].restBaseUrl+"community/users/"+G+"/delete",content:{}},{usePost:!0}).then(H.bind(this),L.bind(this))};F.caseInsensitiveComparator=function(G,H){G&&(G=G.toLowerCase());H&&(H=H.toLowerCase());return c["default"].basicComparator(G,H)};F.lastLoginComparator=function(G,H){var L,J=0===G||-1===G?void 0:G,S=0===H||-1===H?void 0:H,P=-1;(null===(L=x["default"].self)||
void 0===L?0:L.isPortal)||!1===x["default"].isMultiTenant?P=c["default"].basicComparator(J,S):J===S?P=G===H?0:G<H?-1:1:J&&S&&G>H?P=1:J&&!S?P=1:!J&&S&&(P=-1);return P};F.getSupportedLanguages=function(G,H){return v["default"]({url:x["default"].restBaseUrl+"portals/languages",content:{f:"json"},load:G,callbackParamName:"callback",error:H})};F.getSupportedRegions=function(G,H){return v["default"]({url:x["default"].restBaseUrl+"portals/regions",content:{f:"json",culture:g["default"].locale},load:G,callbackParamName:"callback",
error:H})};F.getSupportedLanguagesAndRegions=function(){var G=new d["default"];f["default"]({languages:this.getSupportedLanguages(null,null),regions:this.getSupportedRegions(null,null)}).then(function(H){G.resolve({languages:H.languages,regions:H.regions})},function(H){G.resolve(H)});return G};F.displayedPortalNonSSLNotice=!1;return F}()})},"arcgisonline/pages/utils/signin":function(){define("require exports tslib ../../esriGeowConfig esri/IdentityManager esri/arcgis/OAuthInfo dojo/_base/kernel dojo/Deferred".split(" "),
function(D,A,a,b,g,d,e,f){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);return function(){function n(){}n.getPortalUrl=function(){var h,k=b["default"].restBaseUrl.substring(0,b["default"].restBaseUrl.indexOf("/sharing/rest")).replace("http://","https://");if(null===(h=b["default"].self)||void 0===h?0:h.portalHostname)k="https://"+b["default"].self.portalHostname;return k};n.setupOAuthInfo=function(h){var k={appId:"arcgisonline",
portalUrl:n.getPortalUrl(),locale:e["default"].locale,popup:!1};h&&(k.forceLogin=h);h=new d["default"](k);n.esriId.registerOAuthInfos([h]);n.esriId.useSignInPage=!1};n.checkSignInStatus=function(){var h=new f["default"];n.setupOAuthInfo();var k=n.getPortalUrl()+"/sharing";n.esriId.checkSignInStatus(k).then(function(c){c&&(b["default"].userInfo=a.__assign(a.__assign({},b["default"].userInfo||{}),{username:c.userId,token:c.token,credential:c}));h.resolve(c)},function(){h.resolve(null)});return h};n.getCredential=
function(h,k){var c=new f["default"];n.setupOAuthInfo(h);var l=n.getPortalUrl()+"/sharing";n.esriId.getCredential(l,k).then(function(r){c.resolve(r)});return c};n.isValidReturnUrl=function(h,k){return h?this.isValidPortalReturnUrl(k):this.isValidOnlineReturnUrl(k)};n.isValidOnlineReturnUrl=function(h){var k=decodeURI(h),c=n.getHostName(window.location.href);h=this.getHostName(k);var l=0===k.indexOf("http://")||0===k.indexOf("https://"),r=l&&h?h.lastIndexOf(".arcgis.com"):-1,m=l&&h?h.lastIndexOf(".esri.com"):
-1,q=l&&h?h.lastIndexOf(c):-1;k=-1<k.indexOf("/sharing/proxy");r=-1<r&&r+11-1===h.length-1;m=-1<m&&m+9-1===h.length-1;c=-1<q&&q+c.length-1===h.length-1;return l&&h&&(r||m||c)&&!k};n.isValidPortalReturnUrl=function(h){h=decodeURI(h);var k=n.getDomainName(window.location.hostname),c=n.getDomainName(this.getHostName(h));return(0===h.indexOf("http://")||0===h.indexOf("https://"))&&c&&c===k};n.getHostName=function(h){h=h.match(/:\/\/(.[^/:]+)/i);return null!==h&&1<h.length&&"string"===typeof h[1]&&0<h[1].length?
h[1]:null};n.getDomainName=function(h){return h.substring(h.lastIndexOf(".",h.lastIndexOf(".")-1)+1)};n.checkForOrgUserOnOnlineBaseHostAndRedirect=function(h){var k=h.user,c=h.urlKey,l=h.customBaseUrl;k=null===k||void 0===k?void 0:k.orgId;var r=window.location.host===h.portalHostname;!h.isPortal&&k&&r&&c&&(window.location.href=window.location.href.replace(window.location.host,c+"."+l))};n.esriId=g["default"];return n}()})},"arcgisonline/sharing/geow/Geow":function(){define(["dojo","dijit","dojox",
"dojo/require!arcgisonline/sharing/util,arcgisonline/map/utils/deleteMapStorageNoFeedback,arcgisonline/telemetry,arcgisonline/sharing/geow/Community,esri/IdentityManager"],function(D,A,a){D.provide("arcgisonline.sharing.geow.Geow");D.require("arcgisonline.sharing.util");D.require("arcgisonline.map.utils.deleteMapStorageNoFeedback");D.require("arcgisonline.telemetry");D.require("arcgisonline.sharing.geow.Community");D.require("esri.IdentityManager");arcgisonline.sharing.geow.Geow={util:arcgisonline.sharing.util,
generatetoken:function(b,g,d){var e=esriGeowConfig.restBaseUrl.replace("http:","https:")+"generatetoken",f=document.domain,n=f.split(".");1<n.length&&(f=n[n.length-2]+"."+n[n.length-1]);b.referer=f;this._tokenExpiration=b.expiration;this.util.postJson(b,e,g,d)},signup:function(b,g,d){var e=esriGeowConfig.restBaseUrl+"community/signup",f=document.domain,n=f.split(".");1<n.length&&(f=n[n.length-2]+"."+n[n.length-1]);b.referer=f;this.util.postJson(b,e,g,d)},signin:function(b,g,d){this.generatetoken(b,
D.hitch(arcgisonline.sharing.geow.Geow,"signInHandler",b.username,g,d),d)},signInHandler:function(b,g,d,e,f){var n=new Date,h=new Date(n.setMinutes(n.getMinutes()+(this._tokenExpiration||120)));n=D.hitch(this,function(k,c){k.culture&&(k.culture=k.culture.toLowerCase());var l={email:k.username,privacy:k.privacy,token:e.token,ssl:e.ssl,culture:k.culture,region:k.region,expires:h.getTime()};k.orgId&&k.role&&(l.accountId=k.orgId,l.role=k.role);esriGeowConfig.userInfo=l;if(k.preferredView&&null!==k.preferredView)this.util.userPreferences({contentMode:k.preferredView},
esriGeowConfig.contentModeCookieName);else{var r=this.util.userPreferences(null,esriGeowConfig.contentModeCookieName);if(r&&r.contentMode){var m=D.create,q=m("form",{method:"POST"},D.body());m("input",{type:"hidden",name:"preferredView",value:r.contentMode},q);m("input",{type:"hidden",name:"clearEmptyFields",value:"false"},q);arcgisonline.sharing.geow.Community.updateProfile(q,function(v){})}}l=D.mixin(l,k);g&&g(l,f);D.publish("onSignIn",[l])});this.util.getJson(this.util.useSSL(esriGeowConfig.restBaseUrl+
"community/users/"+b+"?token\x3d"+e.token),D.hitch(this,n),d)},signInHandler2:function(b){var g=esriGeowConfig.restBaseUrl+"community/users/"+b.username+"?token\x3d"+b.token,d=new Date,e=Number(b.expires_in),f=new Date(d.setSeconds(d.getSeconds()+Number(e))),n=b&&!!b.ssl;return this.util.getJson(this.util.useSSL(g)).then(D.hitch(this,"_hasSecurityQuestion")).then(D.hitch(this,function(h){var k={email:h.username,privacy:h.privacy,token:b.token,culture:h.culture&&h.culture.toLowerCase()||"",region:h.region,
expires:f&&f.getTime()||null,persistent:b.persist?!0:void 0,allSSL:n};h.orgId&&h.role&&(k.accountId=h.orgId,k.role=h.role);esriGeowConfig.userInfo=k;h.preferredView&&this.util.userPreferences({contentMode:h.preferredView},esriGeowConfig.contentModeCookieName);k=D.mixin(k,h);D.publish("onSignIn",[k]);return k}))},_hasSecurityQuestion:function(b){var g=new D.Deferred;b.validateUserProfile=!0;!b||b.idpUsername||"arcgisonly"!==b.userType&&"both"!==b.userType||!b.validateUserProfile?g.resolve(b):g=this.util.request({url:esriGeowConfig.restBaseUrl+
"community/users/"+b.username+"/forgotPassword",content:{}},{}).then(D.hitch(this,function(d){d&&"enterprise"!==d.provider&&-1===d.securityQuestionIdx&&(b.noSecurityQuestion=!0);return b}));return g},signout:function(b){var g=this.util.getCookie("arcgis_auth"),d=esriGeowConfig.self||{};esriGeowConfig.userInfo=null;esriGeowConfig.userPreferences=null;d.isPortal||D.cookie("arcgis_auth",null,{expires:-1,path:"/",domain:document.domain});esri.id.destroyCredentials();arcgisonline.map.utils.deleteMapStorageNoFeedback().then(function(){D.publish("onSignOut",
[])});var e;b&&(e=D.mixin({},{client_id:"arcgisonline",redirect_uri:b}));g&&g.token&&esriGeowConfig.self&&esriGeowConfig.self.user&&"enterprise"===esriGeowConfig.self.user.provider&&(e=D.mixin(e||{},{token:g.token}));b=b||window.location.href;window.location=arcgisonline.sharing.util.getSecureUrl(esriGeowConfig.restBaseUrl+"oauth2/signout")+(e?"?"+D.objectToQuery(e):"")},getSharedCookie:function(){var b=esri.id,g={};b&&(g=(b=(b._getAllCookies("esri_auth")||[]).map(function(d){return JSON.parse(d)}).filter(function(d){return!d.portalApp}))&&
b.length?b.shift():{});return g},_logCookieChange:function(b,g){var d=arcgisonline.telemetry["default"].init({config:b});!this._cookieChangeLogged&&d&&d.logEvent&&(this._cookieChangeLogged=!0,d.logEvent({category:"cookie",label:"Organization changed",details:g?"Yes":"No"}))},setCookies:function(b){b.isPortal||esriGeowConfig.isDebug||!b.urlKey||-1!==window.location.hostname.toLowerCase().indexOf(b.urlKey.toLowerCase())||(b=window.location.href.replace(window.location.hostname,b.urlKey+"."+b.customBaseUrl),
window.location=b)}}})},"arcgisonline/map/utils/deleteMapStorageNoFeedback":function(){define(["dojo/Deferred"],function(D){return function(){var A=new D;sessionStorage.removeItem("Esri_webmap");A.resolve(!0);return A}})},"arcgisonline/telemetry":function(){define(["require","exports","tslib","./esriGeowConfig","telemetry/telemetry.dojo.min"],function(D,A,a,b,g){Object.defineProperty(A,"__esModule",{value:!0});b=a.__importDefault(b);g=a.__importDefault(g);D=function(){function d(){}d.init=function(e,
f){var n;if(this._instance)return this._instance;this._envCredentials=JSON.parse(atob(b["default"].telemetryConfig||"Int9Ig\x3d\x3d"));if(JSON.stringify(this._envCredentials)!==JSON.stringify("{}")){var h=new g["default"]({disabled:!(b["default"].usageTrackingEnabled&&!e.disabled&&!e.config.isPortal),portal:e.config,amazon:this._getAmazonCredentials(e)});"logPageView"in e&&!0!==e.logPageView||h.logPageView(null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.href);
return this._instance=h}};d._getAmazonCredentials=function(e){var f=this._getEnvironment(e.config.portalHostname);return{userPoolID:this._envCredentials[f].userPoolID,app:{name:e.name||"Arcgis Online",id:this._envCredentials[f].appId,version:e.config.currentVersion||"5.2"}}};d._getEnvironment=function(e){e=e.replace("www.","");return"arcgis.com"===e&&"production"||"qaext.arcgis.com"===e&&"qa"||"dev"};return d}();A["default"]=D})},"telemetry/telemetry.dojo.min":function(){define(function(){function D(aa,
ca){var I=new XMLHttpRequest;I.addEventListener("load",function(){ca(I.responseText)});I.open(aa.method,aa.url);Object.keys(aa.headers).forEach(function(T){I.setRequestHeader(T,aa.headers[T])});I.send(aa.body)}function A(aa,ca){var I=x.get(E);if(I&&Date.now()/1E3<I.Expiration)return ca(I);a(aa,function(T){x.set(E,T);ca(T)})}function a(aa,ca){var I=C({},F);I.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetId";I.body=JSON.stringify({IdentityPoolId:aa});D(I,function(T){b(JSON.parse(T),ca)})}function b(aa,
ca){var I=C({},F);I.headers["X-Amz-Target"]="AWSCognitoIdentityService.GetCredentialsForIdentity";I.body=JSON.stringify({IdentityId:aa.IdentityId});D(I,function(T){T=JSON.parse(T);ca(T.Credentials)})}function g(){var aa=void 0,ca=x.get(H);var I=((!ca||Date.now()>ca.expiration)&&(aa=!0,ca={id:Math.floor(17592186044416*(1+Math.random())).toString(16),startTimestamp:(new Date).toISOString()}),ca.expiration=Date.now()+G,x.set(H,ca),aa&&(ca["new"]=!0),ca);ca=x.get(L);aa=(ca||(ca=d()+d()+"-"+d()+"-"+d()+
"-"+d()+"-"+d()+d()+d(),x.set(L,ca)),ca);return{session:I,id:aa}}function d(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function e(aa,ca){var I={host:ca.uri.host,"content-type":aa.config.defaultContentType,accept:aa.config.defaultAcceptType,"x-amz-date":n(ca.signDate)};ca.request.method=ca.request.method.toUpperCase();ca.request.body?ca.payload=ca.request.body:ca.request.data&&aa.payloadSerializer?ca.payload=aa.payloadSerializer(ca.request.data):delete I["content-type"];
ca.request.headers=h(I,Object.keys(ca.request.headers||{}).reduce(function(T,ba){return T[ba.toLowerCase()]=ca.request.headers[ba],T},{}));ca.sortedHeaderKeys=Object.keys(ca.request.headers).sort();ca.request.headers["content-type"]&&(ca.request.headers["content-type"]=ca.request.headers["content-type"].split(";")[0]);"object"===y(ca.request.params)&&h(ca.uri.queryParams,ca.request.params)}function f(aa,ca){ca.signedHeaders=ca.sortedHeaderKeys.map(function(I){return I.toLowerCase()}).join(";");ca.canonicalRequest=
String(ca.request.method).toUpperCase()+"\n"+encodeURI(ca.uri.path)+"\n"+Object.keys(ca.uri.queryParams).sort().map(function(I){return encodeURIComponent(I)+"\x3d"+encodeURIComponent(ca.uri.queryParams[I])}).join("\x26")+"\n"+ca.sortedHeaderKeys.map(function(I){return I.toLocaleLowerCase()+":"+ca.request.headers[I]}).join("\n")+"\n\n"+ca.signedHeaders+"\n"+aa.hasher.hash(ca.payload?ca.payload:"")}function n(aa,ca){var I=aa.toISOString().replace(/[:\-]|\.\d{3}/g,"").substr(0,17);return ca?I.substr(0,
8):I}function h(aa){return[].slice.call(arguments,1).forEach(function(ca){ca&&"object"===(void 0===ca?"undefined":y(ca))&&Object.keys(ca).forEach(function(I){var T=ca[I];void 0!==T&&(null!==T&&"object"===(void 0===T?"undefined":y(T))?(aa[I]=Array.isArray(T)?[]:{},h(aa[I],T)):aa[I]=T)})}),aa}function k(aa){var ca=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},I=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},T=g().session;return{eventType:"pageView",timestamp:(new Date).toISOString(),
session:{id:T.id,startTimestamp:T.startTimestamp},attributes:C({referrer:document.referrer,hostname:window.location.hostname,path:aa||window.location.pathname,pageUrl:aa||window.location.pathname,pageName:document.title,previousPageUrl:ca.pageUrl,previousPageName:ca.pageName},c(I)),metrics:l(I)}}function c(aa){var ca=C({},aa);return delete ca.workflow,Q.forEach(function(I){return delete ca[I]}),Object.keys(ca).forEach(function(I){ca[I]="json"===I?ca[I]?JSON.stringify(ca[I]):"null":void 0!==ca[I]?
ca[I].toString():"null"}),ca}function l(aa){var ca={};return Q.forEach(function(I){aa[I]&&(ca[I]=aa[I])}),ca}function r(){var aa=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},ca=arguments[1];return(new P({region:"us-east-1",service:"mobileanalytics",accessKeyId:aa.AccessKeyId,secretAccessKey:aa.SecretKey,sessionToken:aa.SessionToken})).sign(ca)}function m(aa,ca,I){var T=g();aa=Array.isArray(aa)?aa:[aa];var ba=q(aa);A(ca,function(pa){try{ba.headers=r(pa,ba),ba.headers["x-amz-Client-Context"]=
JSON.stringify({client:{client_id:T.id,app_title:I.name,app_version_name:I.version||"unknown"},services:{mobile_analytics:{app_id:I.id}}})}catch(ya){return}D(ba,function(ya){})})}function q(aa){return{url:1<arguments.length&&void 0!==arguments[1]?arguments[1]:M,method:"POST",body:JSON.stringify({events:aa})}}function v(aa){window.ga&&window.ga(function(){aa(window.ga.getAll())})}function B(aa,ca){return z({hitType:"pageview",page:aa||window.location.pathname},ca,2<arguments.length&&void 0!==arguments[2]?
arguments[2]:{},3<arguments.length&&void 0!==arguments[3]?arguments[3]:{})}function w(aa){return z({hitType:"event",eventCategory:aa.category||"none",eventAction:aa.action,eventLabel:aa.label},aa,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}function z(aa,ca,I,T){return Object.keys(I).forEach(function(ba){aa["dimension"+I[ba]]=ca[ba]}),Object.keys(T).forEach(function(ba){aa["metric"+T[ba]]=ca[ba]}),aa}var x={storage:{},memory:!0,
get:function(aa){var ca=void 0;try{ca=window.localStorage&&window.localStorage.getItem(aa)||this.storage[aa]}catch(I){ca=this.storage[aa]}if(ca)try{return JSON.parse(ca)}catch(I){}},set:function(aa,ca){ca=JSON.stringify(ca);try{window.localStorage.setItem(aa,ca)}catch(I){this.memory||(this.memory=!0),this.storage[aa]=ca}},"delete":function(aa){try{window.localStorage.removeItem(aa)}catch(ca){this.memory||(this.memory=!0),delete this.storage[aa]}}},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?
function(aa){return typeof aa}:function(aa){return aa&&"function"==typeof Symbol&&aa.constructor===Symbol&&aa!==Symbol.prototype?"symbol":typeof aa},u=function(aa,ca){if(!(aa instanceof ca))throw new TypeError("Cannot call a class as a function");},t=function(){function aa(ca,I){for(var T=0;T<I.length;T++){var ba=I[T];ba.enumerable=ba.enumerable||!1;ba.configurable=!0;"value"in ba&&(ba.writable=!0);Object.defineProperty(ca,ba.key,ba)}}return function(ca,I,T){return I&&aa(ca.prototype,I),T&&aa(ca,
T),ca}}(),C=Object.assign||function(aa){for(var ca=1;ca<arguments.length;ca++){var I=arguments[ca],T;for(T in I)Object.prototype.hasOwnProperty.call(I,T)&&(aa[T]=I[T])}return aa},E="TELEMETRY_COGNITO_CREDENTIALS",F={method:"POST",url:"https://cognito-identity.us-east-1.amazonaws.com/",headers:{"Content-type":"application/x-amz-json-1.1"}},G=18E5,H="TELEMETRY_SESSION",L="TELEMETRY_CLIENT_ID",J=function(aa,ca){var I={},T=I.lib={},ba=function(){},pa=T.Base={extend:function(ua){ba.prototype=this;var Ja=
new ba;return ua&&Ja.mixIn(ua),Ja.hasOwnProperty("init")||(Ja.init=function(){Ja.$super.init.apply(this,arguments)}),Ja.init.prototype=Ja,Ja.$super=this,Ja},create:function(){var ua=this.extend();return ua.init.apply(ua,arguments),ua},init:function(){},mixIn:function(ua){for(var Ja in ua)ua.hasOwnProperty(Ja)&&(this[Ja]=ua[Ja]);ua.hasOwnProperty("toString")&&(this.toString=ua.toString)},clone:function(){return this.init.prototype.extend(this)}},ya=T.WordArray=pa.extend({init:function(ua,Ja){ua=this.words=
ua||[];this.sigBytes=void 0!=Ja?Ja:4*ua.length},toString:function(ua){return(ua||Ha).stringify(this)},concat:function(ua){var Ja=this.words,ha=ua.words,ma=this.sigBytes;if(ua=ua.sigBytes,this.clamp(),ma%4)for(var R=0;R<ua;R++)Ja[ma+R>>>2]|=(ha[R>>>2]>>>24-R%4*8&255)<<24-(ma+R)%4*8;else if(65535<ha.length)for(R=0;R<ua;R+=4)Ja[ma+R>>>2]=ha[R>>>2];else Ja.push.apply(Ja,ha);return this.sigBytes+=ua,this},clamp:function(){var ua=this.words,Ja=this.sigBytes;ua[Ja>>>2]&=4294967295<<32-Ja%4*8;ua.length=aa.ceil(Ja/
4)},clone:function(){var ua=pa.clone.call(this);return ua.words=this.words.slice(0),ua},random:function(ua){for(var Ja=[],ha=0;ha<ua;ha+=4)Ja.push(4294967296*aa.random()|0);return new ya.init(Ja,ua)}}),Da=I.enc={},Ha=Da.Hex={stringify:function(ua){var Ja=ua.words;ua=ua.sigBytes;for(var ha=[],ma=0;ma<ua;ma++){var R=Ja[ma>>>2]>>>24-ma%4*8&255;ha.push((R>>>4).toString(16));ha.push((15&R).toString(16))}return ha.join("")},parse:function(ua){for(var Ja=ua.length,ha=[],ma=0;ma<Ja;ma+=2)ha[ma>>>3]|=parseInt(ua.substr(ma,
2),16)<<24-ma%8*4;return new ya.init(ha,Ja/2)}},ta=Da.Latin1={stringify:function(ua){var Ja=ua.words;ua=ua.sigBytes;for(var ha=[],ma=0;ma<ua;ma++)ha.push(String.fromCharCode(Ja[ma>>>2]>>>24-ma%4*8&255));return ha.join("")},parse:function(ua){for(var Ja=ua.length,ha=[],ma=0;ma<Ja;ma++)ha[ma>>>2]|=(255&ua.charCodeAt(ma))<<24-ma%4*8;return new ya.init(ha,Ja)}},xa=Da.Utf8={stringify:function(ua){try{return decodeURIComponent(escape(ta.stringify(ua)))}catch(Ja){throw Error("Malformed UTF-8 data");}},parse:function(ua){return ta.parse(unescape(encodeURIComponent(ua)))}},
ra=T.BufferedBlockAlgorithm=pa.extend({reset:function(){this._data=new ya.init;this._nDataBytes=0},_append:function(ua){"string"==typeof ua&&(ua=xa.parse(ua));this._data.concat(ua);this._nDataBytes+=ua.sigBytes},_process:function(ua){var Ja=this._data,ha=Ja.words,ma=Ja.sigBytes,R=this.blockSize,Ea=ma/(4*R);Ea=ua?aa.ceil(Ea):aa.max((0|Ea)-this._minBufferSize,0);if(ua=Ea*R,ma=aa.min(4*ua,ma),ua){for(var Ia=0;Ia<ua;Ia+=R)this._doProcessBlock(ha,Ia);Ia=ha.splice(0,ua);Ja.sigBytes-=ma}return new ya.init(Ia,
ma)},clone:function(){var ua=pa.clone.call(this);return ua._data=this._data.clone(),ua},_minBufferSize:0});T.Hasher=ra.extend({cfg:pa.extend(),init:function(ua){this.cfg=this.cfg.extend(ua);this.reset()},reset:function(){ra.reset.call(this);this._doReset()},update:function(ua){return this._append(ua),this._process(),this},finalize:function(ua){return ua&&this._append(ua),this._doFinalize()},blockSize:16,_createHelper:function(ua){return function(Ja,ha){return(new ua.init(ha)).finalize(Ja)}},_createHmacHelper:function(ua){return function(Ja,
ha){return(new Aa.HMAC.init(ua,ha)).finalize(Ja)}}});var Aa=I.algo={};return I}(Math);!function(aa){var ca=J.lib,I=ca.WordArray,T=ca.Hasher;ca=J.algo;for(var ba=[],pa=[],ya=function(ua){return 4294967296*(ua-(0|ua))|0},Da=2,Ha=0;64>Ha;){a:{var ta=Da;for(var xa=aa.sqrt(ta),ra=2;ra<=xa;ra++)if(!(ta%ra)){ta=!1;break a}ta=!0}ta&&(8>Ha&&(ba[Ha]=ya(aa.pow(Da,.5))),pa[Ha]=ya(aa.pow(Da,1/3)),Ha++);Da++}var Aa=[];ca=ca.SHA256=T.extend({_doReset:function(){this._hash=new I.init(ba.slice(0))},_doProcessBlock:function(ua,
Ja){for(var ha=this._hash.words,ma=ha[0],R=ha[1],Ea=ha[2],Ia=ha[3],ea=ha[4],Ya=ha[5],Xa=ha[6],Ba=ha[7],U=0;64>U;U++){if(16>U)Aa[U]=0|ua[Ja+U];else{var la=Aa[U-15],na=Aa[U-2];Aa[U]=((la<<25|la>>>7)^(la<<14|la>>>18)^la>>>3)+Aa[U-7]+((na<<15|na>>>17)^(na<<13|na>>>19)^na>>>10)+Aa[U-16]}la=Ba+((ea<<26|ea>>>6)^(ea<<21|ea>>>11)^(ea<<7|ea>>>25))+(ea&Ya^~ea&Xa)+pa[U]+Aa[U];na=((ma<<30|ma>>>2)^(ma<<19|ma>>>13)^(ma<<10|ma>>>22))+(ma&R^ma&Ea^R&Ea);Ba=Xa;Xa=Ya;Ya=ea;ea=Ia+la|0;Ia=Ea;Ea=R;R=ma;ma=la+na|0}ha[0]=
ha[0]+ma|0;ha[1]=ha[1]+R|0;ha[2]=ha[2]+Ea|0;ha[3]=ha[3]+Ia|0;ha[4]=ha[4]+ea|0;ha[5]=ha[5]+Ya|0;ha[6]=ha[6]+Xa|0;ha[7]=ha[7]+Ba|0},_doFinalize:function(){var ua=this._data,Ja=ua.words,ha=8*this._nDataBytes,ma=8*ua.sigBytes;return Ja[ma>>>5]|=128<<24-ma%32,Ja[14+(ma+64>>>9<<4)]=aa.floor(ha/4294967296),Ja[15+(ma+64>>>9<<4)]=ha,ua.sigBytes=4*Ja.length,this._process(),this._hash},clone:function(){var ua=T.clone.call(this);return ua._hash=this._hash.clone(),ua}});J.SHA256=T._createHelper(ca);J.HmacSHA256=
T._createHmacHelper(ca)}(Math);(function(){var aa=J.enc.Utf8;J.algo.HMAC=J.lib.Base.extend({init:function(ca,I){ca=this._hasher=new ca.init;"string"==typeof I&&(I=aa.parse(I));var T=ca.blockSize,ba=4*T;I.sigBytes>ba&&(I=ca.finalize(I));I.clamp();for(var pa=this._oKey=I.clone(),ya=this._iKey=I.clone(),Da=pa.words,Ha=ya.words,ta=0;ta<T;ta++)Da[ta]^=1549556828,Ha[ta]^=909522486;pa.sigBytes=ya.sigBytes=ba;this.reset()},reset:function(){var ca=this._hasher;ca.reset();ca.update(this._iKey)},update:function(ca){return this._hasher.update(ca),
this},finalize:function(ca){var I=this._hasher;return ca=I.finalize(ca),I.reset(),I.finalize(this._oKey.clone().concat(ca))}})})();var S={region:"eu-west-1",service:"execute-api",defaultContentType:"application/json",defaultAcceptType:"application/json",payloadSerializerFactory:function(){return function(aa){return JSON.stringify(aa)}},uriParserFactory:function(){function aa(I){return/^\??(.*)$/.exec(I)[1].split("\x26").reduce(function(T,ba){return ba=/^(.+)=(.*)$/.exec(ba),ba&&(T[ba[1]]=ba[2]),T},
{})}var ca=document?document.createElement("a"):{};return function(I){return ca.href=I,{protocol:ca.protocol,host:ca.host.replace(/^(.*):((80)|(443))$/,"$1"),path:("/"!==ca.pathname.charAt(0)?"/":"")+ca.pathname,queryParams:aa(ca.search)}}},hasherFactory:function(){return{hash:function(aa,ca){ca=h({hexOutput:!0,textInput:!0},ca);var I=J.SHA256(aa);return ca.hexOutput?I.toString(J.enc.Hex):I},hmac:function(aa,ca,I){I=h({hexOutput:!0,textInput:!0},I);aa=J.HmacSHA256(ca,aa,{asBytes:!0});return I.hexOutput?
aa.toString(J.enc.Hex):aa}}}},P=function(){function aa(ca){u(this,aa);this.config=h({},S,ca);this.payloadSerializer=this.config.payloadSerializer||this.config.payloadSerializerFactory();this.uriParser=this.config.uriParserFactory();this.hasher=this.config.hasherFactory();ca=this.config.accessKeyId;if(void 0===ca||!ca)throw Error("AwsSigner requires AWS AccessKeyID");ca=this.config.secretAccessKey;if(void 0===ca||!ca)throw Error("AwsSigner requires AWS SecretAccessKey");}return t(aa,[{key:"sign",value:function(ca,
I){var T={request:h({},ca),signDate:I||new Date,uri:this.uriParser(ca.url)};e(this,T);f(this,T);T.credentialScope=[n(T.signDate,!0),this.config.region,this.config.service,"aws4_request"].join("/");T.stringToSign="AWS4-HMAC-SHA256\n"+n(T.signDate)+"\n"+T.credentialScope+"\n"+this.hasher.hash(T.canonicalRequest);var ba=this.hasher.hmac,pa=ba(ba(ba(ba("AWS4"+this.config.secretAccessKey,n(T.signDate,!0),{hexOutput:!1}),this.config.region,{hexOutput:!1,textInput:!1}),this.config.service,{hexOutput:!1,
textInput:!1}),"aws4_request",{hexOutput:!1,textInput:!1});T.signature=ba(pa,T.stringToSign,{textInput:!1});T.authorization="AWS4-HMAC-SHA256 Credential\x3d"+this.config.accessKeyId+"/"+T.credentialScope+", SignedHeaders\x3d"+T.signedHeaders+", Signature\x3d"+T.signature;return{Accept:T.request.headers.accept,Authorization:T.authorization,"Content-Type":T.request.headers["content-type"],"x-amz-date":T.request.headers["x-amz-date"],"x-amz-security-token":this.config.sessionToken||void 0}}}]),aa}(),
Q=["size","duration","position","number","count"],M="https://mobileanalytics.us-east-1.amazonaws.com/2014-06-05/events",N=function(){function aa(ca){u(this,aa);this.name="amazon";C(this,ca);g().session["new"]&&!ca.test&&this.logEvent({eventType:"_session.start"})}return t(aa,[{key:"logPageView",value:function(ca,I){var T=k(ca,this.previousPage,I);m(T,this.userPoolID,this.app);this.previousPage=T.attributes}},{key:"logEvent",value:function(ca){var I=g().session;ca={eventType:ca.eventType||"other",
timestamp:(new Date).toISOString(),session:{id:I.id,startTimestamp:I.startTimestamp},attributes:C({referrer:document.referrer,hostname:window.location.hostname,path:window.location.pathname},c(ca)),metrics:l(ca)};m(ca,this.userPoolID,this.app)}}]),aa}(),K=function(){function aa(){var ca=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};u(this,aa);this.name="google";C(this,ca)}return t(aa,[{key:"logPageView",value:function(ca,I){var T=B(ca,I,this.dimensions,this.metrics);v(function(ba){ba.forEach(function(pa){pa.send(T)})})}},
{key:"logEvent",value:function(ca){var I=w(ca,this.dimensions,this.metrics);v(function(T){T.forEach(function(ba){ba.send(I)})})}}]),aa}(),X=function(aa){if(aa)return J.SHA256(aa).toString(J.enc.Hex)},da="esri.com esriuk.com esri.de esri.ca esrifrance.fr esri.nl esri-portugal.pt esribulgaria.com esri.fi esri.kr esrimalaysia.com.my esri.es esriaustralia.com.au esri-southafrica.com esri.cl esrichina.com.cn esri.co esriturkey.com.tr geodata.no esriitalia.it esri.pl".split(" "),Y=function(){var aa=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{},ca=aa.portal||{};return!aa.disabled&&"1"!==navigator.doNotTrack&&"1"!==window.doNotTrack&&(void 0===ca.eueiEnabled||!1!==ca.eueiEnabled)&&(!(!ca.eueiEnabled||!ca.user||ca.user.orgId!==ca.id)||!(!ca.user||ca.user.orgId||"US"!==ca.ipCntryCode)||!ca.user&&"US"===ca.ipCntryCode||!(0<Object.keys(ca).length))};return function(){function aa(ca){u(this,aa);try{(this.trackers=[],this.workflows={},this.test=ca.test,this.debug=ca.debug,this.disabled=!Y(ca),ca.portal&&ca.portal.user)?
this.setUser(ca.portal.user,(ca.portal.subscriptionInfo||{}).type):ca.user&&this.setUser(ca.user),this.disabled||this._initTrackers(ca)}catch(I){this.disabled=!0}}return t(aa,[{key:"_initTrackers",value:function(ca){if(ca.amazon){var I=new N(ca.amazon);this.trackers.push(I)}ca.google&&(ca=new K(ca.google),this.trackers.push(ca))}},{key:"setUser",value:function(){var ca=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},I=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"Public";this.user=
ca="string"==typeof ca?{username:ca}:ca;this.user.accountType=I;var T=void 0;if(ca.email&&ca.email.split){var ba=ca.email.split("@")[1];T=0<da.filter(function(pa){return ba===pa}).length}(T||-1<["In House","Demo and Marketing"].indexOf(I))&&(this.user.internalUser=!0)}},{key:"logPageView",value:function(ca){var I=this.preProcess(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return this.debug||!this.test||this.disabled?!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(T){try{T.logPageView(ca,
I)}catch(ba){}}),!0):I}},{key:"logEvent",value:function(){var ca=this.preProcess(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});return!this.debug&&this.test?ca:!this.trackers.length||this.disabled?!1:(this.trackers.forEach(function(I){try{I.logEvent(ca)}catch(T){}}),!0)}},{key:"logError",value:function(){var ca=C({eventType:"error"},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});this.logEvent(ca)}},{key:"startWorkflow",value:function(ca){var I=1<arguments.length&&void 0!==
arguments[1]?arguments[1]:{},T={name:ca,start:Date.now(),steps:[],workflowId:Math.floor(17592186044416*(1+Math.random())).toString(16)};this._saveWorkflow(T);I=C({name:ca,step:"start"},I);return this._logWorkflow(I),T}},{key:"stepWorkflow",value:function(ca,I){var T=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};T=C({name:ca,step:I,details:"string"==typeof options?T:T.details},T);this._logWorkflow(T)}},{key:"endWorkflow",value:function(ca){var I=C({name:ca,step:"finish"},1<arguments.length&&
void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(I)}},{key:"cancelWorkflow",value:function(ca){var I=C({name:ca,step:"cancel"},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});this._logWorkflow(I)}},{key:"getWorkflow",value:function(ca){if(ca=x.get("TELEMETRY-WORKFLOW:"+ca)){if(18E5>Date.now()-ca.start)return ca;this._deleteWorkflow(ca)}}},{key:"_saveWorkflow",value:function(ca){x.set("TELEMETRY-WORKFLOW:"+ca.name,ca)}},{key:"_deleteWorkflow",value:function(ca){x["delete"]("TELEMETRY-WORKFLOW:"+
ca.name)}},{key:"_logWorkflow",value:function(){var ca=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};ca=this.preProcess(ca);var I=this.getWorkflow(ca.name);I||(this.startWorkflow(ca.name),I=this.getWorkflow(ca.name));I.steps.push(ca.step);I.duration=(Date.now()-I.start)/1E3;-1<["cancel","finish"].indexOf(ca.step)?this._deleteWorkflow(I):this._saveWorkflow(I);ca=C(ca,{eventType:"workflow",category:ca.name,action:ca.step,label:ca.details,duration:I.duration,workflowId:I.workflowId});this.logEvent(ca)}},
{key:"preProcess",value:function(){var ca=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},I={};return this.user&&(I={user:X(this.user.username),orgId:X(this.user.orgId),lastLogin:this.user.lastLogin,userSince:this.user.created,internalUser:this.user.internalUser||!1,accountType:this.user.accountType}),C({},ca,I)}}]),aa}()})},"arcgisonline/sharing/geow/Community":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(D,A,a){D.provide("arcgisonline.sharing.geow.Community");
D.require("arcgisonline.sharing.util");arcgisonline.sharing.geow.Community={util:arcgisonline.sharing.util,i18n:function(){if(this._i18n)return this._i18n;this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").community);return this._i18n},getProfile:function(b,g,d){if(null===b)return D.publish("globalMessage",[{message:this.i18n().noUser,type:"error",duration:0}]),null;this.util.getJson(esriGeowConfig.restBaseUrl+
"community/users/"+b,g,null)},getProfileThumbnailUrl:function(b,g){if(null!==b.thumbnail){var d=this.util.getToken();if(g){var e=esriGeowConfig.restBaseUrl;esriGeowConfig.useDefaultIdentityStore&&(e=!1!==esriGeowConfig.useSSL?this.util.getSecureUrl(e):e);return e+"community/users/"+b.username+"/info/"+b.thumbnail+(null===d||0===d.length?"":"?token\x3d"+d)}return esriGeowConfig.restBaseUrl+"community/users/"+b.username+"/info/"+b.thumbnail+(null===d||0===d.length?"":"?token\x3d"+d)}return null},updateProfile:function(b,
g,d){d=this.util.getUser();null==d&&D.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]);d=d.username||d.email;d=this.util.getSecureUrl(esriGeowConfig.restBaseUrl)+"community/users/"+d+"/update";this.util.postForm(b,d,g)},updateProfileByUser:function(b,g,d){null!=this.util.getUser()&&(d=this.util.getSecureUrl(esriGeowConfig.restBaseUrl)+"community/users/"+b.username.value+"/update",this.util.postForm(b,d,g))},getUserGroups:function(b,g){var d=this.util.getUser();(d=
d&&(d.username||d.email))?d=this.getUserGroupsByUser(d,b,g):(d=new D.Deferred,d.resolve());return d},getUserGroupsByUser:function(b,g,d){b=esriGeowConfig.restBaseUrl+"community/users/"+b;var e=new D.Deferred;this.util.request({url:b}).then(D.hitch(this,function(f){e.resolve(f);g&&g(f)}),D.hitch(this,function(f){e.reject(f);d&&d(f)}));return e},getGroup:function(b,g,d){this.util.getJson(esriGeowConfig.restBaseUrl+"community/groups/"+b,g,d)},createGroup:function(b,g,d){null!=this.util.getUser()&&this.util.postForm(b,
esriGeowConfig.restBaseUrl+"community/createGroup",g,d)},updateGroup:function(b,g,d,e){null!=this.util.getUser()&&this.util.postForm(g,esriGeowConfig.restBaseUrl+"community/groups/"+b+"/update",d,e)},deleteGroup:function(b,g,d){null!=this.util.getUser()&&this.util.postJson("",esriGeowConfig.restBaseUrl+"community/groups/"+b.id+"/delete",g,d)},reassignGroup:function(b,g,d,e){null!=this.util.getUser()&&this.util.postJson({targetUsername:g},esriGeowConfig.restBaseUrl+"community/groups/"+b.id+"/reassign",
d,e)},leaveGroup:function(b,g,d){this.util.postJson("",esriGeowConfig.restBaseUrl+"community/groups/"+b.id+"/leave",g,d)},inviteToGroup:function(b,g,d){null!=this.util.getUser()&&this.util.globalMessage("TODO: not implemented in rest","error",0)},searchGroups:function(b,g,d){this.util.getJson(esriGeowConfig.restBaseUrl+"community/groups?q\x3d"+b,g)},searchToStore:function(b){var g=[];D.forEach(b.results,function(d,e){var f={id:e,title:this._getGroupTitleLink(d),owner:d.owner,description:d.description,
imageUrl:d.imageUrl,tags:d.keywords,created:d.created};g[e]=f},this);return new D.data.ItemFileReadStore({data:{identifier:"id",label:"item",items:g}})},_getGroupTitleLink:function(b){return"\x3ca href\x3d'group.html?owner\x3d"+b.owner+"\x26title\x3d"+encodeURIComponent(b.title)+'\' class\x3d"esriGroupTitle" alt\x3d'+this.i18n().viewGroupDetails+" title\x3d"+this.i18n().viewGroupDetails+"\x3e"+b.title+"\x3c/a\x3e"},getNotifications:function(){arcgisonline.sharing.dijit.dialog.NotificationsDlg.prototype.statics.getInstance().show()},
getNotificationsCount:function(){var b=this.util.getUser();if(null!=b){var g=function(e,f){D.publish("onNotificationCount",[e.notifications.length])},d;this.util.getJson(esriGeowConfig.restBaseUrl+"community/users/"+(b.username||b.email)+"/notifications").then(D.hitch(this,function(e){d=(e&&e.notifications||[]).filter(function(f){return f&&"message_received"!==f.type});g({notifications:d})}))}},deleteNotifictation:function(b){var g=this.util.getUser();null!=g&&this.util.postJson("",esriGeowConfig.restBaseUrl+
"community/users/"+(g.username||g.email)+"/notifications/"+b+"/delete",D.hitch(this,function(d,e){D.publish("onNotificationDelete",[""])}))},updateUserSecure:function(b,g,d,e){e=esriGeowConfig.restBaseUrl;esriGeowConfig.useDefaultIdentityStore&&(e=!1!==esriGeowConfig.useSSL?this.util.getSecureUrl(e):e);this.util.postForm(g,e+"community/users/"+b+"/update",d)},getProvisionedListings:function(b,g,d){return this.util.request({url:esriGeowConfig.restBaseUrl+"community/users/"+b+"/provisionedListings",
content:{start:g||1,num:d||100}})}}})},"arcgisonline/sharing/dijit/Webworker/_AppLauncher":function(){define("require exports tslib ../../../esriGeowConfig ../../../pages/components/ManageBlockedApps/blocked-apps-service ../../../pages/portal/LicenseInfo ../../../pages/utils/storage ../../util dojo/_base/lang dojo/Deferred dojo/promise/all dojo/sniff esri/request dojo/i18n!../../../nls/arcgisonline".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);
e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);return function(){function m(q,v){this._browserIsEdge=!1;this.appIconPath="/css/images/app-icons/";this.basePath="js/arcgisonline/sharing/dijit";this._portal=q;this._portalUser=this._portal.portalUser||this._portal.user;this._self=b["default"].self||q;this._userProperties=v;this.userToken=q.token;b["default"].userInfo&&
b["default"].userInfo.isLicensed||this.fetchAndSetupLicenseInfo();this.imgDir=f["default"].relativeToExplicitUrl(""+this.basePath+this.appIconPath);this.appSwitcherInConfig=b["default"].appSwitcherConfigItemQuery?!0:null;this.__displayIntro=!1}m.prototype.getApps=function(q){var v=this;q&&q.noStrings||!r["default"]||(this.i18n=a.__assign({},r["default"].appSwitcher),this._clearText=r["default"].configAGOLUtilServices.clear);return this.queryItems().then(function(B){v.appSwitcherConfig=B.results[0];
return v.refreshApps()})};m.prototype.refreshApps=function(q){var v=this;return this._queryItemsAndInitApps(this.appSwitcherConfig,null,null,q).then(function(B){return(new h["default"]).resolve({provisionedListings:B.provisionedListings,willQueryForItems:B.willQueryForItems})}).then(function(B){return v._init(B.provisionedListings,B.willQueryForItems)})};m.prototype.setApps=function(q){if("string"===typeof q)try{q=JSON.parse(q)}catch(B){return(new h["default"]).resolve({success:!1})}if(this._appArraysAreValid(q.primaryApps,
q.secondaryApps)){var v=q.revisions||{};return this._saveAppOrderToUserProperties(this.populateDataIdAttributes(q.primaryApps,v.targetUid,v.isNew&&"isNew",v.targetValue||!1),this.populateDataIdAttributes(q.secondaryApps))}return(new h["default"]).resolve({success:!1})};m.prototype._appArraysAreValid=function(q,v){return q&&v&&Array.isArray(q)&&Array.isArray(v)?q.length+v.length>=this._minNumberOfAppsToSave:!1};m.prototype.fetchAndSetupLicenseInfo=function(){var q=this,v=new h["default"];d["default"].isOrgUser=
this._portalUser&&this._portalUser.orgId;d["default"].portal=this._portal;d["default"].portal.user=d["default"].portal.user||this._portalUser;return d["default"].getLicenseInfo().then(function(){q._portalUser&&(b["default"].userInfo=n["default"].mixin(q._portalUser,d["default"]));return v.resolve(!0)})};m.prototype.queryItems=function(q,v){return this.portalQueryItems(b["default"].appSwitcherConfigItemQuery,1)};m.prototype._queryItemsAndInitApps=function(q,v,B,w){var z=this,x;q.itemDataUrl=this.formatUrlWithToken(this._portal.portalUrl+
"content/items/"+q.id+"/data");this._browserInUse=this._getBrowserInUse();this.__changedApp=v&&B?v:null;var y=!this._cookieForQueryingItemsExists(),u=new h["default"];if(null===(x=this._portalUser)||void 0===x?0:x.orgId)return k["default"]({config:l["default"]({url:q.itemDataUrl,content:{f:"json"}}),marketplace:this._getMarketPlaceProvisionedListings(w),preferences:this._getUserProperties(),customOrgApps:this._getApprovedApps()}).then(function(t){z.userProperties=t.preferences.properties||{};z.userApps=
t.config.appSwitcher;z._self.isPortal||z.userApps.apps.unshift(z._getAgoApp());z.approvedApps=t.customOrgApps.approvedApps||[];z.userProperties.appLauncher||(y=!1,z.__displayIntro=!0);return u.resolve({provisionedListings:t.marketplace,willQueryForItems:y})})};m.prototype._filterBlockedApps=function(q){var v=this;return q.filter(function(B){var w;return!(null===(w=v._blockedApps)||void 0===w?0:w.some(function(z){return B.itemId&&B.itemId===z.itemid||B.title&&B.title===z.title}))})};m.prototype._mapAppTitles=
function(q){var v=this._self.isPortal,B={"Map Viewer Beta":{value:"Map Viewer"},"Operations Dashboard for ArcGIS":{value:"ArcGIS Dashboards Classic",isPortal:!0},"Workforce for ArcGIS":{value:"ArcGIS Workforce",isPortal:!0}};q.forEach(function(w){Object.keys(B).forEach(function(z){var x=B[z];x.isPortal&&!v||w.uid!==z||(w.uid=x.value)})})};m.prototype._init=function(q,v,B,w){var z=this;return this._getBlockedApps().then(function(){return z._getLicensedApps(q,v)}).then(function(x){z._appDictionary=
x[1];var y=new h["default"];z.userProperties.appLauncher&&(z.userProperties.appLauncher.primary&&z._mapAppTitles(z.userProperties.appLauncher.primary),z.userProperties.appLauncher.secondary&&z._mapAppTitles(z.userProperties.appLauncher.secondary));if(z.userProperties.appLauncher&&z.userProperties.appLauncher.primary&&z.userProperties.appLauncher.secondary)return z._queryAppItemsForChanges(z.approvedApps,v).then(function(){z._newAppDictionary=n["default"].clone(z._appDictionary);z.primaryApps=z.userProperties.appLauncher.primary.reduce(z._populateAppIdentifiers.bind(z),
[]);z.secondaryApps=z.userProperties.appLauncher.secondary.reduce(z._populateAppIdentifiers.bind(z),[]);z.primaryApps=z._filterBlockedApps(z.primaryApps);z.secondaryApps=z._filterBlockedApps(z.secondaryApps);for(var u in z._newAppDictionary)z._newAppDictionary[u].canAccess&&(z._newAppDictionary[u].isNew=!0,z._appDictionary[u]=z._newAppDictionary[u],z.primaryApps.push(z._newAppDictionary[u]));z._minNumberOfAppsToSave=z.primaryApps.concat(z.secondaryApps).filter(function(t){return t.canAccess}).length;
return y.resolve(z._getResponseObject())});z.primaryApps=x[0].slice().sort(function(u,t){return u.label<t.label?-1:1});z.primaryApps=z._filterBlockedApps(z.primaryApps);z.secondaryApps=[];z._minNumberOfAppsToSave=z.primaryApps.filter(function(u){return u.canAccess}).length;return y.resolve(z._getResponseObject())})};m.prototype._getResponseObject=function(){var q=this.i18n?{text:this.getAppLauncherStrings()}:{};return a.__assign(a.__assign({},q),{primary:this.primaryApps,secondary:this.secondaryApps,
ieVersion:this._browserInUse,highContrast:c["default"]("highcontrast"),displayIntro:this.__displayIntro})};m.prototype.getAppLauncherStrings=function(){return{clear:this._clearText,confirm:this.i18n.gotIt,intro:this.i18n.dragAndDropIntroText,dragAppsHere:this.i18n.dragAppsHere,removed:this.i18n.noLongerAvailable,removedMessage:this.i18n.removedApp,showMore:this.i18n.showMore}};m.prototype._getBlockedApps=function(){var q=this;return k["default"]({blockedApps:g["default"].getBlockedApps(),blockableApps:g["default"].getBlockableApps()}).then(function(v){if(!v.blockableApps||
!v.blockableApps.length)return[];var B=v.blockableApps||[];v=v.blockedApps||[];q._blockedApps=[];v.forEach(function(w){var z=B.filter(function(x){return x.clientid===w})[0];z&&q._blockedApps.push(z)})})};m.prototype._getLicensedApps=function(q,v){for(var B=this,w,z,x={},y={},u=this._getAppExceptions(),t=this._getExcludedProvisionedListings(),C=[],E=new h["default"],F=this.userApps.apps.length,G=function(J){var S=H.userApps.apps[J];J=S.itemId||S.title;var P=!0,Q=null===(w=H._blockedApps)||void 0===
w?void 0:w.some(function(M){return S.itemId&&S.itemId===M.itemid||S.title&&S.title===M.title});x[J]=1;y[J]=S;if(Q||f["default"].isArcGISEnterpriseOnKubernetes()&&!1===S.supportsKubernetes||u[S.title]&&!u[S.title].hasAccess(S.title))return"continue";if(!(S.privileges&&0!==S.privileges.length||S.isLicensed)||H._portalUser.userLicenseTypeId&&"storytellerut"===H._portalUser.userLicenseTypeId.toLowerCase()&&S.label&&"storymaps"===S.label.toLowerCase())return y[J].canAccess=!0,C.push(H._modifySystemAppForView(S,
J)),"continue";if(0<(null===(z=S.privileges)||void 0===z?void 0:z.length)&&H._portalUser.privileges){for(Q=0;Q<S.privileges.length;Q++)if(0>H._portalUser.privileges.indexOf(S.privileges[Q])){P=!1;break}if(!S.isLicensed&&P)return y[J].canAccess=!0,C.push(H._modifySystemAppForView(S,J)),"continue"}if(S.isLicensed&&P)for(P=0;P<q.length;P++)if(J===q[P].itemId||J===q[P].title){y[J].canAccess=!0;C.push(H._modifySystemAppForView(S,J));break}},H=this,L=0;L<F;L++)G(L);q.forEach(function(J){"Web Mapping Application"===
J.type&&!t[J.clientId]&&!x[J.itemId]&&J.url&&J.title&&!x[J.title]&&0>J.typeKeywords.indexOf("hideFromAppSwitcher")&&(J=B._modifyPartnerAppForView(J),y[J.itemId]=J,C.push(J))});return E.resolve([this.approvedApps.map(function(J){var S=a.__assign(a.__assign({},J.appProperties),{itemId:J.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!v});y[J.itemId]=S;return B._modifyWebAppForView(S)}).concat(C),y])};m.prototype._getApprovedApps=function(q){return this.requestWithAuth(b["default"].restBaseUrl.replace("http://",
"https://")+"portals/"+this._portalUser.orgId+"/approvedApps",{f:"json",returnAllApps:q})};m.prototype._populateAppIdentifiers=function(q,v,B){var w=this;(B=Object.keys(this._appDictionary).map(function(z){return w._appDictionary[z]}).filter(function(z){return z.itemId===v.uid||z.title===v.uid}).shift())&&!this._appDictionary[v.uid]&&(v.uid=B.itemId||B.title);if(null===B||void 0===B?0:B.hasBeenPopulated)return q;B?((v.hasChanged||B.hasChanged||!B.canAccess&&!B.ignoreNoAccess)&&this._isAdmin()&&(v.hasChanged||
v.ignoreNoAccess||(this.__saveOnLoad=!0),this._appDictionary[v.uid].hasChanged=!0,this._appDictionary[v.uid].ignoreNoAccess=v.ignoreNoAccess),v.isNew&&(this._appDictionary[v.uid].isNew=!0),delete this._newAppDictionary[v.uid]):(B=v,B.canAccess=!1,B.itemId=v.uid,this._appDictionary[v.uid]=B);this._appDictionary[v.uid].hasBeenPopulated=!0;q.push(B);return q};m.prototype.populateDataIdAttributes=function(q,v,B,w){var z=this;return q.map(function(x,y){var u=z._appDictionary[x],t={label:u.label,uid:x};
u.isNew&&(t.isNew=!0);u.hasChanged&&!u.ignoreNoAccess&&(t.hasChanged=!0);v&&x===v&&(q[y-1]===x&&(z.__duplicateValueIndex=y),w?(z._appDictionary[x][B]=w,t[B]=w):(delete z._appDictionary[x][B],delete t[B]));u.canAccess&&u.ignoreNoAccess&&delete t.ignoreNoAccess;return t})};m.prototype._getImgSrcForWebMappingApp=function(q){return q.icon?b["default"].restBaseUrl+"portals/self/resources/"+q.icon+"?token\x3d"+this.userToken:"https://"+this._self.portalHostname+"/sharing/rest/content/items/"+q.itemId+"/resources/"+
q.appSwitcher.image+"?token\x3d"+this.userToken};m.prototype._modifySystemAppForView=function(q,v){var B;q.image?q.image=""+this.imgDir+q.image:q.placeHolderIcon=this.imgDir+"svg-app-icon.svg";0===(null===(B=q.url)||void 0===B?void 0:B.indexOf("../"))&&(q.url=location.protocol+"//"+(this._portal.urlKey?this._portal.urlKey+"."+this._portal.customBaseUrl:this._self.portalHostname)+q.url.substring(2,q.url.length));delete q.isLicensed;delete q.privileges;q.itemId=v;return q};m.prototype._modifyWebAppForView=
function(q){var v,B;(null===(v=q.appSwitcher)||void 0===v?0:v.image)||q.icon?q.image=this._getImgSrcForWebMappingApp(q):q.placeHolderIcon=this.imgDir+"svg-app-circle.svg";q.abbr=(null===(B=q.appSwitcher)||void 0===B?void 0:B.abbr)||q.abbreviation;delete q.abbreviation;delete q.appSwitcher;delete q.approvedApp;delete q.webMappingApp;return q};m.prototype._modifyPartnerAppForView=function(q){var v,B,w;q.appSwitcher=null===(v=q.properties)||void 0===v?void 0:v.appSwitcher;v=(null===(B=q.appSwitcher)||
void 0===B?void 0:B.image)||q.icon;return{abbr:(null===(w=q.appSwitcher)||void 0===w?void 0:w.abbr)||q.abbreviation,itemId:q.itemId,canAccess:!0,webMappingApp:!0,image:v?this._getImgSrcForWebMappingApp(q):null,label:q.title||q.label,url:q.url,placeHolderIcon:q.placeHolderIcon||this.imgDir+"svg-app-circle.svg"}};m.prototype._saveAppOrderToUserProperties=function(q,v){this.userProperties.appLauncher||(this.userProperties.appLauncher={});if(JSON.stringify(this.userProperties.appLauncher.primary)!==JSON.stringify(q)||
JSON.stringify(this.userProperties.appLauncher.secondary)!==JSON.stringify(v))return this.userProperties.appLauncher.primary=q,this.userProperties.appLauncher.secondary=v,this._updateUserProperties(this.userProperties)};m.prototype._getUserProperties=function(){var q=new h["default"];return this._userProperties?(this._userProperties.properties||(this._userProperties={properties:this._userProperties}),q.resolve(this._userProperties)):this.requestWithAuth(b["default"].restBaseUrl+"community/users/"+
this._portalUser.username+"/properties",{f:"json"})};m.prototype._getMarketPlaceProvisionedListings=function(q){var v,B=new h["default"];return!q&&(null===(v=b["default"].userInfo)||void 0===v?0:v.provisionedListings)?(B.resolve(b["default"].userInfo.provisionedListings),B):this.fetchAllResources(this._portal.portalUrl+"community/users/"+this._portalUser.username+"/provisionedListings",{returnAppClientIds:!0,returnAllProvisions:!0},"provisionedListings")};m.prototype._updateUserProperties=function(q){var v=
b["default"].restBaseUrl+"community/users/"+this._portalUser.username+"/setProperties",B=this._portalUser?{token:this.userToken}:{};q=a.__assign({f:"json",properties:JSON.stringify(q)},B);return l["default"]({url:v,content:q},{usePost:!0})};m.prototype._getExcludedProvisionedListings=function(){var q={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1};this._self.isPortal&&(q.arcgisonline=
1);return q};m.prototype._getAppExceptions=function(){var q=this;return{"Open Data":{hasAccess:this._userHasAccessToOpenData.bind(this)},AppStudio:{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"ArcGIS Velocity":{hasAccess:this._userHasAccessToAnalyticsForIoT.bind(this)},"ArcGIS Hub":{hasAccess:this._hasLicense.bind(this,"HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:this._userHasAccessToSites.bind(this)},"ArcGIS Experience Builder":{hasAccess:function(v){return q._isInPortalConfig(v)}},
"ArcGIS StoryMaps":{hasAccess:function(v){return q._isInPortalConfig(v)}},"ArcGIS QuickCapture Web Designer":{hasAccess:function(v){return q._isInPortalConfig(v)&&q._hasLicense("arcgisWebApps")}},"ArcGIS Collector":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Field Maps":{hasAccess:this._userHasAccessToCollectorWeb.bind(this)},"ArcGIS Dashboards":{hasAccess:function(v){return b["default"].showCreateDashboard&&q._isInPortalConfig(v)&&q._hasLicense("dashboards")}},"ArcGIS Solutions":{hasAccess:function(){return!q._self.isPortal||
b["default"].solutionsEnabled}},"ArcGIS Workforce":{hasAccess:function(v){return!q._self.isPortal||q._isInPortalConfig(v)}},"Map Viewer":{hasAccess:function(v){return q._userHasAccessToMapViewer()&&q._isInPortalConfig("ArcGIS Map Viewer")}},"Map Viewer Classic":{hasAccess:function(v){return q._hasLicense("arcgisWebApps")&&q._isInPortalConfig("ArcGIS Map Viewer Classic")}},"Operations Dashboard for ArcGIS":{hasAccess:function(){return q._hasLicense("opsdashboard")&&q._isInPortalConfig("ArcGIS Dashboards Classic")}},
"ArcGIS Dashboards Classic":{hasAccess:function(v){return q._hasLicense("opsdashboard")&&q._isInPortalConfig(v)}},"Ortho Maker":{hasAccess:this._userHasAccessToOrthoMaker.bind(this)},Notebook:{hasAccess:this._hasAccessToNotebooks.bind(this)},"Scene Viewer":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},"Story Maps":{hasAccess:this._hasLicense.bind(this,"arcgisWebApps")},Survey123:{hasAccess:this._hasLicense.bind(this,"survey123")},"Track Viewer":{hasAccess:this._userHasAccessToTrackViewer.bind(this)}}};
m.prototype._hasAccessToNotebooks=function(q){return this._notebookServerConfigured()&&this._isInPortalConfig(q)&&this._canCreateNotebooks()};m.prototype._notebookServerConfigured=function(){return this._self.isPortal?b["default"].notebookServerEnabled&&this._self.supportsHostedNotebooks:b["default"].notebookServerEnabled};m.prototype._canCreateNotebooks=function(){return(this._portalUser.privileges||[]).length?this._portalUser.privileges.some(function(q){return"premium:publisher:createNotebooks"===
q}):!1};m.prototype._isInPortalConfig=function(q){return!this._self.isPortal||b["default"].showInAppLauncher&&-1!==b["default"].showInAppLauncher.indexOf(q)};m.prototype._userHasAccessToMapViewer=function(){var q=this._self.isPortal&&this._self.portalProperties&&!1===this._self.portalProperties.newMapViewerEnabled;return b["default"].newMapViewerEnabled&&!q&&this._hasLicense("arcgisWebApps")};m.prototype._userHasAccessToOpenData=function(){var q;return(null===(q=this._self)||void 0===q?0:q.portalProperties)&&
(!this._self.portalProperties.openData||this._self.portalProperties.openData&&!this._self.portalProperties.openData.enabled)?!1:this._hasLicense("HubforArcGIS")};m.prototype._userHasAccessToAnalyticsForIoT=function(){var q=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],v=(this._portalUser.privileges||[]).some(function(w){return-1<q.indexOf(w)}),B=this._hasLicense("velocity");return v&&B};m.prototype._userHasAccessToSites=function(q){return this._isInPortalConfig(q)&&
this._hasLicense("HubforArcGIS")};m.prototype._userHasAccessToCollectorWeb=function(q){return this._isInPortalConfig(q)};m.prototype._userHasAccessToOrthoMaker=function(){var q,v;return(null===(v=null===(q=this._self)||void 0===q?void 0:q.helperServices)||void 0===v?void 0:v.rasterAnalytics)&&this._self.helperServices.orthoMapping&&this._isInPortalConfig("Ortho Maker")};m.prototype._userHasAccessToTrackViewer=function(){var q,v;return(null===(v=null===(q=this._self)||void 0===q?void 0:q.helperServices)||
void 0===v?void 0:v.locationTracking)&&b["default"].trackViewerEnabled&&this._isInPortalConfig("Track Viewer")};m.prototype._hasLicense=function(q){var v;return(null===(v=b["default"].userInfo)||void 0===v?0:v.isLicensed)?b["default"].userInfo.isLicensed(q):!0};m.prototype._getAgoApp=function(){return{image:"arcgis-online.png",label:"ArcGIS Online",title:"ArcGIS Online",url:this.userProperties.landingPage?""+b["default"].baseUrl+this.userProperties.landingPage.url:this._portalUser.isOrgAdmin?"organization.html":
"index.html"}};m.prototype._getOriginOfUrl=function(q){q=window.location;return q.protocol+"//"+q.hostname+(q.port?":"+q.port:"")};m.prototype._getNewAppIconFromAppIdAndProperties=function(q,v){if(!this._appDictionary[q]){var B=a.__assign(a.__assign({},JSON.parse(v)),{itemId:q,webMappingApp:!0,approvedApp:!0,canAccess:!0,isNew:!0});return this._appDictionary[q]=B}};m.prototype._queryAppItemsForChanges=function(q,v){var B=this,w=new h["default"],z=b["default"].restBaseUrl+"search?";if(!v||!q||!q.length)return w.resolve({success:!0});
z=z+"f\x3djson\x26num\x3d100\x26q\x3d id:("+(q.map(function(x){return'"'+x.itemId+'"'}).join(" OR ")+")");return this.requestWithAuth(z,{f:"json"}).then(function(x){var y;0<(null===(y=x.results)||void 0===y?void 0:y.length)&&x.results.forEach(function(u){var t=B._appDictionary[u.id];t.canAccess=1;t.hasChanged=t.url!==u.url?u.url:0});return w.resolve({success:!0})})};m.prototype._getAppsFromLocalStorage=function(){if(!this.__localStorageIsAvailable)return!1;var q=localStorage.getItem("APSW-primary"),
v=localStorage.getItem("APSW-secondary");return q?{primaryApps:q,secondaryApps:v}:!1};m.prototype._saveAppsToLocalStorage=function(q,v){this.__localStorageIsAvailable&&(localStorage.setItem("APSW-primary",JSON.stringify(q)),localStorage.setItem("APSW-secondary",JSON.stringify(v)))};m.prototype._cookieForQueryingItemsExists=function(){var q=e["default"].getCookie("APSW-query",!0);if((null===q||void 0===q?void 0:q.expires)>(new Date).setHours((new Date).getHours()))return!0;q={expires:(new Date).setHours((new Date).getHours()+
5)};e["default"].setCookie("APSW-query",q,{path:"/",domain:document.domain,sameSite:"Strict"},!0);return!1};m.prototype.requestWithAuth=function(q,v){v=this.userToken?a.__assign(a.__assign({},v),{token:this.userToken}):v;return l["default"]({url:q,content:v})};m.prototype.fetchAllResources=function(q,v,B){var w=new h["default"],z=1,x=[],y,u,t,C,E={f:"json",token:this.userToken};v=v?a.__assign(a.__assign({},v),E):E;B=B||"results";v.start=z;v.num||(v.num=100);l["default"]({url:q,content:v}).then(function(F){if(F&&
F[B]){x=x.concat(F[B]);z=F.nextStart;y=F.total-x.length;u=Math.ceil(y/100);t=[];for(C=0;C<u;C++)v.start=z+100*C,t.push(f["default"].request({url:q,content:v}));k["default"](t).then(function(G){G.forEach(function(H){x=x.concat(H[B])});w.resolve(x)},function(G){w.reject(G)})}else w.resolve(x)},function(F){w.reject(F)});return w};m.prototype._isAdmin=function(){return this._portalUser.role&&("org_admin"===this._portalUser.role||"account_admin"===this._portalUser.role)};m.prototype.portalQueryItems=function(q,
v){var B={num:v||10,start:0,sortField:"title",sortOrder:"asc",f:"json",q:q},w="";w=this._portal.urlKey?"https://"+this._portal.urlKey+"."+this._portal.customBaseUrl+"/sharing/rest/search":this._portal.url+"search";return this.requestWithAuth(w,B)};m.prototype.useSSL=function(q,v){if(this._self.isPortal){var B=this.getLocation(v);if(-1<this._self.portalHostname.toLowerCase().indexOf(B.hostname.toLowerCase())&&B.port&&"80"!==B.port&&"443"!==B.port){var w=B.pathname;w=0===w.indexOf("/")?w:"/"+w;return this._self.allSSL||
-1<q.indexOf("https:")?"https://"+B.hostname+(this._self.httpsPort&&"443"!==this._self.httpsPort?":"+this._self.httpsPort:"")+w+B.search:"http://"+B.hostname+(this._self.httpPort&&"80"!==this._self.httpPort?":"+this._self.httpPort:"")+w+B.search}}return-1!==q.indexOf("https:")||this._self.allSSL?v.replace("http:","https:"):v};m.prototype.getLocation=function(q){var v=document.createElement("a");v.href=q;return{protocol:v.protocol,hostname:v.hostname,port:v.port,pathname:v.pathname,search:v.search,
hash:v.hash,host:v.host}};m.prototype.formatUrlWithToken=function(q){var v=this.userToken;return-1!==q.indexOf("null")?null:this.useSSL(window.location.protocol,v?""+q+(-1!==q.indexOf("?")?"\x26":"?")+"token\x3d"+v:q)};m.prototype._checkIfLocalStorageIsAvailable=function(){if("object"===typeof localStorage)try{return localStorage.setItem("testLocalStorage","1"),localStorage.removeItem("testLocalStorage"),!0}catch(q){return!1}};m.prototype._getBrowserInUse=function(){return 10>=c["default"]("ie")||
6<c["default"]("trident")?"ie11":c["default"]("edge")?"edge":null};return m}()})},"dojo/debounce":function(){define([],function(){return function(D,A){var a;return function(){a&&clearTimeout(a);var b=this,g=arguments;a=setTimeout(function(){D.apply(b,g)},A)}}})},"arcgisonline/sharing/dijit/SiteFooter":function(){define("require exports tslib ../../esriGeowConfig ../../pages/utils/dom ../../pages/utils/organization ../util ../geow/Account ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/dom dojo/dom-construct dojo/i18n!../../nls/arcgisonline dojo/string dojo/topic dojo/text!./templates/SiteFooter.html dojo/_base/lang esri/lang".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);return function(){function z(x,y){this.templateString=v["default"];this.isTroubleshootPage=
this.isSignInPage=!1}z.prototype.postMixInProperties=function(){this.i18n=B["default"].mixin({},r["default"].common);B["default"].mixin(this.i18n,r["default"].siteFooter);B["default"].mixin(this.i18n,r["default"].supportPage.helpLabel)};z.prototype.postCreate=function(){var x=window.location.pathname.toLowerCase();this.isSignInPage=-1!==x.indexOf(b["default"].signin);this.isTroubleshootPage=-1!==x.indexOf("troubleshoot.html");this.addEventListeners()};z.prototype.startup=function(){this._loadLinks()};
z.prototype.refresh=function(){l["default"].destroy(this.id+"_links");l["default"].create("span",{id:this.id+"_links",className:"esriItemLinks"},this.domNode);this._loadLinks()};z.prototype.addEventListeners=function(){this.own(q["default"].subscribe("contact-us-link/update",this.handleContactUsLinkUpdate.bind(this)))};z.prototype.handleContactUsLinkUpdate=function(x){var y=c["default"].byId(this.id+"_links"),u=window.location.href,t=!1,C=null;-1<u.indexOf("viewer.html")&&!d["default"].isMobile()&&
-1===u.indexOf("returnUrl")&&(t=!0);C=t?l["default"].create("span",{innerHTML:"\x26nbsp;. "}):l["default"].create("span",{innerHTML:""});w["default"].isDefined(x)||(x={visible:!1,url:""});(u=c["default"].byId(this.id+"_customContactUs"))?(g["default"].showHide(u,x.visible),u.href=x.url):(u=l["default"].create("a",{href:x.url,innerHTML:this.i18n.customContactUs,id:this.id+"_customContactUs","class":x.visible?"footer__contact-us":"footer__contact-us hide"}),x=c["default"].byId(this.id+"_contactEsri"),
w["default"].isDefined(x)?(l["default"].place(u,x,"after"),l["default"].place(C,x,"after")):(0<b["default"].footerLinks.length&&l["default"].place(C,y,"last"),l["default"].place(u,y,"last")))};z.prototype._getTitle=function(x){return-1<(null===x||void 0===x?void 0:x.indexOf("${"))&&-1<x.indexOf("}")?m["default"].substitute(x,{i18n:this.i18n}):x};z.prototype._loadLinks=function(){var x=this;f["default"].getSelf(function(y){var u,t,C,E=e["default"].getUser(),F=y.isPortal,G=c["default"].byId(x.id+"_links"),
H=window.location.href,L=!1,J=null;-1<H.indexOf("?useExisting\x3d1")&&(H=H.substring(0,H.length-14));-1<H.indexOf("viewer.html")&&!d["default"].isMobile()&&-1===H.indexOf("returnUrl")&&(L=!0);(b["default"].footerLinks||[]).forEach(function(P){var Q="${i18n.legal}"===(null===P||void 0===P?void 0:P.title),M=!!(Q&&w["default"].isDefined(E)&&w["default"].isDefined(E.accountId)),N="${i18n.help}"===(null===P||void 0===P?void 0:P.title)||"support.html"===(null===P||void 0===P?void 0:P.url),K=!(N&&!w["default"].isDefined(E)&&
w["default"].isDefined(y.access)&&"public"===y.access&&(F||!F&&w["default"].isDefined(y.customBaseUrl)));M=!Q&&!N||Q&&!M||N&&!K;J&&M&&l["default"].place(J,G,"last");Q=x._getTitle(P.title);if(P.url){-1===P.url.indexOf("http")&&-1===P.url.indexOf("mailto:")&&L&&(P.url="support.html"===P.url?y.helpBase||b["default"].baseUrl+P.url:b["default"].baseUrl+P.url);if("${i18n.help}"===P.title||"support.html"===P.url)P.url=y.helpBase;P=l["default"].create("a",{href:P.url,target:"_blank",innerHTML:Q});M&&l["default"].place(P,
G,"last")}else F&&"contactUs"===P.type?(M=b["default"].portalName||"ArcGIS.com",N=escape(H),P="mailto:"+P.email,P=l["default"].create("a",{id:x.id+"_contactEsri",href:P+('?subject\x3d"A comment about '+M+'"\x26body\x3d"I have the following comment about the ')+(M+" Web site. %0AReferring page: "+N+' %0A %0A(Please provide as much detail as possible. Note: Contact Us is not meant for obtaining technical support or general product information.)"'),innerHTML:Q}),l["default"].place(P,G,"last")):"reportAbuse"===
P.type&&(N=escape(H),P="mailto:"+P.email+'?subject\x3d"Concerns about an item"',P=l["default"].create("a",{href:P+('\x26body\x3d"I have concerns about the following. %0AReferring page: '+N+" %0A %0A(Please describe your concerns. If you have concerns about a particular item, it's best to click the 'Report Abuse' link while viewing the item description. Doing so will include the URL to the specific item in this e-mail.)\""),innerHTML:Q}),l["default"].place(P,G,"last"));J=L?l["default"].create("span",
{innerHTML:"\x26nbsp;. "}):l["default"].create("span",{innerHTML:""})});var S=null!==(C=null===(t=null===(u=y.portalProperties)||void 0===u?void 0:u.links)||void 0===t?void 0:t.contactUs)&&void 0!==C?C:{visible:!1,url:""};(u=c["default"].byId(x.id+"_customContactUs"))?(g["default"].showHide(u,S.visible),u.href=S.url):(u=l["default"].create("a",{href:S.url,innerHTML:x.i18n.customContactUs,id:x.id+"_customContactUs","class":S.visible?"footer__contact-us":"footer__contact-us hide"}),S=c["default"].byId(x.id+
"_contactEsri"),w["default"].isDefined(S)?(l["default"].place(u,S,"after"),l["default"].place(J,S,"after")):(0<b["default"].footerLinks.length&&l["default"].place(J,G,"last"),l["default"].place(u,G,"last")))})};return z=a.__decorate([n["default"](k["default"],h["default"])],z)}()})},"arcgisonline/sharing/dijit/SiteFooterMap":function(){define("require exports tslib ./SiteFooter ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dojo/text!./templates/SiteFooterMap.html".split(" "),
function(D,A,a,b,g,d,e,f){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);return function(){function n(){this.templateString=f["default"]}return n=a.__decorate([g["default"](e["default"],d["default"],b["default"])],n)}()})},"arcgisonline/sharing/dijit/SignUpInternal":function(){define("require exports tslib ../../esriGeowConfig ../../pages/pageUtil ../../pages/dijit/PasswordStrength ../../pages/portal/Portal ../../pages/utils/dom ../../pages/utils/validation ../geow/Account ./dialog/GeneralDlg ../geow/Geow ./Role ../util ../../tsutils/declareDecorator dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/kernel dojo/string dojo/i18n!../../nls/arcgisonline dojo/io-query dojo/_base/lang dojo/on dojo/text!./templates/SignUpInternal.html dojo/topic esri/config esri/lang esri/request".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E,F,G,H,L,J){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);z=a.__importDefault(z);x=a.__importDefault(x);y=a.__importDefault(y);
u=a.__importDefault(u);t=a.__importDefault(t);C=a.__importDefault(C);E=a.__importDefault(E);F=a.__importDefault(F);G=a.__importDefault(G);H=a.__importDefault(H);L=a.__importDefault(L);J=a.__importDefault(J);return function(){function S(P,Q){this.templateString=F["default"];this.widgetsInTemplate=!0;this.i18n=a.__assign(a.__assign(a.__assign({},u["default"].common),u["default"].signUpInternalWidget),{securityQuestions:u["default"].securityQuestions,passwordTooWeak:u["default"].myOrganization.inviteMembers.passwordTooWeak,
usernameTooShort:u["default"].organizationInvite.step2Create.invalid.usernameTooShort,usernameTooLong:u["default"].organizationInvite.step2Create.invalid.usernameTooLong,usernameInvalidChars:u["default"].organizationInvite.step2Create.invalid.usernameInvalidChars,usernameStartEndChars:u["default"].organizationInvite.step2Create.invalid.usernameStartEndChars});this.redirectUrl=b["default"].baseUrl.replace("https:","http:")+"index.html";this.orgRedirectUrl=b["default"].baseUrl.replace("https:","http:")+
"organization.html";this.isValidUsername=!1;this.accountMode="arcgis"}S.prototype.postCreate=function(){this.inherited(arguments);this.fetchPasswordPolicy()};S.prototype.startup=function(){var P=this;this.inherited(arguments);h["default"].getSelf(function(Q){P._portal=new e["default"]({url:b["default"].restBaseUrl,self:C["default"].clone(Q)});P._portal.on("load",function(){P.setupPasswordStrength()});H["default"].defaults.io.corsEnabledServers.push(b["default"].DEPLOY_ROOT);H["default"].defaults.io.corsEnabledServers.push("http://"+
location.host);H["default"].defaults.io.corsEnabledServers.push("https://"+location.host);H["default"].defaults.io.proxyUrl=b["default"].proxyUrl;C["default"].mixin(P,t["default"].queryToObject(window.location.search.slice(1)));P._svcUrl=b["default"].restBaseUrl+(b["default"].restBaseUrl.lastIndexOf("/")===b["default"].restBaseUrl.length-1?"":"/");P._communityUri=P._svcUrl+"community/";w["default"].set("pagetitle","innerHTML",P.i18n.signUpInternalTitle);P.setupQuestions();P.loadConnections();P.checkInvitation();
setTimeout(function(){P._firstname.focus()},50);G["default"].subscribe("registerUser",P.registerUser.bind(P));P.adjustNameRows()})};S.prototype.loadConnections=function(){this.own(E["default"](this._firstname,"change",this.validFirstName.bind(this)),E["default"](this._lastname,"change",this.validLastName.bind(this)),E["default"](this._email,"change",this.validEmail.bind(this)),E["default"](this._confirmEmail,"change",this.validConfirmEmail.bind(this)),E["default"](this._username,"change",this.usernameChange.bind(this)),
E["default"](this._pwd,"change",this.validPassword.bind(this)),E["default"](this._pwd,"keyup",this.validPassword.bind(this)),E["default"](this._verifyPwd,"change",this.validVerifyPassword.bind(this)),E["default"](this._identityQuestion,"change",this.identityQuestionChange.bind(this)),E["default"](this._identityAnswer,"change",this.validIdentityAnswer.bind(this)),E["default"](this._form,"submit",this.initiateSignUp.bind(this)),E["default"](this._cancelBtn,"click",this.cancel.bind(this)))};S.prototype.adjustNameRows=
function(){"ja"===x["default"].locale&&z["default"].place("first-name-block","last-name-block","after")};S.prototype.checkInvitation=function(){var P=this;this.invitation&&this.fetchInvitation().then(function(Q){P.invitationOrgName=Q.account.name},this.fetchInvitationError.bind(this))};S.prototype.setupPasswordStrength=function(){this._strengthMeter=new d["default"]({baseClass:"leader-half",portal:this._portal},this.domNode.querySelector(".js-strength-meter"));this._strengthMeter.update(this._pwd.value)};
S.prototype.setupQuestions=function(){var P=this;this.identityQuestions=[{id:0,name:this.i18n.securityQLabel},{id:1,name:this.i18n.securityQuestions[1]},{id:2,name:this.i18n.securityQuestions[2]},{id:3,name:this.i18n.securityQuestions[3]},{id:4,name:this.i18n.securityQuestions[4]},{id:5,name:this.i18n.securityQuestions[5]},{id:6,name:this.i18n.securityQuestions[6]},{id:7,name:this.i18n.securityQuestions[7]},{id:8,name:this.i18n.securityQuestions[8]},{id:9,name:this.i18n.securityQuestions[9]},{id:10,
name:this.i18n.securityQuestions[10]},{id:11,name:this.i18n.securityQuestions[11]},{id:12,name:this.i18n.securityQuestions[12]},{id:13,name:this.i18n.securityQuestions[13]},{id:14,name:this.i18n.securityQuestions[14]}];this.identityQuestions.forEach(function(Q){z["default"].create("option",{value:Q.id,innerHTML:Q.name},P._identityQuestion)})};S.prototype.fetchPasswordPolicy=function(){var P=this,Q=r["default"].getSecureUrl(b["default"].restBaseUrl)+"portals/self/securityPolicy/passwordPolicy";r["default"].request({url:Q}).then(function(M){P._passwordPolicy=
!M||M.code||M.messageCode?null:M})};S.prototype.registerUser=function(P){var Q=this;P=y["default"].trim(this._firstname.value);var M=y["default"].trim(this._lastname.value),N=y["default"].trim(this._email.value),K=r["default"].stripHTML(y["default"].trim(this._username.value)),X=y["default"].trim(this._pwd.value),da=y["default"].trim(this._identityAnswer.value),Y={fullname:"ja"===x["default"].locale?M+" "+P:P+" "+M,firstname:P,lastname:M,email:N,username:K,password:X,securityQuestionIdx:this._identityQuestionID,
securityAnswer:da,invitationId:void 0,provider:void 0};this.invitation&&(Y.invitationId=this.invitation,Y.provider=this.accountMode);this.signUp(Y).then(function(aa){null!=aa.error&&""!==aa.error?(f["default"].disableNode(Q._createAccountBtn,!1),w["default"].set(Q._createAccountBtn,"innerHTML",Q.i18n.createAcc),aa.error.messageCode&&"COM_1054"===aa.error.messageCode?g["default"].createSpecifiedDialog(k["default"]).show({title:Q.i18n.errorTitle,message:Q.i18n.error.maxUsers}):Q.handleError(aa)):Q.invitation?
c["default"].signInHandler(Y.username,Q.acceptInvitation.bind(Q,Y),Q.signInError.bind(Q),aa):c["default"].signInHandler(Y.username,Q.signIn.bind(Q),Q.signInError.bind(Q),aa)},function(){return Q.signUpError.bind(Q)})};S.prototype.signUp=function(P){P=a.__assign({},P);var Q=b["default"].restBaseUrl+"community/signup",M=document.domain,N=M.split(".");1<N.length&&(M=N[N.length-2]+"."+N[N.length-1]);P.referer=M;P.f="json";return J["default"]({url:Q,content:P,headers:{"X-Esri-Auth-Client-Id":"arcgisonline",
"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")}},{disableIdentityLookup:!0,usePost:!0})};S.prototype.signIn=function(){b["default"].self=null;h["default"].getSelf(this.routeUser.bind(this))};S.prototype.routeUser=function(P){var Q=r["default"].getUser(),M=new l["default"]({portalUser:P.user||{}}),N=t["default"].queryToObject(window.location.search.slice(1)).returnUrl;if(!P||P.code||P.message)null!==N?window.location=N:(Q=r["default"].getHttpUrl()+"user.html?newUser\x3dtrue",window.location=
r["default"].getSecureUrl(Q));else{P=P.allSSL;var K=r["default"].usePortalSSL();this.redirectUrl=r["default"].getHttpUrl()+"index.html";this.orgRedirectUrl=r["default"].getHttpUrl()+"organization.html";N?(K=-1<N.indexOf("https:"),window.location=P||K?r["default"].getSecureUrl(N):N):"account_admin"===Q.role&&(!b["default"].self.restrictOrganizationPageToAdmin&&M.canViewOrgUsers()||b["default"].self.restrictOrganizationPageToAdmin&&M.isAdmin())?window.location=P||K?r["default"].getSecureUrl(this.orgRedirectUrl):
this.orgRedirectUrl:window.location=P||K?r["default"].getSecureUrl(this.redirectUrl):this.redirectUrl}};S.prototype.acceptInvitation=function(P){var Q=this;h["default"].acceptInvitation(this.invitation,function(){Q.signIn()},this.acceptFail.bind(this))};S.prototype.initiateSignUp=function(P){var Q=this;P&&P.preventDefault();this.validates().then(function(M){M&&(f["default"].disableNode(Q._createAccountBtn,!0),w["default"].set(Q._createAccountBtn,"innerHTML",Q.i18n.creatingAcc),Q.registerUser(!0))})};
S.prototype.cancel=function(){var P=""+b["default"].baseUrl.replace("http:","https:")+b["default"].signin;this.invitation&&(P+="?invitation\x3d"+this.invitation);window.location.href=P};S.prototype.fetchInvitationError=function(P){if((null===P||void 0===P?0:P.code)&&P.message&&403===P.code){P="\x3cp\x3e"+this.i18n.emailInvitation+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e";var Q=g["default"].createSpecifiedDialog(k["default"]);Q.onOkClick=function(){Q.hide();window.location.href=""+
b["default"].baseUrl.replace("http:","https:")+b["default"].signin};Q.show({title:this.i18n.notice,message:P})}else(null===P||void 0===P?0:P.code)&&P.message&&400===P.code?(P="\x3cp\x3e"+this.i18n.invitationUsedMsg+"\x3c/p\x3e\x3cp\x3e"+this.i18n.clickOkSignIn+"\x3c/p\x3e",Q=g["default"].createSpecifiedDialog(k["default"]),Q.onOkClick=function(){Q.hide();window.location.href=""+r["default"].getSecureUrl()+b["default"].signin},Q.show({title:this.i18n.notice,message:P})):(null===P||void 0===P?void 0:
P.id)===this.invitation?this.invitationOrgName=P.account.name:this.invitation=null};S.prototype.acceptFail=function(){var P=this,Q=g["default"].createSpecifiedDialog(k["default"]);Q.onOkClick=function(){Q.hide();f["default"].disableNode(P._createAccountBtn,!1);w["default"].set(P._createAccountBtn,"innerHTML",P.i18n.createAcc)};Q.show({title:this.i18n.unableToJoin,message:this.i18n.problemJoining})};S.prototype.usernameChange=function(){var P=r["default"].stripHTML(y["default"].trim(this._username.value)),
Q=this.handleCheckUsername.bind(this);h["default"].checkUsernames([r["default"].stripHTML(P)],Q,Q)};S.prototype.identityQuestionChange=function(){var P=this._identityQuestion.value;this._identityQuestionID=P?parseInt(P,10):void 0;this.validIdentityQuestion()};S.prototype.handleCheckUsername=function(P){this.isValidUsername=!1;var Q=r["default"].stripHTML(y["default"].trim(this._username.value));!P||P.code||P.message?P.messageCode&&"DB_0006"===P.messageCode?this.showErrorMessage(this.i18n.error.restrictedCharacters):
Q?this.showErrorMessage(this.i18n.error.checkingUsername):this.isValidUsername=!0:0<(null===P||void 0===P?void 0:P.usernames.length)&&Q===P.usernames[0].suggested&&(this.isValidUsername=!0);this.validUsername()};S.prototype.signUpError=function(P){f["default"].disableNode(this._createAccountBtn,!1);w["default"].set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);var Q=this.i18n.unableCreateAccount,M=this.i18n.contactAdmin;-1<P.message.indexOf("already registered")&&(M=this.i18n.error.emailInUse);
-1<P.message.indexOf("Username '")&&-1<P.message.indexOf("' not available.")&&(M=this.i18n.error.usernameInValid);this.showErrorMessage('\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'+Q+'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e'+M+"\x3c/span\x3e\x3cbr\x3e\x26nbsp;")};S.prototype.signInError=function(){f["default"].disableNode(this._createAccountBtn,!1);w["default"].set(this._createAccountBtn,"innerHTML",this.i18n.createAccount);this.showErrorMessage('\x3cb style\x3d"font-size:1.2em;line-height:30px;"\x3e'+
this.i18n.unableSignAuto+'\x3c/b\x3e\x3cbr\x3e\x3cspan style\x3d"color:#000000;"\x3e'+this.i18n.pleaseTrySignManually+"\x3c/span\x3e\x3cbr\x3e\x26nbsp;")};S.prototype.showErrorMessage=function(P){g["default"].createSpecifiedDialog(k["default"]).show({title:this.i18n.errorTitle,message:P})};S.prototype.usernameContainsAlphaNumeric=function(P){var Q=/^[a-zA-Z0-9@_\.]+$/g;return P&&!!Q.test(P)};S.prototype.usernameValidStartEnd=function(P){var Q=/^([a-zA-Z0-9_][a-zA-Z0-9@_\-\.]+[a-zA-Z0-9_])?$/g;return P&&
Q.test(P)};S.prototype.validFirstName=function(){var P=y["default"].trim(this._firstname.value);n["default"].clearState([this._firstname,this._firstnameError]);if(L["default"].isDefined(P)&&""!==P)return n["default"].setValidState(this._firstname),!0;n["default"].setInvalidState(this._firstname,this._firstnameError,this.i18n.error.firstNameReqd);return!1};S.prototype.validLastName=function(){var P=y["default"].trim(this._lastname.value);n["default"].clearState([this._lastname,this._lastnameError]);
if(L["default"].isDefined(P)&&""!==P)return n["default"].setValidState(this._lastname),!0;n["default"].setInvalidState(this._lastname,this._lastnameError,this.i18n.error.lastNameReqd);return!1};S.prototype.validEmail=function(){var P=y["default"].trim(this._email.value);n["default"].clearState([this._email,this._emailError]);if(L["default"].isDefined(P)&&0!==P.length&&r["default"].isValidEmailAddress(P))return n["default"].setValidState(this._email),!0;n["default"].setInvalidState(this._email,this._emailError,
this.i18n.error.emailReqd);return!1};S.prototype.validConfirmEmail=function(){var P=y["default"].trim(this._email.value),Q=y["default"].trim(this._confirmEmail.value);n["default"].clearState([this._confirmEmail,this._confirmEmailError]);if(L["default"].isDefined(Q)&&0!==Q.length&&r["default"].isValidEmailAddress(Q)){if(P!==Q)return n["default"].setInvalidState(this._confirmEmail,this._confirmEmailError,this.i18n.error.confirmEmailNoMatch),!1;n["default"].setValidState(this._confirmEmail);return!0}n["default"].setInvalidState(this._confirmEmail,
this._confirmEmailError,this.i18n.error.confirmEmailReqd);return!1};S.prototype.validUsername=function(){var P=r["default"].stripHTML(y["default"].trim(this._username.value));n["default"].clearState([this._username,this._usernameError]);if(L["default"].isDefined(P)&&""!==P){if(6>P.length)return n["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameTooShort),!1;if(128<P.length)return n["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameTooLong),
!1;if(this.usernameContainsAlphaNumeric(P)){if(this.usernameValidStartEnd(P)){if(this.isValidUsername)return n["default"].setValidState(this._username),!0;P=y["default"].substitute(this.i18n.error.usernameInUse,{username:P,linkStart:'\x3cspan class\x3d"esriItemLinks"\x3e\x3ca href\x3d"'+r["default"].getSecureUrl(b["default"].baseUrl)+b["default"].signin+window.location.search+'"\x3e',linkEnd:"\x3c/a\x3e\x3c/span\x3e"});n["default"].setInvalidState(this._username,this._usernameError,P);return!1}n["default"].setInvalidState(this._username,
this._usernameError,this.i18n.usernameStartEndChars)}else return n["default"].setInvalidState(this._username,this._usernameError,this.i18n.usernameInvalidChars),!1}else return n["default"].setInvalidState(this._username,this._usernameError,this.i18n.error.userReqd),!1};S.prototype.validPassword=function(){var P=this,Q=r["default"].stripHTML(y["default"].trim(this._username.value)),M=y["default"].trim(this._pwd.value);n["default"].clearState([this._pwd,this._pwdError]);return this._strengthMeter.update(M).then(function(N){if(L["default"].isDefined(M)&&
""!==M){if(P._passwordPolicy){if(!N.isValidStrength)return n["default"].setInvalidState(P._pwd,P._pwdError,P.i18n.passwordTooWeak),!1;if(N.isValid){if(Q.toLowerCase()===M.toLowerCase())return n["default"].setInvalidState(P._pwd,P._pwdError,P.i18n.passwordNotToPolicy),!1;n["default"].setValidState(P._pwd);return!0}if(!1===N.longEnough)return n["default"].setInvalidState(P._pwd,P._pwdError,y["default"].substitute(P.i18n.error.passwordLength,{num:P._passwordPolicy.minLength})),!1;if(!1===N.enoughLetter)return n["default"].setInvalidState(P._pwd,
P._pwdError,y["default"].substitute(P.i18n.error.passwordLetter,{num:P._passwordPolicy.minLetter})),!1;if(!1===N.enoughUpper)return n["default"].setInvalidState(P._pwd,P._pwdError,y["default"].substitute(P.i18n.error.passwordUpper,{num:P._passwordPolicy.minUpper})),!1;if(!1===N.enoughLower)return n["default"].setInvalidState(P._pwd,P._pwdError,y["default"].substitute(P.i18n.error.passwordLower,{num:P._passwordPolicy.minLower})),!1;if(!1===N.enoughDigit)return n["default"].setInvalidState(P._pwd,P._pwdError,
y["default"].substitute(P.i18n.error.passwordDigit,{num:P._passwordPolicy.minDigit})),!1;if(!1===N.enoughOther)return n["default"].setInvalidState(P._pwd,P._pwdError,y["default"].substitute(P.i18n.error.passwordOther,{num:P._passwordPolicy.minOther})),!1;n["default"].setValidState(P._pwd);return!0}if(N.isValidStrength){if(8>M.length||28<M.length)return n["default"].setInvalidState(P._pwd,P._pwdError,P.i18n.error.invalidPassword),!1;if(Q.toLowerCase()===M.toLowerCase())return n["default"].setInvalidState(P._pwd,
P._pwdError,P.i18n.passwordNotToPolicy),!1;n["default"].setValidState(P._pwd);return!0}n["default"].setInvalidState(P._pwd,P._pwdError,P.i18n.passwordTooWeak);return!1}n["default"].setInvalidState(P._pwd,P._pwdError,P.i18n.error.passReqd);return!1})};S.prototype.validVerifyPassword=function(){var P=y["default"].trim(this._pwd.value),Q=y["default"].trim(this._verifyPwd.value);n["default"].clearState([this._verifyPwd,this._verifyPwdError]);if(P!==Q)return n["default"].setInvalidState(this._verifyPwd,
this._verifyPwdError,this.i18n.error.passwordsNotMatch),!1;n["default"].setValidState(this._verifyPwd);return!0};S.prototype.validIdentityQuestion=function(){n["default"].clearState([this._identityQuestion,this._identityQuestionError]);if(!this._identityQuestionID||1>this._identityQuestionID)return n["default"].setInvalidState(this._identityQuestion,this._identityQuestionError,this.i18n.error.questionSelection),!1;n["default"].setValidState(this._identityQuestion);return!0};S.prototype.validIdentityAnswer=
function(){var P=y["default"].trim(this._identityAnswer.value);n["default"].clearState([this._identityAnswer,this._identityAnswerError]);if(L["default"].isDefined(P)&&""!==P){if(60<P.length)return n["default"].setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerTooLong),!1;n["default"].setValidState(this._identityAnswer);return!0}n["default"].setInvalidState(this._identityAnswer,this._identityAnswerError,this.i18n.error.answerIsBlank);return!1};S.prototype.validates=
function(){var P=this,Q=[this.validFirstName(),this.validLastName(),this.validEmail(),this.validConfirmEmail(),this.validUsername(),this.validVerifyPassword(),this.validIdentityQuestion(),this.validIdentityAnswer()].every(function(M){return!0===M});return this.validPassword().then(function(M){(Q=Q&&M)||n["default"].focusFirstInvalidInput(P._form.domNode);return Q})};S.prototype.fetchInvitation=function(){return r["default"].request({url:this._communityUri+"invitations/"+this.invitation})};S.prototype.handleError=
function(P){var Q,M;P=P.error||P||{};P.code=P.code||0;P=this.i18n.errors[P.code]||P;P.details=(null===(Q=P.details)||void 0===Q?0:Q.length)?P.details.filter(function(N){return null!==N}):null;if(null===(M=P.details)||void 0===M?0:M.length)P.details=P.details.join("\x3cbr /\x3e"),P.message=P.message?P.message+"\x3cbr\x3e"+P.details:P.details;P=a.__assign(a.__assign({},this.i18n.errors.error),P);this.showErrorMessage(P.message);return!0};return S=a.__decorate([m["default"](v["default"],q["default"],
B["default"])],S)}()})},"arcgisonline/pages/dijit/PasswordStrength":function(){define("require exports tslib dojo/text!./PasswordStrength/templates/PasswordStrength.html dojo/i18n!../../nls/arcgisonline dojo/Deferred dijit/_TemplatedMixin dijit/_WidgetBase ../utils/icons ../utils/dom ../utils/organization ../../tsutils/declareDecorator".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=
a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);return function(){function l(r,m){this.templateString=b["default"];this.i18n=g["default"];this.icons=n["default"]}l.prototype.postCreate=function(){var r,m,q;this.inherited(arguments);var v=null!==(m=null===(r=this.portal.helpMap)||void 0===r?void 0:r.m)&&void 0!==m?m:{};r=this.portal.helpBase+(null!==(q=v["120001688"])&&void 0!==q?q:"");this._moreInfo.href=r};l.prototype.update=function(r){var m=this,q,v=new d["default"];
(null===(q=this._previousResult)||void 0===q?void 0:q.password)===r?v.resolve(this._previousResult):r?k["default"].checkPasswordStrength(r).then(function(B){var w=B.strength;m._strengthLabel.className="password-strength__label--"+w;m._strengthLabel.textContent=m.i18n.passwordStrengthMeter["score"+w];m._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--"+w;var z=Object.keys(B).every(function(x){var y=B[x];return"strength"===x?1<y:!1!==y});z?h["default"].hideNode(m._moreInfo):
h["default"].showNode(m._moreInfo);m._previousResult=a.__assign({password:r,isValidStrength:1<w,isValid:z},B);v.resolve(m._previousResult)}):(this._strengthLabel.className="",this._strengthLabel.textContent=this.i18n.passwordStrengthMeter.none,this._strengthMeterFill.className="password-strength-meter__fill password-strength-meter__fill--unknown",this._previousResult={password:r,isValid:!1,isValidStrength:!1},v.resolve(this._previousResult));return v};return l=a.__decorate([c["default"](f["default"],
e["default"])],l)}()})},"arcgisonline/pages/portal/Portal":function(){define("require exports tslib ../../esriGeowConfig ./PortalItem ./UserProfiles ../utils/promises ../utils/verified ../components/ManageBlockedApps/blocked-apps-service ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/io-query dojo/Stateful dojo/_base/kernel dojo/_base/lang dojo/promise/all esri/arcgis/Portal esri/lang esri/request esri/IdentityManager ../utils/itemsgroups ../utils/mapViewer".split(" "),function(D,
A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);z=a.__importDefault(z);x=a.__importDefault(x);return function(){function t(C){this.blockedApps=
[];this.blockedAppsTimestamp=-1;this.userProfiles=new d["default"]({portal:this})}t.prototype.postscript=function(){};t.prototype._getSelf=function(C){var E=this,F,G=new c["default"],H=C+"portals/helpmap",L=C+"community/self",J=null===(F=x["default"].findCredential(C))||void 0===F?void 0:F.token;e["default"].eachAlways({selfResult:this.inherited(arguments),helpMapResult:this._hasHelpMap?e["default"].resolve(null):B["default"].PortalUtil.request(H,{culture:m["default"].locale}),communitySelfResult:J?
B["default"].PortalUtil.request(L,{returnUserLicensedItems:!0,token:J}):e["default"].resolve(null)}).then(function(S){var P,Q,M,N,K,X;if(null===(P=S.selfResult)||void 0===P?0:P.error)G.reject(S.selfResult.error);else{P={};if(null===(Q=S.selfResult)||void 0===Q?0:Q.value)if(P=q["default"].mixin(P,S.selfResult.value),!E._hasHelpMap&&(null===(M=S.helpMapResult)||void 0===M?0:M.value)&&(P=q["default"].mixin(P,S.helpMapResult.value)),null===(N=S.communitySelfResult)||void 0===N?0:N.value)P=q["default"].mixin(P,
{communitySelf:S.communitySelfResult.value}),E.canCreateGeoBIM=null===(X=null===(K=E.communitySelf)||void 0===K?void 0:K.userLicensedItems)||void 0===X?void 0:X.find(function(da){var Y;return-1<(null===(Y=null===da||void 0===da?void 0:da.entitlements)||void 0===Y?void 0:Y.indexOf("geobim"))});E._hasHelpMap=E._hasHelpMap||!!P.helpMap;b["default"].self=q["default"].mixin(b["default"].self||{},q["default"].clone(P));G.resolve(P)}});return G};t.prototype.getPortalUser=function(){return this.portalUser};
t.prototype.getEnvironment=function(){var C=this.customBaseUrl;C=null===C||void 0===C?void 0:C.split(".")[0].replace("maps","");return-1<(null===C||void 0===C?void 0:C.indexOf("dev"))?"dev":-1<(null===C||void 0===C?void 0:C.indexOf("qa"))?"qa":""};t.prototype.getDefaultMapViewer=function(){var C=this,E=new c["default"],F=this.portalUser,G=this.portalProperties,H=u.determineOrgMapViewer({mapViewer:null===G||void 0===G?void 0:G.mapViewer,created:this.created,subscriptionInfo:this.subscriptionInfo,isPortal:this.isPortal});
this.defaultMapViewer?E.resolve(this.defaultMapViewer):F?F.getDefaultMapViewer().then(function(L){C.defaultMapViewer=F.isOrgUser?L||H:L||H||u.MapViewerType.Classic;E.resolve(C.defaultMapViewer)}):(this.defaultMapViewer=H||u.MapViewerType.Modern,E.resolve(this.defaultMapViewer));return E};t.prototype.queryItems=function(C,E,F,G){var H=this,L,J=new c["default"],S=null!==(L=null===C||void 0===C?void 0:C.q)&&void 0!==L?L:C;L=null===S||void 0===S?void 0:S.match(/ownerfolder:([^\s]+)/);var P=(null===L||
void 0===L?0:L.length)?L[0].split(":")[1]:null,Q=this.url,M=this.portalUser;L=Q+"search";C?(C.categories&&(L=L+"?categories\x3d"+C.categories,delete C.categories),"object"===typeof C&&"bbox"in C&&(C.sortField="bbox",C.srSort="true",C.spatialFilter="true",S=l["default"].queryToObject(document.URL.replace(/^[^\?]*\?/,"")),C.srsConfig="srsConfig"in S?S.srsConfig:"offset:.5,scale:2"),G&&(C.filter=G),this._queryPortal(L,B["default"].PortalUtil.formatQueryParams({},C,E),B["default"].PortalItem).then(function(N){return y.getAllItemsGroups({response:N,
contentUser:F,portalUser:M,url:Q})}).then(function(N){return H.toPortalItems(P,H.isAdminView,N)}).then(function(N){return J.resolve(q["default"].mixin(N,{total:N.total,nextStart:N.nextQueryParams.start,start:N.queryParams.start}))})):J.resolve({items:[],results:[],total:0,nextStart:-1,start:-1});return B["default"].PortalResult(J)};t.prototype.getUserProfile=function(C){var E=new c["default"];this.userProfiles.find(C).then(function(F){return E.resolve(F)});return E};t.prototype.getFederatedServers=
function(){var C=new c["default"],E=this.getPortalUser(),F=this.url+"portals/self/servers/";E?h["default"].request({url:F}).then(function(G){h["default"].setFederatedServers((null===G||void 0===G?void 0:G.servers)||[]);C.resolve(G&&G.servers?G:null)}):C.resolve(null);return C};t.prototype.getHostedFederatedServers=function(){var C=new c["default"],E;this.getFederatedServers().then(function(F){var G;E=(null!==(G=null===F||void 0===F?void 0:F.servers)&&void 0!==G?G:[]).filter(function(H){return H.isHosted});
C.resolve(E[0])});return C};t.prototype.getFederatedServerByFunction=function(C){var E=new c["default"],F;this.getFederatedServers().then(function(G){var H;F=(null!==(H=null===G||void 0===G?void 0:G.servers)&&void 0!==H?H:[]).filter(function(L){var J;return-1<(null===(J=L.serverFunction)||void 0===J?void 0:J.indexOf(C))});E.resolve(F.shift())});return E};t.prototype.getManagedServers=function(){var C=new c["default"],E,F;this.getHostedFederatedServers().then(function(G){G?(E=G.adminUrl+"/admin/data/findItems",
h["default"].request({url:E,content:{managed:!0}},{useProxy:h["default"].shouldUseProxy(E)}).then(function(H){var L;F=(null!==(L=null===H||void 0===H?void 0:H.items)&&void 0!==L?L:H||[]).filter(function(J){var S;return"arcgis data store"===(null===(S=null===J||void 0===J?void 0:J.provider)||void 0===S?void 0:S.toLowerCase())});C.resolve(F)},function(){return C.resolve(null)})):C.resolve(null)});return C};t.prototype.getIsBackedBySDS=function(){var C=this,E,F,G,H,L,J,S,P=new c["default"],Q=this.getPortalUser(),
M=null!==(E=null===Q||void 0===Q?void 0:Q.userRole)&&void 0!==E?E:{},N;w["default"].isDefined(this.isBackedBySDS)?P.resolve(this.isBackedBySDS):(E=(null===(F=M.isAdmin)||void 0===F?void 0:F.call(M))||(null===(G=M.canManageSecurity)||void 0===G?void 0:G.call(M))||(null===(H=M.canManageServers)||void 0===H?void 0:H.call(M))||(null===(L=M.canUpdateOrgItems)||void 0===L?void 0:L.call(M))||(null===(J=M.canDeleteOrgItems)||void 0===J?void 0:J.call(M)),this.isPortal&&Q&&(E||(null===(S=M.isBasedOnPublisher)||
void 0===S?0:S.call(M)))?this.getManagedServers().then(function(K){var X;N=null!==(X=null===K||void 0===K?void 0:K[0])&&void 0!==X?X:null;C.isBackedBySDS=N?!0:!1;P.resolve(C.isBackedBySDS)}):(this.isBackedBySDS=!0,P.resolve(!0)));return P};t.prototype.getOrgIsVerified=function(C){var E,F=new c["default"];return!C&&w["default"].isDefined(this.isVerified)?(F.resolve(this.isVerified),F):this.queryItems({q:"(orgid: "+(C||(null===(E=this.portalUser)||void 0===E?void 0:E.orgId))+" AND contentstatus: public_authoritative)",
num:1}).then(function(G){return!!G.total})};t.prototype.getCategories=function(){var C=new c["default"];h["default"].request({url:this.url+"portals/"+this.id+"/categorySchema"}).then(function(E){return C.resolve(E.categorySchema)},function(E){return C.reject(E)});return C};t.prototype.getRegions=function(){var C,E,F=new c["default"],G=(null===(C=this.portalUser)||void 0===C?void 0:C.culture)||(null===(E=this.portal)||void 0===E?void 0:E.culture)||m["default"].locale||"en",H;h["default"].request({url:this.portalUrl+
"portals/regions",content:{culture:G}}).then(function(L){L&&L.length&&(H=L.sort(function(J,S){return"WO"===J.region?-1:J.localizedName.localeCompare(S.localizedName)}));F.resolve(H)});return F};t.prototype.toPortalItems=function(C,E,F){var G=this,H={},L=new c["default"];C&&"root"!==C&&q["default"].mixin(H,{folderId:C,ownerFolder:C});E&&(H.isAdminView=!0);this.getBlockedApps().then(function(){var J=F.results.map(function(S){var P=new g["default"](q["default"].mixin(S,H,{portal:G}));P.groupData=S.groupData;
P.removeBlockedTypes(G.blockedApps);return f["default"].setVerifiedInfo(P)});v["default"](J).then(function(S){F.items=S;L.resolve(F)},function(S){return 0})});return L};t.prototype.formatThumbnailUrl=function(C){return B["default"].PortalUtil.formatUrl(this.portalUrl+"portals/self/resources/"+C)};t.prototype.getLocalizedOrgProperties=function(){var C=this,E,F,G=new c["default"],H=b["default"].restBaseUrl+"portals/self/resources",L=null===(F=null===(E=this.portalUser)||void 0===E?void 0:E.credential)||
void 0===F?void 0:F.token;E={f:"json"};L&&(E.token=L);z["default"]({url:H+"/localizedOrgProperties",content:E},{disableIdentityLookup:!0}).then(function(J){J&&!J.code?(C.localizedOrgProperties=J,C.localizedOrgProperties["default"]||(C.localizedOrgProperties["default"]={name:C.name,description:null})):C.createLocalizedOrgPropertiesDefault();G.resolve(C.localizedOrgProperties)},function(){C.createLocalizedOrgPropertiesDefault();G.resolve(C.localizedOrgProperties)});return G};t.prototype.isTrialOrg=
function(){var C,E=null===(C=this.subscriptionInfo)||void 0===C?void 0:C.type;return"Trial"===E||"Trial Press"===E||"Trial Developer"===E||"Developer Subscription"===E};t.prototype.canHavePartnerCollab=function(){var C="Organizational Plan;Community;In House;ConnectED;ELA;Education Site License;Education;HUP Online Entitlement;Demo and Marketing".split(";");return this.subscriptionInfo&&-1<C.indexOf(this.subscriptionInfo.type)};t.prototype.isKubernetes=function(){return"ArcGISEnterpriseOnKubernetes"===
this.portalDeploymentType};t.prototype.createLocalizedOrgPropertiesDefault=function(){this.localizedOrgProperties={"default":{name:this.name,description:null}}};t.prototype.getBlockedApps=function(){var C=this,E,F=new c["default"];if(null===(E=this.portalUser)||void 0===E||!E.orgId)return F.resolve(),F;n["default"].getBlockedApps().then(function(G){C.blockedApps=G;F.resolve()});return F};return t=a.__decorate([k["default"](B["default"].Portal,r["default"])],t)}()})},"arcgisonline/pages/portal/UserProfiles":function(){define("require exports tslib ./PortalUser ../../sharing/util ../../tsutils/declareDecorator dojo/Deferred dojo/i18n!../../nls/arcgisonline dojo/_base/lang dojo/Stateful".split(" "),
function(D,A,a,b,g,d,e,f,n,h){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);return function(){function k(c){this.NO_THUMBNAIL_PATH=g["default"].relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg");this.users={}}k.prototype.find=function(c){var l=this,r=this.users,m="string"===typeof c?{username:c}:c,q=m&&m.username;m="deletedUser"===q;var v={username:m?f["default"].common.deletedUser:
q,thumbnailUrl:this.NO_THUMBNAIL_PATH},B=new e["default"];"fetching"===r[q]?setTimeout(function(){l.find(c).then(function(w){B.resolve(w)})},50):r[q]?B.resolve(r[q]):m?(r[q]=n["default"].mixin({},{isDeleted:!0},v),B.resolve(r[q])):(r[q]="fetching",this.getUserProfile(q).then(function(w){r[q]=w;B.resolve(r[q])},function(){r[q]=n["default"].mixin({},v);B.resolve(r[q])}));return B};k.prototype.getUserProfile=function(c){var l=this,r=new e["default"],m;g["default"].request({url:this.portal.portalUrl+
"community/users/"+c}).then(function(q){m=new b["default"](n["default"].mixin(q,{portal:l.portal}));r.resolve(m)});return r};return k=a.__decorate([d["default"](h["default"])],k)}()})},"arcgisonline/pages/utils/validation":function(){define(["require","exports"],function(D,A){return function(){function a(){}a.clearState=function(b){null===b||void 0===b?void 0:b.forEach(function(g){var d,e,f;null===g||void 0===g?void 0:g.removeAttribute("aria-live");null===(d=null===g||void 0===g?void 0:g.classList)||
void 0===d?void 0:d.remove("input-success");null===(e=null===g||void 0===g?void 0:g.classList)||void 0===e?void 0:e.remove("input-error");null===(f=null===g||void 0===g?void 0:g.classList)||void 0===f?void 0:f.remove("is-active")})};a.setValidState=function(b){var g;null===(g=null===b||void 0===b?void 0:b.classList)||void 0===g?void 0:g.add("input-success")};a.setInvalidState=function(b,g,d,e){var f,n,h;null===(f=null===b||void 0===b?void 0:b.classList)||void 0===f?void 0:f.add("input-error");null===
(n=null===g||void 0===g?void 0:g.classList)||void 0===n?void 0:n.add("is-active");g&&d&&(null===g||void 0===g?void 0:g.setAttribute("aria-live","polite"),g.innerHTML=d);e&&(null===(h=null===b||void 0===b?void 0:b.focus)||void 0===h?void 0:h.call(b))};a.focusFirstInvalidInput=function(b){var g;b=null!==(g=null===b||void 0===b?void 0:b.querySelector(".input-error"))&&void 0!==g?g:void 0;(null===b||void 0===b?0:b.focus)&&b.focus()};a.toggleError=function(b,g,d,e){d?a.setInvalidState(b,g,e):a.clearState([b,
g])};return a}()})},"arcgisonline/sharing/dijit/HelpManager":function(){define(["dojo/_base/declare","dijit/_WidgetBase","../util","../../esriGeowConfig"],function(D,A,a,b){var g=D([A],{helpBaseUrl:null,helpTopics:null,_isSingleTenant:!1,postCreate:function(){this._isSingleTenant=void 0!==b.isMultiTenant&&null!==b.isMultiTenant&&!1===b.isMultiTenant;this.helpBaseUrl=b.self.helpBase;this._load()},_load:function(){b.self.helpMap&&b.self.helpMap.m?(this.helpTopics=b.self.helpMap.m,this.onLoad(this.helpBaseUrl,
this.helpTopics)):a.request({url:b.restBaseUrl+"portals/helpmap"}).then(function(d){!d||d.code||d.message||(this.helpBaseUrl=d.helpBase,this.helpTopics=d.helpMap&&d.helpMap.m||{},this.onLoad(this.helpBaseUrl,this.helpTopics))}.bind(this))},onLoad:function(d,e){},isLoaded:function(){return this.helpBaseUrl&&this.helpTopics},getHelpUrl:function(d){return this.isLoaded()?this.helpBaseUrl+this.helpTopics[d]:"#"}});g.prototype.statics={_instance:null,getInstance:function(){null===this._instance&&(this._instance=
new g);return this._instance}};return g})},"dojox/widget/Rotator":function(){define("dojo/aspect dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/topic dojo/on dojo/parser dojo/query dojo/fx/easing dojo/NodeList-dom".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m){A=A("dojox.widget.Rotator",null,{transition:"dojox.widget.rotator.swap",transitionParams:"duration:500",panes:null,constructor:function(q,
v){b.mixin(this,q);var B=this,w=B.transition,z=B._transitions={};B._idMap={};var x=B.transitionParams=eval("({ "+B.transitionParams+" })");v=B._domNode=e.byId(v);B._domNodeContentBox=h.getContentBox(v);B.id=v.id||(new Date).getTime();"static"==k.get(v,"position")&&k.set(v,"position","relative");z[w]=b.getObject(w);z[w]||(this._transitionWarn(w,"dojox.widget.rotator.swap"),z[B.transition="dojox.widget.rotator.swap"]=b.getObject("dojox.widget.rotator.swap"));x.duration||(x.duration=500);g.forEach(B.panes,
function(y){n.create("div",y,v)});B.panes=[];m("\x3e *",v).forEach(function(y,u){B._initializePane(y,u)});B._controlSub=c.subscribe(B.id+"/rotator/control",b.hitch(B,this.control))},insert:function(q,v){var B=this.panes;null==v&&(v=B.length);v<B.length?(B=B[v],n.place(q,B.node,"before")):n.place(q,this._domNode,"last");this._initializePane(q,v)},remove:function(q){function v(y){var u=w.splice(y,1)[0];u&&(u.id&&(B._idMap[u.id]=void 0),B._domNode.removeChild(u.node));B.idx>y&&B.idx--}var B=this,w=this.panes;
if("number"===typeof q)var z=q;else{for(var x=0;x<w.length;x++)if(w[x].node===q){z=x;break}if(null==z)return}if(z===this.idx&&(q=this.go(this.idx-1)))return q.then(function(){v(z)});v(z)},destroy:function(){g.forEach([this._controlSub,this.wfe],function(q){q&&q.remove()});n.destroy(this._domNode);this.panes=[]},next:function(){return this.go(this.idx+1)},prev:function(){return this.go(this.idx-1)},go:function(q){var v=this,B=v.idx,w=v.panes,z=w.length,x=v._idMap[q];v._resetWaitForEvent();q=null!=
x?x:q||0;q=q<z?0>q?z-1:q:0;if(q==B||v.anim)return null;var y=w[B],u=w[q];k.set(y.node,"zIndex",2);k.set(u.node,"zIndex",1);var t={current:y,next:u,rotator:v};if(B=v.anim=v._transitions[u.trans](b.mixin({rotatorBox:v._domNodeContentBox},t,u.params))){var C=new a,E=u.waitForEvent,F=D.after(B,"onEnd",function(){k.set(y.node,{display:"none",left:0,opacity:1,top:0,zIndex:0});F.remove();v.anim=null;v.idx=q;if(y.onAfterOut)y.onAfterOut(t);if(u.onAfterIn)u.onAfterIn(t);v.onUpdate("onAfterTransition");E||
(v._resetWaitForEvent(),C.callback())},!0);v.wfe=E?c.subscribe(E,function(){v._resetWaitForEvent();C.callback(!0)}):null;v.onUpdate("onBeforeTransition");if(y.onBeforeOut)y.onBeforeOut(t);if(u.onBeforeIn)u.onBeforeIn(t);B.play();return C}},onUpdate:function(q,v){c.publish(this.id+"/rotator/update",q,this,v||{})},_initializePane:function(q,v){var B={node:q,idx:v,params:b.mixin({},this.transitionParams,eval("({ "+(f.get(q,"transitionParams")||"")+" })"))},w=B.trans=f.get(q,"transition")||this.transition,
z=this._transitions,x=this.panes,y={left:0,top:0,position:"absolute",display:"none"};g.forEach(["id","title","duration","waitForEvent"],function(u){B[u]=f.get(q,u)});B.id&&(this._idMap[B.id]=v);z[w]||(z[w]=b.getObject(w))||this._transitionWarn(w,B.trans=this.transition);if(null==this.idx||f.get(q,"selected"))null!=this.idx&&k.set(x[this.idx].node,"display","none"),this.idx=v,y.display="";k.set(q,y);m("\x3e script[type^\x3d'dojo/method']",q).orphan().forEach(function(u){var t=f.get(u,"event");t&&(B[t]=
r._functionFromScript(u))});x.splice(v,0,B)},_resetWaitForEvent:function(){this.wfe&&(this.wfe.remove(),delete this.wfe)},control:function(q){var v=b._toArray(arguments),B=this;v.shift();B._resetWaitForEvent();B[q]&&((v=B[q].apply(B,v))&&v.addCallback(function(){B.onUpdate(q)}),B.onManualChange(q))},resize:function(q,v){var B=this._domNodeContentBox={w:q,h:v};h.setContentSize(this._domNode,B);g.forEach(this.panes,function(w){h.setContentSize(w.node,B)})},onManualChange:function(){},_transitionWarn:function(q,
v){}});b.setObject("dojox.widget.rotator.swap",function(q){return new d.Animation({play:function(){k.set(q.current.node,"display","none");k.set(q.next.node,"display","");this._fire("onEnd")}})});return A})},"dojo/fx/easing":function(){define(["../_base/lang"],function(D){var A={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return a*(a-2)*-1},quadInOut:function(a){a*=2;return 1>a?Math.pow(a,2)/2:-1*(--a*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},
cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a*=2;return 1>a?Math.pow(a,3)/2:(Math.pow(a-2,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return-1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a*=2;return 1>a?Math.pow(a,4)/2:-.5*(Math.pow(a-2,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a*=2;return 1>a?Math.pow(a,5)/2:(Math.pow(a-2,5)+2)/2},sineIn:function(a){return-1*Math.cos(Math.PI/
2*a)+1},sineOut:function(a){return Math.sin(Math.PI/2*a)},sineInOut:function(a){return-1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return 0==a?0:Math.pow(2,10*(a-1))},expoOut:function(a){return 1==a?1:-1*Math.pow(2,-10*a)+1},expoInOut:function(a){if(0==a)return 0;if(1==a)return 1;a*=2;if(1>a)return Math.pow(2,10*(a-1))/2;--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return-1*(Math.sqrt(1-Math.pow(a,2))-1)},circOut:function(a){return Math.sqrt(1-Math.pow(a-1,2))},circInOut:function(a){a*=
2;return 1>a?-.5*(Math.sqrt(1-Math.pow(a,2))-1):.5*(Math.sqrt(1-Math.pow(a-2,2))+1)},backIn:function(a){return Math.pow(a,2)*(2.70158*a-1.70158)},backOut:function(a){--a;return Math.pow(a,2)*(2.70158*a+1.70158)+1},backInOut:function(a){a*=2;if(1>a)return Math.pow(a,2)*(3.5949095*a-2.5949095)/2;a-=2;return(Math.pow(a,2)*(3.5949095*a+2.5949095)+2)/2},elasticIn:function(a){if(0==a||1==a)return a;--a;return-1*Math.pow(2,10*a)*Math.sin(2*(a-.075)*Math.PI/.3)},elasticOut:function(a){return 0==a||1==a?a:
Math.pow(2,-10*a)*Math.sin(2*(a-.075)*Math.PI/.3)+1},elasticInOut:function(a){if(0==a)return 0;a*=2;if(2==a)return 1;var b=.3*1.5,g=b/4;if(1>a)return--a,-.5*Math.pow(2,10*a)*Math.sin(2*(a-g)*Math.PI/b);--a;return.5*Math.pow(2,-10*a)*Math.sin(2*(a-g)*Math.PI/b)+1},bounceIn:function(a){return 1-A.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*Math.pow(a,2):a<2/2.75?7.5625*Math.pow(a-1.5/2.75,2)+.75:a<2.5/2.75?7.5625*Math.pow(a-2.25/2.75,2)+.9375:7.5625*Math.pow(a-2.625/2.75,2)+.984375},
bounceInOut:function(a){return.5>a?A.bounceIn(2*a)/2:A.bounceOut(2*a-1)/2+.5}};D.setObject("dojo.fx.easing",A);return A})},"dojox/widget/AutoRotator":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/mouse dojox/widget/Rotator".split(" "),function(D,A,a,b,g,d){return D("dojox.widget.AutoRotator",d,{suspendOnHover:!1,duration:4E3,autoStart:!0,pauseOnManualChange:!1,cycles:-1,random:!1,reverse:!1,constructor:function(){var e=this;e.cycles-0==e.cycles&&0<e.cycles?e.cycles++:
e.cycles=e.cycles?-1:0;e._signals=[b(e._domNode,g.enter,function(){if(e.suspendOnHover&&!e.anim&&!e.wfe){var f=e._endTime,n=e._now();e._suspended=!0;e._resetTimer();e._resumeDuration=f>n?f-n:.01}}),b(e._domNode,g.leave,function(){e.suspendOnHover&&!e.anim&&(e._suspended=!1,e.playing&&!e.wfe&&e.play(!0))})];e.autoStart&&1<e.panes.length?e.play():e.pause()},destroy:function(){A.forEach(this._signals,function(e){e.remove()});delete this._signals;dojo.forEach(this._connects,dojo.disconnect);this.inherited(arguments)},
play:function(e,f){this.playing=!0;this._resetTimer();!0!==e&&0<this.cycles&&this.cycles--;if(0==this.cycles)this.pause();else if(!this._suspended)if(this.onUpdate("play"),f)this._cycle();else{var n=(this._resumeDuration||0)-0;n=(0<n?n:this.panes[this.idx].duration||this.duration)-0;this._resumeDuration=0;this._endTime=this._now()+n;this._timer=setTimeout(a.hitch(this,"_cycle",!1),n)}},pause:function(){this.playing=this._suspended=!1;this.cycles=-1;this._resetTimer();this.onUpdate("pause")},_now:function(){return(new Date).getTime()},
_resetTimer:function(){clearTimeout(this._timer)},_cycle:function(e){var f=this;e=f.idx;if(f.random){do var n=Math.floor(Math.random()*f.panes.length+1);while(n==e)}else n=e+(f.reverse?-1:1);(e=f.go(n))&&e.addCallback(function(h){f.onUpdate("cycle");f.playing&&f.play(!1,h)})},onManualChange:function(e){this.cycles=-1;"play"!=e&&(this._resetTimer(),this.pauseOnManualChange&&this.pause());this.playing&&this.play()}})})},"dojox/widget/rotator/Controller":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/event dojo/_base/array dojo/_base/connect dojo/query".split(" "),
function(D,A,a,b,g,d,e){return D("dojox.widget.rotator.Controller",null,{rotator:null,commands:"prev,play/pause,info,next",constructor:function(f,n){A.mixin(this,f);var h=this.rotator;if(h){for(;n.firstChild;)n.removeChild(n.firstChild);var k=this._domNode=a.create("ul",null,n),c=function(l,r,m){a.create("li",{className:r,innerHTML:'\x3ca href\x3d"#"\x3e\x3cspan\x3e'+l+"\x3c/span\x3e\x3c/a\x3e",onclick:function(q){b.stop(q);h&&h.control.apply(h,m)}},k)};g.forEach(this.commands.split(","),function(l,
r){switch(l){case "prev":c("Prev","dojoxRotatorPrev dojoxRotatorIcon",["prev"]);break;case "play/pause":c("Play","dojoxRotatorPlay dojoxRotatorIcon",["play"]);c("Pause","dojoxRotatorPause dojoxRotatorIcon",["pause"]);break;case "info":this._info=a.create("li",{className:"dojoxRotatorInfo",innerHTML:this._buildInfo(h)},k);break;case "next":c("Next","dojoxRotatorNext dojoxRotatorIcon",["next"]);break;case "#":case "titles":for(var m=0;m<h.panes.length;m++)c("#"==l?m+1:h.panes[m].title||"Tab "+(m+1),
("#"==l?"dojoxRotatorNumber":"dojoxRotatorTab")+" "+(m==h.idx?"dojoxRotatorSelected":"")+" dojoxRotatorPane"+m,["go",m])}},this);e("li:first-child",k).addClass("dojoxRotatorFirst");e("li:last-child",k).addClass("dojoxRotatorLast");this._togglePlay();this._con=d.connect(h,"onUpdate",this,"_onUpdate")}},destroy:function(){d.disconnect(this._con);a.destroy(this._domNode)},_togglePlay:function(f){f=this.rotator.playing;e(".dojoxRotatorPlay",this._domNode).style("display",f?"none":"");e(".dojoxRotatorPause",
this._domNode).style("display",f?"":"none")},_buildInfo:function(f){return"\x3cspan\x3e"+(f.idx+1)+" / "+f.panes.length+"\x3c/span\x3e"},_onUpdate:function(f){var n=this.rotator;switch(f){case "play":case "pause":this._togglePlay();break;case "onAfterTransition":this._info&&(this._info.innerHTML=this._buildInfo(n)),f=function(h){n.idx<h.length&&a.addClass(h[n.idx],"dojoxRotatorSelected")},f(e(".dojoxRotatorNumber",this._domNode).removeClass("dojoxRotatorSelected")),f(e(".dojoxRotatorTab",this._domNode).removeClass("dojoxRotatorSelected"))}}})})},
"dojox/widget/rotator/Fade":function(){define(["dojo/_base/lang","dojo/_base/fx","dojo/dom-style","dojo/fx"],function(D,A,a,b){function g(e,f){var n=e.next.node;a.set(n,{display:"",opacity:0});e.node=e.current.node;return b[f]([A.fadeOut(e),A.fadeIn(D.mixin(e,{node:n}))])}var d={fade:function(e){return g(e,"chain")},crossFade:function(e){return g(e,"combine")}};D.mixin(D.getObject("dojox.widget.rotator"),d);return d})},"dijit/layout/StackController":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/topic ../focus ../registry ../_Widget ../_TemplatedMixin ../_Container ../form/ToggleButton dojo/touch".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r){b=A("dijit.layout._StackButton",r,{tabIndex:"-1",closeButton:!1,_aria_attr:"aria-selected",buildRendering:function(m){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab")}});A=A("dijit.layout.StackController",[k,c,l],{baseClass:"dijitStackController",templateString:"\x3cspan role\x3d'tablist' data-dojo-attach-event\x3d'onkeydown'\x3e\x3c/span\x3e",containerId:"",buttonWidget:b,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(m){return h.byId(this.id+
"_"+m)},postCreate:function(){this.inherited(arguments);this.own(f.subscribe(this.containerId+"-startup",d.hitch(this,"onStartup")),f.subscribe(this.containerId+"-addChild",d.hitch(this,"onAddChild")),f.subscribe(this.containerId+"-removeChild",d.hitch(this,"onRemoveChild")),f.subscribe(this.containerId+"-selectChild",d.hitch(this,"onSelectChild")),f.subscribe(this.containerId+"-containerKeyDown",d.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=!0;this.own(e(this.containerNode,"click",
d.hitch(this,function(m){var q=h.getEnclosingWidget(m.target);if(q!=this.containerNode&&!q.disabled&&q.page)for(m=m.target;m!==this.containerNode;m=m.parentNode)if(a.contains(m,this.buttonWidgetCloseClass)){this.onCloseButtonClick(q.page);break}else if(m==q.domNode){this.onButtonClick(q.page);break}})))},onStartup:function(m){this.textDir=m.textDir;D.forEach(m.children,this.onAddChild,this);if(m.selected)this.onSelectChild(m.selected);var q=h.byId(this.containerId).containerNode,v=d.hitch(this,"pane2button");
m={title:"label",showtitle:"showLabel",iconclass:"iconClass",closable:"closeButton",tooltip:"title",disabled:"disabled",textdir:"textdir"};var B=function(z,x){return e(q,"attrmodified-"+z,function(y){var u=v(y.detail&&y.detail.widget&&y.detail.widget.id);u&&u.set(x,y.detail.newValue)})},w;for(w in m)this.own(B(w,m[w]))},destroy:function(m){this.destroyDescendants(m);this.inherited(arguments)},onAddChild:function(m,q){var v=new (d.isString(this.buttonWidget)?d.getObject(this.buttonWidget):this.buttonWidget)({id:this.id+
"_"+m.id,name:this.id+"_"+m.id,label:m.title,disabled:m.disabled,ownerDocument:this.ownerDocument,dir:m.dir,lang:m.lang,textDir:m.textDir||this.textDir,showLabel:m.showTitle,iconClass:m.iconClass,closeButton:m.closable,title:m.tooltip,page:m});this.addChild(v,q);m.controlButton=v;if(!this._currentChild)this.onSelectChild(m);v=m._wrapper.getAttribute("aria-labelledby")?m._wrapper.getAttribute("aria-labelledby")+" "+v.id:v.id;m._wrapper.removeAttribute("aria-label");m._wrapper.setAttribute("aria-labelledby",
v)},onRemoveChild:function(m){this._currentChild===m&&(this._currentChild=null);var q=this.pane2button(m.id);q&&(this.removeChild(q),q.destroy());delete m.controlButton},onSelectChild:function(m){if(m){if(this._currentChild){var q=this.pane2button(this._currentChild.id);q.set("checked",!1);q.focusNode.setAttribute("tabIndex","-1")}q=this.pane2button(m.id);q.set("checked",!0);this._currentChild=m;q.focusNode.setAttribute("tabIndex","0");h.byId(this.containerId)}},onButtonClick:function(m){var q=this.pane2button(m.id);
n.focus(q.focusNode);this._currentChild&&this._currentChild.id===m.id&&q.set("checked",!0);h.byId(this.containerId).selectChild(m)},onCloseButtonClick:function(m){h.byId(this.containerId).closeChild(m);this._currentChild&&(m=this.pane2button(this._currentChild.id))&&n.focus(m.focusNode||m.domNode)},adjacent:function(m){this.isLeftToRight()||this.tabPosition&&!/top|bottom/.test(this.tabPosition)||(m=!m);var q=this.getChildren(),v=D.indexOf(q,this.pane2button(this._currentChild.id)),B=q[v];do{v=(v+
(m?1:q.length-1))%q.length;var w=q[v]}while(w.disabled&&w!=B);return w},onkeydown:function(m,q){if(!this.disabled&&!m.altKey){var v=null;if(m.ctrlKey||!m._djpage){switch(m.keyCode){case g.LEFT_ARROW:case g.UP_ARROW:m._djpage||(v=!1);break;case g.PAGE_UP:m.ctrlKey&&(v=!1);break;case g.RIGHT_ARROW:case g.DOWN_ARROW:m._djpage||(v=!0);break;case g.PAGE_DOWN:m.ctrlKey&&(v=!0);break;case g.HOME:for(var B=this.getChildren(),w=0;w<B.length;w++){var z=B[w];if(!z.disabled){this.onButtonClick(z.page);break}}m.stopPropagation();
m.preventDefault();break;case g.END:B=this.getChildren();for(w=B.length-1;0<=w;w--)if(z=B[w],!z.disabled){this.onButtonClick(z.page);break}m.stopPropagation();m.preventDefault();break;case g.DELETE:case 87:this._currentChild.closable&&(m.keyCode==g.DELETE||m.ctrlKey)&&(this.onCloseButtonClick(this._currentChild),m.stopPropagation(),m.preventDefault());break;case g.TAB:m.ctrlKey&&(this.onButtonClick(this.adjacent(!m.shiftKey).page),m.stopPropagation(),m.preventDefault())}null!==v&&(this.onButtonClick(this.adjacent(v).page),
m.stopPropagation(),m.preventDefault())}}},onContainerKeyDown:function(m){m.e._djpage=m.page;this.onkeydown(m.e)}});A.StackButton=b;return A})},"arcgisonline/sharing/dijit/TextMenu":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util"],function(D,A,a){D.provide("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.declare("arcgisonline.sharing.dijit.TextMenu",[A._Widget],{_util:arcgisonline.sharing.util,textMenuItems:[{label:"No menu items",
href:"#",iconClass:null}],labelNode:null,triggerNode:null,menu:null,handlers:[],constructor:function(b){D.mixin(this,b)},postCreate:function(){this.menu=(new A.Menu({})).placeAt(D.body());D.addClass(this.menu.domNode,"esriTextMenu");A.popup.moveOffScreen(this.menu.domNode);null!==this.textMenuItems&&this._renderItems(this.textMenuItems);D.style(this.triggerNode,"cursor","hand");D.style(this.triggerNode,"cursor","pointer");this.handlers.push(D.connect(this.triggerNode,"onclick",this,this.show));D.connect(this.menu,
"onMouseLeave",D.hitch(this,function(){this.hide()}))},show:function(b){b.preventDefault();A.popup.open({popup:this.menu,around:this.labelNode,orient:{BL:"TL",BR:"TR",TL:"BL",TR:"BR"},onExecute:D.hitch(this,this.hide),onCancel:D.hitch(this,this.hide)});this.menu.focus()},hide:function(){A.popup.close(this.menu)},destroy:function(){this.hide();D.forEach(this.handlers,function(b){D.disconnect(b)});D.forEach(D.query(".esriTextMenuItem"),function(b){A.byNode(b).destroy()},this);this.menu.destroy();this.inherited(arguments)},
_renderItems:function(b){D.forEach(b,function(g){g=new A.MenuItem(g);D.addClass(g.domNode,"esriTextMenuItem");this.menu.addChild(g)},this)}})})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(D){return D._base})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(D,A,
a,b){var g=A("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0},add:function(d){if(this._hash[d.id])throw Error("Tried to register widget with id\x3d\x3d"+d.id+" but that id is already registered");this._hash[d.id]=d;this.length++},remove:function(d){this._hash[d]&&(delete this._hash[d],this.length--)},forEach:function(d,e){e=e||a.global;var f=0,n;for(n in this._hash)d.call(e,this._hash[n],f++,this._hash);return this},filter:function(d,e){e=e||a.global;var f=new g,n=0,h;for(h in this._hash){var k=
this._hash[h];d.call(e,k,n++,this._hash)&&f.add(k)}return f},byId:function(d){return this._hash[d]},byClass:function(d){var e=new g,f;for(f in this._hash){var n=this._hash[f];n.declaredClass==d&&e.add(n)}return e},toArray:function(){var d=[],e;for(e in this._hash)d.push(this._hash[e]);return d},map:function(d,e){return D.map(this.toArray(),d,e)},every:function(d,e){e=e||a.global;var f=0,n;for(n in this._hash)if(!d.call(e,this._hash[n],f++,this._hash))return!1;return!0},some:function(d,e){e=e||a.global;
var f=0,n;for(n in this._hash)if(d.call(e,this._hash[n],f++,this._hash))return!0;return!1}});D.forEach("forEach filter byClass map every some".split(" "),function(d){b[d]=g.prototype[d]});return g})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(D,A,a,b,g,d,e,f){d.focus=function(n){if(n){var h="node"in n?n.node:n,k=n.bookmark;n=n.openedForWindow;var c=k?k.isCollapsed:!1;if(h){var l="iframe"==
h.tagName.toLowerCase()?h.contentWindow:h;if(l&&l.focus)try{l.focus()}catch(r){}d._onFocusNode(h)}if(k&&g.withGlobal(n||g.global,f.isCollapsed)&&!c){n&&n.focus();try{g.withGlobal(n||g.global,f.moveToBookmark,null,[k])}catch(r){}}}};d.watch("curNode",function(n,h,k){f._curFocus=k;f._prevFocus=h;k&&b.publish("focusNode",k)});d.watch("activeStack",function(n,h,k){f._activeStack=k});d.on("widget-blur",function(n,h){b.publish("widgetBlur",n,h)});d.on("widget-focus",function(n,h){b.publish("widgetFocus",
n,h)});a.mixin(f,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return f.getBookmark().isCollapsed},getBookmark:function(){return(g.global==window?e:new e.SelectionManager(g.global)).getBookmark()},moveToBookmark:function(n){return(g.global==window?e:new e.SelectionManager(g.global)).moveToBookmark(n)},getFocus:function(n,h){var k=!d.curNode||n&&A.isDescendant(d.curNode,n.domNode)?f._prevFocus:d.curNode;return{node:k,bookmark:k&&k==d.curNode&&g.withGlobal(h||g.global,f.getBookmark),openedForWindow:h}},
_activeStack:[],registerIframe:function(n){return d.registerIframe(n)},unregisterIframe:function(n){n&&n.remove()},registerWin:function(n,h){return d.registerWin(n,h)},unregisterWin:function(n){n&&n.remove()}});return f})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(D,A,a,b,g){var d={getViewport:function(){return a.getBox()}};d.placeOnScreen=b.at;d.placeOnScreenAroundElement=function(e,f,n,h){if(A.isArray(n))var k=n;else{k=
[];for(var c in n)k.push({aroundCorner:c,corner:n[c]})}return b.around(e,f,k,!0,h)};d.placeOnScreenAroundNode=d.placeOnScreenAroundElement;d.placeOnScreenAroundRectangle=d.placeOnScreenAroundElement;d.getPopupAroundAlignment=function(e,f){var n={};D.forEach(e,function(h){var k=f;switch(h){case "after":n[f?"BR":"BL"]=f?"BL":"BR";break;case "before":n[f?"BL":"BR"]=f?"BR":"BL";break;case "below-alt":k=!k;case "below":n[k?"BL":"BR"]=k?"TL":"TR";n[k?"BR":"BL"]=k?"TR":"TL";break;case "above-alt":k=!k;default:n[k?
"TL":"TR"]=k?"BL":"BR",n[k?"TR":"TL"]=k?"BR":"BL"}});return n};A.mixin(g,d);return g})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(D,A,a){var b=a._createWrapper;a._createWrapper=function(d){d.declaredClass||(d={_popupWrapper:d.parentNode&&D.contains(d.parentNode,"dijitPopup")?d.parentNode:null,domNode:d,destroy:function(){},ownerDocument:d.ownerDocument,ownerDocumentBody:A.body(d.ownerDocument)});return b.call(this,d)};var g=
a.open;a.open=function(d){if(d.orient&&"string"!=typeof d.orient&&!("length"in d.orient)){var e=[],f;for(f in d.orient)e.push({aroundCorner:f,corner:d.orient[f]});d.orient=e}return g.call(this,d)};return a})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(D,A){A.scrollIntoView=function(a,b){D.scrollIntoView(a,b)}})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dijit/_base/wai":function(){define(["dojo/dom-attr",
"dojo/_base/lang","../main","../hccss"],function(D,A,a){A.mixin(a,{hasWaiRole:function(b,g){var d=this.getWaiRole(b);return g?-1<d.indexOf(g):0<d.length},getWaiRole:function(b){return A.trim((D.get(b,"role")||"").replace("wairole:",""))},setWaiRole:function(b,g){D.set(b,"role",g)},removeWaiRole:function(b,g){var d=D.get(b,"role");d&&(g?(d=A.trim((" "+d+" ").replace(" "+g+" "," ")),D.set(b,"role",d)):b.removeAttribute("role"))},hasWaiState:function(b,g){return b.hasAttribute?b.hasAttribute("aria-"+
g):!!b.getAttribute("aria-"+g)},getWaiState:function(b,g){return b.getAttribute("aria-"+g)||""},setWaiState:function(b,g,d){b.setAttribute("aria-"+g,d)},removeWaiState:function(b,g){b.removeAttribute("aria-"+g)}});return a})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(D,A){A.getDocumentWindow=function(a){return D.get(a)}})},"dijit/form/ComboButton":function(){define("dojo/_base/declare dojo/keys ../focus ./DropDownButton dojo/text!./templates/ComboButton.html ../a11yclick".split(" "),
function(D,A,a,b,g){return D("dijit.form.ComboButton",b,{templateString:g,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(d){d.keyCode==A[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(a.focus(this._popupStateNode),d.stopPropagation(),d.preventDefault())},_onArrowKeyDown:function(d){d.keyCode==
A[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(a.focus(this.titleNode),d.stopPropagation(),d.preventDefault())},focus:function(d){this.disabled||a.focus("start"==d?this.titleNode:this._popupStateNode)}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(D,A,a){return D("dijit.form.RadioButton",[A,a],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/_base/lang dojo/query!css2 ../registry".split(" "),
function(D,A,a,b,g,d){return A("dijit.form._RadioButtonMixin",null,{type:"radio",_getRelatedWidgets:function(){var e=[];g("input[type\x3dradio]",this.focusNode.form||this.ownerDocument).forEach(b.hitch(this,function(f){f.name==this.name&&f.form==this.focusNode.form&&(f=d.getEnclosingWidget(f))&&e.push(f)}));return e},_setCheckedAttr:function(e){this.inherited(arguments);this._created&&e&&D.forEach(this._getRelatedWidgets(),b.hitch(this,function(f){f!=this&&f.checked&&f.set("checked",!1)}))},_getSubmitValue:function(e){return null==
e?"on":e},_onClick:function(e){if(this.checked||this.disabled)return e.stopPropagation(),e.preventDefault(),!1;if(this.readOnly)return e.stopPropagation(),e.preventDefault(),D.forEach(this._getRelatedWidgets(),b.hitch(this,function(h){a.set(this.focusNode||this.domNode,"checked",h.checked)})),!1;var f=!1,n;D.some(this._getRelatedWidgets(),function(h){return h.checked?(n=h,!0):!1});this.checked=!0;n&&(n.checked=!1);if(!1===this.onClick(e)||e.defaultPrevented)f=!0;this.checked=!1;n&&(n.checked=!0);
f?e.preventDefault():this.set("checked",!0);return!f}})})},"dijit/PopupMenuItem":function(){define("dojo/_base/declare dojo/dom-style dojo/_base/lang dojo/query ./popup ./registry ./MenuItem ./hccss".split(" "),function(D,A,a,b,g,d,e){return D("dijit.PopupMenuItem",e,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){if(this.srcNodeRef){var f=b("*",this.srcNodeRef);this.inherited(arguments,[f[0]]);this.dropDownContainer=this.srcNodeRef}},_openPopup:function(f,n){var h=this.popup;
g.open(a.delegate(f,{popup:this.popup,around:this.domNode}));n&&h.focus&&h.focus()},_closePopup:function(){g.close(this.popup);this.popup.parentMenu=null},startup:function(){if(!this._started){this.inherited(arguments);if(!this.popup){var f=b("[widgetId]",this.dropDownContainer)[0];this.popup=d.byNode(f)}this.ownerDocumentBody.appendChild(this.popup.domNode);this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);this.popup.startup();this.popup.domNode.style.display="none";this.arrowWrapper&&
A.set(this.arrowWrapper,"visibility","");this.focusNode.setAttribute("aria-haspopup","true")}},destroyDescendants:function(f){this.popup&&(this.popup._destroyed||this.popup.destroyRecursive(f),delete this.popup);this.inherited(arguments)}})})},"arcgisonline/sharing/dijit/Gallery":function(){define(["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!arcgisonline/sharing/dijit/views,dijit/_Widget,dijit/_Templated,dojo/NodeList-fx,dijit/layout/ContentPane,arcgisonline/sharing/util,dijit/form/Button,arcgisonline/sharing/geow/QueryReadStore"],
function(D,A,a){D.provide("arcgisonline.sharing.dijit.Gallery");D.require("arcgisonline.sharing.dijit.views");D.require("dijit._Widget");D.require("dijit._Templated");D.require("dojo.NodeList-fx");D.require("dijit.layout.ContentPane");D.require("arcgisonline.sharing.util");D.require("dijit.form.Button");D.requireLocalization("arcgisonline","arcgisonline");D.require("arcgisonline.sharing.geow.QueryReadStore");D.declare("arcgisonline.sharing.dijit.Gallery",[A._Widget,A._Templated],{widgetsInTemplate:!0,
templateString:'\x3cdiv dojoAttachPoint\x3d"containerNode"\x3e\r\n  \x3cdiv class\x3d"clearfix galleryBackground"\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"flowContainer" class\x3d"clearfix"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv dojoAttachPoint\x3d"pageControls" class\x3d"esriFloatLeading" style\x3d"maxheight: 3em; width: 100%; clear: both;"\x3e\r\n      \x3cp style\x3d"text-align: center;"\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_prev" style\x3d"display:none;"\x3e${i18n.previous}\x3c/span\x3e\r\n        \x3cspan dojoAttachPoint\x3d"_pages" dojoAttachEvent\x3d"onClick:goToPage" class\x3d"esriItemLinks esriPagingLinks"\x3e\x3c/span\x3e\r\n        \x3cspan dojoType\x3d"dijit.form.Button" dojoAttachPoint\x3d"_next" style\x3d"display:none;"\x3e${i18n.next}\x3c/span\x3e\r\n      \x3c/p\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
tooltip:null,showToolTip:!0,showNodeLabels:!0,showThumbnailInDetails:!0,fadeOutOtherNodes:!0,animFadeOut:!0,unfocusedOpacity:.5,highlightFocusedNode:!0,largeNodes:0,maxNodes:0,flowContainer:null,showDelay:300,nodesPerPage:4,currentPage:1,pageCount:1,maxPages:null,showPageControls:!0,_prev:null,_next:null,_pages:null,nodeClass:"galleryNode",nodeHighlightClass:"highlight",thumbClass:"galleryThumbnail",labelClass:"label",labelBgClass:"galleryLabelContainer",detailsClass:"galleryDetail",detailsThumbClass:"galleryDetailThumb",
messageClass:"galleryMessage",_lastFocusedNode:null,_timer:null,_galleryFadeIn:null,_galleryFadeOut:null,_galleryFadeOutTotal:null,_suspendTooltip:!1,includeNode:null,_defaultNoResultsMessage:null,noResultsMessage:null,items:null,i18n:null,postMixInProperties:function(){this.inherited(arguments);this.i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this.i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").gallery);this._defaultNoResultsMessage=this.i18n.filterNoResults},
postCreate:function(){this._userToken=(this._user=arcgisonline.sharing.util.getUser())&&this._user.token;null===this.tooltip&&(this.tooltip=new arcgisonline.sharing.dijit._GalleryContentPane({_gallery:this},D.create("div",{id:this.id+"_popup"},D.body())),this._galleryFadeIn=D.animateProperty({node:this.flowContainer,properties:{opacity:1}}),this._galleryFadeOut=D.animateProperty({node:this.flowContainer,properties:{opacity:this.unfocusedOpacity}}),this._galleryFadeOutTotal=D.animateProperty({node:this.flowContainer,
properties:{opacity:0}}),D.connect(this.domNode,"scroll",this,function(){this.tooltip&&this.tooltip.isShowing&&this.tooltip.hide()}),this.showPageControls&&(D.connect(this,"onContentChange",this,this._layoutPageControls),D.connect(this,"onPageChange",this,this._layoutPageControls)))},_showTooltip:function(b,g){var d=this.tooltip.domNode,e;esriGeowConfig.isRightToLeft||(e=this.showThumbnailInDetails?{TL:"TL",TR:"TR"}:{TL:"TR",TR:"TL"});esriGeowConfig.isRightToLeft&&(e=this.showThumbnailInDetails?{BR:"BR"}:
{BR:"TR"});e=A.placeOnScreenAroundNode(d,b,e);this.tooltip.set("content",this._buildItemDetailsLayout(g,e,b));if(this.showThumbnailInDetails){var f="none"==D.style(d,"display");f&&D.style(d,{visibility:"hidden",display:"block"});var n=D.contentBox(d),h=D.coords(d);f&&D.style(d,{visibility:"",display:"none"});"TR"==e.aroundCorner?(D.style(d,"top",h.t-n.t+"px"),D.style(d,"left",h.l+n.l+"px")):"TL"==e.aroundCorner&&(D.style(d,"top",h.t-n.t+"px"),D.style(d,"left",h.l-n.l+"px"))}this._highlightNode(g);
this.tooltip.show()},node_onMouseEnter:function(b){var g=b.currentTarget,d=this._getItemByNode(g);this.onNodeMouseEnter(b,d);!this._suspendTooltip&&this.showToolTip&&(this.tooltip.isShowing&&this.tooltip.hide(),this._timer&&(clearTimeout(this._timer),this._timer=null),this._unhighlightNodes(),this._timer||(this._timer=setTimeout(D.hitch(this,function(){this._showTooltip(g,d)}),this.showDelay)))},node_onMouseLeave:function(b){this._timer&&(clearTimeout(this._timer),this._timer=null);var g=this._getItemByNode(b.currentTarget);
this.onNodeMouseLeave(b,g)},tooltip_onMouseLeave:function(b){this._unhighlightNodes();this.tooltip.hide()},_highlightNode:function(b){b=D.byId("galleryNode_"+b.id);this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeIn.stop(),this._galleryFadeOut.play()):D.style(this.flowContainer,"opacity",this.unfocusedOpacity));this.highlightFocusedNode&&D.addClass(b,this.nodeHighlightClass);this._lastFocusedNode=b},_unhighlightNodes:function(){this.fadeOutOtherNodes&&(this.animFadeOut?(this._galleryFadeOut.stop(),
this._galleryFadeIn.play()):D.style(this.flowContainer,"opacity",1));null!==this._lastFocusedNode&&D.removeClass(this._lastFocusedNode,this.nodeHighlightClass);this._lastFocusedNode=null},_loadItems:function(b){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();this._galleryFadeOutTotal.onEnd=D.hitch(this,function(g){D.empty(this.flowContainer);0<g.length?(this.maxNodes&&(g=g.splice(0,this.maxNodes)),D.forEach(g,D.hitch(this,function(d,e){d.id||(d.id=e);this.flowContainer.appendChild(this._buildNodeLayout(d,
e<this.largeNodes))})),D.create("br",{style:{clear:"both"}},this.flowContainer),g=D.query("."+this.nodeClass,this.domNode),g.connect("onmouseenter",this,this.node_onMouseEnter),g.connect("onmouseleave",this,this.node_onMouseLeave),this.tooltip&&D.connect(this.tooltip.domNode,"onmouseleave",this,this.tooltip_onMouseLeave)):D.create("span",{innerHTML:this.noResultsMessage||this._defaultNoResultsMessage,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=
null;this._suspendTooltip=!1},b);this._galleryFadeOutTotal.play()},clear:function(b){this.tooltip&&this.tooltip.hide();this._galleryFadeIn.stop();this._galleryFadeOut.stop();D.empty(this.flowContainer);D.empty(this._pages);D.create("span",{innerHTML:b,"class":this.messageClass},this.flowContainer);this._galleryFadeIn.play();this._galleryFadeOut.onEnd=null;this._suspendTooltip=!1},_buildNodeLayout:function(b,g){var d=D.create("div",{id:"galleryNode_"+b.id,"class":this.nodeClass});D.addClass(d,g?"large":
"small");var e=arcgisonline.sharing.util,f=e.relativeToExplicitUrl("images/transparent.gif");"Web Mapping Application"==b.type&&(f=e.getStaticImagesUrl()+"/webapp.png");f="Mobile Application"==b.type?e.getStaticImagesUrl()+"/mobileapp.png":"Web Scene"===b.type||"Scene Service"===b.type?e.getStaticImagesUrl()+"/desktopapp.png":"Workforce Project"===b.type?e.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===b.type?e.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===b.type?e.getStaticImagesUrl()+
"/hubpage.png":"Hub Site Application"===b.type?e.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===b.type?e.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===b.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?e.getStaticImagesUrl()+"/webtool.png":"Ortho Mapping Project"===b.type?e.getStaticImagesUrl()+"/orthomappingproject.png":"Ortho Mapping Template"===b.type?e.getStaticImagesUrl()+"/orthomappingtemplate.png":"Notebook"===b.type?e.relativeToExplicitUrl("/js/arcgisonline/css/images/notebook-thumb.png"):
e.getStaticImagesUrl()+"/desktopapp.png";e.getGalleryMainLinkInfo(b);e=D.create("a",{href:"#"},d);D.connect(e,"onclick",this,this.onNodeClick,b);D.create("img",{"class":this.thumbClass,alt:b.snippet||"",src:b.thumbnail?this._getThumbailUrl(b):f},e);this.showNodeLabels&&(f=D.create("div",{"class":"galleryLabelContainer"},d),e=b.title||"",D.create("span",{innerHTML:e,alt:e,title:e},f));return d},_buildItemDetailsLayout:function(b,g,d){return arcgisonline.sharing.dijit.views.item.medium(b,{showThumb:this.showThumbnailInDetails,
align:(esriGeowConfig.isRightToLeft?0:"TR"==g.aroundCorner)?"right":"left",hideOpenMenu:!0,showProfilePopup:!1})},_getItemByNode:function(b){for(;!D.hasClass(b,this.nodeClass);)b=b.parentNode;b=b.id.substr(b.id.indexOf("_")+1);for(var g=0;g<this.items.length;g++)if(this.items[g].id==b)return this.items[g];return null},_getThumbailUrl:function(b){var g=this._userToken;return esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/info/"+b.thumbnail+(g?"?token\x3d"+g:"")},_layoutPageControls:function(){D.empty(this._pages);
if(1!==this.pageCount){for(var b=1;b<=this.pageCount;b++){var g=D.create("span",{innerHTML:b},D.create("a",{onclick:D.hitch(this,this.goToPage,b)},this._pages));b==this.currentPage&&D.addClass(g,"currentPage")}1==this.currentPage?D.style(this._prev.domNode,"visibility","hidden"):D.style(this._prev.domNode,"visbility","");this.currentPage==this.pageCount?D.style(this._next.domNode,"visibility","hidden"):D.style(this._next.domNode,"visbility","")}},nextPage:function(b){this.currentPage<this.pageCount&&
(!b.keyCode||13===b.keyCode||32===b.keyCode)&&this.goToPage(this.currentPage+1)},prevPage:function(b){1<this.currentPage&&(!b.keyCode||13===b.keyCode||32===b.keyCode)&&this.goToPage(this.currentPage-1)},goToPage:function(b){0<this.pageCount&&!isNaN(b)&&0<b&&(this._suspendTooltip=!0,this._loadRange((b-1)*this.nodesPerPage,this.nodesPerPage),this.currentPage=b,this.onPageChange(this.currentPage,-1))},_loadRange:function(b,g){var d=D.clone(this.items);this._loadItems(d.splice(b,g))},_setItemsAttr:function(b){this.items=
this.includeNode?D.filter(b,this.includeNode):b;0==this.items.length?(this.pageCount=1,this.onContentChange(0)):(this.pageCount=Math.ceil(this.items.length/this.nodesPerPage),this.onContentChange(this.items.length));this.currentPage=1;this.goToPage(1)},onPageChange:function(b,g){},onContentChange:function(b){},onNodeClick:function(b,g){},onNodeMouseEnter:function(b,g){},onNodeMouseLeave:function(b,g){}});D.declare("arcgisonline.sharing.dijit._GalleryContentPane",A.layout.ContentPane,{_gallery:null,
animateShowHide:!0,"class":"galleryPopup",fadeDuration:300,isShowing:!1,postCreate:function(){this.inherited(arguments);D.style(this.domNode,{position:"absolute",top:"-1000px",opacity:0});D.style(this.domNode,esriGeowConfig.isRightToLeft||-1<D.indexOf(["ar","he"],D.locale)?"right":"left","-1000px");this.fadeIn=D.fadeIn({node:this.domNode,duration:this.fadeDuration});this.fadeOut=D.fadeOut({node:this.domNode,duration:this.fadeDuration,onEnd:D.hitch(this,"_afterFade")})},_afterFade:function(){D.style(this.domNode,
{top:"-1000px"});D.style(this.domNode,esriGeowConfig.isRightToLeft?"right":"left","-1000px")},show:function(b){this.isShowing=!0;this.animateShowHide?(this.fadeOut.stop(),this.fadeIn.play()):D.style(this.domNode,"display","block")},hide:function(){this.isShowing=!1;this.animateShowHide?(this.fadeIn.stop(),this.fadeOut.play()):D.style(this.domNode,"display","none")}})})},"arcgisonline/sharing/dijit/views":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,arcgisonline/pages/organization/widgets/ProfilePopup,arcgisonline/pages/portal/Portal,arcgisonline/pages/utils/arrays,arcgisonline/pages/item/_Info"],
function(D,A,a){D.provide("arcgisonline.sharing.dijit.views");D.require("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.require("arcgisonline.pages.organization.widgets.ProfilePopup");D.require("arcgisonline.pages.portal.Portal");D.require("arcgisonline.pages.utils.arrays");D.require("arcgisonline.pages.item._Info");arcgisonline.sharing.dijit.views.item={detailClass:"itemDetail",thumbClass:"itemThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);D.mixin(this._i18n,{source:D.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});D.mixin(this._i18n,{visitOrganization:D.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.visitOrganization});return this._i18n},_util:arcgisonline.sharing.util,
small:function(b,g,d){var e=D.create,f=e("div",{"class":this.detailClass+" small"}),n=this._util.getGalleryMainLinkInfo(b);g&&(g=e("div",{"class":this.thumbContainerClass},f),D.addClass(f,d),e("img",{src:this._getThumbnailUrl(b),"class":this.thumbClass},e("a",{href:n.href||"#",target:n.target,alt:n.tip,title:n.tip},g)));e("a",{href:"#",innerHTML:b.title},e("span",{"class":this.titleClass},f));d=this._util.getSnippet(b.snippet,b.description);e("span",{"class":this.snippetClass,innerHTML:d},f);b=arcgisonline.sharing.geow.Content.changeTypename(b)+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy+"\x3cspan class\x3d'esriItemOwner'\x3e"+b.owner+"\x3c/span\x3e ("+this._util.toFullDateString(b.modified)+")";e("span",{innerHTML:b},f);return f},mediumFormat:function(b,g){return this.medium(g,!0,"left")},itemLinkInfo:function(b){var g=this._util.getGalleryMainLinkInfo(b);b=this._util.getItemDetailsLinkInfo(b);return{openLink:g,detailLink:b}},medium:function(b,g){var d=D.create,e=d("div",{"class":this.detailClass+" medium"});if(g.unshareHandler){var f=
d("a",{href:"#",className:"unshare esriFloatTrailing",style:{display:"none"}},e);d("img",{src:arcgisonline.sharing.util.relativeToExplicitUrl("images/delete_20x20.png"),alt:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup,title:arcgisonline.sharing.dijit.views.item.i18n().removeItemFromGroup},f);D.connect(f,"onclick",D.partial(g.unshareHandler,b.id,e))}var n=this.itemLinkInfo(b);f=n.openLink;n=n.detailLink;if(g.showThumb){var h=d("div",{"class":this.thumbContainerClass},e);D.addClass(e,
g.align||"left");if(b.thumbnail&&0<b.thumbnail.length){var k=d("img",{src:this._getThumbnailUrl(b),"class":this.thumbClass},d("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip},h));f.onclick&&D.connect(k,"onclick",f.onclick)}else k=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png"),k="Web Mapping Application"==b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==
b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/workforceproject.png":"Hub Initiative"===b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubinitiative.png":"Hub Page"===b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubpage.png":"Hub Site Application"===b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/hubsite.png":"Dashboard"===b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/opsdashboard.png":"Geoprocessing Service"===b.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?
arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Image"===b.type?arcgisonline.sharing.util.relativeToExplicitUrl("js/arcgisonline/sharing/dijit/css/images/image-thumb.png"):"Web Scene"===b.type||"Scene Service"===b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":"Ortho Mapping Template"===b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingtemplate.png":"Ortho Mapping Project"===b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/orthomappingproject.png":
arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png",k=d("img",{src:k,"class":this.thumbClass},d("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip},h)),f.onclick&&D.connect(k,"onclick",f.onclick);d("br",null,h);h=d("span",{"class":"esriItemLinks"},h);k=this._util.getItemOpenLinkObjects(b);if(0<k.length){var c=d("span",{innerHTML:f.label},d("a",{href:f.href||"#",target:f.target,alt:f.tip,title:f.tip,style:{marginRight:0}},h));f.onclick&&D.connect(c,"onclick",f.onclick);g.hideOpenMenu||
(d("span",{innerHTML:"\x26nbsp;"},h),f=d("div",{innerHTML:"","class":"dijitReset dijitInline esriArrows",title:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,alt:arcgisonline.sharing.dijit.views.item.i18n().moreOptions,style:{height:"11px",cursor:"pointer"}},h),new arcgisonline.sharing.dijit.TextMenu({triggerNode:f,labelNode:c,textMenuItems:k}));d("span",{innerHTML:"\x26nbsp;\x26nbsp\x26nbsp;"},h)}null!==n&&d("span",{innerHTML:n.label},d("a",{href:n.link||"#",alt:n.tip,title:n.tip,target:n.target?
n.target:""},h))}f=d("div",{"class":"itemTextContainer"},e);d("a",{href:n.link,innerHTML:b.title,alt:n.tip,title:n.tip},d("span",{"class":this.titleClass},f));n=this._util.getSnippet(b.snippet,b.description);d("span",{"class":this.snippetClass,innerHTML:n||""},f);n=d("div",null,f);(h=this._getTypeIcon(b))&&d("span",{innerHTML:h},n);h="";h=arcgisonline.sharing.geow.Content.changeTypename(b)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;k=-1<D.indexOf(b.typeKeywords,"ArcGIS Server")||"Feature Collection"==
b.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"";c="GeoJson"===b.type?"GeoJSON":b.type;c=-1<c.toLowerCase().indexOf("add in")?c.replace(/(add in)/ig,"Add-In"):c;d("span",{title:k+c,innerHTML:h,"class":"dim"},n);h=d("span",{"class":"esriItemAuthor"},n);h=d("a",{innerHTML:b.owner,"class":"linkNoHref",owner:b.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},h);g.showProfilePopup?(this._bindProfilePopup(h),
D.attr(h,{"class":"linkNoHref",owner:b.owner})):D.attr(h,"href",esriGeowConfig.baseUrl+"user.html?user\x3d"+b.owner);d("div",{innerHTML:"\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(b.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},n);(h=arcgisonline.sharing.geow.Content._getPremiumItemNode(b))&&D.place(h,D.create("div",{className:"dim esriPremiumContent"},n,"last"));n=D.create("span",{"class":"dojoxRating dijitInline"});
9>D.isIE&&D.style(n,"zoom",0);h=D.create("ul",null,n);k=Math.round(b.avgRating);for(c=1;c<=k;c++)D.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},h);for(;5>k;k++)D.create("li",{"class":"dojoxRatingStar dijitInline Hover"},h);h=this._getMsgRatings(b);d=d("span",{innerHTML:h,"class":"dim"},f);D.place(n,d,"first");return e},map:function(b,g){var d=D.create;g=g||d("div",{"class":this.detailClass+" medium"});if("public_authoritative"===b.contentStatus&&!b.orgSelf)if(esriGeowConfig.self.id&&
b.orgId===esriGeowConfig.self.id)b.orgSelf=esriGeowConfig.self;else return esri.request({url:location.protocol+"//"+esriGeowConfig.self.portalHostname+"/sharing/rest/portals/"+b.orgId+"?f\x3djson",callbackParamName:"callback",load:function(c,l){b.orgSelf=c;arcgisonline.sharing.dijit.views.item.map(b,g)},error:function(c,l){b.orgSelf={};arcgisonline.sharing.dijit.views.item.map(b,g)}}),g;var e=d("div",{"class":"itemTextContainer"},g),f=this._util.getSnippet(b.snippet,b.description);d("span",{"class":this.snippetClass,
innerHTML:f?this._util.htmlEncode(f):""},e);f=d("span",null,e);var n=this._getTypeIcon(b,!0);n&&d("span",{innerHTML:n},f);n="";n=b.url&&-1<D.indexOf(b.typeKeywords,"Hosted Service")&&(arcgisonline.sharing.util.isHostedServiceItem(b)||arcgisonline.sharing.util.portalSupportsHostedServices())?arcgisonline.sharing.geow.Content.changeTypename(b,!0)+arcgisonline.sharing.dijit.views.item.i18n().startBracket+arcgisonline.sharing.dijit.views.item.i18n().hostedService+arcgisonline.sharing.dijit.views.item.i18n().endBracket+
arcgisonline.sharing.dijit.views.item.i18n().spaceBy:arcgisonline.sharing.geow.Content.changeTypename(b,!1)+arcgisonline.sharing.dijit.views.item.i18n().spaceBy;var h=-1<D.indexOf(b.typeKeywords,"ArcGIS Server")||"Feature Collection"==b.type?arcgisonline.sharing.dijit.views.item.i18n().source+" ":"",k="GeoJson"===b.type?"GeoJSON":b.type;k=-1<k.toLowerCase().indexOf("add in")?k.replace(/(add in)/ig,"Add-In"):k;d("span",{title:h+k,innerHTML:n,"class":"dim"},f);n=d("span",{"class":"esriItemAuthor"},
f);"public_authoritative"===b.contentStatus&&b.orgSelf&&b.orgSelf.name?(n=d("a",{innerHTML:b.orgSelf.name,"class":"linkNoHref",owner:b.orgSelf.name,alt:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization,title:arcgisonline.sharing.dijit.views.item.i18n().visitOrganization},n),D.connect(n,"onclick",this,function(c){arcgisonline.map.storage.saveMapInCookie(null,!1);b.orgSelf.urlKey?c=location.protocol+"//"+b.orgSelf.urlKey+"."+b.orgSelf.customBaseUrl+"/home/index.html":(c=location.protocol+
"//"+b.orgSelf.portalHostname+"/home/index.html","7443"===location.port&&(c=arcgisonline.sharing.util.getSecureUrl(baseUrl)));window.open(c)})):(n=d("a",{innerHTML:b.owner,"class":"linkNoHref",owner:b.owner,alt:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.item.i18n().viewUserprofile},n),this._bindProfilePopup(n));D.attr(n,{"class":"linkNoHref",owner:b.owner});d("div",{innerHTML:"\x3cbr/\x3e\x3cspan\x3e"+arcgisonline.sharing.dijit.views.item.i18n().lastModifiedTitle+
"\x3c/span\x3e\x3cspan\x3e"+this._util.toFullDateString(b.modified)+"\x3c/span\x3e","class":"dim esriLastModified"},f);(n=arcgisonline.sharing.geow.Content._getPremiumItemNode(b))&&D.place(n,D.create("div",{className:"dim esriPremiumContent"},f,"last"));f=D.create("span",{"class":"dojoxRating dijitInline"});9>D.isIE&&D.style(f,"zoom",0);n=D.create("ul",null,f);h=Math.round(b.avgRating);for(k=1;k<=h;k++)D.create("li",{"class":"dojoxRatingStar dijitInline dojoxRatingStarChecked"},n);for(;5>h;h++)D.create("li",
{"class":"dojoxRatingStar dijitInline Hover"},n);n=this._getMsgRatings(b);d=d("span",{innerHTML:n,"class":"dim"},e);D.place(f,d,"first");return g},_bindProfilePopup:function(b){this.popup&&this.popup.close();D.connect(b,"onclick",this,function(g){var d=D.attr(g.currentTarget,"owner");this.popup=new arcgisonline.pages.organization.widgets.ProfilePopup({username:d,opener:g.target,portal:new arcgisonline.pages.portal.Portal(esriGeowConfig.restBaseUrl)});this.popup.open()})},_getMsgRatings:function(b){var g=
"";g=1===b.numRatings?g+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingMsg,{ratingcount:D.number.format(b.numRatings,{pattern:"#,###,###,##0"})}):g+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().ratingsMsg,{ratingcount:D.number.format(b.numRatings,{pattern:"#,###,###,##0"})});g=1===b.numComments?g+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentMsg,{commentcount:D.number.format(b.numComments,{pattern:"#,###,###,##0"})}):g+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().commentsMsg,
{commentcount:D.number.format(b.numComments,{pattern:"#,###,###,##0"})});var d=b.type;d=d?arcgisonline.pages.item._Info[d]||null:null;g=!d||"file"!==d.classification||arcgisonline.pages.utils.arrays.includes(d.types,"is-views")||arcgisonline.pages.utils.arrays.includes(d.types,"is-pdf")?1===b.numViews?g+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewMsg,{viewcount:D.number.format(b.numViews,{pattern:"#,###,###,##0"})}):g+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().viewsMsg,
{viewcount:D.number.format(b.numViews,{pattern:"#,###,###,##0"})}):1===b.numViews?g+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadMsg,{downloadcount:D.number.format(b.numViews,{pattern:"#,###,###,##0"})}):g+D.string.substitute(arcgisonline.sharing.dijit.views.item.i18n().downloadsMsg,{downloadcount:D.number.format(b.numViews,{pattern:"#,###,###,##0"})});return g=arcgisonline.sharing.dijit.views.item.i18n().startBracket+g+arcgisonline.sharing.dijit.views.item.i18n().endBracket},
_getThumbnailUrl:function(b){var g=this._util.getToken();g=g?"?token\x3d"+g:"";if(b.thumbnail)return esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/info/"+b.thumbnail+g;g=this._util.relativeToExplicitUrl("images/web-thumbnail-error.png");return g="Web Mapping Application"==b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/webapp.png":"Mobile Application"==b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/mobileapp.png":"Workforce Project"==b.type?arcgisonline.sharing.util.getStaticImagesUrl()+
"/workforceproject.png":"Geoprocessing Service"===b.type&&esriGeowConfig.self&&esriGeowConfig.self.isPortal?arcgisonline.sharing.util.getStaticImagesUrl()+"/webtool.png":"Web Scene"==b.type||"Scene Service"===b.type?arcgisonline.sharing.util.getStaticImagesUrl()+"/scene.png":arcgisonline.sharing.util.getStaticImagesUrl()+"/desktopapp.png"},_getTypeIcon:function(b,g){var d=arcgisonline.sharing.geow.Content._getItemIconUrl(b,!0),e=(-1<D.indexOf(b.typeKeywords,"ArcGIS Server")||"Feature Collection"==
b.type?this.i18n().source+" ":"")+("GeoJson"===b.type?"GeoJSON":b.type),f="";d&&("Web Scene"===e&&(e=-1<D.indexOf(b.typeKeywords,"ViewingMode-Local")?this.i18n().localWebScene:this.i18n().globalWebScene),f='\x3cimg src\x3d"'+d+'" alt\x3d"'+e+'" title\x3d"'+e+'" style\x3d"vertical-align:middle;"/\x3e\x26nbsp;');return f}};arcgisonline.sharing.dijit.views.group={_util:arcgisonline.sharing.util,detailClass:"itemDetail group",thumbClass:"groupThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle",
snippetClass:"esriItemSnippet",i18n:function(){if(this._i18n)return this._i18n;this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(b){var g=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/groups/"+b.id+"/info/"+b.thumbnail+(g?"?token\x3d"+g:"")},small:function(b,g,d){var e=D.create,f=e("div",{"class":this.detailClass});D.addClass(f,
"small");var n={target:"",href:"#"};g&&(g=e("div",{"class":this.thumbContainerClass},f),D.addClass(f,d||"left"),b.thumbnail&&0<b.thumbnail.length?e("img",{src:this._getThumbnailUrl(b),"class":this.thumbClass},g):e("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},g));e("a",{href:n.href,target:n.target,innerHTML:b.title,alt:n.tip,title:n.tip},e("span",{"class":this.titleClass},f));d=this._util.getSnippet(b.snippet,b.description);e("span",{"class":this.snippetClass,
innerHTML:d},f);d=e("span",null,null);e("span",{innerHTML:"owned by ","class":"dim"},d);d=e("span",{"class":"esriItemAuthor"},d);e("a",{innerHTML:b.owner,href:""},d);return f},medium:function(b,g){var d=D.create,e=d("div",{"class":this.detailClass+" medium"}),f=esriGeowConfig.baseUrl+"group.html?id\x3d"+b.id;arcgisonline.sharing.dijit.views.group.i18n();arcgisonline.sharing.dijit.views.group.i18n();if(g.showThumb){var n=d("div",{"class":this.thumbContainerClass},e);D.addClass(e,g.align||"left");if(g.groupsUser){var h=
this._util.getUser();arcgisonline.sharing.geow.Community.getProfile(b.owner,D.hitch(this,function(l,r,m){r.code||r.message?d("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},d("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},n)):"public"===l.access||r.orgId&&r.orgId===h.accountId?b.thumbnail&&0<b.thumbnail.length?d("img",{src:this._getThumbnailUrl(b),
"class":this.thumbClass},d("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},n)):d("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),"class":this.thumbClass},d("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},n)):d("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},d("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},n))},b))}else b.thumbnail&&0<b.thumbnail.length?d("img",{src:this._getThumbnailUrl(b),"class":this.thumbClass},d("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},n)):d("img",{src:this._util.relativeToExplicitUrl("images/group-no-image.png"),
"class":this.thumbClass},d("a",{href:f||"#",alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},n)),d("br",null,n),D.place(this._util.getGroupLinks(b),n)}var k=d("div",{"class":"itemTextContainer"},e);d("a",{href:f,innerHTML:b.title,alt:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails,title:arcgisonline.sharing.dijit.views.group.i18n().viewGroupDetails},d("span",{"class":this.titleClass},k));var c=this._util.getSnippet(b.snippet,
b.description);d("span",{"class":this.snippetClass,innerHTML:c||""},k);k=d("span",null,k);d("span",{innerHTML:arcgisonline.sharing.dijit.views.group.i18n().createdBy,"class":"dim"},k);c=d("span",{"class":"esriItemAuthor"},k);c=d("a",{innerHTML:b.owner,alt:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile,title:arcgisonline.sharing.dijit.views.group.i18n().viewUserprofile},c);g.showProfilePopup?(this._bindProfilePopup(c),D.attr(c,{"class":"linkNoHref",owner:b.owner})):D.attr(c,"href",esriGeowConfig.baseUrl+
"user.html?user\x3d"+b.owner);c=b.created;d("span",{innerHTML:"\x26nbsp;"+arcgisonline.sharing.dijit.views.group.i18n().createdOn+"\x26nbsp;"+this._util.toFullDateString(c),"class":"dim"},k);return e}};arcgisonline.sharing.dijit.views.profile={_util:arcgisonline.sharing.util,detailClass:"itemDetail",thumbClass:"profileThumbnail",thumbContainerClass:"itemThumbnailContainer",titleClass:"esriItemTitle esriProfilePopupTitle",snippetClass:"esriItemSnippet",noDescriptionText:"",i18n:function(){if(this._i18n)return this._i18n;
this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget);return this._i18n},_getThumbnailUrl:function(b){var g=this._util.getToken();return esriGeowConfig.restBaseUrl+"community/users/"+b.username+"/info/"+b.thumbnail+(g?"?token\x3d"+g:"")},medium:function(b,g){arcgisonline.sharing.dijit.views.profile.noDescriptionText=arcgisonline.sharing.dijit.views.profile.i18n().userPersonalInfoMsg;arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText=
arcgisonline.sharing.dijit.views.profile.i18n().memberPersonalInfoMsg;var d=arcgisonline.sharing.util.getUser(),e=D.create,f=e("div",{"class":this.detailClass});D.addClass(f,"medium");e("div",{"class":this.titleClass,innerHTML:b.fullName||b.username},f);if(d&&d.accountId&&b.accountId&&b.role&&d.accountId==b.accountId){var n="\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;";"account_publisher"===b.role?n+=arcgisonline.sharing.dijit.views.profile.i18n().publisher:"account_admin"===b.role?n+=arcgisonline.sharing.dijit.views.profile.i18n().administrator:
"account_user"===b.role&&(n+=arcgisonline.sharing.dijit.views.profile.i18n().user);e("span",{innerHTML:n},e("strong",{},f))}g.showThumb&&(n=e("div",{"class":this.thumbContainerClass},f),D.addClass(f,g.align||"left"),b.thumbnail&&0<b.thumbnail.length?e("img",{src:this._getThumbnailUrl(b),"class":this.thumbClass},n):e("img",{src:this._util.relativeToExplicitUrl("js/arcgisonline/css/images/no-user-thumb.jpg"),"class":this.thumbClass,style:"width:150px; height:150px;"},n));n=e("div",{"class":this.snippetClass},
e("span",{"class":"esriItemLinks"},f));var h=this._util.removeHTMLTags(b.description),k=d&&d.accountId&&b.orgId&&d.accountId===b.orgId?arcgisonline.sharing.dijit.views.profile.memberNoDescriptionText:arcgisonline.sharing.dijit.views.profile.noDescriptionText;h=0<h.length?b.description:k;h=this._util.linkifyText(h);8>D.isIE&&(h="\x3cpre class\x3d'esriProfileDesc'\x3e"+h+"\x3c/pre\x3e");e("span",{innerHTML:h,style:"white-space:pre-wrap;"},n,"only");if("undefined"!==typeof isEmbedded&&isEmbedded)return f;
n=e("div",{style:{clear:"both"},"class":"profileLinks esriItemLinks esriFloatTrailing left"},f);h=e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"user.html?user\x3d"+b.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().profile},n,"last");D.connect(h,"onclick",function(){-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&arcgisonline.map.main.map&&arcgisonline.map.main.mapInitialized?arcgisonline.map.storage.saveMapInCookie(null,!0,null,null,D.hitch(this,function(){window.location=
esriGeowConfig.baseUrl+"user.html?user\x3d"+b.username})):window.location=esriGeowConfig.baseUrl+"user.html?user\x3d"+b.username});this._util.relativeToExplicitUrl("js/arcgisonline/css/images/transparent.gif");-1<window.location.href.indexOf(esriGeowConfig.webmapViewerPath)&&this._util.relativeToExplicitUrl("images/transparent.gif");h=esriGeowConfig.userRole&&esriGeowConfig.userRole.isAdmin();var c=(k=esriGeowConfig.userRole&&esriGeowConfig.userRole.isCustom())&&esriGeowConfig.userRole.canViewUsers()&&
esriGeowConfig.userRole.canViewOrgItems();d&&(d.username===b.username?e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},n,"last"):d.accountId&&d.role&&b.orgId&&b.role&&(h||k&&c)&&d.accountId===b.orgId&&e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"content.html?user\x3d"+b.username,innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().manageItems},n,"last"));e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?q\x3downer:%22"+
b.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().items},n,"last");e("a",{tabIndex:0,href:esriGeowConfig.baseUrl+"search.html?t\x3dgroups\x26q\x3downer:%22"+b.username+"%22\x26restrict\x3dfalse",innerHTML:arcgisonline.sharing.dijit.views.profile.i18n().groups},n,"last");e("div",{style:{clear:"both",width:"100%"}},f);return f}}})},"arcgisonline/pages/organization/widgets/ProfilePopup":function(){define("require exports tslib esri/Evented dojo/keys dojo/on dojo/text!./templates/ProfilePopup.html dojo/i18n!../../../nls/arcgisonline dijit/_TemplatedMixin dijit/_WidgetBase dijit/popup dijit/TooltipDialog arcgisonline/pages/utils/icons arcgisonline/pages/utils/dom arcgisonline/pages/utils/strings arcgisonline/pages/utils/user arcgisonline/pages/utils/focus arcgisonline/pages/pageUtil arcgisonline/pages/dijit/MemberThumb arcgisonline/pages/organization/widgets/GroupIcon arcgisonline/pages/portal/PortalUser arcgisonline/sharing/util arcgisonline/esriGeowConfig arcgisonline/sharing/dijit/_LevelAwareMixin arcgisonline/telemetry arcgisonline/tsutils/declareDecorator".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l,r,m,q,v,B,w,z,x,y,u,t,C,E){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);r=a.__importDefault(r);m=a.__importDefault(m);q=a.__importDefault(q);v=a.__importDefault(v);B=a.__importDefault(B);w=a.__importDefault(w);z=a.__importDefault(z);x=a.__importDefault(x);y=a.__importDefault(y);u=
a.__importDefault(u);t=a.__importDefault(t);C=a.__importDefault(C);E=a.__importDefault(E);return function(){function F(G,H){this.templateString=e["default"];this.i18n=f["default"];this.icons=l["default"];this.isSelf=this.loaded=!1;this.itemTotal=0;this.canUpdateProfile=!1}F.prototype.postCreate=function(){var G;this.inherited(arguments);this.telemetry=C["default"].init(this.portal,!0);this.dialog=new c["default"]({"class":"profile-popup",title:"",content:this.domNode,_onKey:this.handleDialogKeydown.bind(this)});
this.currentUser=y["default"].getUser();this.isSelf=(null===(G=this.currentUser)||void 0===G?void 0:G.username)===this.username;this.addEventListeners()};F.prototype.open=function(){this.logEvent("open");this.render()};F.prototype.close=function(){this.loaded&&(k["default"].close(this.dialog),this.emit("close"),this.dialog.destroy(),this.destroy())};F.prototype.handleDialogKeydown=function(G){var H=this;if(G.keyCode===g["default"].TAB)if(G.stopPropagation(),this.lastFocusItem!==G.target||G.shiftKey)G.shiftKey&&
this.firstFocusItem===G.target&&(G.preventDefault(),this.opener.focus(),this.close());else{G.preventDefault();var L=v["default"].getFocusableElements(document.body);L.forEach(function(J,S){J===H.opener&&L[S+1].focus()});this.close()}};F.prototype.render=function(){var G=this;this.getUser(this.username).then(function(H){var L,J,S=null===(L=G.currentUser)||void 0===L?void 0:L.userRole;L=H.orgId&&H.orgId===(null===(J=G.currentUser)||void 0===J?void 0:J.orgId);J=(null===S||void 0===S?void 0:S.isAdmin())&&
L;G.canUpdateProfile=G.isSelf||J||(null===S||void 0===S?void 0:S.canUpdateUsers())&&L;H.fullName||(H.fullName=q["default"].createFullName(H));S=H.username;J=H.fullName;L=H.groups;var P=H.description;H.thumbnailUrl||(H.thumbnailUrl="");new w["default"]({member:new x["default"](a.__assign(a.__assign({},H),{portal:G.portal})),cssClasses:"member-thumb--small margin-right-half flex-0"},G.domNode.querySelector(".js-member-thumb"));G.fullNameEl.textContent=J;G.usernameEl.textContent=S;P&&(P=m["default"].escapeNewlines(m["default"].addHyperlinks(m["default"].restoreNewlines(P))));
G.bioEl.innerHTML=m["default"].insertHTMLLineBreaks(P);P||r["default"].hideNode(G.bioContainer);L?G.renderGroups(L):G.getUserGroups(S).then(function(Q){G.renderGroups(Q.results)});G.user=H;G.getUserItems(S).then(function(Q){Q.total&&(G.itemCountEl.textContent=G.itemTotal=Q.total,r["default"].showNode(G.itemsSection));G.showContent();G.checkIfHideProfileLink()},function(){G.showContent();G.checkIfHideProfileLink()})})};F.prototype.checkIfHideProfileLink=function(){this.itemTotal||this.canUpdateProfile||
r["default"].hideNode(this.viewProfileBtn)};F.prototype.renderGroups=function(G){var H=this;if(G&&G.length){if(G.slice(0,5).forEach(function(J){J=new z["default"]({group:J,portal:H.portal,size:"32",letterSize:"1",cssClasses:"org-member-card__group-tile"});H.groupIcons.appendChild(J.domNode)}),5<G.length){var L=document.createElement("div");L.className="org-member-card__more-tile link-darker-gray flex-center";L.textContent="+"+(G.length-5);this.groupIcons.appendChild(L)}}else r["default"].hideNode(this.groupsSection)};
F.prototype.getUserItems=function(G){var H;return y["default"].request({url:u["default"].restBaseUrl+"search",content:{q:'owner:"'+G+'" '+((null===(H=null===u["default"]||void 0===u["default"]?void 0:u["default"].viewQueries)||void 0===H?void 0:H.none)||""),sortField:"relevance",sortOrder:"desc",num:100}})};F.prototype.getUserGroups=function(G){return y["default"].request({url:u["default"].restBaseUrl+"community/groups",content:{q:'(owner:"'+G+'")'}})};F.prototype.showContent=function(){var G=this;
this.groupsSection.classList.contains("hide")&&this.itemsSection.classList.contains("hide")&&!this.bioEl.innerHTML&&r["default"].hideNode(this.bottomSection);this.loader.classList.remove("is-active");r["default"].showNode(this.content);this.loaded=!0;k["default"].open({popup:this.dialog,orient:["below","above"],around:this.opener,onCancel:function(){G.opener.focus();G.close()}});var H=v["default"].getFocusableElements(this.dialog.domNode);this.firstFocusItem=H[0];this.lastFocusItem=H[H.length-1];
this.firstFocusItem.focus();this.dialog.domNode.parentElement.classList.add("profile-popup__container");this.dialogClass&&this.dialog.domNode.parentElement.classList.add(this.dialogClass);setTimeout(function(){r["default"].showHide(G.bioToggle,G.bioEl.scrollHeight>G.bioEl.clientHeight)},100)};F.prototype.getUser=function(G){return y["default"].request({url:u["default"].restBaseUrl+"community/users/"+G})};F.prototype.addEventListeners=function(){var G=this;this.own(d["default"](this.closeIcon,"click",
function(){k["default"].close(G.dialog)}),d["default"](this.domNode,"click",function(H){H.stopPropagation()}),d["default"](document.body,"click",function(){G.close()}),d["default"](this.groupsSection,"click",function(){G.logEvent("view all groups");B["default"].goToPage("groups",G.user)}),d["default"](this.itemsSection,"click",function(){G.logEvent("view all content");B["default"].goToPage("content",G.user)}),d["default"](this.viewProfileBtn,"click",function(){G.logEvent("view profile");window.open(u["default"].baseUrl+
"user.html"+(G.isSelf?"":"?user\x3d"+G.username),"_blank")}),d["default"](this.bioToggle,"click",function(){return G.handleBioToggleClick()}))};F.prototype.handleBioToggleClick=function(){this.bioContainer.classList.toggle("profile-popup__bio-container--expanded")};F.prototype.logEvent=function(G){var H;null===(H=this.telemetry)||void 0===H?void 0:H.logEvent({category:"profile popup",action:G})};return F=a.__decorate([E["default"](h["default"],n["default"],t["default"],b["default"])],F)}()})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),
function(D,A,a,b,g,d,e,f,n,h,k,c,l){D=D("dijit.TooltipDialog",[f,k,h,n],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:c,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(d(this.domNode,"keydown",g.hitch(this,"_onKey")))},orient:function(r,m,q){r={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[m+"-"+q];A.replace(this.domNode,r,this._currentOrientClass||"");this._currentOrientClass=r},focus:function(){this._getFocusItems();
e.focus(this._firstFocusItem)},onOpen:function(r){this.orient(this.domNode,r.aroundCorner,r.corner);var m=r.aroundNodePos;"M"==r.corner.charAt(0)&&"M"==r.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-r.y+"px",this.connectorNode.style.left=""):"M"==r.corner.charAt(1)&&"M"==r.aroundCorner.charAt(1)&&(this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-r.x+"px");this._onShow()},onClose:function(){this.onHide()},_onKey:function(r){if(r.keyCode==
b.ESCAPE)this.defer("onCancel"),r.stopPropagation(),r.preventDefault();else if(r.keyCode==b.TAB){var m=r.target;this._getFocusItems();this._firstFocusItem==this._lastFocusItem?(r.stopPropagation(),r.preventDefault()):m==this._firstFocusItem&&r.shiftKey?(e.focus(this._lastFocusItem),r.stopPropagation(),r.preventDefault()):m!=this._lastFocusItem||r.shiftKey?r.stopPropagation():(e.focus(this._firstFocusItem),r.stopPropagation(),r.preventDefault())}}});a("dojo-bidi")&&D.extend({_setTitleAttr:function(r){this.containerNode.title=
this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,r):r;this._set("title",r)},_setTextDirAttr:function(r){this._created&&this.textDir==r||(this._set("textDir",r),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}});return D})},"arcgisonline/pages/utils/focus":function(){define(["require","exports","tslib","./dom"],function(D,A,a,b){b=a.__importDefault(b);return function(){function g(){}g.getFocusableElements=function(d){d=d.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex\x3d"-1"]), iframe');
for(var e=[],f=0;f<d.length;f++){var n=d[f];null===n.offsetParent||b["default"].canBeDisabled(n)&&n.disabled||e.push(n)}return e};g.trapFocus=function(d){function e(n){var h=f(),k=h[0];h=h[h.length-1];if("Tab"===n.key||9===n.keyCode)n.shiftKey?document.activeElement===k&&(h.focus(),n.preventDefault()):document.activeElement===h&&(k.focus(),n.preventDefault())}var f=this.getFocusableElements.bind(this,d);d.addEventListener("keydown",e);return e};g.untrapFocus=function(d,e){d.removeEventListener("keydown",
e)};return g}()})},"arcgisonline/pages/dijit/MemberThumb":function(){define("require exports tslib dojo/on dojo/text!./MemberThumb/templates/MemberThumb.html dijit/_TemplatedMixin dijit/_WidgetBase ../utils/formatters ../utils/strings ../utils/icons ../utils/dom ../../tsutils/declareDecorator arcgisonline/esriGeowConfig".split(" "),function(D,A,a,b,g,d,e,f,n,h,k,c,l){b=a.__importDefault(b);g=a.__importDefault(g);d=a.__importDefault(d);e=a.__importDefault(e);f=a.__importDefault(f);n=a.__importDefault(n);
h=a.__importDefault(h);k=a.__importDefault(k);c=a.__importDefault(c);l=a.__importDefault(l);return function(){function r(m,q){this.icons=h["default"];this.templateString=g["default"];this.hide=f["default"].hide;this.show=f["default"].show;this.cssClasses="";this.showTooltip=!1}r.prototype.postMixInProperties=function(){var m,q;this.inherited(arguments);this.member.thumbnailUrl&&this.member.thumbnailUrl!==this.member.defaultThumbnailUrl?((null===(m=l["default"].userInfo)||void 0===m?0:m.token)&&-1===
this.member.thumbnailUrl.indexOf("token")&&(this.member.thumbnailUrl+=(-1<this.member.thumbnailUrl.indexOf("?")?"\x26":"?")+"token\x3d"+(null===(q=l["default"].userInfo)||void 0===q?void 0:q.token)),this.member.initials="",this.member.backgroundColor="#FFFFFF"):this.showInitials()};r.prototype.postCreate=function(){var m=this;this.inherited(arguments);this.showTooltip&&(this.domNode.setAttribute("aria-label",this.member.fullName),this.domNode.classList.add("tooltip"));this.own(b["default"](this.img,
"error",function(){return m.showInitials()}))};r.prototype.showInitials=function(){if(this.member.fullName.trim()){var m=this.member.fullName.split(" ");this.member.initials=m[0].substring(0,1)+(m[1]?m[1].substring(0,1):"")}else this.member.username&&(this.member.initials=this.member.username.substring(0,2));this.initials&&(this.initials.textContent=this.member.initials);this.member.backgroundColor=this._getMemberFillColor(this.member);this.content&&(this.content.style.backgroundColor=this.member.backgroundColor);
k["default"].hideNode(this.img);k["default"].showNode(this.initials)};r.prototype._getMemberFillColor=function(m){var q=m.id?m.id.substr(m.id.length-6):"";n["default"].isValidHex(q)||(q=n["default"].stringToHex(m.username));m=n["default"].hexToRgb(q);return"rgba("+m.r+","+m.g+","+m.b+", 0.2)"};return r=a.__decorate([c["default"](e["default"],d["default"])],r)}()})},"dojo/NodeList-fx":function(){define(["./query","./_base/lang","./aspect","./_base/fx","./fx"],function(D,A,a,b,g){D=D.NodeList;A.extend(D,
{_anim:function(d,e,f){f=f||{};var n=g.combine(this.map(function(h){h={node:h};A.mixin(h,f);return d[e](h)}));return f.auto?n.play()&&this:n},wipeIn:function(d){return this._anim(g,"wipeIn",d)},wipeOut:function(d){return this._anim(g,"wipeOut",d)},slideTo:function(d){return this._anim(g,"slideTo",d)},fadeIn:function(d){return this._anim(b,"fadeIn",d)},fadeOut:function(d){return this._anim(b,"fadeOut",d)},animateProperty:function(d){return this._anim(b,"animateProperty",d)},anim:function(d,e,f,n,h){var k=
g.combine(this.map(function(c){return b.animateProperty({node:c,properties:d,duration:e||350,easing:f})}));n&&a.after(k,"onEnd",n,!0);return k.play(h||0)}});return D})},"arcgisonline/sharing/geow/QueryReadStore":function(){define(["dojo","dijit","dojox","dojo/require!dojox/data/QueryReadStore,arcgisonline/sharing/geow/Content"],function(D,A,a){D.provide("arcgisonline.sharing.geow.QueryReadStore");D.require("dojox.data.QueryReadStore");D.require("arcgisonline.sharing.geow.Content");D.declare("arcgisonline.sharing.geow.QueryReadStore",
a.data.QueryReadStore,{_fetchItems:function(b,g,d){var e=b.serverQuery||b.query||{};e.start=b.start||0;e.start++;b.count&&(e.num=b.count);arcgisonline.sharing.geow.Content.search(this.url,e,D.hitch(this,function(f){var n=f.total||-1;D.publish("gridCount",[f.total]);this.onResultCount(f.total);this._total=f.total;this._items=[];D.forEach(f.results,function(k,c){var l=k.tags||k.keywords||[],r=void 0==k.imageUrl?arcgisonline.sharing.geow.Content._getItemImageUrl(k):k.imageUrl,m=k.uploaded||k.created,
q=void 0==k.extent?arcgisonline.sharing.geow.Community._getGroupTitleLink(k):k.title,v=k.item||"",B="";k.snippet&&0<k.snippet.length&&"null"!=k.snippet?B=150<k.snippet.length?k.snippet.substring(0,150)+"...":k.snippet:k.description&&0<k.description.length&&"null"!=k.description&&(B=150<k.description.length?k.description.substring(0,150)+"...":k.description);l={id:k.id||"",owner:k.owner,title:q,description:k.description,snippet:B,snippetFull:k.snippet,tags:l.join?l.join(","):l,imageUrl:r,thumbnail:k.thumbnail,
isInvitationOnly:k.isInvitationOnly,created:m,modified:k.modified,itemType:k.itemType||"",typeKeywords:k.typeKeywords||"",type:k.type||"",extent:k.extent||"",item:v,numComments:k.numComments,numRatings:k.numRatings,avgRating:k.avgRating,numViews:k.numViews};this._items.push({i:l,r:this})},this);this._itemsByIdentity={};this._identifier="id";for(i=0;i<this._items.length;++i){f=this._items[i].i;var h=f.id;this._itemsByIdentity[h]||(this._itemsByIdentity[h]=f)}n=-1===n?this._items.length:n;g(this._items,
b,n);this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=D.mixin({},e)}))},onResultCount:function(b){}})})},"dojox/data/QueryReadStore":function(){define(["dojo","dojox","dojo/data/util/sorter","dojo/string"],function(D,A){return D.declare("dojox.data.QueryReadStore",null,{url:"",requestMethod:"get",_className:"dojox.data.QueryReadStore",_items:[],_lastServerQuery:null,_numRows:-1,lastRequestHash:null,doClientPaging:!1,doClientSorting:!1,_itemsByIdentity:null,
_identifier:null,_features:{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0},_labelAttr:"label",constructor:function(a){D.mixin(this,a)},getValue:function(a,b,g){this._assertIsItem(a);if(!D.isString(b))throw Error(this._className+".getValue(): Invalid attribute, string expected!");return!this.hasAttribute(a,b)&&g?g:a.i[b]},getValues:function(a,b){this._assertIsItem(a);var g=[];this.hasAttribute(a,b)&&g.push(a.i[b]);return g},getAttributes:function(a){this._assertIsItem(a);var b=[],g;for(g in a.i)b.push(g);
return b},hasAttribute:function(a,b){return this.isItem(a)&&"undefined"!=typeof a.i[b]},containsValue:function(a,b,g){a=this.getValues(a,b);b=a.length;for(var d=0;d<b;d++)if(a[d]==g)return!0;return!1},isItem:function(a){return a?"undefined"!=typeof a.r&&a.r==this:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this.isItemLoaded(a.item)},fetch:function(a){a=a||{};a.store||(a.store=this);var b=this;this._fetchItems(a,function(g,d,e){var f=d.abort||null,n=!1,h=d.start?d.start:
0;0==b.doClientPaging&&(h=0);var k=d.count?h+d.count:g.length;d.abort=function(){n=!0;f&&f.call(d)};var c=d.scope||D.global;d.store||(d.store=b);d.onBegin&&d.onBegin.call(c,e,d);d.sort&&b.doClientSorting&&g.sort(D.data.util.sorter.createSortFunction(d.sort,b));if(d.onItem)for(e=h;e<g.length&&e<k;++e){var l=g[e];n||d.onItem.call(c,l,d)}d.onComplete&&!n&&(e=null,d.onItem||(e=g.slice(h,k)),d.onComplete.call(c,e,d))},function(g,d){d.onError&&d.onError.call(d.scope||D.global,g,d)});return a},getFeatures:function(){return this._features},
close:function(a){},getLabel:function(a){if(this._labelAttr&&this.isItem(a))return this.getValue(a,this._labelAttr)},getLabelAttributes:function(a){return this._labelAttr?[this._labelAttr]:null},_xhrFetchHandler:function(a,b,g,d){a=this._filterResponse(a);a.label&&(this._labelAttr=a.label);d=a.numRows||-1;this._items=[];D.forEach(a.items,function(h){this._items.push({i:h,r:this})},this);a=a.identifier;this._itemsByIdentity={};if(a){this._identifier=a;var e;for(e=0;e<this._items.length;++e){var f=
this._items[e].i,n=f[a];if(this._itemsByIdentity[n])throw Error(this._className+":  The json data as specified by: ["+this.url+"] is malformed.  Items within the list have identifier: ["+a+"].  Value collided: ["+n+"]");this._itemsByIdentity[n]=f}}else for(this._identifier=Number,e=0;e<this._items.length;++e)this._items[e].n=e;d=this._numRows=-1===d?this._items.length:d;g(this._items,b,d);this._numRows=d},_fetchItems:function(a,b,g){var d=a.serverQuery||a.query||{};this.doClientPaging||(d.start=a.start||
0,a.count&&(d.count=a.count));if(!this.doClientSorting&&a.sort){var e=[];D.forEach(a.sort,function(n){n&&n.attribute&&e.push((n.descending?"-":"")+n.attribute)});d.sort=e.join(",")}if(this.doClientPaging&&null!==this._lastServerQuery&&D.toJson(d)==D.toJson(this._lastServerQuery))this._numRows=-1===this._numRows?this._items.length:this._numRows,b(this._items,a,this._numRows);else{var f=("post"==this.requestMethod.toLowerCase()?D.xhrPost:D.xhrGet)({url:this.url,handleAs:"json-comment-optional",content:d,
failOk:!0});a.abort=function(){f.cancel()};f.addCallback(D.hitch(this,function(n){this._xhrFetchHandler(n,a,b,g)}));f.addErrback(function(n){g(n,a)});this.lastRequestHash=(new Date).getTime()+"-"+String(Math.random()).substring(2);this._lastServerQuery=D.mixin({},d)}},_filterResponse:function(a){return a},_assertIsItem:function(a){if(!this.isItem(a))throw Error(this._className+": Invalid item argument.");},_assertIsAttribute:function(a){if("string"!==typeof a)throw Error(this._className+": Invalid attribute argument ('"+
a+"').");},fetchItemByIdentity:function(a){if(this._itemsByIdentity){var b=this._itemsByIdentity[a.identity];if(void 0!==b){a.onItem&&a.onItem.call(a.scope?a.scope:D.global,{i:b,r:this});return}}this._fetchItems({serverQuery:{id:a.identity}},function(g,d){var e=a.scope?a.scope:D.global;try{var f=null;g&&1==g.length&&(f=g[0]);a.onItem&&a.onItem.call(e,f)}catch(n){a.onError&&a.onError.call(e,n)}},function(g,d){var e=a.scope?a.scope:D.global;a.onError&&a.onError.call(e,g)})},getIdentity:function(a){var b=
null;return b=this._identifier===Number?a.n:a.i[this._identifier]},getIdentityAttributes:function(a){return[this._identifier]}})})},"arcgisonline/sharing/geow/Content":function(){define(["dojo","dijit","dojox","dojo/require!arcgisonline/sharing/util,esri/arcgis/Portal"],function(D,A,a){D.provide("arcgisonline.sharing.geow.Content");D.require("arcgisonline.sharing.util");D.require("esri.arcgis.Portal");arcgisonline.sharing.geow.Content={util:arcgisonline.sharing.util,i18n:function(){if(this._i18n)return this._i18n;
this._i18n=D.i18n.getLocalization("arcgisonline","arcgisonline").common;D.mixin(this._i18n,{source:D.i18n.getLocalization("arcgisonline","arcgisonline").itemProperties.source});D.mixin(this._i18n,{viewsWidget:D.i18n.getLocalization("arcgisonline","arcgisonline").viewsWidget});return this._i18n},getUserInfo:function(b,g){var d=this.util.getUser();null!=d&&this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+(d.username||d.email),b,g)},getUserItems:function(b,g,d){var e=this.util.getUser();
null!=e&&(e=esriGeowConfig.restBaseUrl+"content/users/"+(e.username||e.email),null!=b&&""!==b&&(e=e+"/"+b),this.util.getJson(e,g,d))},getUserItemsByUser:function(b,g,d,e){null!=this.util.getUser()&&(b=esriGeowConfig.restBaseUrl+"content/users/"+b,null!=g&&""!==g&&(b=b+"/"+g),this.util.getJson(b,d,e))},getUserServers:function(b){void 0!==this._userServers&&b(this._userServers);this.util.getJson(esriGeowConfig.serversRestBaseUrl,function(g){b(this._userServers=g.servers)},function(g){b(null)})},addItem:function(b,
g,d,e){var f=this.util.getUser();if(null!=f){f=esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email);null!=b&&(f=f+"/"+b);f+="/addItem";b=!1;for(var n=0;n<g.childNodes.length;n++){var h=g.childNodes[n];if("async"===h.name&&"true"===h.value){b=!0;break}}b?this.util.postForm(g,f,D.hitch(arcgisonline.sharing.geow.Content,"addItemAsyncHandler",d,e),e):this.util.postForm(g,f,d,e)}},addItemByUser:function(b,g,d,e,f){if(null!=this.util.getUser()){b=esriGeowConfig.restBaseUrl+"content/users/"+
b;null!=g&&(b=b+"/"+g);b+="/addItem";g=!1;for(var n=0;n<d.childNodes.length;n++){var h=d.childNodes[n];if("async"===h.name&&"true"===h.value){g=!0;break}}g?this.util.postForm(d,b,D.hitch(arcgisonline.sharing.geow.Content,"addItemByUserAsyncHandler",e,f),f):this.util.postForm(d,b,e,f)}},addItemAsyncHandler:function(b,g,d,e){d&&d.success&&!0===d.success?arcgisonline.sharing.geow.Content.itemStatus(d,D.hitch(arcgisonline.sharing.geow.Content,"itemStatusHandler",0,d,b,g),g):g(d,e)},addItemByUserAsyncHandler:function(b,
g,d,e){d&&d.success&&!0===d.success?arcgisonline.sharing.geow.Content.itemStatus(d,D.hitch(arcgisonline.sharing.geow.Content,"itemStatusByUserHandler",0,d,b,g),g):g(d,e)},deleteService:function(b,g){this.getUserServers(D.hitch(this,function(d){if(d&&d.length&&-1<b.indexOf(esriGeowConfig.featuresRestBaseUrl+d[0].id+"/")){d=esriGeowConfig.serversRestBaseUrl+d[0].id+"/arcgis/admin/services/";d+=b.substr(b.indexOf(g)).replace("/",".")+"/delete";esri.config.defaults.io.proxyUrl=esriGeowConfig.proxyServer;
var e=D.hitch(this,function(f){esri.config.defaults.io.proxyUrl=null});this.util.postJson("",d,e,e)}}))},publishService:function(b,g,d,e){b=this.util.getUser();if(null!=b){b=esriGeowConfig.restBaseUrl+"content/users/"+(b.username||b.email)+"/publish";g=g.params;var f=D.hitch(this,function(n){d(n)});this.util.postJson(g,b,D.hitch(this,function(n){n=n.services[0];n.success=n.success||n.serviceurl&&0<n.serviceurl.length;n.success?(n.id=n.serviceItemId,d(n)):f(n)}),D.hitch(this,function(n){f({success:!1})}))}},
itemStatus:function(b,g,d){var e=this.util.getUser();if(null!=e){var f=e.username||e.email;e=b.folder;f=esriGeowConfig.restBaseUrl+"content/users/"+(b.overrideUser||f);e&&0<e.length&&"/"!=e&&(f+="/"+e);f=f+"/items/"+b.id+"/status";b.jobid&&(f+="?jobid\x3d"+b.jobid);b.type&&"image service"===b.type.toLowerCase()&&(f+="\x26jobType\x3dPublishImageService");this.util.getJson(f,g,d)}},itemStatusByUser:function(b,g,d){if(null!=this.util.getUser()){var e=b.folder,f=esriGeowConfig.restBaseUrl+"content/users/"+
b.owner;e&&0<e.length&&"/"!=e&&(f+="/"+e);f=f+"/items/"+b.id+"/status";this.util.getJson(f,g,d)}},itemStatusHandler:function(b,g,d,e,f,n){f&&f.status&&"processing"===f.status?(b++,setTimeout(D.hitch(this,function(){arcgisonline.sharing.geow.Content.itemStatus(g,D.hitch(arcgisonline.sharing.geow.Content,"itemStatusHandler",b,g,d,e),e)}),Math.min(1E3*Math.pow(2,b),6E4))):(D.mixin(f,g),d(f,n))},itemStatusByUserHandler:function(b,g,d,e,f,n){f&&f.status&&"processing"===f.status?(b++,setTimeout(D.hitch(this,
function(){arcgisonline.sharing.geow.Content.itemStatusByUser(g,D.hitch(arcgisonline.sharing.geow.Content,"itemStatusByUserHandler",b,g,d,e),e)}),Math.min(1E3*Math.pow(2,b),6E4))):(D.mixin(f,g),d(f,n))},deleteItems:function(b,g,d){var e=this.util.getUser();if(null!=e){e=e.username||e.email;if(1==b.length)return b=b[0],e=esriGeowConfig.restBaseUrl+"content/users/"+e,null!=b.folderId&&""!==b.folderId&&"/"!=b.folderId&&(e+="/"+b.folderId),e=e+"/items/"+b.id+"/delete",this.util.postJson("",e,g,d);if(1<
b.length){var f="",n="";D.forEach(b,function(h){f+=n+h.id;n=","},this);b={items:f};e=esriGeowConfig.restBaseUrl+"content/users/"+e+"/deleteItems";return this.util.postJson(b,e,g,d)}}},deleteItemsByUser:function(b,g,d,e){if(null!=this.util.getUser()){if(1==g.length)return g=g[0],b=esriGeowConfig.restBaseUrl+"content/users/"+b,null!=g.folderId&&""!==g.folderId&&"/"!=g.folderId&&(b+="/"+g.folderId),b=b+"/items/"+g.id+"/delete",this.util.postJson("",b,d,e);if(1<g.length){var f="",n="";D.forEach(g,function(h){f+=
n+h.id;n=","},this);g={items:f};b=esriGeowConfig.restBaseUrl+"content/users/"+b+"/deleteItems";return this.util.postJson(g,b,d,e)}}},getApplicationCode:function(b,g,d){var e=null,f="WMA2Code";D.isObject(b)?(e=b.id,"Mobile Application"===b.type&&(f="MobileApp2Code")):e=b;this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+e+"/relatedItems?relationshipType\x3d"+f,g,d)},addApplicationCodeRelate:function(b,g,d,e){var f=this.util.getUser();if(null==f)D.publish("globalMessage",[{message:this.i18n().mustLogIn,
type:"error",duration:0}]);else{var n=null,h="WMA2Code";D.isObject(b)?(n=b.id,"Mobile Application"===b.type&&(h="MobileApp2Code")):n=b;this.util.postJson({relationshipType:h,originItemId:n,desinationItemId:g},esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email)+"/addRelationship?relationshipType\x3d"+h+"\x26originItem\x3d"+n+"\x26destinationItemId\x3d"+g,d,e)}},getComments:function(b,g,d,e){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+b+"/comments",d,e)},addComment:function(b,
g,d,e){null==this.util.getUser()?D.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({comment:g},esriGeowConfig.restBaseUrl+"content/items/"+b+"/addComment",d,e)},deleteComment:function(b,g,d,e){null==this.util.getUser()?D.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({},esriGeowConfig.restBaseUrl+"content/items/"+b+"/comments/"+g+"/delete",d,e)},addRating:function(b,g,d,e){null==this.util.getUser()?
D.publish("globalMessage",[{message:this.i18n().mustLogIn,type:"error",duration:0}]):this.util.postJson({rating:g},esriGeowConfig.restBaseUrl+"content/items/"+b+"/addRating",d,e)},getRating:function(b,g,d){null!=this.util.getUser()&&this.util.postJson({},esriGeowConfig.restBaseUrl+"content/items/"+b+"/rating",g,d)},deleteItem:function(b,g,d){var e=this.util.getUser();if(null!=e){e=e.username||e.email;e=esriGeowConfig.restBaseUrl+"content/users/"+(b.owner||e);var f=b.ownerFolder||b.folderId;f&&"/"!==
f&&(e=e+"/"+f);e=e+"/items/"+b.id+"/delete";this.util.postJson("",e,g,d)}},deleteItemByUser:function(b,g,d){if(null!=this.util.getUser()){var e=esriGeowConfig.restBaseUrl+"content/users/"+b.owner;null!=b.folderId&&(e=e+"/"+b.folderId);e=e+"/items/"+b.id+"/delete";this.util.postJson("",e,g,d)}},updateItem:function(b,g,d,e){var f=this.util.getUser();null!=f&&(f=f.username||f.email,f=esriGeowConfig.restBaseUrl+"content/users/"+(b.owner||f),null!=b.folderId&&(f=f+"/"+b.folderId),f=f+"/items/"+b.id+"/update",
this.util.postForm(g,f,d,e))},updateItemByUser:function(b,g,d,e){if(null!=this.util.getUser()){var f=esriGeowConfig.restBaseUrl+"content/users/"+b.owner;null!=b.folderId&&(f=f+"/"+b.folderId);f=f+"/items/"+b.id+"/update";this.util.postForm(g,f,d,e)}},updateItemJson:function(b,g,d,e){var f=this.util.getUser();null!=f&&(f=f.username||f.email,f=esriGeowConfig.restBaseUrl+"content/users/"+(b.overrideUser||f),null!=b.folderId&&(f=f+"/"+b.folderId),f=f+"/items/"+b.id+"/update",this.util.postJson(g,f,d,
e))},updateItemJsonByUser:function(b,g,d,e){null!=this.util.getUser()&&(b=esriGeowConfig.restBaseUrl+"content/users/"+b,null!=g.folderId&&(b=b+"/"+g.folderId),b=b+"/items/"+g.id+"/update",this.util.postJson(d,b,e))},filterErrors:function(b){return(b=b&&b.results)&&b.length&&(b=D.filter(b,"return item.error"))&&b.length?(this.util.checkError(b[0].error),b):!1},shareItems:function(b,g,d){var e=this.util.getUser();e&&(e=e.username||e.email,this.util.postJson(b,esriGeowConfig.restBaseUrl+"content/users/"+
(b.owner||e)+"/shareItems",D.hitch(this,function(f){var n=this.filterErrors(f);n?d(n):g(f)}),d))},shareItemsByUser:function(b,g,d,e){null!=this.util.getUser()&&this.util.postJson(g,esriGeowConfig.restBaseUrl+"content/users/"+b+"/shareItems",d,e)},shareItem:function(b,g,d,e){var f=this.util.getUser();null!=f&&(f=esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email),null!=b.folderId&&(f=f+"/"+b.folderId),f=f+"/items/"+b.id+"/share",this.util.postJson(g,f,d,e))},shareItemByID:function(b,
g,d,e){null!=this.util.getUser()&&this.util.postJson(g,esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/share",d,e)},unshareItems:function(b,g,d){var e=this.util.getUser();null!=e&&(e=e.username||e.email,this.util.postJson(b,esriGeowConfig.restBaseUrl+"content/users/"+(b.owner||e)+"/unshareItems",D.hitch(this,function(f){var n=this.filterErrors(f);n?d(n):g(f)}),d))},unshareItemsByUser:function(b,g,d,e){null!=this.util.getUser()&&this.util.postJson(g,esriGeowConfig.restBaseUrl+"content/users/"+b+
"/unshareItems",d,e)},unshareItem:function(b,g,d,e){var f=this.util.getUser();null!=f&&(f=esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email),null!=b.folderId&&(f=f+"/"+b.folderId),f=f+"/items/"+b.id+"/unshare",this.util.postJson(g,f,d,e))},unshareItemByID:function(b,g,d,e){null!=this.util.getUser()&&this.util.postJson(g,esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/unshare",d,e)},moveItems:function(b,g,d,e){var f=this.util.getUser();if(null!=f){var n="",h="";D.forEach(b,function(k){n+=
h+k.id;h=","},this);g.items=n;this.util.postJson(g,esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email)+"/moveItems",d,e)}},moveItemsByUser:function(b,g,d,e,f){if(null!=this.util.getUser()){var n="",h="";D.forEach(g,function(k){n+=h+k.id;h=","},this);d.items=n;this.util.postJson(d,esriGeowConfig.restBaseUrl+"content/users/"+b+"/moveItems",e,f)}},reassignItem:function(b,g,d,e,f){if(null!=this.util.getUser()){var n=esriGeowConfig.restBaseUrl+"content/users/"+b.owner;null!==b.folderId&&
(n=n+"/"+b.folderId);n=n+"/items/"+b.id+"/reassign";this.util.postJson({targetUsername:g,targetFolderName:d},n,e,f)}},moveItem:function(b,g,d,e){var f=this.util.getUser();null!=f&&(f=esriGeowConfig.restBaseUrl+"content/users/"+(f.username||f.email),null!=b.folderId&&(f=f+"/"+b.folderId),f=f+"/items/"+b.id+"/move",this.util.postJson(g,f,d,e))},moveItemByUser:function(b,g,d,e){if(null!=this.util.getUser()){var f=esriGeowConfig.restBaseUrl+"content/users/"+b.owner;null!=b.folderId&&(f=f+"/"+b.folderId);
f=f+"/items/"+b.id+"/move";this.util.postJson(g,f,d,e)}},search:function(b,g,d,e){if(b){e="";if(0>b.indexOf("community/groups")){var f=this.util.userPreferences(null,"contentModePrefs"),n=D.queryToObject(window.location.search.slice(1));n.content&&"all"===n.content.toLowerCase()?f.contentMode="GIS":n.content&&"web"===n.content.toLowerCase()&&(f.contentMode="Web");e=f&&f.contentMode&&"GIS"===f.contentMode?esriGeowConfig.viewQueries.gis:e+esriGeowConfig.viewQueries.web;e+=esriGeowConfig.viewQueries.none}g.q+=
e;this.util.getJsonWithContent(b,g,d)}},getFeaturedItems:function(b,g,d){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+b+"/relatedItems?relationshipType\x3dFeaturedItems2Item\x26direction\x3dforward",g)},getUserItem:function(b,g,d){d=this.util.getUser();null!=d&&(d=esriGeowConfig.restBaseUrl+"content/users/"+(d.username||d.email),null!=b.folderId&&(d=d+"/"+b.folderId),d=d+"/items/"+b.id,this.util.getJson(d,g))},getItem:function(b,g,d){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+
b,g,d)},getItemData:function(b,g,d){this.util.getJson(esriGeowConfig.restBaseUrl+"content/items/"+b+"/data",g,d)},getItemFolder:function(b,g){var d=this.util.getUser();if(null!=d){var e=d.username||d.email;this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+e,D.hitch(this,function(f,n){for(var h=null,k=0;k<f.items.length;k++)if(f.items[k].id==b){h="";break}if(null!=h)g(h);else{var c=function(l,r){for(var m=l.currentFolder.id,q=0;q<l.items.length;q++)if(l.items[q].id==b){h=m;g(h);break}};
D.forEach(f.folders,function(l,r){this.util.getJson(esriGeowConfig.restBaseUrl+"content/users/"+e+"/"+l.folderName,D.hitch(this,c))},this)}}))}},itemsToStore:function(b){var g=b.currentFolder?b.currentFolder.id:"",d=[];D.forEach(b.items,function(e,f){e.folderId=g;e.imageUrl=this._getItemIconUrl(e);e.selected=!1;e.item=e.name||e.url||e.title;if(e.snippet&&0<e.snippet.length&&"null"!=e.snippet)e.snippet=e.snippet;else if(e.description&&0<e.description.length&&"null"!=e.description){var n=arcgisonline.sharing.util.removeHTMLTags(e.description);
e.snippet=150<n.length?n.substring(0,150)+"...":n}else e.snippet="";delete e.listingProperties;delete e.properties;d[f]=e},this);return new D.data.ItemFileWriteStore({data:{identifier:"id",label:"item",items:d}})},searchToStore:function(b){var g=[];D.forEach(b.items?b.items:b.results,function(d,e){var f={id:d.id,owner:d.owner,title:d.title,description:d.description,tags:d.tags?d.tags.join(","):[],imageUrl:this._getItemImageUrl(d),created:d.created,modified:d.modified};g[e]=f},this);return new D.data.ItemFileReadStore({data:{identifier:"id",
label:"item",items:g}})},_getPremiumItemNode:function(b){var g=(new esri.arcgis.PortalItem(D.mixin(b,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}}))).getTypeInfo(),d=esriGeowConfig.self&&esriGeowConfig.self.isPortal?"portal":"";b=-1<D.indexOf(b.typeKeywords,"Requires Credits");return g.isPremiumContent?(d=D.create("div",{className:"esri-premium-content",title:b?this.i18n()["premiumcontentcreditstitle"+d]:this.i18n()["premiumcontenttitle"+d],innerHTML:b?this.i18n().premiumcontent:
this.i18n().subscriptioncontent}),D.create("img",{className:"esri-premium-icon",src:g.premiumIconUrl},d,"first"),d):!1},_getItemIconUrl:function(b){return(new esri.arcgis.PortalItem(D.mixin(b,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}}))).iconUrl},_getItemImageUrl:function(b,g){var d=b.type?b.type.toLowerCase():"";return this.util.relativeToExplicitUrl("geocoding service"==d||"network analysis service"==d||"geoprocessing service"==d||"geodata service"==d||"geometry service"==
d||"workflow manager service"==d?g?"images/tool_16x16.png":"images/tool_32x32.png":"wms"==d||"kml"==d||"globe service"==d||"map service"==d||"image service"==d||"feature service"==d||"scene service"===d||"stream service"===d?g?"images/layer_16x16.png":"images/layer_32x32.png":"web mapping application"==d||"mobile application"==d||"web map"==d?g?"images/map_16x16.png":"images/map_32x32.png":"layer"==d||"layer package"==d||"tile package"===d||"vector tile package"===d||"scene package"===d||"image collection"===
d||"explorer layer"==d||"cad drawing"===d?g?"images/layer-download_16x16.png":"images/layer-download_32x32.png":"explorer add in"==d||"desktop add in"==d||"geoprocessing package"==d||"locator package"==d?g?"images/tool-download_16x16.png":"images/tool-download_32x32.png":g?"images/map-download_16x16.png":"images/map-download_32x32.png")},changeTypename:function(b,g,d){var e=new esri.arcgis.PortalItem(D.mixin(b,{portal:{isPortal:esriGeowConfig.self&&esriGeowConfig.self.isPortal}})),f=e.getTypeInfo();
e=b.type&&-1<b.type.toLowerCase().indexOf("add in")?e.displayName:e.type;var n=-1<D.indexOf(b.typeKeywords,"Hosted Service"),h=-1<D.indexOf(b.typeKeywords,"View Service"),k="Feature Service"===b.type;f=f.displayName;d&&(f=n?f+(" ("+(h?this.i18n().viewsWidget.hostedView:k?this.i18n().viewsWidget.hostedData:this.i18n().viewsWidget.hostedService)+")"):f+(" ("+this.i18n().viewsWidget.locatorView+")"));b=-1<D.indexOf(b.typeKeywords,"ArcGIS Server")||"Feature Collection"==b.type?this.i18n().source+" ":
"";return g?"\x3cspan title\x3d'"+b+e+"'\x3e"+f+"\x3c/span\x3e":f},getFavorites:function(){var b,g={};return this.util.request({url:esriGeowConfig.restBaseUrl+"content/groups/"+esriGeowConfig.self.user.favGroupId}).then(D.hitch(this,function(d){b=d.items||[];D.forEach(b,D.hitch(this,function(e){g[e.id]=!0}));return g}))},addToFavorites:function(b){var g=this.util.getUser().favGroupId;return this.util.request({url:esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/share",content:{f:"json",everyone:b.access&&
"public"===b.access||b.sharing&&b.sharing.access&&"public"===b.sharing.access||!1,org:b.access&&"org"===b.access||b.sharing&&b.sharing.access&&"org"===b.sharing.access||!1,groups:[g],items:[b.id]}},{usePost:!0})},removeFromFavorites:function(b){var g=this.util.getUser().favGroupId;return this.util.request({url:esriGeowConfig.restBaseUrl+"content/items/"+b.id+"/unshare",content:{f:"json",everyone:!1,org:!1,groups:[g],items:[b.id]}},{usePost:!0})}}})},"dojo/dnd/AutoSource":function(){define(["../_base/declare",
"./Source"],function(D,A){return D("dojo.dnd.AutoSource",A,{constructor:function(){this.autoSync=!0}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(D,A,a){return D("dojo.dnd.Target",a,{constructor:function(){this.isSource=!1;A.remove(this.node,"dojoDndSource")}})})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(D,A,a,b){return A("dojo.fx.Toggler",null,{node:null,showFunc:a.fadeIn,hideFunc:a.fadeOut,
showDuration:200,hideDuration:200,constructor:function(g){D.mixin(this,g);this.node=g.node;this._showArgs=D.mixin({},g);this._showArgs.node=this.node;this._showArgs.duration=this.showDuration;this.showAnim=this.showFunc(this._showArgs);this._hideArgs=D.mixin({},g);this._hideArgs.node=this.node;this._hideArgs.duration=this.hideDuration;this.hideAnim=this.hideFunc(this._hideArgs);b.after(this.showAnim,"beforeBegin",D.hitch(this.hideAnim,"stop",!0),!0);b.after(this.hideAnim,"beforeBegin",D.hitch(this.showAnim,
"stop",!0),!0)},show:function(g){return this.showAnim.play(g||0)},hide:function(g){return this.hideAnim.play(g||0)}})})},"dijit/MenuSeparator":function(){define("dojo/_base/declare dojo/dom ./_WidgetBase ./_TemplatedMixin ./_Contained dojo/text!./templates/MenuSeparator.html".split(" "),function(D,A,a,b,g,d){return D("dijit.MenuSeparator",[a,b,g],{templateString:d,buildRendering:function(){this.inherited(arguments);A.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"xstyle/core/load-css":function(){define([],
function(){function D(d){if(b.createStyleSheet){var e=b.createStyleSheet();e.cssText=d;return e.owningElement}e=b.createElement("style");e.setAttribute("type","text/css");e.appendChild(b.createTextNode(d));g.appendChild(e);return e}function A(d,e,f){var n=a[d];if(n)return h=D(n),e(h);var h=b.createElement("link");h.type="text/css";h.rel="stylesheet";h.href=d;var k=!f||!1!==f.wait;d=(d=navigator.userAgent.match(/AppleWebKit\/(\d+\.?\d*)/))&&+d[1];if(null===h.onload&&!(536>d))h.onload=function(){h.onload=
null;h.onerror=null;k&&e(h)},h.onerror=function(){k&&e(h)};else if(k)var c=setInterval(function(){h.style&&(clearInterval(c),e(h))},15);(g||b.getElementsByTagName("head")[0]).appendChild(h);k||e(h)}var a="undefined"==typeof _css_cache?{}:_css_cache,b=document,g=b.head;A.insertCss=D;return A})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/_Empty.html":'\x3cdiv class\x3d"text-center trailer-half"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 256 256" width\x3d"${width}"\x3e\x3cpath fill\x3d"#ccc" d\x3d"M149.375 182.444l56.463-56.471-25.376-25.376 5.523-14.541-59.827-22.726L110.828 48H56v124h18.365l12.437 4.724 34.182 34.101 15.33-15.294 7.07 2.686 5.164-13.597zm50.806-56.472l-47.34 47.35 26.064-68.626zM112 54.828L141.172 84H112zM60 52h48v36h36v80H60zm60.984 153.17L95.95 180.199l36.263 13.775zm20.081-12.113L85.632 172H148V85.172L133.059 70.23l47.766 18.144-34.628 91.171z"/\x3e\x3c/svg\x3e\r\n  \x3cp class\x3d"leader-0 font-size-1 avenir-regular"\x3e\r\n    \x3cspan\x3e${message}\x3c/span\x3e\r\n  \x3c/p\x3e\r\n\x3c/div\x3e',
"url:arcgisonline/pages/dijit/Alert/Alert.html":'\x3cdiv class\x3d"alert alert-${modifier} alert-fixed alert-fade-in-down leader-1 trailer-1 ${cssClasses}"\x3e\r\n  \x3cdiv class\x3d"flex"\x3e\r\n    \x3cdiv class\x3d"flex-0 margin-right-half margin-left-0 text-${modifier}" aria-label\x3d"${iconAltText}"\x3e\r\n      ${!icon}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"flex-1 flex-center-self margin-right-half margin-left-0 alert__text-container" role\x3d"status"\x3e\r\n      ${!text}\r\n      \x3cdiv data-dojo-attach-point\x3d"_listContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cbutton class\x3d"alert-close btn-link btn-link-black js-alert-close" aria-label\x3d"${i18n.common.close}"\x3e\r\n      ${!icons.x.32}\r\n    \x3c/button\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/GeneralDlg.html":'\x3cdiv class\x3d"widgetContent"\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"_dialog" id\x3d"general-dialog-${id}" class\x3d"general-dialog" title\x3d"${i18n.notificationDlgTitle}" role\x3d"alertdialog"\x3e\r\n    \x3cdiv id\x3d"general-dialog-content" class\x3d"general-dialog-content"\x3e\x3c/div\x3e\r\n    \x3cbr\x3e\r\n    \x3cdiv class\x3d"esriFloatTrailing clearfix right"\x3e\r\n      \x3cbutton id\x3d"button_general-close" data-dojo-attach-point\x3d"_okBtn" data-dojo-attach-event\x3d"onClick:onOkClick" class\x3d"jevent primary right" data-dojo-type\x3d"dijit/form/Button"\x3e${i18n.ok}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n      \x3cbr style\x3d"clear:both;"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/actionBar.html":'\x3cdiv class\x3d"dijitDialogPaneActionBar esriAlignTrailing right clearfix" data-dojo-attach-point\x3d"actionBarNode"\x3e\r\n  \x3cspan class\x3d"busyMessage hide inline-block padding-leader-quarter padding-right-1 left" data-dojo-attach-point\x3d"busyMessageSpan"\x3e\x3c/span\x3e\r\n  \x3cbutton class\x3d"calcite cancel right" data-dojo-type\x3d"dijit/form/Button" type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:onCancel"\x3e\x3c/button\x3e\r\n  \x3cbutton class\x3d"calcite primary right js-submit-button" data-dojo-type\x3d"dijit/form/Button" type\x3d"submit" data-dojo-attach-point\x3d"okButton"\x3e\x3c/button\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/dialog/templates/DownloadImageDlg.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${_i18nStrings.downloadImageDlg.title}"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriFloatTrailing" style\x3d"margin-top: 1em;"\x3e\r\n        \x3cbutton class\x3d"jevent cancel" data-dojo-attach-point\x3d"_cancelBtn" disabled data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:_handleCancelButtonClick"\x3e${_i18nStrings.common.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/_Owner.html":'\x3cbutton class\x3d"js-card-item-owner btn-link btn-link--inherit text-left text-ellipsis flex-1 js-action-profilePopup js-owner-section" data-action\x3d"profilePopup" data-owner\x3d"${item.owner}" title\x3d"${i18n.itemProperties.viewProfile}"\x3e${item.owner}\x3c/button\x3e\r\n',"url:arcgisonline/pages/dijit/Card/_OwnerVerified.html":'\x3cbutton class\x3d"flex-1 btn-link btn-link--inherit text-left text-ellipsis flex-1 js-owner-section js-verified-owner-link max-full-width" title\x3d"${i18n.itemProperties.viewOrg}"\x3e${item.verified.name}\x3c/button\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/authoritative.html":'\x3cspan class\x3d"badge badge--authoritative ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#2B622B"\x3e\x3cpath d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zm0 15a7 7 0 1 1 7-7 7.008 7.008 0 0 1-7 7z"/\x3e\x3cpath d\x3d"M11.834 5.146l-5.646 5.647-2.334-2.334a.5.5 0 0 0-.708.707l3.042 3.041 6.353-6.353a.5.5 0 1 0-.707-.707z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.authoritative}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/deprecated.html":'\x3cspan class\x3d"badge badge--deprecated ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"#8C2907" d\x3d"M8 0a8 8 0 1 0 8 8 8.01 8.01 0 0 0-8-8zM1 8a6.99 6.99 0 0 1 11.577-5.284l-9.861 9.861A6.964 6.964 0 0 1 1 8zm7 7a6.964 6.964 0 0 1-4.577-1.716l9.861-9.861A6.99 6.99 0 0 1 8 15z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.deprecated}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/solution.html":'\x3cspan class\x3d"badge badge--solution ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 32 32"\x3e\r\n    \x3cpath fill\x3d"#312b43" d\x3d"M29.963 7.672a1.586 1.586 0 0 0-1.584-1.585h-5.274a.187.187 0 0 1-.188-.187V3.977A2 2 0 0 0 20.825 2h-9.672A2.095 2.095 0 0 0 9.06 4.093V5.9a.187.187 0 0 1-.187.187H3.598a1.586 1.586 0 0 0-1.584 1.585v4.016a.281.281 0 0 0 .281.28H4.9l.014-.013V9.153a.177.177 0 0 1 .177-.177h21.46a.456.456 0 0 1 .449.45v13.742A1.832 1.832 0 0 1 25.168 25h-8.892a.568.568 0 0 1-.534-.373 3.98 3.98 0 0 0-7.6.373H5.657a.757.757 0 0 1-.757-.757v-3.055A.188.188 0 0 0 4.714 21H2.028l-.014.014v4.58a2.35 2.35 0 0 0 2.347 2.346h4.161a3.963 3.963 0 0 0 6.8.256.569.569 0 0 1 .475-.256h12.065a2.102 2.102 0 0 0 2.101-2.101zM21 5.625a.375.375 0 0 1-.375.375h-9.25A.375.375 0 0 1 11 5.625V4.45a.456.456 0 0 1 .45-.45h9.1a.456.456 0 0 1 .45.45zM12 28a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"/\x3e\r\n    \x3cpath class\x3d"cls-1" d\x3d"M13.273 17.994a.57.57 0 0 1 .479.262A3.73 3.73 0 0 0 17 20a3.74 3.74 0 0 0 3.403-2.006h3.41a.188.188 0 0 0 .187-.188v-2.589a.187.187 0 0 0-.188-.188H20.8A3.8 3.8 0 0 0 17 12a4.058 4.058 0 0 0-3.69 2.647.568.568 0 0 1-.537.383H1.093a.094.094 0 0 0-.093.093V17.9a.094.094 0 0 0 .094.094zM17 13.9a2.1 2.1 0 1 1-2.1 2.1 2.1 2.1 0 0 1 2.1-2.1z"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.solution}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/living-atlas.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M14.753 4.57a.5.5 0 0 0-.842-.539 5.86 5.86 0 0 1-1.046 1.13A27.861 27.861 0 0 1 8.5 8.199a27.487 27.487 0 0 1-4.814 2.262 5.906 5.906 0 0 1-1.5.34.5.5 0 0 0 .021 1h.023a6.513 6.513 0 0 0 1.46-.304 5.98 5.98 0 0 0 3.81 1.81V15H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1H8.5v-1.699A5.953 5.953 0 0 0 13.753 5.7a6.385 6.385 0 0 0 1-1.13zM10.5 11.664a4.999 4.999 0 0 1-5.742-.535A30.772 30.772 0 0 0 9 9.065a30.801 30.801 0 0 0 3.908-2.642 5 5 0 0 1-2.408 5.24zM7.068 2.42a5.007 5.007 0 0 1 4.71 1.638.5.5 0 1 0 .758-.654 6.01 6.01 0 0 0-5.654-1.967.5.5 0 0 0 .186.982zM2.802 9.633a.5.5 0 0 0 .472-.664 4.99 4.99 0 0 1 1.815-5.677l.228.394a.5.5 0 0 0 .866-.5l-1-1.732a.5.5 0 0 0-.866.5l.272.472a5.988 5.988 0 0 0-2.26 6.87.5.5 0 0 0 .473.337z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.livingAtlas}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/marketplace.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.marketplaceTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#196FA6" d\x3d"M15.939 13L12.832 3h-3.65L8.033 6.68 6.811 3H3.16L.054 13H4.13l.96-3.21L6.192 13h3.594l1.104-3.17.993 3.17h4.056zM3.386 12H1.41l2.486-8h1.881l-2.391 8zm2.196-3.856l.893-2.983 1.048 3.156-.895 2.871-1.046-3.044zM9.075 12H7.422l2.496-8h1.943l-2.786 8zm3.409-6.749L14.583 12h-1.966l-1.176-3.755 1.043-2.994z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.marketplace}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/open-data.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.openDataTooltip}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cg fill\x3d"#196fa6"\x3e\x3cpath d\x3d"M8 1C4.58 1 2 2.29 2 4s2.58 3 6 3a8.628 8.628 0 0 0 5-1.297v5.334a.5.5 0 0 0 1 0V4c0-1.71-2.58-3-6-3zm0 5C5.138 6 3 4.944 3 4s2.138-2 5-2 5 1.056 5 2-2.138 2-5 2zM13.5 12.5a.5.5 0 0 0-.5.5v.064C13 13.96 10.816 15 8 15s-5-1.04-5-1.936V8.85a11.968 11.968 0 0 0 5 .984.5.5 0 0 0 0-1A10.146 10.146 0 0 1 2.815 7.62a.484.484 0 0 0-.799.3c-.002.013-.006.025-.007.037C2.007 7.972 2 7.985 2 8v5.064C2 14.902 5.05 16 8 16s6-1.098 6-2.936V13a.5.5 0 0 0-.5-.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.openData}\x3c/span\x3e\r\n\x3c/span\x3e',
"url:arcgisonline/pages/dijit/Card/badges/premium.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath fill\x3d"none" d\x3d"M0 0h16v16H0z"/\x3e\x3cpath d\x3d"M8.05 15.5a.497.497 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.5.5 0 0 1 .64.006c1.817 1.54 3.601 1.844 5.457.932a.5.5 0 0 1 .718.394 16.944 16.944 0 0 1-.344 4.965.5.5 0 1 1-.978-.211 16.952 16.952 0 0 0 .367-3.962 5.57 5.57 0 0 1-5.55-1.098A6.178 6.178 0 0 1 2.51 2.706c-.057 2.086.231 8.651 5.79 11.86a.5.5 0 0 1-.25.934z" fill\x3d"#196fa6"/\x3e\x3cpath d\x3d"M12 15.5a4 4 0 1 1 4-4 4.005 4.005 0 0 1-4 4zm0-7a3 3 0 1 0 3 3 3.003 3.003 0 0 0-3-3z" fill\x3d"#196fa6"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.premium}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/retired.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M14.78 14.645L8.255 1.52a.938.938 0 0 0-.84-.52.938.938 0 0 0-.84.522L.092 14.647A.938.938 0 0 0 .932 16h13.009a.937.937 0 0 0 .838-1.355zm-.724.49a.137.137 0 0 1-.115.065H.933a.137.137 0 0 1-.116-.063.139.139 0 0 1-.008-.135L7.293 1.876a.14.14 0 0 1 .123-.076.138.138 0 0 1 .125.077l6.521 13.124a.138.138 0 0 1-.006.135zM7.495 11.5a.988.988 0 0 1 1 .976v.048a1 1 0 0 1-2 0v-.048a.988.988 0 0 1 1-.976zM7.018 6h.977v4h-.977z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.retired}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/public-data-collection.html":'\x3cspan class\x3d"badge badge--retired ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\x3cpath fill\x3d"#786d1c" d\x3d"M15.721 4.007a.965.965 0 0 0-.03-1.385l-1.413-1.414a.965.965 0 0 0-1.385-.03L2.841 11.23l-1.756 4.097a.371.371 0 0 0 .488.487L5.67 14.06l8.607-8.609zM2.624 14.276l.554-1.294.74.74zm2.338-.924L3.55 11.937l8.007-8.008 1.414 1.415zm8.716-8.716l-1.414-1.414 1.09-1.09a.306.306 0 0 1 .433 0l.981.98a.306.306 0 0 1 0 .434z"/\x3e\x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.publicDataCollection}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/dijit/Card/badges/subscriber.html":'\x3cspan class\x3d"badge ${tooltipClass} tooltip--no-pointer tooltip-multiline" aria-label\x3d"${tooltipLabel}"\x3e\r\n  \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n    \x3cpath d\x3d"M8.054 15.5H8.05a.5.5 0 0 1-.25-.067C.6 11.275 1.542 2.038 1.552 1.944a.5.5 0 0 1 .259-.382.507.507 0 0 1 .463-.009 5.15 5.15 0 0 0 5.459-.94.518.518 0 0 1 .638 0 5.146 5.146 0 0 0 5.458.94.507.507 0 0 1 .463.009.5.5 0 0 1 .26.382c.01.094.952 9.331-6.248 13.49a.5.5 0 0 1-.25.066zm0-.5zM2.51 2.706c-.056 2.054.222 8.455 5.542 11.713 5.32-3.258 5.598-9.66 5.542-11.713a6.177 6.177 0 0 1-5.542-1.074A6.183 6.183 0 0 1 2.51 2.706z" fill\x3d"#196fa6"/\x3e\r\n  \x3c/svg\x3e\r\n  \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.subscriber}\x3c/span\x3e\r\n\x3c/span\x3e\r\n\r\n',
"url:arcgisonline/pages/dijit/Card/badges/collaboration.html":'\x3cspan class\x3d"badge badge--collaboration ${tooltipClass} tooltip--no-pointer" aria-label\x3d"${i18n.badges.collaborationTooltip}"\x3e\r\n    \x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"16" height\x3d"16" viewBox\x3d"0 0 16 16"\x3e\r\n      \x3cg fill\x3d"#196FA6"\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n        \x3cpath d\x3d"M5.42,11.36a2.7,2.7,0,0,0-.25-.61A2.31,2.31,0,0,1,5.42,11.36Z" /\x3e\r\n        \x3cpath d\x3d"M12.64,15.42a2.7,2.7,0,0,0,.61-.25A2.31,2.31,0,0,1,12.64,15.42Z" /\x3e\r\n        \x3cpath d\x3d"M4.78,13.75A2.62,2.62,0,0,0,5,13.5,2.53,2.53,0,0,0,5.5,12a2.74,2.74,0,0,0-.08-.64,2.7,2.7,0,0,0-.25-.61,2.48,2.48,0,0,0-2.64-1.2A4.93,4.93,0,0,1,2.5,9,5.52,5.52,0,0,1,5.71,4a2.5,2.5,0,0,0,4.58,0A5.52,5.52,0,0,1,13.5,9a4.93,4.93,0,0,1,0,.55,2.48,2.48,0,0,0-2.64,1.2,2.7,2.7,0,0,0-.25.61,2.74,2.74,0,0,0-.08.64,2.53,2.53,0,0,0,.5,1.5,2.62,2.62,0,0,0,.22.25,2.45,2.45,0,0,0,.53.42,2.51,2.51,0,0,0,3.42-.92,2.7,2.7,0,0,0,.25-.61A2.74,2.74,0,0,0,15.5,12a2.53,2.53,0,0,0-.5-1.5,2.62,2.62,0,0,0-.22-.25,2,2,0,0,0-.35-.3A6,6,0,0,0,14.5,9a6.52,6.52,0,0,0-4-6,2.5,2.5,0,0,0-5,0,6.52,6.52,0,0,0-4,6,6,6,0,0,0,.07.95,2,2,0,0,0-.35.3A2.62,2.62,0,0,0,1,10.5,2.53,2.53,0,0,0,.5,12a2.74,2.74,0,0,0,.08.64,2.7,2.7,0,0,0,.25.61,2.51,2.51,0,0,0,3.42.92A2.45,2.45,0,0,0,4.78,13.75Zm8.5-3.22a1.66,1.66,0,0,1,.47.17,1.61,1.61,0,0,1,.42.36,1.51,1.51,0,0,1,.33.94,1.53,1.53,0,0,1-.2.75,1.46,1.46,0,0,1-.91.7A1.5,1.5,0,0,1,11.5,12a1.53,1.53,0,0,1,.2-.75,1.46,1.46,0,0,1,.91-.7A1.38,1.38,0,0,1,13.28,10.53ZM6.5,3a1.19,1.19,0,0,1,0-.33,1.5,1.5,0,0,1,2.92,0A1.19,1.19,0,0,1,9.5,3a1.39,1.39,0,0,1-.17.67,1.48,1.48,0,0,1-2.66,0A1.39,1.39,0,0,1,6.5,3ZM2.61,13.45a1.46,1.46,0,0,1-.91-.7A1.53,1.53,0,0,1,1.5,12a1.51,1.51,0,0,1,.33-.94,1.61,1.61,0,0,1,.42-.36,1.66,1.66,0,0,1,.47-.17,1.38,1.38,0,0,1,.67,0,1.46,1.46,0,0,1,.91.7,1.5,1.5,0,0,1-.55,2.05A1.51,1.51,0,0,1,2.61,13.45Z" /\x3e\r\n        \x3cpath d\x3d"M11.36,5.42a2.31,2.31,0,0,1-.61-.25A2.7,2.7,0,0,0,11.36,5.42Z" /\x3e\r\n        \x3cpath d\x3d"M13.25.83a2.7,2.7,0,0,0-.61-.25A2.31,2.31,0,0,1,13.25.83Z" /\x3e\r\n      \x3c/g\x3e\r\n    \x3c/svg\x3e\r\n    \x3cspan class\x3d"badge__text ${hideText}"\x3e${i18n.badges.collaboration}\x3c/span\x3e\r\n\x3c/span\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/_groupIcon.html":'\x3cdiv class\x3d"${cssClasses:empty} ${tooltipClass:empty}" aria-label\x3d"${_group.title}"\x3e\r\n  \x3cimg src\x3d"${_group.thumbnailUrl}" alt\x3d"" class\x3d"${_group.thumbnail:hide}" data-dojo-attach-point\x3d"_img"\x3e\r\n  \x3csvg data-dojo-attach-point\x3d"_svg" xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"${size}" height\x3d"${size}" viewBox\x3d"0 0 ${_viewBoxSize} ${_viewBoxSize}" class\x3d"${_group.thumbnail:show}" \x3e\r\n    \x3cpath fill\x3d"${_group.fillColor}" d\x3d"M0 0h65v65H0z" /\x3e\r\n    \x3cpath fill\x3d"#ccc" d\x3d"M0 0h65v65H0z" fill-opacity\x3d"0.8" /\x3e\r\n    \x3cpath class\x3d"${_group.useLetter:show}" fill\x3d"#FFF" d\x3d"M24.25 15.625a6.875 6.875 0 1 0-.008 13.75 6.875 6.875 0 0 0 .008-13.75zm0 11c-2.272 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125c2.279 0 4.125 1.846 4.125 4.125s-1.846 4.125-4.125 4.125zm3.118 16.5H14.774c.596-4.641 4.647-8.25 9.473-8.25 2.855 0 5.426 1.283 7.188 3.316a15.168 15.168 0 0 1 2.311-1.518 12.22 12.22 0 0 0-9.496-4.549c-6.369 0-11.551 4.82-12.238 11l-.137 2.75h14.424a15.49 15.49 0 0 1 1.066-2.75h.003zm25.62 5.5c-.693-6.18-5.873-11-12.238-11s-11.545 4.82-12.238 11l-.137 2.75h24.75l-.137-2.75zm-21.711 0c.596-4.641 4.647-8.25 9.473-8.25a9.578 9.578 0 0 1 9.464 8.25H31.277zm9.473-27.5a6.875 6.875 0 1 0-.008 13.75c3.797.003 6.877-3.072 6.88-6.87s-3.072-6.877-6.869-6.88h-.003zm0 11c-2.271 0-4.125-1.851-4.125-4.125s1.848-4.125 4.125-4.125a4.125 4.125 0 0 1 0 8.25z"\r\n    /\x3e\r\n    \x3ctext class\x3d"${_group.useLetter:hide} font-size-${letterSize}" x\x3d"50%" y\x3d"50%" fill\x3d"white" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e\r\n      \x3ctspan class\x3d"group-thumbnail-default-text" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\r\n      \x3ctspan class\x3d"group-thumbnail-ie-text" y\x3d"70%" x\x3d"55%" dominant-baseline\x3d"central" text-anchor\x3d"middle"\x3e${_group.title:firstChar}\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n  \x3c/svg\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteHeaderSimple.html":'\x3cdiv class\x3d"widgetContent siteHeader" id\x3d"header" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv class\x3d"esri-header-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/sharing/dijit/templates/SiteFooter.html":'\x3cdiv dojoAttachPoint\x3d"containerNode" class\x3d"padding-leader-2 footer text-center padding-trailer-1 font-size--2 text-light-gray" role\x3d"contentinfo"\x3e\r\n\x3c!-- style\x3d"padding-top: 0.5em; margin-bottom: 1em; white-space: nowrap; text-align: center;"\x3e--\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks"\x3e\x3c/span\x3e\r\n  \x3cdiv class\x3d"esri-footer-barrier"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SiteFooterMap.html":'\x3cdiv style\x3d"border-top:1px solid #ccc; padding-top: 0.5em; padding-left:2px; margin-bottom: 3em; white-space: nowrap; text-align: center;"\x3e\r\n  \x3cspan id\x3d"${id}_links" class\x3d"esriItemLinks esriFloatLeading esriAlignLeading" style\x3d"color:#777; line-height:14px"\x3e\x3c/span\x3e\r\n\x3c/div\x3e\r\n',"url:arcgisonline/pages/dijit/PasswordStrength/templates/PasswordStrength.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"password-strength-meter"\x3e\r\n        \x3cdiv class\x3d"password-strength-meter__fill" data-dojo-attach-point\x3d"_strengthMeterFill"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"leader-half password-strength-description"\x3e\r\n        ${i18n.passwordStrengthMeter.passwordStrength}: \x3cspan data-dojo-attach-point\x3d"_strengthLabel"\x3e\x3c/span\x3e \x3ca class\x3d"tooltip" target\x3d"_blank" data-dojo-attach-point\x3d"_moreInfo" aria-label\x3d"${i18n.passwordStrengthMeter.learnMore}"\x3e${!icons.inline-end.question.16}\x3c/a\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/sharing/dijit/templates/SignUpInternal.html":'\x3cdiv class\x3d"widgetContent grid-container"\x3e\r\n  \x3cdiv id\x3d"sign-up-form" class\x3d"leader-1 column-12 tablet-column-12 phone-column-6"\x3e\r\n    \x3cform data-dojo-type\x3d"dijit/form/Form" id\x3d"signup-form" data-dojo-attach-point\x3d"_form" method\x3d"POST" action\x3d""\x3e\r\n      \x3cp\x3e${i18n.enterAccountInfo}\x3c/p\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"first-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_firstname"\x3e\r\n          ${i18n.firstNameLabel}\r\n          \x3cinput id\x3d"register_firstname" name\x3d"register_firstname" data-dojo-attach-point\x3d"_firstname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_firstnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock" id\x3d"last-name-block"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_lastname"\x3e\r\n          ${i18n.lastNameLabel}\r\n          \x3cinput id\x3d"register_lastname" name\x3d"register_lastname" data-dojo-attach-point\x3d"_lastname"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_lastnameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_email"\x3e\r\n          ${i18n.currentEmailAdr}\r\n          \x3cinput id\x3d"register_email" name\x3d"register_email" data-dojo-attach-point\x3d"_email"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_emailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"confirm_register_email"\x3e\r\n          ${i18n.confirmEmailAdr}\r\n          \x3cinput id\x3d"confirm_register_email" name\x3d"confirm_register_email" data-dojo-attach-point\x3d"_confirmEmail"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_confirmEmailError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_username"\x3e\r\n          ${i18n.yourUserName}\r\n          \x3cinput id\x3d"register_username" name\x3d"register_username" data-dojo-attach-point\x3d"_username"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_usernameError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password"\x3e\r\n          ${i18n.choosePwd}\r\n          \x3cinput id\x3d"register_password" name\x3d"register_password" data-dojo-attach-point\x3d"_pwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"invite-members__form-password" data-dojo-attach-point\x3d"_pwdStrengthError"\x3e\r\n              \x3cdiv class\x3d"js-strength-meter"\x3e\x3c/div\x3e\r\n              \x3cdiv class\x3d"font-size-0 input-error-message" data-dojo-attach-point\x3d"_pwdError"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"register_password2"\x3e\r\n          ${i18n.renterPwd}\r\n          \x3cinput id\x3d"register_password2" name\x3d"register_password2" data-dojo-attach-point\x3d"_verifyPwd" type\x3d"password"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_verifyPwdError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_question"\x3e\r\n          ${i18n.identityQLabel}\x3cbr\x3e\r\n          \x3cselect id\x3d"identity_question" data-dojo-attach-point\x3d"_identityQuestion"\x3e\x3c/select\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityQuestionError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"formBlock"\x3e\r\n        \x3clabel class\x3d"requiredLabel" for\x3d"identity_answer"\x3e\r\n          ${i18n.identityALabel}\r\n          \x3cinput id\x3d"identity_answer" data-dojo-attach-point\x3d"_identityAnswer" type\x3d"text"/\x3e\r\n          \x3cdiv class\x3d"input-error-message" data-dojo-attach-point\x3d"_identityAnswerError"\x3e\x3c/div\x3e\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"leader-1 right"\x3e\r\n        \x3cbutton id\x3d"button_create_account" class\x3d"btn btn-blue" type\x3d"submit" data-dojo-attach-point\x3d"_createAccountBtn"\x3e${i18n.createAcc}\x3c/button\x3e\r\n        \x3cbutton id\x3d"button_cancel" class\x3d"btn btn-clear" type\x3d"button" data-dojo-attach-point\x3d"_cancelBtn"\x3e${i18n.cancel}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/form/templates/ComboButton.html":'\x3ctable class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tcellspacing\x3d\'0\' cellpadding\x3d\'0\' role\x3d"presentation"\r\n\t\x3e\x3ctbody role\x3d"presentation"\x3e\x3ctr role\x3d"presentation"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point\x3d"buttonNode" data-dojo-attach-event\x3d"ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\r\n\t\t\x3e\x3cdiv id\x3d"${id}_button" class\x3d"dijitReset dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitInline dijitButtonText" id\x3d"${id}_label" data-dojo-attach-point\x3d"containerNode" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd id\x3d"${id}_arrow" class\x3d\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\r\n\t\t\tdata-dojo-attach-point\x3d"_popupStateNode,focusNode,_buttonNode"\r\n\t\t\tdata-dojo-attach-event\x3d"onkeydown:_onArrowKeyDown"\r\n\t\t\ttitle\x3d"${optionsTitle}"\r\n\t\t\trole\x3d"button" aria-haspopup\x3d"true"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonInner" role\x3d"presentation"\x3e\x3c/div\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitReset dijitArrowButtonChar" role\x3d"presentation"\x3e\x26#9660;\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd style\x3d"display:none !important;"\r\n\t\t\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" data-dojo-attach-point\x3d"valueNode"\r\n\t\t\t\tclass\x3d"dijitOffScreen" aria-hidden\x3d"true" data-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\t/\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\r\n\x3e\x3c/table\x3e\r\n',
"url:arcgisonline/pages/organization/widgets/templates/ProfilePopup.html":'\x3cdiv\x3e\r\n  \x3cspan tabindex\x3d"0" data-dojo-attach-point\x3d"closeIcon" class\x3d"hide popover-close icon-ui-close" tab-index\x3d"0" aria-label\x3d"${i18n.common.close}"\x3e\x3c/span\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"loader" class\x3d"profile-popup__loader loader is-active"\x3e\r\n    \x3cdiv class\x3d"profile-popup__loader-bars loader-bars"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"hide text-left" data-dojo-attach-point\x3d"content"\x3e\r\n    \x3cdiv class\x3d"profile-popup__top-section flex flex-align-center"\x3e\r\n      \x3cdiv class\x3d"js-member-thumb"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"flex-1 margin-right-1"\x3e\r\n        \x3cdiv class\x3d"avenir-bold font-size-1 profile-popup__full-name" data-dojo-attach-point\x3d"fullNameEl"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"font-size--1" data-dojo-attach-point\x3d"usernameEl"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cbutton type\x3d"button" data-dojo-attach-point\x3d"viewProfileBtn" class\x3d"btn-link profile-popup__link font-size--1 flex-0"\x3e${i18n.myOrganization.formatters.viewProfile} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"profile-popup__bottom-section" data-dojo-attach-point\x3d"bottomSection"\x3e\r\n      \x3cdiv class\x3d"profile-popup__bio-container" data-dojo-attach-point\x3d"bioContainer"\x3e\r\n        \x3cp class\x3d"profile-popup__bio-section trailer-half" data-dojo-attach-point\x3d"bioEl"\x3e\x3c/p\x3e\r\n        \x3cbutton class\x3d"hide btn-link btn-link-darker-gray profile-popup__more-toggle" data-dojo-attach-point\x3d"bioToggle"\x3e${!icons.chevron-down.24}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.groups}\x3c/div\x3e\r\n          \x3cdiv class\x3d"flex" data-dojo-attach-point\x3d"groupIcons"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"flex flex-align-center profile-popup__items-section hide" data-dojo-attach-point\x3d"itemsSection"\x3e\r\n        \x3cdiv class\x3d"flex-1"\x3e\r\n          \x3cdiv class\x3d"avenir-bold"\x3e${i18n.userProfile.items}\x3c/div\x3e\r\n          \x3cdiv class\x3d"font-size-4 profile-popup__item-count" data-dojo-attach-point\x3d"itemCountEl"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cbutton class\x3d"btn-link profile-popup__link font-size--1"\x3e${i18n.userProfile.viewAll} ${!icons.inline-end.launch.16}\x3c/button\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/TooltipDialog.html":'\x3cdiv role\x3d"alertdialog" tabIndex\x3d"-1"\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipContainer" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"contentsNode" class\x3d"dijitTooltipContents dijitTooltipFocusNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n\t\t\t${!actionBarTemplate}\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTooltipConnector" role\x3d"presentation" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:arcgisonline/pages/dijit/MemberThumb/templates/MemberThumb.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"content" class\x3d"member-thumb ${cssClasses}" style\x3d"background:${member.backgroundColor};"\x3e\r\n    \x3cimg src\x3d"${member.thumbnailUrl}" alt\x3d"" class\x3d"margin-left-0 ${member.thumbnail:hide}" data-dojo-attach-point\x3d"img"\x3e\r\n    \x3cdiv class\x3d"member-thumb__initials ${member.thumbnail:show}" data-dojo-attach-point\x3d"initials"\x3e\r\n      ${member.initials}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"member-thumb__edit-mask"\x3e\r\n      ${!icons.plus-circle.32}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/MenuSeparator.html":'\x3ctr class\x3d"dijitMenuSeparator" role\x3d"separator"\x3e\r\n\t\x3ctd class\x3d"dijitMenuSeparatorIconCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\t\x3ctd colspan\x3d"3" class\x3d"dijitMenuSeparatorLabelCell"\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorTop dijitMenuSeparatorLabel"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"dijitMenuSeparatorBottom"\x3e\x3c/div\x3e\r\n\t\x3c/td\x3e\r\n\x3c/tr\x3e\r\n',
"*now":function(D){D(['dojo/i18n!*preload*arcgisonline/nls/base*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("arcgisonline/base",["dojo","dijit","dojox","dojo/i18n!arcgisonline/nls/arcgisonline","dojo/require!esri/main,esri/utils,arcgisonline/init,arcgisonline/sharing/dijit/SiteHeader,arcgisonline/sharing/dijit/SiteFooter,arcgisonline/sharing/dijit/SiteFooterMap,arcgisonline/sharing/dijit/SignUpInternal,dijit/form/Form,arcgisonline/sharing/geow/Account,arcgisonline/sharing/dijit/HelpManager,dojo/date/locale,dojox/widget/Rotator,dojox/widget/AutoRotator,dojox/widget/rotator/Controller,dojox/widget/rotator/Fade,dijit/layout/StackController,dojo/cookie,dojo/json,arcgisonline/sharing/dijit/TextMenu,arcgisonline/sharing/util,dojo/topic,dijit/_base,dijit/form/DropDownButton,dijit/form/ComboButton,dijit/form/ToggleButton,dijit/form/RadioButton,dijit/PopupMenuItem,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,dijit/main,dojo/Stateful,dojo/date/locale,esri/utils,arcgisonline/sharing/dijit/Gallery,arcgisonline/sharing/util,arcgisonline/sharing/dijit/views,dojo/parser,dijit/_base,dojo/dnd/AutoSource,dojo/dnd/Target,dojo/fx/Toggler,dijit/TooltipDialog,dijit/MenuSeparator"],function(D,
A,a){D.provide("arcgisonline.base");D.require("esri.main");D.require("esri.utils");D.require("arcgisonline.init");D.require("arcgisonline.sharing.dijit.SiteHeader");D.require("arcgisonline.sharing.dijit.SiteFooter");D.require("arcgisonline.sharing.dijit.SiteFooterMap");D.require("arcgisonline.sharing.dijit.SignUpInternal");D.require("dijit.form.Form");D.require("arcgisonline.sharing.geow.Account");D.require("arcgisonline.sharing.dijit.HelpManager");D.require("dojo.date.locale");D.require("dojox.widget.Rotator");
D.require("dojox.widget.AutoRotator");D.require("dojox.widget.rotator.Controller");D.require("dojox.widget.rotator.Fade");D.require("dijit.layout.StackController");D.require("dojo.cookie");D.require("dojo.json");D.require("arcgisonline.sharing.dijit.TextMenu");D.require("arcgisonline.sharing.util");D.require("dojo.topic");D.require("dijit._base");D.require("dijit.form.DropDownButton");D.require("dijit.form.ComboButton");D.require("dijit.form.ToggleButton");D.require("dijit.form.RadioButton");D.require("dijit.PopupMenuItem");
D.require("dijit._Contained");D.require("dijit._Container");D.require("dijit._WidgetBase");D.require("dijit.main");D.require("dojo.Stateful");D.require("dojo.date.locale");D.require("esri.utils");D.require("arcgisonline.sharing.dijit.Gallery");D.require("arcgisonline.sharing.util");D.require("arcgisonline.sharing.dijit.views");D.require("dojo.parser");D.require("dijit._base");D.require("dojo.dnd.AutoSource");D.require("dojo.dnd.Target");D.require("dojo.fx.Toggler");D.require("dijit.TooltipDialog");
D.require("dijit.MenuSeparator");D.requireLocalization("arcgisonline","arcgisonline")});