// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/3.38/esri/copyright.txt for details.
// See https://www.arcgis.com/home/copyright.txt for further details.
//>>built
require({cache:{"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./webMercatorUtils ./mathUtils ../srUtils".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l){function m(){}b={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0};var n=D(d,{declaredClass:"esri.geometry.Extent",type:"extent",xmin:0,ymin:0,xmax:0,ymax:0,constructor:function(p,v,r,y,x){f.isObject(p)?(f.mixin(this,p),this.spatialReference&&(this.spatialReference=
l.createSpatialReference(this.spatialReference))):this.update(p,v,r,y,x);this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new c((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},getTopLeft:function(){return new c(this.xmin,this.ymax,this.spatialReference)},getTopRight:function(){return new c(this.xmax,this.ymax,this.spatialReference)},getBottomLeft:function(){return new c(this.xmin,
this.ymin,this.spatialReference)},getBottomRight:function(){return new c(this.xmax,this.ymin,this.spatialReference)},centerAt:function(p){var v=this.getCenter(),r=p.x-v.x;p=p.y-v.y;return new n(this.xmin+r,this.ymin+p,this.xmax+r,this.ymax+p,this.spatialReference)},update:function(p,v,r,y,x){this.xmin=p;this.ymin=v;this.xmax=r;this.ymax=y;this.spatialReference=x;this.clearCache();return this},offset:function(p,v){return new n(this.xmin+p,this.ymin+v,this.xmax+p,this.ymax+v,this.spatialReference)},
expand:function(p){var v=(1-p)/2;p=this.getWidth()*v;v*=this.getHeight();return new n(this.xmin+p,this.ymin+v,this.xmax-p,this.ymax-v,this.spatialReference)},intersects:function(p){if(!p)return!1;var v=p.type,r=this.spatialReference,y=p.spatialReference;r&&y&&!r.equals(y)&&r._canProject(y)&&(p=r.isWebMercator()?e.geographicToWebMercator(p):e.webMercatorToGeographic(p,!0));switch(v){case "point":return this.contains(p);case "multipoint":return this._intersectsMultipoint(p);case "extent":return this._intersectsExtent(p);
case "polygon":return this._intersectsPolygon(p);case "polyline":return this._intersectsPolyline(p)}},normalize:function(){var p=this._normalize(!1,!0);a.isArray(p)||(p=[p]);return p},shiftCentralMeridian:function(){return this._normalize(!0)},bisect:function(){var p=this.spatialReference,v=p&&p._getInfo(),r=[],y=0;if(v&&this._isOutOfBounds(v)){var x=this;y=x.xmin;var z=x.ymin,u=x.ymax,w=v.valid[0],t=v.valid[1];x.getWidth()>2*t&&(x=x.getCenter(),x=new n(x.x-t,z,x.x+t,u,new h(p.toJson())));y=x.xmin-
y;var A=this._normalizeX(x.xmin,v);v=this._normalizeX(x.xmax,v);A.frameId===v.frameId?r.push(new n(A.x,z,v.x,u,new h(p.toJson()))):r.push(new n(A.x,z,t,u,new h(p.toJson())),new n(w,z,v.x,u,new h(p.toJson())))}else r.push(this.getExtent());return{extents:r,marginLeft:y}},_intersectsMultipoint:function(p){var v=p.points.length,r;for(r=0;r<v;r++)if(this.contains(p.getPoint(r)))return!0;return!1},_intersectsExtent:function(p){var v,r,y=!1;if(this.xmin<=p.xmin){var x=p.xmin;this.xmax<x?y=!0:v=Math.min(this.xmax,
p.xmax)-x}else x=this.xmin,p.xmax<x?y=!0:v=Math.min(this.xmax,p.xmax)-x;if(this.ymin<=p.ymin){var z=p.ymin;this.ymax<z?y=!0:r=Math.min(this.ymax,p.ymax)-z}else z=this.ymin,p.ymax<z?y=!0:r=Math.min(this.ymax,p.ymax)-z;return y?null:new n(x,z,x+v,z+r,this.spatialReference)},_intersectsPolygon:function(p){var v=[this.xmin,this.ymax],r=[this.xmax,this.ymax],y=[this.xmin,this.ymin],x=[this.xmax,this.ymin],z=[v,r,y,x];v=[[y,v],[v,r],[r,x],[x,y]];y=p.rings;x=y.length;var u=new c(0,0,this.spatialReference);
var w=z.length;for(r=0;r<w;r++)if(u.update(z[r][0],z[r][1]),p.contains(u))return!0;u.setSpatialReference(p.spatialReference);for(r=0;r<x;r++)if(z=y[r],w=z.length){var t=z[0];u.update(t[0],t[1]);if(this.contains(u))return!0;for(p=1;p<w;p++){var A=z[p];u.update(A[0],A[1]);if(this.contains(u)||this._intersectsLine([t,A],v))return!0;t=A}}return!1},_intersectsPolyline:function(p){var v=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,
this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],r,y=p.paths,x=y.length,z,u=new c(0,0,p.spatialReference);for(p=0;p<x;p++){var w=y[p];if(z=w.length){var t=w[0];u.update(t[0],t[1]);if(this.contains(u))return!0;for(r=1;r<z;r++){var A=w[r];u.update(A[0],A[1]);if(this.contains(u)||this._intersectsLine([t,A],v))return!0;t=A}}}return!1},_intersectsLine:function(p,v){var r=k._getLineIntersection2,y,x=v.length;for(y=0;y<x;y++)if(r(p,v[y]))return!0;return!1},contains:function(p){if(!p)return!1;var v=
p.type;if("point"===v){var r=this.spatialReference,y=p.spatialReference;v=p.x;p=p.y;r&&y&&!r.equals(y)&&r._canProject(y)&&(p=r.isWebMercator()?c.lngLatToXY(v,p):c.xyToLngLat(v,p,!0),v=p[0],p=p[1]);return v>=this.xmin&&v<=this.xmax&&p>=this.ymin&&p<=this.ymax}return"extent"===v?this._containsExtent(p):!1},_containsExtent:function(p){var v=p.xmin,r=p.ymin,y=p.xmax,x=p.ymax,z=p.spatialReference;p=new c(v,r,z);v=new c(v,x,z);x=new c(y,x,z);r=new c(y,r,z);return this.contains(p)&&this.contains(v)&&this.contains(x)&&
this.contains(r)?!0:!1},union:function(p){return new n(Math.min(this.xmin,p.xmin),Math.min(this.ymin,p.ymin),Math.max(this.xmax,p.xmax),Math.max(this.ymax,p.ymax),this.spatialReference)},getExtent:function(){var p=this.spatialReference;return new n(this.xmin,this.ymin,this.xmax,this.ymax,p&&new h(p.toJson()))},_shiftCM:function(p){var v=this.getCacheValue("_shifted");if(!v){v=new n(this.toJson());var r=v.spatialReference;if(p=p||r._getInfo()){var y=this._getCM(p);if(y){var x=r._isWebMercator()?e.webMercatorToGeographic(y):
y;v.xmin-=y.x;v.xmax-=y.x;r._isWebMercator()||(x.x=this._normalizeX(x.x,p).x);v.setSpatialReference(new h(f.substitute({Central_Meridian:x.x},4326===r.wkid?p.altTemplate:p.wkTemplate)))}}this.setCacheValue("_shifted",v)}return v},_getCM:function(p){var v;this._isOutOfBounds(p)&&(v=this.getCenter());return v},_isOutOfBounds:function(p){var v=p.valid[0];p=p.valid[1];var r=this.xmin,y=this.xmax;return!(r>=v&&r<=p&&y>=v&&y<=p)},_normalize:function(p,v,r){var y=new n(this.toJson()),x=y.spatialReference;
if(x&&(r=r||x._getInfo())){var z=q.map(this._getParts(r),function(u){return u.extent});return 2<z.length?p?this._shiftCM(r):y.update(r.valid[0],y.ymin,r.valid[1],y.ymax,x):2===z.length?p?this._shiftCM(r):v?z:{rings:q.map(z,function(u){return[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]}),spatialReference:x}:z[0]||y}return y},_getParts:function(p){var v=this.getCacheValue("_parts");if(!v){v=[];var r=this.xmin,y=this.xmax,x=this.ymin,z=this.ymax,u=this.spatialReference,
w=this.getWidth(),t=r,A=y,G=0,B=0;p=p||u._getInfo();var E=p.valid[0];var F=p.valid[1];B=this._normalizeX(r,p);r=B.x;G=B.frameId;B=this._normalizeX(y,p);y=B.x;B=B.frameId;p=r===y&&0<w;if(w>2*F){w=new n(t<A?r:y,x,F,z,u);r=new n(E,x,t<A?y:r,z,u);F=new n(0,x,F,z,u);x=new n(E,x,0,z,u);u=[];E=[];w.contains(F)&&u.push(G);w.contains(x)&&E.push(G);r.contains(F)&&u.push(B);r.contains(x)&&E.push(B);for(z=G+1;z<B;z++)u.push(z),E.push(z);v.push({extent:w,frameIds:[G]},{extent:r,frameIds:[B]},{extent:F,frameIds:u},
{extent:x,frameIds:E})}else r>y||p?v.push({extent:new n(r,x,F,z,u),frameIds:[G]},{extent:new n(E,x,y,z,u),frameIds:[B]}):v.push({extent:new n(r,x,y,z,u),frameIds:[G]});this.setCacheValue("_parts",v)}return v},_normalizeX:function(p,v){var r=0,y=v.valid[0],x=v.valid[1],z=2*x;p>x?(r=Math.ceil(Math.abs(p-x)/z),p-=r*z):p<y&&(r=Math.ceil(Math.abs(p-y)/z),p+=r*z,r=-r);return{x:p,frameId:r}},toJson:function(){var p={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},v=this.spatialReference;v&&
(p.spatialReference=v.toJson());return p}});m.prototype=n.prototype;n.simpleConstructor=m;n.defaultProps=b;a.setObject("geometry.Extent",n,g);g.geometry.defaultExtent=b;return n})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(D,q,a){D=function(){return this}();var b=D.location,g=b.pathname;a=b.protocol;b={version:"3.38",_appBaseUrl:a+"//"+b.host+g.substring(0,g.lastIndexOf(g.split("/")[g.split("/").length-1]))};q.noGlobals||(D.esri=b);(b.dijit=b.dijit||
{})._arcgisUrl=("http:"===a||"https:"===a?a:"http:")+"//www.arcgis.com/sharing/rest";return b})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(D,q,a,b,g,f,h,d,c){function e(y,x,z,u){(x=x&&x[y])?x={formatType:x.formatType,options:x}:u&&-1!==D.indexOf(u.properties||"",y)?x={formatType:u.formatter||"DateString",options:null}:z&&-1!==D.indexOf(z.properties||"",y)&&(x={formatType:z.formatter||
"NumberFormat",options:null});return x}function k(y,x,z){return[b.isString(y)?y.split(""):y,x||a.global,b.isString(z)?new Function("item","index","array",z):z]}function l(y){return void 0!==y&&null!==y}function m(y){return l(y)?y:""}function n(y,x,z,u){var w=z.match(/([^\(]+)(\([^\)]+\))?/i);z=b.trim(w[1]);var t=w[2]?b.trim(w[2]):null;w=x[y];u=u||(t?q.fromJson(t.replace(/^\(/,"({").replace(/\)$/,"})")):{});t=u.utcOffset;if(-1===D.indexOf(v,z))z=b.getObject(z),b.isFunction(z)&&(w=z(w,y,x,u));else if("number"===
typeof w||"string"===typeof w&&w&&!isNaN(Number(w)))switch(w=Number(w),z){case "NumberFormat":return h.format(w,u);case "DateString":y=new Date(w);if(u.local||u.systemLocale)return u.systemLocale?y.toLocaleDateString()+(u.hideTime?"":" "+y.toLocaleTimeString()):y.toDateString()+(u.hideTime?"":" "+y.toTimeString());y=y.toUTCString();u.hideTime&&(y=y.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return y;case "DateFormat":return y=new Date(w),l(t)&&(y=g.add(y,"minute",y.getTimezoneOffset()-t)),d.format(y,
u)}return m(w)}function p(y,x){var z;if(x)for(z in y)y.hasOwnProperty(z)&&(void 0===y[z]?delete y[z]:y[z]instanceof Object&&p(y[z],!0));else for(z in y)y.hasOwnProperty(z)&&void 0===y[z]&&delete y[z];return y}var v=["NumberFormat","DateString","DateFormat"],r=/<\/?[^>]+>/g;f={valueOf:function(y,x){for(var z in y)if(y[z]==x)return z;return null},stripTags:function(y){if(y){var x=typeof y;if("string"===x)y=y.replace(r,"");else if("object"===x)for(var z in y)(x=y[z])&&"string"===typeof x&&(x=x.replace(r,
"")),y[z]=x}return y},substitute:function(y,x,z){if(l(z))if(b.isObject(z)){var u=z.first;var w=z.dateFormat;var t=z.numberFormat;var A=z.format}else u=z;if(x&&"${*}"!==x)return b.replace(x,b.hitch({obj:y},function(B,E){var F=E.split(":"),I;return 1<F.length?(E=F[0],F.shift(),(I=A&&A[F[0]])?F=I.formatType:(F=F.join(":"),I=null),n(E,this.obj,F,I)):(I=e(E,A,t,w))?n(E,this.obj,I.formatType,I.options):m(this.obj[E])}),/\$\{([^\}]+)\}/g);x=[];for(var G in y)if(z=(z=e(G,A,t,w))?n(G,y,z.formatType,z.options):
y[G],x.push(G+" \x3d "+m(z)+"\x3cbr/\x3e"),u)break;return x.join("")},filter:function(y,x,z){x=k(y,z,x);z={};var u;y=x[0];for(u in y)x[2].call(x[u],y[u],u,y)&&(z[u]=y[u]);return z},startsWith:function(y,x,z){z=z||0;return y.indexOf(x,z)===z},endsWith:function(y,x,z){if("number"!==typeof z||!isFinite(z)||Math.floor(z)!==z||z>y.length)z=y.length;z-=x.length;y=y.indexOf(x,z);return-1!==y&&y===z},isDefined:l,fixJson:p,isObject:function(y){return y&&"object"===typeof y},isString:function(y){return"string"===
typeof y},mixin:function(y,x){for(var z in x)x.hasOwnProperty(z)&&(y[z]=x[z]);return y},clone2DArray:function(y){if(y=y?y.slice(0):null){var x,z=y.length;for(x=0;x<z;x++)y[x]=y[x]?y[x].slice(0):null}return y},clone3DArray:function(y){if(y=y?y.slice(0):null){var x,z=y.length;for(x=0;x<z;x++){y[x]=y[x]?y[x].slice(0):null;var u=y[x];if(u){var w,t=u.length;for(w=0;w<t;w++)u[w]=u[w]?u[w].slice(0):null}}}return y}};b.mixin(c,f);c._isDefined=l;c._getParts=k;c._sanitize=p;return f})},"esri/SpatialReference":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/has","./kernel","./lang"],function(D,q,a,b,g){function f(){}a=[-2.0037508342788905E7,2.0037508342788905E7];var h=[-2.0037508342787E7,2.0037508342787E7];D=D(null,{declaredClass:"esri.SpatialReference",constructor:function(d){d&&(g.isObject(d)?g.mixin(this,d):g.isString(d)?this.wkt=d:this.wkid=d)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},_isWebMercator:function(){return-1!==q.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==q.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(d){var c=!1;d&&(c=this.isWebMercator()&&4326===d.wkid||d.isWebMercator()&&4326===this.wkid);return c},isWebMercator:function(){return this._isWebMercator()},equals:function(d){var c=!1;d&&(this===d&&
(c=!0),this.wkid||d.wkid?c=this.wkid===d.wkid||this.isWebMercator()&&d.isWebMercator()||this.wkid===d.latestWkid||d.wkid===this.latestWkid:this.wkt&&d.wkt&&(c=this.wkt.toUpperCase()===d.wkt.toUpperCase()));return c},toJson:function(){var d=null;null!=this.wkid?d={wkid:this.wkid}:null!=this.wkt&&(d={wkt:this.wkt});d&&null!=this.latestWkid&&(d.latestWkid=this.latestWkid);return d}});f.prototype=D.prototype;D.simpleConstructor=f;return b.SpatialReference=D})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/has","../kernel","../SpatialReference"],function(D,q,a,b,g){D=D(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,cache:void 0,setSpatialReference:function(f){this.spatialReference=f;return this},verifySR:function(){this.spatialReference||this.setSpatialReference(new g(4326))},getExtent:function(){return null},clearCache:function(){this.cache=void 0},getCacheValue:function(f){return this.cache&&this.cache[f]},setCacheValue:function(f,h){this.cache||
(this.cache={});this.cache[f]=h}});q.setObject("geometry.Geometry",D,b);return D})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ../srUtils".split(" "),function(D,q,a,b,g,f,h,d){function c(n,p){89.99999<p?p=89.99999:-89.99999>p&&(p=-89.99999);var v=.017453292519943*p;return[111319.49079327169*n,3189068.5*Math.log((1+Math.sin(v))/(1-Math.sin(v)))]}function e(n,p,v){n=n/6378137*57.29577951308232;return v?[n,57.29577951308232*
(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]:[n-360*Math.floor((n+180)/360),57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*p/6378137)))]}function k(){}function l(){}function m(n){var p=n._json;n._unquantizeFn?(p=n._unquantizeFn({x:p.x,y:p.y}),n._xVal=p.x,n._yVal=p.y,n._unquantizeFn=null):(n._xVal=p.x,n._yVal=p.y);n._json=null}a={type:"point",x:0,y:0};D=D(h,{declaredClass:"esri.geometry.Point",type:"point",x:0,y:0,constructor:function(n,p,v){q.isArray(n)?(this.x=n[0],this.y=
n[1],this.spatialReference=p):g.isObject(n)?(g.mixin(this,n),null!=this.latitude&&(this.y=this.latitude),null!=this.longitude&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=d.createSpatialReference(this.spatialReference))):(this.x=n,this.y=p,this.spatialReference=v);this.verifySR()},offset:function(n,p){return new this.constructor(this.x+n,this.y+p,this.spatialReference)},setX:function(n){this.x=n;this.clearCache();return this},setY:function(n){this.y=n;this.clearCache();return this},
setLongitude:function(n){var p=this.spatialReference;p&&(p._isWebMercator()?this.setX(c(n,this.y)[0]):4326===p.wkid&&this.setX(n));return this},setLatitude:function(n){var p=this.spatialReference;p&&(p._isWebMercator()?this.setY(c(this.x,n)[1]):4326===p.wkid&&this.setY(n));return this},getLongitude:function(){var n=this.spatialReference;if(n)if(n._isWebMercator())var p=e(this.x,this.y)[0];else 4326===n.wkid&&(p=this.x);return p},getLatitude:function(){var n=this.spatialReference;if(n)if(n._isWebMercator())var p=
e(this.x,this.y)[1];else 4326===n.wkid&&(p=this.y);return p},update:function(n,p){this.x=n;this.y=p;this.clearCache();return this},normalize:function(){var n=this.x,p=this.spatialReference;if(p){var v=p._getInfo();v&&(n=this._normalizeX(n,v))}return new this.constructor(n,this.y,p)},_normalizeX:function(n,p){var v=p.valid[0],r=p.valid[1],y=2*r;n>r?(v=Math.ceil(Math.abs(n-r)/y),n-=v*y):n<v&&(v=Math.ceil(Math.abs(n-v)/y),n+=v*y);return n},toJson:function(){var n={x:this.x,y:this.y},p=this.spatialReference;
p&&(n.spatialReference=p.toJson());return n}});k.prototype=D.prototype;l.prototype=new k;Object.defineProperty(l.prototype,"x",{get:function(){this._json&&m(this);return this._xVal},set:function(n){this._xVal=n}});Object.defineProperty(l.prototype,"y",{get:function(){this._json&&m(this);return this._yVal},set:function(n){this._yVal=n}});l.prototype.setupLazyUnquantization=function(n,p){this._unquantizeFn=n;this._json=p};D.simpleConstructor=k;D.accessorConstructor=l;D.lngLatToXY=c;D.xyToLngLat=e;D.defaultProps=
a;D.metersPerDegree=6378137*Math.PI/180;q.setObject("geometry.Point",D,b);b.geometry.defaultPoint=a;return D})},"esri/srUtils":function(){define(["./SpatialReference","./ImageSpatialReference","./kernel","./sniff","dojo/_base/lang"],function(D,q,a,b,g){function f(h){var d=!1;h&&(h.ics||h.icsid)&&(d=!0);return d}b={isICS:f,createSpatialReference:function(h){var d=null;h&&(d=f(h)?new q(h):new D(h));return d}};g.mixin(a,b);return b})},"esri/ImageSpatialReference":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./lang ./SpatialReference".split(" "),
function(D,q,a,b,g,f){D=D(f,{declaredClass:"esri.ImageSpatialReference",constructor:function(h){h&&q.isObject(h)&&q.mixin(this,h)},icsid:null,icsns:null,ics:null,_isWebMercator:function(){return!1},_isWrappable:function(){return!1},equals:function(h){var d=!1;if(h)if(this.icsid&&h.icsid){if(d=this.icsid===h.icsid,this.icsns||h.icsns)d=d&&this.icsns===h.icsns}else this.ics&&h.ics&&(d=this.ics===h.ics);return d},toJson:function(h){var d=null,c=g.isDefined;h=c(h)?h:!0;c(this.icsid)?(d={icsid:this.icsid},
c(this.icsns)&&(d.icsns=this.icsns)):c(this.ics)&&(d={ics:this.ics});c(this.url)&&c(d)&&h&&(d.url=this.url);return d}});return b.ImageSpatialReference=D})},"esri/sniff":function(){define(["dojo/_base/sniff","dojo/global","./kernel"],function(D,q,a){var b=D("ff"),g=D("ie"),f=void 0===g&&7<=D("trident"),h=D("edge"),d=D("webkit"),c=D("opera"),e=D("chrome"),k=D("safari"),l=navigator.userAgent,m;(m=l.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+_\d+)/i))&&D.add("esri-iphone",parseFloat(m[2].replace("_",".")));
(m=l.match(/Android\s+(\d+(\.\d+)*)/i))&&D.add("esri-android",parseFloat(m[1]));(m=l.match(/Fennec\/(\d+\.\d+)/i))&&D.add("esri-fennec",parseFloat(m[1]));0<=l.indexOf("BlackBerry")&&0<=l.indexOf("WebKit")&&D.add("esri-blackberry",1);D.add("esri-touch",D("esri-iphone")||D("esri-android")||D("esri-blackberry")||6<=D("esri-fennec")||(b||d)&&(document.createTouch||"ontouchstart"in q||q.TouchEvent&&0<navigator.maxTouchPoints)?!0:!1);(m=l.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&
D.add("esri-mobile",!!m);D.add("esri-pointer",!b&&(navigator.pointerEnabled||navigator.msPointerEnabled||!!q.PointerEvent));a._getDOMAccessor=function(p){var v="";b?v="Moz":d?v="Webkit":g?v="ms":c&&(v="O");return v+p.charAt(0).toUpperCase()+p.substr(1)};D.add("esri-phonegap",!!q.cordova);D.add("esri-cors",D("esri-phonegap")||q.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest);D.add("esri-file-upload",q.FormData&&q.FileList?!0:!1);D.add("esri-script-sandbox",function(){return"MessageChannel"in
q&&"HTMLIFrameElement"in q&&"sandbox"in HTMLIFrameElement.prototype});D.add("esri-secure-context",function(){if("isSecureContext"in q)return q.isSecureContext;if(q.location&&q.location.origin)return 0===q.location.origin.indexOf("https:")});D.add("esri-wasm","WebAssembly"in q);D.add("esri-workers",q.Worker?!0:!1);D.add("esri-featurelayer-webgl",!1);if(l=D("esri-featurelayer-webgl")){var n=D("esri-mobile");m=n?1:2;n=n?1:3;"object"===typeof l?(l.maxDrillLevel=null==l.maxDrillLevel?m:l.maxDrillLevel,
l.maxRecordCountFactor=null==l.maxRecordCountFactor?n:l.maxRecordCountFactor,l.enablePBFQuery=null==l.enablePBFQuery?!0:l.enablePBFQuery):D.add("esri-featurelayer-webgl",{maxDrillLevel:m,maxRecordCountFactor:n,enablePBFQuery:!0},null,!0)}D.add("esri-featurelayer-webgl-labeling",!1);D.add("esri-pbf",!g||10<=g);D.add("esri-featurelayer-pbf",!0);D.add("esri-transforms",f||h||9<=g||3.5<=b||4<=e||3.1<=k||10.5<=c||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transitions",f||h||10<=g||4<=b||
4<=e||3.1<=k||10.5<=c||3.2<=D("esri-iphone")||2.1<=D("esri-android"));D.add("esri-transforms3d",f||h||10<=b||12<=e||4<=k||3.2<=D("esri-iphone")||3<=D("esri-android"));D.add("esri-url-encodes-apostrophe",function(){if(!q.document)return!1;var p=q.document.createElement("a");p.href="?'";return-1<p.href.indexOf("?%27")});3>D("esri-android")&&(D.add("esri-transforms",!1,!1,!0),D.add("esri-transitions",!1,!1,!0),D.add("esri-transforms3d",!1,!1,!0));D.add("esri-will-change",D("esri-transforms")&&(52<=e||
11.1<=k));a._css=function(p){var v=D("esri-transforms3d");void 0!==p&&null!==p?v=p:v&&(e||k&&!D("esri-iphone"))&&(v=!1);var r=v?"translate3d(":"translate(",y=v?e?",-1px)":",0px)":")",x=v?"scale3d(":"scale(",z=v?",1)":")",u=v?"rotate3d(0,0,1,":"rotate(",w=v?"matrix3d(":"matrix(",t=v?",0,0,":",",A=v?",0,0,0,0,1,0,":",",G=v?",0,1)":")";return{names:{transition:d&&"-webkit-transition"||b&&"MozTransition"||c&&"OTransition"||g&&"msTransition"||"transition",transform:d&&"-webkit-transform"||b&&"MozTransform"||
c&&"OTransform"||g&&"msTransform"||"transform",transformName:d&&"-webkit-transform"||b&&"-moz-transform"||c&&"-o-transform"||g&&"-ms-transform"||"transform",origin:d&&"-webkit-transform-origin"||b&&"MozTransformOrigin"||c&&"OTransformOrigin"||g&&"msTransformOrigin"||"transformOrigin",endEvent:d&&"webkitTransitionEnd"||b&&"transitionend"||c&&"oTransitionEnd"||g&&"MSTransitionEnd"||"transitionend"},translate:function(B,E){return r+B+"px,"+E+"px"+y},scale:function(B){return x+B+","+B+z},rotate:function(B){return u+
B+"deg)"},matrix:function(B){return w+B.xx+","+B.xy+t+B.yx+","+B.yy+A+B.dx.toFixed(10)+(b&&59>=b?"px,":",")+B.dy.toFixed(10)+(b&&59>=b?"px":"")+G},getScaleFromMatrix:function(B){if(!B)return 1;B=B.toLowerCase();var E=-1<B.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(B.substring(E.length,B.indexOf(",")))}}};a.isiPhone=D("esri-iphone");a.isAndroid=D("esri-android");a.isFennec=D("esri-fennec");a.isBlackBerry=D("esri-blackberry");a.isTouchEnabled=D("esri-touch");a.isPointerEnabled=D("esri-pointer");
a._hasCors=D("esri-cors");a._hasFileUpload=D("esri-file-upload");a._hasTransforms=D("esri-transforms");a._hasTransitions=D("esri-transitions");a._has3DTransforms=D("esri-transforms3d");return D})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has ../kernel ../SpatialReference ./Point".split(" "),function(D,q,a,b,g,f){function h(c,e,k,l){if("point"===c.type){var m=e(c.x,c.y,l);return new c.constructor(m[0],m[1],new g(k))}if("extent"===c.type){m=e(c.xmin,
c.ymin,l);var n=e(c.xmax,c.ymax,l);return new c.constructor(m[0],m[1],n[0],n[1],new g(k))}if("polyline"===c.type||"polygon"===c.type){m="polyline"===c.type;var p=[],v;D.forEach(m?c.paths:c.rings,function(y){p.push(v=[]);D.forEach(y,function(x){v.push(e(x[0],x[1],l))})});return m?new c.constructor({paths:p,spatialReference:new g(k)}):new c.constructor({rings:p,spatialReference:new g(k)})}if("multipoint"===c.type){var r=[];D.forEach(c.points,function(y){r.push(e(y[0],y[1],l))});return new c.constructor({points:r,
spatialReference:new g(k)})}}function d(c,e){var k=c&&(null!=c.wkid?c:c.spatialReference),l=e&&(null!=e.wkid?e:e.spatialReference);return k&&l?l.equals(k)?!0:l._canProject(k):!1}a={canProject:d,project:function(c,e){var k=c&&c.spatialReference,l=e&&(null!=e.wkid?e:e.spatialReference);k&&l?k.equals(l)?c=new c.constructor(c.toJson()):d(k,l)?l.isWebMercator()?c=h(c,f.lngLatToXY,{wkid:102100}):4326===l.wkid&&(c=h(c,f.xyToLngLat,{wkid:4326})):c=null:c=null;return c},lngLatToXY:f.lngLatToXY,xyToLngLat:f.xyToLngLat,
metersPerDegree:f.metersPerDegree,geographicToWebMercator:function(c){return h(c,f.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(c,e){return h(c,f.xyToLngLat,{wkid:4326},e)}};q.mixin(q.getObject("geometry",!0,b),a);return a})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,q,a,b){function g(d,c,e){return d instanceof b?new b(d.x+e*(c.x-d.x),d.y+e*(c.y-d.y)):[d[0]+e*(c[0]-d[0]),d[1]+e*(c[1]-d[1])]}function f(d,c){return 1E-8>
Math.abs(d-c)}function h(d,c,e,k){var l=f(d[0],c[0])?1E10:(d[1]-c[1])/(d[0]-c[0]),m=f(e[0],k[0])?1E10:(e[1]-k[1])/(e[0]-k[0]),n=d[1]-l*d[0],p=e[1]-m*e[0];if(f(l,m)){if(f(n,p)){if(f(d[0],c[0]))if(Math.min(d[1],c[1])<Math.max(e[1],k[1])||Math.max(d[1],c[1])>Math.min(e[1],k[1])){d=(d[1]+c[1]+e[1]+k[1]-Math.min(d[1],c[1],e[1],k[1])-Math.max(d[1],c[1],e[1],k[1]))/2;var v=(d-n)/l}else return null;else if(Math.min(d[0],c[0])<Math.max(e[0],k[0])||Math.max(d[0],c[0])>Math.min(e[0],k[0]))v=(d[0]+c[0]+e[0]+
k[0]-Math.min(d[0],c[0],e[0],k[0])-Math.max(d[0],c[0],e[0],k[0]))/2,d=l*v+n;else return null;return[v,d]}return null}f(l,1E10)?(v=d[0],d=m*v+p):f(m,1E10)?(v=e[0],d=l*v+n):(v=-(n-p)/(l-m),d=d[1]===c[1]?d[1]:e[1]===k[1]?e[1]:l*v+n);return[v,d]}q={getLength:function(d,c){var e=c.x-d.x,k=c.y-d.y;return Math.sqrt(e*e+k*k)},_getLength:function(d,c){var e=c[0]-d[0],k=c[1]-d[1];return Math.sqrt(e*e+k*k)},getPointOnLine:g,getMidpoint:function(d,c){return g(d,c,.5)},_equals:f,_getLineIntersection:h,getLineIntersection:function(d,
c,e,k,l){(d=h([d.x,d.y],[c.x,c.y],[e.x,e.y],[k.x,k.y]))&&(d=new b(d[0],d[1],l));return d},_getLineIntersection2:function(d,c){var e=d[0],k=d[1],l=c[0],m=c[1],n=e[0];e=e[1];var p=k[0];k=k[1];var v=l[0],r=l[1];l=m[0]-v;v=n-v;var y=p-n;m=m[1]-r;r=e-r;var x=k-e,z=m*y-l*x;if(0===z)return!1;l=(l*r-m*v)/z;v=(y*r-x*v)/z;return 0<=l&&1>=l&&0<=v&&1>=v?[n+l*(p-n),e+l*(k-e)]:!1},_pointLineDistance:function(d,c){var e=c[0],k=c[1],l=e[0],m=e[1];e=d[0];var n=d[1],p=k[0]-l,v=k[1]-m,r=e-l,y=n-m;k=Math.sqrt;var x=
Math.pow,z=k(x(p,2)+x(v,2));r=(r*p+y*v)/(z*z);m+=r*v;return k(x(e-(l+r*p),2)+x(n-m,2))}};D.mixin(D.getObject("geometry",!0,a),q);return q})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff ../kernel ./Point ./ScreenPoint ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(D,q,a,b,g,f,h,d,c,e){var k=function(){return 9>a("ie")?function(m,n,p,v,r,y,x,z,u){var w=[],t=Math.round,A,G=x.length,B;for(A=0;A<G;A++){var E=x[A];var F=z?z(E[0][0],E[0][1],
u):E[0];if(1<(B=E.length)){var I=t((F[0]-m)*p+r);var M=t((n-F[1])*v+y);F=z?z(E[1][0],E[1][1],u):E[1];var P=t((F[0]-m)*p+r);F=t((n-F[1])*v+y);w.push("M",I+","+M,"L",P+","+F);for(P=2;P<B;P++)F=z?z(E[P][0],E[P][1],u):E[P],I=t((F[0]-m)*p+r),M=t((n-F[1])*v+y),w.push(I+","+M)}else I=t((F[0]-m)*p+r),M=t((n-F[1])*v+y),w.push("M",I+","+M)}return w}:function(m,n,p,v,r,y,x,z,u,w){var t=[],A,G,B=Math.round;var E=0;for(A=x?x.length:0;E<A;E++){var F=x[E];t.push("M");var I=0;for(G=F?F.length:0;I<G;I++){var M=z?
z(F[I][0],F[I][1],u):F[I];t.push(B((M[0]-m)*p+r)+","+B((n-M[1])*v+y))}w||t.push("Z")}return t}}(),l={toScreenPoint:function(m,n,p,v,r){var y=m.spatialReference,x=v.spatialReference,z=v.x;v=v.y;y&&x&&!y.equals(x)&&y._canProject(x)&&(y=y.isWebMercator()?g.lngLatToXY(z,v):g.xyToLngLat(z,v,!0),z=y[0],v=y[1]);z=(z-m.xmin)*(n/m.getWidth());v=(m.ymax-v)*(p/m.getHeight());r||(z=Math.round(z),v=Math.round(v));return new f(z,v)},toScreenGeometry:function(m,n,p,v){var r=m.xmin,y=m.ymax,x=n/m.getWidth(),z=p/
m.getHeight(),u=D.forEach,w=Math.round;if(v instanceof g)return new g(w((v.x-r)*x),w((y-v.y)*z));if(v instanceof c){m=new c;var t=m.points;u(v.points,function(F,I){t[I]=[w((F[0]-r)*x),w((y-F[1])*z)]});return m}if(v instanceof e)return new e(w((v.xmin-r)*x),w((y-v.ymin)*z),w((v.xmax-r)*x),w((y-v.ymax)*x));if(v instanceof h){m=new h;var A=m.paths,G;u(v.paths,function(F,I){G=A[I]=[];u(F,function(M,P){G[P]=[w((M[0]-r)*x),w((y-M[1])*z)]})});return m}if(v instanceof d){m=new d;var B=m.rings,E;u(v.rings,
function(F,I){E=B[I]=[];u(F,function(M,P){E[P]=[w((M[0]-r)*x),w((y-M[1])*z)]})});return m}},_toScreenPath:function(m,n,p,v,r,y){var x=v instanceof h,z=m.spatialReference,u=v.spatialReference;if(z&&u&&!z.equals(u)&&z._canProject(u))if(z.isWebMercator())var w=g.lngLatToXY;else{w=g.xyToLngLat;var t=!0}return k(m.xmin,m.ymax,n/m.getWidth(),p/m.getHeight(),r,y,x?v.paths:v.rings,w,t,x)},toMapPoint:function(m,n,p,v){return new g(m.xmin+v.x/(n/m.getWidth()),m.ymax-v.y/(p/m.getHeight()),m.spatialReference)},
toMapGeometry:function(m,n,p,v){var r=m.xmin,y=m.ymax,x=m.spatialReference,z=n/m.getWidth(),u=p/m.getHeight(),w=D.forEach;if(v instanceof g)return new g(r+v.x/z,y-v.y/u,x);if(v instanceof c){m=new c(x);var t=m.points;w(v.points,function(F,I){t[I]=[r+F[0]/z,y-F[1]/u]});return m}if(v instanceof e)return new e(r+v.xmin/z,y-v.ymin/u,r+v.xmax/z,y-v.ymax/u,x);if(v instanceof h){m=new h(x);var A=m.paths,G;w(v.paths,function(F,I){G=A[I]=[];w(F,function(M,P){G[P]=[r+M[0]/z,y-M[1]/u]})});return m}if(v instanceof
d){m=new d(x);var B=m.rings,E;w(v.rings,function(F,I){E=B[I]=[];w(F,function(M,P){E[P]=[r+M[0]/z,y-M[1]/u]})});return m}}};q.mixin(q.getObject("geometry",!0,b),l);return l})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","./Point"],function(D,q,a,b,g){D=D(g,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}});q.setObject("geometry.ScreenPoint",D,b);return D})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k){function l(){}function m(){}b={type:"polyline",paths:null};D=D(d,{declaredClass:"esri.geometry.Polyline",type:"polyline",paths:null,constructor:function(n){this.paths=[];this._path=0;n&&(a.isArray(n)?this.paths=a.isArray(n[0][0])?n:[n]:n.paths?f.mixin(this,n):this.spatialReference=n,this.spatialReference&&(this.spatialReference=k.createSpatialReference(this.spatialReference)));this.verifySR()},addPath:function(n){this.clearCache();this._path=this.paths.length;this.paths[this._path]=
[];a.isArray(n[0])?q.forEach(n,this._addPointArr,this):q.forEach(n,this._addPoint,this);return this},_addPointArr:function(n){this.paths[this._path].push(n)},_addPoint:function(n){this.paths[this._path].push([n.x,n.y])},_insertPoints:function(n,p){this.clearCache();this._path=p;this.paths[this._path]||(this.paths[this._path]=[]);q.forEach(n,this._addPoint,this)},_validateInputs:function(n,p){return null!==n&&void 0!==n&&(0>n||n>=this.paths.length)||null!==p&&void 0!==n&&(0>p||p>=this.paths[n].length)?
!1:!0},getPoint:function(n,p){if(this._validateInputs(n,p))return new c(this.paths[n][p],this.spatialReference)},setPoint:function(n,p,v){if(this._validateInputs(n,p))return this.clearCache(),this.paths[n][p]=[v.x,v.y],this},insertPoint:function(n,p,v){if(this._validateInputs(n)&&null!=p&&0<=p&&p<=this.paths[n].length)return this.clearCache(),this.paths[n].splice(p,0,[v.x,v.y]),this},removePath:function(n){if(this._validateInputs(n,null)){this.clearCache();n=this.paths.splice(n,1)[0];var p,v=n.length,
r=this.spatialReference;for(p=0;p<v;p++)n[p]=new c(n[p],r);return n}},removePoint:function(n,p){if(this._validateInputs(n,p))return this.clearCache(),new c(this.paths[n].splice(p,1)[0],this.spatialReference)},getExtent:function(){var n=this.getCacheValue("_extent");var p=this.getCacheValue("_partwise");if(n)return n=new e(n),n._partwise=p,n;n=this.paths;var v=n.length;if(v&&n[0].length){var r,y,x,z,u=r=n[0][0][0],w=y=n[0][0][1],t=Math.min,A=Math.max,G=this.spatialReference;p=[];var B,E;for(x=0;x<
v;x++){var F=n[x];var I=B=F[0]&&F[0][0];var M=E=F[0]&&F[0][1];var P=F.length;for(z=0;z<P;z++){var aa=F[z];var ca=aa[0];aa=aa[1];u=t(u,ca);w=t(w,aa);r=A(r,ca);y=A(y,aa);I=t(I,ca);M=t(M,aa);B=A(B,ca);E=A(E,aa)}p.push(new e({xmin:I,ymin:M,xmax:B,ymax:E,spatialReference:G?G.toJson():null}))}n={xmin:u,ymin:w,xmax:r,ymax:y,spatialReference:G?G.toJson():null};p=1<p.length?p:null;this.setCacheValue("_extent",n);this.setCacheValue("_partwise",p);n=new e(n);n._partwise=p;return n}},toJson:function(){var n=
{paths:f.clone3DArray(this.paths)},p=this.spatialReference;p&&(n.spatialReference=p.toJson());return n}});l.prototype=D.prototype;m.prototype=new l;Object.defineProperty(m.prototype,"paths",{get:function(){this._unquantizeFn&&(this._pathsVal=this._unquantizeFn({paths:f.clone3DArray(this._pathsVal)}).paths,this._unquantizeFn=null);return this._pathsVal},set:function(n){this._pathsVal=n}});m.prototype.setupLazyUnquantization=function(n,p){this._unquantizeFn=n;this._pathsVal=p.paths};D.simpleConstructor=
l;D.accessorConstructor=m;D.defaultProps=b;a.setObject("geometry.Polyline",D,g);g.geometry.defaultPolyline=b;return D})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l){function m(){}function n(){}b={type:"polygon",rings:null};var p=D(d,{declaredClass:"esri.geometry.Polygon",type:"polygon",rings:null,constructor:function(v){this.rings=
[];this._ring=0;v&&(a.isArray(v)?this.rings=a.isArray(v[0][0])?v:[v]:v.rings?f.mixin(this,v):this.spatialReference=v,this.spatialReference&&(this.spatialReference=l.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(v){this.clearCache();this._ring=this.rings.length;this.rings[this._ring]=[];a.isArray(v[0])?q.forEach(v,this._addPointArr,this):q.forEach(v,this._addPoint,this);return this},_addPointArr:function(v){this.rings[this._ring].push(v)},_addPoint:function(v){this.rings[this._ring].push([v.x,
v.y])},_insertPoints:function(v,r){this.clearCache();this._ring=r;this.rings[this._ring]||(this.rings[this._ring]=[]);q.forEach(v,this._addPoint,this)},_validateInputs:function(v,r){return null!==v&&void 0!==v&&(0>v||v>=this.rings.length)||null!==r&&void 0!==v&&(0>r||r>=this.rings[v].length)?!1:!0},getPoint:function(v,r){if(this._validateInputs(v,r))return new c(this.rings[v][r],this.spatialReference)},setPoint:function(v,r,y){if(this._validateInputs(v,r))return this.clearCache(),this.rings[v][r]=
[y.x,y.y],this},insertPoint:function(v,r,y){if(this._validateInputs(v)&&null!=r&&0<=r&&r<=this.rings[v].length)return this.clearCache(),this.rings[v].splice(r,0,[y.x,y.y]),this},removeRing:function(v){if(this._validateInputs(v,null)){this.clearCache();v=this.rings.splice(v,1)[0];var r,y=v.length,x=this.spatialReference;for(r=0;r<y;r++)v[r]=new c(v[r],x);return v}},removePoint:function(v,r){if(this._validateInputs(v,r))return this.clearCache(),new c(this.rings[v].splice(r,1)[0],this.spatialReference)},
getExtent:function(){var v=this.getCacheValue("_extent");var r=this.getCacheValue("_partwise");if(v)return v=new e(v),v._partwise=r,v;v=this.rings;var y=v.length;if(y&&v[0].length){var x,z,u,w,t=x=v[0][0][0],A=z=v[0][0][1],G=Math.min,B=Math.max,E=this.spatialReference;r=[];var F,I;for(u=0;u<y;u++){var M=v[u];var P=F=M[0]&&M[0][0];var aa=I=M[0]&&M[0][1];var ca=M.length;for(w=0;w<ca;w++){var ea=M[w];var T=ea[0];ea=ea[1];t=G(t,T);A=G(A,ea);x=B(x,T);z=B(z,ea);P=G(P,T);aa=G(aa,ea);F=B(F,T);I=B(I,ea)}r.push(new e({xmin:P,
ymin:aa,xmax:F,ymax:I,spatialReference:E?E.toJson():null}))}v={xmin:t,ymin:A,xmax:x,ymax:z,spatialReference:E?E.toJson():null};r=1<r.length?r:null;this.setCacheValue("_extent",v);this.setCacheValue("_partwise",r);v=new e(v);v._partwise=r;return v}},contains:function(v){var r=this.rings,y=!1,x,z,u,w=r.length;var t=this.spatialReference;var A=v.spatialReference;var G=v.x;v=v.y;t&&A&&!t.equals(A)&&t._canProject(A)&&(v=t.isWebMercator()?c.lngLatToXY(G,v):c.xyToLngLat(G,v,!0),G=v[0],v=v[1]);for(u=0;u<
w;u++){t=r[u];var B=t.length;for(z=x=0;z<B;z++){x++;x===B&&(x=0);A=t[z];var E=t[x];(A[1]<v&&E[1]>=v||E[1]<v&&A[1]>=v)&&A[0]+(v-A[1])/(E[1]-A[1])*(E[0]-A[0])<G&&(y=!y)}}return y},getCentroid:function(){var v=this.getCacheValue("_centroid");if(void 0!==v)return v;v=this.rings;var r,y,x=[],z,u,w=Infinity,t=-Infinity,A=Infinity,G=-Infinity;q.forEach(v,function(F){B=r=y=0;q.forEach(F,function(I,M){M<F.length-1&&(z=F[M+1],u=I[0]*z[1]-z[0]*I[1],B+=(I[0]+z[0])*u,r+=(I[1]+z[1])*u,y+=u,I[0]<w&&(w=I[0]),I[0]>
t&&(t=I[0]),I[1]<A&&(A=I[1]),I[1]>G&&(G=I[1]))});0<y&&(y*=-1);y&&x.push([B,r,y/2])});x.sort(function(F,I){return F[2]-I[2]});var B=r=void 0;if(x[0]){var E=6*x[0][2];B=x[0][0]/E;r=x[0][1]/E;if(B<w||B>t||r<A||r>G)B=r=void 0}if(void 0===B||void 0===r)if(v=v[0]&&v[0].length?this._getLineCentroid(v[0]):null)B=v.x,r=v.y;v=isNaN(B)||isNaN(r)?null:new c(B,r,this.spatialReference);this.setCacheValue("_centroid",v);return v},_getLineCentroid:function(v){var r=0,y=0,x=0,z={x:0,y:0},u={x:0,y:0},w,t=v.length,
A;for(w=0;w<t-1;w++){var G=v[w];var B=v[w+1];if(G&&B){z.x=G[0];z.y=G[1];u.x=B[0];u.y=B[1];var E=k.getLength(z,u);0<E&&(r+=E,G=k.getMidpoint(G,B),y+=E*G[0],x+=E*G[1])}}0<r?A={x:y/r,y:x/r}:v[0]&&(A={x:v[0][0],y:v[0][1]});return A},isClockwise:function(v){var r=0,y,x=v.length,z=a.isArray(v[0])?function(u,w){return u[0]*w[1]-w[0]*u[1]}:function(u,w){return u.x*w.y-w.x*u.y};for(y=0;y<x;y++)r+=z(v[y],v[(y+1)%x]);return 0>=r/2},isSelfIntersecting:function(v){v=v||this;var r,y,x,z,u,w=v.rings.length;for(x=
0;x<w;x++){for(r=0;r<v.rings[x].length-1;r++){var t=[[v.rings[x][r][0],v.rings[x][r][1]],[v.rings[x][r+1][0],v.rings[x][r+1][1]]];for(y=x+1;y<w;y++)for(z=0;z<v.rings[y].length-1;z++){var A=[[v.rings[y][z][0],v.rings[y][z][1]],[v.rings[y][z+1][0],v.rings[y][z+1][1]]];if((u=k._getLineIntersection2(t,A))&&!(u[0]===t[0][0]&&u[1]===t[0][1]||u[0]===A[0][0]&&u[1]===A[0][1]||u[0]===t[1][0]&&u[1]===t[1][1]||u[0]===A[1][0]&&u[1]===A[1][1]))return!0}}z=v.rings[x].length;if(!(4>=z))for(r=0;r<z-3;r++){var G=z-
1;0===r&&(G=z-2);t=[[v.rings[x][r][0],v.rings[x][r][1]],[v.rings[x][r+1][0],v.rings[x][r+1][1]]];for(y=r+2;y<G;y++)if(A=[[v.rings[x][y][0],v.rings[x][y][1]],[v.rings[x][y+1][0],v.rings[x][y+1][1]]],(u=k._getLineIntersection2(t,A))&&!(u[0]===t[0][0]&&u[1]===t[0][1]||u[0]===A[0][0]&&u[1]===A[0][1]||u[0]===t[1][0]&&u[1]===t[1][1]||u[0]===A[1][0]&&u[1]===A[1][1]))return!0}}return!1},toJson:function(){var v={rings:f.clone3DArray(this.rings)},r=this.spatialReference;r&&(v.spatialReference=r.toJson());return v}});
m.prototype=p.prototype;n.prototype=new m;Object.defineProperty(n.prototype,"rings",{get:function(){this._unquantizeFn&&(this._ringsVal=this._unquantizeFn({rings:f.clone3DArray(this._ringsVal)}).rings,this._unquantizeFn=null);return this._ringsVal},set:function(v){this._ringsVal=v}});n.prototype.setupLazyUnquantization=function(v,r){this._unquantizeFn=v;this._ringsVal=r.rings};p.simpleConstructor=m;p.accessorConstructor=n;p.defaultProps=b;p.createEllipse=function(v){var r=v.center.x,y=v.center.y,
x=v.longAxis,z=v.shortAxis,u=v.numberOfPoints,w=v.map,t;v=[];var A=2*Math.PI/u;for(t=0;t<u;t++){var G=Math.cos(t*A);var B=Math.sin(t*A);G=w.toMap({x:x*G+r,y:z*B+y});v.push(G)}v.push(v[0]);r=new p(w.spatialReference);r.addRing(v);return r};p.createCircle=function(v){return p.createEllipse({center:v.center,longAxis:v.r,shortAxis:v.r,numberOfPoints:v.numberOfPoints,map:v.map})};p.fromExtent=function(v){var r=v.normalize();v=v.spatialReference;return new p({rings:q.map(r,function(y){return[[y.xmin,y.ymin],
[y.xmin,y.ymax],[y.xmax,y.ymax],[y.xmax,y.ymin],[y.xmin,y.ymin]]}),spatialReference:v?v.toJson():null})};a.setObject("geometry.Polygon",p,g);g.geometry.defaultPolygon=b;g.geometry.createEllipse=p.createEllipse;g.geometry.createCircle=p.createCircle;g.geometry.isClockwise=p.prototype.isClockwise;g.geometry.polygonSelfIntersecting=p.prototype.isSelfIntersecting;return p})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ../srUtils".split(" "),
function(D,q,a,b,g,f,h,d,c,e){function k(){}function l(){}a={type:"multipoint",points:null};D=D(h,{declaredClass:"esri.geometry.Multipoint",type:"multipoint",points:null,constructor:function(m){this.points=[];m&&(m.points?g.mixin(this,m):this.spatialReference=m,this.spatialReference&&(this.spatialReference=e.createSpatialReference(this.spatialReference)));this.verifySR()},addPoint:function(m){this.clearCache();q.isArray(m)?this.points.push(m):this.points.push([m.x,m.y]);return this},removePoint:function(m){if(this._validateInputs(m))return this.clearCache(),
new d(this.points.splice(m,1)[0],this.spatialReference)},getExtent:function(){var m=this.getCacheValue("_extent");if(m)return new c(m);m=this.points;var n=m.length;if(n){var p=m[0],v,r,y=v=p[0],x=r=p[1],z=Math.min,u=Math.max,w=this.spatialReference,t;for(t=0;t<n;t++){p=m[t];var A=p[0];p=p[1];y=z(y,A);x=z(x,p);v=u(v,A);r=u(r,p)}m={xmin:y,ymin:x,xmax:v,ymax:r,spatialReference:w?w.toJson():null};this.setCacheValue("_extent",m);return new c(m)}},_validateInputs:function(m){return null===m||0>m||m>=this.points.length?
!1:!0},getPoint:function(m){if(this._validateInputs(m))return m=this.points[m],new d(m[0],m[1],this.spatialReference)},setPoint:function(m,n){if(this._validateInputs(m))return this.clearCache(),this.points[m]=[n.x,n.y],this},toJson:function(){var m={points:g.clone2DArray(this.points)},n=this.spatialReference;n&&(m.spatialReference=n.toJson());return m}});k.prototype=D.prototype;l.prototype=new k;Object.defineProperty(l.prototype,"points",{get:function(){this._unquantizeFn&&(this._pointsVal=this._unquantizeFn({points:g.clone2DArray(this._pointsVal)}).points,
this._unquantizeFn=null);return this._pointsVal},set:function(m){this._pointsVal=m}});l.prototype.setupLazyUnquantization=function(m,n){this._unquantizeFn=m;this._pointsVal=n.points};D.simpleConstructor=k;D.accessorConstructor=l;D.defaultProps=a;q.setObject("geometry.Multipoint",D,b);b.geometry.defaultMultipoint=a;return D})},"esri/geometry/scaleUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../config","../WKIDUnitConversion"],function(D,q,a,b,g){function f(l,m,n){return l&&m?
l.getWidth()/m*(n||d)*39.37*c.screenDPI:0}function h(l,m,n,p,v){return l.expand(p*m/(39.37*((v?n:e.values[e[n]])||d)*c.screenDPI)/l.getWidth())}var d=6370997*Math.PI/180,c=b.defaults,e=g,k={getUnitValueForSR:function(l){return this.getUnitValue(l)||d},getUnitValue:function(l){if(l)if("object"===typeof l){var m=l.wkid;var n=l.wkt}else"number"===typeof l?m=l:"string"===typeof l&&(n=l);if(m)var p=e.values[e[m]];else n&&-1!==n.search(/^PROJCS/i)&&(l=/UNIT\[([^\]]+)\]\]$/i.exec(n))&&l[1]&&(p=parseFloat(l[1].split(",")[1]));
return p},getScale:function(l,m,n){if(1<arguments.length&&null!=m&&!m.declaredClass){var p=l;var v=m;m=null;var r=k.getUnitValue(n)}else p=m||l.extent,v=l.width,r=k.getUnitValue(p&&p.spatialReference);return f(p,v,r)},getExtentForScale:function(l,m,n){return h(n||l.extent,l.width,k.getUnitValue(l.spatialReference),m,!0)}};D.mixin(D.getObject("geometry",!0,a),k);a.geometry._getScale=f;a.geometry._getExtentForScale=h;return k})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has",
"./kernel"],function(D,q,a,b){a=function(){return this}();var g={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,
zoomRate:25,zoomAnimationThrottled:!1,panDuration:350,panRate:25,logoLink:"http://www.esri.com"},autoSpatialIndexing:a.Worker&&!1,io:{errorHandler:function(f,h){q.publish("esri.Error",[f])},proxyUrl:null,alwaysUseProxy:!1,useCors:"with-credentials",corsEnabledServers:[/^https?:\/\/.+\.arcgis\.com(\/|$)/i,"server.arcgisonline.com","services.arcgisonline.com","www.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","tiles.arcgis.com","tiles1.arcgis.com","tiles2.arcgis.com","tiles3.arcgis.com",
"tiles4.arcgis.com","basemaps.arcgis.com","basemapsbeta.arcgis.com","basemaps-api.arcgis.com","elevation3d.arcgis.com","services.arcgis.com","services1.arcgis.com","services2.arcgis.com","services3.arcgis.com","services4.arcgis.com","services5.arcgis.com","services6.arcgis.com","services7.arcgis.com","services8.arcgis.com","services9.arcgis.com","cdn.arcgis.com","cdn-a.arcgis.com","cdn-b.arcgis.com","static.arcgis.com","utility.arcgis.com","utility.arcgisonline.com","geocode.arcgis.com","geoenrich.arcgis.com",
"qaext.arcgis.com","staticqa.arcgis.com","tilesqa.arcgis.com","servicesqa.arcgis.com","servicesqa1.arcgis.com","servicesqa2.arcgis.com","servicesqa3.arcgis.com","geocodeqa.arcgis.com","geoenrichqa.arcgis.com","dev.arcgis.com","devext.arcgis.com","localvtiles.arcgis.com","staticdev.arcgis.com","tilesdevext.arcgis.com","elevation3ddev.arcgis.com","servicesdev.arcgis.com","servicesdev1.arcgis.com","servicesdev2.arcgis.com","servicesdev3.arcgis.com","geocodedev.arcgis.com","geoenrichdev.arcgis.com","basemapsdev.arcgis.com",
"basemapsdev-api.arcgis.com","basemapsbetadev.arcgis.com"],corsDetection:a.cordova?!1:!0,corsDetectionTimeout:15,corsStatus:{},webTierAuthServers:[],proxyRules:[],postLength:2E3,timeout:6E4,useWorkers:"on-request",maxRequestWorkers:5,httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}}}};b.config=g;
D.noGlobals||(a.esriConfig=g);return g})},"esri/WKIDUnitConversion":function(){define(["dojo/has","./kernel"],function(D,q){var a,b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,
23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,
30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,
102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,
103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,
103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,
103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(a=2E3;2045>=
a;a++)b[a]=0;for(a=2056;2065>=a;a++)b[a]=0;for(a=2067;2135>=a;a++)b[a]=0;for(a=2137;2154>=a;a++)b[a]=0;for(a=2161;2170>=a;a++)b[a]=0;for(a=2172;2193>=a;a++)b[a]=0;for(a=2195;2198>=a;a++)b[a]=0;for(a=2200;2203>=a;a++)b[a]=0;for(a=2205;2217>=a;a++)b[a]=0;for(a=2222;2224>=a;a++)b[a]=1;for(a=2225;2250>=a;a++)b[a]=2;for(a=2251;2253>=a;a++)b[a]=1;for(a=2257;2264>=a;a++)b[a]=2;for(a=2274;2279>=a;a++)b[a]=2;for(a=2280;2282>=a;a++)b[a]=1;for(a=2283;2289>=a;a++)b[a]=2;for(a=2290;2292>=a;a++)b[a]=0;for(a=2308;2313>=
a;a++)b[a]=0;for(a=2315;2491>=a;a++)b[a]=0;for(a=2494;2866>=a;a++)b[a]=0;for(a=2867;2869>=a;a++)b[a]=1;for(a=2870;2888>=a;a++)b[a]=2;for(a=2891;2895>=a;a++)b[a]=2;for(a=2896;2898>=a;a++)b[a]=1;for(a=2902;2908>=a;a++)b[a]=2;for(a=2915;2920>=a;a++)b[a]=2;for(a=2921;2923>=a;a++)b[a]=1;for(a=2924;2930>=a;a++)b[a]=2;for(a=2931;2962>=a;a++)b[a]=0;for(a=2964;2968>=a;a++)b[a]=2;for(a=2969;2973>=a;a++)b[a]=0;for(a=2975;2991>=a;a++)b[a]=0;for(a=2995;3051>=a;a++)b[a]=0;for(a=3054;3079>=a;a++)b[a]=0;for(a=3081;3088>=
a;a++)b[a]=0;for(a=3092;3101>=a;a++)b[a]=0;for(a=3106;3138>=a;a++)b[a]=0;for(a=3146;3151>=a;a++)b[a]=0;for(a=3153;3166>=a;a++)b[a]=0;for(a=3168;3172>=a;a++)b[a]=0;for(a=3174;3203>=a;a++)b[a]=0;for(a=3294;3358>=a;a++)b[a]=0;for(a=3367;3403>=a;a++)b[a]=0;for(a=3408;3416>=a;a++)b[a]=0;for(a=3417;3438>=a;a++)b[a]=2;for(a=3441;3446>=a;a++)b[a]=2;for(a=3447;3450>=a;a++)b[a]=0;for(a=3451;3459>=a;a++)b[a]=2;for(a=3460;3478>=a;a++)b[a]=0;for(a=3554;3559>=a;a++)b[a]=0;for(a=3560;3570>=a;a++)b[a]=2;for(a=3571;3581>=
a;a++)b[a]=0;for(a=3594;3597>=a;a++)b[a]=0;for(a=3601;3604>=a;a++)b[a]=0;for(a=3637;3639>=a;a++)b[a]=0;for(a=3665;3667>=a;a++)b[a]=0;for(a=3693;3695>=a;a++)b[a]=0;for(a=3701;3727>=a;a++)b[a]=0;for(a=3728;3739>=a;a++)b[a]=2;for(a=3740;3751>=a;a++)b[a]=0;for(a=3753;3760>=a;a++)b[a]=2;for(a=3761;3773>=a;a++)b[a]=0;for(a=3775;3777>=a;a++)b[a]=0;for(a=3779;3781>=a;a++)b[a]=0;for(a=3783;3785>=a;a++)b[a]=0;for(a=3788;3791>=a;a++)b[a]=0;for(a=3797;3802>=a;a++)b[a]=0;for(a=3814;3816>=a;a++)b[a]=0;for(a=3825;3829>=
a;a++)b[a]=0;for(a=3832;3841>=a;a++)b[a]=0;for(a=3844;3852>=a;a++)b[a]=0;for(a=3873;3885>=a;a++)b[a]=0;for(a=3890;3893>=a;a++)b[a]=0;for(a=3907;3912>=a;a++)b[a]=0;for(a=3942;3950>=a;a++)b[a]=0;for(a=3968;3970>=a;a++)b[a]=0;for(a=3973;3976>=a;a++)b[a]=0;for(a=3986;3989>=a;a++)b[a]=0;for(a=3994;3997>=a;a++)b[a]=0;for(a=4048;4051>=a;a++)b[a]=0;for(a=4056;4063>=a;a++)b[a]=0;for(a=4093;4096>=a;a++)b[a]=0;for(a=4390;4398>=a;a++)b[a]=0;for(a=4399;4413>=a;a++)b[a]=2;for(a=4418;4433>=a;a++)b[a]=2;for(a=4455;4457>=
a;a++)b[a]=2;for(a=4484;4489>=a;a++)b[a]=0;for(a=4491;4554>=a;a++)b[a]=0;for(a=4568;4589>=a;a++)b[a]=0;for(a=4652;4656>=a;a++)b[a]=0;for(a=4766;4800>=a;a++)b[a]=0;for(a=5014;5016>=a;a++)b[a]=0;for(a=5069;5072>=a;a++)b[a]=0;for(a=5105;5130>=a;a++)b[a]=0;for(a=5173;5188>=a;a++)b[a]=0;for(a=5253;5259>=a;a++)b[a]=0;for(a=5269;5275>=a;a++)b[a]=0;for(a=5292;5311>=a;a++)b[a]=0;for(a=5329;5331>=a;a++)b[a]=0;for(a=5343;5349>=a;a++)b[a]=0;for(a=5355;5357>=a;a++)b[a]=0;for(a=5387;5389>=a;a++)b[a]=0;for(a=5459;5463>=
a;a++)b[a]=0;for(a=5479;5482>=a;a++)b[a]=0;for(a=5518;5520>=a;a++)b[a]=0;for(a=5530;5539>=a;a++)b[a]=0;for(a=5550;5552>=a;a++)b[a]=0;for(a=5562;5583>=a;a++)b[a]=0;for(a=5623;5625>=a;a++)b[a]=2;for(a=5631;5639>=a;a++)b[a]=0;for(a=5649;5653>=a;a++)b[a]=0;for(a=5663;5680>=a;a++)b[a]=0;for(a=5682;5685>=a;a++)b[a]=0;for(a=5875;5877>=a;a++)b[a]=0;for(a=5896;5899>=a;a++)b[a]=0;for(a=5921;5940>=a;a++)b[a]=0;for(a=6050;6125>=a;a++)b[a]=0;for(a=6244;6275>=a;a++)b[a]=0;for(a=6328;6348>=a;a++)b[a]=0;for(a=6350;6356>=
a;a++)b[a]=0;for(a=6366;6372>=a;a++)b[a]=0;for(a=6381;6387>=a;a++)b[a]=0;for(a=6393;6404>=a;a++)b[a]=0;for(a=6480;6483>=a;a++)b[a]=0;for(a=6511;6514>=a;a++)b[a]=0;for(a=6579;6581>=a;a++)b[a]=0;for(a=6619;6624>=a;a++)b[a]=0;for(a=6625;6627>=a;a++)b[a]=2;for(a=6628;6632>=a;a++)b[a]=0;for(a=6634;6637>=a;a++)b[a]=0;for(a=6669;6692>=a;a++)b[a]=0;for(a=6707;6709>=a;a++)b[a]=0;for(a=6720;6723>=a;a++)b[a]=0;for(a=6732;6738>=a;a++)b[a]=0;for(a=6931;6933>=a;a++)b[a]=0;for(a=6956;6959>=a;a++)b[a]=0;for(a=7005;7007>=
a;a++)b[a]=0;for(a=7057;7070>=a;a++)b[a]=2;for(a=7074;7082>=a;a++)b[a]=0;for(a=7109;7118>=a;a++)b[a]=0;for(a=7119;7127>=a;a++)b[a]=1;for(a=7374;7376>=a;a++)b[a]=0;for(a=7528;7586>=a;a++)b[a]=0;for(a=7587;7645>=a;a++)b[a]=2;for(a=7692;7696>=a;a++)b[a]=0;for(a=7755;7787>=a;a++)b[a]=0;for(a=7791;7795>=a;a++)b[a]=0;for(a=7799;7801>=a;a++)b[a]=0;for(a=7803;7805>=a;a++)b[a]=0;for(a=7825;7831>=a;a++)b[a]=0;for(a=7845;7859>=a;a++)b[a]=0;for(a=8013;8032>=a;a++)b[a]=0;for(a=8065;8068>=a;a++)b[a]=1;for(a=8518;8529>=
a;a++)b[a]=2;for(a=8533;8536>=a;a++)b[a]=2;for(a=8538;8540>=a;a++)b[a]=2;for(a=8677;8679>=a;a++)b[a]=0;for(a=8836;8840>=a;a++)b[a]=0;for(a=8857;8859>=a;a++)b[a]=0;for(a=8908;8910>=a;a++)b[a]=0;for(a=9154;9159>=a;a++)b[a]=0;for(a=9205;9218>=a;a++)b[a]=0;for(a=9271;9273>=a;a++)b[a]=0;for(a=9295;9297>=a;a++)b[a]=0;for(a=9356;9360>=a;a++)b[a]=0;for(a=9404;9407>=a;a++)b[a]=0;for(a=9476;9482>=a;a++)b[a]=0;for(a=9487;9494>=a;a++)b[a]=0;for(a=9697;9699>=a;a++)b[a]=0;for(a=20002;20032>=a;a++)b[a]=0;for(a=
20062;20092>=a;a++)b[a]=0;for(a=20135;20138>=a;a++)b[a]=0;for(a=20248;20258>=a;a++)b[a]=0;for(a=20348;20358>=a;a++)b[a]=0;for(a=20436;20440>=a;a++)b[a]=0;for(a=20822;20824>=a;a++)b[a]=0;for(a=20934;20936>=a;a++)b[a]=0;for(a=21035;21037>=a;a++)b[a]=0;for(a=21095;21097>=a;a++)b[a]=0;for(a=21148;21150>=a;a++)b[a]=0;for(a=21413;21423>=a;a++)b[a]=0;for(a=21453;21463>=a;a++)b[a]=0;for(a=21473;21483>=a;a++)b[a]=0;for(a=21780;21782>=a;a++)b[a]=0;for(a=21891;21894>=a;a++)b[a]=0;for(a=21896;21899>=a;a++)b[a]=
0;for(a=22171;22177>=a;a++)b[a]=0;for(a=22181;22187>=a;a++)b[a]=0;for(a=22191;22197>=a;a++)b[a]=0;for(a=22234;22236>=a;a++)b[a]=0;for(a=22521;22525>=a;a++)b[a]=0;for(a=22991;22994>=a;a++)b[a]=0;for(a=23028;23038>=a;a++)b[a]=0;for(a=23830;23853>=a;a++)b[a]=0;for(a=23866;23872>=a;a++)b[a]=0;for(a=23877;23884>=a;a++)b[a]=0;for(a=23886;23894>=a;a++)b[a]=0;for(a=23946;23948>=a;a++)b[a]=0;for(a=24311;24313>=a;a++)b[a]=0;for(a=24342;24347>=a;a++)b[a]=0;for(a=24370;24374>=a;a++)b[a]=10;for(a=24375;24381>=
a;a++)b[a]=0;for(a=24718;24721>=a;a++)b[a]=0;for(a=24817;24821>=a;a++)b[a]=0;for(a=24877;24882>=a;a++)b[a]=0;for(a=24891;24893>=a;a++)b[a]=0;for(a=25391;25395>=a;a++)b[a]=0;for(a=25828;25838>=a;a++)b[a]=0;for(a=26191;26195>=a;a++)b[a]=0;for(a=26391;26393>=a;a++)b[a]=0;for(a=26701;26722>=a;a++)b[a]=0;for(a=26729;26799>=a;a++)b[a]=2;for(a=26801;26803>=a;a++)b[a]=2;for(a=26811;26813>=a;a++)b[a]=2;for(a=26847;26870>=a;a++)b[a]=2;for(a=26891;26899>=a;a++)b[a]=0;for(a=26901;26923>=a;a++)b[a]=0;for(a=26929;26946>=
a;a++)b[a]=0;for(a=26948;26998>=a;a++)b[a]=0;for(a=27037;27040>=a;a++)b[a]=0;for(a=27205;27232>=a;a++)b[a]=0;for(a=27258;27260>=a;a++)b[a]=0;for(a=27391;27398>=a;a++)b[a]=0;for(a=27561;27564>=a;a++)b[a]=0;for(a=27571;27574>=a;a++)b[a]=0;for(a=27581;27584>=a;a++)b[a]=0;for(a=27591;27594>=a;a++)b[a]=0;for(a=28191;28193>=a;a++)b[a]=0;for(a=28348;28358>=a;a++)b[a]=0;for(a=28402;28432>=a;a++)b[a]=0;for(a=28462;28492>=a;a++)b[a]=0;for(a=29118;29122>=a;a++)b[a]=0;for(a=29168;29172>=a;a++)b[a]=0;for(a=29177;29185>=
a;a++)b[a]=0;for(a=29187;29195>=a;a++)b[a]=0;for(a=29900;29903>=a;a++)b[a]=0;for(a=30161;30179>=a;a++)b[a]=0;for(a=30491;30494>=a;a++)b[a]=0;for(a=30729;30732>=a;a++)b[a]=0;for(a=31251;31259>=a;a++)b[a]=0;for(a=31265;31268>=a;a++)b[a]=0;for(a=31275;31279>=a;a++)b[a]=0;for(a=31281;31297>=a;a++)b[a]=0;for(a=31461;31469>=a;a++)b[a]=0;for(a=31491;31495>=a;a++)b[a]=0;for(a=31917;31922>=a;a++)b[a]=0;for(a=31965;32E3>=a;a++)b[a]=0;for(a=32001;32003>=a;a++)b[a]=2;for(a=32005;32031>=a;a++)b[a]=2;for(a=32033;32060>=
a;a++)b[a]=2;for(a=32064;32067>=a;a++)b[a]=2;for(a=32074;32077>=a;a++)b[a]=2;for(a=32081;32086>=a;a++)b[a]=0;for(a=32107;32130>=a;a++)b[a]=0;for(a=32133;32158>=a;a++)b[a]=0;for(a=32164;32167>=a;a++)b[a]=2;for(a=32180;32199>=a;a++)b[a]=0;for(a=32201;32260>=a;a++)b[a]=0;for(a=32301;32360>=a;a++)b[a]=0;for(a=32601;32662>=a;a++)b[a]=0;for(a=32664;32667>=a;a++)b[a]=2;for(a=32701;32761>=a;a++)b[a]=0;for(a=53001;53004>=a;a++)b[a]=0;for(a=53008;53019>=a;a++)b[a]=0;for(a=53021;53032>=a;a++)b[a]=0;for(a=53034;53037>=
a;a++)b[a]=0;for(a=53042;53046>=a;a++)b[a]=0;for(a=53074;53080>=a;a++)b[a]=0;for(a=54001;54004>=a;a++)b[a]=0;for(a=54008;54019>=a;a++)b[a]=0;for(a=54021;54032>=a;a++)b[a]=0;for(a=54034;54037>=a;a++)b[a]=0;for(a=54042;54046>=a;a++)b[a]=0;for(a=54048;54053>=a;a++)b[a]=0;for(a=54074;54080>=a;a++)b[a]=0;for(a=54098;54101>=a;a++)b[a]=0;for(a=102001;102040>=a;a++)b[a]=0;for(a=102042;102063>=a;a++)b[a]=0;for(a=102065;102067>=a;a++)b[a]=0;for(a=102070;102117>=a;a++)b[a]=0;for(a=102122;102216>=a;a++)b[a]=
0;for(a=102221;102377>=a;a++)b[a]=0;for(a=102382;102388>=a;a++)b[a]=0;for(a=102389;102398>=a;a++)b[a]=2;for(a=102399;102444>=a;a++)b[a]=0;for(a=102445;102447>=a;a++)b[a]=2;for(a=102448;102458>=a;a++)b[a]=0;for(a=102459;102468>=a;a++)b[a]=2;for(a=102469;102499>=a;a++)b[a]=0;for(a=102500;102519>=a;a++)b[a]=1;for(a=102520;102524>=a;a++)b[a]=0;for(a=102525;102529>=a;a++)b[a]=2;for(a=102530;102588>=a;a++)b[a]=0;for(a=102590;102598>=a;a++)b[a]=0;for(a=102601;102603>=a;a++)b[a]=0;for(a=102605;102628>=a;a++)b[a]=
0;for(a=102629;102646>=a;a++)b[a]=2;for(a=102648;102700>=a;a++)b[a]=2;for(a=102701;102703>=a;a++)b[a]=0;for(a=102707;102730>=a;a++)b[a]=2;for(a=102733;102758>=a;a++)b[a]=2;for(a=102767;102900>=a;a++)b[a]=0;for(a=102965;102969>=a;a++)b[a]=0;for(a=102971;102973>=a;a++)b[a]=0;for(a=102975;102989>=a;a++)b[a]=0;for(a=102990;102992>=a;a++)b[a]=1;for(a=102997;103002>=a;a++)b[a]=0;for(a=103003;103008>=a;a++)b[a]=2;for(a=103009;103011>=a;a++)b[a]=0;for(a=103012;103014>=a;a++)b[a]=2;for(a=103019;103021>=a;a++)b[a]=
0;for(a=103022;103024>=a;a++)b[a]=2;for(a=103029;103031>=a;a++)b[a]=0;for(a=103032;103034>=a;a++)b[a]=2;for(a=103065;103068>=a;a++)b[a]=0;for(a=103074;103076>=a;a++)b[a]=0;for(a=103077;103079>=a;a++)b[a]=1;for(a=103080;103082>=a;a++)b[a]=0;for(a=103083;103085>=a;a++)b[a]=2;for(a=103090;103093>=a;a++)b[a]=0;for(a=103097;103099>=a;a++)b[a]=0;for(a=103100;103102>=a;a++)b[a]=2;for(a=103107;103109>=a;a++)b[a]=0;for(a=103110;103112>=a;a++)b[a]=2;for(a=103113;103116>=a;a++)b[a]=0;for(a=103117;103120>=a;a++)b[a]=
2;for(a=103153;103157>=a;a++)b[a]=0;for(a=103158;103162>=a;a++)b[a]=2;for(a=103163;103165>=a;a++)b[a]=0;for(a=103166;103168>=a;a++)b[a]=1;for(a=103169;103171>=a;a++)b[a]=2;for(a=103186;103188>=a;a++)b[a]=0;for(a=103189;103191>=a;a++)b[a]=2;for(a=103192;103195>=a;a++)b[a]=0;for(a=103196;103199>=a;a++)b[a]=2;for(a=103200;103224>=a;a++)b[a]=0;for(a=103225;103227>=a;a++)b[a]=1;for(a=103232;103237>=a;a++)b[a]=0;for(a=103238;103243>=a;a++)b[a]=2;for(a=103244;103246>=a;a++)b[a]=0;for(a=103247;103249>=a;a++)b[a]=
2;for(a=103254;103256>=a;a++)b[a]=0;for(a=103257;103259>=a;a++)b[a]=2;for(a=103264;103266>=a;a++)b[a]=0;for(a=103267;103269>=a;a++)b[a]=2;for(a=103300;103375>=a;a++)b[a]=0;for(a=103381;103383>=a;a++)b[a]=0;for(a=103384;103386>=a;a++)b[a]=1;for(a=103387;103389>=a;a++)b[a]=0;for(a=103390;103392>=a;a++)b[a]=2;for(a=103397;103399>=a;a++)b[a]=0;for(a=103400;103471>=a;a++)b[a]=2;for(a=103476;103478>=a;a++)b[a]=0;for(a=103479;103481>=a;a++)b[a]=2;for(a=103486;103488>=a;a++)b[a]=0;for(a=103489;103491>=a;a++)b[a]=
2;for(a=103492;103495>=a;a++)b[a]=0;for(a=103496;103499>=a;a++)b[a]=2;for(a=103528;103543>=a;a++)b[a]=0;for(a=103544;103548>=a;a++)b[a]=2;for(a=103549;103551>=a;a++)b[a]=0;for(a=103552;103554>=a;a++)b[a]=1;for(a=103555;103557>=a;a++)b[a]=2;for(a=103558;103560>=a;a++)b[a]=0;for(a=103571;103573>=a;a++)b[a]=0;for(a=103574;103576>=a;a++)b[a]=2;for(a=103577;103580>=a;a++)b[a]=0;for(a=103581;103583>=a;a++)b[a]=2;for(a=103595;103694>=a;a++)b[a]=0;for(a=103696;103699>=a;a++)b[a]=0;for(a=103700;103793>=a;a++)b[a]=
2;for(a=103794;103872>=a;a++)b[a]=0;for(a=103900;103971>=a;a++)b[a]=2;return q.WKIDUnitConversion=b})},"esri/domUtils":function(){define(["./kernel","dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has"],function(D,q,a,b,g){var f={show:function(h){if(h=f.getNode(h))h.style.display="block"},getNode:function(h){return h&&h.domNode||h},hide:function(h){if(h=f.getNode(h))h.style.display="none"},toggle:function(h){if(h=f.getNode(h))h.style.display="none"===h.style.display?"block":"none"},
documentBox:8>=g("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(h){if(h=this.getNode(h)){var d=0,c=0,e=0,k=0,l=0,m=0;return[q.connect(h,"ontouchstart",function(n){d=n.touches[0].screenX;c=n.touches[0].screenY;e=h.scrollWidth;k=h.scrollHeight;l=h.clientWidth;m=h.clientHeight}),q.connect(h,"ontouchmove",function(n){n.preventDefault();var p=h.firstChild;p instanceof Text&&(p=h.childNodes[1]);var v=
p._currentX||0,r=p._currentY||0;v+=n.touches[0].screenX-d;0<v?v=0:0>v&&Math.abs(v)+l>e&&(v=-1*(e-l));p._currentX=v;r+=n.touches[0].screenY-c;0<r?r=0:0>r&&Math.abs(r)+m>k&&(r=-1*(k-m));p._currentY=r;b.set(p,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+v+"px, "+r+"px)"});d=n.touches[0].screenX;c=n.touches[0].screenY})]}}};a.mixin(D,f);return f})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),
function(D,q,a,b,g,f,h,d,c,e){var k={},l=d.defaults.io,m=/^[a-z][a-z0-9\+\-\.]*:/i,n=/^\s*http:/i,p=/^\s*https:/i,v=/:\d+$/,r=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;k.isHTTP=function(x){var z=b.location.protocol;return null==x?"http:"===z||"https:"===z:x?"https:"===z:"http:"===z};k.getProtocolForWebResource=function(x){return k.isHTTP()?b.location.protocol:x?"https:":"http:"};k.urlToObject=function(x){var z={},u=new a(x),w=x.indexOf("?");null===u.query?z={path:x,query:null}:(z.path=x.substring(0,
w),z.query=g.queryToObject(u.query));u.fragment&&(z.hash=u.fragment,null===u.query&&(z.path=z.path.substring(0,z.path.length-(u.fragment.length+1))));return z};k.getProxyUrl=function(x,z){var u=D.isString(x)?0===D.trim(x).toLowerCase().indexOf("https:"):x,w=l.proxyUrl,t,A=e.io.proxyNotSet;D.isString(x)&&(t=k.getProxyRule(x))&&(w=t.proxyUrl);if(!w)throw Error(A);if(u&&!1!==z&&0!==b.location.href.toLowerCase().indexOf("https:")&&(u=w,0!==u.toLowerCase().indexOf("http")&&(u=k.getAbsoluteUrl(u)),u=u.replace(/^http:/i,
"https:"),k.canUseXhr(u))){w=u;var G=1}w=k.urlToObject(w);w._xo=G;return w};k.addProxy=function(x){var z=k.getProxyRule(x),u;z?u=k.urlToObject(z.proxyUrl):l.alwaysUseProxy&&(u=k.getProxyUrl());u&&(z=k.urlToObject(x),x=u.path+"?"+z.path,(u=g.objectToQuery(D.mixin(u.query||{},z.query)))&&(x+="?"+u));return x};k.addProxyRule=function(x){var z=x.urlPrefix=k.urlToObject(x.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),u=l.proxyRules,w,t=u.length,A=t;for(w=0;w<t;w++){var G=
u[w].urlPrefix;if(0===z.indexOf(G)){if(z.length===G)return-1;A=w;break}else 0===G.indexOf(z)&&(A=w+1)}u.splice(A,0,x);return A};k.getProxyRule=function(x){var z=l.proxyRules,u=z.length,w=k.urlToObject(x).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase();for(x=0;x<u;x++)if(0===w.indexOf(z[x].urlPrefix)){var t=z[x];break}return t};k.hasSameOrigin=function(x,z,u){x=x.toLowerCase();z=z.toLowerCase();var w=b.location.href.toLowerCase();x=0===x.indexOf("http")?new a(x):w=new a(w);
z=0===z.indexOf("http")?new a(z):D.isString(w)?new a(w):w;return(u||x.scheme===z.scheme)&&x.host===z.host&&x.port===z.port};k.canUseXhr=function(x,z){var u=c("esri-phonegap")?!0:!1,w=k.hasSameOrigin,t=l.corsEnabledServers,A,G=-1;!u&&c("esri-cors")&&t&&t.length&&(u=q.some(t,function(B,E){var F=!B||"object"!==typeof B||B instanceof RegExp?B:B.host;if(F instanceof RegExp){if(F.test(x))return G=E,!0}else if(F&&(A=0!==F.trim().toLowerCase().indexOf("http"),w(x,A?"http://"+F:F)||A&&w(x,"https://"+F)))return G=
E,!0;return!1}));return z?G:u};k.getAbsoluteUrl=function(x){var z=k.getProtocolForWebResource();return D.isString(x)&&!m.test(x)?0===x.indexOf("//")?z+x:0===x.indexOf("/")?z+"//"+b.location.host+x:f._appBaseUrl+x:x};k.fixUrl=function(x){x=D.trim(x);x=k.getAbsoluteUrl(x);x=k.normalizeSlashes(x);x=x.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");x=k.downgradeToHTTP(x);return x=k.upgradeToHTTPS(x)};k.normalize=function(x){return k.fixUrl(x)};k.normalizeSlashes=function(x){if(/^https?:\/\//i.test(x)){var z=
x.indexOf("?");if(-1<z){var u=x.slice(0,z);var w=x.slice(z+1)}else u=x;x=u.replace(/\/{2,}/g,"/");x=x.replace("/","//");w&&(x+="?"+w)}return x};k.downgradeToHTTP=function(x){return k.isHTTP(!1)&&p.test(x)&&k.hasSameOrigin(b.location.href,x,!0)&&!k.canUseXhr(x)?x.replace(p,"http:"):x};k.upgradeToHTTPS=function(x){var z=l.httpsDomains,u=k.isHTTP(!1),w=k.isHTTP(!0);if(!n.test(x))return x;x=D.trim(x);var t=x.indexOf("/",7);t=-1===t?x:x.slice(0,t);t=t.toLowerCase().slice(7);if(v.test(t))if(h.endsWith(t,
":80"))t=t.slice(0,-3),x=x.replace(":80","");else return x;if(u&&t===b.location.host&&(!r.test(x)||!k.canUseXhr(x)))return x;u=!1;if(w&&t===b.location.host)u=!0;else if(z)for(var A=0;A<z.length;A++){var G=z[A];if(t===G||h.endsWith(t,"."+G)){u=!0;break}}u||!w||l.alwaysUseProxy||k.getProxyRule(x)||(u=!0);u&&(x=x.replace(n,"https:"));return x};d=e.widgets.popup;var y=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:d.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,
label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,appName:"Navigator",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",
label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:d.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:d.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:d.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:d.NLS_openLinkInApp},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:d.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,
appName:"Microsoft Power BI",label:d.NLS_openLinkInApp}];k.getURIInfo=function(x){var z;q.some(y,function(u){u.pattern.test(x)&&(z=u);return!!z});return z};k.isKnownURI=function(x){return!!k.getURIInfo(x)};D.mixin(f,k);f._getProxyUrl=k.getProxyUrl;f._getProxiedUrl=k.addProxy;f._hasSameOrigin=k.hasSameOrigin;f._canDoXOXHR=k.canUseXhr;f._getAbsoluteUrl=k.getAbsoluteUrl;f.fixUrl=k.fixUrl;return k})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has ../Evented ../kernel ../lang ../request ../deferredUtils ../urlUtils ../SpatialReference ../geometry/Extent".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p){var v=D([d],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(r,y){this._attrs={};r&&b.isString(r)?this._url=m.urlToObject(this.url=m.normalize(r)):(this.url=this._url=null,(y=y||r)&&(y.layerDefinition||y.query)&&(y=null));this.spatialReference=new n(4326);this.initialExtent=new p(-180,-90,180,90,new n(4326));this._map=this._div=
null;this.normalization=!0;y&&(y.id&&(this.id=y.id),this.arcgisProps=y.arcgisProps,this.parentLayer=y.parentLayer,!1===y.visible&&(this.visible=!1),e.isDefined(y.opacity)&&(this.opacity=y.opacity),e.isDefined(y.minScale)&&this.setMinScale(y.minScale),e.isDefined(y.maxScale)&&this.setMaxScale(y.maxScale),this.attributionDataUrl=y.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,e.isDefined(y.showAttribution)&&(this.showAttribution=y.showAttribution),this.className=y.className,
this.refreshInterval=y.refreshInterval||0);this._errorHandler=b.hitch(this,this._errorHandler);this._scheduledRefresh=b.hitch(this,this._scheduledRefresh);this.refresh=b.hitch(this,this.refresh);if(this.managedSuspension){var x=this._setMap;this._setMap=function(z){var u=x.apply(this,arguments);this._fireAttach(z);this.evaluateSuspension();if(this.suspended&&!z.loaded)var w=a.connect(z,"onLoad",this,function(){a.disconnect(w);w=null;this.evaluateSuspension()});return u}}this.registerConnectEvents()},
id:null,visible:!0,opacity:1,loaded:!1,loadError:null,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attached:!1,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(r){this.loaded||(this.loadError=r);this.onError(r)},_setMap:function(r,y,x,z){this._map=r;this._lyrZEHandle=a.connect(r,"onZoomEnd",this,this._processMapScale);if(r.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var u=a.connect(r,"onLoad",this,function(){a.disconnect(u);
u=null;this._processMapScale()})},_unsetMap:function(r,y){a.disconnect(this._lyrZEHandle);this._map=this._lyrZEHandle=null;this._resumedOnce=void 0;this.suspended=!0;this._fireDetach(r)},_fireAttach:function(r){this.attached=!0;this.onAttach({map:r})},_fireDetach:function(r){this.attached=!1;this.onDetach({map:r})},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart(),this._map&&this._map._incr())},
_fireUpdateEnd:function(r,y){this.updating&&(this.updating=!1,this.attr("data-updating"),this._refreshRT(),this.onUpdateEnd(r,y),this._map&&this._map._decr())},_getToken:function(){var r=this._url,y=this.credential;return r&&r.query&&r.query.token||y&&y.token||void 0},_findCredential:function(){this.credential=c.id&&this._url&&c.id.findCredential(this._url.path)},_useSSL:function(){var r=this._url,y=/^http:/i;this.url&&(this.url=this.url.replace(y,"https:"));r&&r.path&&(r.path=r.path.replace(y,"https:"))},
refresh:function(r){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(r){this.setScaleRange(r)},setMaxScale:function(r){this.setScaleRange(null,r)},setScaleRange:function(r,y){var x=e.isDefined(r),z=e.isDefined(y);this.loaded||(this._hasMin=this._hasMin||x,this._hasMax=this._hasMax||z);var u=this.minScale,w=this.maxScale;this.minScale=(x?r:this.minScale)||0;this.maxScale=(z?y:this.maxScale)||0;if(u!==this.minScale||w!==this.maxScale)this.onScaleRangeChange(),
this._processMapScale()},suspend:function(){this._suspended=!0;this.evaluateSuspension()},resume:function(){this._suspended=!1;this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0;this.attr("data-suspended","");this.onSuspend();if(this._map)this._map.onLayerSuspend(this)},
_resume:function(){this.suspended=!1;this.attr("data-suspended");var r=void 0===this._resumedOnce,y=this.className,x=this._attrs,z=this.getNode(),u;if(r){this._resumedOnce=!0;if(y&&z){var w=z.getAttribute("class")||"";(new RegExp("(^|\\s)"+y+"(\\s|$)","i")).test(w)||z.setAttribute("class",w+((w?" ":"")+y))}if(x&&z)for(u in x)x.hasOwnProperty(u)&&z.setAttribute(u,x[u])}this._refreshRT();this.onResume({firstOccurrence:r});if(this._map)this._map.onLayerResume(this)},_processMapScale:function(){var r=
this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale();r!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(r){return r?v.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(r,y){if(!(r||this._map&&this._map.loaded))return!1;var x=this._map;r=r||x.getScale();var z=this.minScale,u=this.maxScale,w=!z,t=!u,A;y&&(A=x.width>x.height?x.width:x.height);w||(r<=z?w=!0:y&&(w=Math.abs(z-r)/z<1/
A));t||(r>=u?t=!0:y&&(t=Math.abs(u-r)/u<1/A));return w&&t},getAttributionData:function(){var r=this.attributionDataUrl,y=new g(l._dfdCanceller);this.hasAttributionData&&r?(y._pendingDfd=k({url:r,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),y._pendingDfd.then(function(x){y.callback(x)},function(x){y.errback(x)})):(r=Error("Layer does not have attribution data"),r.log=!!q.isDebug,y.errback(r));return y},getResourceInfo:function(){var r=this.resourceInfo;return b.isString(r)?f.fromJson(r):
b.clone(r)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(r,y){var x=this.getNode();if("data-reference"===r&&11>h("ie"))return this;x&&(null==y?x.removeAttribute(r):x.setAttribute(r,y));this._attrs&&(null==y?delete this._attrs[r]:this._attrs[r]=y);return this},setRefreshInterval:function(r){var y=this.refreshInterval;this.refreshInterval=r;this._toggleRT(!1);r&&this._toggleRT(!0);if(y!==r)this.onRefreshIntervalChange();return this},_toggleRT:function(r){r&&
this.refreshInterval?(clearInterval(this._refreshTimer),this._refreshTimer=setInterval(this._scheduledRefresh,6E4*this.refreshInterval)):this._refreshTimer&&(clearInterval(this._refreshTimer),this._refreshTimer=null)},_refreshRT:function(){this._toggleRT(!1);this._toggleRT(!0)},_scheduledRefresh:function(){this.onRefreshTick();!this._map||this.suspended||this.updating||this.refresh({scheduled:!0})},_refreshTS:null,_reCheckTS:/[\?&]_ts=/ig,_reReplaceTS:/([\?&]_ts=)[0-9]+/ig,addTimestampToURL:function(r){var y=
this._refreshTS;y&&(r=this._reCheckTS.test(r)?r.replace(this._reReplaceTS,"$$$1"+y):r+((-1===r.indexOf("?")?"?":"\x26")+"_ts\x3d"+y));return r},setNormalization:function(r){this.normalization=r},setVisibility:function(r){this.visible!==r&&(this.visible=r,this.onVisibilityChange(this.visible),this.evaluateSuspension());this.attr("data-hidden",r?null:"")},onLoad:function(){},onAttach:function(r){},onDetach:function(r){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},
onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onRefreshTick:function(){},onError:function(){}});b.setObject("layers.Layer",v,c);return v})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/has ./kernel".split(" "),function(D,q,a,b,g,f){D=D([b],{declaredClass:"esri.Evented",registerConnectEvents:function(){var h=this.constructor,d=this.constructor._meta.parents,
c=[{}],e={},k,l=function(n,p){q.isArray(n)||(n=[n]);for(var v=0;v<n.length;v++){var r=n[v];r._meta&&r._meta.parents&&l(r._meta.parents,p);r.prototype._eventMap&&p.push(q.mixin({},r.prototype._eventMap))}return p};if(!h._onMap){l(d,c);c.push(this._eventMap);d=q.mixin.apply(this,c);for(m in this)/^on\w/.test(m)&&q.isFunction(this[m])&&(c=this._hyphenLower(m).toLowerCase(),d[c]||(e[c]={method:m}));for(k in d){var m=this._onCamelCase(k);e[k]={method:m,argKeys:d[k]}}h._onMap=e;return h._onMap}},on:function(h,
d){if(-1<h.indexOf(",")){for(var c=h.split(/\s*,\s*/),e=c.length,k=[];e--;)k.push(this.on(c[e],d));k.remove=function(){for(var n=0;n<k.length;n++)k[n].remove()};return k}c=this.constructor._onMap||this.registerConnectEvents();e="string"==typeof h&&h.toLowerCase();var l=this._onCamelCase(e),m=c&&c[e];return(l=m&&m.method||this[l]&&q.isFunction(this[l])&&l)?m&&q.isArray(m.argKeys)?(c=this._onArr2Obj(d,c[e].argKeys),a.after(this,l,c,!0)):a.after(this,l,function(n){n=n||{};n.target||(n.target=this);d.call(this,
n)},!0):this.inherited(arguments)},emit:function(h,d){var c,e,k=h.toLowerCase();var l=this._onCamelCase(h);var m=this.constructor._onMap||this.registerConnectEvents();l=(e=m&&m[k]&&m[k].method||q.isFunction(this[l])&&l)&&this[e];e&&m&&m[k]&&this._onObj2Arr(function(){c=Array.prototype.slice.call(arguments)},m[k].argKeys)(d);d=d||{};d.target||(d.target=this);if(l){var n=c&&c.length?c:[d];n=l.apply(this,n)}this.inherited(arguments,[h,d]);return n},_onObj2Arr:function(h,d){if(d){var c=this;return function(e){var k,
l=[],m=d.length;for(k=0;k<m;k++)l[k]=e[d[k]];h.apply(c,l)}}return h},_onArr2Obj:function(h,d){if(d){var c=this;return function(){var e,k={},l=arguments.length;for(e=0;e<l;e++)k[d[e]]=arguments[e];k.target||(k.target=c);h.call(c,k)}}return h},_hyphenLower:function(h){return h.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(d,c){return(c?"-":"")+d.toLowerCase()})},_onCamelCase:function(h){return"on"+h.substr(0,1).toUpperCase()+h.substr(1).replace(/\-([a-z])/g,function(d,c){return c.toUpperCase()})}});
return f.Evented=D})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/request/xhr ./core/request/script dojo/request/iframe dojo/dom-construct dojo/io-query ./kernel ./config ./sniff ./lang ./urlUtils ./deferredUtils".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y){function x(T){T=new f(T);return(T.host+(T.port?":"+T.port:"")).toLowerCase()}function z(T){return this._xhr?this._xhr.getResponseHeader(T):
null}function u(T,la){var X=l.objectToQuery(T.content);X&&(T.url+=(-1===T.url.indexOf("?")?"?":"\x26")+X);if(2E3<T.url.length){if("data:"!==T.url.toLowerCase().slice(0,5))return X=new b,X.reject(g.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."})),X;if(3E6<T.url.length)return X=new b,X.reject(g.mixin(Error(),{message:"When using responseType 'image', data URL length cannot exceed 3000000 characters."})),X}var R=new Image;la.allowImageDataAccess&&
(R.crossOrigin=T.withCredentials?"use-credentials":"anonymous");var fa=!1,S=new b(function(Y){fa=!0;R.onload=R.onerror=R.onabort=null;R.src=""});X=function(Y){R.onload=R.onerror=R.onabort=null;fa||S.reject(Error("Unable to load the resource"))};R.onload=function(){R.onload=R.onerror=R.onabort=null;fa||S.resolve(this)};R.onerror=X;R.onabort=X;R.alt="";R.src=T.url;return S}function w(T,la,X,R){var fa=!1,S=!1,Y=!1;if(v.isDefined(la))if(g.isObject(la)){fa=!!la.useProxy;S=!!la.usePost;Y=!!la.returnProgress;
var ia=la.crossOrigin}else fa=!!la;T=g.mixin({},T);delete T._credential;T._ssl&&(T.url=T.url.replace(/^http:/i,"https:"));10>p("ie")&&!ca.test(T.url)&&(T.url=encodeURI(T.url));var L=T.content,W=T.url,ja=X&&T.form,ra=M;ia=v.isDefined(ia)?ia:ra.useCors;T.load=function(ua){if(ua){if(ua.error){var Ma=g.mixin(Error(),ua.error);Ma.log=!!a.isDebug}else"error"===ua.status&&(Ma=g.mixin(Error(),ua),Ma.log=!!a.isDebug);Ma&&(T.failOk=!Ma.log,v.isDefined(Ma.httpCode)||(Ma.httpCode=Ma.code))}return Ma||ua};T.error=
function(ua,Ma){Ma&&Ma.xhr&&Ma.xhr.abort();ua instanceof Error||(ua=g.mixin(Error(),ua));ua.log=!!a.isDebug;T.failOk=!ua.log;ra.errorHandler(ua,Ma);return ua};T._token&&(T.content=T.content||{},T.content.token=T._token);var qa=0;if(L&&W){var wa=l.objectToQuery(L);qa=wa.length+W.length+1;p("esri-url-encodes-apostrophe")&&(qa=wa.replace(/'/g,"%27").length+W.length+1)}T.timeout=v.isDefined(T.timeout)?T.timeout:ra.timeout;T.handleAs=T.handleAs||"json";try{var sa=ia&&r.canUseXhr(T.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(T.url),
V=r.hasSameOrigin(T.url,window.location.href)||sa,U=S||X||qa>ra.postLength?!0:!1,da=V||-1===T.handleAs.indexOf("json")||!T.callbackParamName||X?!1:!0,na=r.getProxyRule(T.url)||ra.alwaysUseProxy||fa||!("image"===T.handleAs&&!la.allowImageDataAccess||da&&!U||V)?!0:!1;X&&!p("esri-file-upload")&&!na&&sa&&(na=!0);if(na){var ka=r.getProxyUrl(W,ia);var xa=ka.path;ka._xo&&(sa=!0);!U&&xa.length+1+qa>ra.postLength&&(U=!0);T.url=xa+"?"+W;if(U)T.content=g.mixin(ka.query||{},L);else{var O=l.objectToQuery(g.mixin(ka.query||
{},L));O&&(T.url+="?"+O);T.content=null}}if(!da||U||na){var Q=T.headers;!sa||Q&&Q.hasOwnProperty("X-Requested-With")||(Q=T.headers=Q||{},Q["X-Requested-With"]=null);if(X){var ba=T.callbackParamName||"callback.html",ha=T.callbackElementName||"textarea",pa,za,Fa=ja.elements?ja.elements.length:0;if(L=T.content)for(pa in L.token&&-1<W.toLowerCase().indexOf("/sharing/servers/")&&(W+=(-1===W.indexOf("?")?"?":"\x26")+"token\x3d"+L.token,T.url=na?xa+"?"+W:W,delete L.token),L){var Ha=L[pa];if(v.isDefined(Ha)){var Ba=
null;for(za=0;za<Fa;za++){var va=ja.elements[za];if(va.name===pa){Ba=va;break}}Ba?Ba.value=Ha:R?ja.append(pa,Ha):ja.appendChild(k.create("input",{type:"hidden",name:pa,value:Ha}))}}if(p("esri-file-upload")){q.forEach(ja.elements,function(ua){ua.name===ba&&ja.removeChild(ua)});var Ca=R?ja:new FormData(ja);if(11<=p("safari")&&"entries"in Ca&&"delete"in Ca){R=[];for(var Aa=Ca.entries(),Na=Aa.next();!Na.done;){var Ea=Na.value;Ea[1]instanceof File&&""===Ea[1].name&&R.push(Ea[0]);Na=Aa.next()}R.forEach(function(ua){Ca["delete"](ua)})}T.contentType=
!1;T.postData=Ca;delete T.form}else{ja.enctype="multipart/form-data";9>p("ie")&&(ja.encoding="multipart/form-data");ja.method="post";q.some(ja.elements,function(ua){return ua.name===ba})||ja.appendChild(k.create("input",{type:"hidden",name:ba,value:ha}));if(-1!==W.toLowerCase().indexOf("addattachment")||-1!==W.toLowerCase().indexOf("updateattachment"))W+=(-1===W.indexOf("?")?"?":"\x26")+ba+"\x3d"+ha,T.url=na?xa+"?"+W:W;delete T.content}}if(sa&&!T.hasOwnProperty("withCredentials")&&"with-credentials"===
M.useCors){W=na?xa:W;var Sa=r.canUseXhr(W,!0),Ia=-1<Sa?M.corsEnabledServers[Sa]:null;if(Ia&&Ia.hasOwnProperty("withCredentials"))Ia.withCredentials&&(T.withCredentials=!0);else if(m.id){var Xa=m.id.findServerInfo(W);Xa&&Xa.webTierAuth&&(T.withCredentials=!0)}}T=I?I(T):T;if("image"===T.handleAs)return u(T,la);if(U){if(X&&!p("esri-file-upload")){var Ja=new b(function(){Oa.cancel()});var Oa=e.post(T.url,T).then(function(ua){Ja.resolve(ua)}).otherwise(function(ua){Ja.reject(ua)});Ja.addCallback(function(ua){return T.load(ua)});
Ja.addErrback(function(ua){return T.error(ua)});return Ja}!na&&p("safari")&&(T.url+=(-1===T.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+aa++);if(Y){T.uploadProgress=!0;T.data=T.postData;T.query=T.content;Ja=new b(function(){Ta.cancel()});var Ta=d.post(T.url,T).then(function(ua){Ja.resolve(ua)},function(ua){Ja.reject(ua)},function(ua){Ja.progress({transferType:ua.transferType,loaded:ua.loaded,total:ua.total})});Ja.addCallback(function(ua){return T.load(ua)});Ja.addErrback(function(ua){return T.error(ua)});
return Ja}return h.post(T)}return h.get(T)}T=I?I(T):T;T.jsonp=T.callbackParamName;T.query=T.content;Ja=new b(function(){Pa.cancel()});var Pa=c.get(T.url,T).then(function(ua){Ja.resolve(ua)}).otherwise(function(ua){Ja.reject(ua)});Ja.addCallback(function(ua){return T.load(ua)});Ja.addErrback(function(ua){return T.error(ua)});return Ja}catch(ua){return Ja=new b,Ja.errback(T.error(ua)),Ja}}function t(T){var la=M.corsStatus,X=r.canUseXhr(T,!0);-1<X&&M.corsEnabledServers.splice(X,1);var R=new b;R.reject({log:!!a.isDebug});
la[x(T)]=R.promise;return X}function A(T){var la=M.corsStatus;try{var X=x(T);if(M.corsDetection&&M.useCors&&p("esri-cors")&&T&&-1!==T.toLowerCase().indexOf("/rest/services")&&!r.hasSameOrigin(T,window.location.href)&&!r.canUseXhr(T)){if(la[X]&&!la[X].isCanceled())return la[X];var R=new b(y._dfdCanceller);la[X]=R.promise;var fa=h.get({url:T.substring(0,T.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*M.corsDetectionTimeout});
R._pendingDfd=fa;fa.then(function(S){S?(r.canUseXhr(T)||M.corsEnabledServers.push(X),R.resolve()):R.reject()},function(S){R.reject(S)});return R.promise}}catch(S){}return ea}function G(T){I=T}function B(T,la,X,R){function fa(V){V._pendingDfd=w(X,R,ra,ja);if(!V._pendingDfd){V.ioArgs=V._pendingDfd&&V._pendingDfd.ioArgs;var U=Error("Deferred object is missing");U.log=!!a.isDebug;V.errback(U);V._pendingDfd=null;return V}V._pendingDfd.addCallback(function(da){if(!da)return da;var na=V._pendingDfd&&V._pendingDfd.ioArgs&&
V._pendingDfd.ioArgs.xhr;if(!na)return da;if(na=na.getResponseHeader("Content-Type"))if(na=na.toLowerCase(),-1===na.indexOf("text/plain")&&-1===na.indexOf("application/json"))return da;if(da instanceof ArrayBuffer&&750>=da.byteLength)na=new Blob([da]);else if(da instanceof Blob&&750>=da.size)na=da;else return da;var ka=new b,xa=new FileReader;xa.readAsText(na);xa.onloadend=function(){if(!xa.error)try{var O=JSON.parse(xa.result);if(O.error)var Q=O.error}catch(ba){}Q?(Q=g.mixin(Error(),Q),Q.log=!!a.isDebug,
null==Q.httpCode&&(Q.httpCode=Q.code),ka.reject(Q)):ka.resolve(da)};return ka.promise}).addCallback(function(da){V.ioArgs=V._pendingDfd&&V._pendingDfd.ioArgs;R.returnFullResponse&&(da={data:da,_xhr:V.ioArgs&&V.ioArgs.xhr,getHeader:z});V.callback(da);V._pendingDfd=null}).addErrback(function(da){if(da){var na=da.code;var ka=da.subcode;var xa=(xa=da.messageCode)&&xa.toUpperCase()}if(da&&403==na&&(4==ka||da.message&&-1<da.message.toLowerCase().indexOf("ssl")&&-1===da.message.toLowerCase().indexOf("permission"))){if(!X._ssl){X._ssl=
X._sslFromServer=!0;B(V,!0,X,R);return}}else if(da&&415==da.status){if(t(X.url),!X._err415){X._err415=1;B(V,!0,X,R);return}}else if(m.id&&-1!==q.indexOf(m.id._errorCodes,na)&&!m.id._isPublic(X.url)&&!Y&&(403!=na||-1===q.indexOf(P,xa)&&(!v.isDefined(ka)||2==ka&&X._token))){V._pendingDfd=m.id.getCredential(X.url,{token:X._token,error:da});V._pendingDfd.addCallback(function(O){X._token=O.token;X._credential=O;X._ssl=X._sslFromServer||O.ssl;B(V,!0,X,R)}).addErrback(function(O){V.errback(O);V._pendingDfd=
null});return}V.ioArgs=V._pendingDfd&&V._pendingDfd.ioArgs;V.isFulfilled()||V.errback(da);V._pendingDfd=null}).then(null,null,function(da){V.progress(da)})}var S=X.form,Y=R.disableIdentityLookup,ia=R._preLookup,L=!1;if(p("esri-workers")&&!1!==M.useWorkers)if(!0===R.useWorkers||!0===M.useWorkers)L=!0;else if(R.workerOptions){var W=R.workerOptions;if(W.callback||W.worker&&W.worker.worker instanceof Worker)L=!0}var ja=S&&p("esri-file-upload")&&S instanceof FormData,ra=S&&(S.elements?q.some(S.elements,
function(V){return"file"===V.type}):ja),qa=-1!==X.url.toLowerCase().indexOf("token\x3d")||X.content&&X.content.token||ra&&q.some(S.elements,function(V){return"token"===V.name})?1:0;if(!la){T.addCallback(function(V){if((/\/sharing\/rest\/accounts\/self/i.test(X.url)||/\/sharing\/rest\/portals\/self/i.test(X.url))&&!qa&&!X._token&&V&&V.user&&V.user.username){M.webTierAuthServers.push(x(X.url));V=M.corsEnabledServers;var U=r.canUseXhr(X.url,!0),da={host:x(X.url),withCredentials:!0};if(-1===U)V.push(da);
else{var na=V[U];na instanceof RegExp?(da.host=na,V.splice(U,1,da)):"object"===typeof na?na.withCredentials=!0:V.splice(U,1,da)}}if(V=X._credential)if(U=(U=m.id.findServerInfo(V.server))&&U.owningSystemUrl)U=U.replace(/\/?$/,"/sharing"),(V=m.id.findCredential(U,V.userId))&&-1===m.id._getIdenticalSvcIdx(U,V)&&V.resources.splice(0,0,U)});T.addBoth(function(V){delete X._credential;!V||p("ie")&&V.nodeType||(V._ssl=X._ssl)});var wa=X.load,sa=X.error;wa&&T.addCallback(function(V){var U=T._pendingDfd;U=
U&&U.ioArgs;return wa.call(U&&U.args,V,U)});sa&&T.addErrback(function(V){var U=T._pendingDfd;U=U&&U.ioArgs;return sa.call(U&&U.args,V,U)})}!m.id||qa||X._token||m.id._isPublic(X.url)||Y&&!ia||!(la=m.id.findCredential(X.url))||(X._token=la.token,X._ssl=la.ssl);L?R.workerOptions&&R.workerOptions.worker?(F||(F=h),h=R.workerOptions.worker,fa(T)):D(["./workers/RequestClient"],function(V){F||(F=h);if(R.workerOptions){var U=R.workerOptions;h=V.getClient(U.callback,U.cbFunction)}else h=V.getClient();fa(T)}):
(F&&(h=F,F=null),fa(T));return T}function E(T,la){T.url=r.fixUrl(T.url);la=la||{};var X=new b(y._dfdCanceller),R=A(T.url);X._pendingDfd=R;R.always(function(fa){fa&&"cancel"===fa.dojoType?X.reject(fa):B(X,!1,T,la)});return X}var F=null,I,M=n.defaults.io,P=["COM_0056","COM_0057","SB_0008"],aa=0,ca=/%[0-9A-F]{2}/i,ea=function(){var T=new b;T.resolve();return T.promise}();E._makeRequest=w;E._processRequest=B;E._disableCors=t;E._detectCors=A;E.setRequestPreCallback=G;m.request=E;m._makeRequest=w;m._processRequest=
B;m._disableCors=t;m._detectCors=A;m.setRequestPreCallback=G;return E})},"esri/core/request/script":function(){define("require exports dojo/Deferred dojo/request/script dojo/text!./iframe.html ../sniff".split(" "),function(D,q,a,b,g,f){function h(){var r=document.createElement("iframe");r.name="esri_core_jsonp_iframe";r.style.display="none";r.setAttribute("sandbox","allow-scripts");if(!f("ff")&&"srcdoc"in r){var y=D.toUrl("dojo/dojo.js"),x=g.replace("../../../dojo/dojo.js",y);y=y.slice(0,-7);x=x.replace("../../../dojo/",
y);r.srcdoc=x}else x=D.toUrl("./iframe.html"),"http:"===window.location.protocol&&0===x.indexOf("https:")&&(x=x.replace("https:","http:")),r.src=x;document.body.appendChild(r);return r}function d(){var r=new MessageChannel;r.port1.addEventListener("message",c);r.port1.start();return r}function c(r){var y=r.data;if("ready"===y){y=0;for(var x=p;y<x.length;y++)r=x[y],k(r,m);p=null}else if(r=v[y.id])delete v[y.id],y.isError?r.dfd.reject(Error(y.message)):r.dfd.resolve(y.response)}function e(r,y){r.addEventListener("load",
function(){r.contentWindow.postMessage("init","*",[y.port2])})}function k(r,y){v[r.message.id]=r;y.port1.postMessage(r.message)}Object.defineProperty(q,"__esModule",{value:!0});var l,m,n=0,p=[],v={};q.get=function(r,y){if(!f("esri-script-sandbox"))return b.get(r,y);var x=null;y&&(x={jsonp:y.jsonp,preventCache:y.preventCache,query:y.query,timeout:y.timeout});var z=new a(function(){if(p){var w=p.indexOf(u);-1<w&&p.splice(w,1)}else u.message.id in v&&delete v[u.message.id]}),u={dfd:z,message:{id:"id"+
(++n+Math.random()),url:r,options:x}};l||(l=h(),m=d(),e(l,m));p?p.push(u):k(u,m);return z.promise}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(D,q,a,b,g,f,h,d,c,e,k){function l(A,G){A.canDelete&&r._remove(A.id,G.options.frameDoc,!0)}function m(A){t&&t.length&&(g.forEach(t,function(G){r._remove(G.id,G.frameDoc);G.frameDoc=null}),t=[]);return A.options.jsonp?!A.data:
!0}function n(A){return!!this.scriptLoaded}function p(A){return(A=A.options.checkString)&&eval("typeof("+A+') !\x3d\x3d "undefined"')}function v(A,G){if(this.canDelete){var B=this.response.options;t.push({id:this.id,frameDoc:B.ioArgs?B.ioArgs.frameDoc:B.frameDoc});B.ioArgs&&(B.ioArgs.frameDoc=null);B.frameDoc=null}G?this.reject(G):this.resolve(A)}function r(A,G,B){var E=a.parseArgs(A,a.deepCopy({},G));A=E.url;G=E.options;var F=a.deferred(E,l,m,G.jsonp?null:G.checkString?p:n,v);f.mixin(F,{id:y+x++,
canDelete:!1});G.jsonp&&((new RegExp("[?\x26]"+G.jsonp+"\x3d")).test(A)||(A+=(~A.indexOf("?")?"\x26":"?")+G.jsonp+"\x3d"+(G.frameDoc?"parent.":"")+y+"_callbacks."+F.id),F.canDelete=!0,w[F.id]=function(P){E.data=P;F.handleResponse(E)});a.notify&&a.notify.emit("send",E,F.promise.cancel);if(!G.canAttach||G.canAttach(F)){var I=r._attach(F.id,A,G.frameDoc,function(P){if(!(P instanceof Error)){var aa=Error("Error loading "+(P.target?P.target.src:"script"));aa.source=P;P=aa}F.reject(P);r._remove(F.id,G.frameDoc,
!0)});if(!G.jsonp&&!G.checkString)var M=h(I,z,function(P){if("load"===P.type||u.test(I.readyState))M.remove(),F.scriptLoaded=P})}q(F);return B?F:F.promise}e.add("script-readystatechange",function(A,G){return"undefined"!==typeof G.createElement("script").onreadystatechange&&("undefined"===typeof A.opera||"[object Opera]"!==A.opera.toString())});var y=D.id.replace(/[\/\.\-]/g,"_"),x=0,z=e("script-readystatechange")?"readystatechange":"load",u=/complete|loaded/,w=b.global[y+"_callbacks"]={},t=[];r.get=
r;r._attach=function(A,G,B,E){B=B||k.doc;var F=B.createElement("script");if(E)h.once(F,"error",E);F.type="text/javascript";try{F.src=G}catch(I){E&&E(F)}F.id=A;F.async=!0;F.charset="utf-8";return B.getElementsByTagName("head")[0].appendChild(F)};r._remove=function(A,G,B){c.destroy(d.byId(A,G));w[A]&&(B?w[A]=function(){delete w[A]}:delete w[A])};r._callbacksProperty=y+"_callbacks";return r})},"esri/core/sniff":function(){define(["../sniff"],function(D){return D})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom ../NodeList-manipulate".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l){function m(u){return!this.isFulfilled()}function n(u){return!!this._finished}function p(u,w){if(!w)try{var t=u.options,A=r.doc(r._frame),G=t.handleAs;if("html"!==G){if("xml"===G)if("html"===A.documentElement.tagName.toLowerCase()){d("a",A.documentElement).orphan();var B=A.documentElement.innerText||A.documentElement.textContent;B=B.replace(/>\s+</g,"\x3e\x3c");u.text=f.trim(B)}else u.data=A;else u.text=A.getElementsByTagName("textarea")[0].value;g(u)}else u.data=
A}catch(E){w=E}w?this.reject(w):this._finished?this.resolve(u):this.reject(Error("Invalid dojo/request/iframe request state"))}function v(u){this._callNext()}function r(u,w,t){var A=b.parseArgs(u,b.deepCreate(z,w),!0);u=A.url;w=A.options;if("GET"!==w.method&&"POST"!==w.method)throw Error(w.method+" not supported by dojo/request/iframe");r._frame||(r._frame=r.create(r._iframeName,x+"();"));u=b.deferred(A,null,m,n,p,v);u._callNext=function(){this._calledNext||(this._calledNext=!0,r._currentDfd=null,
r._fireNextRequest())};u._legacy=t;r._dfdQueue.push(u);r._fireNextRequest();a(u);return t?u:u.promise}var y=D.id.replace(/[\/\.\-]/g,"_"),x=y+"_onload";l.global[x]||(l.global[x]=function(){var u=r._currentDfd;if(u){var w=e.byId(u.response.options.form)||u._tmpForm;if(w){for(var t=u._contentToClean,A=0;A<t.length;A++)for(var G=t[A],B=0;B<w.childNodes.length;B++){var E=w.childNodes[B];if(E.name===G){k.destroy(E);break}}u._originalAction&&w.setAttribute("action",u._originalAction);u._originalMethod&&
(w.setAttribute("method",u._originalMethod),w.method=u._originalMethod);u._originalTarget&&(w.setAttribute("target",u._originalTarget),w.target=u._originalTarget)}u._tmpForm&&(k.destroy(u._tmpForm),delete u._tmpForm);u._finished=!0}else r._fireNextRequest()});var z={method:"POST"};r.create=function(u,w,t){if(l.global[u])return l.global[u];if(l.global.frames[u])return l.global.frames[u];t||(c("config-useXDomain")&&c("config-dojoBlankHtmlUrl"),t=c("config-dojoBlankHtmlUrl")||q.toUrl("dojo/resources/blank.html"));
w=k.place('\x3ciframe id\x3d"'+u+'" name\x3d"'+u+'" src\x3d"'+t+'" onload\x3d"'+w+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',l.body());return l.global[u]=w};r.doc=function(u){if(u.contentDocument)return u.contentDocument;var w=u.name;if(w){var t=l.doc.getElementsByTagName("iframe");if(u.document&&t[w].contentWindow&&t[w].contentWindow.document)return t[w].contentWindow.document;if(l.doc.frames[w]&&l.doc.frames[w].document)return l.doc.frames[w].document}return null};
r.setSrc=function(u,w,t){u=l.global.frames[u.name];u.contentWindow&&(u=u.contentWindow);try{t?u.location.replace(w):u.location=w}catch(A){}};r._iframeName=y+"_IoIframe";r._notifyStart=function(){};r._dfdQueue=[];r._currentDfd=null;r._fireNextRequest=function(){try{if(!r._currentDfd&&r._dfdQueue.length){do var u=r._currentDfd=r._dfdQueue.shift();while(u&&(u.canceled||u.isCanceled&&u.isCanceled())&&r._dfdQueue.length);if(!u||u.canceled||u.isCanceled&&u.isCanceled())r._currentDfd=null;else{var w=u.response,
t=w.options,A=u._contentToClean=[],G=e.byId(t.form),B=b.notify,E=t.data||null;if(!u._legacy&&"POST"===t.method&&!G)G=u._tmpForm=k.create("form",{name:y+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},l.body());else if("GET"===t.method&&G&&-1<w.url.indexOf("?")){var F=w.url.slice(w.url.indexOf("?")+1);E=f.mixin(h.queryToObject(F),E)}if(G){if(!u._legacy){var I=G;do I=I.parentNode;while(I&&I!==l.doc.documentElement);I||(G.style.position="absolute",G.style.left="-1000px",G.style.top=
"-1000px",l.body().appendChild(G));G.name||(G.name=y+"_form")}if(E){I=function(la,X){k.create("input",{type:"hidden",name:la,value:X},G);A.push(la)};for(var M in E){var P=E[M];if(f.isArray(P)&&1<P.length)for(F=0;F<P.length;F++)I(M,P[F]);else{var aa=d("input[name\x3d'"+M+"']",G);-1==aa.indexOf()?I(M,P):aa.val(P)}}}var ca=G.getAttributeNode("action"),ea=G.getAttributeNode("method"),T=G.getAttributeNode("target");w.url&&(u._originalAction=ca?ca.value:null,ca?ca.value=w.url:G.setAttribute("action",w.url));
u._legacy?ea&&ea.value||(ea?ea.value=t.method:G.setAttribute("method",t.method)):(u._originalMethod=ea?ea.value:null,ea?ea.value=t.method:G.setAttribute("method",t.method));u._originalTarget=T?T.value:null;T?T.value=r._iframeName:G.setAttribute("target",r._iframeName);G.target=r._iframeName;B&&B.emit("send",w,u.promise.cancel);r._notifyStart(w);G.submit()}else t="",w.options.data&&(t=w.options.data,"string"!==typeof t&&(t=h.objectToQuery(t))),I=w.url+(-1<w.url.indexOf("?")?"\x26":"?")+t,B&&B.emit("send",
w,u.promise.cancel),r._notifyStart(w),r.setSrc(r._frame,I,!0)}}}catch(la){u.reject(la)}};b.addCommonMethods(r,["GET","POST"]);return r})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(D,q,a,b,g){function f(c){for(;c.childNodes[0]&&1==c.childNodes[0].nodeType;)c=c.childNodes[0];return c}function h(c,e){"string"==typeof c?(c=b.toDom(c,e&&e.ownerDocument),11==c.nodeType&&(c=c.childNodes[0])):1==c.nodeType&&
c.parentNode&&(c=c.cloneNode(!1));return c}var d=D.NodeList;q.extend(d,{_placeMultiple:function(c,e){for(var k="string"==typeof c||c.nodeType?D(c):c,l=[],m=0;m<k.length;m++)for(var n=k[m],p=this.length,v=p-1,r;r=this[v];v--)0<m&&(r=this._cloneNode(r),l.unshift(r)),v==p-1?b.place(r,n,e):n.parentNode.insertBefore(r,n),n=r;l.length&&(l.unshift(0),l.unshift(this.length-1),Array.prototype.splice.apply(this,l));return this},innerHTML:function(c){return arguments.length?this.addContent(c,"only"):this[0].innerHTML},
text:function(c){if(arguments.length){for(var e=0,k;k=this[e];e++)1==k.nodeType&&g.set(k,"textContent",c);return this}var l="";for(e=0;k=this[e];e++)l+=g.get(k,"textContent");return l},val:function(c){if(arguments.length){for(var e=q.isArray(c),k=0,l;l=this[k];k++){var m=l.nodeName.toUpperCase(),n=l.type,p=e?c[k]:c;if("SELECT"==m)for(m=l.options,n=0;n<m.length;n++){var v=m[n];v.selected=l.multiple?-1!=a.indexOf(c,v.value):v.value==p}else"checkbox"==n||"radio"==n?l.checked=l.value==p:l.value=p}return this}if((l=
this[0])&&1==l.nodeType){c=l.value||"";if("SELECT"==l.nodeName.toUpperCase()&&l.multiple){c=[];m=l.options;for(n=0;n<m.length;n++)v=m[n],v.selected&&c.push(v.value);c.length||(c=null)}return c}},append:function(c){return this.addContent(c,"last")},appendTo:function(c){return this._placeMultiple(c,"last")},prepend:function(c){return this.addContent(c,"first")},prependTo:function(c){return this._placeMultiple(c,"first")},after:function(c){return this.addContent(c,"after")},insertAfter:function(c){return this._placeMultiple(c,
"after")},before:function(c){return this.addContent(c,"before")},insertBefore:function(c){return this._placeMultiple(c,"before")},remove:d.prototype.orphan,wrap:function(c){if(this[0]){c=h(c,this[0]);for(var e=0,k;k=this[e];e++){var l=this._cloneNode(c);k.parentNode&&k.parentNode.replaceChild(l,k);f(l).appendChild(k)}}return this},wrapAll:function(c){if(this[0]){c=h(c,this[0]);this[0].parentNode.replaceChild(c,this[0]);c=f(c);for(var e=0,k;k=this[e];e++)c.appendChild(k)}return this},wrapInner:function(c){if(this[0]){c=
h(c,this[0]);for(var e=0;e<this.length;e++){var k=this._cloneNode(c);this._wrap(q._toArray(this[e].childNodes),null,this._NodeListCtor).wrapAll(k)}}return this},replaceWith:function(c){c=this._normalize(c,this[0]);for(var e=0,k;k=this[e];e++)this._place(c,k,"before",0<e),k.parentNode.removeChild(k);return this},replaceAll:function(c){c=D(c);for(var e=this._normalize(this,this[0]),k=0,l;l=c[k];k++)this._place(e,l,"before",0<k),l.parentNode.removeChild(l);return this},clone:function(){for(var c=[],
e=0;e<this.length;e++)c.push(this._cloneNode(this[e]));return this._wrap(c,this,this._NodeListCtor)}});d.prototype.html||(d.prototype.html=d.prototype.innerHTML);return d})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(D,q,a){q={_dfdCanceller:function(b){b.canceled=!0;var g=b._pendingDfd;if(!b.isFulfilled()&&g&&!g.isFulfilled()){g.cancel();var f=g.results&&g.results[1]}b._pendingDfd=null;return f},_fixDfd:function(b){var g=b.then;b.then=function(f,h,d){if(f){var c=
f;f=function(e){return e&&e._argsArray?c.apply(null,e):c(e)}}return g.call(this,f,h,d)};return b},_resDfd:function(b,g,f){var h=g.length;1===h?f?b.errback(g[0]):b.callback(g[0]):1<h?(g._argsArray=!0,b.callback(g)):b.callback()}};D.mixin(a,q);return q})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ../SpatialReference ../geometry/Point ./LOD".split(" "),function(D,q,a,b,g,f,h,d,c){D=D(null,{declaredClass:"esri.layers.TileInfo",
constructor:function(e){q.mixin(this,e);this.width=this.cols;this.height=this.rows;this._levelToLOD={};e=this.spatialReference;var k=this.origin;e&&(e=this.spatialReference=new h(e.toJson?e.toJson():e));k&&(this.origin=new d(k.toJson?k.toJson():k),!k.spatialReference&&e&&this.origin.setSpatialReference(new h(e.toJson())));this.lods=a.map(this.lods,function(n){return new c(n)});a.forEach(this.lods,function(n){this._levelToLOD[n.level]=n},this);e=!1;k=this.spatialReference;var l=this.origin;if(k&&l){var m=
k._getInfo();m&&(e=k._isWrappable()&&Math.abs(m.origin[0]-l.x)<=m.dx)}this.isWrappable=e;this._initializeUpsampleLevels()},toJson:function(){return f.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&a.map(this.lods,function(e){return e.toJson()})})},lodAt:function(e){return this._levelToLOD&&this._levelToLOD[e]||
null},updateTileInfo:function(e){var k=this.lodAt(e.level),l=k.resolution*this.width;k=k.resolution*this.height;e.id=e.level+"/"+e.row+"/"+e.col;e.extent||(e.extent=[0,0,0,0]);e.extent[0]=this.origin.x+e.col*l;e.extent[1]=this.origin.y-(e.row+1)*k;e.extent[2]=e.extent[0]+l;e.extent[3]=e.extent[1]+k},upsampleTile:function(e){var k=this._upsampleLevels[e.level];if(!k||-1===k.parentLevel)return!1;e.level=k.parentLevel;e.row=Math.floor(e.row/k.factor+.001);e.col=Math.floor(e.col/k.factor+.001);this.updateTileInfo(e);
return!0},_initializeUpsampleLevels:function(){var e=this.lods;this._upsampleLevels=[];for(var k=null,l=0;l<e.length;l++){var m=e[l];this._upsampleLevels[m.level]={parentLevel:k?k.level:-1,factor:k?k.resolution/m.resolution:0};k=m}}});q.setObject("layers.TileInfo",D,g);return D})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,q,a,b,g){D=D(null,{declaredClass:"esri.layers.LOD",constructor:function(f){q.mixin(this,f)},toJson:function(){return g.fixJson({level:this.level,
levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}});q.setObject("layers.LOD",D,b);return D})},"esri/layers/unitBezier":function(){define([],function(){var D=function(a,b,g,f){function h(n,p){var v;p=null==p?1E-6:p;var r=n;for(v=0;8>v;v++){var y=((e*r+c)*r+d)*r-n;if(Math.abs(y)<p)return r;var x=(3*e*r+2*c)*r+d;if(1E-6>Math.abs(x))break;r-=y/x}x=0;v=1;r=n;if(r<x)return x;if(r>v)return v;for(;x<v;){y=((e*r+c)*r+d)*r;if(Math.abs(y-n)<p)break;n>y?x=r:v=r;r=.5*(v-x)+x}return r}var d=
3*a,c=3*(g-a)-d,e=1-d-c,k=3*b,l=3*(f-b)-k,m=1-k-l;return function(n,p){var v=h(n,p);return((m*v+l)*v+k)*v}},q=/^cubic-bezier\((.*)\)/;D.parse=function(a){var b=D[a]||null;!b&&(a=q.exec(a))&&(a=a[1].split(",").map(function(g){return parseFloat(g.trim())}),4!==a.length||a.some(function(g){return isNaN(g)})||(b=D.apply(D,a)));return b};D.ease=D(.25,.1,.25,1);D.linear=D(0,0,1,1);D.easeIn=D["ease-in"]=D(.42,0,1,1);D.easeOut=D["ease-out"]=D(0,0,.58,1);D.easeInOut=D["ease-in-out"]=D(.42,0,.58,1);return D})},
"esri/layers/vectorTiles/request":function(){define(["require","exports","esri/request","dojo/_base/lang","dojo/Deferred"],function(D,q,a,b,g){return function(f,h){var d=b.mixin({},{url:f,failOk:!0},h);"array-buffer"===h.responseType?(d.handleAs="arraybuffer",delete d.responseType):h.responseType&&(d.handleAs=h.responseType,delete d.responseType);null!==h.query&&(d.content=d.query,delete d.query);if(h.hasOwnProperty("allowImageDataAccess")){var c={allowImageDataAccess:h.allowImageDataAccess};delete d.allowImageDataAccess}var e=
new g(function(){k.isFulfilled()||k.cancel()});var k=a(d,c).then(function(l){e.resolve({data:l})})["catch"](function(l){l&&null!=l.httpCode&&(l.details=l.details||{},l.details.httpStatus=l.httpCode);e.reject(l)});return e.promise}})},"esri/layers/vectorTiles/core/promiseUtils":function(){define("require exports dojo/Deferred dojo/when dojo/promise/all ./Error".split(" "),function(D,q,a,b,g,f){function h(d){if(d){if("function"!==typeof d.forEach){var c=Object.keys(d),e=c.map(function(n){return d[n]});
return h(e).then(function(n){var p={};c.forEach(function(v,r){return p[v]=n[r]});return p})}var k=new a,l=[],m=d.length;0===m&&k.resolve(l);d.forEach(function(n){var p={promise:n};l.push(p);n.then(function(v){p.value=v})["catch"](function(v){p.error=v}).then(function(){--m;0===m&&k.resolve(l)})});return k.promise}}Object.defineProperty(q,"__esModule",{value:!0});q.all=function(d){return g(d)};q.filter=function(d,c){var e=d.slice();return g(d.map(function(k,l){return c(k,l)})).then(function(k){return e.filter(function(l,
m){return k[m]})})};q.eachAlways=h;q.create=function(d,c){var e=new a(c);d(function(k){void 0===k&&(k=null);return b(k).then(e.resolve)},e.reject);return e.promise};q.reject=function(d){var c=new a;c.reject(d);return c.promise};q.resolve=function(d){void 0===d&&(d=null);var c=new a;c.resolve(d);return c.promise};q.after=function(d,c){void 0===c&&(c=null);var e=0,k=new a(function(){e&&(clearTimeout(e),e=0)});e=setTimeout(function(){k.resolve(c)},d);return k.promise};q.timeout=function(d,c,e){var k=
0,l=new a(d.cancel);d.then(function(m){l.isFulfilled()||(l.resolve(m),k&&(clearTimeout(k),k=0))});d["catch"](function(m){l.isFulfilled()||(l.reject(m),k&&(clearTimeout(k),k=0))});k=setTimeout(function(){var m=e||new f("promiseUtils:timeout","The wrapped promise did not resolve within "+c+" ms");l.reject(m)},c);return l.promise};q.wrapCallback=function(d){var c=!1,e=new a(function(){return c=!0});d(function(k){c||e.resolve(k)});return e.promise};q.isThenable=function(d){return d&&"function"===typeof d.then};
q.when=function(d){return b(d)}})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(D,q,a,b){var g=D.some;return function(f){var h,d;q.isArray(f)?d=f:f&&"object"===typeof f&&(h=f);var c=[];if(h){d=[];for(var e in h)Object.hasOwnProperty.call(h,e)&&(c.push(e),d.push(h[e]));var k={}}else d&&(k=[]);if(!d||!d.length)return(new a).resolve(k);var l=new a;l.promise.always(function(){k=c=null});var m=d.length;g(d,function(n,p){h||c.push(p);b(n,function(v){l.isFulfilled()||
(k[c[p]]=v,0===--m&&l.resolve(k))},l.reject);return l.isFulfilled()});return l.promise}})},"esri/layers/vectorTiles/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./lang","./Message"],function(D,q,a,b,g){D=function(f){function h(d,c,e){var k=f.call(this,d,c,e)||this;return k instanceof h?k:new h(d,c,e)}a(h,f);h.prototype.toJSON=function(){return{name:this.name,message:this.message,details:b.clone(this.details),dojoType:this.dojoType}};h.fromJSON=function(d){var c=
new h(d.name,d.message,d.details);null!=d.dojoType&&(c.dojoType=d.dojoType);return c};return h}(g);D.prototype.type="error";return D})},"esri/layers/vectorTiles/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,a){q.__proto__=a}||function(q,a){for(var b in a)a.hasOwnProperty(b)&&(q[b]=a[b])};return function(q,a){function b(){this.constructor=q}D(q,a);q.prototype=null===a?Object.create(a):(b.prototype=
a.prototype,new b)}}()})},"esri/layers/vectorTiles/core/lang":function(){define("dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(D,q,a,b,g,f){function h(n){return void 0!==n&&null!==n}function d(n){return h(n)?n:""}function c(n,p,v){var r=v.match(/([^\(]+)(\([^\)]+\))?/i),y=q.trim(r[1]);v=p[n];r=JSON.parse((r[2]?q.trim(r[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z_]+)\s*:/gi,'$1"$2":').replace(/"\s*:\s*'/gi,
'":"').replace(/'\s*(,|\})/gi,'"$1'));var x=r.utcOffset;if(-1===l.indexOf(y))y=q.getObject(y),q.isFunction(y)&&(v=y(v,n,p,r));else if("number"===typeof v||"string"===typeof v&&v&&!isNaN(Number(v)))switch(v=Number(v),y){case "NumberFormat":n=q.mixin({},r);p=parseFloat(n.places);if(isNaN(p)||0>p)n.places=Infinity;return b.format(v,n);case "DateString":v=new Date(v);if(r.local||r.systemLocale)return r.systemLocale?v.toLocaleDateString()+(r.hideTime?"":" "+v.toLocaleTimeString()):v.toDateString()+(r.hideTime?
"":" "+v.toTimeString());v=v.toUTCString();r.hideTime&&(v=v.replace(/\s+\d\d:\d\d:\d\d\s+(utc|gmt)/i,""));return v;case "DateFormat":return v=new Date(v),h(x)&&(v=a.add(v,"minute",v.getTimezoneOffset()-x)),g.format(v,r)}return d(v)}function e(n,p){var v;if(p)for(v in n)n.hasOwnProperty(v)&&(void 0===n[v]?delete n[v]:n[v]instanceof Object&&e(n[v],!0));else for(v in n)n.hasOwnProperty(v)&&void 0===n[v]&&delete n[v];return n}function k(n){if(!n||"object"!=typeof n||q.isFunction(n))return n;if(n instanceof
Int8Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Int32Array||n instanceof Uint16Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array||n instanceof Date)return new n.constructor(n);if(n instanceof ArrayBuffer)return n.slice(0,n.byteLength);if("function"===typeof n.clone)n=n.clone();else if("function"===typeof n.map&&"function"===typeof n.forEach)n=n.map(k);else if("function"===typeof n.notifyChange&&"function"===
typeof n.watch)n=n.clone();else{var p={},v,r={};for(v in n){var y=n[v];var x=!(v in r)||r[v]!==y;if(!(v in p)||p[v]!==y&&x)p[v]=k?k(y):y}n=p}return n}var l=["NumberFormat","DateString","DateFormat"],m=/<\/?[^>]+>/g;return{equals:function(n,p){return n===p||"number"===typeof n&&isNaN(n)&&"number"===typeof p&&isNaN(p)||q.isFunction((n||{}).getTime)&&q.isFunction((p||{}).getTime)&&n.getTime()==p.getTime()||q.isFunction((n||{}).equals)&&n.equals(p)||q.isFunction((p||{}).equals)&&p.equals(n)||!1},mixin:q.mixin,
valueOf:function(n,p){for(var v in n)if(n[v]==p)return v;return null},stripTags:function(n){if(n){var p=typeof n;if("string"===p)n=n.replace(m,"");else if("object"===p)for(var v in n)(p=n[v])&&"string"===typeof p&&(p=p.replace(m,"")),n[v]=p}return n},substitute:function(n,p,v){if(h(v))if(q.isObject(v)){var r=v.first;var y=v.dateFormat;var x=v.numberFormat}else r=v;if(p&&"{*}"!==p)return q.replace(p,q.hitch({obj:n},function(u,w){var t=w.split(":");return 1<t.length?(w=t[0],t.shift(),c(w,this.obj,t.join(":"))):
y&&-1!==(y.properties||[]).indexOf(w)?c(w,this.obj,y.formatter||"DateString"):x&&-1!==(x.properties||[]).indexOf(w)?c(w,this.obj,x.formatter||"NumberFormat"):d(this.obj[w])}));p=[];var z;p.push('\x3ctable class\x3d"esri-widget__table" summary\x3d"'+f.fieldsSummary+'"\x3e\x3ctbody\x3e');for(z in n)if(v=n[z],y&&-1!==(y.properties||[]).indexOf(z)?v=c(z,n,y.formatter||"DateString"):x&&-1!==(x.properties||[]).indexOf(z)&&(v=c(z,n,x.formatter||"NumberFormat")),p.push("\x3ctr\x3e\x3cth\x3e"+z+"\x3c/th\x3e\x3ctd\x3e"+
d(v)+"\x3c/td\x3e\x3c/tr\x3e"),r)break;p.push("\x3c/tbody\x3e\x3c/table\x3e");return p.join("")},filter:function(n,p,v){p=[q.isString(n)?n.split(""):n,v||D.global,q.isString(p)?new Function("item","index","array",p):p];v={};var r;n=p[0];for(r in n)p[2].call(p[r],n[r],r,n)&&(v[r]=n[r]);return v},startsWith:function(n,p,v){v=v||0;return n.indexOf(p,v)===v},endsWith:function(n,p,v){if("number"!==typeof v||!isFinite(v)||Math.floor(v)!==v||v>n.length)v=n.length;v-=p.length;n=n.indexOf(p,v);return-1!==
n&&n===v},isDefined:h,fixJson:e,clone:k}})},"esri/layers/vectorTiles/core/Message":function(){define(["require","exports","dojo/string"],function(D,q,a){return function(){function b(g,f,h){this instanceof b&&(this.name=g,this.message=f&&a.substitute(f,h,function(d){return null==d?"":d})||"",this.details=h)}b.prototype.toString=function(){return"["+this.name+"]: "+this.message};return b}()})},"esri/layers/vectorTiles/core/urlUtils":function(){define(["require","exports","esri/urlUtils","dojo/_base/url"],
function(D,q,a,b){function g(z){return a.normalize(z)}function f(z){return"data:"===z.slice(0,5)}function h(z){return d(z)||y.test(z)}function d(z){return z&&"/"===z[0]&&"/"===z[1]}function c(z){return a.urlToObject(z)}function e(z){if("string"===typeof z)return new b(l(z));z.scheme||(z.scheme=q.appUrl.scheme);return z}function k(z){if(f(z))return null;var u=z.indexOf("://");if(-1===u&&d(z))u=2;else if(-1!==u)u+=3;else return null;u=z.indexOf("/",u);return-1===u?z:z.slice(0,u)}function l(z,u,w){void 0===
u&&(u=q.appBaseUrl);if(d(z))return w&&w.preserveProtocolRelative?z:"http"===q.appUrl.scheme&&q.appUrl.authority===k(z).slice(2)?"http:"+z:"https:"+z;if(y.test(z))return z;"/"===z[0]&&(w=u.indexOf("//"),w=u.indexOf("/",w+2),u=-1===w?u:u.slice(0,w));return n(u,z)}function m(z,u,w){void 0===w&&(w=!1);z=e(z);u=e(u);return w||z.scheme===u.scheme?z.host.toLowerCase()===u.host.toLowerCase()&&z.port===u.port:!1}function n(){for(var z=[],u=0;u<arguments.length;u++)z[u]=arguments[u];if(z&&z.length){u=[];if(h(z[0])){var w=
z[0],t=w.indexOf("//");u.push(w.slice(0,t+1));r.test(z[0])&&(u[0]+="/");z[0]=w.slice(t+2)}else"/"===z[0][0]&&u.push("");z=z.reduce(function(A,G){return G?A.concat(G.split("/")):A},[]);for(w=0;w<z.length;w++)t=z[w],".."===t&&0<u.length?u.pop():!t||"."===t&&0!==u.length||u.push(t);return u.join("/")}}function p(z,u,w){if(!(u&&w&&z&&h(z)))return z;var t=z.indexOf("//"),A=z.indexOf("/",t+2),G=z.indexOf(":",t+2);A=Math.min(0>A?z.length:A,0>G?z.length:G);if(z.slice(t+2,A).toLowerCase()!==u.toLowerCase())return z;
u=z.slice(0,t+2);z=z.slice(A);return""+u+w+z}function v(z,u,w){void 0===u&&(u=q.appBaseUrl);if(!h(z))return z;var t=g(z),A=t.toLowerCase();u=g(u).toLowerCase().replace(/\/+$/,"");if((w=w?g(w).toLowerCase().replace(/\/+$/,""):null)&&0!==u.indexOf(w))return z;for(var G=function(F,I,M){M=F.indexOf(I,M);return-1===M?F.length:M},B=G(A,"/",A.indexOf("//")+2),E=-1;A.slice(0,B+1)===u.slice(0,B)+"/";){E=B+1;if(B===A.length)break;B=G(A,"/",B+1)}if(-1===E||w&&E<w.length)return z;z=t.slice(E);t=u.slice(E-1).replace(/[^/]+/g,
"").length;if(0<t)for(A=0;A<t;A++)z="../"+z;else z="./"+z;return z}Object.defineProperty(q,"__esModule",{value:!0});q.normalize=g;q.canUseXhr=function(z){return a.canUseXhr(z)};q.removeTrailingSlash=function(z){return z.replace(/\/+$/,"")};D=Function("return this")();q.appUrl=new b(D.location);q.appBaseUrl=function(){var z=q.appUrl.path;z=z.substring(0,z.lastIndexOf(z.split("/")[z.split("/").length-1]));return q.appUrl.scheme+"://"+q.appUrl.host+(null!=q.appUrl.port?":"+q.appUrl.port:"")+z}();var r=
/^\s*file:/i,y=/^\s*[a-z][a-z0-9-+.]*:[^0-9]/i;q.isDataProtocol=f;q.isAbsolute=h;q.isProtocolRelative=d;q.urlToObject=c;q.getOrigin=k;q.makeAbsolute=l;q.hasSameOrigin=m;q.join=n;q.removeFile=function(z){var u=0;if(h(z)){var w=z.indexOf("//");-1!==w&&(u=w+2)}w=z.lastIndexOf("/");return w<u?z:z.slice(0,w+1)};q.addProxy=function(z){return a.addProxy(z)};q.makeData=function(z){return z.isBase64?"data:"+z.mediaType+";base64,"+z.data:"data:"+z.mediaType+","+z.data};var x=/^data:(.*?)(;base64)?,(.*)$/;q.dataComponents=
function(z){return(z=z.match(x))?{mediaType:z[1],isBase64:!!z[2],data:z[3]}:null};q.changeDomain=p;q.read=function(z,u){var w=u&&u.url&&u.url.path;z&&w&&(z=l(z,w,{preserveProtocolRelative:!0}));w=z;var t=u&&u.portal;if(t&&!t.isPortal&&t.urlKey&&t.customBaseUrl){var A=t.urlKey+"."+t.customBaseUrl;w=m(q.appUrl,q.appUrl.scheme+"://"+A)?p(w,t.portalHostname,A):p(w,A,t.portalHostname)}return w};q.write=function(z,u){if(!z)return z;!h(z)&&u&&u.blockedRelativeUrls&&u.blockedRelativeUrls.push(z);var w=l(z);
if(u){var t=u.verifyItemRelativeUrls&&u.verifyItemRelativeUrls.rootPath||u.url&&u.url.path;t&&(w=v(w,t,t),w!==z&&u.verifyItemRelativeUrls&&u.verifyItemRelativeUrls.writtenUrls.push(w))}w=(t=u&&u.portal)&&!t.isPortal&&t.urlKey&&t.customBaseUrl?p(w,t.urlKey+"."+t.customBaseUrl,t.portalHostname):w;return w};q.makeRelative=v;q.removeQueryParameters=function(z){z=c(z);Object.keys(z.query||{});return z.path}})},"esri/layers/vectorTiles/geometry/support/spatialReferenceUtils":function(){define(["require",
"exports","./WKIDUnitConversion"],function(D,q,a){function b(c){return c.wkid&&!0===g[c.wkid]}Object.defineProperty(q,"__esModule",{value:!0});var g={102113:!0,102100:!0,3857:!0,3785:!0},f={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};D=[-2.0037508342788905E7,2.0037508342788905E7];var h=[-2.0037508342787E7,2.0037508342787E7],d={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:D,origin:h,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:D,origin:h,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:D,origin:h,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:D,origin:h,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};q.equals=function(c,e){if(e){if(c===e)return!0;if(null!=c.wkid||null!=e.wkid)return c.wkid===e.wkid||b(c)&&b(e)||null!=e.latestWkid&&c.wkid===e.latestWkid||null!=c.latestWkid&&e.wkid===c.latestWkid;if(c.wkt&&e.wkt)return c.wkt.toUpperCase()===e.wkt.toUpperCase()}return!1};q.getInfo=function(c){return c.wkid?d[c.wkid]:null};q.isGeographic=function(c){return c.wkid?null==a[c.wkid]:c.wkt?!!/^\s*GEOGCS/i.test(c.wkt):!1};q.isWGS84=function(c){return 4326===
c.wkid};q.isWebMercator=b;q.isWrappable=function(c){return c.wkid&&!0===f[c.wkid]}})},"esri/layers/vectorTiles/geometry/support/WKIDUnitConversion":function(){define(["esri/WKIDUnitConversion"],function(D){return D})},"esri/layers/vectorTiles/layers/support/vectorTileLayerLoader":function(){define("require exports ../../core/tsSupport/assignHelper ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(D,q,a,b,g,f,h){function d(l){l&&(l=h.getOrigin(l),h.canUseXhr(l)||
-1!==k.indexOf(l)||k.push(l))}function c(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];m=void 0;for(var n=0;n<l.length;++n)h.isProtocolRelative(l[n])?m&&(m=m.split("://")[0]+":"+l[n].trim()):m=h.isAbsolute(l[n])?l[n]:h.join(m,l[n]);return m}function e(l,m,n){var p;if("string"===typeof m){m=h.normalize(m);d(m);var v=h.urlToObject(m);v=g(v.path,{query:{f:"json"},responseType:"json"});var r=p=m}else v=f.resolve({data:m}),p=m.jsonUrl||null,r=n;return v.then(function(y){var x=y.data;y.ssl&&
(p&&(p=p.replace(/^http:/i,"https:")),r&&(r=r.replace(/^http:/i,"https:")));if(x.sources){l.styleUrl=p||null;y=r?h.removeFile(r):h.appBaseUrl;l.styleBase=y;l.style=x;l.styleUrl&&d(l.styleUrl);if(l.source)x=f.resolve();else{b:if(x=x.sources,x.esri)x=x.esri;else{for(var z=0,u=Object.keys(x);z<u.length;z++){var w=u[z];if("vector"===x[w].type){x=x[w];break b}}x=null}x=x.url?e(l,c(y,x.url)):e(l,x,y)}return x}if(x.sources)return f.reject("You must specify the URL or the JSON for a service or for a style.");
l.sourceUrl=p||null;y=r?h.removeTrailingSlash(r)+"/":h.appBaseUrl;l.sourceBase=y;l.source=x;if(x.hasOwnProperty("tileInfo"))z=x;else{z={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}};w=(z.xmax-z.xmin)/512;u=[];for(var t=x.hasOwnProperty("minzoom")?parseFloat(x.minzoom):0,A=x.hasOwnProperty("maxzoom")?parseFloat(x.maxzoom):16;t<A;t++){var G=w/Math.pow(2,t);u.push({level:t,scale:Math.floor(3779.527559055118*G),
resolution:G})}w=0;for(A=x.tiles;w<A.length;w++)d(c(y,A[w]));z={capabilities:"TilesOnly",initialExtent:z,fullExtent:z,minScale:u[0].scale,maxScale:u[u.length-1].scale,tiles:x.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:u,spatialReference:{wkid:102100}}}}l.validatedSource=z;l.sourceUrl&&d(l.sourceUrl);x=l.style?f.resolve():null==x.defaultStyles?f.reject():"string"===typeof x.defaultStyles?e(l,c(y,x.defaultStyles,"root.json")):e(l,x.defaultStyles,
c(y,"root.json"));return x})}Object.defineProperty(q,"__esModule",{value:!0});var k=b.defaults&&b.defaults.io.corsEnabledServers||b.request.corsEnabledServers;q.loadMetadata=function(l){var m={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null},n="string"===typeof l?[l,null]:[null,l.jsonUrl],p=n[0];n=n[1];var v=p?h.urlToObject(p):null;return e(m,l,n).then(function(){var r={layerDefinition:m.validatedSource,url:p,parsedUrl:v,serviceUrl:m.sourceUrl,
style:m.style,styleUrl:m.styleUrl,spriteUrl:m.style.sprite&&c(m.styleBase,m.style.sprite),glyphsUrl:m.style.glyphs&&c(m.styleBase,m.style.glyphs)};d(r.spriteUrl);d(r.glyphsUrl);return r})}})},"esri/layers/vectorTiles/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(D){for(var q,a=1,b=arguments.length;a<b;a++){q=arguments[a];for(var g in q)Object.prototype.hasOwnProperty.call(q,g)&&(D[g]=q[g])}return D}})},"esri/layers/vectorTiles/config":function(){define(["require",
"exports","esri/config"],function(D,q,a){Object.defineProperty(a,"workers",{get:function(){return a.defaults.workers},set:function(b){return a.defaults.workers=b}});return a})},"esri/layers/vectorTiles/layers/support/TilemapCache":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/io-query ../../request ../../core/Accessor ../../core/Error ../../core/Handles ../../core/Logger ../../core/LRUMap ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ./Tilemap".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v){var r=k.getLogger("esri.layers.support.TilemapCache");return function(y){function x(z){z=y.call(this)||this;z._handles=new e;z._pendingTilemapRequests={};z._availableLevels={};z.levels=5;z.cacheByteSize=2097152;z.request=h;return z}b(x,y);x.prototype.initialize=function(){var z=this;this._tilemapCache=new l(this.cacheByteSize,{sizeOfFunction:function(u){return u.byteSize}});this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers"],function(){return z._initializeTilemapDefinition()}),
n.init(this,"layer.tileInfo.lods",function(u){return z._initializeAvailableLevels(u)},!0)]);this._initializeTilemapDefinition()};x.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};x.prototype.castLevels=function(z){return 2>=z?(r.error("Minimum levels for Tilemap is 3, but got ",z),3):z};Object.defineProperty(x.prototype,"size",{get:function(){return 1<<this.levels},enumerable:!0,configurable:!0});x.prototype.getTilemap=function(z,u,w){return this._tilemapFromCache(z,
u,w,this._tmpTilemapDefinition)};x.prototype.fetchTilemap=function(z,u,w,t){var A=this;if(!this._availableLevels[z])return m.reject(new c("tilemap-cache:level-unavailable","Level "+z+" is unavailable in the service"));var G=this._tmpTilemapDefinition;if(z=this._tilemapFromCache(z,u,w,G))return m.resolve(z);var B=v.tilemapDefinitionId(G),E=this._pendingTilemapRequests[B];E||(E=v.Tilemap.fromDefinition(G,t).then(function(F){A._tilemapCache.set(B,F);delete A._pendingTilemapRequests[B];return F})["catch"](function(F){delete A._pendingTilemapRequests[B];
return m.reject(F)}),this._pendingTilemapRequests[B]=E);return m.create(function(F,I){E.then(F,I)})};x.prototype.getAvailability=function(z,u,w){return this._availableLevels[z]?(z=this.getTilemap(z,u,w))?z.getAvailability(u,w):"unknown":"unavailable"};x.prototype.getAvailabilityUpsample=function(z,u,w,t){t.level=z;t.row=u;t.col=w;z=this.layer.tileInfo;for(z.updateTileInfo(t);;)if(u=this.getAvailability(t.level,t.row,t.col),"unavailable"===u){if(!z.upsampleTile(t))return"unavailable"}else return u};
x.prototype.fetchAvailability=function(z,u,w,t){return this._availableLevels[z]?this.fetchTilemap(z,u,w,t).always(function(A){return A instanceof v.Tilemap?(A=A.getAvailability(u,w),"unavailable"===A?m.reject(new c("tile-map:tile-unavailable","Tile is not available",{level:z,row:u,col:w})):A):A&&"cancel"===A.dojoType?m.reject(A):"unknown"}):m.reject(new c("tilemap-cache:level-unavailable","Level "+z+" is unavailable in the service"))};x.prototype.fetchAvailabilityUpsample=function(z,u,w,t,A){var G=
this;t.level=z;t.row=u;t.col=w;var B=this.layer.tileInfo;B.updateTileInfo(t);return this.fetchAvailability(z,u,w,A)["catch"](function(E){return E&&"cancel"===E.dojoType?m.reject(E):B.upsampleTile(t)?G.fetchAvailabilityUpsample(t.level,t.row,t.col,t):m.reject(E)})};x.prototype._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var z=this.layer.parsedUrl,u=z.query;u&&u.token||!this.layer.token||(u=a({},u,{token:this.layer.token}));this._tilemapCache.clear();this._tmpTilemapDefinition=
{service:{url:z.path,query:u?f.objectToQuery(u):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};x.prototype._tilemapFromCache=function(z,u,w,t){z=this._getTilemapDefinition(z,u,w,t);z=v.tilemapDefinitionId(z);return this._tilemapCache.get(z)};x.prototype._getTilemapDefinition=function(z,u,w,t){t.level=z;t.row=u-u%this.size;t.col=w-w%this.size;return t};x.prototype._initializeAvailableLevels=function(z){var u=
this;this._availableLevels={};z&&z.forEach(function(w){return u._availableLevels[w.level]=!0})};g([p.property({constructOnly:!0,type:Number})],x.prototype,"levels",void 0);g([p.cast("levels")],x.prototype,"castLevels",null);g([p.property({readOnly:!0,dependsOn:["levels"],type:Number})],x.prototype,"size",null);g([p.property({constructOnly:!0,type:Number})],x.prototype,"cacheByteSize",void 0);g([p.property({constructOnly:!0})],x.prototype,"layer",void 0);g([p.property({constructOnly:!0})],x.prototype,
"request",void 0);return x=g([p.subclass("esri.layers.support.TilemapCache")],x)}(p.declared(d))})},"esri/layers/vectorTiles/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(D,q){return function(a,b){a.__bases__=b.__bases__}})},"esri/layers/vectorTiles/core/tsSupport/decorateHelper":function(){define([],function(){return function(D,q,a,b){var g=arguments.length,f=3>g?q:null===b?b=Object.getOwnPropertyDescriptor(q,a):b,h;if("object"===typeof Reflect&&"function"===
typeof Reflect.decorate)f=Reflect.decorate(D,q,a,b);else for(var d=D.length-1;0<=d;d--)if(h=D[d])f=(3>g?h(f):3<g?h(q,a,f):h(q,a))||f;return 3<g&&f&&Object.defineProperty(q,a,f),f}})},"esri/layers/vectorTiles/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(D,q,a,b,g,f){q=q["default"];D.before(function(d,c){D.hasMixin(d,h)&&b.processPrototype(c)});D.after(function(d){D.hasMixin(d,
h)&&(b.processClass(d),Object.defineProperties(d.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var h=D(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===h)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");
Object.defineProperty(this,"__accessor__",{value:new q(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var d=[],c=0;c<arguments.length;c++)d.push(arguments[c]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,d)}},__accessor__:null,postscript:function(d){var c=this.__accessor__;d=c.ctorArgs||d;if(null!=this.getDefaults){var e=this.getDefaults(d||{});this.set(e)}c.initialize();d&&(this.set(d),c.ctorArgs=null);c.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(d){}else f.removeTarget(this),this.__accessor__.destroy()},get:function(d){return a.get(this,d)},hasOwnProperty:function(d){return this.__accessor__?this.__accessor__.has(d):Object.prototype.hasOwnProperty.call(this,d)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(d,c){g.set(this,d,c);return this},watch:function(d,c,e){return f.watch(this,d,c,e)},_clearOverride:function(d){return this.__accessor__.clearOverride(d)},_override:function(d,c){return this.__accessor__.override(d,
c)},_isOverridden:function(d){return this.__accessor__.isOverridden(d)},notifyChange:function(d){this.__accessor__.propertyInvalidated(d)},_get:function(d){return this.__accessor__.internalGet(d)},_set:function(d,c){return this.__accessor__.internalSet(d,c)}});return h})},"esri/layers/vectorTiles/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(D,q,a){function b(d,c){d&&!Array.isArray(d)&&"function"!==typeof d&&(c=d,d=null);d=d||[];c=c||{};return g([this].concat(d),
c)}function g(d,c){d&&!Array.isArray(d)&&"function"!==typeof d&&(c=d,d=null);"function"===typeof d?d=[d]:d||(d=[]);c=c||{};var e;var k=0;for(e=f.length;k<e;k++)f[k](d,c);var l=a(d,c);l.createSubclass=b;k=0;for(e=h.length;k<e;k++)h[k](l);return l}var f=[],h=[];(function(d){d.hasMixin=function(c,e){var k=Array.isArray(c)?c.reduce(function(m,n){return n._meta?m.concat(n._meta.bases):m},[]):c._meta?c._meta.bases:c;if(!k)return!1;if("string"===typeof e)for(var l=k.length-1;0<=l;l--)if(k[l].prototype.declaredClass===
e)return!0;return-1!==k.indexOf(e)};d.safeMixin=function(c,e){return a.safeMixin(c,e)};d.before=function(c){f.push(c)};d.after=function(c){h.push(c)}})(g||(g={}));return g})},"esri/layers/vectorTiles/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(D,q,a,b,g,f,h){Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.Properties");D=function(){function d(c){this.host=c;
this._origin=f.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new h["default"];c=this.host.constructor.__accessorMetadata__;this.metadatas=c.properties;this.autoDestroy=c.autoDestroy}d.prototype.initialize=function(){this.lifecycle=1;g.instanceCreated(this.host,this.metadatas)};d.prototype.constructed=function(){this.lifecycle=2};d.prototype.destroy=function(){this.destroyed=!0;var c=this.cursors;if(this.cursors)for(var e=
0,k=Object.getOwnPropertyNames(c);e<k.length;e++){var l=k[e],m=c[l];if(m){for(;0<m.length;)m.pop().propertyDestroyed(this,l);c[l]=null}}if(this.autoDestroy)for(l in this.metadatas)(c=this.internalGet(l))&&c&&"function"===typeof c.destroy&&(c.destroy(),this.metadatas[l].nonNullable||this.internalSet(l,null))};Object.defineProperty(d.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});d.prototype.clearOverride=function(c){this.isOverridden(c)&&(this.overridden[c]=
!1,this.propertyInvalidated(c))};d.prototype.get=function(c){var e=this.metadatas[c];if(this.store.has(c)&&!this.dirties[c])return this.store.get(c);var k=e.get;return k?(e=k.call(this.host),this.store.set(c,e,f.OriginId.COMPUTED),this.propertyCommitted(c),e):e.value};d.prototype.originOf=function(c){var e=this.store.originOf(c);return void 0===e&&(c=this.metadatas[c])&&c.hasOwnProperty("value")?"defaults":f.idToName(e)};d.prototype.has=function(c){return this.metadatas[c]?this.store.has(c):!1};d.prototype.internalGet=
function(c){if(this.metadatas[c]){var e=this.store;return e.has(c)?e.get(c):this.metadatas[c].value}};d.prototype.internalSet=function(c,e){this.metadatas[c]&&(this.propertyInvalidated(c),this.initialized?this.store.set(c,e,this._origin):this.store.set(c,e,f.OriginId.DEFAULTS),this.propertyCommitted(c))};d.prototype.isOverridden=function(c){return null!=this.overridden&&!0===this.overridden[c]};d.prototype.keys=function(){return this.store.keys()};d.prototype.override=function(c,e){if(this.metadatas[c]){this.overridden||
(this.overridden={});var k=this.metadatas[c];k.nonNullable&&null==e||((k=k.cast)&&(e=k.call(this.host,e)),this.overridden[c]=!0,this.internalSet(c,e))}};d.prototype.set=function(c,e){if(this.metadatas[c]){var k=this.metadatas[c];if(!k.nonNullable||null!=e){var l=k.set;(k=k.cast)&&(e=k.call(this.host,e));l?l.call(this.host,e):this.internalSet(c,e)}}};d.prototype.setDefaultOrigin=function(c){this._origin=f.nameToId(c)};d.prototype.propertyInvalidated=function(c){var e=this.dirties,k=this.isOverridden(c),
l=this.cursors&&this.cursors[c],m=this.metadatas[c].computes;if(l)for(var n=0;n<l.length;n++)l[n].propertyInvalidated(this,c);k||(e[c]=!0);if(m)for(c=0;c<m.length;c++)this.propertyInvalidated(m[c])};d.prototype.propertyCommitted=function(c){var e=this.cursors&&this.cursors[c];this.dirties[c]=!1;if(e)for(var k=0;k<e.length;k++)e[k].propertyCommitted(this,c)};d.prototype.addCursor=function(c,e){this.cursors||(this.cursors={});var k=this.cursors[c];k||(this.cursors[c]=k=[]);k.push(e)};d.prototype.removeCursor=
function(c,e){var k=this.cursors[c];this.cursors[c]&&(k.splice(k.indexOf(e),1),0===k.length&&(this.cursors[c]=null))};return d}();q["default"]=D})},"esri/layers/vectorTiles/core/Logger":function(){define(["require","exports","dojo/has"],function(D,q,a){var b={info:0,warn:1,error:2};D=function(){function g(f){void 0===f&&(f={});this.module=f.module||"";this.writer=f.writer||null;this.level=f.level||null;null!=f.enabled&&(this.enabled=!!f.enabled);g._loggers[this.module]=this;f=this.module.lastIndexOf(".");
-1!==f&&(this.parent=g.getLogger(this.module.slice(0,f)))}g.prototype.log=function(f){for(var h=[],d=1;d<arguments.length;d++)h[d-1]=arguments[d];this._isEnabled()&&this._matchLevel(f)&&(d=this._inheritedWriter())&&d.apply(void 0,[f,this.module].concat(h))};g.prototype.error=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];this.log.apply(this,["error"].concat(f))};g.prototype.warn=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];this.log.apply(this,["warn"].concat(f))};
g.prototype.info=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];this.log.apply(this,["info"].concat(f))};g.prototype.getLogger=function(f){return g.getLogger(this.module+"."+f)};g.getLogger=function(f){var h=g._loggers[f];h||(h=new g({module:f}));return h};g.prototype._parentWithMember=function(f,h){for(var d=this;d&&null==d[f];)d=d.parent;return d?d[f]:h};g.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};g.prototype._consoleWriter=
function(f,h){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];console[f].apply(console,["["+h+"]"].concat(d))};g.prototype._matchLevel=function(f){return b[this._parentWithMember("level","error")]<=b[f]};g.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};g._loggers={};return g}();D.getLogger("esri").level="warn";return D})},"esri/layers/vectorTiles/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty",
"./extensions/serializableProperty"],function(D,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});var f=[a["default"],b["default"],g["default"]];q.processPrototypeMetadatas=function(h,d){for(var c=Object.getOwnPropertyNames(h),e=0;e<f.length;e++){var k=f[e];if(k.processPrototypePropertyMetadata)for(var l=0,m=c;l<m.length;l++){var n=m[l];k.processPrototypePropertyMetadata(n,h[n],h,d)}}};q.processClassMetadatas=function(h,d){for(var c=Object.getOwnPropertyNames(h),e=0;e<f.length;e++){var k=
f[e];if(k.processClassPropertyMetadata)for(var l=0,m=c;l<m.length;l++){var n=m[l];k.processClassPropertyMetadata(n,h[n],h,d)}}};q.instanceCreated=function(h,d){for(var c=Object.getOwnPropertyNames(d),e=0;e<f.length;e++){var k=f[e];k.instanceCreated&&k.instanceCreated(h,d,c)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(D,q,a,b,g,f,h){function d(c,e,k){var l=f.getProperties(c);
return h.wire(c,k.aliasOf,function(){l.propertyInvalidated(e)})}Object.defineProperty(q,"__esModule",{value:!0});q.AliasedPropertyExtension={processClassPropertyMetadata:function(c,e,k,l){var m=e.aliasOf;if(m&&(c=m.split(".")[0],null!=k[c]&&!e.set&&!e.get)){var n;e.get=function(){var p=b["default"](this,m);if("function"===typeof p){n||(n=m.split(".").slice(0,-1).join("."));var v=b["default"](this,n);v&&(p=p.bind(v))}return p};e.readOnly||(e.set=function(p){return g["default"](this,m,p)})}},instanceCreated:function(c,
e,k){for(var l=0;l<k.length;l++){var m=k[l],n=e[m];n.aliasOf&&d(c,m,n)}}};q["default"]=q.AliasedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(D,q,a){function b(d,c,e){if(null!=e.getItemAt||Array.isArray(e)){var k=parseInt(d,10);if(!isNaN(k))return Array.isArray(e)?e[k]:e.getItemAt(k)}k=a.getProperties(e);return c?a.isPropertyDeclared(k,d)?k.get(d):e[d]:a.isPropertyDeclared(k,d)?k.internalGet(d):e[d]}function g(d,
c,e,k){if(null==d)return d;if((d=b(c[k],e,d))||!(k<c.length-1))return k===c.length-1?d:g(d,c,e,k+1)}function f(d,c,e,k){void 0===e&&(e=!1);void 0===k&&(k=0);return"string"===typeof c&&-1===c.indexOf(".")?b(c,e,d):g(d,a.pathToArray(c),e,k)}function h(d,c){return f(d,c,!0)}Object.defineProperty(q,"__esModule",{value:!0});q.valueOf=f;q.get=h;q.exists=function(d,c){return void 0!==f(c,d,!0)};q["default"]=h})},"esri/layers/vectorTiles/core/accessorSupport/utils":function(){define(["require","exports",
"../lang"],function(D,q,a){function b(d,c){return c?Object.keys(c).reduce(function(e,k){if("value"===k)return e[k]=c[k],e;if(void 0===e[k])return e[k]=a.clone(c[k]),e;var l=e[k],m=c[k];if(l===m)return e;if(Array.isArray(m)||Array.isArray(e))l=l?Array.isArray(l)?e[k]=l.concat():e[k]=[l]:e[k]=[],m&&(Array.isArray(m)||(m=[m]),m.forEach(function(n){-1===l.indexOf(n)&&l.push(n)}));else if(m&&"object"===typeof m)e[k]=b(l,m);else if(!e.hasOwnProperty(k)||c.hasOwnProperty(k))e[k]=m;return e},d||{}):d}function g(d){return Array.isArray(d)?
d:d.split(".")}function f(d){if(Array.isArray(d)||-1<d.indexOf(",")){d=Array.isArray(d)?d:d.split(",");for(var c=0;c<d.length;c++)d[c]=d[c].trim();return 1===d.length?d[0]:d}return d.trim()}function h(d){var c=!1;return function(){c||(c=!0,d())}}Object.defineProperty(q,"__esModule",{value:!0});q.getProperties=function(d){return d?d.__accessor__?d.__accessor__:d.propertyInvalidated?d:null:null};q.isPropertyDeclared=function(d,c){return d&&d.metadatas&&null!=d.metadatas[c]};q.merge=b;q.pathToStringOrArray=
function(d){return d?"string"===typeof d&&-1===d.indexOf(".")?d:g(d):d};q.pathToArray=g;q.splitPath=f;q.parse=function(d,c,e,k){c=f(c);if(Array.isArray(c)){var l=c.map(function(m){return k(d,m.trim(),e)});return{remove:h(function(){return l.forEach(function(m){return m.remove()})})}}return k(d,c.trim(),e)};q.once=h})},"esri/layers/vectorTiles/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(D,q,a,b,g){function f(h,d,c){if(h&&d)if("object"===
typeof d){c=0;for(var e=Object.getOwnPropertyNames(d);c<e.length;c++){var k=e[c];f(h,k,d[k])}}else"_"!==d[0]&&(-1!==d.indexOf(".")?(d=d.split("."),k=d.splice(d.length-1,1)[0],f(g["default"](h,d),k,c)):h[d]=c)}Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.set");q.set=f;q["default"]=f})},"esri/layers/vectorTiles/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(D,q,a){function b(e,k,l){k=a.splitPath(k);if(Array.isArray(k)){for(var m=
[],n=0;n<k.length;n++)m.push((new g(k[n],l)).install(e));return new d(m)}e=(new g(k,l)).install(e);return new c(e)}Object.defineProperty(q,"__esModule",{value:!0});var g=function(){function e(k,l){this.path=k;this.callback=l;this.chain=null;this.path=k;-1<k.indexOf(".")&&(this.chain=a.pathToArray(k));this.callback=l;return this}e.prototype.install=function(k){k=this.chain?new h(this,k):new f(this,k);return k};e.prototype.notify=function(k){this.callback(k,this.path)};return e}(),f=function(){function e(k,
l){this.binding=k;this.target=l;a.getProperties(l).addCursor(this.binding.path,this)}e.prototype.destroy=function(){this.target&&(a.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};e.prototype.propertyDestroyed=function(k,l){a.getProperties(this.target).removeCursor(l,this)};e.prototype.propertyInvalidated=function(k,l){this.binding&&this.binding.notify(this.target)};e.prototype.propertyCommitted=function(k,l){this.binding&&this.binding.notify(this.target)};
return e}(),h=function(){function e(k,l){this.binding=k;this.target=l;this.stack=[];this.properties=a.getProperties(l);this.stack.push({properties:this.properties,propertyName:k.chain[0]});this.properties.addCursor(k.chain[0],this);this.moveForward();return this}e.prototype.destroy=function(){for(;;){var k=this.stack.pop();if(null==k)break;k.properties.removeCursor(k.propertyName,this)}this.target=this.binding=null};e.prototype.propertyDestroyed=function(k,l){this.moveBackward(k,l)};e.prototype.propertyInvalidated=
function(k,l){this.binding&&this.binding.notify(this.target)};e.prototype.propertyCommitted=function(k,l){this.binding&&(this.moveBackward(k,l),this.moveForward(),this.binding.notify(this.target))};e.prototype.moveBackward=function(k,l){for(var m=this.stack,n=m[m.length-1];n.properties!==k&&n.propertyName!==l;)n.properties.removeCursor(n.propertyName,this),m.pop(),n=m[m.length-1]};e.prototype.moveForward=function(){var k=this.stack,l=k[k.length-1];l=l.properties.internalGet(l.propertyName);(l=a.getProperties(l))&&
k.length<this.binding.chain.length&&(k=this.binding.chain[k.length],this.stack.push({properties:l,propertyName:k}),l.addCursor(k,this),this.moveForward())};return e}(),d=function(){function e(k){this.cursors=k}e.prototype.remove=function(){for(var k=this.cursors;0<k.length;)k.pop().destroy();this.cursors=null};return e}(),c=function(){function e(k){this.cursor=k}e.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return e}();q.create=function(e,k){var l=a.splitPath(e);if(Array.isArray(l)){for(var m=
[],n=0;n<l.length;n++)m.push(new g(l[n],k));return function(v){for(var r=[],y=0;y<m.length;y++)r[y]=m[y].install(v);return new d(r)}}var p=new g(l,k);return function(v){return new c(p.install(v))}};q.wire=b;q["default"]=b})},"esri/layers/vectorTiles/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(D,q,a,b,g,f){Object.defineProperty(q,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.extensions.computedProperty");
q.ComputedPropertyExtension={processClassPropertyMetadata:function(h,d,c,e){d.dependsOn&&(c=void 0,c=d.dependsOn.slice())&&(d.wire=f.create(c,function(k){return g.getProperties(k).propertyInvalidated(h)}))},instanceCreated:function(h,d,c){for(var e=0;e<c.length;e++){var k=d[c[e]];k.wire&&k.wire(h)}}};q["default"]=q.ComputedPropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
function(D,q,a,b,g,f){function h(d,c,e){var k=d&&d.json;d&&d.json&&d.json.origins&&e&&(d=d.json.origins[e.origin])&&c in d&&(k=d);return k}Object.defineProperty(q,"__esModule",{value:!0});q.originSpecificReadPropertyDefinition=function(d,c){return h(d,"read",c)};q.originSpecificWritePropertyDefinition=function(d,c){return h(d,"write",c)};q.SerializablePropertyExtension={processPrototypePropertyMetadata:function(d,c,e,k){if(g.process(c)){a.process(c);e=c.type;for(k=0;Array.isArray(e);)e=e[0],k++;if(c.json.origins)for(var l in c.json.origins){var m=
c.json.origins[l];b.create(e,k,d,m);f.create(e,k,d,m)}b.create(e,k,d,c.json);f.create(e,k,d,c.json)}}};q["default"]=q.SerializablePropertyExtension})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,g={"web-document":["web-scene","web-map"]};a=function(h){if(b[h]){var d=b[h];g[h].forEach(function(c){b[c]=
d});delete b[h]}};for(var f in g)a(f)}}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(D,q,a,b){function g(l,m,n,p){if(1<m)return d(l,m);if(1===m)return c(l);if(e(l)){var v=c(l.prototype.itemType.Type);return function(r,y,x){return(r=v(r,y,x))?new l(r):r}}return f(l)}function f(l){return l.prototype.read?function(m,n,p){return null==m?m:(new l).read(m,p)}:l.fromJSON}function h(l,m,
n,p){return 0!==p&&Array.isArray(m)?m.map(function(v){return h(l,v,n,p-1)}):l(m,null,n)}function d(l,m){var n=f(l),p=h.bind(null,n);return function(v,r,y){if(null==v)return v;v=p(v,y,m);r=m;for(y=v;0<r&&Array.isArray(y);)r--,y=y[0];if(void 0!==y)for(y=0;y<r;y++)v=[v];return v}}function c(l){var m=f(l);return function(n,p,v){return null==n?n:Array.isArray(n)?n.map(function(r){return m(r,null,v)}):[m(n,null,v)]}}function e(l){return b.isCollection(l)?(l=l.prototype.itemType)&&l.Type&&"function"===typeof l.Type?
k(l.Type):!1:!1}function k(l){return!!l&&(!!l.prototype.read||!!l.fromJSON||e(l))}Object.defineProperty(q,"__esModule",{value:!0});q.create=function(l,m,n,p){(!p.read||!p.read.reader&&!1!==p.read.enabled)&&k(l)&&a.setDeepValue("read.reader",g(l,m,n,p),p)}})},"esri/layers/vectorTiles/core/object":function(){define(["require","exports"],function(D,q){function a(b,g,f){for(var h=0;h<b.length;h++){var d=b[h];if(!(d in f))if(g)f[d]={};else return;f=f[d]}return f}Object.defineProperty(q,"__esModule",{value:!0});
q.getDeepValue=function(b,g){return a(b.split("."),!1,g)};q.setDeepValue=function(b,g,f){var h=b.split(".");b=h.pop();(f=a(h,!0,f))&&b&&(f[b]=g)}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require",
"exports"],function(D,q){function a(g){"boolean"===typeof g.read?g.read={enabled:g.read}:"function"===typeof g.read?g.read={enabled:!0,reader:g.read}:g.read&&"object"===typeof g.read&&void 0===g.read.enabled&&(g.read.enabled=!0)}function b(g){"boolean"===typeof g.write?g.write={enabled:g.write}:"function"===typeof g.write?g.write={enabled:!0,writer:g.write}:g.write&&"object"===typeof g.write&&void 0===g.write.enabled&&(g.write.enabled=!0)}Object.defineProperty(q,"__esModule",{value:!0});q.process=
function(g){g.json||(g.json={});a(g.json);b(g.json);if(g.json.origins)for(var f in g.json.origins)a(g.json.origins[f]),b(g.json.origins[f]);return!0}})},"esri/layers/vectorTiles/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(D,q,a,b){function g(e,k,l,m){a.setDeepValue(l,f(e,m),k)}function f(e,k){var l;return l=e&&"function"===typeof e.write?e.write({},k):e&&"function"===typeof e.toJSON?e.toJSON():"number"===
typeof e?-Infinity===e?-Number.MAX_VALUE:Infinity===e?Number.MAX_VALUE:isNaN(e)?null:e:e}function h(e,k,l,m){null===e?e=null:e&&"function"===typeof e.map?(e=e.map(function(n){return f(n,m)}),"function"===typeof e.toArray&&(e=e.toArray())):e=[f(e,m)];a.setDeepValue(l,e,k)}function d(e,k,l){return 0!==l&&Array.isArray(e)?e.map(function(m){return d(m,k,l-1)}):f(e,k)}function c(e){return function(k,l,m,n){if(null===k)k=null;else{k=d(k,n,e);n=e;for(var p=k;0<n&&Array.isArray(p);)n--,p=p[0];if(void 0!==
p)for(p=0;p<n;p++)k=[k]}a.setDeepValue(m,k,l)}}Object.defineProperty(q,"__esModule",{value:!0});q.create=function(e,k,l,m){m.write&&!m.write.writer&&!1!==m.write.enabled&&(1===k||b.isCollection(e)?m.write.writer=h:m.write.writer=1<k?c(k):g)}})},"esri/layers/vectorTiles/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(D,q){function a(f){switch(f){case "defaults":return g.DEFAULTS;case "service":return g.SERVICE;case "portal-item":return g.PORTAL_ITEM;case "web-scene":return g.WEB_SCENE;
case "web-map":return g.WEB_MAP;case "user":return g.USER}}function b(f){switch(f){case g.DEFAULTS:return"defaults";case g.SERVICE:return"service";case g.PORTAL_ITEM:return"portal-item";case g.WEB_SCENE:return"web-scene";case g.WEB_MAP:return"web-map";case g.USER:return"user"}}Object.defineProperty(q,"__esModule",{value:!0});var g;(function(f){f[f.DEFAULTS=0]="DEFAULTS";f[f.COMPUTED=1]="COMPUTED";f[f.SERVICE=2]="SERVICE";f[f.PORTAL_ITEM=3]="PORTAL_ITEM";f[f.WEB_SCENE=4]="WEB_SCENE";f[f.WEB_MAP=5]=
"WEB_MAP";f[f.USER=6]="USER";f[f.NUM=7]="NUM"})(g=q.OriginId||(q.OriginId={}));q.nameToId=a;q.idToName=b;q.readableNameToId=function(f){return a(f)};q.idToReadableName=function(f){return b(f)};q.writableNameToId=function(f){return a(f)};q.idToWritableName=function(f){return b(f)}})},"esri/layers/vectorTiles/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function b(){this._values={}}
b.prototype.get=function(g){return this._values[g]};b.prototype.originOf=function(g){return a.OriginId.USER};b.prototype.keys=function(){return Object.keys(this._values)};b.prototype.set=function(g,f){this._values[g]=f};b.prototype.clear=function(g){delete this._values[g]};b.prototype.has=function(g){return g in this._values};return b}();q["default"]=D})},"esri/layers/vectorTiles/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(D,q,a,b,g,f,h,d){Object.defineProperty(q,"__esModule",{value:!0});var c=Object.prototype.hasOwnProperty,e=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,k={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},l=/^_(set|get)([a-zA-Z0-9]+)Attr$/;q.processPrototype=function(m){for(var n=m.declaredClass,p=m.properties||{},v=0,r=Object.getOwnPropertyNames(p);v<r.length;v++){var y=r[v],x=p[y],z=typeof x;null==x?f.setPropertyMetadata(m,y,{value:x}):
Array.isArray(x)?f.setPropertyMetadata(m,y,{type:[x[0]],value:null}):"object"===z?h.getProperties(x)||x instanceof Date?f.setPropertyMetadata(m,y,{type:x.constructor,value:x}):f.setPropertyMetadata(m,y,x):"boolean"===z?f.setPropertyMetadata(m,y,{type:Boolean,value:x}):"string"===z?f.setPropertyMetadata(m,y,{type:String,value:x}):"number"===z?f.setPropertyMetadata(m,y,{type:Number,value:x}):"function"===z&&f.setPropertyMetadata(m,y,{type:x,value:null})}v=0;for(r=Object.getOwnPropertyNames(m);v<r.length;v++){z=
r[v];x=m[z];p=y=void 0;var u=e.exec(z);if(u)y=u[1],p=k[u[2]];else if(u=l.exec(z))y=u[2][0].toLowerCase()+u[2].substr(1),p=u[1].toLowerCase();y&&p&&(y=f.getPropertyMetadata(m,y),a.setDeepValue(p,x,y))}v=0;for(r=Object.getOwnPropertyNames(f.getPropertiesMetadata(m));v<r.length;v++)if(y=r[v],x=f.getPropertyMetadata(m,y),p=x.type,z=x.types,void 0===x.value&&c.call(m,y)&&(x.value=m[y]),!x.cast&&p){y=x;x=0;for(z=p;Array.isArray(z);)z=z[0],x++;p=1===x?b.ensureArray(z):1<x?b.ensureNArray(z,x):b.ensureType(p);
y.cast=p}else!x.cast&&z&&(Array.isArray(z)?x.cast=b.ensureArrayTyped(b.ensureOneOfType(z[0])):x.cast=b.ensureOneOfType(z));g.processPrototypeMetadatas(f.getPropertiesMetadata(m),n);return f.getPropertiesMetadata(m)};q.processClass=function(m){for(var n=m.prototype,p=n.declaredClass,v=m._meta.bases,r={},y=v.length-1;0<=y;y--)h.merge(r,f.getMetadata(v[y].prototype));var x=r.properties;g.processClassMetadatas(x,p);Object.defineProperty(m,"__accessorMetadata__",{value:{properties:x,autoDestroy:!!r.autoDestroy}});
var z={};p=function(u){var w=x[u];z[u]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(u):w.value},set:function(t){var A=this.__accessor__;if(!A)Object.defineProperty(this,u,{enumerable:!0,configurable:!0,writable:!0,value:t});else if(!Object.isFrozen(this)){if(A.initialized&&w.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+u+"' of "+this.declaredClass);if(2===A.lifecycle&&w.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+
u+"' of "+this.declaredClass);A.set(u,t)}}}};v=0;for(y=Object.getOwnPropertyNames(x);v<y.length;v++)p(y[v]);Object.defineProperties(m.prototype,z);if(r.parameters)for(m=0,p=Object.getOwnPropertyNames(r.parameters);m<p.length;m++)v=p[m],y=Object.getOwnPropertyDescriptor(n,v)||{value:n[v]},(y=d.autocastMethod(n,v,y))&&Object.defineProperty(n,v,y);return r}})},"esri/layers/vectorTiles/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(D,q,a){function b(u,w){return w.isInstanceOf?
w.isInstanceOf(u):w instanceof u}function g(u){return null==u?u:new Date(u)}function f(u){return null==u?u:!!u}function h(u){return null==u?u:u.toString()}function d(u){return null==u?u:parseFloat(u)}function c(u){return null==u?u:Math.round(parseFloat(u))}function e(u){return u&&u.constructor&&void 0!==u.constructor._meta}function k(u,w){return null!=w&&u&&!b(u,w)}function l(u,w){k(u,w)&&(e(w)?x.error("Accessor#set","Assigning an instance of '"+(w.declaredClass||"unknown")+"' which is not a subclass of '"+
(u&&u.prototype&&u.prototype.declaredClass||"unknown")+"'"):w=new u(w));return w}function m(u){switch(u){case Number:return d;case z:return c;case Boolean:return f;case String:return h;case Date:return g;default:return l.bind(null,u)}}function n(u,w){var t=m(u);return 1===arguments.length?t:t(w)}function p(u,w){return 1===arguments.length?p.bind(null,u):w?Array.isArray(w)?w.map(u):[u(w)]:w}function v(u,w,t){return 0!==w&&Array.isArray(t)?t.map(function(A){return v(u,w-1,A)}):u(t)}function r(u,w,t){if(2===
arguments.length)return r.bind(null,u,w);if(!t)return t;t=v(u,w,t);for(var A=w,G=t;0<A&&Array.isArray(G);)A--,G=G[0];if(void 0!==G)for(G=0;G<A;G++)t=[t];return t}function y(u,w){if(2===arguments.length)return y(u).call(null,w);var t={},A=[],G=[],B;for(B in u.typeMap){var E=u.typeMap[B];t[B]=n(E);A.push(E&&E.prototype&&E.prototype.declaredClass||"unknown");G.push(B)}var F="string"===typeof u.key?function(I){return I[u.key]}:u.key;return function(I){if(u.base&&!k(u.base,I))return I;var M=F(I)||u.defaultKeyValue,
P=t[M];if(!P)return x.error("Accessor#set","Invalid property value, value needs to be one of '"+(A.join("', '")+"', or a plain object that can auto-cast (having .type \x3d '")+(G.join("', '")+"')")),null;if(!k(u.typeMap[M],I))return I;if("string"!==typeof u.key||e(I))return P(I);M={};for(var aa in I)aa!==u.key&&(M[aa]=I[aa]);return P(M)}}Object.defineProperty(q,"__esModule",{value:!0});var x=a.getLogger("esri.core.Accessor");q.isInstanceOf=b;q.ensureDate=g;q.ensureBoolean=f;q.ensureString=h;q.ensureNumber=
d;q.ensureInteger=c;q.isClassedType=e;q.requiresType=k;q.ensureClass=l;q.ensureType=n;q.ensureArrayTyped=p;q.ensureArray=function(u,w){return 1===arguments.length?p(n.bind(null,u)):p(n.bind(null,u),w)};q.ensureNArrayTyped=r;q.ensureNArray=function(u,w,t){return 2===arguments.length?r(n.bind(null,u),w):r(n.bind(null,u),w,t)};q.ensureOneOfType=y;var z=function(){return function(){}}();q.Integer=z;q["default"]=n})},"esri/layers/vectorTiles/core/accessorSupport/metadata":function(){define(["require",
"exports"],function(D,q){function a(d){return null!=d.__accessorMetadata__}function b(d){return a(d)&&null!=g(d).properties}function g(d){d.__accessorMetadata__||Object.defineProperty(d,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return d.__accessorMetadata__}function f(d){d=g(d);var c=d.properties;c||(c=d.properties={});return c}function h(d,c){var e=g(d),k=e.parameters;k||(k=e.parameters={});e=k[c];e||(e=[],k[c]=e);return e}Object.defineProperty(q,"__esModule",{value:!0});
q.hasMetadata=a;q.hasPropertiesMetadata=b;q.hasPropertyMetadata=function(d,c){return b(d)&&null!=f(d)[c]};q.hasParametersMetadata=function(d,c){return a(d)&&null!=g(d).parameters&&null!=g(d).parameters[c]};q.getMetadata=g;q.getPropertiesMetadata=f;q.getPropertyMetadata=function(d,c){var e=f(d),k=e[c];k||(k=e[c]={});return k};q.setPropertyMetadata=function(d,c,e){f(d)[c]=e};q.getParametersMetadata=h;q.getParameterMetadata=function(d,c,e){var k=h(d,c)[e];k||(h(d,c)[e]=k={index:e});return k}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/cast":function(){define(["require",
"exports","../ensureType","../metadata"],function(D,q,a,b){function g(e){var k="_meta"in e?a.ensureType(e):e;return function(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];l.push(k);return"number"===typeof l[2]?h.apply(this,l):f.apply(this,l)}}function f(e,k,l,m){b.getPropertyMetadata(e,k).cast=m}function h(e,k,l,m){b.getParameterMetadata(e,k,l).cast=m}function d(e){return function(k,l,m){b.getPropertyMetadata(k,e).cast=k[l]}}Object.defineProperty(q,"__esModule",{value:!0});var c=Object.prototype.toString;
q.autocastMethod=function(e,k,l){if(b.hasParametersMetadata(e,k)){var m=b.getParametersMetadata(e,k).filter(function(p){return null!=p.cast});if(m.length){var n=l.value;l.value=function(){for(var p=[],v=0;v<arguments.length;v++)p[v]=arguments[v];for(v=0;v<m.length;v++){var r=m[v];p[r.index]=r.cast(p[r.index])}return n.apply(this,p)};return l}}};q.cast=function(){for(var e=[],k=0;k<arguments.length;k++)e[k]=arguments[k];if(3!==e.length||"string"!==typeof e[1]){if(1===e.length&&"[object Function]"===
c.call(e[0]))return g(e[0]);if(1===e.length&&"string"===typeof e[0])return d(e[0])}}})},"esri/layers/vectorTiles/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(D,q,a,b,g,f,h,d,c){function e(w){y.has(w)?x.splice(x.indexOf(w),1):y.add(w);x.push(w);z||(z=f.schedule(l))}function k(w){if(!w.removed){var t=w.callback,A=w.path,G=w.oldValue,B=w.target,E=h.valueOf(B,w.propertyPath,!0);b.equals(G,E)||
(w.oldValue=E,t.call(B,E,G,A,B))}}function l(){if(z){z=null;var w=x;x=r.acquire();y.clear();for(var t=r.acquire(),A=0;A<w.length;A++){var G=w[A];k(G);G.removed&&t.push(G)}for(A=0;A<x.length;A++)G=x[A],G.removed&&(t.push(G),y["delete"](G),x.splice(A,1),--A);for(A=0;A<t.length;A++)v.pool.release(t[A]);r.release(w);r.release(t);u.forEach(function(B){return B()})}}function m(w,t,A){var G=d.parse(w,t,A,function(B,E,F){var I=h.valueOf(B,E,!0),M,P=c.wire(B,E,function(aa,ca){aa.__accessor__.destroyed?G.remove():
(M||(M=v.pool.acquire(aa,ca,I,F),I=null),e(M))});return{remove:d.once(function(){P.remove();M&&(M.removed=!0,e(M),M=null);G=P=I=null})}});return G}function n(w,t,A){var G=d.parse(w,t,A,function(B,E,F){var I=h.valueOf(B,E,!0),M=!1;return c.wire(B,E,function(P,aa){if(P.__accessor__.destroyed)G.remove();else if(!M){M=!0;var ca=h.valueOf(P,aa,!0);b.equals(I,ca)||F.call(P,ca,I,aa,P);I=h.valueOf(P,aa,!0);M=!1}})});return G}function p(w,t,A,G){void 0===G&&(G=!1);return!w.__accessor__||w.__accessor__.destroyed?
{remove:function(){}}:G?n(w,t,A):m(w,t,A)}Object.defineProperty(q,"__esModule",{value:!0});var v=function(){function w(t,A,G,B){this.target=t;this.path=A;this.oldValue=G;this.callback=B;this.removed=!1;this.propertyPath=d.pathToStringOrArray(A)}w.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};w.pool=new g(w,!0);return w}(),r=new a,y=new Set,x=r.acquire(),z;q.dispatchTarget=function(w){for(var t=r.copy(x),A=0;A<t.length;A++){var G=
t[A];G.target===w&&(k(G),y["delete"](G),x.splice(x.indexOf(G),1))}};q.removeTarget=function(w){for(var t=0;t<x.length;t++){var A=x[t];A.target===w&&(A.removed=!0)}};q.dispatch=l;var u=new Set;q.afterDispatch=function(w){u.add(w);return{remove:function(){u["delete"](w)}}};q.watch=p;q.isValueInUse=function(w){return x.some(function(t){return t.oldValue===w})};q["default"]=p})},"esri/layers/vectorTiles/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(D,q,a){function b(h){h.length=
0}var g=Array.prototype.splice;D=function(){function h(d,c){void 0===d&&(d=50);void 0===c&&(c=50);this._pool=new a(Array,!1,b,c,d)}h.prototype.acquire=function(){return this._pool.acquire()};h.prototype.copy=function(d){var c=this.acquire();d.unshift(0,0);g.apply(c,d);d.splice(0,2);return c};h.prototype.release=function(d){this._pool.release(d)};h.acquire=function(){return f.acquire()};h.copy=function(d){return f.copy(d)};h.release=function(d){return f.release(d)};return h}();var f=new D(100);return D})},
"esri/layers/vectorTiles/core/ObjectPool":function(){define(["require","exports"],function(D,q){var a=function(){return function(){}}();return function(){function b(g,f,h,d,c){void 0===d&&(d=1);void 0===c&&(c=0);this.classConstructor=g;this.acquireFunctionOrWithConstructor=f;this.releaseFunction=h;this.growthSize=d;!0===f?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof f&&(this.acquireFunction=f);this._pool=Array(c);this._set=new Set;this._initialSize=c;for(g=0;g<c;g++)this._pool[g]=
new this.classConstructor;this.growthSize=Math.max(d,1)}b.prototype.acquire=function(){for(var g=[],f=0;f<arguments.length;f++)g[f]=arguments[f];f=this.classConstructor||a;if(0===this._pool.length)for(var h=this.growthSize,d=0;d<h;d++)this._pool[d]=new f;f=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[f].concat(g)):f&&f.acquire&&"function"===typeof f.acquire&&f.acquire.apply(f,g);this._set["delete"](f);return f};b.prototype.release=function(g){g&&!this._set.has(g)&&(this.releaseFunction?
this.releaseFunction(g):g&&g.release&&"function"===typeof g.release&&g.release(),this._pool.push(g),this._set.add(g))};b.prototype.prune=function(g){void 0===g&&(g=this._initialSize);if(!(this._pool.length<=g))for(var f;g>this._pool.length;)f=this._pool.shift(),this._set["delete"](f),f.dispose&&"function"===typeof f.dispose&&f.dispose()};b.prototype._constructorAcquireFunction=function(g){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];(d=this.classConstructor).call.apply(d,[g].concat(f));
var d};return b}()})},"esri/layers/vectorTiles/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(D,q,a,b,g){function f(t){void 0===t&&(t=q.now());q.debug.rafId=null;0<z.length&&(q.debug.rafId=h());if(0<m){var A=t-m;v=Math.min(A,v);if(A<n)return}q.debug.executeFrameTasks(t)}function h(){return q.debug.requestNextFrame?q.debug.requestNextFrame(e):e()}function d(){for(var t=0;t<z.length;){var A=z[t];t++;if(A.removed){z.splice(t-1,1);for(var G=
0;G<y.length;G++){var B=y[G];if(A.phases[B]){B=u[B];var E=B.indexOf(A);-1!==E&&B.splice(E,1)}}}}}function c(){for(;x.length;){var t=x.shift();t.isActive&&(t.isActive=!1,t.callback())}q.debug.willDispatch=!1}function e(){return g(f)}Object.defineProperty(q,"__esModule",{value:!0});q.now=b;var k=function(){return function(t){this.phases=t;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),l=function(){function t(A){this.callback=A;this.isActive=!0}t.prototype.remove=
function(){this.isActive=!1};return t}(),m=-1,n=0,p=0,v=Number.POSITIVE_INFINITY,r={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},y=["prepare","preRender","render","postRender","update"],x=[],z=[],u={prepare:[],preRender:[],render:[],postRender:[],update:[]},w=function(){function t(A){this._task=A}t.prototype.remove=function(){this._task.removed=!0};t.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=q.now())};t.prototype.resume=function(){this._task.paused&&
(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=q.now()-this._task.pausedAt))};return t}();q.FrameTaskHandle=w;q.debug={frameTasks:z,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(t){void 0===t&&(t=!1);for(var A=0;A<z.length;A++)z[A].removed=!0;t&&d()},dispatch:c,executeFrameTasks:function(t){void 0===t&&(t=q.now());0>m&&(m=t);var A=t-m;m=t;for(var G=0;G<z.length;G++){var B=z[G];-1!==B.epoch&&(B.dt=A)}for(G=0;G<y.length;G++){A=y[G];for(var E=u[A],F=0;F<E.length;F++)B=
E[F],B.paused||B.removed||(0===G&&B.ticks++,-1===B.epoch&&(B.epoch=t),r.time=t,r.deltaTime=B.dt,r.elapsedFrameTime=q.now()-t,r.frameDuration=0<p?p:v,r.spendInTask=t-B.epoch,B.phases[A].call(B,r))}d()}};q.schedule=function(t){t=new l(t);x.push(t);q.debug.willDispatch||(q.debug.willDispatch=!0,a(c));return t};q.addFrameTask=function(t){var A=new k(t);z.push(A);for(var G=0,B=y;G<B.length;G++){var E=B[G];t[E]&&u[E].push(A)}q.debug.rafId||(m=-1,q.debug.rafId=h());return new w(A)};q.setFrameRate=function(t){if(0>=
t)p=n=0;else{var A=1.05*v;t=Math.ceil(1E3/t/A);n=(t-1)*A;p=t*v}};q.requestNextFrame=h})},"esri/layers/vectorTiles/core/nextTick":function(){define(["require","exports","./global"],function(D,q,a){function b(){if(a.postMessage&&!a.importScripts){var f=a.onmessage,h=!0;a.onmessage=function(){h=!1};a.postMessage("","*");a.onmessage=f;return h}return!1}var g=a.MutationObserver||a.WebKitMutationObserver;return function(){if(a.process&&a.process.nextTick)var f=function(e){a.process.nextTick(e)};else if(a.Promise)f=
function(e){a.Promise.resolve().then(e)};else if(g){var h=[],d=document.createElement("div");(new g(function(){for(;0<h.length;)h.shift()()})).observe(d,{attributes:!0});f=function(e){h.push(e);d.setAttribute("queueStatus","1")}}else if(b()){var c=[];a.addEventListener("message",function(e){if(e.source===a&&"esri-nexttick-message"===e.data)for(e.stopPropagation();c.length;)c.shift()()},!0);f=function(e){c.push(e);a.postMessage("esri-nexttick-message","*")}}else f=a.setImmediate?function(e){return a.setImmediate(e)}:
function(e){return a.setTimeout(e,0)};return f}()})},"esri/layers/vectorTiles/core/global":function(){define(["require","exports"],function(D,q){return function(){if("undefined"!==typeof global)return global;if("undefined"!==typeof window)return window;if("undefined"!==typeof self)return self}()})},"esri/layers/vectorTiles/core/now":function(){define(["require","exports","./global"],function(D,q,a){return function(){var b=a.performance||{};if(b.now)return function(){return b.now()};if(b.webkitNow)return function(){return b.webkitNow()};
if(b.mozNow)return function(){return b.mozNow()};if(b.msNow)return function(){return b.msNow()};if(b.oNow)return function(){return b.oNow()};var g=b.timing&&b.timing.navigationStart?b.timing.navigationStart:Date.now();return function(){return Date.now()-g}}()})},"esri/layers/vectorTiles/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(D,q,a,b){var g=b();D=a.requestAnimationFrame;if(!D){q=["ms","moz","webkit","o"];for(var f=0;f<q.length&&!D;++f)D=a[q[f]+
"RequestAnimationFrame"];D||(D=function(h){var d=b(),c=Math.max(0,16-(d-g)),e=a.setTimeout(function(){h(b())},c);g=d+c;return e})}return D})},"esri/layers/vectorTiles/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(D,q,a,b,g,f,h){return function(d){function c(e){e=d.call(this)||this;e._groups=new Map;return e}a(c,d);c.prototype.destroy=function(){this.removeAll()};
Object.defineProperty(c.prototype,"size",{get:function(){var e=0;this._groups.forEach(function(k){e+=k.length});return e},enumerable:!0,configurable:!0});c.prototype.add=function(e,k){if(!this._isHandle(e)&&!Array.isArray(e)&&!f.isCollection(e))return this;var l=this._getOrCreateGroup(k);Array.isArray(e)||f.isCollection(e)?e.forEach(function(m){return l.push(m)}):l.push(e);this.notifyChange("size");return this};c.prototype.has=function(e){return this._groups.has(this._ensureGroupKey(e))};c.prototype.remove=
function(e){if(Array.isArray(e)||f.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;for(var k=this._getGroup(e),l=0;l<k.length;l++)k[l].remove();this._deleteGroup(e);this.notifyChange("size");return this};c.prototype.removeAll=function(){this._groups.forEach(function(e){for(var k=0;k<e.length;k++)e[k].remove()});this._groups.clear();this.notifyChange("size");return this};c.prototype._isHandle=function(e){return e&&!!e.remove};c.prototype._getOrCreateGroup=function(e){if(this.has(e))return this._getGroup(e);
var k=[];this._groups.set(this._ensureGroupKey(e),k);return k};c.prototype._getGroup=function(e){return this._groups.get(this._ensureGroupKey(e))};c.prototype._deleteGroup=function(e){return this._groups["delete"](this._ensureGroupKey(e))};c.prototype._ensureGroupKey=function(e){return e||"_default_"};b([h.property({readOnly:!0})],c.prototype,"size",null);return c=b([h.subclass("esri.core.Handles")],c)}(h.declared(g))})},"esri/layers/vectorTiles/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m){function n(B){return B?B.isInstanceOf&&B.isInstanceOf(G):!1}function p(B){return B?n(B)?B.toArray():B.length?Array.prototype.slice.apply(B):[]:[]}function v(B){if(B&&B.length)return B[0]}function r(B,E,F,I){E&&E.forEach(function(M,P,aa){B.push(M);r(B,F.call(I,M,P,aa),F,I)})}D=function(){function B(){this.target=null;this.defaultPrevented=this.cancellable=!1}B.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};B.prototype.reset=function(E){this.defaultPrevented=
!1;this.item=E};return B}();var y=function(){},x=new e(D,!0,function(B){B.item=null;B.target=null}),z=new Set,u=new Set,w=new Set,t=new Map,A=0,G=function(B){function E(I){I=B.call(this,I)||this;I._boundDispatch=I._dispatchColChange.bind(I);I._chgListeners=[];I._notifications=null;I._timer=null;I.length=0;I._items=[];Object.defineProperty(I,"uid",{value:A++});return I}a(E,B);var F=E;E.ofType=function(I){if(!I)return F;if(t.has(I))return t.get(I);if("function"===typeof I)var M=I.prototype.declaredClass;
else if(I.base)M=I.base.prototype.declaredClass;else for(var P in I.typeMap){var aa=I.typeMap[P].prototype.declaredClass;M=M?M+(" | "+aa):aa}M=F.createSubclass({declaredClass:"esri.core.Collection\x3c"+M+"\x3e"});P={Type:I,ensureType:"function"===typeof I?m.ensureType(I):m.ensureOneOfType(I)};Object.defineProperty(M.prototype,"itemType",{value:P});t.set(I,M);return M};E.prototype.normalizeCtorArgs=function(I){return I?Array.isArray(I)||n(I)?{items:I}:I:{}};Object.defineProperty(E.prototype,"items",
{get:function(){return this._items},set:function(I){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(p(I))),this._emitAfterChanges())},enumerable:!0,configurable:!0});E.prototype.on=function(I,M){var P;Array.isArray(I)?P=I:-1<I.indexOf(",")&&(P=I.split(/\s*,\s*/));if(P){for(var aa=[],ca=0;ca<P.length;ca++)aa.push(this.on(P[ca],M));aa.remove=function(){for(var la=0;la<aa.length;la++)aa[la].remove()};return aa}if("change"===I){var ea=this._chgListeners,T={removed:!1,callback:M};
ea.push(T);this._notifications&&this._notifications.push({listeners:ea.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=y;T.removed=!0;ea.splice(ea.indexOf(T),1)}}}return g.after(this,"on"+I,M,!0)};E.prototype.hasEventListener=function(I){return"change"===I?0<this._chgListeners.length:this.inherited(arguments)};E.prototype.add=function(I,M){if(this._emitBeforeChanges())return this;var P=this.getNextIndex(M);this._splice(P,0,I);this._emitAfterChanges();return this};
E.prototype.addMany=function(I,M){void 0===M&&(M=this._items.length);if(!I||!I.length||this._emitBeforeChanges())return this;var P=this.getNextIndex(M);this._splice.apply(this,[P,0].concat(p(I)));this._emitAfterChanges();return this};E.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var I=this._splice(0,this.length)||[];this._emitAfterChanges();return I};E.prototype.clone=function(){return this._createNewInstance({items:this._items.map(c.clone)})};E.prototype.concat=
function(){for(var I=[],M=0;M<arguments.length;M++)I[M]=arguments[M];I=I.map(p);return this._createNewInstance({items:(P=this._items).concat.apply(P,I)});var P};E.prototype.drain=function(I,M){if(this.length&&!this._emitBeforeChanges()){for(var P=this._splice(0,this.length),aa=P.length,ca=0;ca<aa;ca++)I.call(M,P[ca],ca,P);this._emitAfterChanges()}};E.prototype.every=function(I,M){return this._items.every(I,M)};E.prototype.filter=function(I,M){var P=2===arguments.length?this._items.filter(I,M):this._items.filter(I);
return this._createNewInstance({items:P})};E.prototype.find=function(I,M){if("function"!==typeof I)throw new TypeError(I+" is not a function");for(var P=this._items,aa=P.length,ca=0;ca<aa;ca++){var ea=P[ca];if(I.call(M,ea,ca,P))return ea}};E.prototype.findIndex=function(I,M){if("function"!==typeof I)throw new TypeError(I+" is not a function");for(var P=this._items,aa=P.length,ca=0;ca<aa;ca++)if(I.call(M,P[ca],ca,P))return ca;return-1};E.prototype.flatten=function(I,M){var P=[];r(P,this,I,M);return new F(P)};
E.prototype.forEach=function(I,M){for(var P=this._items,aa=P.length,ca=0;ca<aa;ca++)I.call(M,P[ca],ca,P)};E.prototype.getItemAt=function(I){return this._items[I]};E.prototype.getNextIndex=function(I){var M=this.length;I=null==I?M:I;0>I?I=0:I>M&&(I=M);return I};E.prototype.includes=function(I,M){void 0===M&&(M=0);return arguments.length?-1!==this._items.indexOf(I,M):!1};E.prototype.indexOf=function(I,M){void 0===M&&(M=0);return this._items.indexOf(I,M)};E.prototype.join=function(I){void 0===I&&(I=
",");return this._items.join(I)};E.prototype.lastIndexOf=function(I,M){void 0===M&&(M=this.length-1);return this._items.lastIndexOf(I,M)};E.prototype.map=function(I,M){var P=this._items.map(I,M);return new F({items:P})};E.prototype.reorder=function(I,M){void 0===M&&(M=this.length-1);var P=this.indexOf(I);if(-1!==P){0>M?M=0:M>=this.length&&(M=this.length-1);if(P!==M){if(this._emitBeforeChanges())return I;this._splice(P,1);this._splice(M,0,I);this._emitAfterChanges()}return I}};E.prototype.pop=function(){if(this.length&&
!this._emitBeforeChanges()){var I=v(this._splice(this.length-1,1));this._emitAfterChanges();return I}};E.prototype.push=function(){for(var I=[],M=0;M<arguments.length;M++)I[M]=arguments[M];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(I));this._emitAfterChanges();return this.length};E.prototype.reduce=function(I,M){var P=this._items;return 2===arguments.length?P.reduce(I,M):P.reduce(I)};E.prototype.reduceRight=function(I,M){var P=this._items;return 2===
arguments.length?P.reduceRight(I,M):P.reduceRight(I)};E.prototype.remove=function(I){return this.removeAt(this.indexOf(I))};E.prototype.removeAt=function(I){if(!(0>I||I>=this.length||this._emitBeforeChanges()))return I=v(this._splice(I,1)),this._emitAfterChanges(),I};E.prototype.removeMany=function(I){if(!I||!I.length||this._emitBeforeChanges())return[];I=n(I)?I.toArray():I;for(var M=this._items,P=[],aa=I.length,ca=0;ca<aa;ca++){var ea=M.indexOf(I[ca]);if(-1<ea){for(var T=ca+1,la=ea+1,X=Math.min(I.length-
T,M.length-la),R=0;R<X&&I[T+R]===M[la+R];)R++;T=1+R;(ea=this._splice(ea,T))&&0<ea.length&&P.push.apply(P,ea);ca+=T-1}}this._emitAfterChanges();return P};E.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var I=this._splice(0,this.length);I&&(I.reverse(),this._splice.apply(this,[0,0].concat(I)));this._emitAfterChanges();return this};E.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var I=v(this._splice(0,1));this._emitAfterChanges();return I}};E.prototype.slice=
function(I,M){void 0===I&&(I=0);void 0===M&&(M=this.length);return this._createNewInstance({items:this._items.slice(I,M)})};E.prototype.some=function(I,M){return this._items.some(I,M)};E.prototype.sort=function(I){if(!this.length||this._emitBeforeChanges())return this;var M=this._splice(0,this.length);arguments.length?M.sort(I):M.sort();this._splice.apply(this,[0,0].concat(M));return this};E.prototype.splice=function(I,M){for(var P=[],aa=2;aa<arguments.length;aa++)P[aa-2]=arguments[aa];if(this._emitBeforeChanges())return[];
P=this._splice.apply(this,[I,M].concat(P))||[];this._emitAfterChanges();return P};E.prototype.toArray=function(){return this._items.slice()};E.prototype.toJSON=function(){return this.toArray()};E.prototype.toLocaleString=function(){return this._items.toLocaleString()};E.prototype.toString=function(){return this._items.toString()};E.prototype.unshift=function(){for(var I=[],M=0;M<arguments.length;M++)I[M]=arguments[M];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(I));
this._emitAfterChanges();return this.length};E.prototype._createNewInstance=function(I){return new this.constructor(I)};E.prototype._splice=function(I,M){for(var P=[],aa=2;aa<arguments.length;aa++)P[aa-2]=arguments[aa];aa=this._items;var ca=this.constructor.prototype.itemType;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=k.schedule(this._boundDispatch));
if(M){var ea=aa.splice(I,M);if(this.hasEventListener("before-remove")){var T=x.acquire();T.target=this;T.cancellable=!0;for(var la=0,X=ea.length;la<X;la++){var R=ea[la];T.reset(R);this.emit("before-remove",T);T.defaultPrevented&&(ea.splice(la,1),aa.splice(I,0,R),I+=1,--la,--X)}x.release(T)}this.length=this._items.length;if(this.hasEventListener("after-remove")){R=x.acquire();R.target=this;R.cancellable=!1;X=ea.length;for(la=0;la<X;la++)R.reset(ea[la]),this.emit("after-remove",R);x.release(R)}}if(P&&
P.length){if(ca){la=[];for(X=0;X<P.length;X++)R=P[X],T=ca.ensureType(R),null==T&&null!=R||la.push(T);P=la}ca=this.hasEventListener("before-add");la=this.hasEventListener("after-add");X=I===this.length;if(ca||la){R=x.acquire();R.target=this;R.cancellable=!0;T=x.acquire();T.target=this;T.cancellable=!1;for(var fa=0,S=P;fa<S.length;fa++){var Y=S[fa];ca?(R.reset(Y),this.emit("before-add",R),R.defaultPrevented||(X?aa.push(Y):aa.splice(I++,0,Y),this._set("length",aa.length),la&&(T.reset(Y),this.emit("after-add",
T)))):(X?aa.push(Y):aa.splice(I++,0,Y),this._set("length",aa.length),T.reset(Y),this.emit("after-add",T))}x.release(R)}else X?aa.push.apply(aa,P):aa.splice.apply(aa,[I,0].concat(P)),this._set("length",aa.length)}(P&&P.length||ea&&ea.length)&&this._notifyChangeEvent(P,ea);return ea};E.prototype._emitBeforeChanges=function(){var I=!1;if(this.hasEventListener("before-changes")){var M=x.acquire();M.target=this;M.cancellable=!0;this.emit("before-changes",M);I=M.defaultPrevented;x.release(M)}return I};
E.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var I=x.acquire();I.target=this;I.cancellable=!1;this.emit("after-changes",I);x.release(I)}};E.prototype._notifyChangeEvent=function(I,M){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:I,removed:M})};E.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var I=this._notifications;this._notifications=
null;for(var M=function(ca){var ea=ca.changes;z.clear();u.clear();w.clear();for(var T=0;T<ea.length;T++){var la=ea[T],X=la.added;la=la.removed;if(X)if(0===w.size&&0===u.size)for(var R=0,fa=X;R<fa.length;R++)X=fa[R],z.add(X);else for(R=0,fa=X;R<fa.length;R++)X=fa[R],u.has(X)?(w.add(X),u["delete"](X)):w.has(X)||z.add(X);if(la)if(0===w.size&&0===z.size)for(R=0;R<la.length;R++)X=la[R],u.add(X);else for(R=0;R<la.length;R++)X=la[R],z.has(X)?z["delete"](X):(w["delete"](X),u.add(X))}var S=h.acquire();z.forEach(function(ja){S.push(ja)});
var Y=h.acquire();u.forEach(function(ja){Y.push(ja)});var ia=P._items,L=ca.items,W=h.acquire();w.forEach(function(ja){L.indexOf(ja)!==ia.indexOf(ja)&&W.push(ja)});if(ca.listeners&&(S.length||Y.length||W.length))for(ea={target:P,added:S,removed:Y,moved:W},T=ca.listeners.length,X=0;X<T;X++)la=ca.listeners[X],la.removed||la.callback.call(P,ea);h.release(S);h.release(Y);h.release(W)},P=this,aa=0;aa<I.length;aa++)M(I[aa]);z.clear();u.clear();w.clear()}};E.isCollection=n;b([l.property()],E.prototype,"length",
void 0);b([l.property()],E.prototype,"items",null);return E=F=b([l.subclass("esri.core.Collection")],E)}(l.declared(f,d));return G})},"esri/layers/vectorTiles/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(D,q,a,b){function g(f,h,d,c){var e;Array.isArray(h)?e=h:-1<h.indexOf(",")&&(e=h.split(/\s*,\s*/));if(e){var k=[];for(h=0;h<e.length;h++)k.push(g(f,e[h],d,c));k.remove=function(){for(var l=0;l<k.length;l++)k[l].remove()};return k}return c(f,h)}return function(){function f(){}
f.prototype.emit=function(h,d){if(this.hasEventListener(h))return d=d||{},d.target||(d.target=this),b.emit(this,h,d)};f.prototype.on=function(h,d){return g(this,h,d,function(c,e){return a.after(c,"on"+e,d,!0)})};f.prototype.hasEventListener=function(h){h="on"+h;return!(!this[h]||!this[h].after)};return f}()})},"esri/layers/vectorTiles/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k){function l(m){for(var n in m)q.hasOwnProperty(n)||(q[n]=m[n])}Object.defineProperty(q,"__esModule",{value:!0});l(a);l(b);l(g);l(f);l(h);l(d);l(c);l(e);l(k)})},"esri/layers/vectorTiles/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.aliasOf=function(b){return function(g,f){a.getPropertyMetadata(g,f).aliasOf=b}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/autoDestroy":function(){define(["require",
"exports","../metadata"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.autoDestroy=function(){return function(b,g,f){a.getMetadata(b).autoDestroy=!0;return b[g]}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.declared=function(a){for(var b=[],g=1;g<arguments.length;g++)b[g-1]=arguments[g];g=function(){return this||{}};g.__bases__=[a].concat(b);return g}})},
"esri/layers/vectorTiles/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(D,q,a,b,g,f){Object.defineProperty(q,"__esModule",{value:!0});g.getLogger("esri.core.accessorSupport.decorators.property");q.property=function(h){void 0===h&&(h={});return function(d,c){var e=d.constructor.prototype;if(e!==Function.prototype){var k=Object.getOwnPropertyDescriptor(d,c);k&&(k.get||k.set)?(h=b.clone(h),k.set&&(h.set=k.set),
k.get&&(h.get=k.get)):k&&k.hasOwnProperty("value")&&(h=b.clone(h),h.value=k.value);e=f.getPropertyMetadata(e,c);for(var l in h)k=h[l],Array.isArray(k)?e[l]=(e[l]||[]).concat(k):e[l]=k}}};q.propertyJSONMeta=function(h,d,c){h=f.getPropertyMetadata(h.constructor.prototype,c);h.json||(h.json={});h=h.json;void 0!==d&&(h.origins||(h.origins={}),h.origins[d]||(h.origins[d]={}),h=h.origins[d]);return h}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/reader":function(){define(["require","exports",
"../../object","./property"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.reader=function(g,f,h){if(void 0===f||Array.isArray(f)){var d=g;h=f;var c=[void 0]}else d=f,c=Array.isArray(g)?g:[g];return function(e,k,l){var m=e.constructor.prototype;c.forEach(function(n){n=b.propertyJSONMeta(e,n,d);n.read&&"object"!==typeof n.read&&(n.read={});a.setDeepValue("read.reader",m[k],n);h&&(n.read.source=(n.read.source||[]).concat(h))})}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/shared":function(){define(["require",
"exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.shared=function(a){return function(b,g){b[g]=a}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(D,q,a,b){function g(k,l){k.read&&("function"===typeof k.read?l.push(k.read):"object"===typeof k.read&&k.read.reader&&l.push(k.read.reader))}function f(k,l){k.write&&("function"===typeof k.write?l.push(k.write):"object"===typeof k.write&&
k.write.writer&&l.push(k.write.writer))}function h(k){var l=[];k=b.getPropertiesMetadata(k.prototype);if(!k)return l;for(var m in k){var n=k[m];n.cast&&l.push(n.cast);n.copy&&l.push(n.copy);if(n=n.json)if(g(n,l),f(n,l),n=n.origins)for(var p in n){var v=n[p];g(v,l);f(v,l)}}return l}function d(k){var l={values:{},descriptors:{}},m=["__bases__"],n=b.getPropertiesMetadata(k.prototype),p=h(k);Object.getOwnPropertyNames(k.prototype).filter(function(v){return-1!==m.indexOf(v)||n&&n.hasOwnProperty(v)||!e(Object.getOwnPropertyDescriptor(k.prototype,
v))&&-1!==p.indexOf(k.prototype[v])?!1:!0}).forEach(function(v){var r=Object.getOwnPropertyDescriptor(k.prototype,v);e(r)?l.descriptors[v]=r:l.values[v]=k.prototype[v]});return l}function c(k){var l=Object.getOwnPropertyNames(k),m=Object.getPrototypeOf(k.prototype).constructor,n=Object.getOwnPropertyNames(Function);n.push("__bases__");var p=Object.getOwnPropertyNames(m),v={values:{},descriptors:{}};l.filter(function(r){return-1!==n.indexOf(r)?!1:-1===p.indexOf(r)||m[r]!==k[r]?!0:!1}).forEach(function(r){var y=
Object.getOwnPropertyDescriptor(k,r);e(y)?v.descriptors[r]=y:v.values[r]=k[r]});return v}function e(k){return k&&!(!k.get&&!k.set)}Object.defineProperty(q,"__esModule",{value:!0});q.subclass=function(k){return function(l){var m=d(l),n=c(l);null!=k&&(m.values.declaredClass=k);l=a(l.__bases__,m.values);Object.defineProperties(l.prototype,m.descriptors);for(var p in n.values)l[p]=n.values[p];Object.defineProperties(l,n.descriptors);return l}}})},"esri/layers/vectorTiles/core/accessorSupport/decorators/writer":function(){define(["require",
"exports","../../object","./property"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.writer=function(g,f,h){if(void 0===f){var d=g;var c=[void 0]}else"string"!==typeof f?(d=g,c=[void 0],h=f):(d=f,c=Array.isArray(g)?g:[g]);return function(e,k,l){var m=e.constructor.prototype;c.forEach(function(n){n=b.propertyJSONMeta(e,n,d);n.write&&"object"!==typeof n.write&&(n.write={});h&&a.setDeepValue("write.target",h,n);a.setDeepValue("write.writer",m[k],n)})}}})},"esri/layers/vectorTiles/core/LRUMap":function(){define(["require",
"exports"],function(D,q){return function(){function a(b,g){void 0===b&&(b=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;this._cache=new Map;this._queue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=b;g&&(g.disposeFunction&&(this.disposeFunction=g.disposeFunction),g.sizeOfFunction&&(this.sizeOfFunction=g.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});a.prototype.clear=function(){var b=this;this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(g,f){b.disposeFunction(f,g)});this._cache.clear();this._sizeOf=0};a.prototype["delete"]=function(b){var g=this._cache.get(b);return this._cache["delete"](b)?(this._sizeOf-=this.sizeOfFunction(g),this._queue.splice(this._queue.indexOf(b),1),this.disposeFunction&&this.disposeFunction(b,g),!0):!1};a.prototype.forEach=
function(b,g){this._cache.forEach(b,g)};a.prototype.get=function(b){var g=this._cache.get(b);if(void 0!==g)return this._queue.splice(this._queue.indexOf(b),1),this._queue.unshift(b),g};a.prototype.has=function(b){return this._cache.has(b)};a.prototype.set=function(b,g){var f=this.get(b);void 0!==f?this._sizeOf-=this.sizeOfFunction(f):this._queue.unshift(b);this._sizeOf+=this.sizeOfFunction(g);this._cache.set(b,g);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&
this._sizeOf>this._maxSize;){var b=this._queue.pop(),g=this._cache.get(b);this._cache["delete"](b)&&(this._sizeOf-=this.sizeOfFunction(g),this.disposeFunction&&this.disposeFunction(b,g))}};return a}()})},"esri/layers/vectorTiles/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(D,q,a,b){function g(p,v){Array.isArray(p)?p.forEach(v):v(p)}function f(p,v,r,y,x){x=p.watch(v,function(z,u,w,t){y&&!y(z)||r.call(p,z,u,w,t)},x);g(v,function(z){var u=p.get(z);
y&&y(u)&&r.call(p,u,u,z,p)});return x}function h(p,v,r,y,x){function z(){A&&(A.remove(),A=null)}var u=!1,w=new a(z),t=new b;t.cancel=w.cancel;t.isCanceled=w.isCanceled;t.isFulfilled=w.isFulfilled;t.isRejected=w.isRejected;t.isResolved=w.isResolved;t.then=w.then;t.remove=z;Object.freeze(t);var A=f(p,v,function(G,B,E,F){u=!0;z();r&&r.call(p,G,B,E,F);w.resolve({value:G,oldValue:B,propertyName:E,target:F})},y,x);u&&A.remove();return t}function d(p){return!!p}function c(p){return!p}function e(p){return!0===
p}function k(p){return!1===p}function l(p){return void 0!==p}function m(p){return void 0===p}function n(p,v,r,y){var x=Array.isArray(v)?v:-1<v.indexOf(",")?v.split(","):[v];v=p.watch(v,r,y);x.forEach(function(z){z=z.trim();var u=p.get(z);r.call(p,u,u,z,p)});return v}Object.defineProperty(q,"__esModule",{value:!0});q.init=n;q.watch=function(p,v,r,y){return p.watch(v,r,y)};q.once=function(p,v,r,y){return h(p,v,r,null,y)};q.when=function(p,v,r,y){return f(p,v,r,d,y)};q.whenOnce=function(p,v,r,y){return h(p,
v,r,d,y)};q.whenNot=function(p,v,r,y){return f(p,v,r,c,y)};q.whenNotOnce=function(p,v,r,y){return h(p,v,r,c,y)};q.whenTrue=function(p,v,r,y){return f(p,v,r,e,y)};q.whenTrueOnce=function(p,v,r,y){return h(p,v,r,e,y)};q.whenFalse=function(p,v,r,y){return f(p,v,r,k,y)};q.whenFalseOnce=function(p,v,r,y){return h(p,v,r,k,y)};q.whenDefined=function(p,v,r,y){return f(p,v,r,l,y)};q.whenDefinedOnce=function(p,v,r,y){return h(p,v,r,l,y)};q.whenUndefined=function(p,v,r,y){return f(p,v,r,m,y)};q.whenUndefinedOnce=
function(p,v,r,y){return h(p,v,r,m,y)};q.pausable=function(p,v,r,y){var x=!1,z=p.watch(v,function(u,w,t,A){x||r.call(p,u,w,t,A)},y);return{remove:function(){z.remove()},pause:function(){x=!0},resume:function(){x=!1}}};q.on=function(p,v,r,y,x,z,u){function w(G){var B=t[G];B&&(z&&z(B.target,G,p,r),B.handle.remove(),delete t[G])}var t={},A=n(p,v,function(G,B,E){w(E);G&&"function"===typeof G.on&&(t[E]={handle:G.on(r,y),target:G},x&&x(G,E,p,r))},u);return{remove:function(){A.remove();for(var G in t)w(G)}}}})},
"esri/layers/vectorTiles/layers/support/Tilemap":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Error ../../core/lang ../../core/promiseUtils".split(" "),function(D,q,a,b,g,f,h){function d(c){if("vector-tile"===c.service.type)var e=c.service.url+"/tilemap/"+c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height;else e=c.service.tileServers,e=(e&&e.length?e[c.row%e.length]:c.service.url)+"/tilemap/"+c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height;(c=
c.service.query)&&(e=e+"?"+c);return e}Object.defineProperty(q,"__esModule",{value:!0});D=function(){function c(){this.location={left:0,top:0,width:0,height:0};this.byteSize=40}c.prototype.getAvailability=function(e,k){if(this._isAllAvailable)return"available";if(this._isAllUnvailable)return"unavailable";var l=(e-this.location.top)*this.location.width+(k-this.location.left),m=l>>3,n=this._tileAvailabilityBitSet;return 0>m||m>n.length?"unknown":n[m]&1<<l%8?"available":"unavailable"};c.prototype._updateFromData=
function(e){for(var k=!0,l=!0,m=new Uint8Array(Math.ceil(this.location.width*this.location.height/8)),n=0,p=0;p<e.length;p++){var v=p%8;e[p]?(l=!1,m[n]|=1<<v):k=!1;7===v&&++n}this._isAllUnvailable=l;this._isAllAvailable=k;this._isAllAvailable||this._isAllUnvailable||(this._tileAvailabilityBitSet=m,this.byteSize+=m.length)};c.fromDefinition=function(e,k){var l=e.service.request||b,m=e.row,n=e.col,p=e.width,v=e.height,r={query:{f:"json"},callbackParamName:"callback"};k=k?a({},r,k):r;return l(d(e),k).then(function(y){return y.data})["catch"](function(y){if(y&&
y.details&&422===y.details.httpStatus){y=[];for(var x=0,z=p*v;x<z;x++)y[x]=0;return{location:{top:m,left:n,width:p,height:v},valid:!0,data:y}}return h.reject(y)}).then(function(y){if(y.location&&(y.location.top!==m||y.location.left!==n||y.location.width!==p||y.location.height!==v))throw new g("tilemap:location-mismatch","Tilemap response for different location than requested",{response:y,definition:{top:m,left:n,width:p,height:v}});return c.fromJSON(y)})};c.fromJSON=function(e){c.validateJSON(e);
var k=new c;k.location=Object.freeze(f.clone(e.location));k._updateFromData(e.data);return Object.freeze(k)};c.validateJSON=function(e){if(!e||!e.location)throw new g("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new g("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new g("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new g("tilemap:data-mismatch","Data must be an array of numbers");
if(e.data.length!==e.location.width*e.location.height)throw new g("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");};return c}();q.Tilemap=D;q.tilemapDefinitionId=function(c){return c.level+"/"+c.row+"/"+c.col+"/"+c.width+"/"+c.height};q.tilemapDefinitionUrl=d;q["default"]=D})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(D,q,a,b){return function(){function g(f,h){this.styleJSON=
f;this.version=parseFloat(f.version);this.sprite=h?h.spriteUrl:f.sprite;this.glyphs=h?h.glyphsUrl:f.glyphs;if(a("stable-symbol-rendering")){var d=(f.layers||[]).filter(function(c){return c.layout&&c.layout["text-font"]})[0];d&&(f.layers||[]).forEach(function(c){c.layout&&c.layout["text-font"]&&(c.layout["text-font"]=d.layout["text-font"])})}this.layers=(f.layers||[]).map(g._create);this._identifyRefLayers()}g.prototype._identifyRefLayers=function(){for(var f=[],h=[],d=0,c=0,e=this.layers;c<e.length;c++){var k=
e[c];if(1===k.type){var l=k,m=k.sourceLayer;m+="|"+JSON.stringify(k.minzoom);m+="|"+JSON.stringify(k.maxzoom);m+="|"+JSON.stringify(k.filter);if(l.hasDataDrivenFill||l.hasDataDrivenOutline)m+="|"+JSON.stringify(d);f.push({key:m,layer:k})}2===k.type&&(l=k,m=k.sourceLayer,m+="|"+JSON.stringify(k.minzoom),m+="|"+JSON.stringify(k.maxzoom),m+="|"+JSON.stringify(k.filter),m+="|"+JSON.stringify(k.layout&&k.layout["line-cap"]),m+="|"+JSON.stringify(k.layout&&k.layout["line-join"]),l.hasDataDrivenLine&&(m+=
"|"+JSON.stringify(d)),h.push({key:m,layer:k}));++d}this._assignRefLayers(f);this._assignRefLayers(h)};g.prototype._assignRefLayers=function(f){f.sort(function(n,p){return n.key<p.key?-1:n.key>p.key?1:0});for(var h,d,c=f.length,e=0;e<c;e++){var k=f[e];if(k.key===h)k.layer.refLayerId=d;else if(h=k.key,d=k.layer.id,1===k.layer.type&&!k.layer.getPaintProperty("fill-outline-color"))for(var l=e+1;l<c;l++){var m=f[l];if(m.key===h){if(m.layer.getPaintProperty("fill-outline-color")){f[e]=m;f[l]=k;d=m.layer.id;
break}}else break}}};g._create=function(f,h,d){h=1-1/(d.length+1)*(1+h);switch(f.type){case "background":return new b.BackgroundStyleLayer(0,f,h);case "fill":return new b.FillStyleLayer(1,f,h);case "line":return new b.LineStyleLayer(2,f,h);case "symbol":return new b.SymbolStyleLayer(3,f,h);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new b.CircleStyleLayer(4,f,h)}throw Error("Unknown vector tile layer");};return g}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),
function(D,q,a,b,g,f,h){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function d(c,e,k){this.type=c;this.id=e.id;this.source=e.source;this.sourceLayer=e["source-layer"];this.minzoom=e.minzoom;this.maxzoom=e.maxzoom;this.filter=e.filter;this.layout=e.layout;this.paint=e.paint;this.z=k;switch(c){case 0:this._layoutDefinition=f.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=f.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=f.StyleDefinition.fillLayoutDefinition;
this._paintDefinition=f.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=f.StyleDefinition.lineLayoutDefinition;this._paintDefinition=f.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=f.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=f.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=f.StyleDefinition.circleLayoutDefinition,this._paintDefinition=f.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);
this._paintProperties=this._parsePaint(this.paint)}d.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=g.createFilter(this.filter)};d.prototype.getLayoutProperty=function(c){var e=this._layoutProperties;if(e)return e[c]};d.prototype.getPaintProperty=function(c){var e=this._paintProperties;if(e)return e[c]};d.prototype.getLayoutValue=function(c,e,k){var l,m=this._layoutProperties;m&&(m=m[c])&&(l=m.getValue(e,k));c=this._layoutDefinition[c];
void 0===l&&(l=c["default"]);"enum"===c.type&&(l=c.values.indexOf(l));return l};d.prototype.getPaintValue=function(c,e,k){var l,m=this._paintProperties;m&&(m=m[c])&&(l=m.getValue(e,k));c=this._paintDefinition[c];void 0===l&&(l=c["default"]);"enum"===c.type&&(l=c.values.indexOf(l));return l};d.prototype._parseLayout=function(c){var e={},k;for(k in c){var l=this._layoutDefinition[k];l&&(e[k]=new h(k,l,c[k]))}return e};d.prototype._parsePaint=function(c){var e={},k;for(k in c){var l=this._paintDefinition[k];
l&&(e[k]=new h(k,l,c[k]))}return e};return d}();q.StyleLayer=D;b=function(d){function c(e,k,l){return d.call(this,e,k,l)||this}a(c,d);return c}(D);q.BackgroundStyleLayer=b;b=function(d){function c(e,k,l){e=d.call(this,e,k,l)||this;k=e.getPaintProperty("fill-color");e.hasDataDrivenColor=k?k.isDataDriven:!1;k=e.getPaintProperty("fill-opacity");e.hasDataDrivenOpacity=k?k.isDataDriven:!1;e.hasDataDrivenFill=e.hasDataDrivenColor||e.hasDataDrivenOpacity;k=e.getPaintProperty("fill-outline-color");e.outlineUsesFillColor=
!k;e.hasDataDrivenOutlineColor=k?k.isDataDriven:!1;e.hasDataDrivenOutline=(k?e.hasDataDrivenOutlineColor:e.hasDataDrivenColor)||e.hasDataDrivenOpacity;return e}a(c,d);return c}(D);q.FillStyleLayer=b;b=function(d){function c(e,k,l){e=d.call(this,e,k,l)||this;k=e.getPaintProperty("line-color");e.hasDataDrivenColor=k?k.isDataDriven:!1;k=e.getPaintProperty("line-opacity");e.hasDataDrivenOpacity=k?k.isDataDriven:!1;k=e.getPaintProperty("line-width");e.hasDataDrivenWidth=k?k.isDataDriven:!1;e.hasDataDrivenLine=
e.hasDataDrivenColor||e.hasDataDrivenOpacity||e.hasDataDrivenWidth;return e}a(c,d);return c}(D);q.LineStyleLayer=b;b=function(d){function c(e,k,l){e=d.call(this,e,k,l)||this;k=e.getPaintProperty("icon-color");e.hasDataDrivenIconColor=k?k.isDataDriven:!1;k=e.getPaintProperty("icon-opacity");e.hasDataDrivenIconOpacity=k?k.isDataDriven:!1;k=e.getLayoutProperty("icon-size");e.hasDataDrivenIconSize=k?k.isDataDriven:!1;e.hasDataDrivenIcon=e.hasDataDrivenIconColor||e.hasDataDrivenIconOpacity||e.hasDataDrivenIconSize;
k=e.getPaintProperty("text-color");e.hasDataDrivenTextColor=k?k.isDataDriven:!1;k=e.getPaintProperty("text-opacity");e.hasDataDrivenTextOpacity=k?k.isDataDriven:!1;k=e.getLayoutProperty("text-size");e.hasDataDrivenTextSize=k?k.isDataDriven:!1;e.hasDataDrivenText=e.hasDataDrivenTextColor||e.hasDataDrivenTextOpacity||e.hasDataDrivenTextSize;return e}a(c,d);return c}(D);q.SymbolStyleLayer=b;D=function(d){function c(e,k,l){e=d.call(this,e,k,l)||this;k=e.getPaintProperty("circle-radius");e.hasDataDrivenRadius=
k?k.isDataDriven:!1;k=e.getPaintProperty("circle-color");e.hasDataDrivenColor=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-opacity");e.hasDataDrivenOpacity=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-stroke-width");e.hasDataDrivenStrokeWidth=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-stroke-color");e.hasDataDrivenStrokeColor=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-stroke-opacity");e.hasDataDrivenStrokeOpacity=k?k.isDataDriven:!1;k=e.getPaintProperty("circle-blur");e.hasDataDrivenBlur=
k?k.isDataDriven:!1;return e}a(c,d);return c}(D);q.CircleStyleLayer=D;D=function(){return function(d,c,e){this.cap=d.getLayoutValue("line-cap",c,e);this.join=d.getLayoutValue("line-join",c,e);this.miterLimit=d.getLayoutValue("line-miter-limit",c,e);this.roundLimit=d.getLayoutValue("line-round-limit",c,e)}}();q.LineLayout=D;D=function(){return function(d,c,e,k){this.allowOverlap=d.getLayoutValue("icon-allow-overlap",c,k);this.ignorePlacement=d.getLayoutValue("icon-ignore-placement",c,k);this.optional=
d.getLayoutValue("icon-optional",c,k);this.rotationAlignment=d.getLayoutValue("icon-rotation-alignment",c,k);this.size=d.getLayoutValue("icon-size",c,k);this.rotate=d.getLayoutValue("icon-rotate",c,k);this.padding=d.getLayoutValue("icon-padding",c,k);this.keepUpright=d.getLayoutValue("icon-keep-upright",c,k);this.offset=d.getLayoutValue("icon-offset",c,k);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();q.IconLayout=D;D=function(){return function(d,c,e,k){this.allowOverlap=d.getLayoutValue("text-allow-overlap",
c,k);this.ignorePlacement=d.getLayoutValue("text-ignore-placement",c,k);this.optional=d.getLayoutValue("text-optional",c,k);this.rotationAlignment=d.getLayoutValue("text-rotation-alignment",c,k);this.fontArray=d.getLayoutValue("text-font",c,k);this.maxWidth=d.getLayoutValue("text-max-width",c,k);this.lineHeight=d.getLayoutValue("text-line-height",c,k);this.letterSpacing=d.getLayoutValue("text-letter-spacing",c,k);this.justify=d.getLayoutValue("text-justify",c,k);this.anchor=d.getLayoutValue("text-anchor",
c,k);this.maxAngle=d.getLayoutValue("text-max-angle",c,k);this.size=d.getLayoutValue("text-size",c,k);this.rotate=d.getLayoutValue("text-rotate",c,k);this.padding=d.getLayoutValue("text-padding",c,k);this.keepUpright=d.getLayoutValue("text-keep-upright",c,k);this.transform=d.getLayoutValue("text-transform",c,k);this.offset=d.getLayoutValue("text-offset",c,k);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();q.TextLayout=D})},"esri/layers/vectorTiles/views/vectorTiles/style/Filter":function(){define(["require",
"exports"],function(D,q){return function(){function a(b,g,f){this._op=b;"$type"===g?(this._val=f instanceof Array?f.map(function(h){return a._types.indexOf(h)}):a._types.indexOf(f),this._op+=11):(this._key=g,this._val=f)}a.prototype.filter=function(b){switch(this._op){case 0:return this._val;case 1:return b.values[this._key]===this._val;case 2:return b.values[this._key]!==this._val;case 3:return b.values[this._key]<this._val;case 4:return b.values[this._key]>this._val;case 5:return b.values[this._key]<=
this._val;case 6:return b.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(b.values[this._key]);case 8:return-1===this._val.indexOf(b.values[this._key]);case 9:for(var g=0,f=this._val;g<f.length;g++){var h=f[g];if(h.filter(b))return!0}return!1;case 10:g=0;for(f=this._val;g<f.length;g++)if(h=f[g],!h.filter(b))return!1;return!0;case 11:g=0;for(f=this._val;g<f.length;g++)if(h=f[g],h.filter(b))return!1;return!0;case 12:return b.type===this._val;case 13:return b.type!==this._val;case 14:return b.type<
this._val;case 15:return b.type>this._val;case 16:return b.type>=this._val;case 17:return b.type<=this._val;case 18:return-1!==this._val.indexOf(b.type);case 19:return-1===this._val.indexOf(b.type);case 20:return void 0!==b.values[this._key];case 21:return void 0===b.values[this._key]}};a.createFilter=function(b){if(!b)return new a(0,void 0,!0);var g=b[0];if(1>=b.length)return new a(0,void 0,"any"!==g);switch(g){case "\x3d\x3d":return new a(1,b[1],b[2]);case "!\x3d":return new a(2,b[1],b[2]);case "\x3e":return new a(4,
b[1],b[2]);case "\x3c":return new a(3,b[1],b[2]);case "\x3e\x3d":return new a(6,b[1],b[2]);case "\x3c\x3d":return new a(5,b[1],b[2]);case "in":return new a(7,b[1],b.slice(2));case "!in":return new a(8,b[1],b.slice(2));case "any":return new a(9,void 0,b.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,b.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,b.slice(1).map(a.createFilter.bind(this)));case "has":return new a(20,b[1],void 0);case "!has":return new a(21,
b[1],void 0);default:throw Error("invalid operator: "+g);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){function b(){}b.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};b.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],
"default":"visible"}};b.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number","default":2},"line-round-limit":{type:"number","default":1.05}};b.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point",
"line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean","default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",
minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number",
"default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",
values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};b.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};b.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color",
"default":[0,0,0,1]},"background-pattern":{type:"string"}};b.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color","default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};b.linePaintDefinition=
{"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number",
"default":[]},"line-pattern":{type:"string"}};b.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",
minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};b.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number",
"default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};b.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},
"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"circle-stroke-width":{type:"number",minimum:0,"default":0},"circle-stroke-color":{type:"color","default":[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,"default":1}};return b}();q.StyleDefinition=a})},"esri/layers/vectorTiles/views/vectorTiles/style/StyleProperty":function(){define(["require",
"exports","../../../Color","../GeometryUtils"],function(D,q,a,b){return function(){function g(f,h,d){this.isDataDriven=!1;switch(h.type){case "number":f=!0;break;case "color":f=!0;d=g._parseColor(d);break;case "array":f="number"===h.value;break;default:f=!1}null==d&&(d=h["default"]);f&&"interval"===d.type&&(f=!1);var c=d&&d.stops&&0<d.stops.length;if(c)for(var e=0,k=d.stops;e<k.length;e++){var l=k[e];l[1]=this._validate(l[1],h)}if(this.isDataDriven=d?!!d.property:!1)if(void 0!==d["default"]&&(d["default"]=
this._validate(d["default"],h)),c)switch(d.type){case "identity":this.getValue=this._buildIdentity(d,h);break;case "categorical":this.getValue=this._buildCategorical(d,h);break;default:this.getValue=f?this._buildInterpolate(d,h):this._buildInterval(d,h)}else this.getValue=this._buildIdentity(d,h);else c?this.getValue=f?this._buildZoomInterpolate(d):this._buildZoomInterval(d):(d=this._validate(d,h),this.getValue=this._buildSimple(d))}g.prototype._validate=function(f,h){if("number"===h.type){if(f<h.minimum)return h.minimum;
if(f>h.maximum)return h.maximum}return f};g.prototype._buildSimple=function(f){return function(){return f}};g.prototype._buildIdentity=function(f,h){var d=this;return function(c,e){if(e){var k=e.values[f.property];"color"===h.type&&(k=g._parseColor(k))}void 0===k&&(k=f["default"]);return void 0!==k?d._validate(k,h):h["default"]}};g.prototype._buildCategorical=function(f,h){var d=this;return function(c,e){var k;e&&(k=e.values[f.property]);k=d._categorical(k,f.stops);return void 0!==k?k:void 0!==f["default"]?
f["default"]:h["default"]}};g.prototype._buildInterval=function(f,h){var d=this;return function(c,e){var k;e&&(k=e.values[f.property]);return"number"===typeof k?d._interval(k,f.stops):void 0!==f["default"]?f["default"]:h["default"]}};g.prototype._buildInterpolate=function(f,h){var d=this;return function(c,e){var k;e&&(k=e.values[f.property]);return"number"===typeof k?d._interpolate(k,f.stops,f.base||1):void 0!==f["default"]?f["default"]:h["default"]}};g.prototype._buildZoomInterpolate=function(f){var h=
this;return function(d){return h._interpolate(d,f.stops,f.base||1)}};g.prototype._buildZoomInterval=function(f){var h=this;return function(d){return h._interval(d,f.stops)}};g.prototype._categorical=function(f,h){for(var d=h.length,c=0;c<d;c++)if(h[c][0]===f)return h[c][1]};g.prototype._interval=function(f,h){for(var d=h.length,c=0,e=0;e<d;e++)if(h[e][0]<=f)c=e;else break;return h[c][1]};g.prototype._interpolate=function(f,h,d){for(var c,e,k=h.length,l=0;l<k;l++){var m=h[l];if(m[0]<=f)c=m;else{e=
m;break}}if(c&&e){l=e[0]-c[0];f-=c[0];d=1===d?f/l:(Math.pow(d,f)-1)/(Math.pow(d,l)-1);if(Array.isArray(c[1])){c=c[1];e=e[1];f=[];for(l=0;l<c.length;l++)f.push(b.interpolate(c[l],e[l],d));return f}return b.interpolate(c[1],e[1],d)}if(c)return c[1];if(e)return e[1]};g._isEmpty=function(f){for(var h in f)if(f.hasOwnProperty(h))return!1;return!0};g._parseColor=function(f){if(Array.isArray(f))return f;if("string"===typeof f){if(f=new a(f),!this._isEmpty(f))return a.toUnitRGBA(f)}else return f&&f["default"]&&
(f["default"]=g._parseColor(f["default"])),f&&f.stops&&(f.stops=f.stops.map(function(h){return[h[0],g._parseColor(h[1])]})),f};return g}()})},"esri/layers/vectorTiles/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(D,q,a){function b(h){return Math.max(0,Math.min(q.ensureInteger(h),255))}var g=D([a],{declaredClass:"esri.Color",toJSON:function(){return[b(this.r),b(this.g),b(this.b),1<this.a?this.a:b(255*this.a)]},clone:function(){return new g(this.toRgba())}});
g.toJSON=function(h){return h&&[b(h.r),b(h.g),b(h.b),1<h.a?h.a:b(255*h.a)]};g.fromJSON=function(h){return h&&new g([h[0],h[1],h[2],h[3]/255])};g.toUnitRGB=function(h){return[h.r/255,h.g/255,h.b/255]};g.toUnitRGBA=function(h){return[h.r/255,h.g/255,h.b/255,null!=h.a?h.a:1]};var f="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(D=0;D<f.length;D++)g[f[D]]=a[f[D]];g.named.rebeccapurple=[102,51,153];return g})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color",
"./_base/array"],function(D,q,a,b){var g={};q.setObject("dojo.colors",g);var f=function(d,c,e){0>e&&++e;1<e&&--e;var k=6*e;return 1>k?d+(c-d)*k:1>2*e?c:2>3*e?d+(c-d)*(2/3-e)*6:d};D.colorFromRgb=a.fromRgb=function(d,c){var e=d.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(e){var k=e[2].split(/\s*,\s*/),l=k.length;e=e[1];if("rgb"==e&&3==l||"rgba"==e&&4==l)return e=k[0],"%"==e.charAt(e.length-1)?(e=b.map(k,function(p){return 2.56*parseFloat(p)}),4==l&&(e[3]=k[3]),a.fromArray(e,c)):a.fromArray(k,
c);if("hsl"==e&&3==l||"hsla"==e&&4==l){e=(parseFloat(k[0])%360+360)%360/360;var m=parseFloat(k[1])/100,n=parseFloat(k[2])/100;m=.5>=n?n*(m+1):n+m-n*m;n=2*n-m;e=[256*f(n,m,e+1/3),256*f(n,m,e),256*f(n,m,e-1/3),1];4==l&&(e[3]=k[3]);return a.fromArray(e,c)}}return null};var h=function(d,c,e){d=Number(d);return isNaN(d)?e:d<c?c:d>e?e:d};a.prototype.sanitize=function(){this.r=Math.round(h(this.r,0,255));this.g=Math.round(h(this.g,0,255));this.b=Math.round(h(this.b,0,255));this.a=h(this.a,0,1);return this};
g.makeGrey=a.makeGrey=function(d,c){return a.fromArray([d,d,d,c])};q.mixin(a.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,
0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,
105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],
lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,
85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,
112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,
191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return a})},"esri/layers/vectorTiles/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(D,q){function a(g,f){g%=f;return 0<=g?g:g+f}Object.defineProperty(q,"__esModule",{value:!0});q.C_INFINITY=Number.POSITIVE_INFINITY;q.C_PI=Math.PI;q.C_2PI=2*q.C_PI;q.C_PI_BY_2=q.C_PI/2;q.C_RAD_TO_256=128/q.C_PI;q.C_256_TO_RAD=q.C_PI/128;q.C_DEG_TO_256=
256/360;q.C_DEG_TO_RAD=q.C_PI/180;q.C_SQRT2=1.414213562;q.C_SQRT2_INV=1/q.C_SQRT2;var b=1/Math.LN2;q.positiveMod=a;q.radToByte=function(g){return a(g*q.C_RAD_TO_256,256)};q.degToByte=function(g){return a(g*q.C_DEG_TO_256,256)};q.log2=function(g){return Math.log(g)*b};q.sqr=function(g){return g*g};q.clamp=function(g,f,h){return Math.min(Math.max(g,f),h)};q.interpolate=function(g,f,h){return g*(1-h)+f*h};q.between=function(g,f,h){return g>=f&&g<=h||g>=h&&g<=f}})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileContainer":function(){define("require exports ../../core/tsSupport/extendsHelper dojo/has ../../core/promiseUtils ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec3 ../2d/engine/Container ../2d/engine/webgl/enums ../2d/engine/webgl/WGLPainter ./GeometryUtils ./renderers/Renderer".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l){return function(m){function n(){var p=m.call(this)||this;p.isInitialized=!1;p._displayWidth=0;p._displayHeight=0;p._pointToCallbacks=new Map;p._tileCoordinateScale=h.create();p._orientationVec=h.create();p._displayScale=h.create();p._orientationVec.set([0,0,1]);p._defaultTransform=f.create();return p}a(n,m);n.prototype.initialize=function(p,v,r,y){this._renderer=new l;this._renderer.initialize(p,v);this._tileInfoView=y;this._tileInfo=r;this.isInitialized=!0};n.prototype.destroy=
function(){this._renderer&&(this._renderer.dispose(),this._renderer=null)};n.prototype.hittest=function(p,v){var r=this,y=[p,v];return g.create(function(x,z){r._pointToCallbacks.set(y,{resolve:x,reject:z});r.requestRender()},function(){r._pointToCallbacks.has(y)&&r._pointToCallbacks["delete"](y)})};n.prototype.prepareChildrenRenderParameters=function(p){var v=p.state;if(!v||!this._tileInfo||!this.isInitialized)return p;p.displayLevel=this._tileInfo.scaleToZoom(v.scale);p.requiredLevel=this._tileInfoView.getSmallestInfoForScale(v.scale).level;
p.renderer=this._renderer;return p};n.prototype.renderChildren=function(p){var v=this;if(0!==this.children.length&&this.isInitialized&&p&&p.state){var r=e["default"].toWGLDrawPhases(p.drawPhase);if(!(0<r.length&&r[0]===c.WGLDrawPhase.LABEL)){this.sortChildren(function(u,w){return u.key.level-w.key.level});r=this.children.length;for(var y=1;y<=r;y++){var x=this.children[y-1];x.attached&&(x.stencilData.reference=y,x.stencilData.mask=255)}this._updateTilesTransform(p.state,this._tileInfoView.getSmallestInfoForScale(p.state.scale).level,
this.children);r=p.context;r.setDepthWriteEnabled(!0);this._renderer.setStateParams(p.state,p.pixelRatio,p.displayLevel);this._renderer.drawClippingMasks(r,this.children);r.setStencilWriteMask(0);r.setBlendFunctionSeparate(1,771,1,771);r.setStencilOp(7680,7680,7681);r.setDepthFunction(515);r.setBlendingEnabled(!1);r.setStencilTestEnabled(!0);r.setDepthTestEnabled(!0);r.setDepthWriteEnabled(!0);p.drawphase=0;m.prototype.renderChildren.call(this,p);r.setDepthWriteEnabled(!1);r.setBlendingEnabled(!0);
p.drawphase=1;m.prototype.renderChildren.call(this,p);p.drawphase=2;m.prototype.renderChildren.call(this,p);r.setStencilTestEnabled(!1);r.setDepthTestEnabled(!1);if(b("esri-vector-tiles-debug"))for(y=0,x=this.children;y<x.length;y++){var z=x[y];z.attached&&z.visible&&this._renderer.renderTileInfo(r,z)}0<this._pointToCallbacks.size&&(this._pointToCallbacks.forEach(function(u,w){u.resolve(v._hitTest(p,w[0],w[1]))}),this._pointToCallbacks.clear());this._renderer.needsRedraw()&&this.requestRender()}}};
n.prototype.removeAllChildren=function(){for(var p=0;p<this.children.length;p++)this.children[p].dispose();m.prototype.removeAllChildren.call(this)};n.prototype._hitTest=function(p,v,r){var y=this._tileInfoView.getClosestInfoForScale(p.state.scale).level,x=[0,0];p.state.toMap(x,[v,r]);var z=p.state.clone(),u=z.viewpoint.clone(),w=u.targetGeometry;w.x=x[0];w.y=x[1];u.targetGeometry=w;z.viewpoint=u;z.size=[3,3];this._renderer.setStateParams(z,p.pixelRatio,p.displayLevel);return(p=this._renderer.hitTest({drawPhase:0,
pixelRatio:p.pixelRatio,stationary:p.stationary,opacity:p.opacity,context:p.context,displayLevel:p.displayLevel,requiredLevel:p.requiredLevel,renderer:p.renderer,layerOpacity:p.layerOpacity,state:z,drawphase:3,painter:null},v,r,this.children,y,3,this._updateTilesTransform.bind(this)))&&0!==p.length?p[0]:null};n.prototype._updateTilesTransform=function(p,v,r){var y=1/p.width,x=1/p.height,z=[0,0];this._calculateRelativeViewProjMat(this._tileInfo.lodAt(v).resolution,p.resolution,p.rotation,this._tileInfo.size[1],
4096,p.width,p.height,this._defaultTransform);for(var u=0;u<r.length;u++){var w=r[u];p.toScreen(z,w.coords);z[1]=p.height-z[1];w.tileTransform.displayCoord[0]=2*z[0]*y-1;w.tileTransform.displayCoord[1]=2*z[1]*x-1;w.key.level===v&&4096===w.coordRange?w.tileTransform.transform.set(this._defaultTransform):this._calculateRelativeViewProjMat(this._tileInfo.lodAt(w.key.level).resolution,p.resolution,p.rotation,this._tileInfo.size[1],w.coordRange,p.width,p.height,w.tileTransform.transform)}};n.prototype._calculateRelativeViewProjMat=
function(p,v,r,y,x,z,u,w){var t=.125;512!==y&&4096!==x&&(t=y/x);p=p/v*t;this._tileCoordinateScale.set([p,p,1]);if(z!==this._displayWidth||u!==this._displayHeight)this._displayScale.set([2/z,-2/u,1]),this._displayWidth=z,this._displayHeight=u;f.identity(w);f.scale(w,w,this._tileCoordinateScale);f.rotate(w,w,-r*k.C_DEG_TO_RAD,this._orientationVec);f.scale(w,w,this._displayScale);f.transpose(w,w)};return n}(d)})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat4":function(){define(["./common"],function(D){var q=
{scalar:{},SIMD:{},create:function(){var a=new D.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new D.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=
b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y){var x=new D.ARRAY_TYPE(16);x[0]=a;x[1]=b;x[2]=g;x[3]=f;x[4]=h;x[5]=d;x[6]=c;x[7]=e;x[8]=k;x[9]=l;x[10]=m;x[11]=n;x[12]=p;x[13]=v;x[14]=r;x[15]=y;return x},set:function(a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y,x){a[0]=b;a[1]=g;a[2]=f;a[3]=h;a[4]=d;a[5]=c;a[6]=e;a[7]=k;a[8]=l;a[9]=m;a[10]=n;a[11]=p;a[12]=v;a[13]=r;a[14]=y;a[15]=x;return a},
identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}};q.scalar.transpose=function(a,b){if(a===b){var g=b[1],f=b[2],h=b[3],d=b[6],c=b[7],e=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=g;a[6]=b[9];a[7]=b[13];a[8]=f;a[9]=d;a[11]=b[14];a[12]=h;a[13]=c;a[14]=e}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],
a[14]=b[11],a[15]=b[15];return a};q.SIMD.transpose=function(a,b){var g=SIMD.Float32x4.load(b,0);var f=SIMD.Float32x4.load(b,4);var h=SIMD.Float32x4.load(b,8);var d=SIMD.Float32x4.load(b,12);var c=SIMD.Float32x4.shuffle(g,f,0,1,4,5);var e=SIMD.Float32x4.shuffle(h,d,0,1,4,5);var k=SIMD.Float32x4.shuffle(c,e,0,2,4,6);c=SIMD.Float32x4.shuffle(c,e,1,3,5,7);SIMD.Float32x4.store(a,0,k);SIMD.Float32x4.store(a,4,c);c=SIMD.Float32x4.shuffle(g,f,2,3,6,7);e=SIMD.Float32x4.shuffle(h,d,2,3,6,7);g=SIMD.Float32x4.shuffle(c,
e,0,2,4,6);f=SIMD.Float32x4.shuffle(c,e,1,3,5,7);SIMD.Float32x4.store(a,8,g);SIMD.Float32x4.store(a,12,f);return a};q.transpose=D.USE_SIMD?q.SIMD.transpose:q.scalar.transpose;q.scalar.invert=function(a,b){var g=b[0],f=b[1],h=b[2],d=b[3],c=b[4],e=b[5],k=b[6],l=b[7],m=b[8],n=b[9],p=b[10],v=b[11],r=b[12],y=b[13],x=b[14],z=b[15],u=g*e-f*c,w=g*k-h*c,t=g*l-d*c,A=f*k-h*e,G=f*l-d*e,B=h*l-d*k,E=m*y-n*r,F=m*x-p*r,I=m*z-v*r,M=n*x-p*y,P=n*z-v*y,aa=p*z-v*x,ca=u*aa-w*P+t*M+A*I-G*F+B*E;if(!ca)return null;ca=1/ca;
a[0]=(e*aa-k*P+l*M)*ca;a[1]=(h*P-f*aa-d*M)*ca;a[2]=(y*B-x*G+z*A)*ca;a[3]=(p*G-n*B-v*A)*ca;a[4]=(k*I-c*aa-l*F)*ca;a[5]=(g*aa-h*I+d*F)*ca;a[6]=(x*t-r*B-z*w)*ca;a[7]=(m*B-p*t+v*w)*ca;a[8]=(c*P-e*I+l*E)*ca;a[9]=(f*I-g*P-d*E)*ca;a[10]=(r*G-y*t+z*u)*ca;a[11]=(n*t-m*G-v*u)*ca;a[12]=(e*F-c*M-k*E)*ca;a[13]=(g*M-f*F+h*E)*ca;a[14]=(y*w-r*A-x*u)*ca;a[15]=(m*A-n*w+p*u)*ca;return a};q.SIMD.invert=function(a,b){var g=SIMD.Float32x4.load(b,0);var f=SIMD.Float32x4.load(b,4);var h=SIMD.Float32x4.load(b,8);var d=SIMD.Float32x4.load(b,
12);var c=SIMD.Float32x4.shuffle(g,f,0,1,4,5);var e=SIMD.Float32x4.shuffle(h,d,0,1,4,5);var k=SIMD.Float32x4.shuffle(c,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,c,1,3,5,7);c=SIMD.Float32x4.shuffle(g,f,2,3,6,7);var l=SIMD.Float32x4.shuffle(h,d,2,3,6,7);var m=SIMD.Float32x4.shuffle(c,l,0,2,4,6);l=SIMD.Float32x4.shuffle(l,c,1,3,5,7);c=SIMD.Float32x4.mul(m,l);c=SIMD.Float32x4.swizzle(c,1,0,3,2);g=SIMD.Float32x4.mul(e,c);f=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,
c),g);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),f);f=SIMD.Float32x4.swizzle(f,2,3,0,1);c=SIMD.Float32x4.mul(e,m);c=SIMD.Float32x4.swizzle(c,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),g);d=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(l,c));d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),l);c=SIMD.Float32x4.swizzle(c,1,0,3,2);m=SIMD.Float32x4.swizzle(m,
2,3,0,1);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,c),g);h=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(m,c));h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);c=SIMD.Float32x4.mul(k,e);c=SIMD.Float32x4.swizzle(c,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,c),d);c=SIMD.Float32x4.swizzle(c,2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),h);d=SIMD.Float32x4.sub(d,
SIMD.Float32x4.mul(m,c));c=SIMD.Float32x4.mul(k,l);c=SIMD.Float32x4.swizzle(c,1,0,3,2);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(m,c));h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),h);c=SIMD.Float32x4.swizzle(c,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,c),f);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,c));c=SIMD.Float32x4.mul(k,m);c=SIMD.Float32x4.swizzle(c,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(e,c));c=SIMD.Float32x4.swizzle(c,2,
3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c));d=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),d);k=SIMD.Float32x4.mul(k,g);k=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(k,2,3,0,1),k);k=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(k,1,0,3,2),k);c=SIMD.Float32x4.reciprocalApproximation(k);k=SIMD.Float32x4.sub(SIMD.Float32x4.add(c,c),SIMD.Float32x4.mul(k,SIMD.Float32x4.mul(c,c)));k=SIMD.Float32x4.swizzle(k,0,0,0,0);if(!k)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(k,g));SIMD.Float32x4.store(a,
4,SIMD.Float32x4.mul(k,f));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(k,h));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(k,d));return a};q.invert=D.USE_SIMD?q.SIMD.invert:q.scalar.invert;q.scalar.adjoint=function(a,b){var g=b[0],f=b[1],h=b[2],d=b[3],c=b[4],e=b[5],k=b[6],l=b[7],m=b[8],n=b[9],p=b[10],v=b[11],r=b[12],y=b[13],x=b[14],z=b[15];a[0]=e*(p*z-v*x)-n*(k*z-l*x)+y*(k*v-l*p);a[1]=-(f*(p*z-v*x)-n*(h*z-d*x)+y*(h*v-d*p));a[2]=f*(k*z-l*x)-e*(h*z-d*x)+y*(h*l-d*k);a[3]=-(f*(k*v-l*p)-e*(h*v-d*p)+n*(h*
l-d*k));a[4]=-(c*(p*z-v*x)-m*(k*z-l*x)+r*(k*v-l*p));a[5]=g*(p*z-v*x)-m*(h*z-d*x)+r*(h*v-d*p);a[6]=-(g*(k*z-l*x)-c*(h*z-d*x)+r*(h*l-d*k));a[7]=g*(k*v-l*p)-c*(h*v-d*p)+m*(h*l-d*k);a[8]=c*(n*z-v*y)-m*(e*z-l*y)+r*(e*v-l*n);a[9]=-(g*(n*z-v*y)-m*(f*z-d*y)+r*(f*v-d*n));a[10]=g*(e*z-l*y)-c*(f*z-d*y)+r*(f*l-d*e);a[11]=-(g*(e*v-l*n)-c*(f*v-d*n)+m*(f*l-d*e));a[12]=-(c*(n*x-p*y)-m*(e*x-k*y)+r*(e*p-k*n));a[13]=g*(n*x-p*y)-m*(f*x-h*y)+r*(f*p-h*n);a[14]=-(g*(e*x-k*y)-c*(f*x-h*y)+r*(f*k-h*e));a[15]=g*(e*p-k*n)-c*
(f*p-h*n)+m*(f*k-h*e);return a};q.SIMD.adjoint=function(a,b){var g=SIMD.Float32x4.load(b,0);var f=SIMD.Float32x4.load(b,4);var h=SIMD.Float32x4.load(b,8);var d=SIMD.Float32x4.load(b,12);var c=SIMD.Float32x4.shuffle(g,f,0,1,4,5);var e=SIMD.Float32x4.shuffle(h,d,0,1,4,5);var k=SIMD.Float32x4.shuffle(c,e,0,2,4,6);e=SIMD.Float32x4.shuffle(e,c,1,3,5,7);c=SIMD.Float32x4.shuffle(g,f,2,3,6,7);f=SIMD.Float32x4.shuffle(h,d,2,3,6,7);g=SIMD.Float32x4.shuffle(c,f,0,2,4,6);f=SIMD.Float32x4.shuffle(f,c,1,3,5,7);
c=SIMD.Float32x4.mul(g,f);c=SIMD.Float32x4.swizzle(c,1,0,3,2);h=SIMD.Float32x4.mul(e,c);d=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,c),h);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),d);d=SIMD.Float32x4.swizzle(d,2,3,0,1);c=SIMD.Float32x4.mul(e,g);c=SIMD.Float32x4.swizzle(c,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),h);var l=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(f,
c));l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),f);c=SIMD.Float32x4.swizzle(c,1,0,3,2);g=SIMD.Float32x4.swizzle(g,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,c),h);var m=SIMD.Float32x4.mul(k,c);c=SIMD.Float32x4.swizzle(c,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(g,c));m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(k,c),m);m=SIMD.Float32x4.swizzle(m,2,3,0,1);c=SIMD.Float32x4.mul(k,e);c=SIMD.Float32x4.swizzle(c,
1,0,3,2);m=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),m);l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(g,c),l);c=SIMD.Float32x4.swizzle(c,2,3,0,1);m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,c),m);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(g,c));c=SIMD.Float32x4.mul(k,f);c=SIMD.Float32x4.swizzle(c,1,0,3,2);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(g,c));m=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),m);c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(g,c),d);m=SIMD.Float32x4.sub(m,
SIMD.Float32x4.mul(e,c));c=SIMD.Float32x4.mul(k,g);c=SIMD.Float32x4.swizzle(c,1,0,3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),d);l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,c));c=SIMD.Float32x4.swizzle(c,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(f,c));l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,c),l);SIMD.Float32x4.store(a,0,h);SIMD.Float32x4.store(a,4,d);SIMD.Float32x4.store(a,8,m);SIMD.Float32x4.store(a,12,l);return a};q.adjoint=D.USE_SIMD?q.SIMD.adjoint:q.scalar.adjoint;q.determinant=
function(a){var b=a[0],g=a[1],f=a[2],h=a[3],d=a[4],c=a[5],e=a[6],k=a[7],l=a[8],m=a[9],n=a[10],p=a[11],v=a[12],r=a[13],y=a[14];a=a[15];return(b*c-g*d)*(n*a-p*y)-(b*e-f*d)*(m*a-p*r)+(b*k-h*d)*(m*y-n*r)+(g*e-f*c)*(l*a-p*v)-(g*k-h*c)*(l*y-n*v)+(f*k-h*e)*(l*r-m*v)};q.SIMD.multiply=function(a,b,g){var f=SIMD.Float32x4.load(b,0),h=SIMD.Float32x4.load(b,4),d=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var c=SIMD.Float32x4.load(g,0);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,
0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,0,c);c=SIMD.Float32x4.load(g,4);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),d),
SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,4,c);c=SIMD.Float32x4.load(g,8);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),b))));SIMD.Float32x4.store(a,8,c);g=SIMD.Float32x4.load(g,12);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,
0,0,0,0),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,1,1,1,1),h),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,2,2,2,2),d),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(g,3,3,3,3),b))));SIMD.Float32x4.store(a,12,f);return a};q.scalar.multiply=function(a,b,g){var f=b[0],h=b[1],d=b[2],c=b[3],e=b[4],k=b[5],l=b[6],m=b[7],n=b[8],p=b[9],v=b[10],r=b[11],y=b[12],x=b[13],z=b[14];b=b[15];var u=g[0],w=g[1],t=g[2],A=g[3];a[0]=u*f+w*e+t*n+A*y;a[1]=u*h+w*k+t*p+A*x;a[2]=u*d+w*
l+t*v+A*z;a[3]=u*c+w*m+t*r+A*b;u=g[4];w=g[5];t=g[6];A=g[7];a[4]=u*f+w*e+t*n+A*y;a[5]=u*h+w*k+t*p+A*x;a[6]=u*d+w*l+t*v+A*z;a[7]=u*c+w*m+t*r+A*b;u=g[8];w=g[9];t=g[10];A=g[11];a[8]=u*f+w*e+t*n+A*y;a[9]=u*h+w*k+t*p+A*x;a[10]=u*d+w*l+t*v+A*z;a[11]=u*c+w*m+t*r+A*b;u=g[12];w=g[13];t=g[14];A=g[15];a[12]=u*f+w*e+t*n+A*y;a[13]=u*h+w*k+t*p+A*x;a[14]=u*d+w*l+t*v+A*z;a[15]=u*c+w*m+t*r+A*b;return a};q.multiply=D.USE_SIMD?q.SIMD.multiply:q.scalar.multiply;q.mul=q.multiply;q.scalar.translate=function(a,b,g){var f=
g[0],h=g[1];g=g[2];if(b===a)a[12]=b[0]*f+b[4]*h+b[8]*g+b[12],a[13]=b[1]*f+b[5]*h+b[9]*g+b[13],a[14]=b[2]*f+b[6]*h+b[10]*g+b[14],a[15]=b[3]*f+b[7]*h+b[11]*g+b[15];else{var d=b[0];var c=b[1];var e=b[2];var k=b[3];var l=b[4];var m=b[5];var n=b[6];var p=b[7];var v=b[8];var r=b[9];var y=b[10];var x=b[11];a[0]=d;a[1]=c;a[2]=e;a[3]=k;a[4]=l;a[5]=m;a[6]=n;a[7]=p;a[8]=v;a[9]=r;a[10]=y;a[11]=x;a[12]=d*f+l*h+v*g+b[12];a[13]=c*f+m*h+r*g+b[13];a[14]=e*f+n*h+y*g+b[14];a[15]=k*f+p*h+x*g+b[15]}return a};q.SIMD.translate=
function(a,b,g){var f=SIMD.Float32x4.load(b,0),h=SIMD.Float32x4.load(b,4),d=SIMD.Float32x4.load(b,8),c=SIMD.Float32x4.load(b,12);g=SIMD.Float32x4(g[0],g[1],g[2],0);b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,0,0,0,0));h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(g,1,1,1,1));d=SIMD.Float32x4.mul(d,SIMD.Float32x4.swizzle(g,2,2,2,2));b=SIMD.Float32x4.add(f,SIMD.Float32x4.add(h,
SIMD.Float32x4.add(d,c)));SIMD.Float32x4.store(a,12,b);return a};q.translate=D.USE_SIMD?q.SIMD.translate:q.scalar.translate;q.scalar.scale=function(a,b,g){var f=g[0],h=g[1];g=g[2];a[0]=b[0]*f;a[1]=b[1]*f;a[2]=b[2]*f;a[3]=b[3]*f;a[4]=b[4]*h;a[5]=b[5]*h;a[6]=b[6]*h;a[7]=b[7]*h;a[8]=b[8]*g;a[9]=b[9]*g;a[10]=b[10]*g;a[11]=b[11]*g;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};q.SIMD.scale=function(a,b,g){g=SIMD.Float32x4(g[0],g[1],g[2],0);var f=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,
0,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,0,0,0,0)));f=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,1,1,1,1)));f=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(g,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};q.scale=D.USE_SIMD?q.SIMD.scale:q.scalar.scale;q.rotate=function(a,b,g,f){var h=f[0],d=f[1];f=f[2];var c=Math.sqrt(h*h+d*d+f*f);if(Math.abs(c)<D.EPSILON)return null;c=
1/c;h*=c;d*=c;f*=c;var e=Math.sin(g);var k=Math.cos(g);var l=1-k;g=b[0];c=b[1];var m=b[2];var n=b[3];var p=b[4];var v=b[5];var r=b[6];var y=b[7];var x=b[8];var z=b[9];var u=b[10];var w=b[11];var t=h*h*l+k;var A=d*h*l+f*e;var G=f*h*l-d*e;var B=h*d*l-f*e;var E=d*d*l+k;var F=f*d*l+h*e;var I=h*f*l+d*e;h=d*f*l-h*e;d=f*f*l+k;a[0]=g*t+p*A+x*G;a[1]=c*t+v*A+z*G;a[2]=m*t+r*A+u*G;a[3]=n*t+y*A+w*G;a[4]=g*B+p*E+x*F;a[5]=c*B+v*E+z*F;a[6]=m*B+r*E+u*F;a[7]=n*B+y*E+w*F;a[8]=g*I+p*h+x*d;a[9]=c*I+v*h+z*d;a[10]=m*I+
r*h+u*d;a[11]=n*I+y*h+w*d;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};q.scalar.rotateX=function(a,b,g){var f=Math.sin(g);g=Math.cos(g);var h=b[4],d=b[5],c=b[6],e=b[7],k=b[8],l=b[9],m=b[10],n=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=h*g+k*f;a[5]=d*g+l*f;a[6]=c*g+m*f;a[7]=e*g+n*f;a[8]=k*g-h*f;a[9]=l*g-d*f;a[10]=m*g-c*f;a[11]=n*g-e*f;return a};q.SIMD.rotateX=function(a,b,g){var f=SIMD.Float32x4.splat(Math.sin(g));
g=SIMD.Float32x4.splat(Math.cos(g));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,g),SIMD.Float32x4.mul(b,f)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,g),SIMD.Float32x4.mul(h,f)));return a};q.rotateX=D.USE_SIMD?q.SIMD.rotateX:q.scalar.rotateX;q.scalar.rotateY=function(a,b,g){var f=Math.sin(g);g=Math.cos(g);
var h=b[0],d=b[1],c=b[2],e=b[3],k=b[8],l=b[9],m=b[10],n=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=h*g-k*f;a[1]=d*g-l*f;a[2]=c*g-m*f;a[3]=e*g-n*f;a[8]=h*f+k*g;a[9]=d*f+l*g;a[10]=c*f+m*g;a[11]=e*f+n*g;return a};q.SIMD.rotateY=function(a,b,g){var f=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,
0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,g),SIMD.Float32x4.mul(b,f)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,f),SIMD.Float32x4.mul(b,g)));return a};q.rotateY=D.USE_SIMD?q.SIMD.rotateY:q.scalar.rotateY;q.scalar.rotateZ=function(a,b,g){var f=Math.sin(g);g=Math.cos(g);var h=b[0],d=b[1],c=b[2],e=b[3],k=b[4],l=b[5],m=b[6],n=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);
a[0]=h*g+k*f;a[1]=d*g+l*f;a[2]=c*g+m*f;a[3]=e*g+n*f;a[4]=k*g-h*f;a[5]=l*g-d*f;a[6]=m*g-c*f;a[7]=n*g-e*f;return a};q.SIMD.rotateZ=function(a,b,g){var f=SIMD.Float32x4.splat(Math.sin(g));g=SIMD.Float32x4.splat(Math.cos(g));b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var h=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(h,g),SIMD.Float32x4.mul(b,f)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,
g),SIMD.Float32x4.mul(h,f)));return a};q.rotateZ=D.USE_SIMD?q.SIMD.rotateZ:q.scalar.rotateZ;q.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};q.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromRotation=function(a,b,g){var f=g[0],h=g[1];g=g[2];var d=Math.sqrt(f*f+
h*h+g*g);if(Math.abs(d)<D.EPSILON)return null;d=1/d;f*=d;h*=d;g*=d;d=Math.sin(b);b=Math.cos(b);var c=1-b;a[0]=f*f*c+b;a[1]=h*f*c+g*d;a[2]=g*f*c-h*d;a[3]=0;a[4]=f*h*c-g*d;a[5]=h*h*c+b;a[6]=g*h*c+f*d;a[7]=0;a[8]=f*g*c+h*d;a[9]=h*g*c-f*d;a[10]=g*g*c+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromXRotation=function(a,b){var g=Math.sin(b),f=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=g;a[7]=0;a[8]=0;a[9]=-g;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromYRotation=
function(a,b){var g=Math.sin(b),f=Math.cos(b);a[0]=f;a[1]=0;a[2]=-g;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=g;a[9]=0;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromZRotation=function(a,b){var g=Math.sin(b),f=Math.cos(b);a[0]=f;a[1]=g;a[2]=0;a[3]=0;a[4]=-g;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.fromRotationTranslation=function(a,b,g){var f=b[0],h=b[1],d=b[2],c=b[3],e=f+f,k=h+h,l=d+d;b=f*e;var m=f*k;f*=l;var n=h*k;h*=l;d*=l;e*=
c;k*=c;c*=l;a[0]=1-(n+d);a[1]=m+c;a[2]=f-k;a[3]=0;a[4]=m-c;a[5]=1-(b+d);a[6]=h+e;a[7]=0;a[8]=f+k;a[9]=h-e;a[10]=1-(b+n);a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a};q.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};q.getRotation=function(a,b){var g=b[0]+b[5]+b[10],f=0;0<g?(f=2*Math.sqrt(g+1),a[3]=.25*f,a[0]=(b[6]-b[9])/f,a[1]=(b[8]-b[2])/f,a[2]=(b[1]-b[4])/f):b[0]>b[5]&b[0]>b[10]?(f=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/f,a[0]=.25*f,a[1]=(b[1]+b[4])/
f,a[2]=(b[8]+b[2])/f):b[5]>b[10]?(f=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/f,a[0]=(b[1]+b[4])/f,a[1]=.25*f,a[2]=(b[6]+b[9])/f):(f=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/f,a[0]=(b[8]+b[2])/f,a[1]=(b[6]+b[9])/f,a[2]=.25*f);return a};q.fromRotationTranslationScale=function(a,b,g,f){var h=b[0],d=b[1],c=b[2],e=b[3],k=h+h,l=d+d,m=c+c;b=h*k;var n=h*l;h*=m;var p=d*l;d*=m;c*=m;k*=e;l*=e;e*=m;m=f[0];var v=f[1];f=f[2];a[0]=(1-(p+c))*m;a[1]=(n+e)*m;a[2]=(h-l)*m;a[3]=0;a[4]=(n-e)*v;a[5]=(1-(b+
c))*v;a[6]=(d+k)*v;a[7]=0;a[8]=(h+l)*f;a[9]=(d-k)*f;a[10]=(1-(b+p))*f;a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a};q.fromRotationTranslationScaleOrigin=function(a,b,g,f,h){var d=b[0],c=b[1],e=b[2],k=b[3],l=d+d,m=c+c,n=e+e;b=d*l;var p=d*m;d*=n;var v=c*m;c*=n;e*=n;l*=k;m*=k;k*=n;n=f[0];var r=f[1];f=f[2];var y=h[0],x=h[1];h=h[2];a[0]=(1-(v+e))*n;a[1]=(p+k)*n;a[2]=(d-m)*n;a[3]=0;a[4]=(p-k)*r;a[5]=(1-(b+e))*r;a[6]=(c+l)*r;a[7]=0;a[8]=(d+m)*f;a[9]=(c-l)*f;a[10]=(1-(b+v))*f;a[11]=0;a[12]=g[0]+
y-(a[0]*y+a[4]*x+a[8]*h);a[13]=g[1]+x-(a[1]*y+a[5]*x+a[9]*h);a[14]=g[2]+h-(a[2]*y+a[6]*x+a[10]*h);a[15]=1;return a};q.fromQuat=function(a,b){var g=b[0],f=b[1],h=b[2],d=b[3],c=g+g,e=f+f,k=h+h;g*=c;var l=f*c;f*=e;var m=h*c,n=h*e;h*=k;c*=d;e*=d;d*=k;a[0]=1-f-h;a[1]=l+d;a[2]=m-e;a[3]=0;a[4]=l-d;a[5]=1-g-h;a[6]=n+c;a[7]=0;a[8]=m+e;a[9]=n-c;a[10]=1-g-f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};q.frustum=function(a,b,g,f,h,d,c){var e=1/(g-b),k=1/(h-f),l=1/(d-c);a[0]=2*d*e;a[1]=0;a[2]=0;a[3]=0;a[4]=
0;a[5]=2*d*k;a[6]=0;a[7]=0;a[8]=(g+b)*e;a[9]=(h+f)*k;a[10]=(c+d)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=c*d*2*l;a[15]=0;return a};q.perspective=function(a,b,g,f,h){b=1/Math.tan(b/2);var d=1/(f-h);a[0]=b/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(h+f)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*h*f*d;a[15]=0;return a};q.perspectiveFromFieldOfView=function(a,b,g,f){var h=Math.tan(b.upDegrees*Math.PI/180),d=Math.tan(b.downDegrees*Math.PI/180),c=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*
Math.PI/180);var e=2/(c+b),k=2/(h+d);a[0]=e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=k;a[6]=0;a[7]=0;a[8]=-((c-b)*e*.5);a[9]=(h-d)*k*.5;a[10]=f/(g-f);a[11]=-1;a[12]=0;a[13]=0;a[14]=f*g/(g-f);a[15]=0;return a};q.ortho=function(a,b,g,f,h,d,c){var e=1/(b-g),k=1/(f-h),l=1/(d-c);a[0]=-2*e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+g)*e;a[13]=(h+f)*k;a[14]=(c+d)*l;a[15]=1;return a};q.lookAt=function(a,b,g,f){var h=b[0],d=b[1];b=b[2];var c=f[0];var e=f[1];var k=
f[2];var l=g[0];f=g[1];var m=g[2];if(Math.abs(h-l)<D.EPSILON&&Math.abs(d-f)<D.EPSILON&&Math.abs(b-m)<D.EPSILON)return q.identity(a);g=h-l;f=d-f;l=b-m;var n=1/Math.sqrt(g*g+f*f+l*l);g*=n;f*=n;l*=n;m=e*l-k*f;k=k*g-c*l;c=c*f-e*g;(n=Math.sqrt(m*m+k*k+c*c))?(n=1/n,m*=n,k*=n,c*=n):c=k=m=0;e=f*c-l*k;var p=l*m-g*c;var v=g*k-f*m;(n=Math.sqrt(e*e+p*p+v*v))?(n=1/n,e*=n,p*=n,v*=n):v=p=e=0;a[0]=m;a[1]=e;a[2]=g;a[3]=0;a[4]=k;a[5]=p;a[6]=f;a[7]=0;a[8]=c;a[9]=v;a[10]=l;a[11]=0;a[12]=-(m*h+k*d+c*b);a[13]=-(e*h+p*
d+v*b);a[14]=-(g*h+f*d+l*b);a[15]=1;return a};q.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],
2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};q.add=function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];a[4]=b[4]+g[4];a[5]=b[5]+g[5];a[6]=b[6]+g[6];a[7]=b[7]+g[7];a[8]=b[8]+g[8];a[9]=b[9]+g[9];a[10]=b[10]+g[10];a[11]=b[11]+g[11];a[12]=b[12]+g[12];a[13]=b[13]+g[13];a[14]=b[14]+g[14];a[15]=b[15]+g[15];return a};q.subtract=function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=b[3]-g[3];a[4]=b[4]-g[4];a[5]=b[5]-g[5];a[6]=b[6]-g[6];a[7]=b[7]-g[7];a[8]=
b[8]-g[8];a[9]=b[9]-g[9];a[10]=b[10]-g[10];a[11]=b[11]-g[11];a[12]=b[12]-g[12];a[13]=b[13]-g[13];a[14]=b[14]-g[14];a[15]=b[15]-g[15];return a};q.sub=q.subtract;q.multiplyScalar=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*g;a[5]=b[5]*g;a[6]=b[6]*g;a[7]=b[7]*g;a[8]=b[8]*g;a[9]=b[9]*g;a[10]=b[10]*g;a[11]=b[11]*g;a[12]=b[12]*g;a[13]=b[13]*g;a[14]=b[14]*g;a[15]=b[15]*g;return a};q.multiplyScalarAndAdd=function(a,b,g,f){a[0]=b[0]+g[0]*f;a[1]=b[1]+g[1]*f;a[2]=b[2]+g[2]*f;a[3]=
b[3]+g[3]*f;a[4]=b[4]+g[4]*f;a[5]=b[5]+g[5]*f;a[6]=b[6]+g[6]*f;a[7]=b[7]+g[7]*f;a[8]=b[8]+g[8]*f;a[9]=b[9]+g[9]*f;a[10]=b[10]+g[10]*f;a[11]=b[11]+g[11]*f;a[12]=b[12]+g[12]*f;a[13]=b[13]+g[13]*f;a[14]=b[14]+g[14]*f;a[15]=b[15]+g[15]*f;return a};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};q.equals=
function(a,b){var g=a[0],f=a[1],h=a[2],d=a[3],c=a[4],e=a[5],k=a[6],l=a[7],m=a[8],n=a[9],p=a[10],v=a[11],r=a[12],y=a[13],x=a[14],z=a[15],u=b[0],w=b[1],t=b[2],A=b[3],G=b[4],B=b[5],E=b[6],F=b[7],I=b[8],M=b[9],P=b[10],aa=b[11],ca=b[12],ea=b[13],T=b[14],la=b[15];return Math.abs(g-u)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(u))&&Math.abs(f-w)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(h-t)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(t))&&Math.abs(d-A)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(A))&&
Math.abs(c-G)<=D.EPSILON*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(e-B)<=D.EPSILON*Math.max(1,Math.abs(e),Math.abs(B))&&Math.abs(k-E)<=D.EPSILON*Math.max(1,Math.abs(k),Math.abs(E))&&Math.abs(l-F)<=D.EPSILON*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(m-I)<=D.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(n-M)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(p-P)<=D.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(v-aa)<=D.EPSILON*Math.max(1,Math.abs(v),Math.abs(aa))&&Math.abs(r-
ca)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(ca))&&Math.abs(y-ea)<=D.EPSILON*Math.max(1,Math.abs(y),Math.abs(ea))&&Math.abs(x-T)<=D.EPSILON*Math.max(1,Math.abs(x),Math.abs(T))&&Math.abs(z-la)<=D.EPSILON*Math.max(1,Math.abs(z),Math.abs(la))};return q})},"esri/layers/vectorTiles/core/libs/gl-matrix/common":function(){define([],function(){var D={EPSILON:1E-6};D.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;D.RANDOM=Math.random;D.ENABLE_SIMD=!1;D.SIMD_AVAILABLE=D.ARRAY_TYPE===Float32Array&&
"SIMD"in this;D.USE_SIMD=D.ENABLE_SIMD&&D.SIMD_AVAILABLE;D.setMatrixArrayType=function(a){D.ARRAY_TYPE=a};var q=Math.PI/180;D.toRadian=function(a){return a*q};D.equals=function(a,b){return Math.abs(a-b)<=D.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return D})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec3":function(){define(["./common"],function(D){var q={create:function(){var a=new D.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new D.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];
b[2]=a[2];return b},fromValues:function(a,b,g){var f=new D.ARRAY_TYPE(3);f[0]=a;f[1]=b;f[2]=g;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,g,f){a[0]=b;a[1]=g;a[2]=f;return a},add:function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];return a},subtract:function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];return a}};q.sub=q.subtract;q.multiply=function(a,b,g){a[0]=b[0]*g[0];a[1]=b[1]*g[1];a[2]=b[2]*g[2];return a};q.mul=q.multiply;q.divide=function(a,
b,g){a[0]=b[0]/g[0];a[1]=b[1]/g[1];a[2]=b[2]/g[2];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};q.min=function(a,b,g){a[0]=Math.min(b[0],g[0]);a[1]=Math.min(b[1],g[1]);a[2]=Math.min(b[2],g[2]);return a};q.max=function(a,b,g){a[0]=Math.max(b[0],g[0]);a[1]=Math.max(b[1],g[1]);a[2]=Math.max(b[2],g[2]);return a};q.round=function(a,b){a[0]=
Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};q.scale=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;return a};q.scaleAndAdd=function(a,b,g,f){a[0]=b[0]+g[0]*f;a[1]=b[1]+g[1]*f;a[2]=b[2]+g[2]*f;return a};q.distance=function(a,b){var g=b[0]-a[0],f=b[1]-a[1],h=b[2]-a[2];return Math.sqrt(g*g+f*f+h*h)};q.dist=q.distance;q.squaredDistance=function(a,b){var g=b[0]-a[0],f=b[1]-a[1],h=b[2]-a[2];return g*g+f*f+h*h};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],g=
a[1];a=a[2];return Math.sqrt(b*b+g*g+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],g=a[1];a=a[2];return b*b+g*g+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};q.normalize=function(a,b){var g=b[0],f=b[1],h=b[2];g=g*g+f*f+h*h;0<g&&(g=1/Math.sqrt(g),a[0]=b[0]*g,a[1]=b[1]*g,a[2]=b[2]*g);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};q.cross=function(a,
b,g){var f=b[0],h=b[1];b=b[2];var d=g[0],c=g[1];g=g[2];a[0]=h*g-b*c;a[1]=b*d-f*g;a[2]=f*c-h*d;return a};q.lerp=function(a,b,g,f){var h=b[0],d=b[1];b=b[2];a[0]=h+f*(g[0]-h);a[1]=d+f*(g[1]-d);a[2]=b+f*(g[2]-b);return a};q.hermite=function(a,b,g,f,h,d){var c=d*d,e=c*(2*d-3)+1,k=c*(d-2)+d,l=c*(d-1);d=c*(3-2*d);a[0]=b[0]*e+g[0]*k+f[0]*l+h[0]*d;a[1]=b[1]*e+g[1]*k+f[1]*l+h[1]*d;a[2]=b[2]*e+g[2]*k+f[2]*l+h[2]*d;return a};q.bezier=function(a,b,g,f,h,d){var c=1-d,e=c*c,k=d*d,l=e*c;e*=3*d;c*=3*k;d*=k;a[0]=b[0]*
l+g[0]*e+f[0]*c+h[0]*d;a[1]=b[1]*l+g[1]*e+f[1]*c+h[1]*d;a[2]=b[2]*l+g[2]*e+f[2]*c+h[2]*d;return a};q.random=function(a,b){b=b||1;var g=2*D.RANDOM()*Math.PI,f=2*D.RANDOM()-1,h=Math.sqrt(1-f*f)*b;a[0]=Math.cos(g)*h;a[1]=Math.sin(g)*h;a[2]=f*b;return a};q.transformMat4=function(a,b,g){var f=b[0],h=b[1];b=b[2];var d=g[3]*f+g[7]*h+g[11]*b+g[15];d=d||1;a[0]=(g[0]*f+g[4]*h+g[8]*b+g[12])/d;a[1]=(g[1]*f+g[5]*h+g[9]*b+g[13])/d;a[2]=(g[2]*f+g[6]*h+g[10]*b+g[14])/d;return a};q.transformMat3=function(a,b,g){var f=
b[0],h=b[1];b=b[2];a[0]=f*g[0]+h*g[3]+b*g[6];a[1]=f*g[1]+h*g[4]+b*g[7];a[2]=f*g[2]+h*g[5]+b*g[8];return a};q.transformQuat=function(a,b,g){var f=b[0],h=b[1],d=b[2];b=g[0];var c=g[1],e=g[2];g=g[3];var k=g*f+c*d-e*h,l=g*h+e*f-b*d,m=g*d+b*h-c*f;f=-b*f-c*h-e*d;a[0]=k*g+f*-b+l*-e-m*-c;a[1]=l*g+f*-c+m*-b-k*-e;a[2]=m*g+f*-e+k*-c-l*-b;return a};q.rotateX=function(a,b,g,f){var h=[],d=[];h[0]=b[0]-g[0];h[1]=b[1]-g[1];h[2]=b[2]-g[2];d[0]=h[0];d[1]=h[1]*Math.cos(f)-h[2]*Math.sin(f);d[2]=h[1]*Math.sin(f)+h[2]*
Math.cos(f);a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a};q.rotateY=function(a,b,g,f){var h=[],d=[];h[0]=b[0]-g[0];h[1]=b[1]-g[1];h[2]=b[2]-g[2];d[0]=h[2]*Math.sin(f)+h[0]*Math.cos(f);d[1]=h[1];d[2]=h[2]*Math.cos(f)-h[0]*Math.sin(f);a[0]=d[0]+g[0];a[1]=d[1]+g[1];a[2]=d[2]+g[2];return a};q.rotateZ=function(a,b,g,f){var h=[],d=[];h[0]=b[0]-g[0];h[1]=b[1]-g[1];h[2]=b[2]-g[2];d[0]=h[0]*Math.cos(f)-h[1]*Math.sin(f);d[1]=h[0]*Math.sin(f)+h[1]*Math.cos(f);d[2]=h[2];a[0]=d[0]+g[0];a[1]=d[1]+g[1];
a[2]=d[2]+g[2];return a};q.forEach=function(){var a=q.create();return function(b,g,f,h,d,c){g||(g=3);f||(f=0);for(h=h?Math.min(h*g+f,b.length):b.length;f<h;f+=g)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+2],d(a,a,c),b[f]=a[0],b[f+1]=a[1],b[f+2]=a[2];return b}}();q.angle=function(a,b){var g=q.fromValues(a[0],a[1],a[2]),f=q.fromValues(b[0],b[1],b[2]);q.normalize(g,g);q.normalize(f,f);g=q.dot(g,f);return 1<g?0:Math.acos(g)};q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};q.exactEquals=function(a,b){return a[0]===
b[0]&&a[1]===b[1]&&a[2]===b[2]};q.equals=function(a,b){var g=a[0],f=a[1],h=a[2],d=b[0],c=b[1],e=b[2];return Math.abs(g-d)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(d))&&Math.abs(f-c)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(c))&&Math.abs(h-e)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(e))};return q})},"esri/layers/vectorTiles/views/2d/engine/Container":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./DisplayObject"],function(D,q,a,b){var g;(function(f){f[f.BEFORE=
0]="BEFORE";f[f.ATTACHING=1]="ATTACHING";f[f.DETACHING=2]="DETACHING";f[f.RENDERING=3]="RENDERING";f[f.AFTER=4]="AFTER";f[f.DONE=5]="DONE"})(g||(g={}));return function(f){function h(){var d=null!==f&&f.apply(this,arguments)||this;d._childrenSet=new Set;d._childrenToAttach=[];d._childrenToDetach=[];d._renderPhase=g.DONE;d.children=[];return d}a(h,f);Object.defineProperty(h.prototype,"numChildren",{get:function(){return this.children.length},enumerable:!0,configurable:!0});h.prototype.detach=function(d){var c=
this.children.concat(this._childrenToDetach);d=this.prepareChildrenRenderParameters(d);for(var e=0;e<c.length;e++){var k=c[e];k.attached&&(this.detachChild(k,d),k.attached=!1,k.parent=null)}};h.prototype.doRender=function(d){var c=this.prepareChildrenRenderParameters(d);this._renderPhase=g.BEFORE;this.beforeRenderChildren(d,c);this._renderPhase=g.ATTACHING;this.attachChildren(c);this._renderPhase=g.DETACHING;for(var e=this._childrenToDetach;0<e.length;){var k=e.shift();this.detachChild(k,c);k.attached=
!1;k.parent=null}this._renderPhase=g.RENDERING;this.renderChildren(c);this._renderPhase=g.AFTER;this.afterRenderChildren(d,c);this._renderPhase=g.DONE};h.prototype.addChild=function(d){return this.addChildAt(d,this.children.length)};h.prototype.addChildAt=function(d,c){void 0===c&&(c=this.numChildren);if(!d||this.contains(d))return d;var e=d.parent;e&&e!==this&&e.removeChild(d);c>=this.numChildren?this.children.push(d):this.children.splice(c,0,d);this._childrenSet.add(d);e=this._childrenToDetach.indexOf(d);
-1<e&&this._childrenToDetach.splice(e,1);this._childrenToAttach.push(d);this._renderPhase>=g.RENDERING&&this.requestRender();return d};h.prototype.contains=function(d){return this._childrenSet.has(d)};h.prototype.getChildIndex=function(d){return this.children.indexOf(d)};h.prototype.getChildAt=function(d){return 0>d||d>this.children.length?null:this.children[d]};h.prototype.removeAllChildren=function(){for(var d=this.numChildren;d--;)this.removeChildAt(0)};h.prototype.removeChild=function(d){return this.contains(d)?
this.removeChildAt(this.getChildIndex(d)):d};h.prototype.removeChildAt=function(d){if(0>d||d>=this.children.length)return null;d=this.children.splice(d,1)[0];this._childrenSet["delete"](d);if(d.attached)this._childrenToDetach.push(d),this._renderPhase>=g.RENDERING&&this.requestRender();else{var c=this._childrenToAttach.indexOf(d);-1<c&&this._childrenToAttach.splice(c,1)}return d};h.prototype.requestChildRender=function(d){d&&d.parent===this&&this._renderPhase>=g.RENDERING&&this.requestRender()};h.prototype.setChildIndex=
function(d,c){var e=this.getChildIndex(d);-1<e&&(this.children.splice(e,1),this.children.splice(c,0,d),this._renderPhase>=g.RENDERING&&this.requestRender())};h.prototype.sortChildren=function(d){this._renderPhase>g.RENDERING&&this.requestRender();return this.children.sort(d)};h.prototype.attachChildren=function(d){var c=this._childrenToAttach;if(0!==c.length)for(var e=0,k=!1;!k;)k=c[e],this.attachChild(k,d)?(k.attached=!0,k.parent=this,c.splice(e,1)):++e,k=c.length===e};h.prototype.renderChildren=
function(d){for(var c=this.children,e=c.length,k=0;k<e;k++){var l=c[k];l.attached&&this.renderChild(l,d)}};h.prototype.beforeRenderChildren=function(d,c){};h.prototype.attachChild=function(d,c){return d.attach(c)};h.prototype.detachChild=function(d,c){d.detach(c)};h.prototype.renderChild=function(d,c){d.processRender(c)};h.prototype.afterRenderChildren=function(d,c){};return h}(b)})},"esri/layers/vectorTiles/views/2d/engine/DisplayObject":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./Evented"],function(D,q,a,b){return function(g){function f(){var h=null!==g&&g.apply(this,arguments)||this;h._renderRequestedCalled=!1;h._attached=!1;h._opacity=1;h.renderRequested=!1;h._visible=!0;return h}a(f,g);Object.defineProperty(f.prototype,"attached",{get:function(){return this._attached},set:function(h){this._attached!==h&&((this._attached=h)?this.hasEventListener("attach")&&this.emit("attach"):this.hasEventListener("detach")&&this.emit("detach"))},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
"opacity",{get:function(){return this._opacity},set:function(h){this._opacity!==h&&(this._opacity=h,this.requestRender())},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"visible",{get:function(){return this._visible},set:function(h){this._visible!==h&&(this._visible=h,this.requestRender())},enumerable:!0,configurable:!0});f.prototype.attach=function(h){return!0};f.prototype.detach=function(h){};f.prototype.processRender=function(h){this._renderRequestedCalled=!1;this.doRender(h);
this._renderRequestedCalled||(this.renderRequested=!1);this.hasEventListener("post-render")&&this.emit("post-render")};f.prototype.requestRender=function(){var h=this.renderRequested;this.renderRequested=this._renderRequestedCalled=!0;this.parent&&this.parent.requestChildRender(this);h!==this.renderRequested&&this.hasEventListener("will-render")&&this.emit("will-render")};f.prototype.dispose=function(){};return f}(b.Evented)})},"esri/layers/vectorTiles/views/2d/engine/Evented":function(){define(["require",
"exports","../../../core/tsSupport/extendsHelper","dojo/aspect","dojo/on"],function(D,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function f(){}f.prototype.on=function(h,d){return b.after(this,"on"+h,d,!0)};f.prototype.once=function(h,d){return g.once(this,h,d)};f.prototype.emit=function(h){g.emit(this,h,this)};f.prototype.hasEventListener=function(h){h="on"+h;return!(!this[h]||!this[h].after)};return f}();q.Evented=D;q.EventedMixin=function(f){return function(h){function d(){return null!==
h&&h.apply(this,arguments)||this}a(d,h);d.prototype.on=function(c,e){return b.after(this,"on"+c,e,!0)};d.prototype.once=function(c,e){return g.once(this,c,e)};d.prototype.emit=function(c,e){g.emit(this,c,e)};d.prototype.hasEventListener=function(c){c="on"+c;return!(!this[c]||!this[c].after)};return d}(f)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=
1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(q.WGLGeometryType||(q.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(q.WGLGeometryTransactionStatus||(q.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]=
"LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(q.WGLDrawPhase||(q.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(q.VVType||(q.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]=
"SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(q.WGLVVFlag||(q.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(q.WGLVVTarget||(q.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]=
"SQUARE"})(q.CapType||(q.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(q.JoinType||(q.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(q.EsriSymbolType||(q.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";
a.PICTURE_FILL="picture-fill";a.TEXT="text"})(q.EsriSymbolTypeKebab||(q.EsriSymbolTypeKebab={}))})},"esri/layers/vectorTiles/views/2d/engine/webgl/WGLPainter":function(){define("require exports ../../../../core/tsSupport/assignHelper dojo/has ../../../../core/libs/gl-matrix/mat4 ./enums ./GeometryUtils ./MaterialManager ./Utils ./brushes/WGLBrushInfo ./brushes/WGLBrushStencil ./brushes/WGLGeometryBrushFill ./brushes/WGLGeometryBrushLabel ./brushes/WGLGeometryBrushLine ./brushes/WGLGeometryBrushMarker ./brushes/WGLGeometryBrushText ./painter/WGLHighlightPainter ./../../../webgl/FramebufferObject".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function u(){this._initialized=!1}u.prototype.registerPass=function(w,t){this._initialize();for(var A=0;A<t.length;A++)this._passMap.set(t[A],w);return this};u.prototype.getPaintPassTs=function(w){this._initialize();return this._passMap.has(w)?[this._passMap.get(w)]:[]};u.prototype._initialize=function(){this._initialized||(this._passMap=new Map,this._initialized=!0)};return u}();q.WGLPainterOptions=
D;var x=new Uint8Array(4*c.C_HITTEST_SEARCH_SIZE*c.C_HITTEST_SEARCH_SIZE),z=new Uint32Array(x.buffer);D=function(){function u(){this._hlPainter=new r;this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=new Float32Array(16);this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0;this.materialManager=new d}u.allGeometryPhases=function(){return[f.WGLDrawPhase.FILL,
f.WGLDrawPhase.LINE,f.WGLDrawPhase.MARKER,f.WGLDrawPhase.TEXT]};u.toWGLDrawPhases=function(w){for(var t=[],A,G=0;G<f.WGLDrawPhase.NUM_DRAW_PHASES;G++)A=1<<G,A&w&&t.push(A);return t};Object.defineProperty(u.prototype,"extrudeMatrix",{get:function(){return this._extrudeMatrix},enumerable:!0,configurable:!0});Object.defineProperty(u.prototype,"extrudeNoRotationMatrix",{get:function(){return this._extrudeNoRotationMatrix},enumerable:!0,configurable:!0});u.prototype.dispose=function(){this.materialManager.dispose();
this.textureManager=null;this._hlPainter&&(this._hlPainter.dispose(),this._hlPainter=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null);this._passes&&(this._passes.forEach(function(w){return w.dispose()}),this._passes.clear());this._brushes&&(this._brushes.forEach(function(w){return w.forEach(function(t){return t.dispose()})}),this._brushes.clear())};u.prototype.initialize=function(w){this.materialManager.initialize(w)};u.prototype.update=function(w,t){this._state=w;if(this._state.width!==
this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/w.width,this._extrudeScaleVector[1]=-2/w.height,g.identity(this._extrudeMatrix),g.rotate(this._extrudeMatrix,this._extrudeMatrix,-w.rotation*h.C_DEG_TO_RAD,this._extrudeRotateVector),g.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),g.transpose(this._extrudeMatrix,this._extrudeMatrix),g.identity(this._extrudeNoRotationMatrix),g.scale(this._extrudeNoRotationMatrix,
this._extrudeNoRotationMatrix,this._extrudeScaleVector),g.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=this._state.rotation};u.prototype.getBrushes=function(w){if(!this._brushes){var t=new l["default"],A=new p["default"],G=new n["default"],B=new v["default"],E=new m["default"],F=new e["default"],I=new k["default"];this._brushes=new Map;this._brushes.set(f.WGLDrawPhase.FILL,[t]);
this._brushes.set(f.WGLDrawPhase.MARKER,[A]);this._brushes.set(f.WGLDrawPhase.LINE,[G]);this._brushes.set(f.WGLDrawPhase.TEXT,[B]);this._brushes.set(f.WGLDrawPhase.LABEL,[E]);this._brushes.set(f.WGLDrawPhase.LABEL_ALPHA,[E]);this._brushes.set(f.WGLDrawPhase.HITTEST,[t,A,G,B]);this._brushes.set(f.WGLDrawPhase.HIGHLIGHT,[t,A,G,B]);this._brushes.set(f.WGLDrawPhase.CLIP,[I]);this._brushes.set(f.WGLDrawPhase.DEBUG,[F])}if(!this._brushes.has(w))throw Error("WGLPainter: Tried to get brush for unknown phase: "+
w);return this._brushes.get(w)};u.prototype.bindTextureManager=function(w){this.textureManager=w};u.prototype.draw=function(w,t,A,G){A[0]===f.WGLDrawPhase.LABEL_ALPHA&&A[0]===f.WGLDrawPhase.LABEL||this._drawClippingRects(w,t);var B=w.context;B.setBlendingEnabled(!0);B.setStencilWriteMask(0);B.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(w,t,A,G);this._debugTiles(w,t)};u.prototype.setHighlightOptions=function(w){this._hlPainter.setHighlightOptions(w)};u.prototype.highlight=function(w,t){var A=
w.context,G=A.getViewport();this._hlPainter.setup(A,G.width,G.height);this._hlPainter.startMaskDraw(A);this._drawClippingRects(w,t);A.setBlendingEnabled(!0);A.setStencilWriteMask(0);A.setBlendFunctionSeparate(1,771,1,771);this._drawPhases(w,t,[f.WGLDrawPhase.HIGHLIGHT]);this._hlPainter.draw(A)};u.prototype.hitTest=function(w,t){var A=c.C_HITTEST_SEARCH_SIZE,G=[0,0],B=[0,0],E=w.state;E.toMap(G,[0,0]);E.toMap(B,[A,A]);if(0===t.filter(function(ea){return!(G[0]>ea.bounds[2]||B[0]<ea.bounds[0]||G[1]<ea.bounds[1]||
B[1]>ea.bounds[3])}).length)return[];E=w.context;this._hittestFBO||(this._hittestFBO=y.create(E,{colorTarget:0,depthStencilTarget:3,width:A,height:A}));var F=E.getViewport(),I=E.getBoundFramebufferObject();E.bindFramebuffer(this._hittestFBO);E.setViewport(0,0,A,A);this._drawClippingRects(w,t);var M=E.gl;E.setClearColor(1,1,1,1);E.clear(M.COLOR_BUFFER_BIT);E.setBlendingEnabled(!1);E.setStencilWriteMask(0);this._drawPhases(w,t,[f.WGLDrawPhase.HITTEST]);E.setBlendingEnabled(!0);this._hittestFBO.readPixels(0,
0,A,A,6408,5121,x);A*=A;M=new Set;for(var P=0;P<A;P++){var aa=z[P];4294967295!==aa&&M.add(aa)}E.bindFramebuffer(I);E.setViewport(F.x,F.y,F.width,F.height);var ca=[];M.forEach(function(ea){ca.push(ea)});return ca};u.prototype._getPaintPass=function(w){this._passes||(this._passes=new Map);if(!this._passes.has(w))try{this._passes.set(w,new w)}catch(t){throw Error("Tried to instantiate WGLPaintPass with unknown constructor: "+w+",\n"+t);}return this._passes.get(w)};u.prototype._getPaintPasses=function(w,
t){var A=this;return t.getPaintPassTs(w).map(function(G){return A._getPaintPass(G)})};u.prototype._drawPhases=function(w,t,A,G){w.context.setStencilTestEnabled(!0);for(var B=0;B<A.length;B++){var E=A[B],F=G?this._getPaintPasses(E,G):[];E=a({},w,{drawPhase:E});F.forEach(function(P){return P.preRender(w,w.rendererInfo)});for(var I=0,M=t;I<M.length;I++)M[I].doRender(E);F.reverse().forEach(function(P){return P.postRender(w,w.rendererInfo)})}w.context.setStencilTestEnabled(!1)};u.prototype._debugTiles=
function(w,t){b("esri-feature-tiles-debug")&&this._drawPhases(w,t,[f.WGLDrawPhase.DEBUG])};u.prototype._drawClippingRects=function(w,t){if(0!==t.length){var A=w.context;A.setDepthWriteEnabled(!1);A.setDepthTestEnabled(!1);A.setStencilTestEnabled(!0);A.setBlendingEnabled(!1);A.setColorMask(!1,!1,!1,!1);A.setStencilOp(7680,7680,7681);A.setClearStencil(0);A.clear(A.gl.STENCIL_BUFFER_BIT);A.setStencilWriteMask(255);A=0;for(var G=t.length;A<t.length;A++,G--){var B=t[A];B.attached&&(B.stencilRef=G)}this._drawPhases(w,
t,[f.WGLDrawPhase.CLIP]);w.context.setColorMask(!0,!0,!0,!0)}};return u}();q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(D,q){function a(g,f){g%=f;return 0<=g?g:g+f}Object.defineProperty(q,"__esModule",{value:!0});q.C_INFINITY=Number.POSITIVE_INFINITY;q.C_PI=Math.PI;q.C_2PI=2*q.C_PI;q.C_PI_BY_2=q.C_PI/2;q.C_RAD_TO_256=128/q.C_PI;q.C_256_TO_RAD=q.C_PI/128;q.C_DEG_TO_256=256/360;q.C_DEG_TO_RAD=q.C_PI/180;q.C_SQRT2=1.414213562;
q.C_SQRT2_INV=1/q.C_SQRT2;var b=1/Math.LN2;q.positiveMod=a;q.radToByte=function(g){return a(g*q.C_RAD_TO_256,256)};q.degToByte=function(g){return a(g*q.C_DEG_TO_256,256)};q.log2=function(g){return Math.log(g)*b};q.sqr=function(g){return g*g};q.clamp=function(g,f,h){return Math.min(Math.max(g,f),h)};q.interpolate=function(g,f,h){return g*(1-h)+f*h};q.between=function(g,f,h){return g>=f&&g<=h||g>=h&&g<=f}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialManager":function(){define("require exports ./enums ./MaterialInfoUtils ./shaders/fillShaderSnippets ./shaders/iconShaderSnippets ./shaders/labelShaderSnippets ./shaders/lineShaderSnippets ./shaders/textShaderSnippets ../../../webgl/ShaderVariations".split(" "),
function(D,q,a,b,g,f,h,d,c,e){return function(){function k(){this._programRep=new Map;this.isInitialize=!1}k.prototype.dispose=function(){this._fillShaderVariations&&(this._fillShaderVariations.dispose(),this._fillShaderVariations=null);this._lineShaderVariations&&(this._lineShaderVariations.dispose(),this._lineShaderVariations=null);this._iconShaderVariations&&(this._iconShaderVariations.dispose(),this._iconShaderVariations=null);this._textShaderVariations&&(this._textShaderVariations.dispose(),
this._textShaderVariations=null);0!==this._programRep.size&&(this._programRep.forEach(function(l){return l.dispose()}),this._programRep.clear())};k.prototype.initialize=function(l){if(!this.isInitialize){var m=new e("label",["labelVS","labelFS"],[],h,l);m.addDefine("ID","ID",[!0,!0],"ID");m.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");m.addDefine("SDF","SDF",[!1,!1],"SDF");m.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");m.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");m.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");m.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");m.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");m.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");m.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");m.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");m.addDefine("PATTERN",
"PATTERN",[!1,!1],"PATTERN");m.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var n=new e("text",["textVS","textFS"],[],c,l);n.addDefine("ID","ID",[!0,!0],"ID");n.addDefine("HIGHLIGHT","HIGHLIGHT",[!1,!1],"HIGHLIGHT");n.addDefine("SDF","SDF",[!1,!1],"SDF");n.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");n.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");n.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],
"VV_SIZE_FIELD_STOPS");n.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");n.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");n.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");n.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");n.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");n.addDefine("PATTERN","PATTERN",[!1,!1],"PATTERN");n.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");var p=new e("icon",["iconVS","iconFS"],
[],f,l);p.addDefine("ID","ID",[!0,!0],"ID");p.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");p.addDefine("SDF","SDF",[!0,!0],"SDF");p.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");p.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");p.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");p.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");p.addDefine("VV_COLOR",
"VV_COLOR",[!0,!1],"VV_COLOR");p.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");p.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");p.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");p.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");p.addDefine("HEATMAP","HEATMAP",[!0,!0],"HEATMAP");var v=new e("fill",["fillVS","fillFS"],[],g,l);v.addDefine("ID","ID",[!0,!0],"ID");v.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");v.addDefine("SDF","SDF",
[!1,!1],"SDF");v.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!1,!1],"VV_SIZE_MIN_MAX_VALUE");v.addDefine("VV_SIZE_SCALE_STOPS","VV_SIZE_SCALE_STOPS",[!1,!1],"VV_SIZE_SCALE_STOPS");v.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!1,!1],"VV_SIZE_FIELD_STOPS");v.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!1,!1],"VV_SIZE_UNIT_VALUE");v.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");v.addDefine("VV_ROTATION","VV_ROTATION",[!1,!1],"VV_ROTATION");v.addDefine("VV_OPACITY",
"VV_OPACITY",[!0,!1],"VV_OPACITY");v.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");v.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");v.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");l=new e("line",["lineVS","lineFS"],[],d,l);l.addDefine("ID","ID",[!0,!0],"ID");l.addDefine("HIGHLIGHT","HIGHLIGHT",[!0,!0],"HIGHLIGHT");l.addDefine("SDF","SDF",[!0,!0],"SDF");l.addDefine("VV_SIZE_MIN_MAX_VALUE","VV_SIZE_MIN_MAX_VALUE",[!0,!1],"VV_SIZE_MIN_MAX_VALUE");l.addDefine("VV_SIZE_SCALE_STOPS",
"VV_SIZE_SCALE_STOPS",[!0,!1],"VV_SIZE_SCALE_STOPS");l.addDefine("VV_SIZE_FIELD_STOPS","VV_SIZE_FIELD_STOPS",[!0,!1],"VV_SIZE_FIELD_STOPS");l.addDefine("VV_SIZE_UNIT_VALUE","VV_SIZE_UNIT_VALUE",[!0,!1],"VV_SIZE_UNIT_VALUE");l.addDefine("VV_COLOR","VV_COLOR",[!0,!1],"VV_COLOR");l.addDefine("VV_ROTATION","VV_ROTATION",[!0,!1],"VV_ROTATION");l.addDefine("VV_OPACITY","VV_OPACITY",[!0,!1],"VV_OPACITY");l.addDefine("VERTEX_VISIBILITY","VERTEX_VISIBILITY",[!1,!1],"VERTEX_VISIBILITY");l.addDefine("PATTERN",
"PATTERN",[!0,!0],"PATTERN");l.addDefine("HEATMAP","HEATMAP",[!1,!1],"HEATMAP");this._labelShaderVariations=m;this._textShaderVariations=n;this._fillShaderVariations=v;this._iconShaderVariations=p;this._lineShaderVariations=l;this.isInitialize=!0}};k.prototype.getProgram=function(l,m,n){l|=m===a.WGLDrawPhase.HITTEST?8:0;l|=m===a.WGLDrawPhase.HIGHLIGHT?16:0;if(this._programRep[l])return this._programRep[l];if(!(this._iconShaderVariations&&this._fillShaderVariations&&this._lineShaderVariations&&this._labelShaderVariations))return null;
m=b.getMaterialVariations(l);switch(m.geometryType){case a.WGLGeometryType.MARKER:var p=this._iconShaderVariations.getProgram(m.variations,null,null,n);break;case a.WGLGeometryType.TEXT:p=this._textShaderVariations.getProgram(m.variations,null,null,n);break;case a.WGLGeometryType.LABEL:p=this._labelShaderVariations.getProgram(m.variations,null,null,n);break;case a.WGLGeometryType.FILL:p=this._fillShaderVariations.getProgram(m.variations,null,null,n);break;case a.WGLGeometryType.LINE:p=this._lineShaderVariations.getProgram(m.variations,
null,null,n)}p&&(this._programRep[l]=p);return p};return k}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(D,q,a,b,g){function f(d){var c=[];c[0]=d.sdf?!0:!1;c[1]=d.vvSizeMinMaxValue?!0:!1;c[2]=d.vvSizeScaleStops?!0:!1;c[3]=d.vvSizeFieldStops?!0:!1;c[4]=d.vvSizeUnitValue?!0:!1;c[5]=d.vvColor?!0:!1;c[6]=d.vvRotation?!0:!1;c[7]=d.vvOpacity?!0:!1;c[8]=d.visibility?!0:!1;c[9]=d.pattern?
!0:!1;c[10]=d.heatmap?!0:!1;return c.reduce(function(e,k,l){k&&(e|=1<<l+2);return e},0)}function h(d){if(d.geometryType===a.WGLGeometryType.UNKNOWN)return-1;var c=f(d)<<3;return d.geometryType+c}Object.defineProperty(q,"__esModule",{value:!0});q.createTextMaterialInfo=function(d,c,e){var k=new b["default"],l=new g;l.geometryType=e;l.sdf=!0;l.pattern=!1;l.visibility=!1;l.heatmap=!1;k.texBindingInfo.push(new b.TexBindingInfo(2,d.page,"u_texture"));0===c?l.vvOpacity=l.vvSizeMinMaxValue=l.vvSizeScaleStops=
l.vvSizeFieldStops=l.vvSizeUnitValue=l.vvColor=l.vvRotation=!1:(l.vvOpacity=0!==(c&a.WGLVVFlag.OPACITY),l.vvSizeMinMaxValue=0!==(c&a.WGLVVFlag.SIZE_MINMAX_VALUE),l.vvSizeScaleStops=0!==(c&a.WGLVVFlag.SIZE_SCALE_STOPS),l.vvSizeFieldStops=0!==(c&a.WGLVVFlag.SIZE_FIELD_STOPS),l.vvSizeUnitValue=0!==(c&a.WGLVVFlag.SIZE_UNIT_VALUE),l.vvColor=0!==(c&a.WGLVVFlag.COLOR),l.vvRotation=0!==(c&a.WGLVVFlag.ROTATION));k.materialKey=h(l);k.materialKeyInfo=l;return k};q.createMaterialInfo=function(d,c,e){var k=new b["default"],
l=new g;l.geometryType=c;d?(d=d.spriteMosaicItem,l.sdf=d.sdf,l.pattern=!0,k.texBindingInfo.push(new b.TexBindingInfo(1,d.page,"u_texture"))):(l.sdf=!1,l.pattern=!1);0===e?l.vvOpacity=l.vvSizeMinMaxValue=l.vvSizeScaleStops=l.vvSizeFieldStops=l.vvSizeUnitValue=l.vvColor=l.vvRotation=!1:(l.vvOpacity=0!==(e&a.WGLVVFlag.OPACITY),l.vvSizeMinMaxValue=0!==(e&a.WGLVVFlag.SIZE_MINMAX_VALUE),l.vvSizeScaleStops=0!==(e&a.WGLVVFlag.SIZE_SCALE_STOPS),l.vvSizeFieldStops=0!==(e&a.WGLVVFlag.SIZE_FIELD_STOPS),l.vvSizeUnitValue=
0!==(e&a.WGLVVFlag.SIZE_UNIT_VALUE),l.vvColor=0!==(e&a.WGLVVFlag.COLOR),l.vvRotation=0!==(e&a.WGLVVFlag.ROTATION));l.visibility=!1;k.materialKey=h(l);k.materialKeyInfo=l;return k};q.getMaterialKey=h;q.getMaterialVariations=function(d){var c=d&7;d>>=3;return{geometryType:c,variations:[0!==(d&1),0!==(d&2),0!==(d&4),0!==(d&8),0!==(d&16),0!==(d&32),0!==(d&64),0!==(d&128),0!==(d&256),0!==(d&512),0!==(d&1024),0!==(d&2048),0!==(d&4096)]}}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(D,q,a,b,g,f,h){Object.defineProperty(q,"__esModule",{value:!0});var d=function(){function e(k,l,m){this.unit=k;this.pageId=l;this.semantic=m}e.prototype.clone=function(){return new e(this.unit,this.pageId,this.semantic)};e.prototype.serialize=function(k){k.writeInt32(this.unit);k.writeInt32(this.pageId);return k};e.deserialize=function(k){var l=k.readInt32();k=k.readInt32();return new e(l,k,"u_texture")};return e}();q.TexBindingInfo=d;var c=function(){function e(k,l){this.name=k;this.value=
l}e.prototype.clone=function(){return new e(this.name,this.value)};e.prototype.serialize=function(k){k.writeInt32(this.value);return k};e.deserialize=function(k){k=k.readInt32();return new e("u_my_param",k)};return e}();q.MaterialParam=c;D=function(){function e(){this.texBindingInfo=[];this.materialParams=[]}e.fromSprite=function(k,l,m){var n=new e,p=new f;p.geometryType=l;k?(p.sdf=k.sdf,p.pattern=!0,n.texBindingInfo.push(new d(1,k.page,"u_texture"))):(p.sdf=!1,p.pattern=!1);0===m?p.vvOpacity=p.vvSizeMinMaxValue=
p.vvSizeScaleStops=p.vvSizeFieldStops=p.vvSizeUnitValue=p.vvColor=p.vvRotation=!1:(p.vvOpacity=0!==(m&a.WGLVVFlag.OPACITY),p.vvSizeMinMaxValue=0!==(m&a.WGLVVFlag.SIZE_MINMAX_VALUE),p.vvSizeScaleStops=0!==(m&a.WGLVVFlag.SIZE_SCALE_STOPS),p.vvSizeFieldStops=0!==(m&a.WGLVVFlag.SIZE_FIELD_STOPS),p.vvSizeUnitValue=0!==(m&a.WGLVVFlag.SIZE_UNIT_VALUE),p.vvColor=0!==(m&a.WGLVVFlag.COLOR),p.vvRotation=0!==(m&a.WGLVVFlag.ROTATION));p.visibility=!1;n.materialKey=b.getMaterialKey(p);n.materialKeyInfo=p;return n};
e.fromGlyph=function(k,l,m){var n=new e,p=new f;p.geometryType=l;p.sdf=!0;p.pattern=!1;p.visibility=!1;p.heatmap=!1;n.texBindingInfo.push(new d(2,k.page,"u_texture"));0===m?p.vvOpacity=p.vvSizeMinMaxValue=p.vvSizeScaleStops=p.vvSizeFieldStops=p.vvSizeUnitValue=p.vvColor=p.vvRotation=!1:(p.vvOpacity=0!==(m&a.WGLVVFlag.OPACITY),p.vvSizeMinMaxValue=0!==(m&a.WGLVVFlag.SIZE_MINMAX_VALUE),p.vvSizeScaleStops=0!==(m&a.WGLVVFlag.SIZE_SCALE_STOPS),p.vvSizeFieldStops=0!==(m&a.WGLVVFlag.SIZE_FIELD_STOPS),p.vvSizeUnitValue=
0!==(m&a.WGLVVFlag.SIZE_UNIT_VALUE),p.vvColor=0!==(m&a.WGLVVFlag.COLOR),p.vvRotation=0!==(m&a.WGLVVFlag.ROTATION));n.materialKey=b.getMaterialKey(p);n.materialKeyInfo=p;return n};e.prototype.copy=function(k){this.materialParams=k.materialParams.map(function(l){return l.clone()});this.texBindingInfo=k.texBindingInfo.map(function(l){return l.clone()});k.materialKeyInfo&&(this.materialKeyInfo=new f,this.materialKeyInfo.copy(k.materialKeyInfo));this.materialKey=k.materialKey};e.prototype.serialize=function(k){k.writeInt32(this.materialKey);
h.serializeList(k,this.texBindingInfo);h.serializeList(k,this.materialParams);return k};e.deserialize=function(k){var l=new e;l.materialKey=k.readInt32();l.texBindingInfo=h.deserializeList(k,d);l.materialParams=h.deserializeList(k,c);l.materialKeyInfo=new f;g(l.materialKeyInfo,l.materialKey);return l};return e}();q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(D,q){return function(a,b){a.geometryType=
b&7;b>>=3;a.sdf=0!==(b&4);a.vvSizeMinMaxValue=0!==(b&8);a.vvSizeScaleStops=0!==(b&16);a.vvSizeFieldStops=0!==(b&32);a.vvSizeUnitValue=0!==(b&64);a.vvColor=0!==(b&128);a.vvRotation=0!==(b&256);a.vvOpacity=0!==(b&512);a.visibility=0!==(b&1024);a.pattern=0!==(b&2048);a.heatmap=0!==(b&4096);return a}})},"esri/layers/vectorTiles/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(D,q){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=
this.vvRotation=this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(b){this.geometryType=b.geometryType;this.sdf=b.sdf;this.vvSizeMinMaxValue=b.vvSizeMinMaxValue;this.vvSizeScaleStops=b.vvSizeScaleStops;this.vvSizeFieldStops=b.vvSizeFieldStops;this.vvSizeUnitValue=b.vvSizeUnitValue;this.vvColor=b.vvColor;this.vvRotation=b.vvRotation;this.vvOpacity=b.vvOpacity;this.visibility=b.visibility;this.pattern=b.pattern;
this.heatmap=b.heatmap};a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=
function(){return this.vvOpacity};return a}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/serializationUtils":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.serializeList=function(a,b){if(null===b)a.writeInt32(0);else{a.writeInt32(b.length);for(var g=0;g<b.length;g++)b[g].serialize(a);return a}};q.deserializeList=function(a,b,g){var f=a.readInt32();f=Array(f);for(var h=0;h<f.length;h++)f[h]=b.deserialize(a,g);return f}})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaderSnippets":function(){define(["require",
"exports","dojo/text!./fillShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/webgl/ShaderSnippets":function(){define(["require","exports","dojox/xml/parser"],function(D,q,a){return function(){function b(g){if(g)for(var f in g)this[f]=g[f]}b.parse=function(g,f){for(var h=a.parse(g).getElementsByTagName("snippet"),d=/\$[a-zA-Z][a-zA-Z0-9]*(?:\([^\(\)]*\))?[ \t]*/,c=/[\$\s]+/g,e=/\(([^\(\)]*)\)/,k=0;k<h.length;k++){for(var l=
h[k].getAttribute("name"),m=h[k].textContent;;){var n=m.match(d);if(null==n)break;var p=n[0].replace(c,""),v=p.match(e),r=void 0;v&&(r=v[1].split(",").map(function(y){return y.trim()}));p=p.replace(e,"");r=f._instantiate(p,r);m=m.replace(n[0],r)}f[l]=m}};b.prototype._instantiate=function(g,f){var h=this[g];for(f||(f=[]);;){var d=h.match(/\$(\d+)/);if(null==d)break;var c=parseInt(d[1],10);h=h.replace(d[0],f[c])}return h};return b}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaderSnippets":function(){define(["require",
"exports","dojo/text!./iconShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaderSnippets":function(){define(["require","exports","dojo/text!./labelShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaderSnippets":function(){define(["require","exports","dojo/text!./lineShaders.xml",
"../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaderSnippets":function(){define(["require","exports","dojo/text!./textShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/webgl/ShaderVariations":function(){define(["require","exports","./Program","./ShaderSourceVariator","./Util"],function(D,q,a,b,g){function f(h){return h.reduce(function(d,
c,e){c&&(d|=1<<e);return d},0)}return function(){function h(d,c,e,k,l,m){"string"===typeof d?this._initParams(d,c,e,k,l,m):this._initObject({programNamePrefix:d.programNamePrefix,shaderSnippetPrefixes:d.shaderSnippetPrefixes,baseDefines:d.baseDefines,snippets:d.snippets,rctx:d.rctx,vertexAttribLocs:d.vertexAttribLocs})}h.prototype.dispose=function(){this._programCache&&(this._programCache.forEach(function(d){return d.dispose()}),this._programCache.clear())};h.prototype._initObject=function(d){this._initParams(d.programNamePrefix,
d.shaderSnippetPrefixes,d.baseDefines,d.snippets,d.rctx,d.vertexAttribLocs)};h.prototype._initParams=function(d,c,e,k,l,m){this._defaultSnippets=k;this._defaultRctx=l;this._defaultVertexAttribLocs=m;this._programCache=new Map;this._variationInfo=new Map;this._shaderSourceVariator=new b(d,c,e)};h.prototype.addDefine=function(d,c,e,k){this._shaderSourceVariator.addDefine(d,c,e,k)};h.prototype.addBinaryShaderSnippetSuffix=function(d,c,e){this._shaderSourceVariator.addBinaryShaderSnippetSuffix(d,c,e)};
h.prototype.addNaryShaderSnippetSuffix=function(d,c){this._shaderSourceVariator.addNaryShaderSnippetSuffix(d,c)};h.prototype.getProgram=function(d,c,e,k){c=c||this._defaultSnippets;e=e||this._defaultRctx;k=k||this._defaultVertexAttribLocs;if(!c)throw Error("No ShaderSnippets provided to getProgram nor to ShaderVariations constructor.");if(!e)throw Error("No RenderingContext provided to getProgram nor to ShaderVariations constructor.");if(!k)throw Error("No VertexAttributeLocations provided to getProgram nor to ShaderVariations constructor.");
var l=f(d);if(this._programCache.has(l))return this._programCache.get(l);d=this._shaderSourceVariator.getShaderVariation(d);var m=d.shaderSnippetNames[0];var n=c[m];g.assert(null!=n,"shader snippet '"+m+"' does not exist");m=d.shaderSnippetNames[1];c=c[m];g.assert(null!=c,"shader snippet '"+m+"' does not exist");e=new a(e,n,c,k,d.defines);this._programCache.set(l,e);return e};h.prototype.getProgramByKey=function(d){if(this._programCache.has(d))return this._programCache.get(d);if(!this._variationInfo[d])return null;
var c=this._variationInfo[d],e=this._defaultSnippets,k=this._defaultRctx,l=this._defaultVertexAttribLocs;var m=c.shaderSnippetNames[0];var n=e[m];g.assert(null!=n,"shader snippet '"+m+"' does not exist");m=c.shaderSnippetNames[1];e=e[m];g.assert(null!=e,"shader snippet '"+m+"' does not exist");c=new a(k,n,e,l,c.defines);this._programCache.set(d,c);return c};h.prototype.getProgramInfo=function(d){var c=this._shaderSourceVariator.getShaderVariation(d);d=f(d);this._variationInfo[d]||(this._variationInfo[d]=
c);return{name:c.programName,key:d}};return h}()})},"esri/layers/vectorTiles/views/webgl/Program":function(){define(["require","exports","dojo/has","./ShaderTranspiler"],function(D,q,a,b){return function(){function g(f,h,d,c,e){void 0===e&&(e={});this._glName=this._context=null;this._locations={};this._id=void 0;this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform2={};this._nameToUniform3=
{};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};this._context=f;this._vertexShaderSource=h;this._fragmentShaderSource=d;if(Array.isArray(e))for(h=0;h<e.length;h++)this._defines[e[h]]="1";else this._defines=e;this._id=g._nextId++;this._locations=c;a("esri-webgl-debug")&&f.instanceCounter.incrementCount(3)}Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glName",{get:function(){return this._glName},
enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});g.prototype.getDefine=function(f){return this._defines[f]};g.prototype.dispose=function(){if(this._context){var f=this._context.gl;this._vShader&&(f.deleteShader(this._vShader),this._vShader=null);this._fShader&&(f.deleteShader(this._fShader),this._fShader=null);this._glName&&(f.deleteProgram(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(3);
this._context=null}};g.prototype.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);var f=this._context.gl,h=f.createProgram();f.attachShader(h,this._vShader);f.attachShader(h,this._fShader);for(var d in this._locations)f.bindAttribLocation(h,this._locations[d],d);f.linkProgram(h);f.getProgramParameter(h,f.LINK_STATUS);this._glName=h;this._initialized=!0}};g.prototype.getUniformLocation=function(f){this.initialize();void 0===this._nameToUniformLocation[f]&&
(this._nameToUniformLocation[f]=this._context.gl.getUniformLocation(this._glName,f));return this._nameToUniformLocation[f]};g.prototype.hasUniform=function(f){return null!==this.getUniformLocation(f)};g.prototype.getAttribLocation=function(f){this.initialize();void 0===this._nameToAttribLocation[f]&&(this._nameToAttribLocation[f]=this._context.gl.getAttribLocation(this._glName,f));return this._nameToAttribLocation[f]};g.prototype.setUniform1i=function(f,h){var d=this._nameToUniform1[f];if(void 0===
d||h!==d)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(f),h),this._nameToUniform1[f]=h};g.prototype.setUniform1f=function(f,h){var d=this._nameToUniform1[f];if(void 0===d||h!==d)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(f),h),this._nameToUniform1[f]=h};g.prototype.setUniform1fv=function(f,h){var d=this._nameToUniform2[f];void 0!==d&&g._arraysEqual(h,d)||(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(f),
h),void 0===d?this._nameToUniform2[f]=new Float32Array(h):d.set(h))};g.prototype.setUniform2f=function(f,h,d){var c=this._nameToUniform2[f];if(void 0===c||h!==c[0]||d!==c[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(f),h,d),void 0===c?this._nameToUniform2[f]=new Float32Array([h,d]):(c[0]=h,c[1]=d)};g.prototype.setUniform2fv=function(f,h){var d=this._nameToUniform2[f];void 0!==d&&g._arraysEqual(h,d)||(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(f),
h),void 0===d?this._nameToUniform2[f]=new Float32Array(h):d.set(h))};g.prototype.setUniform3f=function(f,h,d,c){var e=this._nameToUniform3[f];if(void 0===e||h!==e[0]||d!==e[1]||c!==e[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(f),h,d,c),void 0===e?this._nameToUniform3[f]=new Float32Array([h,d,c]):(e[0]=h,e[1]=d,e[2]=c)};g.prototype.setUniform3fv=function(f,h){var d=this._nameToUniform3[f];void 0!==d&&g._arraysEqual(h,d)||(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(f),
h),void 0===d?this._nameToUniform3[f]=new Float32Array(h):d.set(h))};g.prototype.setUniform4f=function(f,h,d,c,e){var k=this._nameToUniform4[f];if(void 0===k||h!==k[0]||d!==k[1]||c!==k[2]||e!==k[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(f),h,d,c,e),void 0===k?this._nameToUniform4[f]=new Float32Array([h,d,c,e]):(k[0]=h,k[1]=d,k[2]=c,k[3]=e)};g.prototype.setUniform4fv=function(f,h){var d=this._nameToUniform4[f];void 0!==d&&g._arraysEqual(h,d)||(this._context.bindProgram(this),
this._context.gl.uniform4fv(this.getUniformLocation(f),h),void 0===d?this._nameToUniform4[f]=new Float32Array(h):d.set(h))};g.prototype.setUniformMatrix3fv=function(f,h,d){void 0===d&&(d=!1);var c=this._nameToUniformMatrix3[f];void 0!==c&&(9===c.length?g._matrix3Equal(c,h):g._arraysEqual(h,c))||(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(f),d,h),void 0===c?this._nameToUniformMatrix3[f]=new Float32Array(h):c.set(h))};g.prototype.setUniformMatrix4fv=function(f,
h,d){void 0===d&&(d=!1);var c=this._nameToUniformMatrix4[f];void 0!==c&&(16===c.length?g._matrix4Equal(c,h):g._arraysEqual(h,c))||(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(f),d,h),void 0===c?this._nameToUniformMatrix4[f]=new Float32Array(h):c.set(h))};g._padToThree=function(f){var h=f.toString();1E3>f&&(h=("  "+f).slice(-3));return h};g.prototype._addLineNumbers=function(f){var h=2;return f.replace(/\n/g,function(){return"\n"+g._padToThree(h++)+":"})};
g.prototype._loadShader=function(f){var h=35633===f,d=h?this._vertexShaderSource:this._fragmentShaderSource,c="",e;for(e in this._defines)c+="#define "+e+" "+this._defines[e]+"\n";d=c+d;"webgl2"===this._context.contextVersion&&(d=b.transpileShader(d,h?"vertex":"fragment"));h=this._context.gl;f=h.createShader(f);h.shaderSource(f,d);h.compileShader(f);h.getShaderParameter(f,h.COMPILE_STATUS);return f};g._matrix4Equal=function(f,h){return f[0]===h[0]&&f[1]===h[1]&&f[2]===h[2]&&f[3]===h[3]&&f[4]===h[4]&&
f[5]===h[5]&&f[6]===h[6]&&f[7]===h[7]&&f[8]===h[8]&&f[9]===h[9]&&f[10]===h[10]&&f[11]===h[11]&&f[12]===h[12]&&f[13]===h[13]&&f[14]===h[14]&&f[15]===h[15]};g._matrix3Equal=function(f,h){return f[0]===h[0]&&f[1]===h[1]&&f[2]===h[2]&&f[3]===h[3]&&f[4]===h[4]&&f[5]===h[5]&&f[6]===h[6]&&f[7]===h[7]&&f[8]===h[8]};g._arraysEqual=function(f,h){if(f.length!==h.length)return!1;for(var d=0;d<f.length;++d)if(f[d]!==h[d])return!1;return!0};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/webgl/ShaderTranspiler":function(){define(["require",
"exports","./reservedWordsGLSL3","./lib/glsl-tokenizer/string"],function(D,q,a,b){function g(c){return c.map(function(e){return"eof"!==e.type?e.data:""}).join("")}function f(c,e,k,l){l=l||k;for(var m=0;m<c.length;m++){var n=c[m];if("ident"===n.type&&n.data===k)return l in e?e[l]++:e[l]=0,f(c,e,l+"_"+e[l],l)}return k}function h(c,e,k){void 0===k&&(k="afterVersion");var l={data:"\n",type:"whitespace"},m=function(r){return r<c.length?/[^\r\n]$/.test(c[r].data):!1},n=function(r){for(var y=-1,x=0,z=-1,
u=0;u<r.length;u++){var w=r[u];"preprocessor"===w.type&&(w.data.match(/#(if|ifdef|ifndef)\s+.+/)?++x:w.data.match(/#endif\s*.*/)&&--x);("afterVersion"===k||"afterPrecision"===k)&&"preprocessor"===w.type&&/^#version/.test(w.data)&&(z=Math.max(z,u));if("afterPrecision"===k&&"keyword"===w.type&&"precision"===w.data){a:{for(w=u;w<r.length;w++){var t=r[w];if("operator"===t.type&&";"===t.data)break a}w=null}if(null===w)throw Error("precision statement not followed by any semicolons!");z=Math.max(z,w)}y<
z&&0===x&&(y=u)}return y+1}(c);m(n-1)&&c.splice(n++,0,l);for(var p=0;p<e.length;p++){var v=e[p];c.splice(n++,0,v)}m(n-1)&&m(n)&&c.splice(n,0,l)}Object.defineProperty(q,"__esModule",{value:!0});var d=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];q.transpileShader=function(c,e){var k=b(c);a:{var l="100";var m="300 es";void 0===l&&(l="100");void 0===m&&(m="300 es");for(var n=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/,p=0;p<k.length;p++){var v=
k[p];if("preprocessor"===v.type){var r=n.exec(v.data);if(r)if(n=r[1].replace(/\s\s+/g," "),n===m){l=n;break a}else if(n===l){v.data="#version "+m;break a}else throw Error("unknown glsl version: "+n);}}k.splice(0,0,{type:"preprocessor",data:"#version "+m},{type:"whitespace",data:"\n"});l=null}if("300 es"===l)throw Error("shader is already glsl 300 es");n=v=null;p={};r={};for(l=0;l<k.length;++l)switch(m=k[l],m.type){case "keyword":"vertex"===e&&"attribute"===m.data?m.data="in":"varying"===m.data&&(m.data=
"vertex"===e?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(m.data.trim())&&(m.data=m.data.replace(/(2D|Cube|EXT)/g,""));if("fragment"===e&&"gl_FragColor"===m.data){if(!v){v=f(k,p,"fragColor");var y=void 0;void 0===y&&(y="lowp");h(k,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:y},{type:"whitespace",data:" "},{type:"keyword",data:"vec4"},{type:"whitespace",data:" "},{type:"ident",data:v},{type:"operator",data:";"}],"afterPrecision")}m.data=
v}else"fragment"===e&&"gl_FragDepthEXT"===m.data&&(n||(n=f(k,p,"gl_FragDepth")),m.data=n);break;case "ident":if(0<=a.indexOf(m.data)){if(y="vertex"===e)a:{for(y=l-1;0<=y;y--){var x=k[y];if("whitespace"!==x.type&&"block-comment"!==x.type)if("keyword"===x.type){if("attribute"===x.data||"in"===x.data){y=!0;break a}}else break}y=!1}if(y)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");m.data in r||(r[m.data]=f(k,p,m.data));m.data=r[m.data]}}for(l=k.length-1;0<=
l;--l)m=k[l],"preprocessor"===m.type&&((v=m.data.match(/#extension\s+(.*):/))&&v[1]&&0<=d.indexOf(v[1].trim())&&(v=k[l+1],k.splice(l,v&&"whitespace"===v.type?2:1)),(v=m.data.match(/#ifdef\s+(.*)/))&&v[1]&&0<=d.indexOf(v[1].trim())&&(m.data="#if 1"),(v=m.data.match(/#ifndef\s+(.*)/))&&v[1]&&0<=d.indexOf(v[1].trim())&&(m.data="#if 0"));return g(k)}})},"esri/layers/vectorTiles/views/webgl/reservedWordsGLSL3":function(){define(["require","exports"],function(D,q){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/string":function(){define(["./index"],function(D){"use strict;";return function(q){var a=D(),b=[];b=b.concat(a(q));return b=b.concat(a(null))}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/index":function(){define(["./lib/literals","./lib/operators","./lib/builtins"],function(D,q,a){"use strict;";var b="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");return function(){function g(B){B.length&&
y.push({type:b[n],data:B,position:u,line:x,column:z})}function f(){r=r.length?[]:r;if("/"===v&&"*"===p)return u=m+l-1,n=0,v=p,l+1;if("/"===v&&"/"===p)return u=m+l-1,n=1,v=p,l+1;if("#"===p)return n=2,u=m+l,l;if(/\s/.test(p))return n=9,u=m+l,l;w=/\d/.test(p);t=/[^\w_]/.test(p);u=m+l;n=w?4:t?3:9999;return l}function h(){if(("\r"===p||"\n"===p)&&"\\"!==v)return g(r.join("")),n=999,l;r.push(p);v=p;return l+1}function d(){if("."===v&&/\d/.test(p))return n=5,l;if("/"===v&&"*"===p)return n=0,l;if("/"===v&&
"/"===p)return n=1,l;if("."===p&&r.length){for(;c(r););n=5;return l}if(";"===p||")"===p||"("===p){if(r.length)for(;c(r););g(p);n=999;return l+1}var B=2===r.length&&"\x3d"!==p;if(/[\w_\d\s]/.test(p)||B){for(;c(r););n=999;return l}r.push(p);v=p;return l+1}function c(B){var E=0;do{var F=q.indexOf(B.slice(0,B.length+E).join(""));var I=q[F];if(-1===F){if(0<E--+B.length)continue;I=B.slice(0,1).join("")}g(I);u+=I.length;r=r.slice(I.length);return r.length}while(1)}function e(){if("."===p||/[eE]/.test(p))return r.push(p),
n=5,v=p,l+1;if("x"===p&&1===r.length&&"0"===r[0])return n=11,r.push(p),v=p,l+1;if(/[^\d]/.test(p))return g(r.join("")),n=999,l;r.push(p);v=p;return l+1}function k(){"f"===p&&(r.push(p),v=p,l+=1);if(/[eE]/.test(p)||"-"===p&&/[eE]/.test(v))return r.push(p),v=p,l+1;if(/[^\d]/.test(p))return g(r.join("")),n=999,l;r.push(p);v=p;return l+1}var l=0,m=0,n=999,p,v,r=[],y=[],x=1,z=0,u=0,w=!1,t=!1,A="",G;return function(B){y=[];if(null!==B){B=B.replace?B.replace(/\r\n/g,"\n"):B;l=0;A+=B;for(G=A.length;p=A[l],
l<G;){B=l;switch(n){case 0:"/"===p&&"*"===v?(r.push(p),g(r.join("")),n=999):(r.push(p),v=p);l+=1;break;case 1:l=h();break;case 2:l=h();break;case 3:l=d();break;case 4:l=e();break;case 11:/[^a-fA-F0-9]/.test(p)?(g(r.join("")),n=999):(r.push(p),v=p,l+=1);break;case 5:l=k();break;case 9999:if(/[^\d\w_]/.test(p)){var E=r.join("");n=-1<D.indexOf(E)?8:-1<a.indexOf(E)?7:6;g(r.join(""));n=999}else r.push(p),v=p,l+=1;break;case 9:/[^\s]/g.test(p)?(g(r.join("")),n=999):(r.push(p),v=p,l+=1);break;case 999:l=
f()}if(B!==l)switch(A[B]){case "\n":z=0;++x;break;default:++z}}m+=l;A=A.slice(l);return y}r.length&&g(r.join(""));n=10;g("(eof)");return y}}})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/literals":function(){define([],function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})},
"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/operators":function(){define([],function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})},"esri/layers/vectorTiles/views/webgl/lib/glsl-tokenizer/lib/builtins":function(){define([],function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})},
"esri/layers/vectorTiles/views/webgl/ShaderSourceVariator":function(){define(["require","exports","../../core/lang","./Util"],function(D,q,a,b){return function(){function g(f,h,d){if("string"===typeof f)var c=f;else c=f.programNamePrefix,h=f.shaderSnippetPrefixes,d=f.baseDefines;b.assert(h,"you must specify shader snippet prefixes");b.assert(2===h.length,"you must specify shader snippet prefixes for vertex and fragment shaders");d&&0!==d.length||(d=[]);this.programNamePrefix=c;this.shaderSnippetPrefixes=
h;this.baseDefines=d;this.variables=[];this.sealed=!1}g.prototype.addDefine=function(f,h,d,c){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");b.assert(f,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",f],shaderNameSuffixes:c||f,defineStr:h,affectsShaderTypes:d||[!0,!0]})};g.prototype.addBinaryShaderSnippetSuffix=function(f,h,d){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");
b.assert(f,"you must specify a program name suffix");this.variables.push({programNameSuffixes:["",f],shaderSnippetSuffixes:["",h],affectsShaderTypes:d||[!0,!0]})};g.prototype.addNaryShaderSnippetSuffix=function(f,h){b.assert(!this.sealed,"you cannot add another variable after the first program has been generated");var d=f.map(function(c){b.assert(null!=c.value,"value must always be specified");return c.value});this.variables.push({values:d,programNameSuffixes:f.map(function(c,e){return null!=c.programNameSuffix?
c.programNameSuffix:d[e]}),shaderSnippetSuffixes:f.map(function(c,e){return null!=c.shaderSnippetSuffix?c.shaderSnippetSuffix:d[e]}),affectsShaderTypes:h||[!0,!0]})};g.prototype.getShaderVariation=function(f){b.assert(f.length===this.variables.length,"you must specify a value for each variable");for(var h=this.programNamePrefix,d=a.clone(this.shaderSnippetPrefixes),c=a.clone(this.shaderSnippetPrefixes),e=a.clone(this.baseDefines),k=0;k<this.variables.length;k++){var l=this.variables[k],m=f[k],n=void 0;
l.values?(n=l.values.indexOf(m),b.assert(0<=n,"invalid value "+m+" for variable "+k)):n=m?1:0;h+=l.programNameSuffixes[n];for(m=0;2>m;m++)l.affectsShaderTypes[m]&&(l.shaderSnippetSuffixes&&(d[m]+=l.shaderSnippetSuffixes[n],c[m]+=l.shaderSnippetSuffixes[n]),l.defineStr&&n&&(e.push(l.defineStr),c[m]+=l.shaderNameSuffixes))}return{programName:h,shaderSnippetNames:d,shaderNames:c,defines:e}};return g}()})},"esri/layers/vectorTiles/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper",
"../../core/Error"],function(D,q,a,b){return function(){function g(){}g.vertexCount=function(f,h){return f.vertexBuffers[h].size/g.getStride(f.layout[h])};g.getStride=function(f){return f[0].stride};g.getBytesPerElement=function(f){switch(f){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};g.addDescriptor=function(f,h,d,c,e,k){var l=g.getBytesPerElement(c);if(0<f.length){var m=
f[0].stride,n=m+l*d;f.forEach(function(p){return p.stride=n});f.push({name:h,count:d,type:c,offset:m,stride:n,normalized:e,divisor:k})}else f.push({name:h,count:d,type:c,offset:0,stride:l*d,normalized:e,divisor:k})};g.assertCompatibleVertexAttributeLocations=function(f,h){return f.locations===h.locations};g.hasAttribute=function(f,h){for(var d=0;d<f.length;d++)if(f[d].name===h)return!0;return!1};g.findAttribute=function(f,h){for(var d=0;d<f.length;d++)if(f[d].name===h)return f[d];return null};g.copyFramebufferToTexture=
function(f,h,d,c,e){void 0===e&&(e=0);var k=f.getBoundFramebufferObject(),l=f.getBoundTexture(0);f.bindFramebuffer(h);f.bindTexture(d,0);f.gl.copyTexImage2D(f.gl.TEXTURE_2D,e,d.descriptor.pixelFormat,c[0],c[1],c[2],c[3],0);f.gl.flush();f.bindFramebuffer(k);f.bindTexture(l,0)};g.assert=function(f,h){if(!f)throw new b(h);};g.setBaseInstanceOffset=function(f,h){var d={},c;for(c in f)d[c]=f[c].map(function(e){return e.divisor?a({},e,{baseInstance:h}):e});return d};g.bindVertexBufferLayout=function(f,
h,d,c,e){var k=f.gl,l=f.capabilities.instancing;f.bindBuffer(d);c.forEach(function(m){var n=h[m.name],p=(e?e:0+m.baseInstance?m.baseInstance:0)*m.stride;if(4>=m.count)k.vertexAttribPointer(n,m.count,m.type,m.normalized,m.stride,m.offset+p),k.enableVertexAttribArray(n),m.divisor&&0<m.divisor&&l&&l.vertexAttribDivisor(n,m.divisor);else if(9===m.count)for(var v=0;3>v;v++)k.vertexAttribPointer(n+v,3,m.type,m.normalized,m.stride,m.offset+12*v+p),k.enableVertexAttribArray(n+v),m.divisor&&0<m.divisor&&l&&
l.vertexAttribDivisor(n+v,m.divisor);else if(16===m.count)for(v=0;4>v;v++)k.vertexAttribPointer(n+v,4,m.type,m.normalized,m.stride,m.offset+16*v+p),k.enableVertexAttribArray(n+v),m.divisor&&0<m.divisor&&l&&l.vertexAttribDivisor(n+v,m.divisor)})};g.unbindVertexBufferLayout=function(f,h,d,c){var e=f.gl;f.bindBuffer(d);c.forEach(function(k){var l=h[k.name];if(4>=k.count)e.disableVertexAttribArray(l);else if(9===k.count)for(k=0;3>k;k++)e.disableVertexAttribArray(l+k);else if(16===k.count)for(k=0;4>k;k++)e.disableVertexAttribArray(l+
k)});f.unbindBuffer(34962)};return g}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),function(D,q,a,b,g,f,h,d,c,e){function k(t){return t.map(function(A){return A.name})}function l(t){for(var A={},G=0;G<t.length;G++){var B=t[G];A[B.name]=B.strideInBytes}return A}function m(t,
A){switch(t){case c.WGLGeometryType.MARKER:return A?q.C_ICON_VERTEX_NAMES_VV:q.C_ICON_VERTEX_NAMES;case c.WGLGeometryType.FILL:return A?q.C_FILL_VERTEX_NAMES_VV:q.C_FILL_VERTEX_NAMES;case c.WGLGeometryType.LINE:return A?q.C_LINE_VERTEX_NAMES_VV:q.C_LINE_VERTEX_NAMES;case c.WGLGeometryType.TEXT:return A?q.C_TEXT_VERTEX_NAMES_VV:q.C_TEXT_VERTEX_NAMES;case c.WGLGeometryType.LABEL:return q.C_LABEL_VERTEX_NAMES}return null}function n(t){switch(t){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return t}function p(t){if(t=n(t.type)){switch(t){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function v(t){if(t=n(t.type)){switch(t){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function r(t){if(t=n(t.type)){switch(t){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}}function y(t){if(t=n(t.type)){switch(t){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function x(t){return t&&t.length||0}function z(t){return"string"===typeof t}Object.defineProperty(q,"__esModule",{value:!0});var u=g.getLogger("esri.views.2d.engine.webgl.Utils");q.C_HITTEST_SEARCH_SIZE=4;q.C_VBO_GEOMETRY="geometry";q.C_VBO_PERINSTANCE="per_instance";q.C_VBO_PERINSTANCE_VV="per_instance_vv";q.C_VBO_VISIBILITY="visibility";q.C_VBO_VISIBILITY_RANGE=
"visibilityRange";q.C_ICON_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:28,divisor:0}];q.C_ICON_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:44,divisor:0}];q.C_ICON_HEATMAP=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_FILL_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:24,divisor:0}];q.C_FILL_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_LINE_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:32,divisor:0}];q.C_LINE_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,
strideInBytes:44,divisor:0}];q.C_TEXT_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];q.C_TEXT_VERTEX_DEF_VV=[{name:q.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];q.C_LABEL_VERTEX_DEF=[{name:q.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:q.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:q.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];q.C_ICON_VERTEX_NAMES=k(q.C_ICON_VERTEX_DEF);
q.C_ICON_VERTEX_NAMES_VV=k(q.C_ICON_VERTEX_DEF_VV);q.C_FILL_VERTEX_NAMES=k(q.C_FILL_VERTEX_DEF);q.C_FILL_VERTEX_NAMES_VV=k(q.C_FILL_VERTEX_DEF_VV);q.C_LINE_VERTEX_NAMES=k(q.C_LINE_VERTEX_DEF);q.C_LINE_VERTEX_NAMES_VV=k(q.C_LINE_VERTEX_DEF_VV);q.C_TEXT_VERTEX_NAMES=k(q.C_TEXT_VERTEX_DEF);q.C_TEXT_VERTEX_NAMES_VV=k(q.C_TEXT_VERTEX_DEF_VV);q.C_LABEL_VERTEX_NAMES=k(q.C_LABEL_VERTEX_DEF);q.C_ICON_STRIDE_SPEC=l(q.C_ICON_VERTEX_DEF);q.C_ICON_STRIDE_SPEC_VV=l(q.C_ICON_VERTEX_DEF_VV);q.C_ICON_STRIDE_SPEC_HEATMAP=
l(q.C_ICON_HEATMAP);q.C_FILL_STRIDE_SPEC=l(q.C_FILL_VERTEX_DEF);q.C_FILL_STRIDE_SPEC_VV=l(q.C_FILL_VERTEX_DEF_VV);q.C_LINE_STRIDE_SPEC=l(q.C_LINE_VERTEX_DEF);q.C_LINE_STRIDE_SPEC_VV=l(q.C_LINE_VERTEX_DEF_VV);q.C_TEXT_STRIDE_SPEC=l(q.C_TEXT_VERTEX_DEF);q.C_TEXT_STRIDE_SPEC_VV=l(q.C_TEXT_VERTEX_DEF_VV);q.C_LABEL_STRIDE_SPEC=l(q.C_LABEL_VERTEX_DEF);q.getStrides=function(t,A,G){void 0===G&&(G=!1);switch(t){case c.WGLGeometryType.MARKER:return A?q.C_ICON_STRIDE_SPEC_VV:G?q.C_ICON_STRIDE_SPEC_HEATMAP:q.C_ICON_STRIDE_SPEC;
case c.WGLGeometryType.FILL:return A?q.C_FILL_STRIDE_SPEC_VV:q.C_FILL_STRIDE_SPEC;case c.WGLGeometryType.LINE:return A?q.C_LINE_STRIDE_SPEC_VV:q.C_LINE_STRIDE_SPEC;case c.WGLGeometryType.TEXT:return A?q.C_TEXT_STRIDE_SPEC_VV:q.C_TEXT_STRIDE_SPEC;case c.WGLGeometryType.LABEL:return q.C_LABEL_STRIDE_SPEC}return null};q.getNamedBuffers=m;q.getSymbolGeometryType=function(t){return p(t)?c.WGLGeometryType.MARKER:r(t)?c.WGLGeometryType.LINE:v(t)?c.WGLGeometryType.FILL:y(t)?c.WGLGeometryType.TEXT:c.WGLGeometryType.UNKNOWN};
q.normalizeSymbolType=n;q.isMarkerSymbol=p;q.isFillSymbol=v;q.isLineSymbol=r;q.isPictureSymbol=function(t){if(t=n(t.type))switch(t){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};q.isTextSymbol=y;q.getTextProperties=function(t){return e.TextProperties.pool.acquire(t.color?d.copyAndPremultiply(t.color):[255,255,255,255],t.haloColor?d.copyAndPremultiply(t.haloColor):[255,255,255,255],f.pt2px(t.haloSize),f.pt2px(t.font.size),t.angle*Math.PI/180,t.xoffset/t.font.size,
t.yoffset/t.font.size,"left"===t.horizontalAlignment?0:"right"===t.horizontalAlignment?1:.5,"top"===t.verticalAlignment?0:"bottom"===t.verticalAlignment?1:.5)};q.isSameUniformValue=function(t,A){return!1};q.isSameMaterialInfo=function(t,A){if(t.materialKey!==A.materialKey||x(t.texBindingInfo)!==x(A.texBindingInfo)||x(t.materialParams)!==x(A.materialParams))return!1;for(var G=t.texBindingInfo.length,B=0;B<G;++B){var E=t.texBindingInfo[B],F=A.texBindingInfo[B];if(E.unit!==F.unit||E.pageId!==F.pageId||
E.semantic!==F.semantic)return!1}G=t.materialParams.length;for(B=0;B<G;)return!1;return!0};q.serializeString=function(t,A,G){for(var B=0,E=t.length,F=0;F<E;++F)A&&(A[G+B]=t.charCodeAt(F)),++B;A&&(A[G+B]=0);++B;return B};q.deserializeString=function(t,A,G){var B=0;t.s="";for(var E=!0;E;){var F=A[G+B];++B;0!==F?t.s+=String.fromCharCode(F):E=!1}return B};q.isDefined=function(t){return null!==t&&void 0!==t};q.isNumber=function(t){return"number"===typeof t};q.isString=z;q.isStringOrNull=function(t){return null==
t||z(t)};q.lerp=function(t,A,G){return t+(A-t)*G};D=function(){function t(){this._arr=[];this._push=this._push.bind(this)}t.prototype._push=function(A,G){this._arr.push(G)};t.prototype.getKeys=function(A){this._arr.length=0;A&&A.forEach(this._push);return this._arr};return t}();q.KeysGetter=D;D=function(){function t(){this._arr=[];this._push=this._push.bind(this)}t.prototype._push=function(A,G){this._arr.push(A)};t.prototype.getValues=function(A){this._arr.length=0;A&&A.forEach(this._push);return this._arr};
return t}();q.ValuesGetter=D;q.getCapType=function(t){switch(t){case "butt":return c.CapType.BUTT;case "round":return c.CapType.ROUND;case "square":return c.CapType.SQUARE;default:return u.error("Cannot interpret unknown cap: "+t),c.CapType.UNKNOWN}};q.getJoinType=function(t){switch(t){case "miter":return c.JoinType.MITER;case "bevel":return c.JoinType.BEVEL;case "round":return c.JoinType.ROUND;default:return u.error("Cannot interpret unknown join: "+t),c.JoinType.UNKNOWN}};q.getVVType=function(t){switch(t){case "opacity":return c.VVType.OPACITY;
case "color":return c.VVType.COLOR;case "rotation":return c.VVType.ROTATION;case "size":return c.VVType.SIZE;default:return u.error("Cannot interpret unknown vv: "+t),null}};q.createArcadeFunction=function(t,A){var G=t.spatialReference,B=t.layer,E=h.createFunction(t.valueExpression),F=new b;return function(I,M){F.repurposeFromGraphicLikeObject(I.geometry,I.attributes,B);var P=M&&new a({viewingMode:M.viewingMode,scale:M.scale});P=h.executeFunction(E,{vars:{$feature:F,$view:P||{}},spatialReference:G});
return A?A(P):P}};q.copyMeshData=function(t,A,G,B,E,F,I){for(var M in F){var P=F[M].stride,aa=F[M].data,ca=G[M].data,ea=P*E.vertexCount/4,T=P*t/4,la=P*E.vertexFrom/4;for(P=0;P<ea;++P)ca[P+T]=aa[P+la]}G=E.indexCount;for(P=0;P<G;++P)B[P+A]=I[P+E.indexFrom]-E.vertexFrom+t};q.C_VBO_INFO=(w={},w[q.C_VBO_GEOMETRY]=35044,w[q.C_VBO_VISIBILITY]=35044,w[q.C_VBO_VISIBILITY_RANGE]=35048,w);q.createGeometryData=function(t,A,G){for(var B=[],E=0;5>E;++E){for(var F={},I=0,M=m(E,t);I<M.length;I++){var P=M[I];F[P]=
{data:G(E,P)}}B.push({data:A(E),buffers:F})}return B};var w})},"esri/layers/vectorTiles/arcade/Dictionary":function(){define(["require","exports","esri/arcade/Dictionary"],function(D,q,a){return a})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],function(D,q,a,b,g){function f(d,c){void 0===c&&(c=!1);if(null===d||void 0===d)return null;if(b.isNumber(d))return b.toNumber(d);if(b.isBoolean(d))return b.toBoolean(d);if(b.isString(d))return b.toString(d);
if(b.isDate(d))return b.toDate(d);if(b.isArray(d)){for(var e=[],k=0;k<d.length;k++)e.push(f(d[k],c));return e}k=new h;k.immutable=!1;for(var l=0,m=Object.keys(d);l<m.length;l++){var n=m[l];e=d[n];void 0!==e&&k.setField(n,f(e,c))}k.immutable=c;return k}var h=function(){function d(c){this.declaredClass="esri.arcade.Dictionary";this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=c instanceof d?c.attributes:void 0===c?{}:null===c?{}:c}d.prototype.field=function(c){var e=c.toLowerCase(),
k=this.attributes[c];if(void 0!==k)return k;for(var l in this.attributes)if(l.toLowerCase()===e)return this.attributes[l];throw Error("Field not Found : "+c);};d.prototype.setField=function(c,e){if(this.immutable)throw Error("Dictionary is Immutable");var k=c.toLowerCase();if(void 0===this.attributes[c])for(var l in this.attributes)if(l.toLowerCase()===k){this.attributes[l]=e;return}this.attributes[c]=e};d.prototype.hasField=function(c){var e=c.toLowerCase();if(void 0!==this.attributes[c])return!0;
for(var k in this.attributes)if(k.toLowerCase()===e)return!0;return!1};d.prototype.keys=function(){var c=[],e;for(e in this.attributes)c.push(e);return c=c.sort()};d.prototype.castToText=function(){var c="",e;for(e in this.attributes){""!==c&&(c+=",");var k=this.attributes[e];null==k?c+=JSON.stringify(e)+":null":b.isBoolean(k)||b.isNumber(k)||b.isString(k)?c+=JSON.stringify(e)+":"+JSON.stringify(k):k instanceof g?c+=JSON.stringify(e)+":"+b.toStringExplicit(k):k instanceof a?c+=JSON.stringify(e)+":"+
b.toStringExplicit(k):k instanceof Array?c+=JSON.stringify(e)+":"+b.toStringExplicit(k):k instanceof Date?c+=JSON.stringify(e)+":"+JSON.stringify(k):null!==k&&"object"===typeof k&&void 0!==k.castToText&&(c+=JSON.stringify(e)+":"+k.castToText())}return"{"+c+"}"};d.convertObjectToArcadeDictionary=function(c,e){void 0===e&&(e=!0);var k=new d;k.immutable=!1;for(var l in c){var m=c[l];void 0!==m&&k.setField(l.toString(),f(m))}k.immutable=e;return k};d.convertJsonToArcade=function(c,e){void 0===e&&(e=!1);
return f(c,e)};return d}();return h})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(D,q){return function(){function a(b){void 0===b&&(b=[]);this._elements=b}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(b){return this._elements[b]};a.prototype.toArray=function(){for(var b=[],g=0;g<this.length();g++)b.push(this.get(g));return b};return a}()})},"esri/arcade/languageUtils":function(){define("require exports ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../libs/luxon/luxon dojo/number dojo/_base/kernel".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v){function r(L,W,ja){return""===W||null===W||void 0===W||W===ja||W===ja?L:L=L.split(W).join(ja)}function y(L){return L instanceof S||L instanceof a||L instanceof Y}function x(L){return z(L)||w(L)||G(L)||u(L)||null===L||L===q.voidOperation||"number"===typeof L?!0:!1}function z(L){return"string"===typeof L||L instanceof String}function u(L){return"boolean"===typeof L}function w(L){return"number"===typeof L}function t(L){return L instanceof Array}function A(L){return L instanceof
b}function G(L){return L instanceof Date}function B(L,W){if(!1===isNaN(L)){if(void 0===W||null===W||""===W)return L.toString();W=r(W,"\u2030","");W=r(W,"\u00a4","");return p.format(L,{pattern:W})}return L.toString()}function E(L,W){var ja=n.DateTime.fromJSDate(L);return void 0===W||null===W||""===W?ja.toISO({suppressMilliseconds:!0}):ja.toFormat(F(W),{locale:v.locale,numberingSystem:"latn"})}function F(L){L=L.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$\x26]");var W="",ja=0;for(L=L.match(/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g);ja<
L.length;ja++){var ra=L[ja];switch(ra){case "D":W+="d";break;case "DD":W+="dd";break;case "DDD":W+="o";break;case "d":W+="c";break;case "ddd":W+="ccc";break;case "dddd":W+="cccc";break;case "M":W+="L";break;case "MM":W+="LL";break;case "MMM":W+="LLL";break;case "MMMM":W+="LLLL";break;case "YY":W+="yy";break;case "Y":case "YYYY":W+="yyyy";break;case "Q":W+="q";break;case "Z":W+="ZZ";break;case "ZZ":W+="ZZZ";break;case "S":W+="'S'";break;case "SS":W+="'SS'";break;case "SSS":W+="u";break;case "A":case "a":W+=
"a";break;case "m":case "mm":case "h":case "hh":case "H":case "HH":case "s":case "ss":case "X":case "x":W+=ra;break;default:W=2<=ra.length&&"["===ra.slice(0,1)&&"]"===ra.slice(-1)?W+("'"+ra.slice(1,-1)+"'"):W+("'"+ra+"'")}}return W}function I(L,W,ja){switch(ja){case "\x3e":return L>W;case "\x3c":return L<W;case "\x3e\x3d":return L>=W;case "\x3c\x3d":return L<=W}return!1}function M(L,W){if(L===W||null===L&&W===q.voidOperation||null===W&&L===q.voidOperation)return!0;if(G(L)&&G(W))return L.getTime()===
W.getTime();if(L instanceof g||L instanceof f)return L.equalityTest(W);if(L instanceof k&&W instanceof k){var ja=L.getCacheValue("_arcadeCacheId"),ra=W.getCacheValue("_arcadeCacheId");if(void 0!==ja&&null!==ja)return ja===ra}return void 0!==L&&void 0!==W&&null!==L&&null!==W&&"object"===typeof L&&"object"===typeof W&&(L._arcadeCacheId===W._arcadeCacheId&&void 0!==L._arcadeCacheId&&null!==L._arcadeCacheId||L._underlyingGraphic===W._underlyingGraphic&&void 0!==L._underlyingGraphic&&null!==L._underlyingGraphic)?
!0:!1}function P(L,W){if(z(L))return L;if(null===L)return"";if(w(L))return B(L,W);if(u(L))return L.toString();if(G(L))return E(L,W);if(L instanceof c)return JSON.stringify(L.toJson());if(t(L)){for(var ja=[],ra=0;ra<L.length;ra++)ja[ra]=ca(L[ra]);return"["+ja.join(",")+"]"}if(L instanceof b){ja=[];for(ra=0;ra<L.length();ra++)ja[ra]=ca(L.get(ra));return"["+ja.join(",")+"]"}return null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText():y(L)?"object, Function":""}function aa(L,W){if(z(L))return L;
if(null===L)return"";if(w(L))return B(L,W);if(u(L))return L.toString();if(G(L))return E(L,W);if(L instanceof c)return L instanceof d?'{"xmin":'+L.xmin.toString()+',"ymin":'+L.ymin.toString()+","+(L.hasZ?'"zmin":'+L.zmin.toString()+",":"")+(L.hasM?'"mmin":'+L.mmin.toString()+",":"")+'"xmax":'+L.xmax.toString()+',"ymax":'+L.ymax.toString()+","+(L.hasZ?'"zmax":'+L.zmax.toString()+",":"")+(L.hasM?'"mmax":'+L.mmax.toString()+",":"")+'"spatialReference":'+X(L.spatialReference)+"}":X(L.toJson(),function(qa,
wa){return qa.key===wa.key?0:"spatialReference"===qa.key?1:"spatialReference"===wa.key||qa.key<wa.key?-1:qa.key>wa.key?1:0});if(t(L)){for(var ja=[],ra=0;ra<L.length;ra++)ja[ra]=ca(L[ra]);return"["+ja.join(",")+"]"}if(L instanceof b){ja=[];for(ra=0;ra<L.length();ra++)ja[ra]=ca(L.get(ra));return"["+ja.join(",")+"]"}return null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText():y(L)?"object, Function":""}function ca(L){return null===L?"null":u(L)||w(L)||z(L)?JSON.stringify(L):L instanceof
c||L instanceof b||L instanceof Array?aa(L):L instanceof Date?JSON.stringify(E(L,"")):null!==L&&"object"===typeof L&&void 0!==L.castToText?L.castToText():"null"}function ea(L,W){return w(L)?L:null===L||""===L?0:G(L)?NaN:u(L)?L?1:0:t(L)||""===L||void 0===L?NaN:void 0!==W&&z(L)?(W=r(W,"\u2030",""),W=r(W,"\u00a4",""),p.parse(L,{pattern:W})):L===q.voidOperation?0:Number(L)}function T(L){var W=/ (\d\d)/,ja=n.DateTime.fromISO(L);return ja.isValid||W.test(L)&&(L=L.replace(W,"T$1"),ja=n.DateTime.fromISO(L),
ja.isValid)?ja:null}function la(L,W){var ja;W.fields.some(function(ra){ra.name.toLowerCase()===L.toLowerCase()&&(ja=ra.domain);return!!ja});return ja}function X(L,W){W||(W={});"function"===typeof W&&(W={cmp:W});var ja="boolean"===typeof W.cycles?W.cycles:!1,ra=W.cmp&&function(wa){return function(sa){return function(V,U){return wa({key:V,value:sa[V]},{key:U,value:sa[U]})}}}(W.cmp),qa=[];return function V(sa){sa&&sa.toJson&&"function"===typeof sa.toJson&&(sa=sa.toJson());if(void 0!==sa){if("number"===
typeof sa)return isFinite(sa)?""+sa:"null";if("object"!==typeof sa)return JSON.stringify(sa);var U;if(Array.isArray(sa)){var da="[";for(U=0;U<sa.length;U++)U&&(da+=","),da+=V(sa[U])||"null";return da+"]"}if(null===sa)return"null";if(-1!==qa.indexOf(sa)){if(ja)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var na=qa.push(sa)-1,ka=Object.keys(sa).sort(ra&&ra(sa));da="";for(U=0;U<ka.length;U++){var xa=ka[U],O=V(sa[xa]);O&&(da&&(da+=","),da+=JSON.stringify(xa)+
":"+O)}qa.splice(na,1);return"{"+da+"}"}}(L)}function R(L,W){if(W instanceof k)L.push([W.x,W.y]);else throw Error("Invalid Argument");}Object.defineProperty(q,"__esModule",{value:!0});q.binaryOperator=q.tick=q.toStringArray=q.autoCastArrayOfPointsToMultiPoint=q.autoCastArrayOfPointsToPolyline=q.autoCastArrayOfPointsToPolygon=q.autoCastFeatureToGeometry=q.stableStringify=q.getDomain=q.getDomainCode=q.getDomainValue=q.fixNullGeometry=q.fixSpatialReference=q.toBoolean=q.toDateTime=q.toDate=q.toNumber=
q.toStringExplicit=q.toNumberArray=q.toString=q.equalityTest=q.greaterThanLessThan=q.standardiseDateFormat=q.formatDate=q.formatNumber=q.generateUUID=q.absRound=q.pcCheck=q.isDate=q.isImmutableArray=q.isFeatureSetCollection=q.isFeatureSet=q.isArray=q.isInteger=q.isNumber=q.isBoolean=q.isString=q.defaultUndefined=q.isSimpleType=q.isFunctionParameter=q.multiReplace=q.continueResult=q.breakResult=q.voidOperation=q.SizzleFunction=q.ReturnResult=q.ImplicitResult=q.NativeFunction=q.SizzleFunctionE=q.NativeFunctionE=
q.ImplicitResultE=q.ReturnResultE=void 0;D=function(){return function(L){this.value=L}}();q.ReturnResultE=D;var fa=function(){return function(L){this.value=L}}();q.ImplicitResultE=fa;var S=function(){return function(L){this.fn=L}}();q.NativeFunctionE=S;var Y=function(){return function(L){this.fn=L}}();q.SizzleFunctionE=Y;q.NativeFunction=S;q.ImplicitResult=fa;q.ReturnResult=D;q.SizzleFunction=Y;q.voidOperation={type:"VOID"};q.breakResult={type:"BREAK"};q.continueResult={type:"CONTINUE"};q.multiReplace=
r;q.isFunctionParameter=y;q.isSimpleType=x;q.defaultUndefined=function(L,W){return void 0===L?W:L};q.isString=z;q.isBoolean=u;q.isNumber=w;q.isInteger=function(L){return"number"===typeof L&&isFinite(L)&&Math.floor(L)===L};q.isArray=t;q.isFeatureSet=function(L){return!0===(L&&L.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===L.declaredRootClass)};q.isFeatureSetCollection=function(L){return!0===(L&&L.declaredRootClass&&"esri.arcade.featureSetCollection"===L.declaredRootClass)};q.isImmutableArray=
A;q.isDate=G;q.pcCheck=function(L,W,ja){if(L.length<W||L.length>ja)throw Error("Function called with wrong number of Parameters");};q.absRound=function(L){return 0>L?-Math.round(-L):Math.round(L)};q.generateUUID=function(){var L=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(W){var ja=(L+16*Math.random())%16|0;L=Math.floor(L/16);return("x"===W?ja:ja&3|8).toString(16)})};q.formatNumber=B;q.formatDate=E;q.standardiseDateFormat=F;q.greaterThanLessThan=function(L,
W,ja){if(null===L){if(null===W||W===q.voidOperation)return I(null,null,ja);if(w(W))return I(0,W,ja);if(z(W)||u(W))return I(0,ea(W),ja);if(G(W))return I(0,W.getTime(),ja)}if(L===q.voidOperation){if(null===W||W===q.voidOperation)return I(null,null,ja);if(w(W))return I(0,W,ja);if(z(W)||u(W))return I(0,ea(W),ja);if(G(W))return I(0,W.getTime(),ja)}else if(w(L)){if(w(W))return I(L,W,ja);if(u(W))return I(L,ea(W),ja);if(null===W||W===q.voidOperation)return I(L,0,ja);if(z(W))return I(L,ea(W),ja);if(G(W))return I(L,
W.getTime(),ja)}else if(z(L)){if(z(W))return I(P(L),P(W),ja);if(G(W))return I(ea(L),W.getTime(),ja);if(w(W))return I(ea(L),W,ja);if(null===W||W===q.voidOperation)return I(ea(L),0,ja);if(u(W))return I(ea(L),ea(W),ja)}else if(G(L)){if(G(W))return I(L,W,ja);if(null===W||W===q.voidOperation)return I(L.getTime(),0,ja);if(w(W))return I(L.getTime(),W,ja);if(u(W)||z(W))return I(L.getTime(),ea(W),ja)}else if(u(L)){if(u(W))return I(L,W,ja);if(w(W))return I(ea(L),ea(W),ja);if(G(W))return I(ea(L),W.getTime(),
ja);if(null===W||W===q.voidOperation)return I(ea(L),0,ja);if(z(W))return I(ea(L),ea(W),ja)}return!M(L,W)||"\x3c\x3d"!==ja&&"\x3e\x3d"!==ja?!1:!0};q.equalityTest=M;q.toString=P;q.toNumberArray=function(L){var W=[];if(!1===t(L))return null;if(L instanceof b){for(var ja=0;ja<L.length();ja++)W[ja]=ea(L.get(ja));return W}for(ja=0;ja<L.length;ja++)W[ja]=ea(L[ja]);return W};q.toStringExplicit=aa;q.toNumber=ea;q.toDate=function(L){return G(L)?L:z(L)&&(L=T(L))?L.toJSDate():null};q.toDateTime=function(L){return G(L)?
n.DateTime.fromJSDate(L):z(L)?T(L):null};q.toBoolean=function(L){return u(L)?L:z(L)?(L=L.toLowerCase(),"true"===L?!0:!1):w(L)?0===L||isNaN(L)?!1:!0:!1};q.fixSpatialReference=function(L,W){if(null===L||void 0===L)return null;if(null===L.spatialReference||void 0===L.spatialReference)L.spatialReference=W;return L};q.fixNullGeometry=function(L){if(null===L)return null;if(L instanceof k)return"NaN"===L.x||null===L.x||isNaN(L.x)?null:L;if(L instanceof l){if(0===L.rings.length)return null;for(var W=0,ja=
L.rings;W<ja.length;W++){var ra=ja[W];if(0<ra.length)return L}return null}if(L instanceof m){if(0===L.paths.length)return null;W=0;for(ja=L.paths;W<ja.length;W++)if(ra=ja[W],0<ra.length)return L;return null}return L instanceof e?0===L.points.length?null:L:L instanceof d?"NaN"===L.xmin||null===L.xmin||isNaN(L.xmin)?null:L:null};q.getDomainValue=function(L,W){if(!L||!L.domain)return W;var ja=null;if("string"===L.field.type||"esriFieldTypeString"===L.field.type)W=P(W);else{if(null===W||void 0===W)return null;
if(""===W)return W;W=ea(W)}for(var ra=0;ra<L.domain.codedValues.length;ra++){var qa=L.domain.codedValues[ra];qa.code===W&&(ja=qa)}return null===ja?W:ja.name};q.getDomainCode=function(L,W){if(!L||!L.domain)return W;var ja=null;W=P(W);for(var ra=0;ra<L.domain.codedValues.length;ra++){var qa=L.domain.codedValues[ra];qa.name===W&&(ja=qa)}return null===ja?W:ja.code};q.getDomain=function(L,W,ja,ra){void 0===ja&&(ja=null);if(!W||!W.fields)return null;for(var qa=null,wa=0;wa<W.fields.length;wa++){var sa=
W.fields[wa];sa.name.toLowerCase()===L.toString().toLowerCase()&&(qa=sa)}if(null===qa)throw Error("Field not found");var V,U;ra||(ra=ja&&W.typeIdField&&ja._field(W.typeIdField));null!=ra&&W.types.some(function(da){return da.id===ra?((V=da.domains&&da.domains[qa.name])&&"inherited"===V.type&&(V=la(qa.name,W),U=!0),!0):!1});U||V||(V=la(L,W));return{field:qa,domain:V}};q.stableStringify=X;q.autoCastFeatureToGeometry=function(L){if(null===L)return null;for(var W=[],ja=0;ja<L.length;ja++){var ra=L[ja];
ra&&(ra.declaredClass&&"esri.arcade.Feature"===ra.declaredClass||"FeatureSetReader"===ra.type)?W.push(ra.geometry()):W.push(ra)}return W};q.autoCastArrayOfPointsToPolygon=function(L,W){if(t(L)||A(L)){var ja=!1,ra=!1,qa=[],wa=W;if(t(L)){for(var sa=0;sa<L.length;sa++){var V=L[sa];R(qa,V)}0<qa.length&&(wa=L[0].spatialReference,ja=L[0].hasZ,ra=L[0].hasM)}else if(L instanceof f)qa=L._elements,0<qa.length&&(ja=L._hasZ,ra=L._hasM,wa=L.get(0).spatialReference);else if(A(L)){sa=0;for(var U=L.toArray();sa<
U.length;sa++)V=U[sa],R(qa,V);0<qa.length&&(wa=L.get(0).spatialReference,ja=!0===L.get(0).hasZ,ra=!0===L.get(0).hasM)}else throw Error("Invalid Argument");if(0===qa.length)return null;!1===(new l({rings:[],spatialReference:{wkid:4326}})).isClockwise(qa)&&(qa=qa.slice(0).reverse());return new l({rings:[qa],spatialReference:wa,hasZ:ja,hasM:ra})}return L};q.autoCastArrayOfPointsToPolyline=function(L,W){if(t(L)||A(L)){var ja=!1,ra=!1,qa=[],wa=W;if(t(L)){for(var sa=0;sa<L.length;sa++){var V=L[sa];R(qa,
V)}0<qa.length&&(wa=L[0].spatialReference,ja=!0===L[0].hasZ,ra=!0===L[0].hasM)}else if(L instanceof f)qa=L._elements,0<qa.length&&(ja=L._hasZ,ra=L._hasM,wa=L.get(0).spatialReference);else if(A(L)){sa=0;for(var U=L.toArray();sa<U.length;sa++)V=U[sa],R(qa,V);0<qa.length&&(wa=L.get(0).spatialReference,ja=!0===L.get(0).hasZ,ra=!0===L.get(0).hasM)}return 0===qa.length?null:new m({paths:[qa],spatialReference:wa,hasZ:ja,hasM:ra})}return L};q.autoCastArrayOfPointsToMultiPoint=function(L,W){if(t(L)||A(L)){var ja=
!1,ra=!1,qa=[],wa=W;if(t(L)){for(var sa=0;sa<L.length;sa++){var V=L[sa];R(qa,V)}0<qa.length&&(wa=L[0].spatialReference,ja=!0===L[0].hasZ,ra=!0===L[0].hasM)}else if(L instanceof f)qa=L._elements,0<qa.length&&(ja=L._hasZ,ra=L._hasM,wa=L.get(0).spatialReference);else if(A(L)){sa=0;for(var U=L.toArray();sa<U.length;sa++)V=U[sa],R(qa,V);0<qa.length&&(wa=L.get(0).spatialReference,ja=!0===L.get(0).hasZ,ra=!0===L.get(0).hasM)}return 0===qa.length?null:new e({points:qa,spatialReference:wa,hasZ:ja,hasM:ra})}return L};
q.toStringArray=function(L,W){void 0===W&&(W=!1);var ja=[];if(null===L)return ja;if(!0===t(L)){for(var ra=0;ra<L.length;ra++){var qa=P(L[ra]);""===qa&&!0!==W||ja.push(qa)}return ja}if(L instanceof b){for(ra=0;ra<L.length();ra++)qa=P(L.get(ra)),""===qa&&!0!==W||ja.push(qa);return ja}return x(L)?(qa=P(L),""===qa&&!0!==W||ja.push(qa),ja):[]};var ia=0;q.tick=function(L){ia++;return 0===ia%100?(ia=0,h.create(function(W){setTimeout(function(){W(L)},0)})):L};q.binaryOperator=function(L,W,ja){switch(ja){case "\x26":return L&
W;case "|":return L|W;case "^":return L^W;case "\x3c\x3c":return L<<W;case "\x3e\x3e":return L>>W;case "\x3e\x3e\x3e":return L>>>W}}})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(D,q){return function(){return function(a,b){this.context=this.definition=null;this.definition=a;this.context=b}}()})},"esri/arcade/ImmutablePathArray":function(){var D=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,
f){g.__proto__=f}||function(g,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(g[h]=f[h])};return q(a,b)};return function(a,b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./ImmutableArray","./ImmutablePointArray"],function(q,a,b,g){return function(f){function h(d,c,e,k,
l){d=f.call(this,d)||this;d._lazyPath=[];d._hasZ=!1;d._hasM=!1;d._hasZ=e;d._hasM=k;d._spRef=c;d._cacheId=l;return d}D(h,f);h.prototype.get=function(d){if(void 0===this._lazyPath[d]){var c=this._elements[d];if(void 0===c)return;this._lazyPath[d]=new g(c,this._spRef,this._hasZ,this._hasM,this._cacheId,d)}return this._lazyPath[d]};h.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof h?!1:d.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()};
return h}(b)})},"esri/arcade/ImmutablePointArray":function(){var D=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,f){g.__proto__=f}||function(g,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(g[h]=f[h])};return q(a,b)};return function(a,b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===
b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./ImmutableArray","../geometry/Point"],function(q,a,b,g){return function(f){function h(d,c,e,k,l,m){d=f.call(this,d)||this;d._lazyPt=[];d._hasZ=!1;d._hasM=!1;d._spRef=c;d._hasZ=e;d._hasM=k;d._cacheId=l;d._partId=m;return d}D(h,f);h.prototype.get=function(d){if(void 0===this._lazyPt[d]){var c=this._elements[d];if(void 0===c)return;var e=this._hasZ,k=this._hasM,l=null;l=e&&!k?new g(c[0],c[1],c[2],void 0,this._spRef):
k&&!e?new g(c[0],c[1],void 0,c[2],this._spRef):e&&k?new g(c[0],c[1],c[2],c[3],this._spRef):new g(c[0],c[1],this._spRef);l.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+d.toString());this._lazyPt[d]=l}return this._lazyPt[d]};h.prototype.equalityTest=function(d){return d===this?!0:null===d||!1===d instanceof h?!1:d.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return h}(b)})},
"esri/arcade/polyfill/promiseUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/all"],function(D,q,a,b){function g(c,e){var k=new a(e);c(function(l){return d(l).then(k.resolve)},k.reject);return k.promise}function f(c){if(c){if("function"!==typeof c.forEach){var e=Object.keys(c),k=e.map(function(m){return c[m]});return f(k).then(function(m){var n={};e.forEach(function(p,v){return n[p]=m[v]});return n})}var l=null;return g(function(m,n){var p=[],v=c.length;0===v&&m(p);c.forEach(function(r){var y=
{promise:r};p.push(y);r.then(function(x){y.value=x})["catch"](function(x){y.error=x}).then(function(){--v;0===v&&(l?n(Error("AbortError")):m(p))})})},function(m){l=m||"Invocation cancellation";c.forEach(function(n){return n.cancel(m)})})}}function h(c){void 0===c&&(c=void 0);var e=new a;e.resolve(c);return e.promise}function d(c){return c&&"function"===typeof c.then?c:h(c)}Object.defineProperty(q,"__esModule",{value:!0});q.createResolver=q.when=q.isPromiseLike=q.wrapCallback=q.timeout=q.after=q.resolve=
q.reject=q.first=q.eachAlwaysValues=q.eachAlways=q.createDeferred=q.create=q.filter=q.all=void 0;q.all=function(c){return b(c)};q.filter=function(c,e){var k=c.slice();return b(c.map(function(l,m){return e(l,m)})).then(function(l){return k.filter(function(m,n){return l[n]})})};q.create=g;q.createDeferred=function(c){var e=null;c=g(function(k,l){e={resolve:k,reject:l}},c);e.promise=c;e.cancel=function(){e.reject(Error("AbortError"))};return e};q.eachAlways=f;q.eachAlwaysValues=function(c){return f(c).then(function(e){return e.filter(function(k){return!!k.value}).map(function(k){return k.value})})};
q.first=function(c){return c&&c.length?g(function(e,k){for(var l=0;l<c.length;l++)c[l].then(e,k)}):h()};q.reject=function(c){var e=new a;e.reject(c);return e.promise};q.resolve=h;q.after=function(c,e){void 0===e&&(e=void 0);var k=0;return g(function(l){k=setTimeout(function(){l(e)},c)},function(){k&&(clearTimeout(k),k=0)})};q.timeout=function(c,e,k){var l=0,m=new a(c.cancel);c.then(function(n){m.isFulfilled()||(m.resolve(n),l&&(clearTimeout(l),l=0))});c["catch"](function(n){m.isFulfilled()||(m.reject(n),
l&&(clearTimeout(l),l=0))});l=setTimeout(function(){m.reject(k||Error("promiseUtils:timeout"))},e);return m.promise};q.wrapCallback=function(c){var e=!1;return g(function(){c(function(k){e||h(k)})},function(){return e=!0})};q.isPromiseLike=function(c){return c&&"function"===typeof c.then};q.when=d;q.createResolver=function(c){var e,k;c=g(function(m,n){e=m;k=n},c);var l=function(m){e(m)};l.resolve=function(m){return e(m)};l.reject=function(m){return k(m)};l.promise=c;return l}})},"esri/libs/luxon/luxon":function(){define(["exports"],
function(D){function q(H,K){for(var C=0;C<K.length;C++){var J=K[C];J.enumerable=J.enumerable||!1;J.configurable=!0;"value"in J&&(J.writable=!0);Object.defineProperty(H,J.key,J)}}function a(H,K,C){K&&q(H.prototype,K);C&&q(H,C);return H}function b(){b=Object.assign||function(H){for(var K=1;K<arguments.length;K++){var C=arguments[K],J;for(J in C)Object.prototype.hasOwnProperty.call(C,J)&&(H[J]=C[J])}return H};return b.apply(this,arguments)}function g(H,K){H.prototype=Object.create(K.prototype);H.prototype.constructor=
H;h(H,K)}function f(H){f=Object.setPrototypeOf?Object.getPrototypeOf:function(K){return K.__proto__||Object.getPrototypeOf(K)};return f(H)}function h(H,K){h=Object.setPrototypeOf||function(C,J){C.__proto__=J;return C};return h(H,K)}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(H){return!1}}function c(H,K,C){c=d()?Reflect.construct:
function(J,N,Z){var ma=[null];ma.push.apply(ma,N);J=new (Function.bind.apply(J,ma));Z&&h(J,Z.prototype);return J};return c.apply(null,arguments)}function e(H){var K="function"===typeof Map?new Map:void 0;e=function(C){function J(){return c(C,arguments,f(this).constructor)}if(null===C||-1===Function.toString.call(C).indexOf("[native code]"))return C;if("function"!==typeof C)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof K){if(K.has(C))return K.get(C);
K.set(C,J)}J.prototype=Object.create(C.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}});return h(J,C)};return e(H)}function k(H,K){if(H){if("string"===typeof H)return l(H,K);var C=Object.prototype.toString.call(H).slice(8,-1);"Object"===C&&H.constructor&&(C=H.constructor.name);if("Map"===C||"Set"===C)return Array.from(H);if("Arguments"===C||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return l(H,K)}}function l(H,K){if(null==K||K>H.length)K=H.length;for(var C=0,J=
Array(K);C<K;C++)J[C]=H[C];return J}function m(H,K){var C="undefined"!==typeof Symbol&&H[Symbol.iterator]||H["@@iterator"];if(C)return(C=C.call(H)).next.bind(C);if(Array.isArray(H)||(C=k(H))||K&&H&&"number"===typeof H.length){C&&(H=C);var J=0;return function(){return J>=H.length?{done:!0}:{done:!1,value:H[J++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function n(H){return"undefined"===
typeof H}function p(H){return"number"===typeof H}function v(H){return"number"===typeof H&&0===H%1}function r(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(H){return!1}}function y(H,K,C){if(0!==H.length)return H.reduce(function(J,N){var Z=[K(N),N];return J?C(J[0],Z[0])===J[0]?J:Z:Z},null)[1]}function x(H,K){return K.reduce(function(C,J){C[J]=H[J];return C},{})}function z(H,K){return Object.prototype.hasOwnProperty.call(H,K)}function u(H,K,C){return v(H)&&H>=K&&H<=C}function w(H,
K){void 0===K&&(K=2);var C=0>H?"-":"",J=C?-1*H:H;J=J.toString().length<K?("0".repeat(K)+J).slice(-K):J.toString();return""+C+J}function t(H){if(!n(H)&&null!==H&&""!==H)return parseInt(H,10)}function A(H){if(!n(H)&&null!==H&&""!==H)return H=1E3*parseFloat("0."+H),Math.floor(H)}function G(H,K,C){void 0===C&&(C=!1);K=Math.pow(10,K);return(C?Math.trunc:Math.round)(H*K)/K}function B(H){return 0===H%4&&(0!==H%100||0===H%400)}function E(H,K){var C=K-1;C=C-12*Math.floor(C/12)+1;return 2===C?B(H+(K-C)/12)?
29:28:[31,null,31,30,31,30,31,31,30,31,30,31][C-1]}function F(H){var K=Date.UTC(H.year,H.month-1,H.day,H.hour,H.minute,H.second,H.millisecond);100>H.year&&0<=H.year&&(K=new Date(K),K.setUTCFullYear(K.getUTCFullYear()-1900));return+K}function I(H){var K=H-1;K=(K+Math.floor(K/4)-Math.floor(K/100)+Math.floor(K/400))%7;return 4===(H+Math.floor(H/4)-Math.floor(H/100)+Math.floor(H/400))%7||3===K?53:52}function M(H){return 99<H?H:60<H?1900+H:2E3+H}function P(H,K,C,J){void 0===J&&(J=null);H=new Date(H);var N=
{hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};J&&(N.timeZone=J);K=b({timeZoneName:K},N);return(C=(new Intl.DateTimeFormat(C,K)).formatToParts(H).find(function(Z){return"timezonename"===Z.type.toLowerCase()}))?C.value:null}function aa(H,K){var C=parseInt(H,10);Number.isNaN(C)&&(C=0);var J=parseInt(K,10)||0;J=0>C||Object.is(C,-0)?-J:J;return 60*C+J}function ca(H){var K=Number(H);if("boolean"===typeof H||""===H||Number.isNaN(K))throw new $a("Invalid unit value "+
H);return K}function ea(H,K){var C={},J;for(J in H)if(z(H,J)){var N=H[J];void 0!==N&&null!==N&&(C[K(J)]=ca(N))}return C}function T(H,K){var C=Math.trunc(Math.abs(H/60)),J=Math.trunc(Math.abs(H%60)),N=0<=H?"+":"-";switch(K){case "short":return""+N+w(C,2)+":"+w(J,2);case "narrow":return""+N+C+(0<J?":"+J:"");case "techie":return""+N+w(C,2)+w(J,2);default:throw new RangeError("Value format "+K+" is out of range for property format");}}function la(H){return x(H,["hour","minute","second","millisecond"])}
function X(H){switch(H){case "narrow":return[].concat(Pc);case "short":return[].concat(Sb);case "long":return[].concat(Qc);case "numeric":return"1 2 3 4 5 6 7 8 9 10 11 12".split(" ");case "2-digit":return"01 02 03 04 05 06 07 08 09 10 11 12".split(" ");default:return null}}function R(H){switch(H){case "narrow":return[].concat(Rc);case "short":return[].concat(Tb);case "long":return[].concat(Ub);case "numeric":return"1234567".split("");default:return null}}function fa(H){switch(H){case "narrow":return[].concat(Sc);
case "short":return[].concat(Tc);case "long":return[].concat(Uc);default:return null}}function S(H,K,C,J){void 0===C&&(C="always");void 0===J&&(J=!1);var N={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},Z=-1===["hours","minutes","seconds"].indexOf(H);if("auto"===C&&Z)switch(C="days"===H,K){case 1:return C?"tomorrow":"next "+N[H][0];case -1:return C?"yesterday":
"last "+N[H][0];case 0:return C?"today":"this "+N[H][0]}C=Object.is(K,-0)||0>K;K=Math.abs(K);Z=1===K;var ma=N[H];H=J?Z?ma[1]:ma[2]||ma[1]:Z?N[H][0]:H;return C?K+" "+H+" ago":"in "+K+" "+H}function Y(H,K){for(var C="",J=m(H),N;!(N=J()).done;)N=N.value,C=N.literal?C+N.val:C+K(N.val);return C}function ia(H,K){var C;if(n(H)||null===H)return K;if(H instanceof jb)return H;if("string"===typeof H){var J=H.toLowerCase();return"local"===J||"system"===J?K:"utc"===J||"gmt"===J?ab.utcInstance:null!=(C=db.parseGMTOffset(H))?
ab.instance(C):db.isValidSpecifier(J)?db.create(H):ab.parseSpecifier(J)||new Cb(H)}return p(H)?ab.instance(H):"object"===typeof H&&H.offset&&"number"===typeof H.offset?H:new Cb(H)}function L(H,K){void 0===K&&(K={});var C=JSON.stringify([H,K]),J=Db[C];J||(J=new Intl.DateTimeFormat(H,K),Db[C]=J);return J}function W(H){for(var K=[],C=1;12>=C;C++){var J=Qa.utc(2016,C,1);K.push(H(J))}return K}function ja(H){for(var K=[],C=1;7>=C;C++){var J=Qa.utc(2016,11,13+C);K.push(H(J))}return K}function ra(H,K,C,J,
N){H=H.listingMode(C);return"error"===H?null:"en"===H?J(K):N(K)}function qa(){for(var H=arguments.length,K=Array(H),C=0;C<H;C++)K[C]=arguments[C];H=K.reduce(function(J,N){return J+N.source},"");return RegExp("^"+H+"$")}function wa(){for(var H=arguments.length,K=Array(H),C=0;C<H;C++)K[C]=arguments[C];return function(J){return K.reduce(function(N,Z){var ma=N[0],oa=N[1],ta=Z(J,N[2]),ya=ta[1],Da=ta[2];return[b({},ma,ta[0]),oa||ya,Da]},[{},null,1]).slice(0,2)}}function sa(H){if(null==H)return[null,null];
for(var K=arguments.length,C=Array(1<K?K-1:0),J=1;J<K;J++)C[J-1]=arguments[J];for(K=0;K<C.length;K++){var N=C[K];J=N[1];if(N=N[0].exec(H))return J(N)}return[null,null]}function V(){for(var H=arguments.length,K=Array(H),C=0;C<H;C++)K[C]=arguments[C];return function(J,N){var Z={},ma;for(ma=0;ma<K.length;ma++)Z[K[ma]]=t(J[N+ma]);return[Z,null,N+ma]}}function U(H,K,C){H=H[K];return n(H)?C:t(H)}function da(H,K){return[{year:U(H,K),month:U(H,K+1,1),day:U(H,K+2,1)},null,K+3]}function na(H,K){return[{hours:U(H,
K,0),minutes:U(H,K+1,0),seconds:U(H,K+2,0),milliseconds:A(H[K+3])},null,K+4]}function ka(H,K){var C=!H[K]&&!H[K+1],J=aa(H[K+1],H[K+2]);return[{},C?null:ab.instance(J),K+3]}function xa(H,K){return[{},H[K]?db.create(H[K]):null,K+1]}function O(H){var K=H[2],C=H[3],J=H[4],N=H[5],Z=H[6],ma=H[7],oa=H[8],ta="-"===H[0][0],ya=ma&&"-"===ma[0],Da=function(La,Ga){void 0===Ga&&(Ga=!1);return void 0!==La&&(Ga||La&&ta)?-La:La};return[{years:Da(t(H[1])),months:Da(t(K)),weeks:Da(t(C)),days:Da(t(J)),hours:Da(t(N)),
minutes:Da(t(Z)),seconds:Da(t(ma),"-0"===ma),milliseconds:Da(A(oa),ya)}]}function Q(H,K,C,J,N,Z,ma){K={year:2===K.length?M(t(K)):t(K),month:Sb.indexOf(C)+1,day:t(J),hour:t(N),minute:t(Z)};ma&&(K.second=t(ma));H&&(K.weekday=3<H.length?Ub.indexOf(H)+1:Tb.indexOf(H)+1);return K}function ba(H){var K=H[8],C=H[9],J=H[10],N=H[11];H=Q(H[1],H[4],H[3],H[2],H[5],H[6],H[7]);K=K?Vc[K]:C?0:aa(J,N);return[H,new ab(K)]}function ha(H){return[Q(H[1],H[4],H[3],H[2],H[5],H[6],H[7]),ab.utcInstance]}function pa(H){return[Q(H[1],
H[7],H[2],H[3],H[4],H[5],H[6]),ab.utcInstance]}function za(H,K,C){void 0===C&&(C=!1);H={values:C?K.values:b({},H.values,K.values||{}),loc:H.loc.clone(K.loc),conversionAccuracy:K.conversionAccuracy||H.conversionAccuracy};return new Wa(H)}function Fa(H,K,C,J,N){H=H[N][C];var Z=K[C]/H;Z=Math.sign(Z)!==Math.sign(J[N])&&0!==J[N]&&1>=Math.abs(Z)?0>Z?Math.floor(Z):Math.ceil(Z):Math.trunc(Z);J[N]+=Z;K[C]-=Z*H}function Ha(H,K){Wc.reduce(function(C,J){if(n(K[J]))return C;C&&Fa(H,K,C,K,J);return J},null)}function Ba(H){if(p(H))return Wa.fromMillis(H);
if(Wa.isDuration(H))return H;if("object"===typeof H)return Wa.fromObject(H);throw new $a("Unknown duration argument "+H+" of type "+typeof H);}function va(H,K){var C=function(J){return J.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()};C=C(K)-C(H);return Math.floor(Wa.fromMillis(C).as("days"))}function Ca(H,K,C){for(var J={},N,Z,ma=0,oa=[["years",function(Ga,Ka){return Ka.year-Ga.year}],["quarters",function(Ga,Ka){return Ka.quarter-Ga.quarter}],["months",function(Ga,Ka){return Ka.month-Ga.month+
12*(Ka.year-Ga.year)}],["weeks",function(Ga,Ka){var bb=va(Ga,Ka);return(bb-bb%7)/7}],["days",va]];ma<oa.length;ma++){var ta=oa[ma],ya=ta[0];ta=ta[1];if(0<=C.indexOf(ya)){var Da;N=ya;ta=ta(H,K);Z=H.plus((Da={},Da[ya]=ta,Da));if(Z>K){var La;H=H.plus((La={},La[ya]=ta-1,La));--ta}else H=Z;J[ya]=ta}}return[H,J,Z,N]}function Aa(H,K,C,J){var N=Ca(H,K,C);H=N[0];var Z=N[1],ma=N[2],oa=N[3];N=K-H;C=C.filter(function(Da){return 0<=["hours","minutes","seconds","milliseconds"].indexOf(Da)});if(0===C.length){if(ma<
K){var ta;ma=H.plus((ta={},ta[oa]=1,ta))}ma!==H&&(Z[oa]=(Z[oa]||0)+N/(ma-H))}K=Wa.fromObject(Z,J);if(0<C.length){var ya;return(ya=Wa.fromMillis(N,J)).shiftTo.apply(ya,C).plus(K)}return K}function Na(H,K){var C=H.numberingSystem;void 0===K&&(K="");return new RegExp(""+Eb[C||"latn"]+K)}function Ea(H,K){void 0===K&&(K=function(C){return C});return{regex:H,deser:function(C){var J=K;C=C[0];var N=parseInt(C,10);if(isNaN(N)){N="";for(var Z=0;Z<C.length;Z++){var ma=C.charCodeAt(Z);if(-1!==C[Z].search(Eb.hanidec))N+=
Xc.indexOf(C[Z]);else for(ya in Vb){var oa=Vb[ya],ta=oa[0];oa=oa[1];ma>=ta&&ma<=oa&&(N+=ma-ta)}}var ya=parseInt(N,10)}else ya=N;return J(ya)}}}function Sa(H){return H.replace(/\./g,"\\.?").replace(Fb,Wb)}function Ia(H,K){return null===H?null:{regex:RegExp(H.map(Sa).join("|")),deser:function(C){var J=C[0];return H.findIndex(function(N){return J.replace(/\./g,"").replace(Fb," ").toLowerCase()===N.replace(/\./g,"").replace(Fb," ").toLowerCase()})+K}}}function Xa(H,K){return{regex:H,deser:function(C){return aa(C[1],
C[2])},groups:K}}function Ja(H){return{regex:H,deser:function(K){return K[0]}}}function Oa(H,K){var C=Na(K),J=Na(K,"{2}"),N=Na(K,"{3}"),Z=Na(K,"{4}"),ma=Na(K,"{6}"),oa=Na(K,"{1,2}"),ta=Na(K,"{1,3}"),ya=Na(K,"{1,6}"),Da=Na(K,"{1,9}"),La=Na(K,"{2,4}"),Ga=Na(K,"{4,6}"),Ka=function(Za){return{regex:RegExp(Za.val.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$\x26")),deser:function(Yc){return Yc[0]},literal:!0}},bb=function(Za){if(H.literal)return Ka(Za);switch(Za.val){case "G":return Ia(K.eras("short",!1),
0);case "GG":return Ia(K.eras("long",!1),0);case "y":return Ea(ya);case "yy":return Ea(La,M);case "yyyy":return Ea(Z);case "yyyyy":return Ea(Ga);case "yyyyyy":return Ea(ma);case "M":return Ea(oa);case "MM":return Ea(J);case "MMM":return Ia(K.months("short",!0,!1),1);case "MMMM":return Ia(K.months("long",!0,!1),1);case "L":return Ea(oa);case "LL":return Ea(J);case "LLL":return Ia(K.months("short",!1,!1),1);case "LLLL":return Ia(K.months("long",!1,!1),1);case "d":return Ea(oa);case "dd":return Ea(J);
case "o":return Ea(ta);case "ooo":return Ea(N);case "HH":return Ea(J);case "H":return Ea(oa);case "hh":return Ea(J);case "h":return Ea(oa);case "mm":return Ea(J);case "m":return Ea(oa);case "q":return Ea(oa);case "qq":return Ea(J);case "s":return Ea(oa);case "ss":return Ea(J);case "S":return Ea(ta);case "SSS":return Ea(N);case "u":return Ja(Da);case "a":return Ia(K.meridiems(),0);case "kkkk":return Ea(Z);case "kk":return Ea(La,M);case "W":return Ea(oa);case "WW":return Ea(J);case "E":case "c":return Ea(C);
case "EEE":return Ia(K.weekdays("short",!1,!1),1);case "EEEE":return Ia(K.weekdays("long",!1,!1),1);case "ccc":return Ia(K.weekdays("short",!0,!1),1);case "cccc":return Ia(K.weekdays("long",!0,!1),1);case "Z":case "ZZ":return Xa(new RegExp("([+-]"+oa.source+")(?::("+J.source+"))?"),2);case "ZZZ":return Xa(new RegExp("([+-]"+oa.source+")("+J.source+")?"),2);case "z":return Ja(/[a-z_+-/]{1,256}?/i);default:return Ka(Za)}}(H)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};bb.token=
H;return bb}function Ta(H){return["^"+H.map(function(K){return K.regex}).reduce(function(K,C){return K+"("+C.source+")"},"")+"$",H]}function Pa(H,K,C){if(H=H.match(K)){K={};var J=1,N;for(N in C)if(z(C,N)){var Z=C[N],ma=Z.groups?Z.groups+1:1;!Z.literal&&Z.token&&(K[Z.token.val[0]]=Z.deser(H.slice(J,J+ma)));J+=ma}return[H,K]}return[H,{}]}function ua(H){var K=function(J){switch(J){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":case "H":return"hour";case "d":return"day";
case "o":return"ordinal";case "L":case "M":return"month";case "y":return"year";case "E":case "c":return"weekday";case "W":return"weekNumber";case "k":return"weekYear";case "q":return"quarter";default:return null}};var C=n(H.Z)?n(H.z)?null:db.create(H.z):new ab(H.Z);n(H.q)||(H.M=3*(H.q-1)+1);n(H.h)||(12>H.h&&1===H.a?H.h+=12:12===H.h&&0===H.a&&(H.h=0));0===H.G&&H.y&&(H.y=-H.y);n(H.u)||(H.S=A(H.u));return[Object.keys(H).reduce(function(J,N){var Z=K(N);Z&&(J[Z]=H[N]);return J},{}),C]}function Ma(){Gb||
(Gb=Qa.fromMillis(1555555555555));return Gb}function Hb(H,K){if(H.literal)return H;var C=fb.macroTokenToFormatOpts(H.val);if(!C)return H;var J=fb.create(K,C).formatDateTimeParts(Ma()).map(function(N){var Z=N.type;N=N.value;"literal"===Z?Z={literal:!0,val:N}:(N=C[Z],Z=Zc[Z],"object"===typeof Z&&(Z=Z[N]),Z=Z?{literal:!1,val:Z}:void 0);return Z});return J.includes(void 0)?H:J}function eb(H,K){var C;return(C=Array.prototype).concat.apply(C,H.map(function(J){return Hb(J,K)}))}function tb(H,K,C){C=eb(fb.parseFormat(C),
H);var J=C.map(function(ta){return Oa(ta,H)}),N=J.find(function(ta){return ta.invalidReason});if(N)return{input:K,tokens:C,invalidReason:N.invalidReason};N=Ta(J);J=RegExp(N[0],"i");var Z=Pa(K,J,N[1]);N=Z[0];var ma=(Z=Z[1])?ua(Z):[null,null],oa=ma[0];ma=ma[1];if(z(Z,"a")&&z(Z,"H"))throw new mb("Can't include meridiem when specifying 24-hour format");return{input:K,tokens:C,regex:J,rawMatches:N,matches:Z,result:oa,zone:ma}}function Ya(H,K){return new cb("unit out of range","you specified "+K+" (of type "+
typeof K+") as a "+H+", which is invalid")}function ub(H,K,C){H=(new Date(Date.UTC(H,K-1,C))).getUTCDay();return 0===H?7:H}function vb(H,K){var C=B(H)?Ib:Jb,J=C.findIndex(function(N){return N<K});return{month:J+1,day:K-C[J]}}function gb(H){var K=H.year,C=H.month,J=H.day;var N=J+(B(K)?Ib:Jb)[C-1];C=ub(K,C,J);N=Math.floor((N-C+10)/7);1>N?(--K,N=I(K)):N>I(K)&&(K+=1,N=1);return b({weekYear:K,weekNumber:N,weekday:C},la(H))}function wb(H){var K=H.weekYear,C=H.weekNumber,J=H.weekday,N=ub(K,1,4),Z=B(K)?366:
365;C=7*C+J-N-3;1>C?(Z=K-1,C+=B(Z)?366:365):C>Z?(Z=K+1,C-=B(K)?366:365):Z=K;K=vb(Z,C);return b({year:Z,month:K.month,day:K.day},la(H))}function nb(H){var K=H.year;var C=H.month;C=H.day+(B(K)?Ib:Jb)[C-1];return b({year:K,ordinal:C},la(H))}function Ua(H){var K=H.year,C=vb(K,H.ordinal);return b({year:K,month:C.month,day:C.day},la(H))}function Xb(H){var K=v(H.year),C=u(H.month,1,12),J=u(H.day,1,E(H.year,H.month));return K?C?J?!1:Ya("day",H.day):Ya("month",H.month):Ya("year",H.year)}function Yb(H){var K=
H.hour,C=H.minute,J=H.second;H=H.millisecond;var N=u(K,0,23)||24===K&&0===C&&0===J&&0===H,Z=u(C,0,59),ma=u(J,0,59),oa=u(H,0,999);return N?Z?ma?oa?!1:Ya("millisecond",H):Ya("second",J):Ya("minute",C):Ya("hour",K)}function xb(H){return new cb("unsupported zone",'the zone "'+H.name+'" is not supported')}function Kb(H){null===H.weekData&&(H.weekData=gb(H.c));return H.weekData}function ob(H,K){var C={ts:H.ts,zone:H.zone,c:H.c,o:H.o,loc:H.loc,invalid:H.invalid};return new Qa(b({},C,K,{old:C}))}function Zb(H,
K,C){var J=H-6E4*K,N=C.offset(J);if(K===N)return[J,K];J-=6E4*(N-K);K=C.offset(J);return N===K?[J,N]:[H-6E4*Math.min(N,K),Math.max(N,K)]}function $b(H,K){var C=new Date(H+6E4*K);return{year:C.getUTCFullYear(),month:C.getUTCMonth()+1,day:C.getUTCDate(),hour:C.getUTCHours(),minute:C.getUTCMinutes(),second:C.getUTCSeconds(),millisecond:C.getUTCMilliseconds()}}function yb(H,K,C){return Zb(F(H),K,C)}function ac(H,K){var C=H.o,J=H.c.year+Math.trunc(K.years),N=H.c.month+Math.trunc(K.months)+3*Math.trunc(K.quarters);
N=b({},H.c,{year:J,month:N,day:Math.min(H.c.day,E(J,N))+Math.trunc(K.days)+7*Math.trunc(K.weeks)});J=Wa.fromObject({years:K.years-Math.trunc(K.years),quarters:K.quarters-Math.trunc(K.quarters),months:K.months-Math.trunc(K.months),weeks:K.weeks-Math.trunc(K.weeks),days:K.days-Math.trunc(K.days),hours:K.hours,minutes:K.minutes,seconds:K.seconds,milliseconds:K.milliseconds}).as("milliseconds");N=F(N);N=Zb(N,C,H.zone);C=N[0];N=N[1];0!==J&&(C+=J,N=H.zone.offset(C));return{ts:C,o:N}}function pb(H,K,C,J,
N){var Z=C.setZone,ma=C.zone;return H&&0!==Object.keys(H).length?(H=Qa.fromObject(H,b({},C,{zone:K||ma})),Z?H:H.setZone(ma)):Qa.invalid(new cb("unparsable",'the input "'+N+"\" can't be parsed as "+J))}function kb(H,K,C){void 0===C&&(C=!0);return H.isValid?fb.create(Va.create("en-US"),{allowZ:C,forceSimple:!0}).formatDateTimeFromString(H,K):null}function bc(H,K){var C=K.suppressSeconds,J=K.suppressMilliseconds;J=void 0===J?!1:J;var N=K.includeOffset,Z=K.includePrefix;Z=void 0===Z?!1:Z;var ma=K.includeZone;
ma=void 0===ma?!1:ma;var oa=K.spaceZone,ta=K.format;ta=void 0===ta?"extended":ta;var ya="basic"===ta?"HHmm":"HH:mm";void 0!==C&&C&&0===H.second&&0===H.millisecond||(ya+="basic"===ta?"ss":":ss",J&&0===H.millisecond||(ya+=".SSS"));(ma||N)&&(void 0===oa?0:oa)&&(ya+=" ");ma?ya+="z":N&&(ya+="basic"===ta?"ZZZ":"ZZ");C=kb(H,ya);Z&&(C="T"+C);return C}function cc(H){var K={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",
quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[H.toLowerCase()];if(!K)throw new dc(H);return K}function ec(H,K){var C=ia(K.zone,Ra.defaultZone),J=Va.fromObject(K),N=Ra.now();if(!n(H.year)){var Z=m(fc);for(var ma;!(ma=Z()).done;)ma=ma.value,n(H[ma])&&(H[ma]=gc[ma]);if(Z=Xb(H)||
Yb(H))return Qa.invalid(Z);N=C.offset(N);Z=yb(H,N,C);N=Z[0];Z=Z[1]}return new Qa({ts:N,zone:C,loc:J,o:Z})}function hc(H,K,C){var J=n(C.round)?!0:C.round,N=function(ya,Da){ya=G(ya,J||C.calendary?0:2,!0);return K.loc.clone(C).relFormatter(C).format(ya,Da)},Z=function(ya){return C.calendary?K.hasSame(H,ya)?0:K.startOf(ya).diff(H.startOf(ya),ya).get(ya):K.diff(H,ya).get(ya)};if(C.unit)return N(Z(C.unit),C.unit);for(var ma=m(C.units),oa;!(oa=ma()).done;){oa=oa.value;var ta=Z(oa);if(1<=Math.abs(ta))return N(ta,
oa)}return N(H>K?-0:0,C.units[C.units.length-1])}function ic(H){var K={};0<H.length&&"object"===typeof H[H.length-1]?(K=H[H.length-1],H=Array.from(H).slice(0,H.length-1)):H=Array.from(H);return[K,H]}function qb(H){if(Qa.isDateTime(H))return H;if(H&&H.valueOf&&p(H.valueOf()))return Qa.fromJSDate(H);if(H&&"object"===typeof H)return Qa.fromObject(H);throw new $a("Unknown datetime argument: "+H+", of type "+typeof H);}var ib=function(H){function K(){return H.apply(this,arguments)||this}g(K,H);return K}(e(Error)),
$c=function(H){function K(C){return H.call(this,"Invalid DateTime: "+C.toMessage())||this}g(K,H);return K}(ib),ad=function(H){function K(C){return H.call(this,"Invalid Interval: "+C.toMessage())||this}g(K,H);return K}(ib),bd=function(H){function K(C){return H.call(this,"Invalid Duration: "+C.toMessage())||this}g(K,H);return K}(ib),mb=function(H){function K(){return H.apply(this,arguments)||this}g(K,H);return K}(ib),dc=function(H){function K(C){return H.call(this,"Invalid unit "+C)||this}g(K,H);return K}(ib),
$a=function(H){function K(){return H.apply(this,arguments)||this}g(K,H);return K}(ib),hb=function(H){function K(){return H.call(this,"Zone is an abstract class")||this}g(K,H);return K}(ib),Lb={year:"numeric",month:"numeric",day:"numeric"},jc={year:"numeric",month:"short",day:"numeric"},cd={year:"numeric",month:"short",day:"numeric",weekday:"short"},kc={year:"numeric",month:"long",day:"numeric"},lc={year:"numeric",month:"long",day:"numeric",weekday:"long"},mc={hour:"numeric",minute:"numeric"},nc={hour:"numeric",
minute:"numeric",second:"numeric"},oc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},pc={hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},qc={hour:"numeric",minute:"numeric",hourCycle:"h23"},rc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"},sc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"short"},tc={hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23",timeZoneName:"long"},uc={year:"numeric",
month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},vc={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},wc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},xc={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},dd={year:"numeric",month:"short",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric"},yc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",
timeZoneName:"short"},zc={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},Ac={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",timeZoneName:"long"},Bc={year:"numeric",month:"long",day:"numeric",weekday:"long",hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"},Cc=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/,Qc="January February March April May June July August September October November December".split(" "),
Sb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Pc="JFMAMJJASOND".split(""),Ub="Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),Tb="Mon Tue Wed Thu Fri Sat Sun".split(" "),Rc="MTWTFSS".split(""),Dc=["AM","PM"],Uc=["Before Christ","Anno Domini"],Tc=["BC","AD"],Sc=["B","A"],ed={D:Lb,DD:jc,DDD:kc,DDDD:lc,t:mc,tt:nc,ttt:oc,tttt:pc,T:qc,TT:rc,TTT:sc,TTTT:tc,f:uc,ff:wc,fff:yc,ffff:Ac,F:vc,FF:xc,FFF:zc,FFFF:Bc},fb=function(){function H(C,J){this.opts=J;this.loc=C;this.systemLoc=
null}H.create=function(C,J){void 0===J&&(J={});return new H(C,J)};H.parseFormat=function(C){for(var J=null,N="",Z=!1,ma=[],oa=0;oa<C.length;oa++){var ta=C.charAt(oa);"'"===ta?(0<N.length&&ma.push({literal:Z,val:N}),J=null,N="",Z=!Z):Z?N+=ta:ta===J?N+=ta:(0<N.length&&ma.push({literal:!1,val:N}),J=N=ta)}0<N.length&&ma.push({literal:Z,val:N});return ma};H.macroTokenToFormatOpts=function(C){return ed[C]};var K=H.prototype;K.formatWithSystemDefault=function(C,J){null===this.systemLoc&&(this.systemLoc=
this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(C,b({},this.opts,J)).format()};K.formatDateTime=function(C,J){void 0===J&&(J={});return this.loc.dtFormatter(C,b({},this.opts,J)).format()};K.formatDateTimeParts=function(C,J){void 0===J&&(J={});return this.loc.dtFormatter(C,b({},this.opts,J)).formatToParts()};K.resolvedOptions=function(C,J){void 0===J&&(J={});return this.loc.dtFormatter(C,b({},this.opts,J)).resolvedOptions()};K.num=function(C,J){void 0===J&&(J=0);if(this.opts.forceSimple)return w(C,
J);var N=b({},this.opts);0<J&&(N.padTo=J);return this.loc.numberFormatter(N).format(C)};K.formatDateTimeFromString=function(C,J){var N=this,Z="en"===this.loc.listingMode(),ma=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,oa=function(Ga,Ka){return N.loc.extract(C,Ga,Ka)},ta=function(Ga){return C.isOffsetFixed&&0===C.offset&&Ga.allowZ?"Z":C.isValid?C.zone.formatOffset(C.ts,Ga.format):""},ya=function(Ga,Ka){return Z?X(Ga)[C.month-1]:oa(Ka?{month:Ga}:{month:Ga,day:"numeric"},"month")},
Da=function(Ga,Ka){return Z?R(Ga)[C.weekday-1]:oa(Ka?{weekday:Ga}:{weekday:Ga,month:"long",day:"numeric"},"weekday")},La=function(Ga){return Z?fa(Ga)[0>C.year?0:1]:oa({era:Ga},"era")};return Y(H.parseFormat(J),function(Ga){switch(Ga){case "S":return N.num(C.millisecond);case "u":case "SSS":return N.num(C.millisecond,3);case "s":return N.num(C.second);case "ss":return N.num(C.second,2);case "m":return N.num(C.minute);case "mm":return N.num(C.minute,2);case "h":return N.num(0===C.hour%12?12:C.hour%
12);case "hh":return N.num(0===C.hour%12?12:C.hour%12,2);case "H":return N.num(C.hour);case "HH":return N.num(C.hour,2);case "Z":return ta({format:"narrow",allowZ:N.opts.allowZ});case "ZZ":return ta({format:"short",allowZ:N.opts.allowZ});case "ZZZ":return ta({format:"techie",allowZ:N.opts.allowZ});case "ZZZZ":return C.zone.offsetName(C.ts,{format:"short",locale:N.loc.locale});case "ZZZZZ":return C.zone.offsetName(C.ts,{format:"long",locale:N.loc.locale});case "z":return C.zoneName;case "a":return Z?
Dc[12>C.hour?0:1]:oa({hour:"numeric",hourCycle:"h12"},"dayperiod");case "d":return ma?oa({day:"numeric"},"day"):N.num(C.day);case "dd":return ma?oa({day:"2-digit"},"day"):N.num(C.day,2);case "c":return N.num(C.weekday);case "ccc":return Da("short",!0);case "cccc":return Da("long",!0);case "ccccc":return Da("narrow",!0);case "E":return N.num(C.weekday);case "EEE":return Da("short",!1);case "EEEE":return Da("long",!1);case "EEEEE":return Da("narrow",!1);case "L":return ma?oa({month:"numeric",day:"numeric"},
"month"):N.num(C.month);case "LL":return ma?oa({month:"2-digit",day:"numeric"},"month"):N.num(C.month,2);case "LLL":return ya("short",!0);case "LLLL":return ya("long",!0);case "LLLLL":return ya("narrow",!0);case "M":return ma?oa({month:"numeric"},"month"):N.num(C.month);case "MM":return ma?oa({month:"2-digit"},"month"):N.num(C.month,2);case "MMM":return ya("short",!1);case "MMMM":return ya("long",!1);case "MMMMM":return ya("narrow",!1);case "y":return ma?oa({year:"numeric"},"year"):N.num(C.year);
case "yy":return ma?oa({year:"2-digit"},"year"):N.num(C.year.toString().slice(-2),2);case "yyyy":return ma?oa({year:"numeric"},"year"):N.num(C.year,4);case "yyyyyy":return ma?oa({year:"numeric"},"year"):N.num(C.year,6);case "G":return La("short");case "GG":return La("long");case "GGGGG":return La("narrow");case "kk":return N.num(C.weekYear.toString().slice(-2),2);case "kkkk":return N.num(C.weekYear,4);case "W":return N.num(C.weekNumber);case "WW":return N.num(C.weekNumber,2);case "o":return N.num(C.ordinal);
case "ooo":return N.num(C.ordinal,3);case "q":return N.num(C.quarter);case "qq":return N.num(C.quarter,2);case "X":return N.num(Math.floor(C.ts/1E3));case "x":return N.num(C.ts);default:var Ka=H.macroTokenToFormatOpts(Ga);Ga=Ka?N.formatWithSystemDefault(C,Ka):Ga;return Ga}})};K.formatDurationFromString=function(C,J){var N=this,Z=function(ta){switch(ta[0]){case "S":return"millisecond";case "s":return"second";case "m":return"minute";case "h":return"hour";case "d":return"day";case "M":return"month";
case "y":return"year";default:return null}},ma=H.parseFormat(J),oa=ma.reduce(function(ta,ya){var Da=ya.val;return ya.literal?ta:ta.concat(Da)},[]);oa=C.shiftTo.apply(C,oa.map(Z).filter(function(ta){return ta}));return Y(ma,function(ta){return function(ya){var Da=Z(ya);return Da?N.num(ta.get(Da),ya.length):ya}}(oa))};return H}(),cb=function(){function H(K,C){this.reason=K;this.explanation=C}H.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason};return H}(),
jb=function(){function H(){}var K=H.prototype;K.offsetName=function(C,J){throw new hb;};K.formatOffset=function(C,J){throw new hb;};K.offset=function(C){throw new hb;};K.equals=function(C){throw new hb;};a(H,[{key:"type",get:function(){throw new hb;}},{key:"name",get:function(){throw new hb;}},{key:"isUniversal",get:function(){throw new hb;}},{key:"isValid",get:function(){throw new hb;}}]);return H}(),Mb=null,Ec=function(H){function K(){return H.apply(this,arguments)||this}g(K,H);var C=K.prototype;
C.offsetName=function(J,N){return P(J,N.format,N.locale)};C.formatOffset=function(J,N){return T(this.offset(J),N)};C.offset=function(J){return-(new Date(J)).getTimezoneOffset()};C.equals=function(J){return"system"===J.type};a(K,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){null===Mb&&(Mb=new K);
return Mb}}]);return K}(jb),fd=RegExp("^"+Cc.source+"$"),zb={},gd={year:0,month:1,day:2,hour:3,minute:4,second:5},Ab={},db=function(H){function K(J){var N=H.call(this)||this;N.zoneName=J;N.valid=K.isValidZone(J);return N}g(K,H);K.create=function(J){Ab[J]||(Ab[J]=new K(J));return Ab[J]};K.resetCache=function(){Ab={};zb={}};K.isValidSpecifier=function(J){return!(!J||!J.match(fd))};K.isValidZone=function(J){try{return(new Intl.DateTimeFormat("en-US",{timeZone:J})).format(),!0}catch(N){return!1}};K.parseGMTOffset=
function(J){return J&&(J=J.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i))?-60*parseInt(J[1]):null};var C=K.prototype;C.offsetName=function(J,N){return P(J,N.format,N.locale,this.name)};C.formatOffset=function(J,N){return T(this.offset(J),N)};C.offset=function(J){J=new Date(J);if(isNaN(J))return NaN;var N=this.name;zb[N]||(zb[N]=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:N,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));N=zb[N];if(N.formatToParts){N=
N.formatToParts(J);for(var Z=[],ma=0;ma<N.length;ma++){var oa=N[ma],ta=oa.value;oa=gd[oa.type];n(oa)||(Z[oa]=parseInt(ta,10))}N=Z}else N=N.format(J).replace(/\u200E/g,""),N=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(N),N=[N[3],N[1],N[2],N[4],N[5],N[6]];N=F({year:N[0],month:N[1],day:N[2],hour:N[3],minute:N[4],second:N[5],millisecond:0});J=+J;Z=J%1E3;return(N-(J-(0<=Z?Z:1E3+Z)))/6E4};C.equals=function(J){return"iana"===J.type&&J.name===this.name};a(K,[{key:"type",get:function(){return"iana"}},{key:"name",
get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]);return K}(jb),Nb=null,ab=function(H){function K(J){var N=H.call(this)||this;N.fixed=J;return N}g(K,H);K.instance=function(J){return 0===J?K.utcInstance:new K(J)};K.parseSpecifier=function(J){return J&&(J=J.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i))?new K(aa(J[1],J[2])):null};var C=K.prototype;C.offsetName=function(){return this.name};C.formatOffset=function(J,
N){return T(this.fixed,N)};C.offset=function(){return this.fixed};C.equals=function(J){return"fixed"===J.type&&J.fixed===this.fixed};a(K,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+T(this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){null===Nb&&(Nb=new K(0));return Nb}}]);return K}(jb),Cb=function(H){function K(J){var N=H.call(this)||this;N.zoneName=
J;return N}g(K,H);var C=K.prototype;C.offsetName=function(){return null};C.formatOffset=function(){return""};C.offset=function(){return NaN};C.equals=function(){return!1};a(K,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]);return K}(jb),Fc=function(){return Date.now()},Gc="system",Hc=null,Ic=null,Jc=null,Kc,Ra=function(){function H(){}H.resetCaches=function(){Va.resetCache();
db.resetCache()};a(H,null,[{key:"now",get:function(){return Fc},set:function(K){Fc=K}},{key:"defaultZone",get:function(){return ia(Gc,Ec.instance)},set:function(K){Gc=K}},{key:"defaultLocale",get:function(){return Hc},set:function(K){Hc=K}},{key:"defaultNumberingSystem",get:function(){return Ic},set:function(K){Ic=K}},{key:"defaultOutputCalendar",get:function(){return Jc},set:function(K){Jc=K}},{key:"throwOnInvalid",get:function(){return Kc},set:function(K){Kc=K}}]);return H}(),hd=["base"],Db={},
Ob={},Pb={},Bb=null,id=function(){function H(K,C,J){this.padTo=J.padTo||0;this.floor=J.floor||!1;if(!C){C={useGrouping:!1};0<J.padTo&&(C.minimumIntegerDigits=J.padTo);J=C;void 0===J&&(J={});C=JSON.stringify([K,J]);var N=Ob[C];N||(N=new Intl.NumberFormat(K,J),Ob[C]=N);this.inf=N}}H.prototype.format=function(K){if(this.inf)return this.inf.format(this.floor?Math.floor(K):K);K=this.floor?Math.floor(K):G(K,3);return w(K,this.padTo)};return H}(),jd=function(){function H(C,J,N){this.opts=N;if(C.zone.isUniversal){var Z=
C.offset/60*-1;Z=0<=Z?"Etc/GMT+"+Z:"Etc/GMT"+Z;var ma=db.isValidZone(Z);0!==C.offset&&ma?this.dt=C:(Z="UTC",this.dt=N.timeZoneName?C:0===C.offset?C:Qa.fromMillis(C.ts+6E4*C.offset))}else"system"===C.zone.type?this.dt=C:(this.dt=C,Z=C.zone.name);C=b({},this.opts);Z&&(C.timeZone=Z);this.dtf=L(J,C)}var K=H.prototype;K.format=function(){return this.dtf.format(this.dt.toJSDate())};K.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())};K.resolvedOptions=function(){return this.dtf.resolvedOptions()};
return H}(),kd=function(){function H(C,J,N){this.opts=b({style:"long"},N);if(!J&&r()){J=N;void 0===J&&(J={});N=J;N.base;if(null==N)N={};else{var Z={},ma=Object.keys(N),oa;for(oa=0;oa<ma.length;oa++){var ta=ma[oa];0<=hd.indexOf(ta)||(Z[ta]=N[ta])}N=Z}N=JSON.stringify([C,N]);Z=Pb[N];Z||(Z=new Intl.RelativeTimeFormat(C,J),Pb[N]=Z);this.rtf=Z}}var K=H.prototype;K.format=function(C,J){return this.rtf?this.rtf.format(C,J):S(J,C,this.opts.numeric,"long"!==this.opts.style)};K.formatToParts=function(C,J){return this.rtf?
this.rtf.formatToParts(C,J):[]};return H}(),Va=function(){function H(C,J,N,Z){var ma=C.indexOf("-u-");if(-1===ma)C=[C];else{ma=C.substring(0,ma);try{var oa=L(C).resolvedOptions()}catch(ta){oa=L(ma).resolvedOptions()}C=oa;C=[ma,C.numberingSystem,C.calendar]}oa=C[1];ma=C[2];this.locale=C[0];this.numberingSystem=J||oa||null;this.outputCalendar=N||ma||null;J=this.locale;N=this.numberingSystem;if((C=this.outputCalendar)||N)J+="-u",C&&(J+="-ca-"+C),N&&(J+="-nu-"+N);this.intl=J;this.weekdaysCache={format:{},
standalone:{}};this.monthsCache={format:{},standalone:{}};this.meridiemCache=null;this.eraCache={};this.specifiedLocale=Z;this.fastNumbersCached=null}H.fromOpts=function(C){return H.create(C.locale,C.numberingSystem,C.outputCalendar,C.defaultToEN)};H.create=function(C,J,N,Z){void 0===Z&&(Z=!1);C=C||Ra.defaultLocale;var ma;(ma=C)||(Z?Z="en-US":(Bb||(Bb=(new Intl.DateTimeFormat).resolvedOptions().locale),Z=Bb),ma=Z);return new H(ma,J||Ra.defaultNumberingSystem,N||Ra.defaultOutputCalendar,C)};H.resetCache=
function(){Bb=null;Db={};Ob={};Pb={}};H.fromObject=function(C){C=void 0===C?{}:C;return H.create(C.locale,C.numberingSystem,C.outputCalendar)};var K=H.prototype;K.listingMode=function(C){C=this.isEnglish();var J=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return C&&J?"en":"intl"};K.clone=function(C){return C&&0!==Object.getOwnPropertyNames(C).length?H.create(C.locale||this.specifiedLocale,C.numberingSystem||this.numberingSystem,
C.outputCalendar||this.outputCalendar,C.defaultToEN||!1):this};K.redefaultToEN=function(C){void 0===C&&(C={});return this.clone(b({},C,{defaultToEN:!0}))};K.redefaultToSystem=function(C){void 0===C&&(C={});return this.clone(b({},C,{defaultToEN:!1}))};K.months=function(C,J,N){var Z=this;void 0===J&&(J=!1);void 0===N&&(N=!0);return ra(this,C,N,X,function(){var ma=J?{month:C,day:"numeric"}:{month:C},oa=J?"format":"standalone";Z.monthsCache[oa][C]||(Z.monthsCache[oa][C]=W(function(ta){return Z.extract(ta,
ma,"month")}));return Z.monthsCache[oa][C]})};K.weekdays=function(C,J,N){var Z=this;void 0===J&&(J=!1);void 0===N&&(N=!0);return ra(this,C,N,R,function(){var ma=J?{weekday:C,year:"numeric",month:"long",day:"numeric"}:{weekday:C},oa=J?"format":"standalone";Z.weekdaysCache[oa][C]||(Z.weekdaysCache[oa][C]=ja(function(ta){return Z.extract(ta,ma,"weekday")}));return Z.weekdaysCache[oa][C]})};K.meridiems=function(C){var J=this;void 0===C&&(C=!0);return ra(this,void 0,C,function(){return Dc},function(){if(!J.meridiemCache){var N=
{hour:"numeric",hourCycle:"h12"};J.meridiemCache=[Qa.utc(2016,11,13,9),Qa.utc(2016,11,13,19)].map(function(Z){return J.extract(Z,N,"dayperiod")})}return J.meridiemCache})};K.eras=function(C,J){var N=this;void 0===J&&(J=!0);return ra(this,C,J,fa,function(){var Z={era:C};N.eraCache[C]||(N.eraCache[C]=[Qa.utc(-40,1,1),Qa.utc(2017,1,1)].map(function(ma){return N.extract(ma,Z,"era")}));return N.eraCache[C]})};K.extract=function(C,J,N){return(C=this.dtFormatter(C,J).formatToParts().find(function(Z){return Z.type.toLowerCase()===
N}))?C.value:null};K.numberFormatter=function(C){void 0===C&&(C={});return new id(this.intl,C.forceSimple||this.fastNumbers,C)};K.dtFormatter=function(C,J){void 0===J&&(J={});return new jd(C,this.intl,J)};K.relFormatter=function(C){void 0===C&&(C={});return new kd(this.intl,this.isEnglish(),C)};K.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||(new Intl.DateTimeFormat(this.intl)).resolvedOptions().locale.startsWith("en-us")};K.equals=function(C){return this.locale===
C.locale&&this.numberingSystem===C.numberingSystem&&this.outputCalendar===C.outputCalendar};a(H,[{key:"fastNumbers",get:function(){if(null==this.fastNumbersCached){var C=this.numberingSystem&&"latn"!==this.numberingSystem?!1:"latn"===this.numberingSystem||!this.locale||this.locale.startsWith("en")||"latn"===(new Intl.DateTimeFormat(this.intl)).resolvedOptions().numberingSystem;this.fastNumbersCached=C}return this.fastNumbersCached}}]);return H}(),Lc=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Qb=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,
Mc=RegExp(""+Qb.source+Lc.source+"?"),Rb=RegExp("(?:T"+Mc.source+")?"),ld=V("weekYear","weekNumber","weekDay"),md=V("year","ordinal"),Nc=RegExp(Qb.source+" ?(?:"+Lc.source+"|("+Cc.source+"))?"),nd=RegExp("(?: "+Nc.source+")?"),od=RegExp("^T?"+Qb.source+"$"),pd=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/,Vc={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480},
qd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/,rd=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,sd=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,td=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/,
ud=qa(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Rb),vd=qa(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Rb),wd=qa(/(\d{4})-?(\d{3})/,Rb),xd=qa(Mc),yd=wa(da,na,ka),zd=wa(ld,na,ka),Ad=wa(md,na,ka),Bd=wa(na,ka),Cd=wa(na),Dd=qa(/(\d{4})-(\d\d)-(\d\d)/,nd),Ed=qa(Nc),Fd=wa(da,na,ka,xa),Gd=wa(na,ka,xa),Oc={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048E5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864E5},hours:{minutes:60,seconds:3600,milliseconds:36E5},minutes:{seconds:60,milliseconds:6E4},
seconds:{milliseconds:1E3}},Hd=b({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536E3,milliseconds:31536E6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624E5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592E3,milliseconds:2592E6}},Oc),Id=b({years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:31556952,milliseconds:31556952E3},quarters:{months:3,weeks:13.044375,
days:91.310625,hours:2191.455,minutes:131487.3,seconds:7889238,milliseconds:7889238E3},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746E3}},Oc),lb="years quarters months weeks days hours minutes seconds milliseconds".split(" "),Wc=lb.slice(0).reverse(),Wa=function(){function H(C){var J="longterm"===C.conversionAccuracy||!1;this.values=C.values;this.loc=C.loc||Va.create();this.conversionAccuracy=J?"longterm":"casual";this.invalid=C.invalid||
null;this.matrix=J?Id:Hd;this.isLuxonDuration=!0}H.fromMillis=function(C,J){return H.fromObject({milliseconds:C},J)};H.fromObject=function(C,J){void 0===J&&(J={});if(null==C||"object"!==typeof C)throw new $a("Duration.fromObject: argument expected to be an object, got "+(null===C?"null":typeof C));return new H({values:ea(C,H.normalizeUnit),loc:Va.fromObject(J),conversionAccuracy:J.conversionAccuracy})};H.fromISO=function(C,J){var N=sa(C,[pd,O])[0];return N?H.fromObject(N,J):H.invalid("unparsable",
'the input "'+C+"\" can't be parsed as ISO 8601")};H.fromISOTime=function(C,J){var N=sa(C,[od,Cd])[0];return N?H.fromObject(N,J):H.invalid("unparsable",'the input "'+C+"\" can't be parsed as ISO 8601")};H.invalid=function(C,J){void 0===J&&(J=null);if(!C)throw new $a("need to specify a reason the Duration is invalid");var N=C instanceof cb?C:new cb(C,J);if(Ra.throwOnInvalid)throw new bd(N);return new H({invalid:N})};H.normalizeUnit=function(C){var J={year:"years",years:"years",quarter:"quarters",quarters:"quarters",
month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[C?C.toLowerCase():C];if(!J)throw new dc(C);return J};H.isDuration=function(C){return C&&C.isLuxonDuration||!1};var K=H.prototype;K.toFormat=function(C,J){void 0===J&&(J={});var N=b({},J,{floor:!1!==J.round&&!1!==J.floor});return this.isValid?fb.create(this.loc,N).formatDurationFromString(this,
C):"Invalid Duration"};K.toObject=function(){return this.isValid?b({},this.values):{}};K.toISO=function(){if(!this.isValid)return null;var C="P";0!==this.years&&(C+=this.years+"Y");if(0!==this.months||0!==this.quarters)C+=this.months+3*this.quarters+"M";0!==this.weeks&&(C+=this.weeks+"W");0!==this.days&&(C+=this.days+"D");if(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)C+="T";0!==this.hours&&(C+=this.hours+"H");0!==this.minutes&&(C+=this.minutes+"M");if(0!==this.seconds||
0!==this.milliseconds)C+=G(this.seconds+this.milliseconds/1E3,3)+"S";"P"===C&&(C+="T0S");return C};K.toISOTime=function(C){void 0===C&&(C={});if(!this.isValid)return null;var J=this.toMillis();if(0>J||864E5<=J)return null;C=b({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},C);J=this.shiftTo("hours","minutes","seconds","milliseconds");var N="basic"===C.format?"hhmm":"hh:mm";C.suppressSeconds&&0===J.seconds&&0===J.milliseconds||(N+="basic"===C.format?"ss":":ss",C.suppressMilliseconds&&
0===J.milliseconds||(N+=".SSS"));J=J.toFormat(N);C.includePrefix&&(J="T"+J);return J};K.toJSON=function(){return this.toISO()};K.toString=function(){return this.toISO()};K.toMillis=function(){return this.as("milliseconds")};K.valueOf=function(){return this.toMillis()};K.plus=function(C){if(!this.isValid)return this;C=Ba(C);for(var J={},N=m(lb),Z;!(Z=N()).done;)if(Z=Z.value,z(C.values,Z)||z(this.values,Z))J[Z]=C.get(Z)+this.get(Z);return za(this,{values:J},!0)};K.minus=function(C){if(!this.isValid)return this;
C=Ba(C);return this.plus(C.negate())};K.mapUnits=function(C){if(!this.isValid)return this;for(var J={},N=0,Z=Object.keys(this.values);N<Z.length;N++){var ma=Z[N];J[ma]=ca(C(this.values[ma],ma))}return za(this,{values:J},!0)};K.get=function(C){return this[H.normalizeUnit(C)]};K.set=function(C){if(!this.isValid)return this;C=b({},this.values,ea(C,H.normalizeUnit));return za(this,{values:C})};K.reconfigure=function(C){var J=void 0===C?{}:C;C=J.conversionAccuracy;J={loc:this.loc.clone({locale:J.locale,
numberingSystem:J.numberingSystem})};C&&(J.conversionAccuracy=C);return za(this,J)};K.as=function(C){return this.isValid?this.shiftTo(C).get(C):NaN};K.normalize=function(){if(!this.isValid)return this;var C=this.toObject();Ha(this.matrix,C);return za(this,{values:C},!0)};K.shiftTo=function(){for(var C=arguments.length,J=Array(C),N=0;N<C;N++)J[N]=arguments[N];if(!this.isValid||0===J.length)return this;J=J.map(function(bb){return H.normalizeUnit(bb)});C={};N={};for(var Z=this.toObject(),ma,oa=m(lb),
ta;!(ta=oa()).done;)if(ta=ta.value,0<=J.indexOf(ta)){ma=ta;var ya=0,Da;for(Da in N)ya+=this.matrix[Da][ta]*N[Da],N[Da]=0;p(Z[ta])&&(ya+=Z[ta]);var La=Math.trunc(ya);C[ta]=La;N[ta]=ya-La;for(var Ga in Z)lb.indexOf(Ga)>lb.indexOf(ta)&&Fa(this.matrix,Z,Ga,C,ta)}else p(Z[ta])&&(N[ta]=Z[ta]);for(var Ka in N)0!==N[Ka]&&(C[ma]+=Ka===ma?N[Ka]:N[Ka]/this.matrix[ma][Ka]);return za(this,{values:C},!0).normalize()};K.negate=function(){if(!this.isValid)return this;for(var C={},J=0,N=Object.keys(this.values);J<
N.length;J++){var Z=N[J];C[Z]=-this.values[Z]}return za(this,{values:C},!0)};K.equals=function(C){if(!this.isValid||!C.isValid||!this.loc.equals(C.loc))return!1;for(var J=m(lb),N;!(N=J()).done;){var Z=N.value;N=this.values[Z];Z=C.values[Z];N=void 0===N||0===N?void 0===Z||0===Z:N===Z;if(!N)return!1}return!0};a(H,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?
this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",
get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return H}(),rb=function(){function H(C){this.s=C.start;this.e=C.end;this.invalid=C.invalid||null;this.isLuxonInterval=
!0}H.invalid=function(C,J){void 0===J&&(J=null);if(!C)throw new $a("need to specify a reason the Interval is invalid");var N=C instanceof cb?C:new cb(C,J);if(Ra.throwOnInvalid)throw new ad(N);return new H({invalid:N})};H.fromDateTimes=function(C,J){var N=qb(C),Z=qb(J);var ma=N&&N.isValid?Z&&Z.isValid?Z<N?rb.invalid("end before start","The end of an interval must be after its start, but you had start\x3d"+N.toISO()+" and end\x3d"+Z.toISO()):null:rb.invalid("missing or invalid end"):rb.invalid("missing or invalid start");
return null==ma?new H({start:N,end:Z}):ma};H.after=function(C,J){var N=Ba(J),Z=qb(C);return H.fromDateTimes(Z,Z.plus(N))};H.before=function(C,J){var N=Ba(J),Z=qb(C);return H.fromDateTimes(Z.minus(N),Z)};H.fromISO=function(C,J){var N=(C||"").split("/",2),Z=N[0];N=N[1];if(Z&&N){try{var ma=Qa.fromISO(Z,J);var oa=ma.isValid}catch(Da){oa=!1}try{var ta=Qa.fromISO(N,J);var ya=ta.isValid}catch(Da){ya=!1}if(oa&&ya)return H.fromDateTimes(ma,ta);if(oa){if(ta=Wa.fromISO(N,J),ta.isValid)return H.after(ma,ta)}else if(ya&&
(ma=Wa.fromISO(Z,J),ma.isValid))return H.before(ta,ma)}return H.invalid("unparsable",'the input "'+C+"\" can't be parsed as ISO 8601")};H.isInterval=function(C){return C&&C.isLuxonInterval||!1};var K=H.prototype;K.length=function(C){void 0===C&&(C="milliseconds");return this.isValid?this.toDuration.apply(this,[C]).get(C):NaN};K.count=function(C){void 0===C&&(C="milliseconds");if(!this.isValid)return NaN;var J=this.start.startOf(C),N=this.end.startOf(C);return Math.floor(N.diff(J,C).get(C))+1};K.hasSame=
function(C){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,C):!1};K.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()};K.isAfter=function(C){return this.isValid?this.s>C:!1};K.isBefore=function(C){return this.isValid?this.e<=C:!1};K.contains=function(C){return this.isValid?this.s<=C&&this.e>C:!1};K.set=function(C){C=void 0===C?{}:C;return this.isValid?H.fromDateTimes(C.start||this.s,C.end||this.e):this};K.splitAt=function(){var C=this;if(!this.isValid)return[];for(var J=
arguments.length,N=Array(J),Z=0;Z<J;Z++)N[Z]=arguments[Z];J=N.map(qb).filter(function(ta){return C.contains(ta)}).sort();N=[];Z=this.s;for(var ma=0;Z<this.e;){var oa=J[ma]||this.e;oa=+oa>+this.e?this.e:oa;N.push(H.fromDateTimes(Z,oa));Z=oa;ma+=1}return N};K.splitBy=function(C){C=Ba(C);if(!this.isValid||!C.isValid||0===C.as("milliseconds"))return[];for(var J=this.s,N=1,Z,ma=[];J<this.e;)Z=this.start.plus(C.mapUnits(function(oa){return oa*N})),Z=+Z>+this.e?this.e:Z,ma.push(H.fromDateTimes(J,Z)),J=Z,
N+=1;return ma};K.divideEqually=function(C){return this.isValid?this.splitBy(this.length()/C).slice(0,C):[]};K.overlaps=function(C){return this.e>C.s&&this.s<C.e};K.abutsStart=function(C){return this.isValid?+this.e===+C.s:!1};K.abutsEnd=function(C){return this.isValid?+C.e===+this.s:!1};K.engulfs=function(C){return this.isValid?this.s<=C.s&&this.e>=C.e:!1};K.equals=function(C){return this.isValid&&C.isValid?this.s.equals(C.s)&&this.e.equals(C.e):!1};K.intersection=function(C){if(!this.isValid)return this;
var J=this.s>C.s?this.s:C.s;C=this.e<C.e?this.e:C.e;return J>=C?null:H.fromDateTimes(J,C)};K.union=function(C){return this.isValid?H.fromDateTimes(this.s<C.s?this.s:C.s,this.e>C.e?this.e:C.e):this};H.merge=function(C){var J=C.sort(function(N,Z){return N.s-Z.s}).reduce(function(N,Z){var ma=N[0],oa=N[1];return oa?oa.overlaps(Z)||oa.abutsStart(Z)?[ma,oa.union(Z)]:[ma.concat([oa]),Z]:[ma,Z]},[[],null]);C=J[0];(J=J[1])&&C.push(J);return C};H.xor=function(C){var J,N=null,Z=0,ma=[];C=C.map(function(oa){return[{time:oa.s,
type:"s"},{time:oa.e,type:"e"}]});C=(J=Array.prototype).concat.apply(J,C).sort(function(oa,ta){return oa.time-ta.time});for(J=m(C);!(C=J()).done;)C=C.value,Z+="s"===C.type?1:-1,1===Z?N=C.time:(N&&+N!==+C.time&&ma.push(H.fromDateTimes(N,C.time)),N=null);return H.merge(ma)};K.difference=function(){for(var C=this,J=arguments.length,N=Array(J),Z=0;Z<J;Z++)N[Z]=arguments[Z];return H.xor([this].concat(N)).map(function(ma){return C.intersection(ma)}).filter(function(ma){return ma&&!ma.isEmpty()})};K.toString=
function(){return this.isValid?"["+this.s.toISO()+" \u2013 "+this.e.toISO()+")":"Invalid Interval"};K.toISO=function(C){return this.isValid?this.s.toISO(C)+"/"+this.e.toISO(C):"Invalid Interval"};K.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():"Invalid Interval"};K.toISOTime=function(C){return this.isValid?this.s.toISOTime(C)+"/"+this.e.toISOTime(C):"Invalid Interval"};K.toFormat=function(C,J){var N=(void 0===J?{}:J).separator;N=void 0===N?" \u2013 ":N;return this.isValid?
""+this.s.toFormat(C)+N+this.e.toFormat(C):"Invalid Interval"};K.toDuration=function(C,J){return this.isValid?this.e.diff(this.s,C,J):Wa.invalid(this.invalidReason)};K.mapEndpoints=function(C){return H.fromDateTimes(C(this.s),C(this.e))};a(H,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:
null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]);return H}(),sb=function(){function H(){}H.hasDST=function(K){void 0===K&&(K=Ra.defaultZone);var C=Qa.now().setZone(K).set({month:12});return!K.isUniversal&&C.offset!==C.set({month:6}).offset};H.isValidIANAZone=function(K){return db.isValidSpecifier(K)&&db.isValidZone(K)};H.normalizeZone=function(K){return ia(K,Ra.defaultZone)};H.months=function(K,C){void 0===K&&(K="long");var J=void 0===C?{}:C,N=
J.locale,Z=J.numberingSystem,ma=J.locObj;J=J.outputCalendar;return((void 0===ma?null:ma)||Va.create(void 0===N?null:N,void 0===Z?null:Z,void 0===J?"gregory":J)).months(K)};H.monthsFormat=function(K,C){void 0===K&&(K="long");var J=void 0===C?{}:C,N=J.locale,Z=J.numberingSystem,ma=J.locObj;J=J.outputCalendar;return((void 0===ma?null:ma)||Va.create(void 0===N?null:N,void 0===Z?null:Z,void 0===J?"gregory":J)).months(K,!0)};H.weekdays=function(K,C){void 0===K&&(K="long");var J=void 0===C?{}:C,N=J.locale,
Z=J.numberingSystem;J=J.locObj;return((void 0===J?null:J)||Va.create(void 0===N?null:N,void 0===Z?null:Z,null)).weekdays(K)};H.weekdaysFormat=function(K,C){void 0===K&&(K="long");var J=void 0===C?{}:C,N=J.locale,Z=J.numberingSystem;J=J.locObj;return((void 0===J?null:J)||Va.create(void 0===N?null:N,void 0===Z?null:Z,null)).weekdays(K,!0)};H.meridiems=function(K){K=(void 0===K?{}:K).locale;return Va.create(void 0===K?null:K).meridiems()};H.eras=function(K,C){void 0===K&&(K="short");var J=(void 0===
C?{}:C).locale;return Va.create(void 0===J?null:J,null,"gregory").eras(K)};H.features=function(){return{relative:r()}};return H}(),Eb={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",
mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Vb={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Xc=Eb.hanidec.replace(/[\[|\]]/g,
"").split(""),Wb="( |"+String.fromCharCode(160)+")",Fb=new RegExp(Wb,"g"),Zc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM","short":"MMM","long":"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{"short":"EEE","long":"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}},Gb=null,Jb=[0,31,59,90,120,151,181,212,243,273,304,334],Ib=[0,31,60,91,121,152,182,213,244,274,305,335],gc={month:1,
day:1,hour:0,minute:0,second:0,millisecond:0},Jd={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Kd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},fc="year month day hour minute second millisecond".split(" "),Ld="weekYear weekNumber weekday hour minute second millisecond".split(" "),Md="year ordinal hour minute second millisecond".split(" "),Qa=function(){function H(C){var J=C.zone||Ra.defaultZone,N=C.invalid||(Number.isNaN(C.ts)?new cb("invalid input"):null)||(J.isValid?null:
xb(J));this.ts=n(C.ts)?Ra.now():C.ts;var Z=null,ma=null;N||(C.old&&C.old.ts===this.ts&&C.old.zone.equals(J)?(ma=[C.old.c,C.old.o],Z=ma[0],ma=ma[1]):(ma=J.offset(this.ts),Z=$b(this.ts,ma),Z=(N=Number.isNaN(Z.year)?new cb("invalid input"):null)?null:Z,ma=N?null:ma));this._zone=J;this.loc=C.loc||Va.create();this.invalid=N;this.weekData=null;this.c=Z;this.o=ma;this.isLuxonDateTime=!0}H.now=function(){return new H({})};H.local=function(){var C=ic(arguments),J=C[1];return ec({year:J[0],month:J[1],day:J[2],
hour:J[3],minute:J[4],second:J[5],millisecond:J[6]},C[0])};H.utc=function(){var C=ic(arguments),J=C[0],N=C[1];C=N[0];var Z=N[1],ma=N[2],oa=N[3],ta=N[4],ya=N[5];N=N[6];J.zone=ab.utcInstance;return ec({year:C,month:Z,day:ma,hour:oa,minute:ta,second:ya,millisecond:N},J)};H.fromJSDate=function(C,J){void 0===J&&(J={});var N="[object Date]"===Object.prototype.toString.call(C)?C.valueOf():NaN;if(Number.isNaN(N))return H.invalid("invalid input");var Z=ia(J.zone,Ra.defaultZone);return Z.isValid?new H({ts:N,
zone:Z,loc:Va.fromObject(J)}):H.invalid(xb(Z))};H.fromMillis=function(C,J){void 0===J&&(J={});if(p(C))return-864E13>C||864E13<C?H.invalid("Timestamp out of range"):new H({ts:C,zone:ia(J.zone,Ra.defaultZone),loc:Va.fromObject(J)});throw new $a("fromMillis requires a numerical input, but received a "+typeof C+" with value "+C);};H.fromSeconds=function(C,J){void 0===J&&(J={});if(p(C))return new H({ts:1E3*C,zone:ia(J.zone,Ra.defaultZone),loc:Va.fromObject(J)});throw new $a("fromSeconds requires a numerical input");
};H.fromObject=function(C,J){void 0===J&&(J={});C=C||{};var N=ia(J.zone,Ra.defaultZone);if(!N.isValid)return H.invalid(xb(N));var Z=Ra.now(),ma=N.offset(Z),oa=ea(C,cc),ta=!n(oa.ordinal),ya=!n(oa.year),Da=!n(oa.month)||!n(oa.day);ya=ya||Da;var La=oa.weekYear||oa.weekNumber,Ga=Va.fromObject(J);if((ya||ta)&&La)throw new mb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Da&&ta)throw new mb("Can't mix ordinal dates with month/day");Da=La||oa.weekday&&!ya;La=$b(Z,ma);if(Da){var Ka=
Ld;Z=Jd;La=gb(La)}else ta?(Ka=Md,Z=Kd,La=nb(La)):(Ka=fc,Z=gc);var bb=!1;Ka=m(Ka);for(var Za;!(Za=Ka()).done;)Za=Za.value,n(oa[Za])?oa[Za]=bb?Z[Za]:La[Za]:bb=!0;Da?(Z=v(oa.weekYear),La=u(oa.weekNumber,1,I(oa.weekYear)),bb=u(oa.weekday,1,7),Z=Z?La?bb?!1:Ya("weekday",oa.weekday):Ya("week",oa.week):Ya("weekYear",oa.weekYear)):ta?(Z=v(oa.year),La=u(oa.ordinal,1,B(oa.year)?366:365),Z=Z?La?!1:Ya("ordinal",oa.ordinal):Ya("year",oa.year)):Z=Xb(oa);if(Z=Z||Yb(oa))return H.invalid(Z);ta=Da?wb(oa):ta?Ua(oa):
oa;ma=yb(ta,ma,N);N=new H({ts:ma[0],zone:N,o:ma[1],loc:Ga});return oa.weekday&&ya&&C.weekday!==N.weekday?H.invalid("mismatched weekday","you can't specify both a weekday of "+oa.weekday+" and a date of "+N.toISO()):N};H.fromISO=function(C,J){void 0===J&&(J={});var N=sa(C,[ud,yd],[vd,zd],[wd,Ad],[xd,Bd]);return pb(N[0],N[1],J,"ISO 8601",C)};H.fromRFC2822=function(C,J){void 0===J&&(J={});var N=sa(C.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim(),[qd,ba]);return pb(N[0],N[1],J,"RFC 2822",
C)};H.fromHTTP=function(C,J){void 0===J&&(J={});var N=sa(C,[rd,ha],[sd,ha],[td,pa]);return pb(N[0],N[1],J,"HTTP",J)};H.fromFormat=function(C,J,N){void 0===N&&(N={});if(n(C)||n(J))throw new $a("fromFormat requires an input string and a format");var Z=N,ma=Z.locale;Z=Z.numberingSystem;ma=Va.fromOpts({locale:void 0===ma?null:ma,numberingSystem:void 0===Z?null:Z,defaultToEN:!0});ma=tb(ma,C,J);var oa=[ma.result,ma.zone,ma.invalidReason];ma=oa[0];Z=oa[1];return(oa=oa[2])?H.invalid(oa):pb(ma,Z,N,"format "+
J,C)};H.fromString=function(C,J,N){void 0===N&&(N={});return H.fromFormat(C,J,N)};H.fromSQL=function(C,J){void 0===J&&(J={});var N=sa(C,[Dd,Fd],[Ed,Gd]);return pb(N[0],N[1],J,"SQL",C)};H.invalid=function(C,J){void 0===J&&(J=null);if(!C)throw new $a("need to specify a reason the DateTime is invalid");var N=C instanceof cb?C:new cb(C,J);if(Ra.throwOnInvalid)throw new $c(N);return new H({invalid:N})};H.isDateTime=function(C){return C&&C.isLuxonDateTime||!1};var K=H.prototype;K.get=function(C){return this[C]};
K.resolvedLocaleOptions=function(C){void 0===C&&(C={});C=fb.create(this.loc.clone(C),C).resolvedOptions(this);return{locale:C.locale,numberingSystem:C.numberingSystem,outputCalendar:C.calendar}};K.toUTC=function(C,J){void 0===C&&(C=0);void 0===J&&(J={});return this.setZone(ab.instance(C),J)};K.toLocal=function(){return this.setZone(Ra.defaultZone)};K.setZone=function(C,J){var N=void 0===J?{}:J,Z=N.keepLocalTime;Z=void 0===Z?!1:Z;N=N.keepCalendarTime;N=void 0===N?!1:N;C=ia(C,Ra.defaultZone);if(C.equals(this.zone))return this;
if(C.isValid){var ma=this.ts;if(Z||N)Z=C.offset(this.ts),N=this.toObject(),ma=yb(N,Z,C)[0];return ob(this,{ts:ma,zone:C})}return H.invalid(xb(C))};K.reconfigure=function(C){C=void 0===C?{}:C;C=this.loc.clone({locale:C.locale,numberingSystem:C.numberingSystem,outputCalendar:C.outputCalendar});return ob(this,{loc:C})};K.setLocale=function(C){return this.reconfigure({locale:C})};K.set=function(C){if(!this.isValid)return this;C=ea(C,cc);var J=!n(C.weekYear)||!n(C.weekNumber)||!n(C.weekday),N=!n(C.ordinal),
Z=!n(C.year),ma=!n(C.month)||!n(C.day),oa=C.weekYear||C.weekNumber;if((Z||ma||N)&&oa)throw new mb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(ma&&N)throw new mb("Can't mix ordinal dates with month/day");J?J=wb(b({},gb(this.c),C)):n(C.ordinal)?(J=b({},this.toObject(),C),n(C.day)&&(J.day=Math.min(E(J.year,J.month),J.day))):J=Ua(b({},nb(this.c),C));C=yb(J,this.o,this.zone);return ob(this,{ts:C[0],o:C[1]})};K.plus=function(C){if(!this.isValid)return this;C=Ba(C);return ob(this,
ac(this,C))};K.minus=function(C){if(!this.isValid)return this;C=Ba(C).negate();return ob(this,ac(this,C))};K.startOf=function(C){if(!this.isValid)return this;var J={};C=Wa.normalizeUnit(C);switch(C){case "years":J.month=1;case "quarters":case "months":J.day=1;case "weeks":case "days":J.hour=0;case "hours":J.minute=0;case "minutes":J.second=0;case "seconds":J.millisecond=0}"weeks"===C&&(J.weekday=1);"quarters"===C&&(J.month=3*(Math.ceil(this.month/3)-1)+1);return this.set(J)};K.endOf=function(C){var J;
return this.isValid?this.plus((J={},J[C]=1,J)).startOf(C).minus(1):this};K.toFormat=function(C,J){void 0===J&&(J={});return this.isValid?fb.create(this.loc.redefaultToEN(J)).formatDateTimeFromString(this,C):"Invalid DateTime"};K.toLocaleString=function(C,J){void 0===C&&(C=Lb);void 0===J&&(J={});return this.isValid?fb.create(this.loc.clone(J),C).formatDateTime(this):"Invalid DateTime"};K.toLocaleParts=function(C){void 0===C&&(C={});return this.isValid?fb.create(this.loc.clone(C),C).formatDateTimeParts(this):
[]};K.toISO=function(C){void 0===C&&(C={});return this.isValid?this.toISODate(C)+"T"+this.toISOTime(C):null};K.toISODate=function(C){C=(void 0===C?{}:C).format;C="basic"===(void 0===C?"extended":C)?"yyyyMMdd":"yyyy-MM-dd";9999<this.year&&(C="+"+C);return kb(this,C)};K.toISOWeekDate=function(){return kb(this,"kkkk-'W'WW-c")};K.toISOTime=function(C){var J=void 0===C?{}:C;C=J.suppressMilliseconds;var N=J.suppressSeconds,Z=J.includeOffset,ma=J.includePrefix;J=J.format;return bc(this,{suppressSeconds:void 0===
N?!1:N,suppressMilliseconds:void 0===C?!1:C,includeOffset:void 0===Z?!0:Z,includePrefix:void 0===ma?!1:ma,format:void 0===J?"extended":J})};K.toRFC2822=function(){return kb(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)};K.toHTTP=function(){return kb(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")};K.toSQLDate=function(){return kb(this,"yyyy-MM-dd")};K.toSQLTime=function(C){var J=void 0===C?{}:C;C=J.includeOffset;J=J.includeZone;return bc(this,{includeOffset:void 0===C?!0:C,includeZone:void 0===J?!1:J,
spaceZone:!0})};K.toSQL=function(C){void 0===C&&(C={});return this.isValid?this.toSQLDate()+" "+this.toSQLTime(C):null};K.toString=function(){return this.isValid?this.toISO():"Invalid DateTime"};K.valueOf=function(){return this.toMillis()};K.toMillis=function(){return this.isValid?this.ts:NaN};K.toSeconds=function(){return this.isValid?this.ts/1E3:NaN};K.toJSON=function(){return this.toISO()};K.toBSON=function(){return this.toJSDate()};K.toObject=function(C){void 0===C&&(C={});if(!this.isValid)return{};
var J=b({},this.c);C.includeConfig&&(J.outputCalendar=this.outputCalendar,J.numberingSystem=this.loc.numberingSystem,J.locale=this.loc.locale);return J};K.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)};K.diff=function(C,J,N){void 0===J&&(J="milliseconds");void 0===N&&(N={});if(!this.isValid||!C.isValid)return Wa.invalid("created by diffing an invalid DateTime");N=b({locale:this.locale,numberingSystem:this.numberingSystem},N);var Z=(Array.isArray(J)?J:[J]).map(Wa.normalizeUnit);J=C.valueOf()>
this.valueOf();C=Aa(J?this:C,J?C:this,Z,N);return J?C.negate():C};K.diffNow=function(C,J){void 0===C&&(C="milliseconds");void 0===J&&(J={});return this.diff(H.now(),C,J)};K.until=function(C){return this.isValid?rb.fromDateTimes(this,C):this};K.hasSame=function(C,J){if(!this.isValid)return!1;var N=C.valueOf(),Z=this.setZone(C.zone,{keepLocalTime:!0});return Z.startOf(J)<=N&&N<=Z.endOf(J)};K.equals=function(C){return this.isValid&&C.isValid&&this.valueOf()===C.valueOf()&&this.zone.equals(C.zone)&&this.loc.equals(C.loc)};
K.toRelative=function(C){void 0===C&&(C={});if(!this.isValid)return null;var J=C.base||H.fromObject({},{zone:this.zone}),N=C.padding?this<J?-C.padding:C.padding:0,Z="years months days hours minutes seconds".split(" "),ma=C.unit;Array.isArray(C.unit)&&(Z=C.unit,ma=void 0);return hc(J,this.plus(N),b({},C,{numeric:"always",units:Z,unit:ma}))};K.toRelativeCalendar=function(C){void 0===C&&(C={});return this.isValid?hc(C.base||H.fromObject({},{zone:this.zone}),this,b({},C,{numeric:"auto",units:["years",
"months","days"],calendary:!0})):null};H.min=function(){for(var C=arguments.length,J=Array(C),N=0;N<C;N++)J[N]=arguments[N];if(!J.every(H.isDateTime))throw new $a("min requires all arguments be DateTimes");return y(J,function(Z){return Z.valueOf()},Math.min)};H.max=function(){for(var C=arguments.length,J=Array(C),N=0;N<C;N++)J[N]=arguments[N];if(!J.every(H.isDateTime))throw new $a("max requires all arguments be DateTimes");return y(J,function(Z){return Z.valueOf()},Math.max)};H.fromFormatExplain=
function(C,J,N){void 0===N&&(N={});var Z=N;N=Z.locale;Z=Z.numberingSystem;N=Va.fromOpts({locale:void 0===N?null:N,numberingSystem:void 0===Z?null:Z,defaultToEN:!0});return tb(N,C,J)};H.fromStringExplain=function(C,J,N){void 0===N&&(N={});return H.fromFormatExplain(C,J,N)};a(H,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:
null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/
3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Kb(this).weekYear:NaN}},{key:"weekNumber",
get:function(){return this.isValid?Kb(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Kb(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?nb(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?sb.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?sb.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?sb.weekdays("short",
{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?sb.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",
get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}},{key:"isInLeapYear",get:function(){return B(this.year)}},{key:"daysInMonth",get:function(){return E(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?B(this.year)?366:365:NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?I(this.weekYear):NaN}}],[{key:"DATE_SHORT",
get:function(){return Lb}},{key:"DATE_MED",get:function(){return jc}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return cd}},{key:"DATE_FULL",get:function(){return kc}},{key:"DATE_HUGE",get:function(){return lc}},{key:"TIME_SIMPLE",get:function(){return mc}},{key:"TIME_WITH_SECONDS",get:function(){return nc}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return oc}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return pc}},{key:"TIME_24_SIMPLE",get:function(){return qc}},{key:"TIME_24_WITH_SECONDS",
get:function(){return rc}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return sc}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return tc}},{key:"DATETIME_SHORT",get:function(){return uc}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return vc}},{key:"DATETIME_MED",get:function(){return wc}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return xc}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return dd}},{key:"DATETIME_FULL",get:function(){return yc}},{key:"DATETIME_FULL_WITH_SECONDS",
get:function(){return zc}},{key:"DATETIME_HUGE",get:function(){return Ac}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Bc}}]);return H}();D.DateTime=Qa;D.Duration=Wa;D.FixedOffsetZone=ab;D.IANAZone=db;D.Info=sb;D.Interval=rb;D.InvalidZone=Cb;D.Settings=Ra;D.SystemZone=Ec;D.VERSION="2.0.2";D.Zone=jb;Object.defineProperty(D,"__esModule",{value:!0})})},"esri/layers/vectorTiles/arcade/Feature":function(){define(["require","exports","esri/arcade/Feature"],function(D,q,a){a.prototype.repurposeFromGraphicLikeObject=
function(b,g,f){void 0===f&&(f=null);null===g&&(g={});this.attributes=g;this.geometry=b;this._datesfixed=(this._layer=f)?!1:!0};return a})},"esri/arcade/Feature":function(){var D=this&&this.__assign||function(){D=Object.assign||function(q){for(var a,b=1,g=arguments.length;b<g;b++){a=arguments[b];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(q[f]=a[f])}return q};return D.apply(this,arguments)};define("require exports ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/jsonUtils ./featureset/support/shared".split(" "),
function(q,a,b,g,f,h,d,c,e){return function(){function k(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=this._adapter=null;this.immutable=this._datesfixed=!0;this._datefields=null;this.immutable=!0}k.createFromGraphic=function(l){var m=new k;m._geometry=l.geometry?l.geometry:null;m.attributes=void 0===l.attributes?{}:null===l.attributes?{}:l.attributes;l._sourceLayer?(m._layer=l._sourceLayer,m._datesfixed=!1):l._layer?(m._layer=l._layer,m._datesfixed=!1):l.layer&&
"fields"in l.layer?(m._layer=l.layer,m._datesfixed=!1):l.sourceLayer&&"fields"in l.sourceLayer&&(m._layer=l.sourceLayer,m._datesfixed=!1);return m};k.createFromArcadeFeature=function(l){var m=new k;m._datesfixed=l._datesfixed;m.attributes=l.attributes;m._geometry=l._geometry;l._layer&&(m._layer=l._layer);return m};k.createFromArcadeDictionary=function(l){var m=new k;m.attributes=l.field("attributes");null!==m.attributes?m.attributes instanceof b?(m.attributes=m.attributes.attributes,null===m.attributes&&
(m.attributes={})):m.attributes={}:m.attributes={};m._geometry=l.field("geometry");null!==m._geometry&&(m._geometry instanceof b?m._geometry=k.parseGeometryFromDictionary(m._geometry):m._geometry instanceof h||(m._geometry=null));return m};k.createFromGraphicLikeObject=function(l,m,n){void 0===n&&(n=null);var p=new k;null===m&&(m={});p.attributes=m;p._geometry=l?l:null;p._layer=n;p._layer&&(p._datesfixed=!1);p._adapter=null;return p};k.prototype.repurposeFromGraphicLikeObject=function(l,m,n){void 0===
n&&(n=null);null===m&&(m={});this.attributes=m;this._geometry=l?l:null;this._datesfixed=(this._layer=n)?!1:!0};k.prototype.castToText=function(){if(this._adapter)return this._adapter.castToText();var l="";!1===this._datesfixed&&this._fixDates();for(var m in this.attributes){""!==l&&(l+=",");var n=this.attributes[m];null==n?l+=JSON.stringify(m)+":null":f.isBoolean(n)||f.isNumber(n)||f.isString(n)?l+=JSON.stringify(m)+":"+JSON.stringify(n):n instanceof h?l+=JSON.stringify(m)+":"+f.toStringExplicit(n):
n instanceof g?l+=JSON.stringify(m)+":"+f.toStringExplicit(n):n instanceof Array?l+=JSON.stringify(m)+":"+f.toStringExplicit(n):n instanceof Date?l+=JSON.stringify(m)+":"+JSON.stringify(n):null!==n&&"object"===typeof n&&void 0!==n.castToText&&(l+=JSON.stringify(m)+":"+n.castToText())}return'{"geometry":'+(null===this.geometry()?"null":f.toStringExplicit(this.geometry()))+',"attributes":{'+l+"}}"};k.prototype._fixDates=function(){if(null!==this._datefields)0<this._datefields.length&&this._fixDateFields(this._datefields);
else{for(var l=[],m=0;m<this._layer.fields.length;m++){var n=this._layer.fields[m];"date"!==n.type&&"esriFieldTypeDate"!==n.type||l.push(n.name)}this._datefields=l;0<l.length&&this._fixDateFields(l)}this._datesfixed=!0};k.prototype._fixDateFields=function(l){this.attributes=D({},this.attributes);for(var m=0;m<l.length;m++){var n=this.attributes[l[m]];if(null!==n)if(void 0===n)for(var p in this.attributes){if(p.toLowerCase()===l[m].toLowerCase()){n=this.attributes[p];null===n||n instanceof Date||(this.attributes[p]=
new Date(n));break}}else n instanceof Date||(this.attributes[l[m]]=new Date(n))}};k.prototype.geometry=function(){if(this._adapter)return this._adapter.geometry();if(null===this._geometry)return this._geometry;this._geometry instanceof h||(this._geometry=c.fromJson(this._geometry));return this._geometry};k.prototype.field=function(l){if(this._adapter)return this._adapter.field(l);!1===this._datesfixed&&this._fixDates();var m=this.attributes[l];if(void 0!==m)return m;m=l.toLowerCase();for(var n in this.attributes)if(n.toLowerCase()===
m)return this.attributes[n];if(this._hasFieldDefinition(m))return null;throw Error("Field not Found : "+l);};k.prototype._hasFieldDefinition=function(l){if(null===this._layer)return!1;for(var m=0;m<this._layer.fields.length;m++)if(this._layer.fields[m].name.toLowerCase()===l)return!0;return!1};k.prototype._field=function(l){var m;if(this._adapter)return null!==(m=this._adapter.field(l))&&void 0!==m?m:null;!1===this._datesfixed&&this._fixDates();m=l.toLowerCase();l=this.attributes[l];if(void 0!==l)return l;
for(var n in this.attributes)if(n.toLowerCase()===m)return this.attributes[n];return null};k.prototype.setField=function(l,m){if(this.immutable)throw Error("Feature is Immutable");if(!1===f.isSimpleType(m))throw Error("Illegal Value Assignment to Feature");if(this._adapter)this._adapter.setField(l,m);else{var n=l.toLowerCase();if(void 0===this.attributes[l])for(var p in this.attributes)if(p.toLowerCase()===n){this.attributes[p]=m;return}this.attributes[l]=m}};k.prototype.hasField=function(l){if(this._adapter)return this._adapter.hasField(l);
var m=l.toLowerCase();if(void 0!==this.attributes[l])return!0;for(var n in this.attributes)if(n.toLowerCase()===m)return!0;return this._hasFieldDefinition(m)?!0:!1};k.prototype.keys=function(){if(this._adapter)return this._adapter.keys();var l=[],m={},n;for(n in this.attributes)l.push(n),m[n.toLowerCase()]=1;if(null!==this._layer)for(n=0;n<this._layer.fields.length;n++){var p=this._layer.fields[n];1!==m[p.name.toLowerCase()]&&l.push(p.name)}return l=l.sort()};k.parseGeometryFromDictionary=function(l){l=
k.convertDictionaryToJson(l,!0);void 0!==l.hasm&&(l.hasM=l.hasm,delete l.hasm);void 0!==l.hasz&&(l.hasZ=l.hasz,delete l.hasz);void 0!==l.spatialreference&&(l.spatialReference=l.spatialreference,delete l.spatialreference);void 0!==l.rings&&(l.rings=this.fixPathArrays(l.rings,!0===l.hasZ,!0===l.hasZ));void 0!==l.paths&&(l.paths=this.fixPathArrays(l.paths,!0===l.hasZ,!0===l.hasM));void 0!==l.points&&(l.points=this.fixPointArrays(l.points,!0===l.hasZ,!0===l.hasM));return c.fromJson(l)};k.fixPathArrays=
function(l,m,n){var p=[];if(l instanceof Array)for(var v=0;v<l.length;v++)p.push(this.fixPointArrays(l[v],m,n));else if(l instanceof g)for(v=0;v<l.length();v++)p.push(this.fixPointArrays(l.get(v),m,n));return p};k.fixPointArrays=function(l,m,n){var p=[];if(l instanceof Array)for(var v=0;v<l.length;v++){var r=l[v];r instanceof d?m&&n?p.push([r.x,r.y,r.z,r.m]):m?p.push([r.x,r.y,r.z]):n?p.push([r.x,r.y,r.m]):p.push([r.x,r.y]):r instanceof g?p.push(r.toArray()):p.push(r)}else if(l instanceof g)for(v=
0;v<l.length();v++)r=l.get(v),r instanceof d?m&&n?p.push([r.x,r.y,r.z,r.m]):m?p.push([r.x,r.y,r.z]):n?p.push([r.x,r.y,r.m]):p.push([r.x,r.y]):r instanceof g?p.push(r.toArray()):p.push(r);return p};k.convertDictionaryToJson=function(l,m){void 0===m&&(m=!1);var n={},p;for(p in l.attributes){var v=l.attributes[p];v instanceof b&&(v=k.convertDictionaryToJson(v));m?n[p.toLowerCase()]=v:n[p]=v}return n};k.parseAttributesFromDictionary=function(l){var m={},n;for(n in l.attributes){var p=l.attributes[n];
if(f.isSimpleType(p))m[n]=p;else throw Error("Illegal Argument");}return m};k.fromJson=function(l){var m=null;null!==l.geometry&&void 0!==l.geometry&&(m=c.fromJson(l.geometry));var n={};if(null!==l.attributes&&void 0!==l.attributes)for(var p in l.attributes){var v=l.attributes[p];if(null===v)n[p]=v;else if(f.isString(v)||f.isNumber(v)||f.isBoolean(v)||f.isDate(v))n[p]=v;else throw Error("Illegal Argument");}return k.createFromGraphicLikeObject(m,n,null)};k.prototype.fullDomain=function(l,m){return null!==
this._layer&&this._layer.fields?f.getDomain(l,this._layer,this,m):null};k.prototype.subtypes=function(){return null!==this._layer&&this._layer.fields?this._layer.typeIdField?{subtypeField:this._layer.typeIdField,subtypes:this._layer.types?this._layer.types.map(function(l){return{name:l.name,code:l.id}}):[]}:null:null};k.prototype.domainValueLookup=function(l,m,n){if(null===this._layer||!this._layer.fields)return null;n=f.getDomain(l,this._layer,this,n);if(void 0===m)try{m=this.field(l)}catch(p){return null}return f.getDomainValue(n,
m)};k.prototype.gdbVersion=function(){if(null===this._layer)return"";var l=this._layer.gdbVersion;return void 0===l?"":""===l&&this._layer.capabilities&&this._layer.capabilities.isVersioned?"SDE.DEFAULT":l};k.prototype.domainCodeLookup=function(l,m,n){if(null===this._layer||!this._layer.fields)return null;if(void 0===m){try{m=this.field(l)}catch(p){return null}return m}l=f.getDomain(l,this._layer,this,n);return f.getDomainCode(l,m)};k.prototype.schema=function(){if(null===this._layer||!this._layer.fields)return null;
for(var l=[],m=0,n=this._layer.fields;m<n.length;m++)l.push(e.esriFieldToJson(n[m]));return{objectIdField:this._layer.objectIdField,globalIdField:this._layer.globalIdField,geometryType:void 0===e.layerGeometryEsriRestConstants[this._layer.geometryType]?"":e.layerGeometryEsriRestConstants[this._layer.geometryType],fields:l}};return k}()})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polyline ./Polygon ./Multipoint ./Extent".split(" "),function(D,
q,a,b,g,f,h,d,c){function e(n,p,v){var r=n.rings||n.paths,y,x;var z=0;for(y=r.length;z<y;z++){var u=r[z];var w=0;for(x=u.length;w<x;w++){var t=u[w];if(0<w)A+=t[0],G+=t[1];else{var A=t[0];var G=t[1]}t[0]=p(A);t[1]=v(G)}}return n}var k={esriGeometryPoint:function(n,p,v){n.x=p(n.x);n.y=v(n.y);return n},esriGeometryPolyline:e,esriGeometryPolygon:e,esriGeometryEnvelope:function(n,p,v){n.xmin=p(n.xmin);n.ymin=v(n.ymin);n.xmax=p(n.xmax);n.ymax=v(n.ymax);return n},esriGeometryMultipoint:function(n,p,v){var r=
n.points,y;var x=0;for(y=r.length;x<y;x++){var z=r[x];if(0<x)u+=z[0],w+=z[1];else{var u=z[0];var w=z[1]}z[0]=p(u);z[1]=v(w)}return n}},l={esriGeometryPoint:function(n,p,v){n.x=p(n.x);n.y=v(n.y);return n}},m={createInstance:function(n,p){var v=new n;p&&b.mixin(v,p);return v},fromJson:function(n){if(void 0!==n.x&&void 0!==n.y)return new g(n);if(void 0!==n.paths)return new f(n);if(void 0!==n.rings)return new h(n);if(void 0!==n.points)return new d(n);if(void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&
void 0!==n.ymax)return new c(n)},getJsonType:function(n){return n instanceof g?"esriGeometryPoint":n instanceof f?"esriGeometryPolyline":n instanceof h?"esriGeometryPolygon":n instanceof c?"esriGeometryEnvelope":n instanceof d?"esriGeometryMultipoint":null},getGeometryType:function(n){return"esriGeometryPoint"===n?g:"esriGeometryPolyline"===n?f:"esriGeometryPolygon"===n?h:"esriGeometryEnvelope"===n?c:"esriGeometryMultipoint"===n?d:null},supportsLazyUnquantization:function(n){return"esriGeometryPoint"===
n||"esriGeometryPolyline"===n||"esriGeometryPolygon"===n||"esriGeometryMultipoint"===n},unquantizeFunction:function(n,p){if(n&&p){var v=p.translate[0],r=p.translate[1],y=p.scale[0],x=p.scale[1],z=function(t){return t*y+v},u=function(t){return r-t*x},w=k[n];return function(t){return t?w(t,z,u):null}}},unquantize:function(n,p,v){if(p=m.unquantizeFunction(p,v)){var r=n.length;for(v=0;v<r;v++)p(n[v].geometry)}},quantizeFunction:function(n,p){if(n&&"esriGeometryPoint"===n&&p){var v=p.translate[0],r=p.translate[1],
y=p.scale[0],x=p.scale[1],z=function(t){return Math.round((t-v)/y)},u=function(t){return Math.round((r-t)/x)},w=l[n];return function(t){return t?w(t,z,u):null}}},quantize:function(n,p,v){if(p=m.quantizeFunction(p,v)){var r=n.length;for(v=0;v<r;v++)p(n[v].geometry)}}};D.mixin(D.getObject("geometry",!0,a),m);return m})},"esri/arcade/featureset/support/shared":function(){var D=this&&this.__assign||function(){D=Object.assign||function(q){for(var a,b=1,g=arguments.length;b<g;b++){a=arguments[b];for(var f in a)Object.prototype.hasOwnProperty.call(a,
f)&&(q[f]=a[f])}return q};return D.apply(this,arguments)};define(["require","exports","../../polyfill/promiseUtils","../../../geometry/Extent","../../../layers/Field"],function(q,a,b,g,f){function h(c){var e=null;c.domain&&(e="range"===c.domain.type?{type:"range",range:[c.domain.minValue,c.domain.maxValue]}:{type:"codedValue",codedValues:c.domain.toJson().codedValues});return D(D({name:c.name,type:c.type,alias:c.alias},void 0!==c.length?{length:c.length}:{}),{editable:!0===c.editable,nullable:!0===
c.nullable,domain:e})}function d(c){return c instanceof Date}Object.defineProperty(a,"__esModule",{value:!0});a.stableStringify=a.extractServiceUrl=a.reduceArrayWithPromises=a.toEsriGeometryType=a.layerFieldEsriConstants=a.layerGeometryEsriRestConstants=a.layerGeometryEsriConstants=a.callback=a.errback=a.defaultMaxRecords=a.sameGeomType=a.convertLinearUnitsToCode=a.shapeExtent=a.convertSquareUnitsToCode=a.cloneAttributes=a.equalityTest=a.isDate=a.isArray=a.isNumber=a.isBoolean=a.isString=a.IdState=
a.esriFieldToJson=a.cloneField=a.FeatureServiceDatabaseType=void 0;(function(c){c[c.Standardised=0]="Standardised";c[c.StandardisedNoInterval=1]="StandardisedNoInterval";c[c.SqlServer=2]="SqlServer";c[c.Oracle=3]="Oracle";c[c.Postgres=4]="Postgres";c[c.PGDB=5]="PGDB";c[c.FILEGDB=6]="FILEGDB";c[c.NotEvaluated=7]="NotEvaluated"})(a.FeatureServiceDatabaseType||(a.FeatureServiceDatabaseType={}));a.cloneField=function(c){return new f(h(c))};a.esriFieldToJson=h;(function(c){c[c.InFeatureSet=0]="InFeatureSet";
c[c.NotInFeatureSet=1]="NotInFeatureSet";c[c.Unknown=2]="Unknown"})(a.IdState||(a.IdState={}));a.isString=function(c){return"string"===typeof c||c instanceof String};a.isBoolean=function(c){return"boolean"===typeof c};a.isNumber=function(c){return"number"===typeof c};a.isArray=function(c){return c instanceof Array};a.isDate=d;a.equalityTest=function(c,e){return c===e?!0:d(c)&&d(e)?c.getTime()===e.getTime():!1};a.cloneAttributes=function(c){var e={},k;for(k in c)e[k]=c[k];return e};a.convertSquareUnitsToCode=
function(c){if(void 0===c)return null;if("number"===typeof c)return c;switch(c.toLowerCase()){case "meters":case "meter":return 109404;case "miles":case "mile":return 109413;case "kilometers":case "kilometer":case "km":return 109414}return null};a.shapeExtent=function(c){if(null===c)return null;switch(c.type){case "polygon":case "multipoint":case "polyline":return c.getExtent();case "point":return new g({xmin:c.x,ymin:c.y,xmax:c.x,ymax:c.y,spatialReference:c.spatialReference});case "extent":return c}return null};
a.convertLinearUnitsToCode=function(c){if(void 0===c)return null;if("number"===typeof c||"number"===typeof c)return c;switch(c.toLowerCase()){case "meters":case "meter":return 9001;case "miles":case "mile":return 9035;case "kilometers":case "kilometer":case "km":return 9036}return null};a.sameGeomType=function(c,e){return c===e||"point"===c&&"esriGeometryPoint"===e||"polyline"===c&&"esriGeometryPolyline"===e||"polygon"===c&&"esriGeometryPolygon"===e||"extent"===c&&"esriGeometryEnvelope"===e||"multipoint"===
c&&"esriGeometryMultipoint"===e||"point"===e&&"esriGeometryPoint"===c||"polyline"===e&&"esriGeometryPolyline"===c||"polygon"===e&&"esriGeometryPolygon"===c||"extent"===e&&"esriGeometryEnvelope"===c||"multipoint"===e&&"esriGeometryMultipoint"===c?!0:!1};a.defaultMaxRecords=1E3;a.errback=function(c){return function(e){c.reject(e)}};a.callback=function(c,e){return function(){try{c.apply(null,arguments)}catch(k){e.reject(k)}}};a.layerGeometryEsriConstants={point:"point",polygon:"polygon",polyline:"polyline",
multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"};a.layerGeometryEsriRestConstants={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",
esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"};a.layerFieldEsriConstants={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger","long":"esriFieldTypeLong",single:"esriFieldTypeSingle","double":"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID",
"global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",
esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};a.toEsriGeometryType=function(c){switch(c){case "point":return"esriGeometryPoint";case "polygon":return"esriGeometryPolygon";case "multipoint":return"esriGeometryMultipoint";case "polyline":return"esriGeometryPolyline";default:return"esriGeometryPoint"}};a.reduceArrayWithPromises=function(c,e){return b.create(function(k,l){var m=b.resolve(!0);c.reduce(function(n,p,v,r){return n.then(function(y){try{return e(y,
p,v,r)}catch(x){return b.reject(x)}},function(y){return b.reject(y)})},m).then(k,l)})};a.extractServiceUrl=function(c){if(void 0===c)return"";c=c.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer");c=c.replace(/\/mapserver\/[0-9]*/i,"/MapServer");return c=c.split("?")[0]};a.stableStringify=function(c,e){e||(e={});"function"===typeof e&&(e={cmp:e});var k="boolean"===typeof e.cycles?e.cycles:!1,l=e.cmp&&function(n){return function(p){return function(v,r){return n({key:v,value:p[v]},{key:r,value:p[r]})}}}(e.cmp),
m=[];return function v(p){p&&p.toJson&&"function"===typeof p.toJson&&(p=p.toJson());if(void 0!==p){if("number"===typeof p)return isFinite(p)?""+p:"null";if("object"!==typeof p)return JSON.stringify(p);var r;if(Array.isArray(p)){var y="[";for(r=0;r<p.length;r++)r&&(y+=","),y+=v(p[r])||"null";return y+"]"}if(null===p)return"null";if(-1!==m.indexOf(p)){if(k)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var x=m.push(p)-1,z=Object.keys(p).sort(l&&l(p));
y="";for(r=0;r<z.length;r++){var u=z[r],w=v(p[u]);w&&(y&&(y+=","),y+=JSON.stringify(u)+":"+w)}m.splice(x,1);return"{"+y+"}"}}(c)}})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./RangeDomain ./CodedValueDomain".split(" "),function(D,q,a,b,g,f,h){D=D(null,{declaredClass:"esri.layers.Field",constructor:function(d){if(d&&q.isObject(d)&&(this.name=d.name,this.type=d.type,this.alias=d.alias,this.length=d.length,this.editable=d.editable,this.nullable=
d.nullable,this.defaultValue=d.defaultValue,this.description=d.description?JSON.parse(d.description):null,this.isViewOverride=!!d.isViewOverride,(d=d.domain)&&q.isObject(d)))switch(d.type){case "range":this.domain=new f(d);break;case "codedValue":this.domain=new h(d)}},toJson:function(){return g.fixJson({name:this.name,type:this.type,alias:this.alias,length:this.length,editable:this.editable,nullable:this.nullable,defaultValue:this.defaultValue,description:this.description?JSON.stringify(this.description):
null,domain:this.domain?this.domain.toJson():null,isViewOverride:this.isViewOverride||void 0})},toJSON:function(){return this.toJson()}});q.setObject("layers.Field",D,b);return D})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Domain".split(" "),function(D,q,a,b,g,f){D=D([f],{declaredClass:"esri.layers.RangeDomain",constructor:function(h){h&&q.isObject(h)&&(this.minValue=h.range[0],this.maxValue=h.range[1])},toJson:function(){var h=this.inherited(arguments);
h.range=[this.minValue,this.maxValue];return g.fixJson(h)}});q.setObject("layers.RangeDomain",D,b);return D})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../lang"],function(D,q,a,b,g){D=D(null,{declaredClass:"esri.layers.Domain",constructor:function(f){f&&q.isObject(f)&&(this.name=f.name,this.type=f.type)},toJson:function(){return g.fixJson({name:this.name,type:this.type})}});q.setObject("layers.Domain",D,b);return D})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../lang ./Domain".split(" "),
function(D,q,a,b,g,f,h){D=D([h],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(d){d&&q.isObject(d)&&(this.codedValues=d.codedValues)},getName:function(d){var c;a.some(this.codedValues,function(e){e.code==d&&(c=e.name);return!!c});return c},toJson:function(){var d=this.inherited(arguments);d.codedValues=q.clone(this.codedValues);return f.fixJson(d)}});q.setObject("layers.CodedValueDomain",D,g);return D})},"esri/layers/vectorTiles/core/screenUtils":function(){define(["require","exports"],
function(D,q){function a(g){return g?72*g/q.DPI:0}Object.defineProperty(q,"__esModule",{value:!0});var b=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;q.DPI=96;q.pt2px=function(g){return g?g/72*q.DPI:0};q.px2pt=a;q.toPt=function(g){if("string"===typeof g){if(b.test(g)){var f=g.match(b),h=Number(f[1]);f=f[3]&&f[3].toLowerCase();g="-"===g.charAt(0);h="px"===f?a(h):h;return g?-h:h}return null}return g}})},"esri/layers/vectorTiles/support/arcadeUtils":function(){define(["require","exports","esri/renderers/arcadeUtils",
"esri/arcade/Dictionary"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.createSyntaxTree=function(g){return a.createSyntaxTree(g)};q.createFunction=function(g,f){return a.createFunction(g,f)};q.createExecContext=function(g,f){return a.createExecContext(g,f)};q.executeFunction=function(g,f){return a.executeFunction(g,f)};q.extractFieldNames=function(g){return a.extractFieldNames(g)};q.getViewInfo=function(g){if(g&&g.viewingMode&&null!=g.scale&&g.spatialReference)return{view:new b({viewingMode:g.viewingMode,
scale:g.scale}),sr:g.spatialReference}}})},"esri/renderers/arcadeUtils":function(){define(["dojo/_base/lang","dojo/has","../kernel","../support/expressionUtils"],function(D,q,a,b){D.setObject("renderer.arcadeUtils",b,a);return b})},"esri/support/expressionUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/has dojo/Deferred ../kernel ../arcade/arcade ../arcade/Feature".split(" "),function(D,q,a,b,g,f,h){function d(l){return l.replace(/[|\\{}()[\]^$+*?.]/g,"\\$\x26")}var c={vars:{$feature:"any",
$view:"any"}},e=/^\$(feature|aggregatedFeatures)\./i,k={_getSyntaxTree:function(l){return"string"===typeof l?k.createSyntaxTree(l):l},createSyntaxTree:function(l){try{var m=l?f.parseScript(l):null}catch(n){m=null}return m},createFunction:function(l,m){m=m||D.clone(c);var n=k._getSyntaxTree(l);try{var p=n?f.compileScript(n,m):null}catch(v){p=null}return p},createExecContext:function(l,m){return{vars:{$feature:l?h.createFromGraphic(l):new h,$view:m&&m.view},spatialReference:m&&m.sr}},evalSyntaxTree:function(l,
m){try{var n=f.executeScript(l,m)}catch(p){n=null}return n},executeFunction:function(l,m){try{var n=l?l(m):null}catch(p){n=null}return n},executeAsyncFunction:function(l,m){try{var n=l?l(m):(new b).reject(Error("expressionUtils.executeAsyncFunction: Invalid argument. compiledFunc is missing."))}catch(p){n=(new b).reject(p)}return n},extractFieldNames:function(l,m){var n=k._getSyntaxTree(l);n=f.extractExpectedFieldLiterals(n);var p=[];q.forEach(n,function(r){e.test(r)&&(r=r.replace(e,""),p.push(r))});
var v=q.filter(p,function(r){return-1!==r.indexOf("*")});p=q.filter(p,function(r){return-1===v.indexOf(r)});m&&q.forEach(v,function(r){var y=new RegExp("^"+r.split(/\*+/).map(d).join(".*")+"$","i");q.forEach(m,function(x){y.test(x)&&p.push(x)})});p.sort();return q.filter(p,function(r,y){return 0===y||p[y-1]!==r})},dependsOnView:function(l){return k.hasVariable(l,"$view")},hasGeometryFunctions:function(l){return(l=k._getSyntaxTree(l))?f.scriptTouchesGeometry(l):!1},hasGeometryOperations:function(l){return(l=
k._getSyntaxTree(l))?f.scriptUsesGeometryEngine(l):!1},enableGeometryOperations:function(){return f.enableGeometrySupport()},hasVariable:function(l,m){var n=k._getSyntaxTree(l);return n?f.referencesMember(n,m):!1},hasFunction:function(l,m){var n=k._getSyntaxTree(l);return n?f.referencesFunction(n,m):!1},createFeatureSetFromLayer:function(l,m){m=m||{};var n=f.featureSetUtils();return n?n.constructFeatureSet(l,m.spatialReference,m.outFields,m.returnGeometry,m.cache):null},createFeatureSetFromLayerUrl:function(l,
m){m=m||{};var n=f.featureSetUtils();return n?n.constructFeatureSetFromUrlRaw(l,m.spatialReference,m.outFields,m.returnGeometry,m.cache):null},createFeatureSetCollectionFromMap:function(l,m){var n=f.featureSetUtils();return n?n.createFeatureSetCollectionFromMap(l,l.spatialReference,m&&m.cache):null},createFeatureSetCollectionFromServiceUrl:function(l,m){m=m||{};var n=f.featureSetUtils();return n?n.createFeatureSetCollectionFromService(l,m.spatialReference,m.cache):null},hasFeatureSetOperations:function(l){return(l=
k._getSyntaxTree(l))?f.scriptUsesFeatureSet(l):!1},enableFeatureSetOperations:function(){return f.enableFeatureSetSupport().then(function(){var l=f.featureSetUtils();l&&l.initialiseMetaDataCache()})},enableAsyncOperations:function(){return f.enableAsyncSupport()}};D.setObject("support.expressionUtils",k,g);return k})},"esri/arcade/arcade":function(){define("require exports ./arcadeCompiler ./arcadeRuntime ./parser ./treeAnalysis dojo/has ./polyfill/promiseUtils".split(" "),function(D,q,a,b,g,f,h,
d){function c(M,P){if(null===A)throw Error("Async Arcade must be enabled for this script");return h("csp-restrictions")||!1===u?function(aa){return A.executeScript(M,aa)}:a.compileScript(M,P,!0)}function e(M,P){void 0===P&&(P=[]);return g.parseScript(M,P)}function k(M,P){if(!0===P.useAsync||!0===M.isAsync){if(null===A)throw Error("Async Arcade must be enabled for this script");return A.executeScript(M,P)}return b.executeScript(M,P)}function l(M,P){return b.referencesMember(M,P)}function m(M,P){void 0===
P&&(P=[]);void 0===M.usesGeometry&&f.findScriptDependencies(M,P);return!0===M.usesGeometry}function n(){return B?B:B=d.create(function(M,P){D(["../geometry/geometryEngine","./functions/geomsync"],function(aa,ca){t=!0;ca.setGeometryEngine(aa);M(!0)},function(aa){P(aa)})})}function p(){return null!==E?E:E=a.enableAsyncSupport().then(function(){return d.create(function(M,P){D(["./arcadeAsyncRuntime"],function(aa){try{A=aa;aa=0;for(var ca=G;aa<ca.length;aa++){var ea=ca[aa];A.extend(ea);a.extend(ea,"async")}G=
null;M(!0)}catch(T){P(T)}},P)})})}function v(){return A?!0:!1}function r(){return F?F:F=p().then(function(){return d.create(function(M,P){D(["./featureSetUtils","./functions/featuresetbase","./functions/featuresetgeom","./functions/featuresetstats","./functions/featuresetstring"],function(aa,ca,ea,T,la){try{I=aa,A.extend([ca,ea,T,la]),a.extend([ca,ea,T,la],"async"),w=!0,M(!0)}catch(X){P(X)}},P)})})}function y(M,P){void 0===P&&(P=[]);void 0===M.usesFeatureSet&&f.findScriptDependencies(M,P);return!0===
M.usesFeatureSet}function x(M,P){if(P)for(var aa=0;aa<P.length;aa++)if(l(M,P[aa]))return!0;return!1}Object.defineProperty(q,"__esModule",{value:!0});q.featureSetUtils=q.scriptTouchesGeometry=q.loadScriptDependencies=q.scriptIsAsync=q.scriptUsesFeatureSet=q.enableFeatureSetSupport=q.isGeometryEnabled=q.isAsyncEnabled=q.isFeatureSetSupportEnabled=q.enableAsyncSupport=q.enableGeometrySupport=q.scriptUsesGeometryEngine=q.extractExpectedFieldLiterals=q.extractFieldLiterals=q.referencesFunction=q.referencesMember=
q.executeScript=q.parseAndExecuteScript=q.scriptCheck=q.validateScript=q.parseScript=q.extend=q.compileScript=void 0;var z="feature angle bearing centroid envelopeintersects extent geometry isselfintersecting ringisclockwise".split(" "),u=function(){if(h("csp-restrictions"))return!1;try{return(new Function("function* test() {}; return true"))()}catch(M){return!1}}(),w=!1,t=!1,A=null,G=[];q.compileScript=function(M,P){return!0===P.useAsync||!0===M.isAsync?c(M,P):h("csp-restrictions")?function(aa){return b.executeScript(M,
aa)}:a.compileScript(M,P)};q.extend=function(M){b.extend(M);a.extend(M,"sync");null===A?G.push(M):(a.extend(M,"async"),A.extend(M))};q.parseScript=e;q.validateScript=function(M,P,aa){void 0===aa&&(aa="");return g.validateScript(M,P,aa)};q.scriptCheck=function(M,P,aa,ca){void 0===ca&&(ca="");return g.scriptCheck(M,P,aa,ca)};q.parseAndExecuteScript=function(M,P,aa){void 0===aa&&(aa=[]);M=g.parseScript(M,aa);return k(M,P)};q.executeScript=k;q.referencesMember=l;q.referencesFunction=function(M,P){return b.referencesFunction(M,
P)};q.extractFieldLiterals=function(M,P){void 0===P&&(P=!1);return g.extractFieldLiterals(M,P)};q.extractExpectedFieldLiterals=function(M){return g.extractExpectedFieldLiterals(M)};q.scriptUsesGeometryEngine=m;var B=null;q.enableGeometrySupport=n;var E=null;q.enableAsyncSupport=p;q.isFeatureSetSupportEnabled=function(){return w};q.isAsyncEnabled=v;q.isGeometryEnabled=function(){return t};var F=null;q.enableFeatureSetSupport=r;q.scriptUsesFeatureSet=y;q.scriptIsAsync=function(M,P){void 0===P&&(P=[]);
void 0===M.isAsync&&f.findScriptDependencies(M,P);return!0===M.isAsync};q.loadScriptDependencies=function(M,P,aa,ca){void 0===aa&&(aa=[]);void 0===ca&&(ca=!1);return d.create(function(ea,T){var la="string"===typeof M?e(M):M,X=[];la&&(!1===t&&(m(la)||ca)&&X.push(n()),!1===v()&&(!0===la.isAsync||P)&&X.push(p()),!1===w&&(y(la)||x(la,aa))&&X.push(r()));X.length?d.all(X).then(function(){ea(!0)},T):ea(!0)})};q.scriptTouchesGeometry=function(M){if(m(M))return!0;M=f.findFunctionCalls(M);for(var P=!1,aa=0;aa<
M.length;aa++)if(-1<z.indexOf(M[aa])){P=!0;break}return P};var I=null;q.featureSetUtils=function(){return I}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ./polyfill/promiseUtils ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y,x,z,u,w,t,A,G){function B(O,Q,ba){try{return ba(O,null,Q)}catch(ha){throw ha;}}function E(O){return O instanceof Error?y.reject(O):y.reject(Error(O))}function F(O,Q){try{switch(Q.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return ca(O,Q);case "VariableDeclaration":for(var ba=[],ha=0;ha<Q.declarations.length;ha++)ba.push(F(O,Q.declarations[ha]));return ba.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return aa(O,
Q);case "FunctionDeclaration":var pa=Q.id.name.toLowerCase(),za={isAsync:O.isAsync,spatialReference:O.spatialReference,console:O.console,lrucache:O.lrucache,interceptor:O.interceptor,services:O.services,symbols:O.symbols,mangleMap:O.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:O.depthCounter+1,globalScope:O.globalScope};if(64<za.depthCounter)throw Error("Exceeded maximum function depth");ba="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; \n   var lscope \x3d runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n";
for(ha=0;ha<Q.params.length;ha++){var Fa=Q.params[ha].name.toLowerCase(),Ha=ia(O);za.localScope._SymbolsMap[Fa]=Ha;za.mangleMap[Fa]=Ha;ba+="lscope['"+Ha+"']\x3darguments["+ha.toString()+"];\n"}!0===O.isAsync?(ba=ba+"return lang.__awaiter(this, void 0, void 0, function* () {\n"+(aa(za,Q.body)+"\n return lastStatement; "),ba+="});  }, runtimeCtx))\n lastStatement \x3d lc.voidOperation; \n"):(ba+=aa(za,Q.body)+"\n return lastStatement; }, runtimeCtx))",ba+="\n lastStatement \x3d lc.voidOperation; \n");
if(void 0!==O.globalScope[pa])var Ba="gscope['"+pa+"']\x3d"+ba;else void 0!==O.globalScope._SymbolsMap[pa]?Ba="gscope['"+O.globalScope._SymbolsMap[pa]+"']\x3d"+ba:(Ha=ia(O),O.globalScope._SymbolsMap[pa]=Ha,O.mangleMap[pa]=Ha,Ba="gscope['"+Ha+"']\x3d"+ba);return Ba;case "ReturnStatement":var va=null===Q.argument?"return lc.voidOperation":"return "+F(O,Q.argument);return va;case "IfStatement":if("AssignmentExpression"===Q.test.type||"UpdateExpression"===Q.test.type)throw Error(e.nodeErrorMessage(Q.test,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var Ca=F(O,Q.test),Aa=L(O),Na="var "+Aa+" \x3d "+Ca+";\n if ("+Aa+" \x3d\x3d\x3d true) {\n"+P(O,Q.consequent)+"\n }\n";Na=null!==Q.alternate?Na+("else if ("+Aa+"\x3d\x3d\x3dfalse)   { \n"+P(O,Q.alternate)+"}\n"):Na+("else if ("+Aa+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return Na+="else { lang.error({type: '"+Q.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";case "ExpressionStatement":var Ea="AssignmentExpression"===
Q.expression.type?"lastStatement \x3d lc.voidOperation; "+F(O,Q.expression)+"; \n ":"lastStatement \x3d "+F(O,Q.expression)+"; ";return Ea;case "AssignmentExpression":return M(O,Q);case "UpdateExpression":return I(O,Q);case "BreakStatement":return"break";case "ContinueStatement":return"continue";case "TemplateLiteral":try{var Sa=[];pa=Ba=0;for(ha=Q.quasis;pa<ha.length;pa++){var Ia=ha[pa];Sa.push(Ia.value?JSON.stringify(Ia.value.cooked):JSON.stringify(""));!1===Ia.tail&&(Sa.push(Q.expressions[Ba]?
"lang.castString(lang.aCheck("+F(O,Q.expressions[Ba])+", 'TemplateLiteral'))":""),Ba++)}ba="(["+Sa.join(",")+"]).join('')"}catch(Ua){throw Ua;}return ba;case "TemplateElement":return JSON.stringify(Q.value?Q.value.cooked:"");case "ForStatement":ba="lastStatement \x3d lc.voidOperation; \n";null!==Q.init&&(ba+=F(O,Q.init)+"; ");var Xa=L(O),Ja=L(O);ba+="var "+Xa+" \x3d true; \n do { ";null!==Q.update&&(ba+=" if ("+Xa+"\x3d\x3d\x3dfalse) {\n "+F(O,Q.update)+"  \n}\n "+Xa+"\x3dfalse; \n");null!==Q.test&&
(ba+="var "+Ja+" \x3d "+F(O,Q.test)+"; ",ba+="if ("+Ja+"\x3d\x3d\x3dfalse) { break; } else if ("+Ja+"!\x3d\x3dtrue) { lang.error({type: '"+Q.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");ba+=F(O,Q.body);null!==Q.update&&(ba+="\n "+F(O,Q.update));return ba+("\n"+Xa+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation; ");case "ForInStatement":var Oa=L(O),Ta=L(O),Pa=L(O),ua="var "+Oa+" \x3d "+F(O,Q.right)+";\n";"VariableDeclaration"===Q.left.type&&(ua+=F(O,Q.left));
var Ma="VariableDeclaration"===Q.left.type?Q.left.declarations[0].id.name:Q.left.name;Ma=Ma.toLowerCase();ba="";null!==O.localScope&&(void 0!==O.localScope[Ma]?ba="lscope['"+Ma+"']":void 0!==O.localScope._SymbolsMap[Ma]&&(ba="lscope['"+O.localScope._SymbolsMap[Ma]+"']"));""===ba&&(void 0!==O.globalScope[Ma]?ba="gscope['"+Ma+"']":void 0!==O.globalScope._SymbolsMap[Ma]&&(ba="gscope['"+O.globalScope._SymbolsMap[Ma]+"']"));ua=ua+("if ("+Oa+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n else if (lc.isArray(")+
(Oa+") || lc.isString("+Oa+")) {var ")+(Ta+"\x3d"+Oa+".length; \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Ta+"; "+Pa+"++) {\n");ua+=ba+"\x3d"+Pa+";\n";ua+=F(O,Q.body);ua+="\n}\n";ua+=" lastStatement \x3d lc.voidOperation; \n";ua+=" \n}\n";ua+="else if (lc.isImmutableArray("+Oa+")) {";ua=ua+("var "+Ta+"\x3d"+Oa+".length(); \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Ta+"; "+Pa+"++) {\n");ua+=ba+"\x3d"+Pa+";\n";ua+=F(O,Q.body);ua+="\n}\n";ua+=" lastStatement \x3d lc.voidOperation; \n";ua+=" \n}\n";ua+="else if (( "+
Oa+" instanceof lang.Dictionary) || ( "+Oa+" instanceof lang.Feature)) {";ua=ua+("var "+Ta+"\x3d"+Oa+".keys(); \nfor(var ")+(Pa+"\x3d0; "+Pa+"\x3c"+Ta+".length; "+Pa+"++) {\n");ua+=ba+"\x3d"+Ta+"["+Pa+"];\n";ua+=F(O,Q.body);ua+="\n}\n";ua+=" lastStatement \x3d lc.voidOperation; \n";ua+=" \n}\n";O.isAsync&&(ua+="else if (lc.isFeatureSet("+Oa+")) {",ua=ua+("var "+Ta+"\x3d"+Oa+".iterator(runtimeCtx.abortSignal); \nfor(var ")+(Pa+"\x3dlang. graphicToFeature( yield "+Ta+".next(),"+Oa+"); "+Pa+"!\x3dnull; "+
Pa+"\x3dlang. graphicToFeature( yield "+Ta+".next(),"+Oa+")) {\n")+(ba+"\x3d"+Pa+";\n"),ua+=F(O,Q.body),ua+="\n}\n",ua+=" lastStatement \x3d lc.voidOperation; \n",ua+=" \n}\n");return ua+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return T(O,Q);case "MemberExpression":try{ba=void 0;ba=!0===Q.computed?F(O,Q.property):"'"+Q.property.name+"'";var Hb="lang.member("+F(O,Q.object)+","+ba+")"}catch(Ua){throw Ua;}return Hb;case "Literal":return null===Q.value||void 0===Q.value?"null":
JSON.stringify(Q.value);case "ThisExpression":throw Error(e.nodeErrorMessage(Q,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==Q.callee.type)throw Error(e.nodeErrorMessage(Q,"RUNTIME","ONLYNODESSUPPORTED"));var eb=Q.callee.name.toLowerCase();ba="";null!==O.localScope&&(void 0!==O.localScope[eb]?ba="lscope['"+eb+"']":void 0!==O.localScope._SymbolsMap[eb]&&(ba="lscope['"+O.localScope._SymbolsMap[eb]+"']"));""===ba&&(void 0!==O.globalScope[eb]?ba="gscope['"+eb+"']":void 0!==O.globalScope._SymbolsMap[eb]&&
(ba="gscope['"+O.globalScope._SymbolsMap[eb]+"']"));if(""!==ba){ha="[";for(Ia=0;Ia<Q.arguments.length;Ia++)0<Ia&&(ha+=", "),ha+=F(O,Q.arguments[Ia]);ha+="]";Sa=O.isAsync?"(yield lang.callfunc("+ba+","+ha+",runtimeCtx) )":"lang.callfunc("+ba+","+ha+",runtimeCtx)"}else throw Error(e.nodeErrorMessage(Q,"RUNTIME","NOTFOUND"));}catch(Ua){throw Ua;}return Sa;case "UnaryExpression":try{var tb="lang.unary("+F(O,Q.argument)+",'"+Q.operator+"')"}catch(Ua){throw Ua;}return tb;case "BinaryExpression":try{var Ya=
"lang.binary("+F(O,Q.left)+","+F(O,Q.right)+",'"+Q.operator+"')"}catch(Ua){throw Ua;}return Ya;case "LogicalExpression":try{if("AssignmentExpression"===Q.left.type||"UpdateExpression"===Q.left.type)throw Error(e.nodeErrorMessage(Q.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===Q.right.type||"UpdateExpression"===Q.right.type)throw Error(e.nodeErrorMessage(Q.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===Q.operator||"||"===Q.operator)var ub=
"(lang.logicalCheck("+F(O,Q.left)+") "+Q.operator+" lang.logicalCheck("+F(O,Q.right)+"))";else throw Error(e.nodeErrorMessage(Q,"RUNTIME","ONLYORORAND"));}catch(Ua){throw Ua;}return ub;case "ConditionalExpression":throw Error(e.nodeErrorMessage(Q,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{ba=[];for(ha=0;ha<Q.elements.length;ha++)"Literal"===Q.elements[ha].type?ba.push(F(O,Q.elements[ha])):ba.push("lang.aCheck("+F(O,Q.elements[ha])+",'ArrayExpression')");var vb="["+ba.join(",")+"]"}catch(Ua){throw Ua;
}return vb;case "ObjectExpression":ba="lang.dictionary([";for(ha=0;ha<Q.properties.length;ha++){var gb=Q.properties[ha],wb="Identifier"===gb.key.type?"'"+gb.key.name+"'":F(O,gb.key),nb=F(O,gb.value);0<ha&&(ba+=",");ba+="lang.strCheck("+wb+",'ObjectExpression'),lang.aCheck("+nb+", 'ObjectExpression')"}return ba+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(e.nodeErrorMessage(Q,"RUNTIME","NOTSUPPORTED"));default:throw Error(e.nodeErrorMessage(Q,"RUNTIME","UNREOGNISED"));
}}catch(Ua){throw Ua;}}function I(O,Q){var ba=null,ha="";if("MemberExpression"===Q.argument.type)return ba=F(O,Q.argument.object),ha=!0===Q.argument.computed?F(O,Q.argument.property):"'"+Q.argument.property.name+"'","lang.memberupdate("+ba+","+ha+",'"+Q.operator+"',"+Q.prefix+")";ba=Q.argument.name.toLowerCase();if(null!==O.localScope){if(void 0!==O.localScope[ba])return"lang.update(lscope, '"+ba+"','"+Q.operator+"',"+Q.prefix+")";if(void 0!==O.localScope._SymbolsMap[ba])return"lang.update(lscope, '"+
O.localScope._SymbolsMap[ba]+"','"+Q.operator+"',"+Q.prefix+")"}if(void 0!==O.globalScope[ba])return"lang.update(gscope, '"+ba+"','"+Q.operator+"',"+Q.prefix+")";if(void 0!==O.globalScope._SymbolsMap[ba])return"lang.update(gscope, '"+O.globalScope._SymbolsMap[ba]+"','"+Q.operator+"',"+Q.prefix+")";throw Error("Variable not recognised");}function M(O,Q){var ba=F(O,Q.right),ha=null,pa="";if("MemberExpression"===Q.left.type)return ha=F(O,Q.left.object),pa=!0===Q.left.computed?F(O,Q.left.property):"'"+
Q.left.property.name+"'","lang.assignmember("+ha+","+pa+",'"+Q.operator+"',"+ba+")";ha=Q.left.name.toLowerCase();if(null!==O.localScope){if(void 0!==O.localScope[ha])return"lscope['"+ha+"']\x3dlang.assign("+ba+",'"+Q.operator+"', lscope['"+ha+"'])";if(void 0!==O.localScope._SymbolsMap[ha])return"lscope['"+O.localScope._SymbolsMap[ha]+"']\x3dlang.assign("+ba+",'"+Q.operator+"', lscope['"+O.localScope._SymbolsMap[ha]+"'])"}if(void 0!==O.globalScope[ha])return"gscope['"+ha+"']\x3dlang.assign("+ba+",'"+
Q.operator+"', gscope['"+ha+"'])";if(void 0!==O.globalScope._SymbolsMap[ha])return"gscope['"+O.globalScope._SymbolsMap[ha]+"']\x3dlang.assign("+ba+",'"+Q.operator+"', gscope['"+O.globalScope._SymbolsMap[ha]+"'])";throw Error("Variable not recognised");}function P(O,Q){return"BlockStatement"===Q.type?F(O,Q):"ReturnStatement"===Q.type||"BreakStatement"===Q.type||"ContinueStatement"===Q.type?F(O,Q)+"; ":"UpdateExpression"===Q.type?"lastStatement \x3d "+F(O,Q)+"; ":"ExpressionStatement"===Q.type?F(O,
Q):"ObjectExpression"===Q.type?"lastStatement \x3d "+F(O,Q)+"; ":F(O,Q)+"; "}function aa(O,Q){for(var ba="",ha=0;ha<Q.body.length;ha++)ba="ReturnStatement"===Q.body[ha].type?ba+(F(O,Q.body[ha])+"; \n"):"BreakStatement"===Q.body[ha].type?ba+(F(O,Q.body[ha])+"; \n"):"ContinueStatement"===Q.body[ha].type?ba+(F(O,Q.body[ha])+"; \n"):"UpdateExpression"===Q.body[ha].type?ba+("lastStatement \x3d "+F(O,Q.body[ha])+"; \n"):"ObjectExpression"===Q.body[ha].type?ba+("lastStatement \x3d "+F(O,Q.body[ha])+"; \n"):
ba+(F(O,Q.body[ha])+" \n");return ba}function ca(O,Q){var ba=null===Q.init?null:F(O,Q.init);ba===c.voidOperation&&(ba=null);var ha=Q.id.name.toLowerCase();if(null!==O.localScope){if(void 0!==O.localScope[ha])return"lscope['"+ha+"']\x3d"+ba+"; ";if(void 0!==O.localScope._SymbolsMap[ha])return"lscope['"+O.localScope._SymbolsMap[ha]+"']\x3d"+ba+"; ";var pa=ia(O);O.localScope._SymbolsMap[ha]=pa;O.mangleMap[ha]=pa;return"lscope['"+pa+"']\x3d"+ba+"; "}if(void 0!==O.globalScope[ha])return"gscope['"+ha+"']\x3d"+
ba+"; ";if(void 0!==O.globalScope._SymbolsMap[ha])return"gscope['"+O.globalScope._SymbolsMap[ha]+"']\x3d"+ba+"; ";pa=ia(O);O.globalScope._SymbolsMap[ha]=pa;O.mangleMap[ha]=pa;return"gscope['"+pa+"']\x3d"+ba+"; "}function ea(O,Q,ba){Q=Q.toLowerCase();switch(Q){case "hasz":return O=O.hasZ,void 0===O?!1:O;case "hasm":return O=O.hasM,void 0===O?!1:O;case "spatialreference":return Q=O.spatialReference._arcadeCacheId,void 0===Q&&(ba=!0,Object.freeze&&Object.isFrozen(O.spatialReference)&&(ba=!1),ba&&(wa++,
Q=O.spatialReference._arcadeCacheId=wa)),O=new g({wkt:O.spatialReference.wkt,wkid:O.spatialReference.wkid}),void 0!==Q&&(O._arcadeCacheId="SPREF"+Q.toString()),O}switch(O.type){case "extent":switch(Q){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return O=O[Q],void 0!==O?O:null;case "type":return"Extent"}break;case "polygon":switch(Q){case "rings":return Q=O.getCacheValue("_arcadeCacheId"),void 0===Q&&(wa++,Q=wa,O.setCacheValue("_arcadeCacheId",Q)),
O=new h(O.rings,O.spatialReference,!0===O.hasZ,!0===O.hasM,Q);case "type":return"Polygon"}break;case "point":switch(Q){case "x":case "y":case "z":case "m":return void 0!==O[Q]?O[Q]:null;case "type":return"Point"}break;case "polyline":switch(Q){case "paths":return Q=O.getCacheValue("_arcadeCacheId"),void 0===Q&&(wa++,Q=wa,O.setCacheValue("_arcadeCacheId",Q)),O=new h(O.paths,O.spatialReference,!0===O.hasZ,!0===O.hasM,Q);case "type":return"Polyline"}break;case "multipoint":switch(Q){case "points":return Q=
O.getCacheValue("_arcadeCacheId"),void 0===Q&&(wa++,Q=wa,O.setCacheValue("_arcadeCacheId",Q)),O=new d(O.points,O.spatialReference,!0===O.hasZ,!0===O.hasM,Q,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(ba,"RUNTIME","PROPERTYNOTFOUND"));}function T(O,Q){try{var ba=Q.name.toLowerCase();if(null!==O.localScope){if(void 0!==O.localScope[ba])return"lscope['"+ba+"']";if(void 0!==O.localScope._SymbolsMap[ba])return"lscope['"+O.localScope._SymbolsMap[ba]+"']"}if(void 0!==O.globalScope[ba])return"gscope['"+
ba+"']";if(void 0!==O.globalScope._SymbolsMap[ba])return"gscope['"+O.globalScope._SymbolsMap[ba]+"']";throw Error(e.nodeErrorMessage(Q,"RUNTIME","VARIABLENOTFOUND"));}catch(ha){throw ha;}}function la(O){return null===O?"":c.isArray(O)||c.isImmutableArray(O)?"Array":c.isDate(O)?"Date":c.isString(O)?"String":c.isBoolean(O)?"Boolean":c.isNumber(O)?"Number":O instanceof b?"Attachment":O instanceof a?"Portal":O instanceof g?"Dictionary":O instanceof f?"Feature":O instanceof w?"Point":O instanceof t?"Polygon":
O instanceof A?"Polyline":O instanceof u?"Multipoint":O instanceof x?"Extent":c.isFunctionParameter(O)?"Function":c.isFeatureSet(O)?"FeatureSet":c.isFeatureSetCollection(O)?"FeatureSetCollection":O===c.voidOperation?"":"number"===typeof O&&isNaN(O)?"Number":"Unrecognised Type"}function X(O,Q,ba,ha){try{if(c.equalityTest(Q[ba],ha))return Q[ba+1];var pa=Q.length-ba;return 1===pa?Q[ba]:2===pa?null:3===pa?Q[ba+2]:X(O,Q,ba+2,ha)}catch(za){throw za;}}function R(O,Q,ba,ha){try{if(!0===ha)return Q[ba+1];
if(3===Q.length-ba)return Q[ba+2];var pa=Q[ba+2];if(!1===c.isBoolean(pa))throw Error("WHEN needs boolean test conditions");return R(O,Q,ba+2,pa)}catch(za){throw za;}}function fa(O,Q){var ba=O.length,ha=Math.floor(ba/2);if(0===ba)return[];if(1===ba)return[O[0]];var pa=fa(O.slice(0,ha),Q);ba=fa(O.slice(ha,ba),Q);for(ha=[];0<pa.length||0<ba.length;)if(0<pa.length&&0<ba.length){var za=Q(pa[0],ba[0]);isNaN(za)&&(za=0);0>=za?(ha.push(pa[0]),pa=pa.slice(1)):(ha.push(ba[0]),ba=ba.slice(1))}else 0<pa.length?
(ha.push(pa[0]),pa=pa.slice(1)):0<ba.length&&(ha.push(ba[0]),ba=ba.slice(1));return ha}function S(O,Q){try{var ba=O.length,ha=Math.floor(ba/2);if(0===ba)return y.resolve([]);if(1===ba)return y.resolve([O[0]]);var pa=[S(O.slice(0,ha),Q),S(O.slice(ha,ba),Q)];return y.all(pa).then(function(za){return Y(za[0],za[1],Q,[])})}catch(za){return y.reject(za)}}function Y(O,Q,ba,ha){return y.create(function(pa,za){0<O.length||0<Q.length?0<O.length&&0<Q.length?ba(O[0],Q[0]).then(function(Fa){try{isNaN(Fa)&&(Fa=
1),0>=Fa?(ha.push(O[0]),O=O.slice(1)):(ha.push(Q[0]),Q=Q.slice(1)),Y(O,Q,ba,ha).then(function(Ha){pa(Ha)},za)}catch(Ha){za(Ha)}},za):0<O.length?(ha.push(O[0]),O=O.slice(1),Y(O,Q,ba,ha).then(function(Fa){pa(Fa)},za)):0<Q.length&&(ha.push(Q[0]),Q=Q.slice(1),Y(O,Q,ba,ha).then(function(Fa){pa(Fa)},za)):pa(ha)})}function ia(O){O.symbols.symbolCounter++;return"_T"+O.symbols.symbolCounter.toString()}function L(O){O.symbols.symbolCounter++;return"_Tvar"+O.symbols.symbolCounter.toString()}function W(O,Q,ba){var ha=
{};O||(O={});ba||(ba={});ha._SymbolsMap={};ha.textformatting=1;ha.infinity=1;ha.pi=1;for(var pa in Q)ha[pa]=1;for(pa in ba)ha[pa]=1;for(pa in O)ha[pa]=1;return ha}function ja(O,Q){for(var ba={mode:Q,compiled:!0,functions:{},signatures:[],failDefferred:E,standardFunction:B,standardFunctionAsync:B,evaluateIdentifier:ra},ha=0;ha<O.length;ha++)O[ha].registerFunctions(ba);if("sync"===Q){for(var pa in ba.functions)sa[pa]=new c.NativeFunction(ba.functions[pa]),da.prototype[pa]=sa[pa];for(ha=0;ha<ba.signatures.length;ha++)e.addFunctionDeclaration(ba.signatures[ha],
"sync")}else{for(pa in ba.functions)V[pa]=new c.NativeFunction(ba.functions[pa]),na.prototype[pa]=V[pa];for(ha=0;ha<ba.signatures.length;ha++)e.addFunctionDeclaration(ba.signatures[ha],"async")}}function ra(O,Q){var ba=Q.name;if("_SymbolsMap"===ba)throw"Illegal";if(0<O.localStack.length){if("_t"!==ba.substr(0,2).toLowerCase()&&void 0!==O.localStack[O.localStack.length-1][ba])return O.localStack[O.localStack.length-1][ba];var ha=O.mangleMap[ba];if(void 0!==ha&&void 0!==O.localStack[O.localStack.length-
1][ha])return O.localStack[O.localStack.length-1][ha]}if("_t"!==ba.substr(0,2).toLowerCase()&&void 0!==O.globalScope[ba]||1===O.globalScope._SymbolsMap[ba])return O.globalScope[ba];ba=O.mangleMap[ba];if(void 0!==ba)return O.globalScope[ba]}function qa(O){}Object.defineProperty(q,"__esModule",{value:!0});q.enableAsyncSupport=q.compileScript=q.referencesFunction=q.referencesMember=q.validateScript=q.extractExpectedFieldLiterals=q.extractFieldLiterals=q.executeScript=q.extend=q.functionHelper=void 0;
var wa=0,sa={};k.registerFunctions(sa,B);l.registerFunctions(sa,B);r.registerFunctions(sa,B);p.registerFunctions(sa,B);m.registerFunctions(sa,B);v.registerFunctions(sa,B);sa["typeof"]=function(O,Q){return B(O,Q,function(ba,ha,pa){c.pcCheck(pa,1,1);ba=la(pa[0]);if("Unrecognised Type"===ba)throw Error("Unrecognised Type");return ba})};sa.iif=function(O,Q){try{return B(O,Q,function(ba,ha,pa){c.pcCheck(pa,3,3);if(!1===c.isBoolean(pa[0]))throw Error("IF Function must have a boolean test condition");return pa[0]?
pa[1]:pa[2]})}catch(ba){throw ba;}};sa.decode=function(O,Q){try{return B(O,Q,function(ba,ha,pa){if(2>pa.length)throw Error("Missing Parameters");if(2===pa.length)return pa[1];if(0===(pa.length-1)%2)throw Error("Must have a default value result.");return X(O,pa,1,pa[0])})}catch(ba){throw ba;}};sa.when=function(O,Q){try{return B(O,Q,function(ba,ha,pa){if(3>pa.length)throw Error("Missing Parameters");if(0===pa.length%2)throw Error("Must have a default value result.");ba=pa[0];if(!1===c.isBoolean(ba))throw Error("WHEN needs boolean test conditions");
return R(O,pa,0,ba)})}catch(ba){throw ba;}};sa.top=function(O,Q){return B(O,Q,function(ba,ha,pa){c.pcCheck(pa,2,2);if(c.isArray(pa[0]))return c.toNumber(pa[1])>=pa[0].length?pa[0].slice(0):pa[0].slice(0,c.toNumber(pa[1]));if(c.isImmutableArray(pa[0]))return c.toNumber(pa[1])>=pa[0].length()?pa[0].slice(0):pa[0].slice(0,c.toNumber(pa[1]));throw Error("Top cannot accept this parameter type");})};sa.first=function(O,Q){return B(O,Q,function(ba,ha,pa){c.pcCheck(pa,1,1);return c.isArray(pa[0])?0===pa[0].length?
null:pa[0][0]:c.isImmutableArray(pa[0])?0===pa[0].length()?null:pa[0].get(0):null})};sa.sort=function(O,Q){return B(O,Q,function(ba,ha,pa){c.pcCheck(pa,1,2);ha=pa[0];c.isImmutableArray(ha)&&(ha=ha.toArray());if(!1===c.isArray(ha))throw Error("Illegal Argument");if(1<pa.length){if(!1===c.isFunctionParameter(pa[1]))throw Error("Illegal Argument");var za=function(Ca,Aa){return xa.callfunc(pa[1],[Ca,Aa],ba)};return O.isAsync?S(ha,za):ha=fa(ha,function(Ca,Aa){return za(Ca,Aa)})}if(0===ha.length)return[];
for(var Fa={},Ha=0;Ha<ha.length;Ha++){var Ba=la(ha[Ha]);""!==Ba&&(Fa[Ba]=!0)}if(!0===Fa.Array||!0===Fa.Dictionary||!0===Fa.Feature||!0===Fa.Point||!0===Fa.Polygon||!0===Fa.Polyline||!0===Fa.Multipoint||!0===Fa.Extent||!0===Fa.Function)return ha.slice(0);Ha=0;Ba="";for(var va in Fa)Ha++,Ba=va;return ha=1<Ha||"String"===Ba?fa(ha,function(Ca,Aa){if(null===Ca||void 0===Ca||Ca===c.voidOperation)return null===Aa||void 0===Aa||Aa===c.voidOperation?0:1;if(null===Aa||void 0===Aa||Aa===c.voidOperation)return-1;
var Na=c.toString(Ca),Ea=c.toString(Aa);return Na<Ea?-1:Na===Ea?0:1}):"Number"===Ba?fa(ha,function(Ca,Aa){return Ca-Aa}):"Boolean"===Ba?fa(ha,function(Ca,Aa){return Ca===Aa?0:Aa?-1:1}):"Date"===Ba?fa(ha,function(Ca,Aa){return Aa-Ca}):ha.slice(0)})};var V={},U;for(U in sa)V[U]=new c.NativeFunction(sa[U]);n.registerFunctions(sa,B);for(U in sa)sa[U]=new c.NativeFunction(sa[U]);var da=function(){};da.prototype=sa;var na=function(){};na.prototype=V;q.functionHelper={fixSpatialReference:c.fixSpatialReference,
parseArguments:function(O,Q){for(var ba=[],ha=0;ha<Q.arguments.length;ha++)ba.push(F(O,Q.arguments[ha]));return ba},standardFunction:B};q.extend=ja;q.executeScript=function(O,Q){return O(Q)};q.extractFieldLiterals=function(O,Q){void 0===Q&&(Q=!1);return e.findFieldLiterals(O)};q.extractExpectedFieldLiterals=function(O){return e.findExpectedFieldLiterals(O)};q.validateScript=function(O,Q){return e.validateScript(O,Q,"sync")};q.referencesMember=function(O,Q){return e.referencesMember(O,Q)};q.referencesFunction=
function(O,Q){return e.referencesFunction(O,Q)};var ka=0,xa={error:function(O,Q,ba){throw Error(e.nodeErrorMessage(O,Q,ba));},__awaiter:function(O,Q,ba,ha){return y.create(function(pa,za){function Fa(va){try{Ba(ha.next(va))}catch(Ca){za(Ca)}}function Ha(va){try{Ba(ha["throw"](va))}catch(Ca){za(Ca)}}function Ba(va){va.done?pa(va.value):va.value&&va.value.then?va.value.then(Fa,Ha):(ka++,0===ka%100?setTimeout(function(){ka=0;Fa(va.value)},0):Fa(va.value))}Ba((ha=ha.apply(O,Q||[])).next())})},functionDepthchecker:function(O,
Q){return function(){Q.depthCounter++;Q.localStack.push([]);if(64<Q.depthCounter)throw Error("Exceeded maximum function depth");var ba=O.apply(this,arguments);if(y.isPromiseLike(ba))return ba.then(function(ha){Q.depthCounter--;--Q.localStack.length;return ha});Q.depthCounter--;--Q.localStack.length;return ba}},castString:function(O){return c.toString(O)},aCheck:function(O,Q){if(c.isFunctionParameter(O))throw Error(e.nodeErrorMessage({type:Q},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return O===c.voidOperation?
null:O},Dictionary:g,Feature:f,dictionary:function(O){for(var Q={},ba=0;ba<O.length;ba+=2){if(c.isFunctionParameter(O[ba+1]))throw Error("Illegal Argument");if(!1===c.isString(O[ba]))throw Error("Illegal Argument");Q[O[ba].toString()]=O[ba+1]===c.voidOperation?null:O[ba+1]}O=new g(Q);O.immutable=!1;return O},strCheck:function(O){if(!1===c.isString(O))throw Error("Illegal Argument");return O},unary:function(O,Q){if(c.isBoolean(O)){if("!"===Q)return!O;if("-"===Q)return-1*c.toNumber(O);if("+"===Q)return 1*
c.toNumber(O);if("~"===Q)return~c.toNumber(O);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:Q,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===Q)return-1*c.toNumber(O);if("+"===Q)return 1*c.toNumber(O);if("~"===Q)return~c.toNumber(O);throw Error(e.nodeErrorMessage({type:"UnaryExpression",operator:Q,prefix:null,argument:null},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(O){if(!1===c.isBoolean(O))throw Error(e.nodeErrorMessage({type:"LogicalExpression",
operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return O},logical:function(O,Q,ba){if(c.isBoolean(O)&&c.isBoolean(Q))switch(ba){case "||":return O||Q;case "\x26\x26":return O&&Q}throw Error(e.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));},binary:function(O,Q,ba){switch(ba){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return c.binaryOperator(c.toNumber(O),c.toNumber(Q),ba);case "\x3d\x3d":return c.equalityTest(O,
Q);case "\x3d":return c.equalityTest(O,Q);case "!\x3d":return!c.equalityTest(O,Q);case "\x3c":return c.greaterThanLessThan(O,Q,ba);case "\x3e":return c.greaterThanLessThan(O,Q,ba);case "\x3c\x3d":return c.greaterThanLessThan(O,Q,ba);case "\x3e\x3d":return c.greaterThanLessThan(O,Q,ba);case "+":return c.isString(O)||c.isString(Q)?c.toString(O)+c.toString(Q):c.toNumber(O)+c.toNumber(Q);case "-":return c.toNumber(O)-c.toNumber(Q);case "*":return c.toNumber(O)*c.toNumber(Q);case "/":return c.toNumber(O)/
c.toNumber(Q);case "%":return c.toNumber(O)%c.toNumber(Q);default:throw Error(e.nodeErrorMessage({type:"BinaryExpression",operator:ba,left:O,right:Q},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(O,Q,ba){switch(Q){case "\x3d":return O===c.voidOperation?null:O;case "/\x3d":return c.toNumber(ba)/c.toNumber(O);case "*\x3d":return c.toNumber(ba)*c.toNumber(O);case "-\x3d":return c.toNumber(ba)-c.toNumber(O);case "+\x3d":return c.isString(ba)||c.isString(O)?c.toString(ba)+c.toString(O):c.toNumber(ba)+
c.toNumber(O);case "%\x3d":return c.toNumber(ba)%c.toNumber(O);default:throw Error(e.nodeErrorMessage({type:"AssignmentExpression",operator:Q,left:null,right:null},"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(O,Q,ba,ha){var pa=c.toNumber(O[Q]);O[Q]="++"===ba?pa+1:pa-1;return!1===ha?pa:"++"===ba?pa+1:pa-1},graphicToFeature:function(O,Q){return null===O?null:f.createFromGraphicLikeObject(O.geometry,O.attributes,Q)},memberupdate:function(O,Q,ba,ha){if(c.isArray(O))if(c.isNumber(Q)){0>Q&&(Q=
O.length+Q);if(0>Q||Q>=O.length)throw Error("Assignment outside of array bounds");var pa=c.toNumber(O[Q]);O[Q]="++"===ba?pa+1:pa-1}else throw Error("Invalid Parameter");else if(O instanceof g){if(!1===c.isString(Q))throw Error("Dictionary accessor must be a string");if(!0===O.hasField(Q))pa=c.toNumber(O.field(Q)),O.setField(Q,"++"===ba?pa+1:pa-1);else throw Error("Invalid Parameter");}else if(O instanceof f){if(!1===c.isString(Q))throw Error("Feature accessor must be a string");if(!0===O.hasField(Q))pa=
c.toNumber(O.field(Q)),O.setField(Q,"++"===ba?pa+1:pa-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(O))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===ha?pa:"++"===ba?pa+1:pa-1},assignmember:function(O,Q,ba,ha){if(c.isArray(O))if(c.isNumber(Q)){0>Q&&(Q=O.length+Q);if(0>Q||Q>O.length)throw Error("Assignment outside of array bounds");if(Q===O.length&&"\x3d"!==ba)throw Error("Invalid Parameter");O[Q]=this.assign(ha,ba,O[Q])}else throw Error("Invalid Parameter");
else if(O instanceof g){if(!1===c.isString(Q))throw Error("Dictionary accessor must be a string");if(!0===O.hasField(Q))O.setField(Q,this.assign(ha,ba,O.field(Q)));else{if("\x3d"!==ba)throw Error("Invalid Parameter");O.setField(Q,this.assign(ha,ba,null))}}else if(O instanceof f){if(!1===c.isString(Q))throw Error("Feature accessor must be a string");if(!0===O.hasField(Q))O.setField(Q,this.assign(ha,ba,O.field(Q)));else{if("\x3d"!==ba)throw Error("Invalid Parameter");O.setField(Q,this.assign(ha,ba,
null))}}else{if(c.isImmutableArray(O))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(O,Q){if(null===O)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(O instanceof g||O instanceof f){if(c.isString(Q))return O.field(Q);throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(O instanceof z){if(c.isString(Q))return ea(O,
Q,"MemberExpression");throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isArray(O)){if(c.isNumber(Q)&&isFinite(Q)&&Math.floor(Q)===Q){0>Q&&(Q=O.length+Q);if(Q>=O.length||0>Q)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return O[Q]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));
}if(c.isString(O)){if(c.isNumber(Q)&&isFinite(Q)&&Math.floor(Q)===Q){0>Q&&(Q=O.length+Q);if(Q>=O.length||0>Q)throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return O[Q]}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));}if(c.isImmutableArray(O)&&c.isNumber(Q)&&isFinite(Q)&&Math.floor(Q)===Q){0>Q&&(Q=O.length()+Q);if(Q>=O.length()||0>Q)throw Error(e.nodeErrorMessage({type:"MemberExpression",
object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return O.get(Q)}throw Error(e.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"));},callfunc:function(O,Q,ba){return O instanceof c.NativeFunction?O.fn(ba,Q):O instanceof c.SizzleFunction?O.fn.apply(this,Q):O.apply(this,Q)}};q.compileScript=function(O,Q,ba){void 0===Q&&(Q=null);void 0===ba&&(ba=!1);null===Q&&(Q={vars:{},customfunctions:{}});Q={isAsync:ba,globalScope:W(Q.vars,
ba?V:sa,Q.customfunctions),localScope:null,mangleMap:{},console:qa,lrucache:Q.lrucache,interceptor:Q.interceptor,services:Q.services,symbols:{symbolCounter:0}};O=F(Q,O.body[0].body);""===O&&(O="lc.voidOperation; ");Q={lc:c,lang:xa,mangles:Q.mangleMap,postProcess:function(ha){ha instanceof c.ReturnResult&&(ha=ha.value);ha instanceof c.ImplicitResult&&(ha=ha.value);ha===c.voidOperation&&(ha=null);if(ha===c.breakResult)throw Error("Cannot return BREAK");if(ha===c.continueResult)throw Error("Cannot return CONTINUE");
if(c.isFunctionParameter(ha))throw Error("Cannot return FUNCTION");return ha},prepare:function(ha,pa){var za=ha.spatialReference;if(null===za||void 0===za)za=new G({wkid:102100});var Fa=ha.vars,Ha=ha.customfunctions,Ba=pa?new na:new da;Fa||(Fa={});Ha||(Ha={});var va=new g({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});va.immutable=!1;Ba._SymbolsMap={textformatting:1,infinity:1,pi:1};Ba.textformatting=va;Ba.infinity=Number.POSITIVE_INFINITY;Ba.pi=Math.PI;
for(var Ca in Ha)Ba[Ca]=Ha[Ca],Ba._SymbolsMap[Ca]=1;for(Ca in Fa)Ba._SymbolsMap[Ca]=1,Ba[Ca]=Fa[Ca]&&"esri.Graphic"===Fa[Ca].declaredClass?f.createFromGraphic(Fa[Ca]):Fa[Ca];return{localStack:[],isAsync:pa,mangleMap:this.mangles,spatialReference:za,globalScope:Ba,abortSignal:void 0===ha.abortSignal||null===ha.abortSignal?{aborted:!1}:ha.abortSignal,localScope:null,services:ha.services,console:ha.console?ha.console:qa,lrucache:ha.lrucache,interceptor:ha.interceptor,symbols:{symbolCounter:0},depthCounter:1}}};
return(new Function("context","spatialReference",ba?"var runtimeCtx\x3dthis.prepare(context, true);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+O+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx\x3dthis.prepare(context, false);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+
O+"\n return lastStatement; } \n return this.postProcess(mainBody()); ")).bind(Q)};q.enableAsyncSupport=function(){return y.create(function(O,Q){D(["./functions/geomasync"],function(ba){ja([ba],"async");O(!0)},function(ba){Q(ba)})})}})},"esri/arcade/ArcadePortal":function(){var D=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,f){g.__proto__=f}||function(g,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(g[h]=f[h])};
return q(a,b)};return function(a,b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require","exports","./Dictionary"],function(q,a,b){return function(g){function f(h){var d=g.call(this)||this;d.immutable=!1;d.setField("url",h);d.immutable=!0;return d}D(f,g);return f}(b)})},"esri/arcade/Attachment":function(){var D=
this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,f){g.__proto__=f}||function(g,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(g[h]=f[h])};return q(a,b)};return function(a,b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===b?Object.create(b):(g.prototype=b.prototype,new g)}}();define(["require",
"exports","./Dictionary"],function(q,a,b){return function(g){function f(h,d,c,e,k,l){var m=g.call(this)||this;m.attachmentUrl=k;m.immutable=!1;m.setField("id",h);m.setField("name",d);m.setField("contenttype",c);m.setField("size",e);m.setField("exifinfo",l);m.immutable=!0;return m}D(f,g);return f}(b)})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(D,q){function a(u,w){return"0"!==u.min&&w.length<Number(u.min)||"*"!==u.max&&w.length>Number(u.max)?-2:1}function b(u,w,t){if(null!==
t.localScope&&void 0!==t.localScope[u.toLowerCase()]){var A=t.localScope[u.toLowerCase()];if("FormulaFunction"===A.type||"any"===A.type)return void 0===A.signature&&(A.signature={min:"0",max:"*"}),a(A.signature,w)}return void 0!==t.globalScope[u.toLowerCase()]&&(A=t.globalScope[u.toLowerCase()],"FormulaFunction"===A.type||"any"===A.type)?(void 0===A.signature&&(A.signature={min:"0",max:"*"}),a(A.signature,w)):-1}function g(u,w){if(u)for(var t=0;t<u.length;t++)f(u[t],w)}function f(u,w){if(u&&!1!==
w(u))switch(u.type){case "ArrayExpression":g(u.elements,w);break;case "AssignmentExpression":case "BinaryExpression":f(u.left,w);f(u.right,w);break;case "BlockStatement":g(u.body,w);break;case "CallExpression":f(u.callee,w);g(u.arguments,w);break;case "ExpressionStatement":f(u.expression,w);break;case "ForInStatement":f(u.left,w);f(u.right,w);f(u.body,w);break;case "ForStatement":f(u.init,w);f(u.test,w);f(u.update,w);f(u.body,w);break;case "FunctionDeclaration":f(u.id,w);g(u.params,w);f(u.body,w);
break;case "IfStatement":f(u.test,w);f(u.consequent,w);f(u.alternate,w);break;case "LogicalExpression":f(u.left,w);f(u.right,w);break;case "MemberExpression":f(u.object,w);f(u.property,w);break;case "ObjectExpression":g(u.properties,w);break;case "Program":g(u.body,w);break;case "Property":f(u.key,w);f(u.value,w);break;case "ReturnStatement":f(u.argument,w);break;case "UnaryExpression":f(u.argument,w);break;case "UpdateExpression":f(u.argument,w);break;case "VariableDeclaration":g(u.declarations,
w);break;case "VariableDeclarator":f(u.id,w);f(u.init,w);break;case "TemplateLiteral":g(u.expressions,w),g(u.quasis,w)}}function h(u,w){void 0===w&&(w=!0);var t=m(u,"SYNTAX","UNREOGNISED");try{switch(u.type){case "VariableDeclarator":return"Identifier"!==u.id.type?m(u,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==u.init?h(u.init,!1):"";case "VariableDeclaration":for(var A=0;A<u.declarations.length;A++)if(t=h(u.declarations[A],w),""!==t)return t;return"";case "ForInStatement":t=h(u.left,w);if(""!==
t)break;if("VariableDeclaration"===u.left.type){if(1<u.left.declarations.length)return m(u,"SYNTAX","ONLY1VAR");if(null!==u.left.declarations[0].init)return m(u,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==u.left.type)return m(u,"SYNTAX","LEFTNOTVAR");t=h(u.right,w);if(""!==t)break;t=h(u.body,w);if(""!==t)break;return"";case "ForStatement":if(null!==u.test&&(t=h(u.test,w),""!==t))break;if(null!==u.init&&(t=h(u.init,w),""!==t))break;if(null!==u.update&&(t=h(u.update,w),""!==t))break;if(null!==
u.body&&(t=h(u.body,w),""!==t))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":t=h(u.test,w);if(""!==t)break;if(null!==u.consequent&&(t=h(u.consequent,!1),""!==t))break;if(null!==u.alternate&&(t=h(u.alternate,!1),""!==t))break;return"";case "BlockStatement":var G=[];for(A=0;A<u.body.length;A++)"EmptyStatement"!==u.body[A].type&&G.push(u.body[A]);u.body=G;for(A=0;A<u.body.length;A++)if(t=h(u.body[A],w),""!==t)return t;
return"";case "FunctionDeclaration":return!1===w?m(u,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==u.id.type?m(u,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):h(u.body,!1);case "ReturnStatement":return null!==u.argument?h(u.argument,w):"";case "UpdateExpression":return"Identifier"!==u.argument.type&&"MemberExpression"!==u.argument.type?m(u,"SYNTAX","ASSIGNMENTTOVARSONLY"):h(u.argument,w);case "AssignmentExpression":if("Identifier"!==u.left.type&&"MemberExpression"!==u.left.type)return m(u,"SYNTAX","ASSIGNMENTTOVARSONLY");
t=h(u.left,w);if(""!==t)break;switch(u.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return m(u,"SYNTAX","OPERATORNOTRECOGNISED")}return h(u.right,!1);case "ExpressionStatement":return h(u.expression,!1);case "Identifier":t="";break;case "MemberExpression":t=h(u.object,w);if(""!==t)break;return!0===u.computed?h(u.property,w):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==u.callee.type)return m(u,
"SYNTAX","ONLYNODESSUPPORTED");t="";for(A=0;A<u.arguments.length;A++)if(t=h(u.arguments[A],w),""!==t)return t;return"";case "UnaryExpression":t=h(u.argument,w);break;case "BinaryExpression":t=h(u.left,w);if(""!==t)break;t=h(u.right,w);if(""!==t)break;switch(u.operator){case "|":case "\x26":case "\x3e\x3e":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;
default:return m(u,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":t=h(u.left,w);if(""!==t)break;t=h(u.right);if(""!==t)break;switch(u.operator){case "\x26\x26":case "||":break;default:return m(u,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ArrayExpression":t="";for(A=0;A<u.elements.length&&(t=h(u.elements[A],w),""===t);A++);break;case "TemplateLiteral":t="";for(A=0;A<u.quasis.length;A++)if(t=h(u.quasis[A],w),""!==t)return t;for(A=0;A<u.expressions.length&&(t=h(u.expressions[A],
w),""===t);A++);break;case "ObjectExpression":t="";for(A=0;A<u.properties.length;A++){t="";if(null!==u.properties[A].key&&("Literal"!==u.properties[A].key.type&&"Identifier"!==u.properties[A].key.type&&(t=m(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===u.properties[A].key.type)){G=u.properties[A].key;var B="value"in G?G.value:null;"string"===typeof B||B instanceof String||(t=m(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===t&&(t=h(u.properties[A],w));if(""!==t)break}break;case "Property":if("Literal"!==
u.key.type&&"Identifier"!==u.key.type)return m(u,"SYNTAX","ONLYLITERAL");if("Identifier"!==u.key.type&&(t=h(u.key,w),""!==t))break;t=h(u.value,w)}return t}catch(E){throw E;}}function d(u,w){var t=m(u,"SYNTAX","UNREOGNISED"),A=null,G="";try{switch(u.type){case "VariableDeclarator":var B=null===u.init?"":d(u.init,w);if(""!==B)return B;"Identifier"===u.id.type&&(null===w.localScope?w.globalScope[u.id.name.toLowerCase()]={type:"any"}:w.localScope[u.id.name.toLowerCase()]={type:"any"});return"";case "FunctionDeclaration":A=
e(u.id.name.toLowerCase(),u);G=k(u,w);if(""!==G)return G;if(null!==w.localScope)return m(u,"SYNTAX","GLOBALFUNCTIONSONLY");A.isnative=!1;w.globalScope[u.id.name.toLowerCase()]={type:"FormulaFunction",signature:[A]};return"";case "VariableDeclaration":t="";for(var E=0;E<u.declarations.length&&(t=d(u.declarations[E],w),""===t);E++);break;case "IfStatement":t=d(u.test,w);if(""!==t)break;if("AssignmentExpression"===u.test.type||"UpdateExpression"===u.test.type)return m(u.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");
if(null!==u.consequent&&(t=d(u.consequent,w),""!==t))break;if(null!==u.alternate&&(t=d(u.alternate,w),""!==t))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(E=0;E<u.body.length;E++)if(t=d(u.body[E],w),""!==t)return t;return"";case "ReturnStatement":return null!==u.argument?d(u.argument,w):"";case "ForInStatement":if("VariableDeclaration"===u.left.type){if(1<u.left.declarations.length)return m(u,"SYNTAX","ONLY1VAR");if(null!==u.left.declarations[0].init)return m(u,"SYNTAX",
"CANNOTDECLAREVAL")}else if("Identifier"!==u.left.type)return m(u,"SYNTAX","LEFTNOTVAR");t=d(u.left,w);if(""!==t)break;t=d(u.right,w);if(""!==t)break;t=d(u.body,w);if(""!==t)break;return"";case "ForStatement":if(null!==u.init&&(t=d(u.init,w),""!==t))break;if(null!==u.test&&(t=d(u.test,w),""!==t))break;if(null!==u.body&&(t=d(u.body,w),""!==t))break;if(null!==u.update&&(t=d(u.update,w),""!==t))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==
u.argument.type&&"MemberExpression"!==u.argument.type)return m(u,"SYNTAX","ASSIGNMENTTOVARSONLY");var F=!1;if("MemberExpression"===u.argument.type)return d(u.argument,w);null!==w.localScope&&void 0!==w.localScope[u.argument.name.toLowerCase()]&&(F=!0);void 0!==w.globalScope[u.argument.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+u.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==u.left.type&&"MemberExpression"!==u.left.type)return m(u,"SYNTAX","ASSIGNMENTTOVARSONLY");
var I=d(u.right,w);if(""!==I)return I;F=!1;if("MemberExpression"===u.left.type)return I=d(u.left,w),""!==I?I:"";null!==w.localScope&&void 0!==w.localScope[u.left.name.toLowerCase()]&&(F=!0);void 0!==w.globalScope[u.left.name.toLowerCase()]&&(F=!0);return!1===F?"Identifier "+u.left.name+" has not been declared.":"";case "ExpressionStatement":return d(u.expression,w);case "Identifier":var M=u.name.toLowerCase();if(null!==w.localScope&&void 0!==w.localScope[M])return"";t=void 0!==w.globalScope[M]?"":
m(u,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":t=d(u.object,w);if(""!==t)break;return!0===u.computed?d(u.property,w):"";case "Literal":return"";case "TemplateElement":return"";case "CallExpression":if("Identifier"!==u.callee.type)return m(u,"SYNTAX","ONLYNODESSUPPORTED");t="";for(E=0;E<u.arguments.length;E++)if(t=d(u.arguments[E],w),""!==t)return t;var P=b(u.callee.name,u.arguments,w);-1===P&&(t=m(u,"SYNTAX","NOTFOUND"));-2===P&&(t=m(u,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":t=
d(u.argument,w);break;case "BinaryExpression":t=d(u.left,w);if(""!==t)break;t=d(u.right,w);if(""!==t)break;return"";case "LogicalExpression":t=d(u.left,w);if(""!==t)break;if("AssignmentExpression"===u.left.type||"UpdateExpression"===u.left.type)return m(u.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");t=d(u.right,w);if(""!==t)break;return"AssignmentExpression"===u.right.type||"UpdateExpression"===u.right.type?m(u.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ArrayExpression":t=
"";for(E=0;E<u.elements.length&&(t=d(u.elements[E],w),""===t);E++);break;case "TemplateLiteral":t="";for(E=0;E<u.quasis.length;E++)if(t=d(u.quasis[E],w),""!==t)return t;for(E=0;E<u.expressions.length&&(t=d(u.expressions[E],w),""===t);E++);break;case "ObjectExpression":t="";for(E=0;E<u.properties.length;E++){t="";if(null!==u.properties[E].key&&("Literal"!==u.properties[E].key.type&&"Identifier"!==u.properties[E].key.type&&(t=m(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===u.properties[E].key.type)){var aa=
u.properties[E].key,ca="value"in aa?aa.value:null;"string"===typeof ca||ca instanceof String||(t=m(u,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===t&&(t=d(u.properties[E],w));if(""!==t)break}break;case "Property":if("Literal"!==u.key.type&&"Identifier"!==u.key.type)return m(u,"SYNTAX","ONLYLITERAL");if("Identifier"!==u.key.type&&(t=d(u.key,w),""!==t))break;t=d(u.value,w)}return t}catch(ea){throw ea;}}function c(u,w){var t=!1,A=w.toLowerCase();f(u,function(G){if(t)return!1;"Identifier"===G.type&&G.name&&
G.name.toLowerCase()===A&&(t=!0);return!0});return t}function e(u,w){var t=[];if(void 0!==w.params&&null!==w.params)for(var A=0;A<w.params.length;A++)t.push("any");return{name:u,"return":"any",params:t}}function k(u,w){for(var t={globalScope:w.globalScope,localScope:{}},A=0;A<u.params.length;A++)t.localScope[u.params[A].name.toLowerCase()]={type:"any"};return d(u.body,t)}function l(u,w,t,A){var G={};if(void 0===u||null===u)u={};if(void 0===t||null===t)t={};G.infinity={type:"any"};G.textformatting=
{type:"any"};G.pi={type:"any"};for(var B in w)"sync"===A&&void 0!==w[B].min?G[B]={type:"FormulaFunction",signature:{min:w[B].min,max:w[B].max}}:"sync"!==A&&void 0!==w[B].fmin&&(G[B]={type:"FormulaFunction",signature:{min:w[B].fmin,max:w[B].fmax}});for(w=0;w<t.length;w++)B=t[w],G[B.name]={type:"FormulaFunction",signature:B};for(B in u)G[B]=u[B],G[B].type="any";return G}function m(u,w,t){var A="";switch(w){case "SYNTAX":A="Syntax Error: ";break;case "RUNTIME":A="Runtime Error: ";break;default:A="Syntax Error: "}try{switch(u.type){case "IfStatement":switch(t){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":A+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":A+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(t){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":A+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":A+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":A+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(t){case "GLOBALFUNCTIONSONLY":A+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":A+=" Function Definition must have an identifier"}break;case "VariableDeclaration":A+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(t){case "FUNCTIONVARIABLEDECLARATOR":A+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":A+=" Variable Definition must have an identifier"}break;case "Identifier":A+=" Identifier Not Found. ";A+=u.name;break;case "ObjectExpression":switch(t){case "OBJECTPROPERTYMUSTBESTRING":A+=
" Property name must be a string"}break;case "ForStatement":switch(t){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":A+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(t){case "ONLY1VAR":A+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":A+=" Can only declare value for use with IN";break;case "LEFTNOVAR":A+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":A+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":A+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(t){case "PROPERTYNOTFOUND":A+="Cannot find member property. ";A+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "OUTOFBOUNDS":A+="Out of Bounds. ";A+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "NOTFOUND":A+="Cannot call member method on null. ";A+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":"";break;case "INVALIDTYPE":A+="Cannot call member property on object of this type. ",
A+=!1===u.computed?"Identifier"===u.property.type?u.property.name:"":""}break;case "Property":switch(t){case "ONLYLITERAL":A+="Property names must be literals or identifiers"}break;case "Literal":break;case "CallExpression":switch(t){case "WRONGSIGNATURE":A+="Function signature does not match: ";A+="Identifier"===u.callee.type?u.callee.name:"";break;case "ONLYNODESUPPORTED":A+="Functions must be declared.";A+="Identifier"===u.callee.type?u.callee.name:"";break;case "NOTAFUNCTION":A+="Not a Function: ";
A+="Identifier"===u.callee.type?u.callee.name:"";break;case "NOTFOUND":A+="Function Not Found: "+("Identifier"===u.callee.type?u.callee.name:"")}break;case "UnaryExpression":switch(t){case "NOTSUPPORTEDUNARYOPERATOR":A+="Operator "+u.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":A+="Unary operator "+u.operator+" cannot be used with this argument."}case "BinaryExpression":switch(t){case "OPERATORNOTRECOGNISED":A+="Binary Operator not recognised "+
u.operator}break;case "LogicalExpression":switch(t){case "ONLYBOOLEAN":A+="Operator "+u.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":A+="Logical Expression "+u.operator+" being applied to parameters that are not boolean."}break;case "ArrayExpression":switch(t){case "FUNCTIONCONTEXTILLEGAL":A+=" Cannot Put Function inside Array."}break;default:A+="Expression contains unrecognised code structures."}}catch(G){throw G;}return A}function n(u,w,t){return{line:u.loc.start.line,
character:u.loc.start.column,reason:m(u,w,t)}}function p(u,w,t,A){w={globalScope:w.globalScope,localScope:{}};for(var G=0;G<u.params.length;G++)w.localScope[u.params[G].name.toLowerCase()]={type:"any"};v(u.body,w,t,A,!1)}function v(u,w,t,A,G){void 0===G&&(G=!0);if(null===u)throw Error("Unnexpexted Expression Syntax");var B=null;try{switch(u.type){case "VariableDeclarator":"Identifier"!==u.id.type?A.push(n(u,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(u.id.name.toLowerCase(),null===w.localScope?w.globalScope[u.id.name.toLowerCase()]=
{type:"any"}:w.localScope[u.id.name.toLowerCase()]={type:"any"});null!==u.init&&v(u.init,w,t,A,G);break;case "FunctionDeclaration":!1===G&&A.push(n(u,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==u.id.type&&A.push(n(u,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));B=e("",u);p(u,w,t,A);null!==w.localScope&&A.push(n(u,"SYNTAX","GLOBALFUNCTIONSONLY"));B.isnative=!1;"Identifier"===u.id.type&&(w.globalScope[u.id.name.toLowerCase()]={type:"FormulaFunction",signature:[B]});break;case "VariableDeclaration":for(var E=
0;E<u.declarations.length;E++)v(u.declarations[E],w,t,A,G);break;case "IfStatement":null!==u.test&&(v(u.test,w,t,A,G),"AssignmentExpression"!==u.test.type&&"UpdateExpression"!==u.test.type||A.push(n(u.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==u.consequent&&v(u.consequent,w,t,A,G);null!==u.alternate&&v(u.alternate,w,t,A,G);break;case "EmptyStatement":break;case "BlockStatement":if(null!==u.body)for(E=0;E<u.body.length;E++)v(u.body[E],w,t,A,G);break;case "ReturnStatement":null!==
u.argument&&v(u.argument,w,t,A,G);break;case "ForInStatement":"VariableDeclaration"===u.left.type?(1<u.left.declarations.length&&A.push(n(u,"SYNTAX","ONLY1VAR")),null!==u.left.declarations[0].init&&A.push(n(u,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==u.left.type&&A.push(n(u,"SYNTAX","LEFTNOTVAR"));v(u.left,w,t,A,G);v(u.right,w,t,A,G);v(u.body,w,t,A,G);break;case "ForStatement":null!==u.init&&v(u.init,w,t,A,G);null!==u.test&&v(u.test,w,t,A,G);null!==u.body&&v(u.body,w,t,A,G);null!==u.update&&v(u.update,
w,t,A,G);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":if("Identifier"!==u.argument.type&&"MemberExpression"!==u.argument.type)A.push(n(u,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===u.argument.type){var F=!1;!1===t&&(null!==w.localScope&&void 0!==w.localScope[u.argument.name.toLowerCase()]&&(F=!0),void 0!==w.globalScope[u.argument.name.toLowerCase()]&&(F=!0),!1===F&&A.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,
reason:"Identifier "+u.argument.name+" has not been declared."}))}"MemberExpression"===u.argument.type&&v(u.argument,w,t,A,G)}break;case "AssignmentExpression":"Identifier"!==u.left.type&&"MemberExpression"!==u.left.type&&A.push(n(u,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(u.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:A.push(n(u,"SYNTAX","OPERATORNOTRECOGNISED"))}v(u.right,w,t,A,G);F=!1;"Identifier"===u.left.type&&(null!==w.localScope&&void 0!==
w.localScope[u.left.name.toLowerCase()]&&(F=!0),void 0!==w.globalScope[u.left.name.toLowerCase()]&&(F=!0),!1===t&&!1===F&&A.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,reason:"Identifier "+u.left.name+" has not been declared."}));"MemberExpression"===u.left.type&&v(u.left,w,t,A,G);break;case "ExpressionStatement":v(u.expression,w,t,A,G);break;case "Identifier":var I=u.name.toLowerCase();if(null!==w.localScope&&void 0!==w.localScope[I]||void 0!==w.globalScope[I])break;
!1===t&&A.push(n(u,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":v(u.object,w,t,A,G);!0===u.computed&&v(u.property,w,t,A,G);break;case "Literal":break;case "TemplateElement":break;case "CallExpression":"Identifier"!==u.callee.type&&A.push(n(u,"SYNTAX","ONLYNODESSUPPORTED"));for(E=0;E<u.arguments.length;E++)v(u.arguments[E],w,t,A,G);if("Identifier"===u.callee.type){var M=b(u.callee.name,u.arguments,w);!1===t&&-1===M&&A.push(n(u,"SYNTAX","NOTFOUND"));-2===M&&A.push(n(u,"SYNTAX","WRONGSIGNATURE"))}break;
case "UnaryExpression":v(u.argument,w,t,A,G);break;case "BinaryExpression":v(u.left,w,t,A,G);v(u.right,w,t,A,G);switch(u.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":case "\x26":case "|":case "^":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":break;default:A.push(n(u,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(u.operator){case "\x26\x26":case "||":break;default:A.push(n(u,
"SYNTAX","OPERATORNOTRECOGNISED"))}v(u.left,w,t,A,G);"AssignmentExpression"!==u.left.type&&"UpdateExpression"!==u.left.type||A.push(n(u,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));v(u.right,w,t,A,G);"AssignmentExpression"!==u.right.type&&"UpdateExpression"!==u.right.type||A.push(n(u,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ArrayExpression":for(E=0;E<u.elements.length;E++)v(u.elements[E],w,t,A,G);break;case "TemplateLiteral":for(E=0;E<u.quasis.length;E++)v(u.quasis[E],w,t,A,
G);for(E=0;E<u.expressions.length;E++)v(u.expressions[E],w,t,A,G);break;case "ObjectExpression":for(E=0;E<u.properties.length;E++)v(u.properties[E],w,t,A,G);break;case "Property":"Literal"!==u.key.type&&"Identifier"!==u.key.type&&A.push(n(u,"SYNTAX","ONLYLITERAL"));"Literal"===u.key.type&&v(u.key,w,t,A,G);v(u.value,w,t,A,G);break;default:A.push(n(u,"SYNTAX","UNRECOGNISED"))}}catch(P){A.push({line:null===u?0:u.loc.start.line,character:null===u?0:u.loc.start.column,reason:"Unnexpected Syntax"})}}function r(u){var w=
[];f(u,function(t){"CallExpression"===t.type&&"Identifier"===t.callee.type&&w.push(t.callee.name.toLowerCase());return!0});return w}Object.defineProperty(q,"__esModule",{value:!0});q.scriptUsesFeatureSet=q.findScriptDependencies=q.findFunctionCalls=q.checkScript=q.extractAllIssues=q.extractAllIssuesInFunction=q.makeError=q.nodeErrorMessage=q.validateLanguage=q.validateScript=q.constructGlobalScope=q.validateFunction=q.extractFunctionDeclaration=q.findExpectedFieldLiterals=q.findFieldLiterals=q.referencesFunction=
q.referencesMember=q.testValidityOfExpression=q.validateLanguageNode=q.walk=q.findFunction=q.checkFunctionSignature=q.addFunctionDeclaration=q.functionDecls=void 0;q.functionDecls={concatenate:{min:"0",max:"*"},expects:{min:"1",max:"*"},getfeatureset:{min:"1",max:"2"},week:{min:"1",max:"2"},fromjson:{min:"1",max:"1"},length3d:{min:"1",max:"2"},tohex:{min:"1",max:"1"},hash:{min:"1",max:"1"},isoweek:{min:"1",max:"1"},isoweekday:{min:"1",max:"1"},isomonth:{min:"1",max:"1"},isoyear:{min:"1",max:"1"},
resize:{min:"2",max:"3"},slice:{min:"0",max:"*"},splice:{min:"0",max:"*"},push:{min:"2",max:"2"},pop:{min:"1",max:"1"},includes:{min:"2",max:"2"},array:{min:"1",max:"2"},front:{min:"1",max:"1"},back:{min:"1",max:"1"},insert:{min:"3",max:"3"},erase:{min:"2",max:"2"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",
max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",
max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},
ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",
max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},"boolean":{min:"1",max:"1"},dictionary:{min:"0",max:"*"},"typeof":{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},
equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},
buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"},getuser:{min:"1",max:"2"},subtypes:{min:"1",max:"1"},subtypecode:{min:"1",max:"1"},subtypename:{min:"1",max:"1"},domain:{min:"2",max:"3"},convertdirection:{min:"3",max:"3"},schema:{min:"1",max:"1"}};for(var y in q.functionDecls)q.functionDecls[y].fmin=
q.functionDecls[y].min,q.functionDecls[y].fmax=q.functionDecls[y].max;var x="featureset getuser featuresetbyid featuresetbyname featuresetbyassociation featuresetbyrelationshipname featuresetbyurl getfeatureset attachments featuresetbyportalitem".split(" "),z="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length length3d lengthgeodetic distance distancegeodetic densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");
q.addFunctionDeclaration=function(u,w){var t=q.functionDecls[u.name.toLowerCase()];void 0===t?"sync"===w?q.functionDecls[u.name.toLowerCase()]={min:u.min,max:u.max}:q.functionDecls[u.name.toLowerCase()]={fmin:u.min,fmax:u.max}:"sync"===w?(t.min=u.min,t.max=u.max):(t.fmin=u.min,t.fmax=u.max)};q.checkFunctionSignature=a;q.findFunction=b;q.walk=f;q.validateLanguageNode=h;q.testValidityOfExpression=d;q.referencesMember=c;q.referencesFunction=function(u,w){var t=!1,A=w.toLowerCase();f(u,function(G){return t?
!1:"CallExpression"===G.type&&"Identifier"===G.callee.type&&G.callee.name&&G.callee.name.toLowerCase()===A?(t=!0,!1):!0});return t};q.findFieldLiterals=function(u){var w=[];f(u,function(t){if("MemberExpression"!==t.type||"Identifier"!==t.object.type)return!0;!1===t.computed&&t.object&&t.object.name&&t.property&&"Identifier"===t.property.type&&t.property.name?w.push(t.object.name.toLowerCase()+"."+t.property.name.toLowerCase()):t.object&&t.object.name&&t.property&&"Literal"===t.property.type&&"string"===
typeof t.property.value&&w.push(t.object.name.toLowerCase()+"."+t.property.value.toString().toLowerCase());return!1});return w};q.findExpectedFieldLiterals=function(u){var w=[];f(u,function(t){if("CallExpression"===t.type&&"Identifier"===t.callee.type&&"expects"===t.callee.name.toLowerCase()){for(var A="",G=0;G<(t.arguments||[]).length;G++)if(0===G)"Identifier"===t.arguments[G].type&&(A=t.arguments[G].name.toLowerCase());else{var B;if(B=A&&"Literal"===t.arguments[G].type)B=t.arguments[G].value,B=
"string"===typeof B||B instanceof String;B&&w.push(A+"."+t.arguments[G].value.toLowerCase())}return!1}if("MemberExpression"!==t.type||"Identifier"!==t.object.type)return!0;!1===t.computed&&t.object&&t.object.name&&t.property&&"Identifier"===t.property.type&&t.property.name?w.push(t.object.name.toLowerCase()+"."+t.property.name.toLowerCase()):t.object&&t.object.name&&t.property&&"Literal"===t.property.type&&"string"===typeof t.property.value&&w.push(t.object.name.toLowerCase()+"."+t.property.value.toString().toLowerCase());
return!1});return w};q.extractFunctionDeclaration=e;q.validateFunction=k;q.constructGlobalScope=l;q.validateScript=function(u,w,t,A){void 0===t&&(t="async");void 0===A&&(A=q.functionDecls);w={globalScope:l(w.vars,A,w.customFunctions,t),localScope:null};return d(u.body[0].body,w)};q.validateLanguage=function(u){return"BlockStatement"!==u.body[0].body.type?"Invalid formula content.":h(u.body[0].body)};q.nodeErrorMessage=m;q.makeError=n;q.extractAllIssuesInFunction=p;q.extractAllIssues=v;q.checkScript=
function(u,w,t,A,G){void 0===A&&(A="async");void 0===G&&(G=q.functionDecls);var B=[];if("BlockStatement"!==u.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===w||void 0===w)w={vars:{},customFunctions:[]};w={globalScope:l(w.vars,G,w.customFunctions,A),localScope:null};try{v(u.body[0].body,w,t,B)}catch(E){}return B};q.findFunctionCalls=r;q.findScriptDependencies=function(u,w){void 0===w&&(w=[]);var t=null;if(void 0===u.usesFeatureSet){null===t&&(t=r(u));u.usesFeatureSet=
!1;for(var A=0;A<t.length;A++)-1<x.indexOf(t[A])&&(u.usesFeatureSet=!0,u.isAsync=!0);if(!1===u.usesFeatureSet&&w&&0<w.length){A=0;for(var G=w;A<G.length;A++)if(c(u,G[A])){u.usesFeatureSet=!0;u.isAsync=!0;break}}}if(void 0===u.usesGeometry)for(u.usesGeometry=!1,null===t&&(t=r(u)),A=0;A<t.length;A++)-1<z.indexOf(t[A])&&(u.usesGeometry=!0)};q.scriptUsesFeatureSet=function(u){u=r(u);for(var w=0;w<u.length;w++)if(-1<x.indexOf(u[w]))return!0;return!1}})},"esri/arcade/functions/array":function(){define(["require",
"exports","../languageUtils"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(b,g){b.array=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,1,2);d=a.toNumber(e[0]);if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");e=a.defaultUndefined(e[1],null);d=Array(d);d.fill(e);return d})};b.front=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,1,1);if(a.isImmutableArray(e[0])){if(0>=e[0].length())throw Error("Array is empty");
return e[0].get(0)}if(a.isArray(e[0])){if(0>=e[0].length)throw Error("Array is empty");return e[0][0]}throw Error("Invalid Parameter");})};b.back=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,1,1);if(a.isImmutableArray(e[0])){if(0>=e[0].length())throw Error("Array is empty");return e[0].get(e[0].length()-1)}if(a.isArray(e[0])){if(0>=e[0].length)throw Error("Array is empty");return e[0][e[0].length-1]}throw Error("Invalid Parameter");})};b.push=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,
1,2);if(a.isArray(e[0]))return e[0][e[0].length]=e[1],e[0].length;throw Error("Invalid Parameter");})};b.pop=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,1,1);if(a.isArray(e[0])){if(0>=e[0].length)throw Error("Array is empty");d=e[0][e[0].length-1];--e[0].length;return d}throw Error("Invalid Parameter");})};b.erase=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,2,2);if(a.isArray(e[0])){d=a.toNumber(e[1]);if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");e=e[0];if(0>=
e.length)throw Error("Array is empty");0>d&&(d=e.length+d);if(0>d)throw Error("Element not found");if(d>=e.length)throw Error("Index is greater than array");e.splice(d,1);return a.voidOperation}throw Error("Invalid Parameter");})};b.insert=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,3,3);if(a.isArray(e[0])){d=a.toNumber(e[1]);if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");c=e[2];e=e[0];if(d>e.length)throw Error("Index is greater than array");if(0>d&&d<-1*e.length)throw Error("Index is greater than array");
if(d===e.length)return e[d]=c,a.voidOperation;e.splice(d,0,c);return a.voidOperation}throw Error("Invalid Parameter");})};b.resize=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,2,3);if(a.isArray(e[0])){c=a.toNumber(e[1]);if(isNaN(c)||!1===a.isInteger(c))throw Error("Invalid Parameter");if(0>c)throw Error("Size cannot be negative");d=a.defaultUndefined(e[2],null);e=e[0];if(e.length>=c)return e.length=c,a.voidOperation;var k=e.length;e.length=c;for(c=k;c<e.length;c++)e[c]=d;return a.voidOperation}throw Error("Invalid Parameter");
})};b.includes=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,2,2);if(a.isArray(e[0])){var k=e[1];d=e[0];return-1<d.findIndex(function(m){return a.equalityTest(m,k)})?!0:!1}if(a.isImmutableArray(e[0])){var l=e[1];d=e[0].toArray();return-1<d.findIndex(function(m){return a.equalityTest(m,l)})?!0:!1}throw Error("Invalid Parameter");})};b.slice=function(f,h){return g(f,h,function(d,c,e){a.pcCheck(e,1,3);if(a.isArray(e[0])){d=a.toNumber(a.defaultUndefined(e[1],0));c=a.toNumber(a.defaultUndefined(e[2],
e[0].length));if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");if(isNaN(c)||!1===a.isInteger(c))throw Error("Invalid Parameter");var k=e[0];return k.slice(d,c)}if(a.isImmutableArray(e[0])){k=e[0];d=a.toNumber(a.defaultUndefined(e[1],0));c=a.toNumber(a.defaultUndefined(e[2],k.length()));if(isNaN(d)||!1===a.isInteger(d))throw Error("Invalid Parameter");if(isNaN(c)||!1===a.isInteger(c))throw Error("Invalid Parameter");return k.toArray().slice(d,c)}throw Error("Invalid Parameter");})};
b.splice=function(f,h){return g(f,h,function(d,c,e){d=[];for(c=0;c<e.length;c++)a.isArray(e[c])?d.push.apply(d,e[c]):a.isImmutableArray(e[c])?d.push.apply(d,e[c].toArray()):d.push(e[c]);return d})}}})},"esri/arcade/functions/date":function(){define(["require","exports","../languageUtils","../../libs/luxon/luxon","dojo/_base/kernel"],function(D,q,a,b,g){function f(k){k=new Date(k.getTime());var l=k.getFullYear(),m=new Date(0);m.setFullYear(l+1,0,4);m.setHours(0,0,0,0);m=h(m);var n=new Date(0);n.setFullYear(l,
0,4);n.setHours(0,0,0,0);n=h(n);return k.getTime()>=m.getTime()?l+1:k.getTime()>=n.getTime()?l:l-1}function h(k){k=new Date(k.getTime());var l=k.getDay();l=(1>l?7:0)+l-1;k.setDate(k.getDate()-l);k.setHours(0,0,0,0);return k}function d(k){return null===k?k:isNaN(k.getTime())?null:k}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;var c=[0,31,59,90,120,151,181,212,243,273,304,334],e=[0,31,60,91,121,152,182,213,244,274,305,335];q.registerFunctions=function(k,l){k.today=function(m,
n){return l(m,n,function(p,v,r){a.pcCheck(r,0,0);p=new Date;p.setHours(0,0,0,0);return p})};k.now=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,0,0);return new Date})};k.timestamp=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,0,0);p=new Date;return p=new Date(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds())})};k.toutc=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===
p?null:new Date(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate(),p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds())})};k.tolocal=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?null:b.DateTime.utc(p.getFullYear(),p.getMonth()+1,p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds(),p.getMilliseconds()).toJSDate()})};k.day=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getDate()})};
k.month=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getMonth()})};k.year=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getFullYear()})};k.hour=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getHours()})};k.second=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getSeconds()})};k.millisecond=
function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getMilliseconds()})};k.minute=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getMinutes()})};k.week=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,2);p=a.toDate(r[0]);if(null===p)return NaN;r=a.toNumber(a.defaultUndefined(r[1],0));if(0>r||6<r)throw Error("Invalid Parameter");v=p.getDate();var y=p.getMonth(),x=p.getFullYear();p=p.getDay();
v=v+(0!==x%4||0===x%100&&0!==x%400?c:e)[y]-1;y=Math.floor(v/7);return p-r+(0>p-r?7:0)<v-7*y?y+1:y})};k.weekday=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getDay()})};k.isoweekday=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);if(null===p)return NaN;p=p.getDay();0===p&&(p=7);return p})};k.isomonth=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:p.getMonth()+1})};k.isoweek=
function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);v=a.toDate(r[0]);if(null===v)return NaN;p=h(v).getTime();v=f(v);r=new Date(0);r.setFullYear(v,0,4);r.setHours(0,0,0,0);v=h(r);p-=v.getTime();return Math.round(p/6048E5)+1})};k.isoyear=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,1,1);p=a.toDate(r[0]);return null===p?NaN:f(p)})};k.date=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,0,7);if(3===r.length)return d(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),
0,0,0,0));if(4===r.length)return d(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),a.toNumber(r[3]),0,0,0));if(5===r.length)return d(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),a.toNumber(r[3]),a.toNumber(r[4]),0,0));if(6===r.length)return d(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),a.toNumber(r[3]),a.toNumber(r[4]),a.toNumber(r[5]),0));if(7===r.length)return d(new Date(a.toNumber(r[0]),a.toNumber(r[1]),a.toNumber(r[2]),a.toNumber(r[3]),a.toNumber(r[4]),
a.toNumber(r[5]),a.toNumber(r[6])));if(2===r.length){p=a.toString(r[1]);if(""===p)return null;p=a.standardiseDateFormat(p);v=void 0;v="X"===p?b.DateTime.fromSeconds(a.toNumber(r[0])):"x"===p?b.DateTime.fromMillis(a.toNumber(r[0])):b.DateTime.fromFormat(a.toString(r[0]),p,{locale:g.locale,numberingSystem:"latn"});return v.isValid?v.toJSDate():null}if(1===r.length){if(a.isString(r[0])){if(""===r[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;if(!0===/^[0-9][0-9][0-9][0-9]$/.test(r[0]))return a.toDate(r[0]+
"-01-01")}p=a.toNumber(r[0]);return!1===isNaN(p)?d(new Date(p)):a.toDate(r[0])}if(0===r.length)return new Date})};k.datediff=function(m,n){return l(m,n,function(p,v,r){a.pcCheck(r,2,3);p=a.toDateTime(r[0]);v=a.toDateTime(r[1]);if(null===p||null===v)return NaN;switch(a.toString(r[2]).toLowerCase()){case "days":case "day":case "d":return p.diff(v,"days").days;case "months":case "month":return p.diff(v,"months").months;case "minutes":case "minute":case "m":return"M"===r[2]?p.diff(v,"months").months:
p.diff(v,"minutes").minutes;case "seconds":case "second":case "s":return p.diff(v,"seconds").seconds;case "milliseconds":case "millisecond":case "ms":return p.diff(v).milliseconds;case "hours":case "hour":case "h":return p.diff(v,"hours").hours;case "years":case "year":case "y":return p.diff(v,"years").years;default:return p.diff(v).milliseconds}})};k.dateadd=function(m,n){return l(m,n,function(p,v,r){var y;a.pcCheck(r,2,3);p=a.toDateTime(r[0]);if(null===p)return null;v=a.toNumber(r[1]);if(isNaN(v))return p.toJSDate();
var x="milliseconds";switch(a.toString(r[2]).toLowerCase()){case "days":case "day":case "d":x="days";v=a.absRound(v);break;case "months":case "month":x="months";v=a.absRound(v);break;case "minutes":case "minute":case "m":x="M"===r[2]?"months":"minutes";break;case "seconds":case "second":case "s":x="seconds";break;case "milliseconds":case "millisecond":case "ms":x="milliseconds";break;case "hours":case "hour":case "h":x="hours";break;case "years":case "year":case "y":x="years"}return p.plus((y={},
y[x]=v,y)).toJSDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../ImmutablePointArray ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ./centroid ../../geometry/jsonUtils".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l,m,n){function p(v){return v instanceof b||"object"===typeof v&&"FeatureSetReader"===v.type}Object.defineProperty(q,"__esModule",
{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(v,r){v.ringisclockwise=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,1,1);z=[];if(null===w[0])return!1;if(f.isArray(w[0])){var t=0;for(w=w[0];t<w.length;t++)if(u=w[t],u instanceof e)z.push([u.x,u.y]);else throw Error("Invalid Argument");}else if(w[0]instanceof g)z=w[0]._elements;else if(f.isImmutableArray(w[0])){t=0;for(var A=w[0].toArray();t<A.length;t++)if(u=A[t],u instanceof e)z.push([u.x,u.y]);else throw Error("Invalid Argument");
0<z.length&&(w[0].get(0),w[0].get(0))}else throw Error("Invalid Argument");return 3>z.length?!1:(new k({rings:[],spatialReference:{wkid:4326}})).isClockwise(z)})};v.polygon=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,1,1);z=null;if(w[0]instanceof a){if(z=f.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference),!1===z instanceof k)throw Error("Illegal Parameter");}else z=w[0]instanceof k?n.fromJson(w[0].toJson()):f.fixSpatialReference(new k(JSON.parse(w[0])),y.spatialReference);
if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(z)})};v.polyline=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,1,1);z=null;if(w[0]instanceof a){if(z=f.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference),!1===z instanceof l)throw Error("Illegal Parameter");}else z=w[0]instanceof l?n.fromJson(w[0].toJson()):f.fixSpatialReference(new l(JSON.parse(w[0])),
y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(z)})};v.point=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,1,1);z=null;if(w[0]instanceof a){if(z=f.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference),!1===z instanceof e)throw Error("Illegal Parameter");}else z=w[0]instanceof e?n.fromJson(w[0].toJson()):
f.fixSpatialReference(new e(JSON.parse(w[0])),y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(z)})};v.multipoint=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,1,1);z=null;if(w[0]instanceof a){if(z=f.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference),!1===z instanceof c)throw Error("Illegal Parameter");
}else z=w[0]instanceof c?n.fromJson(w[0].toJson()):f.fixSpatialReference(new c(JSON.parse(w[0])),y.spatialReference);if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(z)})};v.extent=function(y,x){return r(y,x,function(z,u,w){w=f.autoCastFeatureToGeometry(w);f.pcCheck(w,1,1);z=null;w[0]instanceof a?z=f.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),
y.spatialReference):w[0]instanceof e?(z={xmin:w[0].x,ymin:w[0].y,xmax:w[0].x,ymax:w[0].y,spatialReference:w[0].spatialReference.toJson()},w=w[0],w.hasZ?(z.zmin=w.z,z.zmax=w.z):w.hasM&&(z.mmin=w.m,z.mmax=w.m),z=n.fromJson(z)):z=w[0]instanceof k?n.fromJson(w[0].getExtent().toJson()):w[0]instanceof l?n.fromJson(w[0].getExtent().toJson()):w[0]instanceof c?n.fromJson(w[0].getExtent().toJson()):w[0]instanceof h?n.fromJson(w[0].toJson()):f.fixSpatialReference(new h(JSON.parse(w[0])),y.spatialReference);
if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(z)})};v.geometry=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,1,1);z=null;z=p(w[0])?f.fixSpatialReference(w[0].geometry(),y.spatialReference):w[0]instanceof a?f.fixSpatialReference(b.parseGeometryFromDictionary(w[0]),y.spatialReference):f.fixSpatialReference(n.fromJson(JSON.parse(w[0])),y.spatialReference);
if(null!==z&&!1===z.spatialReference.equals(y.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return f.fixNullGeometry(z)})};v.setgeometry=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,2,2);if(p(w[0])){if(!0===w[0].immutable)throw Error("Feature is Immutable");if(w[1]instanceof d||null===w[1])w[0]._geometry=w[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return f.voidOperation})};
v.feature=function(y,x){return r(y,x,function(z,u,w){if(0===w.length)throw Error("Missing Parameters");z=null;if(1===w.length)if(f.isString(w[0]))z=b.fromJson(JSON.parse(w[0]));else if(p(w[0]))z=b.createFromArcadeFeature(w[0]);else if(w[0]instanceof d)z=b.createFromGraphicLikeObject(w[0],null,null);else if(w[0]instanceof a)z=w[0].hasField("geometry")?w[0].field("geometry"):null,u=w[0].hasField("attributes")?w[0].field("attributes"):null,null!==z&&z instanceof a&&(z=b.parseGeometryFromDictionary(z)),
null!==u&&(u=b.parseAttributesFromDictionary(u)),z=b.createFromGraphicLikeObject(z,u,null);else throw Error("Illegal Argument");else{if(2===w.length){u=z=null;if(null!==w[0])if(w[0]instanceof d)z=w[0];else if(z instanceof a)z=b.parseGeometryFromDictionary(w[0]);else throw Error("Illegal Argument");if(null!==w[1])if(w[1]instanceof a)u=b.parseAttributesFromDictionary(w[1]);else throw Error("Illegal Argument");}else{z=null;u={};if(null!==w[0])if(w[0]instanceof d)z=w[0];else if(z instanceof a)z=b.parseGeometryFromDictionary(w[0]);
else throw Error("Illegal Argument");for(var t=1;t<w.length;t+=2){var A=f.toString(w[t]),G=w[t+1];if(null===G||void 0===G||f.isString(G)||isNaN(G)||f.isDate(G)||f.isNumber(G)||f.isBoolean(G)){if(f.isFunctionParameter(G)||!1===f.isSimpleType(G))throw Error("Illegal Argument");u[A]=G===f.voidOperation?null:G}else throw Error("Illegal Argument");}}z=b.createFromGraphicLikeObject(z,u,null)}z._geometry=f.fixSpatialReference(z.geometry(),y.spatialReference);z.immutable=!1;return z})};v.dictionary=function(y,
x){return r(y,x,function(z,u,w){if(0===w.length)return w=new a,w.immutable=!1,w;if(1===w.length&&f.isString(w[0]))try{var t=JSON.parse(w[0]),A=a.convertObjectToArcadeDictionary(t,!1);A.immutable=!1;return A}catch(G){throw Error("Missing Parameters or Illegal Json");}if(0!==w.length%2)throw Error("Missing Parameters");z={};for(u=0;u<w.length;u+=2)if(t=f.toString(w[u]),A=w[u+1],null===A||void 0===A||f.isString(A)||isNaN(A)||f.isDate(A)||f.isNumber(A)||f.isBoolean(A)||f.isArray(A)||f.isImmutableArray(A)){if(f.isFunctionParameter(A))throw Error("Illegal Argument");
z[t]=A===f.voidOperation?null:A}else throw Error("Illegal Argument");w=new a(z);w.immutable=!1;return w})};v.haskey=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,2,2);z=f.toString(w[1]);if(p(w[0])||w[0]instanceof a)return w[0].hasField(z);throw Error("Illegal Argument");})};v.indexof=function(y,x){return r(y,x,function(z,u,w){f.pcCheck(w,2,2);z=w[1];if(f.isArray(w[0])){for(u=0;u<w[0].length;u++)if(f.equalityTest(z,w[0][u]))return u;return-1}if(f.isImmutableArray(w[0])){var t=w[0].length();
for(u=0;u<t;u++)if(f.equalityTest(z,w[0].get(u)))return u;return-1}throw Error("Illegal Argument");})};v.angle=function(y,x){return r(y,x,function(z,u,w){w=f.autoCastFeatureToGeometry(w);f.pcCheck(w,2,3);if(!(w[0]instanceof e))throw Error("Illegal Argument");if(!(w[1]instanceof e))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof e))throw Error("Illegal Argument");return 2===w.length?m.angle2D(w[0],w[1]):m.angleBetween2D(w[0],w[1],w[2])})};v.bearing=function(y,x){return r(y,x,function(z,
u,w){w=f.autoCastFeatureToGeometry(w);f.pcCheck(w,2,3);if(!(w[0]instanceof e))throw Error("Illegal Argument");if(!(w[1]instanceof e))throw Error("Illegal Argument");if(2<w.length&&!(w[2]instanceof e))throw Error("Illegal Argument");return 2===w.length?m.bearing2D(w[0],w[1]):m.bearingBetween2D(w[0],w[1],w[2])})};v.isselfintersecting=function(y,x){return r(y,x,function(z,u,w){w=f.autoCastFeatureToGeometry(w);f.pcCheck(w,1,1);z=w[0];if(z instanceof k)return z.isSelfIntersecting(z);if(z instanceof l)return z=
z.paths,m.pathsSelfIntersecting(z);if(z instanceof c)for(u=z.points,w=0;w<u.length;w++)for(var t=0;t<u.length;t++)if(t!==w){for(var A=!0,G=0;G<u[w].length;G++)if(u[w][G]!==u[t][G]){A=!1;break}if(!0===A)return!0}return f.isArray(z)||f.isImmutableArray(z)?(z=f.autoCastArrayOfPointsToPolyline(z,y.spatialReference),null!==z&&(z=z.paths),m.pathsSelfIntersecting(z)):!1})}}})},"esri/arcade/functions/centroid":function(){define(["require","exports","../../geometry/Point"],function(D,q,a){function b(k,l,m){var n=
{x:0,y:0};l&&(n.z=0);m&&(n.m=0);for(var p=0,v=k[0],r=0;r<k.length;r++){var y=k[r];a:if(y.length!==v.length)var x=!1;else{for(x=0;x<y.length;x++)if(y[x]!==v[x]){x=!1;break a}x=!0}if(!1===x){x=g(v,y,l);var z=y,u=l,w=m,t={x:(v[0]+z[0])/2,y:(v[1]+z[1])/2};u&&(t.z=(v[2]+z[2])/2);u&&w?t.m=(v[3]+z[3])/2:w&&(t.m=(v[2]+z[2])/2);v=t;v.x*=x;v.y*=x;n.x+=v.x;n.y+=v.y;l&&(v.z*=x,n.z+=v.z);m&&(v.m*=x,n.m+=v.m);p+=x;v=y}}0<p?(n.x/=p,n.y/=p,l&&(n.z/=p),m&&(n.m/=p)):(n.x=k[0][0],n.y=k[0][1],l&&(n.z=k[0][2]),m&&l?n.m=
k[0][3]:m&&(n.m=k[0][2]));return n}function g(k,l,m){var n=l[0]-k[0];k=l[1]-k[1];return m?(l=l[2]-l[2],Math.sqrt(n*n+k*k+l*l)):Math.sqrt(n*n+k*k)}function f(k,l,m){for(void 0===m&&(m=0);k<m;)k+=l;for(m+=l;k>=m;)k-=l;return k}function h(k,l){return Math.atan2(l.y-k.y,l.x-k.x)}function d(k,l,m){var n=k.x-l.x;k=k.y-l.y;var p=m.x-l.x;l=m.y-l.y;return Math.atan2(n*l-p*k,n*p+k*l)}function c(k,l,m,n,p){var v=k[0];k=k[1];var r=l[0];l=l[1];var y=m[0],x=m[1];m=n[0]-y;y=v-y;var z=r-v;n=n[1]-x;x=k-x;var u=l-
k,w=n*z-m*u;if(0===w)return!1;m=(m*x-n*y)/w;y=(z*x-u*y)/w;return 0<=m&&1>=m&&0<=y&&1>=y?(p&&(p[0]=v+m*(r-v),p[1]=k+m*(l-k)),!0):!1}Object.defineProperty(q,"__esModule",{value:!0});q.pathsSelfIntersecting=q.bearingBetween2D=q.angleBetween2D=q.angleBetweenRad=q.bearing2D=q.angle2D=q.angleRad=q.centroidMultiPoint=q.centroidPolyline=void 0;q.centroidPolyline=function(k){for(var l={x:0,y:0,spatialReference:k.spatialReference.toJson()},m={x:0,y:0,spatialReference:k.spatialReference.toJson()},n=0,p=0,v=
0;v<k.paths.length;v++)if(0!==k.paths[v].length){var r=k.paths[v];var y=!0===k.hasZ;if(1>=r.length)r=0;else{for(var x=0,z=1;z<r.length;z++)x+=g(r[z-1],r[z],y);r=x}0===r?(y=b(k.paths[v],!0===k.hasZ,!0===k.hasM),l.x+=y.x,l.y+=y.y,!0===k.hasZ&&(l.z+=y.z),!0===k.hasM&&(l.m+=y.m),++n):(y=b(k.paths[v],!0===k.hasZ,!0===k.hasM),m.x+=y.x*r,m.y+=y.y*r,!0===k.hasZ&&(m.z+=y.z*r),!0===k.hasM&&(m.m+=y.m*r),p+=r)}return 0<p?(m.x/=p,m.y/=p,!0===k.hasZ&&(m.z/=p),!0===k.hasM&&(m.m/=p),new a(m)):0<n?(l.x/=n,l.y/=n,
!0===k.hasZ&&(m.z/=n),!0===k.hasM&&(l.m/=n),new a(l)):null};q.centroidMultiPoint=function(k){if(0===k.points.length)return null;for(var l=0,m=0,n=0,p=0,v=0;v<k.points.length;v++){var r=k.getPoint(v);!0===r.hasZ&&(n+=r.z);!0===r.hasM&&(p+=r.m);l+=r.x;m+=r.y;p+=r.m}l={x:l/k.points.length,y:m/k.points.length,spatialReference:null};l.spatialReference=k.spatialReference.toJson();!0===k.hasZ&&(l.z=n/k.points.length);!0===k.hasM&&(l.m=p/k.points.length);return new a(l)};q.angleRad=h;q.angle2D=function(k,
l){return f(h(k,l),2*Math.PI)*(180/Math.PI)};q.bearing2D=function(k,l){return f(Math.PI/2-h(k,l),2*Math.PI)*(180/Math.PI)};q.angleBetweenRad=d;q.angleBetween2D=function(k,l,m){return f(d(k,l,m),2*Math.PI)*(180/Math.PI)};q.bearingBetween2D=function(k,l,m){return f(-1*d(k,l,m),2*Math.PI)*(180/Math.PI)};var e=[0,0];q.pathsSelfIntersecting=function(k){for(var l=0;l<k.length;l++){for(var m=k[l],n=0;n<m.length-1;n++)for(var p=m[n],v=m[n+1],r=l+1;r<k.length;r++)for(var y=0;y<k[r].length-1;y++){var x=k[r][y],
z=k[r][y+1],u=c(p,v,x,z,e);if(u&&!(e[0]===p[0]&&e[1]===p[1]||e[0]===x[0]&&e[1]===x[1]||e[0]===v[0]&&e[1]===v[1]||e[0]===z[0]&&e[1]===z[1]))return!0}y=m.length;if(!(3>y))for(n=0;n<=y-2;n++)for(p=m[n],v=m[n+1],r=n+2;r<=y-2;r++)if(x=m[r],z=m[r+1],(u=c(p,v,x,z,e))&&!(e[0]===p[0]&&e[1]===p[1]||e[0]===x[0]&&e[1]===x[1]||e[0]===v[0]&&e[1]===v[1]||e[0]===z[0]&&e[1]===z[1]))return!0}return!1}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/jsonUtils".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m){function n(v){return 0===a.version.indexOf("4.")?k.fromExtent(v):new k({spatialReference:v.spatialReference,rings:[[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]]]})}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=q.setGeometryEngine=void 0;var p=null;q.setGeometryEngine=function(v){p=v};q.registerFunctions=function(v,r){function y(x){g.pcCheck(x,2,2);if(!(x[0]instanceof d&&x[1]instanceof d||x[0]instanceof d&&
null===x[1]||x[1]instanceof d&&null===x[0]||null===x[0]&&null===x[1]))throw Error("Illegal Argument");}v.disjoint=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null===t[0]||null===t[1]?!0:p.disjoint(t[0],t[1])})};v.intersects=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null===t[0]||null===t[1]?!1:p.intersects(t[0],t[1])})};v.touches=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);
return null===t[0]||null===t[1]?!1:p.touches(t[0],t[1])})};v.crosses=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null===t[0]||null===t[1]?!1:p.crosses(t[0],t[1])})};v.within=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null===t[0]||null===t[1]?!1:p.within(t[0],t[1])})};v.contains=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null===t[0]||null===t[1]?!1:p.contains(t[0],t[1])})};
v.overlaps=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null===t[0]||null===t[1]?!1:p.overlaps(t[0],t[1])})};v.equals=function(x,z){return r(x,z,function(u,w,t){g.pcCheck(t,2,2);return t[0]===t[1]?!0:t[0]instanceof d&&t[1]instanceof d?p.equals(t[0],t[1]):g.isDate(t[0])&&g.isDate(t[1])?t[0].getTime()===t[1].getTime():!1})};v.relate=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,3,3);if(t[0]instanceof d&&t[1]instanceof
d)return p.relate(t[0],t[1],g.toString(t[2]));if(t[0]instanceof d&&null===t[1]||t[1]instanceof d&&null===t[0]||null===t[0]&&null===t[1])return!1;throw Error("Illegal Argument");})};v.intersection=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null===t[0]||null===t[1]?null:p.intersect(t[0],t[1])})};v.union=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);u=[];if(0===t.length)throw Error("Function called with wrong number of Parameters");
if(1===t.length)if(g.isArray(t[0]))for(t=g.autoCastFeatureToGeometry(t[0]),w=0;w<t.length;w++){if(null!==t[w]){if(!(t[w]instanceof d))throw Error("Illegal Argument");u.push(t[w])}}else if(g.isImmutableArray(t[0]))for(t=g.autoCastFeatureToGeometry(t[0].toArray()),w=0;w<t.length;w++){if(null!==t[w]){if(!(t[w]instanceof d))throw Error("Illegal Argument");u.push(t[w])}}else{if(t[0]instanceof d)return g.fixSpatialReference(b.cloneGeometry(t[0]),x.spatialReference);if(null===t[0])return null;throw Error("Illegal Argument");
}else for(w=0;w<t.length;w++)if(null!==t[w]){if(!(t[w]instanceof d))throw Error("Illegal Argument");u.push(t[w])}return 0===u.length?null:p.union(u)})};v.difference=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null!==t[0]&&null===t[1]?b.cloneGeometry(t[0]):null===t[0]?null:p.difference(t[0],t[1])})};v.symmetricdifference=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);y(t);return null===t[0]&&null===t[1]?null:null===t[0]?b.cloneGeometry(t[1]):
null===t[1]?b.cloneGeometry(t[0]):p.symmetricDifference(t[0],t[1])})};v.clip=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,2);if(!(t[1]instanceof h)&&null!==t[1])throw Error("Illegal Argument");if(null===t[0])return null;if(!(t[0]instanceof d))throw Error("Illegal Argument");return null===t[1]?null:p.clip(t[0],t[1])})};v.cut=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,2);if(!(t[1]instanceof l)&&null!==t[1])throw Error("Illegal Argument");
if(null===t[0])return[];if(!(t[0]instanceof d))throw Error("Illegal Argument");return null===t[1]?[b.cloneGeometry(t[0])]:p.cut(t[0],t[1])})};v.area=function(x,z){return r(x,z,function(u,w,t){g.pcCheck(t,1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return u=g.autoCastArrayOfPointsToPolygon(t[0],x.spatialReference),null===u?0:p.planarArea(u,b.convertSquareUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof d))throw Error("Illegal Argument");
return p.planarArea(t[0],b.convertSquareUnitsToCode(g.defaultUndefined(t[1],-1)))})};v.areageodetic=function(x,z){return r(x,z,function(u,w,t){g.pcCheck(t,1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return u=g.autoCastArrayOfPointsToPolygon(t[0],x.spatialReference),null===u?0:p.geodesicArea(u,b.convertSquareUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof d))throw Error("Illegal Argument");return p.geodesicArea(t[0],b.convertSquareUnitsToCode(g.defaultUndefined(t[1],
-1)))})};v.length=function(x,z){return r(x,z,function(u,w,t){g.pcCheck(t,1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return u=g.autoCastArrayOfPointsToPolyline(t[0],x.spatialReference),null===u?0:p.planarLength(u,b.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof d))throw Error("Illegal Argument");return p.planarLength(t[0],b.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)))})};v.length3d=function(x,z){return r(x,
z,function(u,w,t){g.pcCheck(t,1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return u=g.autoCastArrayOfPointsToPolyline(t[0],x.spatialReference),null===u?0:p.planarLength(u,b.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof d))throw Error("Illegal Argument");return p.planarLength(t[0],b.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)))})};v.lengthgeodetic=function(x,z){return r(x,z,function(u,w,t){g.pcCheck(t,
1,2);t=g.autoCastFeatureToGeometry(t);if(null===t[0])return 0;if(g.isArray(t[0])||g.isImmutableArray(t[0]))return u=g.autoCastArrayOfPointsToPolyline(t[0],x.spatialReference),null===u?0:p.geodesicLength(u,b.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)));if(!(t[0]instanceof d))throw Error("Illegal Argument");return p.geodesicLength(t[0],b.convertLinearUnitsToCode(g.defaultUndefined(t[1],-1)))})};v.distance=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,
2,3);u=t[0];if(g.isArray(t[0])||g.isImmutableArray(t[0]))u=g.autoCastArrayOfPointsToMultiPoint(t[0],x.spatialReference);w=t[1];if(g.isArray(t[1])||g.isImmutableArray(t[1]))w=g.autoCastArrayOfPointsToMultiPoint(t[1],x.spatialReference);if(!(u instanceof d))throw Error("Illegal Argument");if(!(w instanceof d))throw Error("Illegal Argument");return p.distance(u,w,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1)))})};v.distancegeodetic=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);
g.pcCheck(t,2,3);u=t[0];w=t[1];if(!(u instanceof e))throw Error("Illegal Argument");if(!(w instanceof e))throw Error("Illegal Argument");var A=new l({paths:[],spatialReference:u.spatialReference});A.addPath([u,w]);return p.geodesicLength(A,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1)))})};v.densify=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);if(null===t[0])return null;if(!(t[0]instanceof d))throw Error("Illegal Argument");u=g.toNumber(t[1]);
if(isNaN(u))throw Error("Illegal Argument");if(0>=u)throw Error("Illegal Argument");return t[0]instanceof k||t[0]instanceof l?p.densify(t[0],u,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1))):t[0]instanceof h?p.densify(n(t[0]),u,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1))):t[0]})};v.densifygeodetic=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);if(null===t[0])return null;if(!(t[0]instanceof d))throw Error("Illegal Argument");u=g.toNumber(t[1]);
if(isNaN(u))throw Error("Illegal Argument");if(0>=u)throw Error("Illegal Argument");return t[0]instanceof k||t[0]instanceof l?p.geodesicDensify(t[0],u,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1))):t[0]instanceof h?p.geodesicDensify(n(t[0]),u,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1))):t[0]})};v.generalize=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,4);if(null===t[0])return null;if(!(t[0]instanceof d))throw Error("Illegal Argument");
u=g.toNumber(t[1]);if(isNaN(u))throw Error("Illegal Argument");return p.generalize(t[0],u,g.toBoolean(g.defaultUndefined(t[2],!0)),b.convertLinearUnitsToCode(g.defaultUndefined(t[3],-1)))})};v.buffer=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);if(null===t[0])return null;if(!(t[0]instanceof d))throw Error("Illegal Argument");u=g.toNumber(t[1]);if(isNaN(u))throw Error("Illegal Argument");return 0===u?b.cloneGeometry(t[0]):p.buffer(t[0],u,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],
-1)))})};v.buffergeodetic=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);if(null===t[0])return null;if(!(t[0]instanceof d))throw Error("Illegal Argument");u=g.toNumber(t[1]);if(isNaN(u))throw Error("Illegal Argument");return 0===u?b.cloneGeometry(t[0]):p.geodesicBuffer(t[0],u,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1)))})};v.offset=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,6);if(null===t[0])return null;
if(!(t[0]instanceof k||t[0]instanceof l))throw Error("Illegal Argument");u=g.toNumber(t[1]);if(isNaN(u))throw Error("Illegal Argument");w=g.toNumber(g.defaultUndefined(t[4],10));if(isNaN(w))throw Error("Illegal Argument");var A=g.toNumber(g.defaultUndefined(t[5],0));if(isNaN(A))throw Error("Illegal Argument");return p.offset(t[0],u,b.convertLinearUnitsToCode(g.defaultUndefined(t[2],-1)),g.toString(g.defaultUndefined(t[3],"round")).toLowerCase(),w,A)})};v.rotate=function(x,z){return r(x,z,function(u,
w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,2,3);u=t[0];if(null===u)return null;if(!(u instanceof d))throw Error("Illegal Argument");u instanceof h&&(u=k.fromExtent(u));w=g.toNumber(t[1]);if(isNaN(w))throw Error("Illegal Argument");t=g.defaultUndefined(t[2],null);if(null===t)return p.rotate(u,w);if(t instanceof e)return p.rotate(u,w,t);throw Error("Illegal Argument");})};v.centroid=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,1,1);if(null===t[0])return null;
u=t[0];if(g.isArray(t[0])||g.isImmutableArray(t[0]))u=g.autoCastArrayOfPointsToMultiPoint(t[0],x.spatialReference);if(null===u)return null;if(!(u instanceof d))throw Error("Illegal Argument");return u instanceof e?g.fixSpatialReference(b.cloneGeometry(t[0]),x.spatialReference):u instanceof k?u.getCentroid():u instanceof l?f.centroidPolyline(u):u instanceof c?f.centroidMultiPoint(u):u instanceof h?u.getCenter():null})};v.multiparttosinglepart=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);
g.pcCheck(t,1,1);w=[];if(null===t[0])return null;if(!(t[0]instanceof d))throw Error("Illegal Argument");if(t[0]instanceof e||t[0]instanceof h)return[g.fixSpatialReference(b.cloneGeometry(t[0]),x.spatialReference)];u=p.simplify(t[0]);if(u instanceof k){w=[];var A=[];for(t=0;t<u.rings.length;t++)if(u.isClockwise(u.rings[t])){var G=m.fromJson({rings:[u.rings[t]],hasZ:!0===u.hasZ,hasM:!0===u.hasM,spatialReference:u.spatialReference.toJson()});w.push(G)}else A.push({ring:u.rings[t],pt:u.getPoint(t,0)});
for(u=0;u<A.length;u++)for(t=0;t<w.length;t++)if(w[t].contains(A[u].pt)){w[t].addRing(A[u].ring);break}return w}if(u instanceof l){w=[];for(t=0;t<u.paths.length;t++)A=m.fromJson({paths:[u.paths[t]],hasZ:!0===u.hasZ,hasM:!0===u.hasM,spatialReference:u.spatialReference.toJson()}),w.push(A);return w}if(t[0]instanceof c){u=g.fixSpatialReference(b.cloneGeometry(t[0]),x.spatialReference);for(t=0;t<u.points.length;t++)w.push(u.getPoint(t));return w}return null})};v.issimple=function(x,z){return r(x,z,function(u,
w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,1,1);if(null===t[0])return!0;if(!(t[0]instanceof d))throw Error("Illegal Argument");return p.isSimple(t[0])})};v.simplify=function(x,z){return r(x,z,function(u,w,t){t=g.autoCastFeatureToGeometry(t);g.pcCheck(t,1,1);if(null===t[0])return null;if(!(t[0]instanceof d))throw Error("Illegal Argument");return p.simplify(t[0])})}}})},"esri/arcade/kernel":function(){define(["require","exports","../geometry/Extent","../geometry/jsonUtils"],function(D,q,a,b){Object.defineProperty(q,
"__esModule",{value:!0});q.cloneGeometry=q.sameGeomType=q.convertLinearUnitsToCode=q.shapeExtent=q.convertSquareUnitsToCode=void 0;q.convertSquareUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;g=g.toLowerCase();g=g.replace(/\s/g,"");g=g.replace(/-/g,"");switch(g){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":return 109413;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 109414;
case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 109405;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 109409}return null};q.shapeExtent=function(g){if(null===g)return null;switch(g.type){case "polygon":case "multipoint":case "polyline":return g.extent;
case "point":return new a({xmin:g.x,ymin:g.y,xmax:g.x,ymax:g.y,spatialReference:g.spatialReference});case "extent":return g}return null};q.convertLinearUnitsToCode=function(g){if(void 0===g)return null;if("number"===typeof g)return g;g=g.toLowerCase();g=g.replace(/\s/g,"");g=g.replace(/-/g,"");switch(g){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":return 9001;case "miles":case "mile":case "squaremile":case "squaremiles":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "km":return 9036;
case "yard":case "yd":case "yards":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "squarefeet":case "squarefoot":return 9002;case "nm":case "nmi":case "nauticalmile":case "nauticalmiles":case "squarenauticalmile":case "squarenauticalmiles":return 9030}return null};q.sameGeomType=function(g,f){return g===f||"point"===g&&"esriGeometryPoint"===f||"polyline"===g&&"esriGeometryPolyline"===f||"polygon"===g&&"esriGeometryPolygon"===f||"extent"===g&&"esriGeometryEnvelope"===
f||"multipoint"===g&&"esriGeometryMultipoint"===f||"point"===f&&"esriGeometryPoint"===g||"polyline"===f&&"esriGeometryPolyline"===g||"polygon"===f&&"esriGeometryPolygon"===g||"extent"===f&&"esriGeometryEnvelope"===g||"multipoint"===f&&"esriGeometryMultipoint"===g?!0:!1};q.cloneGeometry=function(g){if(null===g)return null;var f=b.fromJson(g.toJson());g.getCacheValue("_geVersion")&&f.setCacheValue("_geVersion",g.getCacheValue("_geVersion"));return f}})},"esri/arcade/functions/maths":function(){define(["require",
"exports","../languageUtils","dojo/number"],function(D,q,a,b){function g(f,h,d){if("undefined"===typeof d||0===+d)return Math[f](h);h=+h;d=+d;if(isNaN(h)||"number"!==typeof d||0!==d%1)return NaN;h=h.toString().split("e");h=Math[f](+(h[0]+"e"+(h[1]?+h[1]-d:-d)));h=h.toString().split("e");return+(h[0]+"e"+(h[1]?+h[1]+d:d))}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(f,h){function d(c,e,k){c=a.toNumber(c);return isNaN(c)?c:isNaN(e)||isNaN(k)||
e>k?NaN:c<e?e:c>k?k:c}f.number=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,2);k=m[0];return a.isNumber(k)?k:null===k?0:a.isDate(k)||a.isBoolean(k)?Number(k):a.isArray(k)?NaN:""===k||void 0===k?Number(k):a.isString(k)?void 0!==m[1]?(m=a.multiReplace(m[1],"\u2030",""),m=a.multiReplace(m,"\u00a4",""),b.parse(k,{pattern:m})):Number(k.trim()):Number(k)})};f.abs=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.abs(a.toNumber(m[0]))})};f.acos=function(c,e){return h(c,
e,function(k,l,m){a.pcCheck(m,1,1);return Math.acos(a.toNumber(m[0]))})};f.asin=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.asin(a.toNumber(m[0]))})};f.atan=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.atan(a.toNumber(m[0]))})};f.atan2=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,2,2);return Math.atan2(a.toNumber(m[0]),a.toNumber(m[1]))})};f.ceil=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,2);return 2===m.length?(k=a.toNumber(m[1]),
isNaN(k)&&(k=0),g("ceil",a.toNumber(m[0]),-1*k)):Math.ceil(a.toNumber(m[0]))})};f.round=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,2);return 2===m.length?(k=a.toNumber(m[1]),isNaN(k)&&(k=0),g("round",a.toNumber(m[0]),-1*k)):Math.round(a.toNumber(m[0]))})};f.floor=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,2);return 2===m.length?(k=a.toNumber(m[1]),isNaN(k)&&(k=0),g("floor",a.toNumber(m[0]),-1*k)):Math.floor(a.toNumber(m[0]))})};f.cos=function(c,e){return h(c,e,function(k,
l,m){a.pcCheck(m,1,1);return Math.cos(a.toNumber(m[0]))})};f.isnan=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return"number"===typeof m[0]&&isNaN(m[0])})};f.exp=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.exp(a.toNumber(m[0]))})};f.log=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.log(a.toNumber(m[0]))})};f.pow=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,2,2);return Math.pow(a.toNumber(m[0]),a.toNumber(m[1]))})};f.random=
function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,0,0);return Math.random()})};f.sin=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.sin(a.toNumber(m[0]))})};f.sqrt=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.sqrt(a.toNumber(m[0]))})};f.tan=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return Math.tan(a.toNumber(m[0]))})};f.defaultvalue=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,2,2);return null===m[0]||""===m[0]||
void 0===m[0]?m[1]:m[0]})};f.isempty=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return null===m[0]||""===m[0]||void 0===m[0]?!0:!1})};f["boolean"]=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,1,1);return a.toBoolean(m[0])})};f.constrain=function(c,e){return h(c,e,function(k,l,m){a.pcCheck(m,3,3);k=a.toNumber(m[1]);l=a.toNumber(m[2]);if(a.isArray(m[0])){var n=[],p=0;for(m=m[0];p<m.length;p++)n.push(d(m[p],k,l));return n}if(a.isImmutableArray(m[0])){n=[];for(p=0;p<m[0].length();p++)n.push(d(m[0].get(p),
k,l));return n}return d(m[0],k,l)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(D,q,a,b){function g(f,h,d,c){if(1===c.length){if(a.isArray(c[0]))return b.calculateStat(f,c[0],-1);if(a.isImmutableArray(c[0]))return b.calculateStat(f,c[0].toArray(),-1)}return b.calculateStat(f,c,-1)}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(f,h){f.stdev=function(d,c){return h(d,c,
function(e,k,l){return g("stdev",e,k,l)})};f.variance=function(d,c){return h(d,c,function(e,k,l){return g("variance",e,k,l)})};f.average=function(d,c){return h(d,c,function(e,k,l){return g("mean",e,k,l)})};f.mean=function(d,c){return h(d,c,function(e,k,l){return g("mean",e,k,l)})};f.sum=function(d,c){return h(d,c,function(e,k,l){return g("sum",e,k,l)})};f.min=function(d,c){return h(d,c,function(e,k,l){return g("min",e,k,l)})};f.max=function(d,c){return h(d,c,function(e,k,l){return g("max",e,k,l)})};
f.distinct=function(d,c){return h(d,c,function(e,k,l){return g("distinct",e,k,l)})};f.count=function(d,c){return h(d,c,function(e,k,l){a.pcCheck(l,1,1);if(a.isArray(l[0])||a.isString(l[0]))return l[0].length;if(a.isImmutableArray(l[0]))return l[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(D,q,a){function b(f){for(var h=0,d=0;d<f.length;d++)h+=f[d];return h/f.length}function g(f){for(var h=
b(f),d=0,c=0;c<f.length;c++)d+=Math.pow(h-f[c],2);return d/f.length}Object.defineProperty(q,"__esModule",{value:!0});q.calculateStat=q.decodeStatType=void 0;q.decodeStatType=function(f){switch(f.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};q.calculateStat=function(f,h,d){void 0===
d&&(d=1E3);switch(f.toLowerCase()){case "distinct":a:{f=d;d=[];for(var c={},e=[],k=0;k<h.length;k++){if(void 0!==h[k]&&null!==h[k]&&h[k]!==a.voidOperation){var l=h[k];if(a.isNumber(l)||a.isString(l))void 0===c[l]&&(d.push(l),c[l]=1);else{for(var m=!1,n=0;n<e.length;n++)!0===a.equalityTest(e[n],l)&&(m=!0);!1===m&&(e.push(l),d.push(l))}}if(d.length>=f&&-1!==f){h=d;break a}}h=d}return h;case "avg":case "mean":return b(a.toNumberArray(h));case "min":return Math.min.apply(Math,a.toNumberArray(h));case "sum":h=
a.toNumberArray(h);for(d=f=0;d<h.length;d++)f+=h[d];return f;case "max":return Math.max.apply(Math,a.toNumberArray(h));case "stdev":case "stddev":return Math.sqrt(g(a.toNumberArray(h)));case "var":case "variance":return g(a.toNumberArray(h));case "count":return h.length}return 0}})},"esri/arcade/functions/string":function(){define("require exports ../ArcadePortal ../Attachment ../Dictionary ../Feature ../languageUtils ../featureset/support/shared ./convertdirection ./hash ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../SpatialReference".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v){function r(y,x,z){if(null===y)x.updateUint8Array([0,139]);else if(h.isArray(y)){x.updateUint8Array([61]);if(z.map.has(y))y=z.map.get(y),x.updateIntArray([y^61237541]);else{z.map.set(y,z.currentLength++);for(var u=0;u<y.length;u++){var w=y[u];r(w,x,z)}z.map["delete"](y);z.currentLength--}x.updateUint8Array([199])}else if(h.isImmutableArray(y)){x.updateUint8Array([61]);if(z.map.has(y))y=z.map.get(y),x.updateIntArray([y^61237541]);else{z.map.set(y,z.currentLength++);
u=0;for(var t=y.toArray();u<t.length;u++)w=t[u],r(w,x,z);z.map["delete"](y);z.currentLength--}x.updateUint8Array([199])}else if(h.isDate(y))x.updateIntArray([y.getTime()]),x.updateUint8Array([241]);else if(h.isString(y))x.updateIntArray([y.length]),x.updateWithString(y),x.updateUint8Array([41]);else if(h.isBoolean(y))x.updateUint8Array([!0===y?1:0,113]);else if(h.isNumber(y))x.updateFloatArray([y]),x.updateUint8Array([173]);else{if(y instanceof b)throw Error("Type not supported in Hash");if(y instanceof
a)throw Error("Type not supported in Hash");if(y instanceof g){x.updateUint8Array([223]);if(z.map.has(y))y=z.map.get(y),x.updateIntArray([y^61237541]);else{z.map.set(y,z.currentLength++);u=0;for(t=y.keys();u<t.length;u++)w=t[u],x.updateIntArray([w.length]),x.updateWithString(w),x.updateUint8Array([251]),w=y.field(w),r(w,x,z),x.updateUint8Array([239]);z.map["delete"](y);z.currentLength--}x.updateUint8Array([73])}else{if(y instanceof f)throw Error("Type not supported in Hash");if(y instanceof m)x.updateIntArray([3833836621]),
x.updateIntArray([0]),x.updateFloatArray([y.x]),x.updateIntArray([1]),x.updateFloatArray([y.y]),x.updateIntArray([3765347959]),r(y.spatialReference.wkid,x,z);else if(y instanceof n){x.updateIntArray([1266616829]);for(u=0;u<y.rings.length;u++){t=y.rings[u];var A=[],G=null,B=null;for(w=0;w<t.length;w++){var E=y.getPoint(u,w);if(0===w)G=E;else if(B.x===E.x&&B.y===E.y)continue;B=E;w===t.length-1&&G.x===E.x&&G.y===E.y||A.push(E)}x.updateIntArray([1397116793,A.length]);for(w=0;w<A.length;w++)E=A[w],x.updateIntArray([3962308117,
w]),r(E,x,z),x.updateIntArray([2716288009]);x.updateIntArray([2278822459])}x.updateIntArray([3878477243]);r(y.spatialReference.wkid,x,z)}else if(y instanceof p){x.updateIntArray([4106883559]);for(u=0;u<y.paths.length;u++){t=y.paths[u];x.updateIntArray([1397116793,t.length]);for(w=0;w<t.length;w++)x.updateIntArray([3962308117,w]),r(y.getPoint(u,w),x,z),x.updateIntArray([2716288009]);x.updateIntArray([2278822459])}x.updateIntArray([2568784753]);r(y.spatialReference.wkid,x,z)}else if(y instanceof l){x.updateIntArray([588535921,
y.points.length]);for(w=0;w<y.points.length;w++)u=y.getPoint(w),x.updateIntArray([w]),r(u,x,z);x.updateIntArray([1700171621]);r(y.spatialReference.wkid,x,z)}else if(y instanceof k)x.updateIntArray([3483648373]),x.updateIntArray([0]),x.updateFloatArray([y.xmax]),x.updateIntArray([1]),x.updateFloatArray([y.xmin]),x.updateIntArray([2]),x.updateFloatArray([y.ymax]),x.updateIntArray([3]),x.updateFloatArray([y.ymin]),x.updateIntArray([3622027469]),r(y.spatialReference.wkid,x,z);else if(y instanceof v)x.updateIntArray([14]),
void 0!==y.wkid&&null!==y.wkid&&x.updateIntArray([y.wkid]),y.wkt&&x.updateWithString(y.wkt);else{if(h.isFunctionParameter(y))throw Error("Type not supported in Hash");if(h.isFeatureSet(y))throw Error("Type not supported in Hash");h.isFeatureSetCollection(y);throw Error("Type not supported in Hash");}}}}Object.defineProperty(q,"__esModule",{value:!0});q.registerFunctions=void 0;q.registerFunctions=function(y,x){y.portal=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);return new a(h.toString(A[0]))})};
y.trim=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);return h.toString(A[0]).trim()})};y.tohex=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);w=h.toNumber(A[0]);return isNaN(w)?w:w.toString(16)})};y.upper=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);return h.toString(A[0]).toUpperCase()})};y.proper=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,2);w=1;2===A.length&&"firstword"===h.toString(A[1]).toLowerCase()&&(w=2);t=/\s/;A=h.toString(A[0]);for(var G=
"",B=!0,E=0;E<A.length;E++){var F=A[E];t.test(F)?1===w&&(B=!0):F.toUpperCase()!==F.toLowerCase()&&(B?(F=F.toUpperCase(),B=!1):F=F.toLowerCase());G+=F}return G})};y.lower=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);return h.toString(A[0]).toLowerCase()})};y.guid=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,0,1);if(0<A.length)switch(h.toString(A[0]).toLowerCase()){case "digits":return h.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return h.generateUUID();
case "digits-hyphen-parentheses":return"("+h.generateUUID()+")"}return"{"+h.generateUUID()+"}"})};y.console=function(z,u){return x(z,u,function(w,t,A){0!==A.length&&(1===A.length?z.console(h.toString(A[0])):z.console(h.toString(A)));return h.voidOperation})};y.mid=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,2,3);w=h.toNumber(A[1]);if(isNaN(w))return"";0>w&&(w=0);if(2===A.length)return h.toString(A[0]).substr(w);t=h.toNumber(A[2]);if(isNaN(t))return"";0>t&&(t=0);return h.toString(A[0]).substr(w,
t)})};y.find=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,2,3);w=0;if(2<A.length){w=h.toNumber(h.defaultUndefined(A[2],0));if(isNaN(w))return-1;0>w&&(w=0)}return h.toString(A[1]).indexOf(h.toString(A[0]),w)})};y.left=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,2,2);w=h.toNumber(A[1]);if(isNaN(w))return"";0>w&&(w=0);return h.toString(A[0]).substr(0,w)})};y.right=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,2,2);w=h.toNumber(A[1]);if(isNaN(w))return"";0>w&&(w=0);return h.toString(A[0]).substr(-1*
w,w)})};y.split=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,2,4);w=h.toNumber(h.defaultUndefined(A[2],-1));t=h.toBoolean(h.defaultUndefined(A[3],!1));-1===w||null===w||!0===t?A=h.toString(A[0]).split(h.toString(A[1])):(isNaN(w)&&(w=-1),-1>w&&(w=-1),A=h.toString(A[0]).split(h.toString(A[1]),w));if(!1===t)return A;t=[];for(var G=0;G<A.length&&!(-1!==w&&t.length>=w);G++)""!==A[G]&&void 0!==A[G]&&t.push(A[G]);return t})};y.text=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,2);return h.toStringExplicit(A[0],
A[1])})};y.concatenate=function(z,u){return x(z,u,function(w,t,A){w=[];if(1>A.length)return"";if(h.isArray(A[0])){t=h.defaultUndefined(A[2],"");for(var G=0;G<A[0].length;G++)w[G]=h.toStringExplicit(A[0][G],t);return 1<A.length?w.join(A[1]):w.join("")}if(h.isImmutableArray(A[0])){t=h.defaultUndefined(A[2],"");for(G=0;G<A[0].length();G++)w[G]=h.toStringExplicit(A[0].get(G),t);return 1<A.length?w.join(A[1]):w.join("")}for(G=0;G<A.length;G++)w[G]=h.toStringExplicit(A[G]);return w.join("")})};y.reverse=
function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);if(h.isArray(A[0]))return w=A[0].slice(0),w.reverse(),w;if(h.isImmutableArray(A[0]))return w=A[0].toArray().slice(0),w.reverse(),w;throw Error("Invalid Parameter");})};y.replace=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,3,4);w=h.toString(A[0]);t=h.toString(A[1]);var G=h.toString(A[2]);return(4===A.length?h.toBoolean(A[3]):1)?h.multiReplace(w,t,G):w.replace(t,G)})};y.schema=function(z,u){return x(z,u,function(w,t,A){if(A[0]instanceof
f)return(w=A[0].schema())?g.convertObjectToArcadeDictionary(w):null;throw Error("Invalid Parameter");})};y.subtypes=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);if(A[0]instanceof f)return(w=A[0].subtypes())?g.convertObjectToArcadeDictionary(w):null;throw Error("Invalid Parameter");})};y.subtypecode=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);if(A[0]instanceof f){t=A[0].subtypes();if(!t)return null;if(t.subtypeField&&A[0].hasField(t.subtypeField))for(A=A[0].field(t.subtypeField),
w=0,t=t.subtypes;w<t.length;w++){var G=t[w];if(G.code===A)return G.code}return null}throw Error("Invalid Parameter");})};y.subtypename=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);if(A[0]instanceof f){t=A[0].subtypes();if(!t)return"";if(t.subtypeField&&A[0].hasField(t.subtypeField))for(A=A[0].field(t.subtypeField),w=0,t=t.subtypes;w<t.length;w++){var G=t[w];if(G.code===A)return G.name}return""}throw Error("Invalid Parameter");})};y.gdbversion=function(z,u){return x(z,u,function(w,t,
A){h.pcCheck(A,1,1);if(A[0]instanceof f)return A[0].gdbVersion();throw Error("Invalid Parameter");})};y.domain=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,2,3);if(A[0]instanceof f)return(w=A[0].fullDomain(h.toString(A[1]),void 0===A[2]?void 0:h.toNumber(A[2])))&&w.domain?"coded-value"===w.domain.type||"codedValue"===w.domain.type?g.convertObjectToArcadeDictionary({type:"codedValue",name:w.domain.name,dataType:d.layerFieldEsriConstants[w.field.type],codedValues:w.domain.codedValues.map(function(G){return{name:G.name,
code:G.code}})}):g.convertObjectToArcadeDictionary({type:"range",name:w.domain.name,dataType:d.layerFieldEsriConstants[w.field.type],min:w.domain.min,max:w.domain.max}):null;throw Error("Invalid Parameter");})};y.domainname=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,2,4);if(A[0]instanceof f)return A[0].domainValueLookup(h.toString(A[1]),A[2],void 0===A[3]?void 0:h.toNumber(A[3]));throw Error("Invalid Parameter");})};y.domaincode=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,2,
4);if(A[0]instanceof f)return A[0].domainCodeLookup(h.toString(A[1]),A[2],void 0===A[3]?void 0:h.toNumber(A[3]));throw Error("Invalid Parameter");})};y.urlencode=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);if(null===A[0])return"";if(A[0]instanceof g){w="";t=0;for(var G=A[0].keys();t<G.length;t++){var B=G[t],E=A[0].field(B);""!==w&&(w+="\x26");w=null===E?w+(encodeURIComponent(B)+"\x3d"):w+(encodeURIComponent(B)+"\x3d"+encodeURIComponent(E))}return w}return encodeURIComponent(h.toString(A[0]))})};
y.hash=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);w=new e.XXH(0);r(A[0],w,{map:new Map,currentLength:0});return w.digest()})};y.convertdirection=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,3,3);return c.convertDirection(A[0],A[1],A[2])})};y.fromjson=function(z,u){return x(z,u,function(w,t,A){h.pcCheck(A,1,1);if(!1===h.isString(A[0]))throw Error("Invalid Parameter");return g.convertJsonToArcade(JSON.parse(h.toString(A[0])))})};y.expects=function(z,u){return x(z,u,function(w,
t,A){if(1>A.length)throw Error("Function called with wrong number of Parameters");return h.voidOperation})}}})},"esri/arcade/functions/convertdirection":function(){define(["require","exports","../Dictionary","../languageUtils"],function(D,q,a,b){function g(S){if(!1===b.isString(S))throw Error("Invalid Parameter");return S}function f(S,Y){var ia=Math.pow(10,Y);return Math.round(S*ia)/ia}function h(S){S=+S;return isFinite(S)?S-S%1||(0>S?-0:0===S?S:0):S}function d(S){var Y=parseFloat(S.toString().replace(h(S).toString(),
"0"))*((0<S)-(0>S)||+S);return 0>S?{fraction:Y,integer:Math.ceil(S)}:{fraction:Y,integer:Math.floor(S)}}function c(S,Y){switch(S){case 0:return"SHORT"===Y?"N":"North";case 1:return"SHORT"===Y?"E":"East";case 2:return"SHORT"===Y?"S":"South";case 3:return"SHORT"===Y?"W":"West"}}function e(S,Y,ia){for(;S.length<ia;)S=Y+S;return S}function k(S,Y){return S-Math.floor(S/Y)*Y}function l(S){switch(S){case 6:case 1:return 360;case 4:return F;case 5:return 400;case 2:return 1296E3;case 7:return 60;case 8:return 60;
default:throw Error("Unnexpected evaluations");}}function m(S){switch(S.toUpperCase().trim()){case "NORTH":case "NORTHAZIMUTH":case "NORTH AZIMUTH":return 1;case "POLAR":return 2;case "QUADRANT":return 3;case "SOUTH":case "SOUTHAZIMUTH":case "SOUTH AZIMUTH":return 4}throw Error("Unsupported direction type");}function n(S){switch(S.toUpperCase().trim()){case "D":case "DD":case "DECIMALDEGREE":case "DECIMAL DEGREE":case "DEGREE":case "DECIMALDEGREES":case "DECIMAL DEGREES":case "DEGREES":return 1;case "DMS":case "DEGREESMINUTESSECONDS":case "DEGREES MINUTES SECONDS":return 3;
case "R":case "RAD":case "RADS":case "RADIAN":case "RADIANS":return 4;case "G":case "GON":case "GONS":case "GRAD":case "GRADS":case "GRADIAN":case "GRADIANS":return 5}throw Error("Unsupported units");}function p(S,Y,ia){var L=null;switch(Y){case 1:L=q.preciseMultiply(S,3600);break;case 2:L=S;break;case 5:L=q.preciseMultiply(S,3240);break;case 4:L=q.preciseMultiply(S,I);break;default:throw Error("Unnexpected evaluation");}switch(ia){case 1:return q.preciseDivide(L,3600);case 2:return L;case 5:return q.preciseDivide(L,
3240);case 4:return L/I;default:throw Error("Unnexpected evaluation");}}function v(S){switch(S){case 1:case 6:case 3:return 1;case 5:return 5;case 7:return 7;case 4:return 4;case 2:case 8:return 2}}function r(S){switch(b.toNumber(S)){case 1:return{first:0,second:1};case 2:return{first:2,second:1};case 3:return{first:2,second:3};case 4:return{first:0,second:3}}return null}function y(S){switch(S.toUpperCase().trim()){case "N":case "NORTH":return 0;case "E":case "EAST":return 1;case "S":case "SOUTH":return 2;
case "W":case "WEST":return 3}return null}function x(S){S=parseFloat(S);if(b.isNumber(S)){if(isNaN(S))throw Error("Invalid conversion");return S}throw Error("Invalid conversion");}function z(S,Y,ia){var L=3===ia,W=null,ja=null,ra=0,qa=0;qa=0;if(L){if(2>S.length)throw Error("Conversion Error");qa=1;(ja=r(b.toString(S[S.length-1])))?(W=ja.first,ja=ja.second):(ra=1,W=y(b.toString(S[0])),ja=y(b.toString(S[S.length-1])));if(null===W||null===ja)throw Error("Invalid Conversion");}switch(Y){case 1:case 4:case 5:if(0===
S.length)throw Error("Invalid Conversion");return L?X.createFromAngleMeridianAndDirection(R.createFromAngleAndUnits(x(S[ra]),v(Y)),W,ja):X.createFromAngleAndDirection(R.createFromAngleAndUnits(x(S[ra]),v(Y)),ia);case 3:qa=S.length-qa-ra;if(3===qa)return S=R.createFromDegreesMinutesSeconds(x(S[ra]),x(S[ra+1]),x(S[ra+2])),L?X.createFromAngleMeridianAndDirection(S,W,ja):X.createFromAngleAndDirection(S,ia);if(1===qa)return S=x(S[ra]),S=T.number_to_dms(S),S=R.createFromDegreesMinutesSeconds(S.m_degrees,
S.m_minutes,S.m_seconds),L?X.createFromAngleMeridianAndDirection(S,W,ja):X.createFromAngleAndDirection(S,ia)}throw Error("Conversion Error");}function u(S){for(var Y=[" ","-","/","'",'"',"\\","^","\u00b0",M,"\t","\r","\n","*"],ia="",L=0;L<S.length;L++){var W=S.charAt(L);ia=-1!==Y.indexOf(W)?ia+"RRSPLITRRSPLITRR":ia+W}return ia.split("RRSPLITRRSPLITRR").filter(function(ja){return""!==ja})}function w(S,Y,ia){for(var L={padding:0,rounding:0,newpos:Y},W=!1;Y<S.length;){var ja=S[Y];if(ja===ia)W?L.rounding++:
L.padding++,Y++;else if("."===ja)W=!0,Y++;else break}L.newpos=Y-1;return L}Object.defineProperty(q,"__esModule",{value:!0});q.convertDirection=q.preciseDivide=q.preciseMultiply=q.preciseMinus=q.preciseAdd=void 0;var t=function(S){return function(Y,ia,L){L=L||14;return+S(Y,ia).toFixed(L)}},A=function(S,Y){return S+Y},G=function(S,Y){return S-Y},B=function(S,Y){return S*Y},E=function(S,Y){return S/Y};q.preciseAdd=function(S,Y,ia){return t(A)(S,Y,ia)};q.preciseMinus=function(S,Y,ia){return t(G)(S,Y,
ia)};q.preciseMultiply=function(S,Y,ia){return t(B)(S,Y,ia)};q.preciseDivide=function(S,Y,ia){return t(E)(S,Y,ia)};var F=2*Math.PI,I=648E3/Math.PI,M=String.fromCharCode(7501),P;(function(S){S[S.north=0]="north";S[S.east=1]="east";S[S.south=2]="south";S[S.west=3]="west"})(P||(P={}));var aa;(function(S){S[S.decimal_degrees=1]="decimal_degrees";S[S.seconds=2]="seconds";S[S.degrees_minutes_seconds=3]="degrees_minutes_seconds";S[S.radians=4]="radians";S[S.gradians=5]="gradians";S[S.truncated_degrees=6]=
"truncated_degrees";S[S.fractional_degree_minutes=7]="fractional_degree_minutes";S[S.fractional_minute_seconds=8]="fractional_minute_seconds"})(aa||(aa={}));var ca;(function(S){S[S.north_azimuth=1]="north_azimuth";S[S.polar=2]="polar";S[S.quadrant=3]="quadrant";S[S.south_azimuth=4]="south_azimuth"})(ca||(ca={}));var ea;(function(S){S[S.meridian=0]="meridian";S[S.direction=1]="direction"})(ea||(ea={}));var T=function(){function S(Y,ia,L){this.m_degrees=Y;this.m_minutes=ia;this.m_seconds=L}S.prototype.get_field=
function(Y){switch(Y){case 1:case 6:return this.m_degrees;case 7:return this.m_minutes;case 2:case 8:return this.m_seconds;default:throw Error("Unnexpected evaluation");}};S.seconds_to_DMS=function(Y){var ia=d(Y).fraction;Y=d(Y).integer;var L=Math.floor(Y/3600);Y-=3600*L;var W=Math.floor(Y/60);return new S(L,W,Y-60*W+ia)};S.number_to_dms=function(Y){var ia=d(Y).fraction;Y=d(Y).integer;var L=q.preciseMultiply(d(100*ia).fraction,100);ia=d(100*ia).integer;return new S(Y,ia,L)};S.prototype.format=function(Y,
ia){var L=f(this.m_seconds,ia),W=this.m_minutes,ja=this.m_degrees;if(2===Y||8===Y)60<=L&&(L-=60,++W),60<=W&&(W=0,++ja),360<=ja&&(ja=0);else if(7===Y)L=0,W=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,ja=this.m_degrees,60<=W&&(W=0,++ja),360<=ja&&(ja=0);else if(1===Y||6===Y)L=q.preciseDivide(this.m_seconds,3600),W=q.preciseDivide(this.m_minutes,60),ja=Math.round(this.m_degrees+W+L),L=W=0;return new S(ja,W,L)};S.DMS_to_seconds=function(Y,ia,L){return 3600*Y+60*ia+L};return S}(),la=function(){function S(Y,
ia,L){this.meridian=Y;this.angle=ia;this.direction=L}S.prototype.fetch_azimuth=function(Y){return 0===Y?this.meridian:this.direction};return S}(),X=function(){function S(Y){this.m_angle=Y}S.createFromAngleAndDirection=function(Y,ia){return new S(new R(S.convertDirectionFormat(Y.extract_angular_units(2),ia,1)))};S.prototype.getAngle=function(Y){var ia=this.m_angle.extract_angular_units(2);switch(Y){case 1:case 4:case 2:return Y=new R(S.convertDirectionFormat(ia,1,Y));case 3:return Y=S.seconds_north_azimuth_to_quadrant(ia),
Y=new R(Y.angle)}};S.prototype.getMeridian=function(Y){var ia=this.m_angle.extract_angular_units(2);switch(Y){case 1:return 0;case 4:return 2;case 2:return 1;case 3:return S.seconds_north_azimuth_to_quadrant(ia).meridian}};S.prototype.getDirection=function(Y){var ia=this.m_angle.extract_angular_units(2);switch(Y){case 1:return 1;case 4:return 3;case 2:return 0;case 3:return S.seconds_north_azimuth_to_quadrant(ia).direction}};S.seconds_north_azimuth_to_quadrant=function(Y){var ia=324E3>=Y||972E3<=
Y?0:2;return new la(ia,0===ia?Math.min(1296E3-Y,Y):Math.abs(Y-648E3),648E3<Y?3:1)};S.createFromAngleMeridianAndDirection=function(Y,ia,L){return new S(new R(S.secondsQuadrantToNorthAzimuth(Y.extract_angular_units(2),ia,L)))};S.secondsQuadrantToNorthAzimuth=function(Y,ia,L){return 0===ia?1===L?Y:1296E3-Y:1===L?648E3-Y:648E3+Y};S.convertDirectionFormat=function(Y,ia,L){var W=0;switch(ia){case 1:W=Y;break;case 2:W=324E3-Y;break;case 3:throw Error("Unnexpected evaluation");case 4:W=Y+648E3}Y=0;switch(L){case 1:Y=
W;break;case 2:Y=324E3-W;break;case 3:throw Error("Unnexpected evaluation");case 4:Y=W-648E3}Y%=1296E3;return 0>Y?1296E3+Y:Y};return S}(),R=function(){function S(Y){this.m_seconds=Y}S.createFromAngleAndUnits=function(Y,ia){return new S(p(Y,ia,2))};S.prototype.extract_angular_units=function(Y){return p(this.m_seconds,2,v(Y))};S.createFromDegreesMinutesSeconds=function(Y,ia,L){return new S(q.preciseAdd(q.preciseAdd(q.preciseMultiply(Y,3600),q.preciseMultiply(ia,60)),L))};return S}(),fa=function(){function S(Y,
ia,L,W){this.m_view=Y;this.m_angle=ia;this.m_merdian=L;this.m_direction=W;this.m_formatted_dms=this.m_dms=null}S.createFromStringAndBearing=function(Y,ia,L){return new S(Y,ia.getAngle(L),ia.getMeridian(L),ia.getDirection(L))};S.prototype.fetch_angle=function(){return this.m_angle};S.prototype.fetch_meridian=function(){return this.m_merdian};S.prototype.fetch_direction=function(){return this.m_direction};S.prototype.fetch_m_view=function(){return this.m_view};S.prototype.fetch_dms=function(){null===
this.m_dms&&this.calculate_dms();return this.m_dms};S.prototype.fetch_formatted_dms=function(){null===this.m_formatted_dms&&this.calculate_dms();return this.m_formatted_dms};S.prototype.calculate_dms=function(){var Y=null,ia=6,L=0;for(Y=0;Y<this.m_view.length;Y++){var W=this.m_view[Y];switch(W){case "m":Y=w(this.m_view,Y,W);ia=6===ia?7:ia;Y=Y.newpos;continue;case "s":Y=w(this.m_view,Y,W),ia=8,L=L<Y.rounding?Y.rounding:L,Y=Y.newpos}}this.m_dms=T.seconds_to_DMS(this.m_angle.extract_angular_units(2));
this.m_formatted_dms=T.seconds_to_DMS(this.m_angle.extract_angular_units(2)).format(ia,L)};return S}();q.convertDirection=function(S,Y,ia){if(!(Y instanceof a))throw Error("Invalid Parameter");if(!1===Y.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");if(!1===Y.hasField("angleType"))throw Error("Invalid Parameter - Missing directionType");var L=m(g(Y.field("directiontype")));Y=n(g(Y.field("angletype")));if(b.isNumber(S)){S=b.toNumber(S);if(3===L)throw Error("Conversion error");
3===Y?(S=T.number_to_dms(S),Y=X.createFromAngleAndDirection(R.createFromDegreesMinutesSeconds(S.m_degrees,S.m_minutes,S.m_seconds),L)):Y=X.createFromAngleAndDirection(R.createFromAngleAndUnits(S,v(Y)),L)}else if(b.isString(S))Y=z(u(S),Y,L);else if(b.isArray(S))Y=z(S,Y,L);else if(b.isImmutableArray(S))Y=z(S.toArray(),Y,L);else throw Error("Conversion Error");if(!(ia instanceof a))throw Error("Invalid Parameter");if(!1===ia.hasField("directionType"))throw Error("Invalid Parameter - Missing directionType");
if(!1===ia.hasField("outputType"))throw Error("Invalid Parameter - Missing directionType");L=m(g(ia.field("directiontype")));S=ia.hasField("angleType")?n(g(ia.field("angletype"))):null;var W=g(ia.field("outputType")).toUpperCase().trim();if(!L||!W)throw Error("Conversion error");if(!(S||"TEXT"===W&&ia.hasField("format")))throw Error("Invalid unit");switch(W){case "VALUE":if(3===L||3===S)return ia=Y,Y=ia.getAngle(L),3===L&&3===S?(S=T.seconds_to_DMS(Y.extract_angular_units(2)),L=[c(ia.getMeridian(L),
"SHORT"),S.m_degrees,S.m_minutes,S.m_seconds,c(ia.getDirection(L),"SHORT")]):3===S?(S=T.seconds_to_DMS(Y.extract_angular_units(2)),L=[S.m_degrees,S.m_minutes,S.m_seconds]):L=3===L?[c(ia.getMeridian(L),"SHORT"),Y.extract_angular_units(S),c(ia.getDirection(L),"SHORT")]:[Y.extract_angular_units(S)],L;ia=Y;if((Y=v(S))&&3!==S)L=ia.getAngle(L).extract_angular_units(Y);else throw Error("Conversion Error");return L;case "TEXT":W="";ia.hasField("format")&&(W=b.toString(ia.field("format")));if(null===W||""===
W){ia="";switch(S){case 1:ia=3===L?"DD.DD\u00b0":"DDD.DD\u00b0";break;case 3:ia=3===L?"dd\u00b0 mm' ss\"":"ddd\u00b0 mm' ss.ss\"";break;case 4:ia="R.RR";break;case 5:ia="GGG.GG"+M;break;default:throw Error("Conversion error");}3===L&&(ia="p "+ia+" b");W=ia}ia=Y;S=W;var ja="",ra=null,qa=null;Y=fa.createFromStringAndBearing(S,ia,L);W={D:1,d:6,m:7,s:8,R:4,G:5};for(qa=0;qa<S.length;qa++){var wa=S[qa];switch(wa){case "[":ra=S;wa={escaped:"",newpos:qa};for(qa++;qa<ra.length;){var sa=ra[qa];qa++;if("]"===
sa)break;wa.escaped+=sa}wa.newpos=qa-1;ra=wa;ja+=ra.escaped;qa=ra.newpos;continue;case "D":case "d":case "m":case "s":case "R":case "G":ra=w(S,qa,wa);qa=ia.getAngle(L);a:{wa=W[wa];sa=ra.padding;var V=ra.rounding,U=Y,da=null;switch(wa){case 1:case 4:case 5:da=k(f(qa.extract_angular_units(wa),V),l(wa));qa=e(da.toFixed(V),"0",sa+V+(0<V?1:0));break a;case 6:case 7:da=k(U.fetch_formatted_dms().get_field(wa),l(wa));qa=e(da.toFixed(V),"0",sa+V+(0<V?1:0));break a;case 8:da=k(f(U.fetch_dms().get_field(wa),
V),l(wa));qa=e(da.toFixed(V),"0",sa+V+(0<V?1:0));break a;default:throw Error("Unnexepected evaluation");}}ja+=qa;qa=ra.newpos;continue;case "P":case "p":ja+=c(Y.fetch_meridian(),"p"===wa?"SHORT":"LONG");continue;case "B":case "b":ja+=c(Y.fetch_direction(),"b"===wa?"SHORT":"LONG");continue;default:ja+=wa}}return ja;default:throw Error("Invalid Parameter");}}})},"esri/arcade/functions/hash":function(){define(["require","exports"],function(D,q){function a(g){for(var f=[],h=0,d=g.length;h<d;h++){var c=
g.charCodeAt(h);128>c?f.push(c):2048>c?f.push(192|c>>6,128|c&63):55296>c||57344<=c?f.push(224|c>>12,128|c>>6&63,128|c&63):(h++,c=65536+((c&1023)<<10|g.charCodeAt(h)&1023),f.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return new Uint8Array(f)}Object.defineProperty(q,"__esModule",{value:!0});q.XXH=void 0;var b=function(){function g(f){this.seed=f;this.totallen=0;this.bufs=[];this.init()}g.prototype.init=function(){this.bufs=[];this.totallen=0;return this};g.prototype.updateFloatArray=function(f){for(var h=
[],d=0;d<f.length;d++){var c=f[d];isNaN(c)?h.push("NaN"):Infinity===c?h.push("Infinity"):-Infinity===c?h.push("-Infinity"):0===c?h.push("0"):h.push(c.toString(16))}this.update(a(h.join("")))};g.prototype.updateIntArray=function(f){f=Int32Array.from(f);this.update(new Uint8Array(f.buffer))};g.prototype.updateUint8Array=function(f){this.update(Uint8Array.from(f))};g.prototype.updateWithString=function(f){return this.update(a(f))};g.prototype.update=function(f){this.bufs.push(f);this.totallen+=f.length;
return this};g.prototype.digest=function(){for(var f=new Uint8Array(this.totallen),h=0,d=0,c=this.bufs;d<c.length;d++){var e=c[d];f.set(e,h);h+=e.length}this.init();return this.xxHash32(f,this.seed)};g.prototype.xxHash32=function(f,h){void 0===h&&(h=0);var d=h+374761393&4294967295,c=0;if(16<=f.length){d=[h+2654435761+2246822519&4294967295,h+2246822519&4294967295,h+0&4294967295,h-2654435761&4294967295];var e=f.length-16,k=0;for(c=0;(c&4294967280)<=e;c+=4){var l=c,m=f[l+0]+(f[l+1]<<8);l=f[l+2]+(f[l+
3]<<8);m=d[k]+(2246822519*m+(2246822519*l<<16))&4294967295;m=m<<13|m>>>19;d[k]=2654435761*(m&65535)+(2654435761*(m>>>16)<<16)&4294967295;k=k+1&3}d=(d[0]<<1|d[0]>>>31)+(d[1]<<7|d[1]>>>25)+(d[2]<<12|d[2]>>>20)+(d[3]<<18|d[3]>>>14)&4294967295}d=d+f.length&4294967295;for(k=f.length-4;c<=k;c+=4)l=c,m=f[l+0]+(f[l+1]<<8),l=f[l+2]+(f[l+3]<<8),d=d+(3266489917*m+(3266489917*l<<16))&4294967295,d=d<<17|d>>>15,d=668265263*(d&65535)+(668265263*(d>>>16)<<16)&4294967295;for(;c<f.length;++c)k=f[c],d+=374761393*k,
d=d<<11|d>>>21,d=2654435761*(d&65535)+(2654435761*(d>>>16)<<16)&4294967295;d^=d>>>15;d=(2246822519*(d&65535)&4294967295)+(2246822519*(d>>>16)<<16);d^=d>>>13;d=(3266489917*(d&65535)&4294967295)+(3266489917*(d>>>16)<<16);d^=d>>>16;return 0>d?d+4294967296:d};return g}();q.XXH=b})},"esri/arcade/arcadeRuntime":function(){define("require exports ./ArcadePortal ./Attachment ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/array ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../SpatialReference".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y,x,z,u,w,t,A,G){function B(V,U){for(var da=[],na=0;na<U.arguments.length;na++)da.push(F(V,U.arguments[na]));return da}function E(V,U,da){try{return da(V,U,B(V,U))}catch(na){throw na;}}function F(V,U){try{switch(U.type){case "EmptyStatement":return e.voidOperation;case "VariableDeclarator":var da=null===U.init?null:F(V,U.init);da===e.voidOperation&&(da=null);if("Identifier"!==U.id.type)throw Error("Can only assign a regular variable");var na=U.id.name.toLowerCase();
null!==V.localScope?V.localScope[na]={value:da,valueset:!0,node:U.init}:V.globalScope[na]={value:da,valueset:!0,node:U.init};return e.voidOperation;case "VariableDeclaration":for(var ka=0;ka<U.declarations.length;ka++)F(V,U.declarations[ka]);return e.voidOperation;case "BlockStatement":a:{var xa=e.voidOperation;for(ka=0;ka<U.body.length;ka++)if(xa=F(V,U.body[ka]),xa instanceof e.ReturnResult||xa===e.breakResult||xa===e.continueResult){var O=xa;break a}O=xa}return O;case "FunctionDeclaration":var Q=
U.id.name.toLowerCase();V.globalScope[Q]={valueset:!0,node:null,value:new h(U,V)};return e.voidOperation;case "ReturnStatement":if(null===U.argument)var ba=new e.ReturnResult(e.voidOperation);else{var ha=F(V,U.argument);ba=new e.ReturnResult(ha)}return ba;case "IfStatement":if("AssignmentExpression"===U.test.type||"UpdateExpression"===U.test.type)throw Error(k.nodeErrorMessage(U.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var pa=F(V,U.test);if(!0===pa)var za=F(V,U.consequent);else if(!1===
pa)za=null!==U.alternate?F(V,U.alternate):e.voidOperation;else throw Error(k.nodeErrorMessage(U,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));return za;case "ExpressionStatement":if("AssignmentExpression"===U.expression.type||"UpdateExpression"===U.expression.type)var Fa=F(V,U.expression);else{var Ha=F(V,U.expression);Fa=Ha===e.voidOperation?e.voidOperation:new e.ImplicitResult(Ha)}return Fa;case "AssignmentExpression":var Ba=F(V,U.right);ka=null;var va="";if("MemberExpression"===U.left.type){ka=
F(V,U.left.object);!0===U.left.computed?va=F(V,U.left.property):"Identifier"===U.left.property.type&&(va=U.left.property.name);if(e.isArray(ka))if(e.isNumber(va)){0>va&&(va=ka.length+va);if(0>va||va>ka.length)throw Error("Assignment outside of array bounds");if(va===ka.length&&"\x3d"!==U.operator)throw Error("Invalid Parameter");ka[va]=M(Ba,U.operator,ka[va],U)}else throw Error("Invalid Parameter");else if(ka instanceof g){if(!1===e.isString(va))throw Error("Dictionary accessor must be a string");
if(!0===ka.hasField(va))ka.setField(va,M(Ba,U.operator,ka.field(va),U));else{if("\x3d"!==U.operator)throw Error("Invalid Parameter");ka.setField(va,M(Ba,U.operator,null,U))}}else if(ka instanceof f){if(!1===e.isString(va))throw Error("Feature accessor must be a string");if(!0===ka.hasField(va))ka.setField(va,M(Ba,U.operator,ka.field(va),U));else{if("\x3d"!==U.operator)throw Error("Invalid Parameter");ka.setField(va,M(Ba,U.operator,null,U))}}else{if(e.isImmutableArray(ka))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}var Ca=e.voidOperation}else if(ka=U.left.name.toLowerCase(),null!==V.localScope&&void 0!==V.localScope[ka])V.localScope[ka]={value:M(Ba,U.operator,V.localScope[ka].value,U),valueset:!0,node:U.right},Ca=e.voidOperation;else if(void 0!==V.globalScope[ka])V.globalScope[ka]={value:M(Ba,U.operator,V.globalScope[ka].value,U),valueset:!0,node:U.right},Ca=e.voidOperation;else throw Error("Variable not recognised");return Ca;case "UpdateExpression":ka=null;va="";if("MemberExpression"===
U.argument.type){ka=F(V,U.argument.object);!0===U.argument.computed?va=F(V,U.argument.property):"Identifier"===U.argument.property.type&&(va=U.argument.property.name);if(e.isArray(ka))if(e.isNumber(va)){0>va&&(va=ka.length+va);if(0>va||va>=ka.length)throw Error("Assignment outside of array bounds");var Aa=e.toNumber(ka[va]);ka[va]="++"===U.operator?Aa+1:Aa-1}else throw Error("Invalid Parameter");else if(ka instanceof g){if(!1===e.isString(va))throw Error("Dictionary accessor must be a string");if(!0===
ka.hasField(va))Aa=e.toNumber(ka.field(va)),ka.setField(va,"++"===U.operator?Aa+1:Aa-1);else throw Error("Invalid Parameter");}else if(ka instanceof f){if(!1===e.isString(va))throw Error("Feature accessor must be a string");if(!0===ka.hasField(va))Aa=e.toNumber(ka.field(va)),ka.setField(va,"++"===U.operator?Aa+1:Aa-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(ka))throw Error("Array is Immutable");throw Error("Invalid Parameter");}var Na=!1===U.prefix?Aa:"++"===U.operator?Aa+
1:Aa-1}else{ka="Identifier"===U.argument.type?U.argument.name.toLowerCase():"";if(!ka)throw Error("Invalid identifier");if(null!==V.localScope&&void 0!==V.localScope[ka])Aa=e.toNumber(V.localScope[ka].value),V.localScope[ka]={value:"++"===U.operator?Aa+1:Aa-1,valueset:!0,node:U},Na=!1===U.prefix?Aa:"++"===U.operator?Aa+1:Aa-1;else if(void 0!==V.globalScope[ka])Aa=e.toNumber(V.globalScope[ka].value),V.globalScope[ka]={value:"++"===U.operator?Aa+1:Aa-1,valueset:!0,node:U},Na=!1===U.prefix?Aa:"++"===
U.operator?Aa+1:Aa-1;else throw Error("Variable not recognised");}return Na;case "BreakStatement":return e.breakResult;case "ContinueStatement":return e.continueResult;case "TemplateElement":return U.value?U.value.cooked:"";case "TemplateLiteral":var Ea="",Sa=0;Ca=0;for(ka=U.quasis;Ca<ka.length;Ca++)if(va=ka[Ca],Ea+=va.value?va.value.cooked:"",!1===va.tail){var Ia=U.expressions[Sa]?e.toString(F(V,U.expressions[Sa])):"";Ea+=Ia;Sa++}return Ea;case "ForStatement":null!==U.init&&F(V,U.init);Sa={testResult:!0,
lastAction:e.voidOperation};do b:{ka=V;va=U;Ia=Sa;if(null!==va.test){Ia.testResult=F(ka,va.test);if(!1===Ia.testResult)break b;if(!0!==Ia.testResult)throw Error(k.nodeErrorMessage(va,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}Ia.lastAction=F(ka,va.body);Ia.lastAction===e.breakResult?Ia.testResult=!1:Ia.lastAction instanceof e.ReturnResult?Ia.testResult=!1:null!==va.update&&F(ka,va.update)}while(!0===Sa.testResult);Ea=Sa.lastAction instanceof e.ReturnResult?Sa.lastAction:e.voidOperation;return Ea;
case "ForInStatement":return I(V,U);case "Identifier":return la(V,U);case "MemberExpression":return aa(V,U);case "Literal":return U.value;case "CallExpression":return X(V,U);case "UnaryExpression":return ca(V,U);case "BinaryExpression":return ea(V,U);case "LogicalExpression":return T(V,U);case "ArrayExpression":try{for(ka=[],va=0;va<U.elements.length;va++){var Xa=F(V,U.elements[va]);if(e.isFunctionParameter(Xa))throw Error(k.nodeErrorMessage(U,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));Xa===e.voidOperation?
ka.push(null):ka.push(Xa)}}catch(Ta){throw Ta;}return ka;case "ObjectExpression":ka={};for(va=0;va<U.properties.length;va++){var Ja=F(V,U.properties[va]);if(e.isFunctionParameter(Ja.value))throw Error("Illegal Argument");if(!1===e.isString(Ja.key))throw Error("Illegal Argument");ka[Ja.key.toString()]=Ja.value===e.voidOperation?null:Ja.value}var Oa=new g(ka);Oa.immutable=!1;return Oa;case "Property":return{key:"Identifier"===U.key.type?U.key.name:F(V,U.key),value:F(V,U.value)};default:throw Error(k.nodeErrorMessage(U,
"RUNTIME","UNREOGNISED"));}}catch(Ta){throw Ta;}}function I(V,U){var da=F(V,U.right);"VariableDeclaration"===U.left.type&&F(V,U.left);var na=null,ka="";if("VariableDeclaration"===U.left.type){var xa=U.left.declarations[0].id;"Identifier"===xa.type&&(ka=xa.name)}else"Identifier"===U.left.type&&(ka=U.left.name);if(!ka)throw Error(k.nodeErrorMessage(U,"RUNTIME","INVALIDVARIABLE"));ka=ka.toLowerCase();null!==V.localScope&&void 0!==V.localScope[ka]&&(na=V.localScope[ka]);null===na&&void 0!==V.globalScope[ka]&&
(na=V.globalScope[ka]);if(null===na)throw Error(k.nodeErrorMessage(U,"RUNTIME","VARIABLENOTDECLARED"));if(e.isArray(da)||e.isString(da)){da=da.length;for(xa=0;xa<da;xa++){na.value=xa;ka=F(V,U.body);if(ka===e.breakResult)break;if(ka instanceof e.ReturnResult)return ka}return e.voidOperation}if(e.isImmutableArray(da)){for(xa=0;xa<da.length();xa++){na.value=xa;ka=F(V,U.body);if(ka===e.breakResult)break;if(ka instanceof e.ReturnResult)return ka}return e.voidOperation}if(da instanceof g||da instanceof
f)for(da=da.keys(),xa=0;xa<da.length;xa++){na.value=da[xa];ka=F(V,U.body);if(ka===e.breakResult)break;if(ka instanceof e.ReturnResult)return ka}else return e.voidOperation}function M(V,U,da,na){switch(U){case "\x3d":return V===e.voidOperation?null:V;case "/\x3d":return e.toNumber(da)/e.toNumber(V);case "*\x3d":return e.toNumber(da)*e.toNumber(V);case "-\x3d":return e.toNumber(da)-e.toNumber(V);case "+\x3d":return e.isString(da)||e.isString(V)?e.toString(da)+e.toString(V):e.toNumber(da)+e.toNumber(V);
case "%\x3d":return e.toNumber(da)%e.toNumber(V);default:throw Error(k.nodeErrorMessage(na,"RUNTIME","OPERATORNOTRECOGNISED"));}}function P(V,U,da){U=U.toLowerCase();switch(U){case "hasz":return V=V.hasZ,void 0===V?!1:V;case "hasm":return V=V.hasM,void 0===V?!1:V;case "spatialreference":return U=V.spatialReference._arcadeCacheId,void 0===U&&(da=!0,Object.freeze&&Object.isFrozen(V.spatialReference)&&(da=!1),da&&(ra++,U=V.spatialReference._arcadeCacheId=ra)),V=new g({wkt:V.spatialReference.wkt,wkid:V.spatialReference.wkid}),
void 0!==U&&(V._arcadeCacheId="SPREF"+U.toString()),V}switch(V.type){case "extent":switch(U){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return V=V[U],void 0!==V?V:null;case "type":return"Extent"}break;case "polygon":switch(U){case "rings":return U=V.getCacheValue("_arcadeCacheId"),void 0===U&&(ra++,U=ra,V.setCacheValue("_arcadeCacheId",U)),V=new d(V.rings,V.spatialReference,!0===V.hasZ,!0===V.hasM,U);case "type":return"Polygon"}break;case "point":switch(U){case "x":case "y":case "z":case "m":return void 0!==
V[U]?V[U]:null;case "type":return"Point"}break;case "polyline":switch(U){case "paths":return U=V.getCacheValue("_arcadeCacheId"),void 0===U&&(ra++,U=ra,V.setCacheValue("_arcadeCacheId",U)),V=new d(V.paths,V.spatialReference,!0===V.hasZ,!0===V.hasM,U);case "type":return"Polyline"}break;case "multipoint":switch(U){case "points":return U=V.getCacheValue("_arcadeCacheId"),void 0===U&&(ra++,U=ra,V.setCacheValue("_arcadeCacheId",U)),V=new c(V.points,V.spatialReference,!0===V.hasZ,!0===V.hasM,U,1);case "type":return"Multipoint"}}throw Error(k.nodeErrorMessage(da,
"RUNTIME","PROPERTYNOTFOUND"));}function aa(V,U){try{var da=F(V,U.object);if(null===da)throw Error(k.nodeErrorMessage(U,"RUNTIME","NOTFOUND"));if(!1===U.computed){if("Identifier"===U.property.type){if(da instanceof g||da instanceof f)return da.field(U.property.name);if(da instanceof z)return P(da,U.property.name,U)}throw Error(k.nodeErrorMessage(U,"RUNTIME","INVALIDTYPE"));}var na=F(V,U.property);if(da instanceof g||da instanceof f){if(e.isString(na))return da.field(na);throw Error(k.nodeErrorMessage(U,
"RUNTIME","INVALIDTYPE"));}if(da instanceof z){if(e.isString(na))return P(da,na,U);throw Error(k.nodeErrorMessage(U,"RUNTIME","INVALIDTYPE"));}if(e.isArray(da)){if(e.isNumber(na)&&isFinite(na)&&Math.floor(na)===na){0>na&&(na=da.length+na);if(na>=da.length||0>na)throw Error(k.nodeErrorMessage(U,"RUNTIME","OUTOFBOUNDS"));return da[na]}throw Error(k.nodeErrorMessage(U,"RUNTIME","INVALIDTYPE"));}if(e.isString(da)){if(e.isNumber(na)&&isFinite(na)&&Math.floor(na)===na){0>na&&(na=da.length+na);if(na>=da.length||
0>na)throw Error(k.nodeErrorMessage(U,"RUNTIME","OUTOFBOUNDS"));return da[na]}throw Error(k.nodeErrorMessage(U,"RUNTIME","INVALIDTYPE"));}if(e.isImmutableArray(da)&&e.isNumber(na)&&isFinite(na)&&Math.floor(na)===na){0>na&&(na=da.length()+na);if(na>=da.length()||0>na)throw Error(k.nodeErrorMessage(U,"RUNTIME","OUTOFBOUNDS"));return da.get(na)}throw Error(k.nodeErrorMessage(U,"RUNTIME","INVALIDTYPE"));}catch(ka){throw ka;}}function ca(V,U){try{var da=F(V,U.argument);if(e.isBoolean(da)){if("!"===U.operator)return!da;
if("-"===U.operator)return-1*e.toNumber(da);if("+"===U.operator)return 1*e.toNumber(da);if("~"===U.operator)return~e.toNumber(da);throw Error(k.nodeErrorMessage(U,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("~"===U.operator)return~e.toNumber(da);if("-"===U.operator)return-1*e.toNumber(da);if("+"===U.operator)return 1*e.toNumber(da);throw Error(k.nodeErrorMessage(U,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(na){throw na;}}function ea(V,U){try{var da=[F(V,U.left),F(V,U.right)],na=da[0],ka=da[1];
switch(U.operator){case "|":case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":case "^":case "\x26":return e.binaryOperator(e.toNumber(na),e.toNumber(ka),U.operator);case "\x3d\x3d":return e.equalityTest(na,ka);case "!\x3d":return!e.equalityTest(na,ka);case "\x3c":return e.greaterThanLessThan(na,ka,U.operator);case "\x3e":return e.greaterThanLessThan(na,ka,U.operator);case "\x3c\x3d":return e.greaterThanLessThan(na,ka,U.operator);case "\x3e\x3d":return e.greaterThanLessThan(na,ka,U.operator);case "+":return e.isString(na)||
e.isString(ka)?e.toString(na)+e.toString(ka):e.toNumber(na)+e.toNumber(ka);case "-":return e.toNumber(na)-e.toNumber(ka);case "*":return e.toNumber(na)*e.toNumber(ka);case "/":return e.toNumber(na)/e.toNumber(ka);case "%":return e.toNumber(na)%e.toNumber(ka);default:throw Error(k.nodeErrorMessage(U,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(xa){throw xa;}}function T(V,U){try{if("AssignmentExpression"===U.left.type||"UpdateExpression"===U.left.type)throw Error(k.nodeErrorMessage(U.left,"RUNTIME",
"CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===U.right.type||"UpdateExpression"===U.right.type)throw Error(k.nodeErrorMessage(U.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var da=F(V,U.left);if(e.isBoolean(da))switch(U.operator){case "||":if(!0===da)return da;var na=F(V,U.right);if(e.isBoolean(na))return na;throw Error(k.nodeErrorMessage(U,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===da)return da;na=F(V,U.right);if(e.isBoolean(na))return na;throw Error(k.nodeErrorMessage(U,
"RUNTIME","ONLYORORAND"));default:throw Error(k.nodeErrorMessage(U,"RUNTIME","ONLYORORAND"));}throw Error(k.nodeErrorMessage(U,"RUNTIME","ONLYBOOLEAN"));}catch(ka){throw ka;}}function la(V,U){try{var da=U.name.toLowerCase();if(null!==V.localScope&&void 0!==V.localScope[da]){var na=V.localScope[da];if(!0===na.valueset)return na.value;na.value=F(V,na.node);na.valueset=!0;return na.value}if(void 0!==V.globalScope[da]){na=V.globalScope[da];if(!0===na.valueset)return na.value;na.value=F(V,na.node);na.valueset=
!0;return na.value}throw Error(k.nodeErrorMessage(U,"RUNTIME","VARIABLENOTFOUND"));}catch(ka){throw ka;}}function X(V,U){try{if("Identifier"!==U.callee.type)throw Error(k.nodeErrorMessage(U,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==V.localScope&&void 0!==V.localScope[U.callee.name.toLowerCase()]){var da=V.localScope[U.callee.name.toLowerCase()];if(da.value instanceof e.NativeFunction)return da.value.fn(V,U);if(da.value instanceof h)return L(V,U,da.value.definition);throw Error(k.nodeErrorMessage(U,
"RUNTIME","NOTAFUNCTION"));}if(void 0!==V.globalScope[U.callee.name.toLowerCase()]){da=V.globalScope[U.callee.name.toLowerCase()];if(da.value instanceof e.NativeFunction)return da.value.fn(V,U);if(da.value instanceof h)return L(V,U,da.value.definition);throw Error(k.nodeErrorMessage(U,"RUNTIME","NOTAFUNCTION"));}throw Error(k.nodeErrorMessage(U,"RUNTIME","NOTFOUND"));}catch(na){throw na;}}function R(V){return null==V?"":e.isArray(V)||e.isImmutableArray(V)?"Array":e.isDate(V)?"Date":e.isString(V)?
"String":e.isBoolean(V)?"Boolean":e.isNumber(V)?"Number":V instanceof b?"Attachment":V instanceof a?"Portal":V instanceof g?"Dictionary":V instanceof f?"Feature":V instanceof w?"Point":V instanceof t?"Polygon":V instanceof A?"Polyline":V instanceof u?"Multipoint":V instanceof x?"Extent":e.isFunctionParameter(V)?"Function":e.isFeatureSet(V)?"FeatureSet":e.isFeatureSetCollection(V)?"FeatureSetCollection":V===e.voidOperation?"":"number"===typeof V&&isNaN(V)?"Number":"Unrecognised Type"}function fa(V,
U,da,na){try{var ka=F(V,U.arguments[da]);if(e.equalityTest(ka,na))return F(V,U.arguments[da+1]);var xa=U.arguments.length-da;return 1===xa?F(V,U.arguments[da]):2===xa?null:3===xa?F(V,U.arguments[da+2]):fa(V,U,da+2,na)}catch(O){throw O;}}function S(V,U,da,na){try{if(!0===na)return F(V,U.arguments[da+1]);if(3===U.arguments.length-da)return F(V,U.arguments[da+2]);var ka=F(V,U.arguments[da+2]);if(!1===e.isBoolean(ka))throw Error("WHEN needs boolean test conditions");return S(V,U,da+2,ka)}catch(xa){throw xa;
}}function Y(V,U){var da=V.length,na=Math.floor(da/2);if(0===da)return[];if(1===da)return[V[0]];var ka=Y(V.slice(0,na),U);da=Y(V.slice(na,da),U);for(na=[];0<ka.length||0<da.length;)if(0<ka.length&&0<da.length){var xa=U(ka[0],da[0]);isNaN(xa)&&(xa=0);0>=xa?(na.push(ka[0]),ka=ka.slice(1)):(na.push(da[0]),da=da.slice(1))}else 0<ka.length?(na.push(ka[0]),ka=ka.slice(1)):0<da.length&&(na.push(da[0]),da=da.slice(1));return na}function ia(V,U,da){try{var na=V.body;if(da.length!==V.params.length)throw Error("Invalid Parameter calls to function.");
for(var ka=0;ka<da.length;ka++)U.localScope[V.params[ka].name.toLowerCase()]={value:da[ka],valueset:!0,node:null};var xa=F(U,na);if(xa instanceof e.ReturnResult)return xa.value;if(xa===e.breakResult)throw Error("Cannot Break from a Function");if(xa===e.continueResult)throw Error("Cannot Continue from a Function");return xa instanceof e.ImplicitResult?xa.value:xa}catch(O){throw O;}}function L(V,U,da){return E(V,U,function(na,ka,xa){na={spatialReference:V.spatialReference,globalScope:V.globalScope,
depthCounter:V.depthCounter+1,console:V.console,lrucache:V.lrucache,interceptor:V.interceptor,localScope:{}};if(64<na.depthCounter)throw Error("Exceeded maximum function depth");return ia(da,na,xa)})}function W(V){return function(){var U={spatialReference:V.context.spatialReference,console:V.context.console,lrucache:V.context.lrucache,interceptor:V.context.interceptor,localScope:{},depthCounter:V.context.depthCounter+1,globalScope:V.context.globalScope};if(64<U.depthCounter)throw Error("Exceeded maximum function depth");
return ia(V.definition,U,arguments)}}function ja(V){}Object.defineProperty(q,"__esModule",{value:!0});q.findFunctionCalls=q.referencesFunction=q.referencesMember=q.validateScript=q.extractExpectedFieldLiterals=q.extractFieldLiterals=q.executeScript=q.extend=q.functionHelper=void 0;var ra=0,qa={};l.registerFunctions(qa,E);m.registerFunctions(qa,E);y.registerFunctions(qa,E);v.registerFunctions(qa,E);n.registerFunctions(qa,E);r.registerFunctions(qa,E);p.registerFunctions(qa,E);qa["typeof"]=function(V,
U){return E(V,U,function(da,na,ka){e.pcCheck(ka,1,1);da=R(ka[0]);if("Unrecognised Type"===da)throw Error("Unrecognised Type");return da})};qa.iif=function(V,U){try{e.pcCheck(null===U.arguments?[]:U.arguments,3,3);var da=F(V,U.arguments[0]);if(!1===e.isBoolean(da))throw Error("IF Function must have a boolean test condition");var na=F(V,U.arguments[1]),ka=F(V,U.arguments[2]);return!0===da?na:ka}catch(xa){throw xa;}};qa.decode=function(V,U){try{if(2>U.arguments.length)throw Error("Missing Parameters");
if(2===U.arguments.length)return F(V,U.arguments[1]);if(0===(U.arguments.length-1)%2)throw Error("Must have a default value result.");var da=F(V,U.arguments[0]);return fa(V,U,1,da)}catch(na){throw na;}};qa.when=function(V,U){try{if(3>U.arguments.length)throw Error("Missing Parameters");if(0===U.arguments.length%2)throw Error("Must have a default value result.");var da=F(V,U.arguments[0]);if(!1===e.isBoolean(da))throw Error("WHEN needs boolean test conditions");return S(V,U,0,da)}catch(na){throw na;
}};qa.top=function(V,U){return E(V,U,function(da,na,ka){e.pcCheck(ka,2,2);if(e.isArray(ka[0]))return e.toNumber(ka[1])>=ka[0].length?ka[0].slice(0):ka[0].slice(0,e.toNumber(ka[1]));if(e.isImmutableArray(ka[0]))return e.toNumber(ka[1])>=ka[0].length()?ka[0].slice(0):ka[0].slice(0,e.toNumber(ka[1]));throw Error("Top cannot accept this parameter type");})};qa.first=function(V,U){return E(V,U,function(da,na,ka){e.pcCheck(ka,1,1);return e.isArray(ka[0])?0===ka[0].length?null:ka[0][0]:e.isImmutableArray(ka[0])?
0===ka[0].length()?null:ka[0].get(0):null})};qa.sort=function(V,U){return E(V,U,function(da,na,ka){e.pcCheck(ka,1,2);da=ka[0];e.isImmutableArray(da)&&(da=da.toArray());if(!1===e.isArray(da))throw Error("Illegal Argument");if(1<ka.length){if(!1===e.isFunctionParameter(ka[1]))throw Error("Illegal Argument");var xa=W(ka[1]);return da=Y(da,function(ba,ha){return xa(ba,ha)})}if(0===da.length)return[];ka={};for(na=0;na<da.length;na++){var O=R(da[na]);""!==O&&(ka[O]=!0)}if(!0===ka.Array||!0===ka.Dictionary||
!0===ka.Feature||!0===ka.Point||!0===ka.Polygon||!0===ka.Polyline||!0===ka.Multipoint||!0===ka.Extent||!0===ka.Function)return da.slice(0);na=0;O="";for(var Q in ka)na++,O=Q;return da=1<na||"String"===O?Y(da,function(ba,ha){if(null===ba||void 0===ba||ba===e.voidOperation)return null===ha||void 0===ha||ha===e.voidOperation?0:1;if(null===ha||void 0===ha||ha===e.voidOperation)return-1;var pa=e.toString(ba),za=e.toString(ha);return pa<za?-1:pa===za?0:1}):"Number"===O?Y(da,function(ba,ha){return ba-ha}):
"Boolean"===O?Y(da,function(ba,ha){return ba===ha?0:ha?-1:1}):"Date"===O?Y(da,function(ba,ha){return ha-ba}):da.slice(0)})};for(var wa in qa)qa[wa]={value:new e.NativeFunction(qa[wa]),valueset:!0,node:null};var sa=function(){};sa.prototype=qa;sa.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};sa.prototype.pi={value:Math.PI,valueset:!0,node:null};q.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:B,standardFunction:E};q.extend=function(V){for(var U=
{mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:E,evaluateIdentifier:la,arcadeCustomFunctionHandler:W},da=0;da<V.length;da++)V[da].registerFunctions(U);for(var na in U.functions)qa[na]={value:new e.NativeFunction(U.functions[na]),valueset:!0,node:null},sa.prototype[na]=qa[na];for(da=0;da<U.signatures.length;da++)k.addFunctionDeclaration(U.signatures[da],"async")};q.executeScript=function(V,U){var da=U.spatialReference;if(null===da||void 0===da)da=new G({wkid:102100});var na=U.vars,
ka=U.customfunctions,xa=new sa;na||(na={});ka||(ka={});var O=new g({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});O.immutable=!1;xa.textformatting={value:O,valueset:!0,node:null};for(var Q in ka)xa[Q]={value:new e.NativeFunction(ka[Q]),"native":!0,valueset:!0,node:null};for(Q in na)xa[Q]=na[Q]&&"esri.Graphic"===na[Q].declaredClass?{value:f.createFromGraphic(na[Q]),valueset:!0,node:null}:{value:na[Q],valueset:!0,node:null};da=F({spatialReference:da,globalScope:xa,
localScope:null,console:U.console?U.console:ja,lrucache:U.lrucache,interceptor:U.interceptor,depthCounter:1},V.body[0].body);da instanceof e.ReturnResult&&(da=da.value);da instanceof e.ImplicitResult&&(da=da.value);da===e.voidOperation&&(da=null);if(da===e.breakResult)throw Error("Cannot return BREAK");if(da===e.continueResult)throw Error("Cannot return CONTINUE");if(da instanceof h)throw Error("Cannot return FUNCTION");if(da instanceof e.NativeFunction)throw Error("Cannot return FUNCTION");return da};
q.extractFieldLiterals=function(V,U){void 0===U&&(U=!1);return k.findFieldLiterals(V)};q.extractExpectedFieldLiterals=function(V){return k.findExpectedFieldLiterals(V)};q.validateScript=function(V,U){return k.validateScript(V,U,"simple")};q.referencesMember=function(V,U){return k.referencesMember(V,U)};q.referencesFunction=function(V,U){return k.referencesFunction(V,U)};q.findFunctionCalls=function(V){return k.findFunctionCalls(V)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis",
"./lib/arcade-parser"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});q.referencesFunction=q.referencesMember=q.extractExpectedFieldLiterals=q.validateScript=q.extractFieldLiterals=q.scriptCheck=q.parseScript=void 0;q.parseScript=function(g,f){void 0===f&&(f=[]);var h=b.parse("function _() { "+g+"\n}");if(null===h.body||void 0===h.body)throw Error("No formula provided.");if(0===h.body.length)throw Error("No formula provided.");if(0===h.body.length)throw Error("No formula provided.");
if("BlockStatement"!==h.body[0].body.type)throw Error("Invalid formula content.");var d=a.validateLanguage(h);if(""!==d)throw Error(d);a.findScriptDependencies(h,f);return h};q.scriptCheck=function(g,f,h,d,c){var e=[];g="function _() { \n"+g+"\n}";try{var k=b.parse(g,{tolerant:!0,loc:!0,range:!0}),l=k.errors;if(0<l.length)for(var m=0;m<l.length;m++)e.push({line:l[m].lineNumber-2,character:l[m].column,reason:l[m].description});var n=a.checkScript(k,f,h,d,c);for(f=0;f<n.length;f++)n[f].line-=2,n[f].range&&
(n[f].range=[n[f][0]-15,n[f][1]-15]),n[f].loc&&(n[f].loc.start.line-=2,n[f].loc.end.line-=2),e.push(n[f])}catch(v){try{if("Unexpected token }"===v.description){var p=g.split("\n").length;v.lineNumber===p?(v.index=g.length-1,e.push({line:v.lineNumber-4,character:v.column,reason:"Unexpected end of script"})):(v.index=g.length-1,e.push({line:v.lineNumber-2,character:v.column,reason:"Unexpected end of script"}))}else e.push({line:v.lineNumber-2,character:v.column,reason:v.description})}catch(r){}}return e};
q.extractFieldLiterals=function(g,f){void 0===f&&(f=!1);return a.findFieldLiterals(g)};q.validateScript=function(g,f,h){return a.validateScript(g,f,h)};q.extractExpectedFieldLiterals=function(g){return a.findExpectedFieldLiterals(g)};q.referencesMember=function(g,f){return a.referencesMember(g,f)};q.referencesFunction=function(g,f){return a.referencesFunction(g,f)}})},"esri/arcade/lib/arcade-parser":function(){var D=this&&this.__createBinding||(Object.create?function(a,b,g,f){void 0===f&&(f=g);Object.defineProperty(a,
f,{enumerable:!0,get:function(){return b[g]}})}:function(a,b,g,f){void 0===f&&(f=g);a[f]=b[g]}),q=this&&this.__exportStar||function(a,b){for(var g in a)"default"===g||Object.prototype.hasOwnProperty.call(b,g)||D(b,a,g)};define("require exports ./comment-handler ./parser ./tokenizer ./syntax ./token ./nodes".split(" "),function(a,b,g,f,h,d,c,e){Object.defineProperty(b,"__esModule",{value:!0});b.version=b.Syntax=b.tokenize=b.parse=void 0;b.parse=function(k,l,m){var n=null,p=function(x,z){m&&m(x,z);
n&&n.visit(x,z)},v="function"===typeof m?p:void 0,r=!1;if(l){r="boolean"===typeof l.comment&&l.comment;var y="boolean"===typeof l.attachComment&&l.attachComment;if(r||y)n=new g.CommentHandler,n.attach=y,l.comment=!0,v=p}k=new f.Parser(k,l,v);l=k.parseScript();r&&n&&(l.comments=n.comments);k.config.tokens&&(l.tokens=k.tokens);k.config.tolerant&&(l.errors=k.errorHandler.errors);return l};b.tokenize=function(k,l,m){k=new h.Tokenizer(k,l);l=[];var n=void 0;try{for(;;){var p=k.getNextToken();if(!p)break;
m&&(p=m(p));l.push(p)}}catch(v){k.errorHandler.tolerate(v)}k.errorHandler.tolerant&&(n=k.errors());return{tokens:l,errors:n}};Object.defineProperty(b,"Syntax",{enumerable:!0,get:function(){return d.Syntax}});q(c,b);q(e,b);b.version="4.0.0-dev"})},"esri/arcade/lib/comment-handler":function(){define(["require","exports","./syntax"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.CommentHandler=void 0;D=function(){function b(){this.attach=!1;this.comments=[];this.stack=[];this.leading=
[];this.trailing=[]}b.prototype.insertInnerComments=function(g,f){if(g.type===a.Syntax.BlockStatement&&0===g.body.length){for(var h=[],d=this.leading.length-1;0<=d;--d){var c=this.leading[d];f.end.offset>=c.start&&(h.unshift(c.comment),this.leading.splice(d,1),this.trailing.splice(d,1))}h.length&&(g.innerComments=h)}};b.prototype.findTrailingComments=function(g){var f=[];if(0<this.trailing.length){for(var h=this.trailing.length-1;0<=h;--h){var d=this.trailing[h];d.start>=g.end.offset&&f.unshift(d.comment)}this.trailing.length=
0;return f}(h=this.stack[this.stack.length-1])&&h.node.trailingComments&&(d=h.node.trailingComments[0])&&d.range[0]>=g.end.offset&&(f=h.node.trailingComments,delete h.node.trailingComments);return f};b.prototype.findLeadingComments=function(g){for(var f=[],h;0<this.stack.length;){var d=this.stack[this.stack.length-1];if(d&&d.start>=g.start.offset)h=d.node,this.stack.pop();else break}if(h){for(var c=(h.leadingComments?h.leadingComments.length:0)-1;0<=c;--c)d=h.leadingComments[c],d.range[1]<=g.start.offset&&
(f.unshift(d),h.leadingComments.splice(c,1));h.leadingComments&&0===h.leadingComments.length&&delete h.leadingComments;return f}for(c=this.leading.length-1;0<=c;--c)d=this.leading[c],d.start<=g.start.offset&&(f.unshift(d.comment),this.leading.splice(c,1));return f};b.prototype.visitNode=function(g,f){if(!(g.type===a.Syntax.Program&&0<g.body.length)){this.insertInnerComments(g,f);var h=this.findTrailingComments(f),d=this.findLeadingComments(f);0<d.length&&(g.leadingComments=d);0<h.length&&(g.trailingComments=
h);this.stack.push({node:g,start:f.start.offset})}};b.prototype.visitComment=function(g,f){this.comments.push(g);if(this.attach){var h={comment:{type:g.type,value:g.value,range:[f.start.offset,f.end.offset]},start:f.start.offset};g.loc&&(h.comment.loc=g.loc);this.leading.push(h);this.trailing.push(h)}};b.prototype.visit=function(g,f){"Line"===g.type||"Block"===g.type?this.visitComment(g,f):this.attach&&this.visitNode(g,f)};return b}();q.CommentHandler=D})},"esri/arcade/lib/syntax":function(){define(["require",
"exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.Syntax=void 0;q.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ContinueStatement:"ContinueStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"}})},
"esri/arcade/lib/parser":function(){define("require exports ./assert ./error-handler ./messages ./nodes ./scanner ./syntax ./token".split(" "),function(D,q,a,b,g,f,h,d,c){Object.defineProperty(q,"__esModule",{value:!0});q.Parser=void 0;D=function(){function e(k,l,m){void 0===l&&(l={});this.config={range:"boolean"===typeof l.range&&l.range,loc:"boolean"===typeof l.loc&&l.loc,source:null,tokens:"boolean"===typeof l.tokens&&l.tokens,comment:"boolean"===typeof l.comment&&l.comment,tolerant:"boolean"===
typeof l.tolerant&&l.tolerant,globalReturn:!!l.globalReturn};this.config.loc&&l.source&&null!==l.source&&(this.config.source=String(l.source));this.delegate=m;this.errorHandler=new b.ErrorHandler;this.errorHandler.tolerant=this.config.tolerant;this.scanner=new h.Scanner(k,this.errorHandler);this.scanner.trackComment=this.config.comment;this.operatorPrecedence={")":0,";":0,",":0,"\x3d":0,"]":0,"||":1,"\x26\x26":2,"|":3,"^":4,"\x26":5,"\x3d\x3d":6,"!\x3d":6,"\x3d\x3d\x3d":6,"!\x3d\x3d":6,"\x3c":7,"\x3e":7,
"\x3c\x3d":7,"\x3e\x3d":7,"\x3c\x3c":8,"\x3e\x3e":8,"\x3e\x3e\x3e":8,"+":9,"-":9,"*":11,"/":11,"%":11};this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0};this.hasLineTerminator=!1;this.context={allowIn:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,curlyParsing:"asObject"};this.tokens=[];this.startMarker={index:0,line:this.scanner.lineNumber,column:0};this.lastMarker={index:0,line:this.scanner.lineNumber,
column:0};this.nextToken();this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}e.prototype.tolerateError=function(k){for(var l=[],m=1;m<arguments.length;m++)l[m-1]=arguments[m];var n=l.slice();l=k.replace(/%(\d)/g,function(p,v){a.assert(v<n.length,"Message reference must be in range");return n[v]});this.errorHandler.tolerateError(this.lastMarker.index,this.scanner.lineNumber,this.lastMarker.column+1,l)};e.prototype.unexpectedTokenError=
function(k,l){var m=l||g.Messages.UnexpectedToken;if(k){l||(m=2===k.type?g.Messages.UnexpectedEOS:3===k.type?g.Messages.UnexpectedIdentifier:6===k.type?g.Messages.UnexpectedNumber:8===k.type?g.Messages.UnexpectedString:10===k.type?g.Messages.UnexpectedTemplate:g.Messages.UnexpectedToken);var n=k.value.toString()}else n="ILLEGAL";m=m.replace("%0",n);return k&&"number"===typeof k.lineNumber?this.errorHandler.createError(k.start,k.lineNumber,k.start-(this.lastMarker.index-this.lastMarker.column)+1,m):
this.errorHandler.createError(this.lastMarker.index,this.lastMarker.line,this.lastMarker.column+1,m)};e.prototype.throwUnexpectedToken=function(k,l){throw this.unexpectedTokenError(k,l);};e.prototype.tolerateUnexpectedToken=function(k,l){this.errorHandler.tolerate(this.unexpectedTokenError(k,l))};e.prototype.collectComments=function(){if(this.config.comment){var k=this.scanner.scanComments();if(k&&0<k.length&&this.delegate)for(var l=0;l<k.length;++l){var m=k[l],n=new f.Comment(m.multiLine?"Block":
"Line",this.scanner.source.slice(m.slice[0],m.slice[1]));this.config.range&&(n.range=m.range);this.config.loc&&(n.loc=m.loc);this.delegate(n,{start:{line:m.loc.start.line,column:m.loc.start.column,offset:m.range[0]},end:{line:m.loc.end.line,column:m.loc.end.column,offset:m.range[1]}})}}else this.scanner.scanComments()};e.prototype.peekAhead=function(k){var l=this,m=this.scanner.saveState();k.call(this,function(){l.scanner.scanComments();return l.scanner.lex()});this.scanner.restoreState(m)};e.prototype.getTokenRaw=
function(k){return this.scanner.source.slice(k.start,k.end)};e.prototype.convertToken=function(k){var l={type:c.TokenName[k.type],value:this.getTokenRaw(k)};this.config.range&&(l.range=[k.start,k.end]);this.config.loc&&(l.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});9===k.type&&(l.regex={pattern:k.pattern,flags:k.flags});return l};e.prototype.nextToken=function(){var k=this.lookahead;this.lastMarker.index=
this.scanner.index;this.lastMarker.line=this.scanner.lineNumber;this.lastMarker.column=this.scanner.index-this.scanner.lineStart;this.collectComments();this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var l=this.scanner.lex();this.hasLineTerminator=k.lineNumber!==l.lineNumber;this.lookahead=l;this.config.tokens&&2!==l.type&&this.tokens.push(this.convertToken(l));
return k};e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}};e.prototype.startNode=function(k,l){void 0===l&&(l=0);var m=k.start-k.lineStart,n=k.lineNumber;0>m&&(m+=l,n--);return{index:k.start,line:n,column:m}};e.prototype.finalize=function(k,l){this.config.range&&(l.range=[k.index,this.lastMarker.index]);this.config.loc&&(l.loc={start:{line:k.line,column:k.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},
this.config.source&&(l.loc.source=this.config.source));this.delegate&&this.delegate(l,{start:{line:k.line,column:k.column,offset:k.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}});return l};e.prototype.expect=function(k){var l=this.nextToken();7===l.type&&l.value===k||this.throwUnexpectedToken(l)};e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var k=this.lookahead;7===k.type&&","===k.value?this.nextToken():7===k.type&&";"===
k.value?(this.nextToken(),this.tolerateUnexpectedToken(k)):this.tolerateUnexpectedToken(k,g.Messages.UnexpectedToken)}else this.expect(",")};e.prototype.expectKeyword=function(k){var l=this.nextToken();4===l.type&&l.value.toString().toLowerCase()===k.toLowerCase()||this.throwUnexpectedToken(l)};e.prototype.match=function(k){return 7===this.lookahead.type&&this.lookahead.value===k};e.prototype.matchKeyword=function(k){return 4===this.lookahead.type&&this.lookahead.value.toLowerCase()===k.toLowerCase()};
e.prototype.matchContextualKeyword=function(k){return 3===this.lookahead.type&&this.lookahead.value===k};e.prototype.matchAssign=function(){return 7!==this.lookahead.type?!1:f.AssignmentOperators.includes(this.lookahead.value)};e.prototype.isolateCoverGrammar=function(k){var l=this.context.isBindingElement,m=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=null;
k=k.call(this);null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError);this.context.isBindingElement=l;this.context.isAssignmentTarget=m;this.context.firstCoverInitializedNameError=n;return k};e.prototype.inheritCoverGrammar=function(k){var l=this.context.isBindingElement,m=this.context.isAssignmentTarget,n=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0;this.context.isAssignmentTarget=!0;this.context.firstCoverInitializedNameError=
null;k=k.call(this);this.context.isBindingElement=this.context.isBindingElement&&l;this.context.isAssignmentTarget=this.context.isAssignmentTarget&&m;this.context.firstCoverInitializedNameError=n||this.context.firstCoverInitializedNameError;return k};e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,
this.lastMarker.column=this.startMarker.column)};e.prototype.parsePrimaryExpression=function(){var k=this.createNode();switch(this.lookahead.type){case 3:k=this.finalize(k,new f.Identifier(this.nextToken().value));break;case 6:case 8:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;var l=this.nextToken();var m=this.getTokenRaw(l);k=this.finalize(k,new f.Literal(l.value,m));break;case 1:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;l=this.nextToken();m=this.getTokenRaw(l);
k=this.finalize(k,new f.Literal("true"===l.value.toString().toLowerCase(),m));break;case 5:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;l=this.nextToken();m=this.getTokenRaw(l);k=this.finalize(k,new f.Literal(null,m));break;case 10:k=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case "(":this.context.isBindingElement=!1;k=this.inheritCoverGrammar(this.parseGroupExpression);break;case "[":k=this.inheritCoverGrammar(this.parseArrayInitializer);break;case "{":k=
this.inheritCoverGrammar(this.parseObjectInitializer);break;default:k=this.throwUnexpectedToken(this.nextToken())}break;case 4:this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;k=this.throwUnexpectedToken(this.nextToken());break;default:k=this.throwUnexpectedToken(this.nextToken())}return k};e.prototype.parseArrayInitializer=function(){var k=this.createNode(),l=[];for(this.expect("[");!this.match("]");)this.match(",")?(this.nextToken(),l.push(null)):(l.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),
this.match("]")||this.expect(","));this.expect("]");return this.finalize(k,new f.ArrayExpression(l))};e.prototype.parseObjectPropertyKey=function(){var k=this.createNode(),l=this.nextToken();switch(l.type){case 8:case 6:k=this.finalize(k,new f.Literal(l.value,this.getTokenRaw(l)));break;case 3:case 1:case 5:case 4:k=this.finalize(k,new f.Identifier(l.value));break;default:k=this.throwUnexpectedToken(l)}return k};e.prototype.parseObjectProperty=function(){var k=this.createNode(),l=this.lookahead,m=
!1,n=!1,p=null;if(3===l.type){var v=l.value;this.nextToken();m=this.match("[");p=this.finalize(k,new f.Identifier(v))}else this.match("*")?this.nextToken():(m=this.match("["),p=this.parseObjectPropertyKey());p||this.throwUnexpectedToken(this.lookahead);v=null;this.match(":")?(this.nextToken(),v=this.inheritCoverGrammar(this.parseAssignmentExpression)):3===l.type?(v=this.finalize(k,new f.Identifier(l.value)),n=!0):this.throwUnexpectedToken(this.nextToken());return this.finalize(k,new f.Property("init",
p,m,v,!1,n))};e.prototype.parseObjectInitializer=function(){var k=this.createNode();this.expect("{");for(var l=[];!this.match("}");)l.push(this.parseObjectProperty()),this.match("}")||this.expectCommaSeparator();this.expect("}");return this.finalize(k,new f.ObjectExpression(l))};e.prototype.parseTemplateHead=function(){a.assert(this.lookahead.head,"Template literal must start with a template head");var k=this.createNode(),l=this.nextToken();return this.finalize(k,new f.TemplateElement({raw:l.value,
cooked:l.cooked},l.tail))};e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var k=this.createNode(),l=this.nextToken();return this.finalize(k,new f.TemplateElement({raw:l.value,cooked:l.cooked},l.tail))};e.prototype.parseTemplateLiteral=function(){var k=this.createNode(),l=[],m=[],n=this.parseTemplateHead();for(m.push(n);!n.tail;)l.push(this.parseExpression()),n=this.parseTemplateElement(),m.push(n);return this.finalize(k,new f.TemplateLiteral(m,l))};
e.prototype.parseGroupExpression=function(){this.expect("(");this.context.isBindingElement=!0;var k=this.inheritCoverGrammar(this.parseAssignmentExpression);this.expect(")");this.context.isBindingElement=!1;return k};e.prototype.parseArguments=function(){this.expect("(");var k=[];if(!this.match(")"))for(;;){var l=this.isolateCoverGrammar(this.parseAssignmentExpression);k.push(l);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}this.expect(")");return k};e.prototype.isIdentifierName=
function(k){return 3===k.type||4===k.type||1===k.type||5===k.type};e.prototype.parseIdentifierName=function(){var k=this.createNode(),l=this.nextToken();this.isIdentifierName(l)||this.throwUnexpectedToken(l);return this.finalize(k,new f.Identifier(l.value))};e.prototype.parseLeftHandSideExpressionAllowCall=function(){var k=this.lookahead,l=this.context.allowIn;this.context.allowIn=!0;for(var m=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("(")){this.context.isBindingElement=
!1;this.context.isAssignmentTarget=!1;var n=this.parseArguments();m=this.finalize(this.startNode(k),new f.CallExpression(m,n))}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),n=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),m=this.finalize(this.startNode(k),new f.ComputedMemberExpression(m,n));else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),
m=this.finalize(this.startNode(k),new f.StaticMemberExpression(m,n));else break;this.context.allowIn=l;return m};e.prototype.parseLeftHandSideExpression=function(){a.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var k=this.startNode(this.lookahead),l=this.inheritCoverGrammar(this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1;this.context.isAssignmentTarget=!0;this.expect("[");var m=this.isolateCoverGrammar(this.parseExpression);
this.expect("]");l=this.finalize(k,new f.ComputedMemberExpression(l,m))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),m=this.parseIdentifierName(),l=this.finalize(k,new f.StaticMemberExpression(l,m));else break;return l};e.prototype.parseUpdateExpression=function(){var k=this.lookahead;if(this.match("++")||this.match("--")){k=this.startNode(k);var l=this.nextToken();var m=this.inheritCoverGrammar(this.parseUnaryExpression);this.context.isAssignmentTarget||
this.tolerateError(g.Messages.InvalidLHSInAssignment);m=this.finalize(k,new f.UpdateExpression(l.value,m,!0));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else m=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),this.hasLineTerminator||7!==this.lookahead.type||!this.match("++")&&!this.match("--")||(this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,l=this.nextToken().value,
m=this.finalize(this.startNode(k),new f.UpdateExpression(l,m,!1)));return m};e.prototype.parseUnaryExpression=function(){if(this.match("+")||this.match("-")||this.match("~")||this.match("!")){var k=this.startNode(this.lookahead),l=this.nextToken();var m=this.inheritCoverGrammar(this.parseUnaryExpression);m=this.finalize(k,new f.UnaryExpression(l.value,m));this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1}else m=this.parseUpdateExpression();return m};e.prototype.binaryPrecedence=
function(k){var l=k.value;return 7===k.type?this.operatorPrecedence[l]||0:4===k.type?this.context.allowIn&&"in"===l?12:0:0};e.prototype.parseBinaryExpression=function(){var k=this.lookahead,l=this.inheritCoverGrammar(this.parseUnaryExpression),m=this.lookahead,n=this.binaryPrecedence(m);if(0<n){this.nextToken();this.context.isAssignmentTarget=!1;this.context.isBindingElement=!1;k=[k,this.lookahead];var p=this.inheritCoverGrammar(this.parseUnaryExpression);m=[l,m.value,p];for(var v=[n];;){n=this.binaryPrecedence(this.lookahead);
if(0>=n)break;for(;2<m.length&&n<=v[v.length-1];){p=m.pop();var r=m.pop();v.pop();l=m.pop();k.pop();var y=k[k.length-1],x=this.startNode(y,y.lineStart);m.push(this.finalize(x,new f.BinaryExpression(r,l,p)))}m.push(this.nextToken().value);v.push(n);k.push(this.lookahead);m.push(this.inheritCoverGrammar(this.parseUnaryExpression))}n=m.length-1;l=m[n];for(r=k.pop();1<n;){y=k.pop();if(!y)break;x=this.startNode(y,r&&r.lineStart);r=m[n-1];l=this.finalize(x,new f.BinaryExpression(r,m[n-2],l));n-=2;r=y}}return l};
e.prototype.parseAssignmentExpression=function(){var k=this.lookahead,l=k,m=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(g.Messages.InvalidLHSInAssignment);this.match("\x3d")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);l=this.nextToken();l=l.value;var n=this.isolateCoverGrammar(this.parseAssignmentExpression);m=this.finalize(this.startNode(k),new f.AssignmentExpression(l,m,n));this.context.firstCoverInitializedNameError=
null}return m};e.prototype.parseExpression=function(){return this.isolateCoverGrammar(this.parseAssignmentExpression)};e.prototype.parseStatementListItem=function(){this.context.isAssignmentTarget=!0;this.context.isBindingElement=!0;if(4===this.lookahead.type)switch(this.lookahead.value){case "function":var k=this.parseFunctionDeclaration();break;default:k=this.parseStatement()}else k=this.parseStatement();return k};e.prototype.parseBlock=function(){var k=this.createNode();this.expect("{");for(var l=
[];!this.match("}");)l.push(this.parseStatementListItem());this.expect("}");return this.finalize(k,new f.BlockStatement(l))};e.prototype.parseObjectStatement=function(){var k=this.createNode(),l=this.parseObjectInitializer();return this.finalize(k,new f.ExpressionStatement(l))};e.prototype.parseBlockOrObjectStatement=function(){var k="asObject"===this.context.curlyParsing;"asObjectOrBlock"===this.context.curlyParsing&&this.peekAhead(function(l){var m=l();if(3===m.type||8===m.type)m=l(),7===m.type&&
":"===m.value&&(k=!0)});return k?this.parseObjectStatement():this.parseBlock()};e.prototype.parseVariableIdentifier=function(){var k=this.createNode(),l=this.nextToken();3!==l.type&&this.throwUnexpectedToken(l,g.Messages.IdentiferExpected);return this.finalize(k,new f.Identifier(l.value))};e.prototype.parseVariableDeclaration=function(k){var l=this.createNode(),m=this.parseVariableIdentifier(),n=null;this.match("\x3d")?(this.nextToken(),n=this.isolateCoverGrammar(this.parseAssignmentExpression)):
m.type===d.Syntax.Identifier||k.inFor||this.expect("\x3d");return this.finalize(l,new f.VariableDeclarator(m,n))};e.prototype.parseVariableDeclarationList=function(k){for(var l=[this.parseVariableDeclaration(k)];this.match(",");)this.nextToken(),l.push(this.parseVariableDeclaration(k));return l};e.prototype.parseVariableStatement=function(){var k=this.createNode();this.expectKeyword("var");var l=this.parseVariableDeclarationList({inFor:!1});this.consumeSemicolon();return this.finalize(k,new f.VariableDeclaration(l,
"var"))};e.prototype.parseEmptyStatement=function(){var k=this.createNode();this.expect(";");return this.finalize(k,new f.EmptyStatement)};e.prototype.parseExpressionStatement=function(){var k=this.createNode(),l=this.parseExpression();this.consumeSemicolon();return this.finalize(k,new f.ExpressionStatement(l))};e.prototype.parseIfClause=function(){var k=this.context.curlyParsing;this.context.curlyParsing="asObjectOrBlock";var l=this.parseStatement();this.context.curlyParsing=k;return l};e.prototype.parseIfStatement=
function(){var k=this.createNode(),l=null;this.expectKeyword("if");this.expect("(");var m=this.parseExpression();if(!this.match(")")&&this.config.tolerant){this.tolerateUnexpectedToken(this.nextToken());var n=this.finalize(this.createNode(),new f.EmptyStatement)}else this.expect(")"),n=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),l=this.parseIfClause());return this.finalize(k,new f.IfStatement(m,n,l))};e.prototype.parseForStatement=function(){var k=null,l=null,m=null,n=null,p=
null,v=this.createNode();this.expectKeyword("for");this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){var r=this.createNode();this.nextToken();var y=this.context.allowIn;this.context.allowIn=!1;var x=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=y;1===x.length&&this.matchKeyword("in")?(x[0].init&&this.tolerateError(g.Messages.ForInOfLoopInitializer,"for-in"),n=this.finalize(r,new f.VariableDeclaration(x,"var")),this.nextToken(),p=this.parseExpression()):
(k=this.finalize(r,new f.VariableDeclaration(x,"var")),this.expect(";"))}else{r=this.context.isBindingElement;x=this.context.isAssignmentTarget;var z=this.context.firstCoverInitializedNameError;y=this.context.allowIn;this.context.allowIn=!1;k=this.inheritCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=y;this.matchKeyword("in")?(this.context.isAssignmentTarget&&k.type!==d.Syntax.AssignmentExpression||this.tolerateError(g.Messages.InvalidLHSInForIn),this.nextToken(),n=k,p=this.parseExpression(),
k=null):(this.context.isBindingElement=r,this.context.isAssignmentTarget=x,this.context.firstCoverInitializedNameError=z,this.expect(";"))}n||(this.match(";")||(l=this.isolateCoverGrammar(this.parseExpression)),this.expect(";"),this.match(")")||(m=this.isolateCoverGrammar(this.parseExpression)));!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),y=this.finalize(this.createNode(),new f.EmptyStatement)):(this.expect(")"),r=this.context.inIteration,x=this.context.curlyParsing,
this.context.inIteration=!0,this.context.curlyParsing="asObjectOrBlock",y=this.isolateCoverGrammar(this.parseStatement),this.context.curlyParsing=x,this.context.inIteration=r);return n&&p?this.finalize(v,new f.ForInStatement(n,p,y)):this.finalize(v,new f.ForStatement(k,l,m,y))};e.prototype.parseContinueStatement=function(){var k=this.createNode();this.expectKeyword("continue");this.consumeSemicolon();return this.finalize(k,new f.ContinueStatement)};e.prototype.parseBreakStatement=function(){var k=
this.createNode();this.expectKeyword("break");this.consumeSemicolon();return this.finalize(k,new f.BreakStatement)};e.prototype.parseReturnStatement=function(){this.config.globalReturn||this.context.inFunctionBody||this.tolerateError(g.Messages.IllegalReturn);var k=this.createNode();this.expectKeyword("return");var l=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();this.consumeSemicolon();
return this.finalize(k,new f.ReturnStatement(l))};e.prototype.parseStatement=function(){switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 3:var k=this.parseExpressionStatement();break;case 7:k=this.lookahead.value;k="{"===k?this.parseBlockOrObjectStatement():"("===k?this.parseExpressionStatement():";"===k?this.parseEmptyStatement():this.parseExpressionStatement();break;case 4:switch(this.lookahead.value.toLowerCase()){case "break":k=this.parseBreakStatement();break;case "continue":k=
this.parseContinueStatement();break;case "for":k=this.parseForStatement();break;case "function":k=this.parseFunctionDeclaration();break;case "if":k=this.parseIfStatement();break;case "return":k=this.parseReturnStatement();break;case "var":k=this.parseVariableStatement();break;default:k=this.parseExpressionStatement()}break;default:k=this.throwUnexpectedToken(this.lookahead)}return k};e.prototype.parseFunctionSourceElements=function(){var k=this.createNode();this.expect("{");var l=this.context.inIteration,
m=this.context.inFunctionBody;this.context.inIteration=!1;this.context.inFunctionBody=!0;for(var n=[];2!==this.lookahead.type&&!this.match("}");)n.push(this.parseStatementListItem());this.expect("}");this.context.inIteration=l;this.context.inFunctionBody=m;return this.finalize(k,new f.BlockStatement(n))};e.prototype.parseFormalParameters=function(){var k=[];this.expect("(");if(!this.match(")"))for(;2!==this.lookahead.type;){k.push(this.parseVariableIdentifier());if(this.match(")"))break;this.expect(",");
if(this.match(")"))break}this.expect(")");return k};e.prototype.parseFunctionDeclaration=function(){var k=this.createNode();this.expectKeyword("function");var l=this.parseVariableIdentifier(),m=this.parseFormalParameters(),n=this.parseFunctionSourceElements();return this.finalize(k,new f.FunctionDeclaration(l,m,n))};e.prototype.parseScript=function(){for(var k=this.createNode(),l=[];2!==this.lookahead.type;)l.push(this.parseStatementListItem());return this.finalize(k,new f.Program(l))};return e}();
q.Parser=D})},"esri/arcade/lib/assert":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.assert=void 0;q.assert=function(a,b){if(!a)throw Error("ASSERT: "+b);}})},"esri/arcade/lib/error-handler":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.ErrorHandler=void 0;var a=function(){function b(){this.errors=[];this.tolerant=!1}b.prototype.recordError=function(g){this.errors.push(g)};b.prototype.tolerate=
function(g){if(this.tolerant)this.recordError(g);else throw g;};b.prototype.constructError=function(g,f){var h=Error(g);try{throw h;}catch(d){Object.create&&Object.defineProperty&&(h=Object.create(d),Object.defineProperty(h,"column",{value:f}))}return h};b.prototype.createError=function(g,f,h,d){h=this.constructError("Line "+f+": "+d,h);h.index=g;h.lineNumber=f;h.description=d;return h};b.prototype.throwError=function(g,f,h,d){throw this.createError(g,f,h,d);};b.prototype.tolerateError=function(g,
f,h,d){g=this.createError(g,f,h,d);if(this.tolerant)this.recordError(g);else throw g;};return b}();q.ErrorHandler=a})},"esri/arcade/lib/messages":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.Messages=void 0;q.Messages={ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",
IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidRegExp:"Invalid regular expression",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",
StrictParamDupe:"Strict mode function may not have duplicate parameter names",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnterminatedRegExp:"Invalid regular expression: missing /",IdentiferExpected:"Identifier expected"}})},
"esri/arcade/lib/nodes":function(){var D=this&&this.__extends||function(){var q=function(a,b){q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,f){g.__proto__=f}||function(g,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(g[h]=f[h])};return q(a,b)};return function(a,b){function g(){this.constructor=a}if("function"!==typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");q(a,b);a.prototype=null===b?Object.create(b):(g.prototype=
b.prototype,new g)}}();define(["require","exports","./syntax"],function(q,a,b){Object.defineProperty(a,"__esModule",{value:!0});a.VariableDeclarator=a.VariableDeclaration=a.UpdateExpression=a.UpdateOperators=a.UnaryExpression=a.UnaryOperators=a.TemplateLiteral=a.TemplateElement=a.Program=a.ReturnStatement=a.Property=a.ObjectExpression=a.Literal=a.IfStatement=a.Identifier=a.FunctionDeclaration=a.ForStatement=a.ForInStatement=a.ExpressionStatement=a.EmptyStatement=a.ContinueStatement=a.StaticMemberExpression=
a.ComputedMemberExpression=a.CallExpression=a.BreakStatement=a.BlockStatement=a.BinaryExpression=a.BinaryOperators=a.LogicalOperators=a.AssignmentExpression=a.AssignmentOperators=a.ArrayExpression=a.Comment=void 0;q=function(){return function(){}}();var g=function(f){function h(d,c){var e=f.call(this)||this;e.type=d;e.value=c;return e}D(h,f);return h}(q);a.Comment=g;g=function(f){function h(d){var c=f.call(this)||this;c.elements=d;c.type=b.Syntax.ArrayExpression;return c}D(h,f);return h}(q);a.ArrayExpression=
g;a.AssignmentOperators="\x3d /\x3d *\x3d %\x3d +\x3d -\x3d".split(" ");g=function(f){function h(d,c,e){var k=f.call(this)||this;k.operator=d;k.left=c;k.right=e;k.type=b.Syntax.AssignmentExpression;return k}D(h,f);return h}(q);a.AssignmentExpression=g;a.LogicalOperators=["||","\x26\x26"];a.BinaryOperators="| \x26 \x3e\x3e \x3c\x3c \x3e\x3e \x3e\x3e\x3e ^ \x3d\x3d !\x3d \x3c \x3c\x3d \x3e \x3e\x3d + - * / %".split(" ");g=function(f){function h(d,c,e){var k=f.call(this)||this;k.operator=d;k.left=c;
k.right=e;k.type=a.LogicalOperators.includes(d)?b.Syntax.LogicalExpression:b.Syntax.BinaryExpression;return k}D(h,f);return h}(q);a.BinaryExpression=g;g=function(f){function h(d){var c=f.call(this)||this;c.body=d;c.type=b.Syntax.BlockStatement;return c}D(h,f);return h}(q);a.BlockStatement=g;g=function(f){function h(){var d=null!==f&&f.apply(this,arguments)||this;d.type=b.Syntax.BreakStatement;return d}D(h,f);return h}(q);a.BreakStatement=g;g=function(f){function h(d,c){var e=f.call(this)||this;e.callee=
d;e.args=c;e.type=b.Syntax.CallExpression;e.arguments=c;return e}D(h,f);return h}(q);a.CallExpression=g;g=function(f){function h(d,c){var e=f.call(this)||this;e.object=d;e.property=c;e.type=b.Syntax.MemberExpression;e.computed=!0;return e}D(h,f);return h}(q);a.ComputedMemberExpression=g;g=function(f){function h(d,c){var e=f.call(this)||this;e.object=d;e.property=c;e.type=b.Syntax.MemberExpression;e.computed=!1;return e}D(h,f);return h}(q);a.StaticMemberExpression=g;g=function(f){function h(){var d=
null!==f&&f.apply(this,arguments)||this;d.type=b.Syntax.ContinueStatement;return d}D(h,f);return h}(q);a.ContinueStatement=g;g=function(f){function h(){var d=null!==f&&f.apply(this,arguments)||this;d.type=b.Syntax.EmptyStatement;return d}D(h,f);return h}(q);a.EmptyStatement=g;g=function(f){function h(d){var c=f.call(this)||this;c.expression=d;c.type=b.Syntax.ExpressionStatement;return c}D(h,f);return h}(q);a.ExpressionStatement=g;g=function(f){function h(d,c,e){var k=f.call(this)||this;k.left=d;k.right=
c;k.body=e;k.type=b.Syntax.ForInStatement;k.each=!1;return k}D(h,f);return h}(q);a.ForInStatement=g;g=function(f){function h(d,c,e,k){var l=f.call(this)||this;l.init=d;l.test=c;l.update=e;l.body=k;l.type=b.Syntax.ForStatement;return l}D(h,f);return h}(q);a.ForStatement=g;g=function(f){function h(d,c,e){var k=f.call(this)||this;k.id=d;k.params=c;k.body=e;k.type=b.Syntax.FunctionDeclaration;k.generator=!1;k.expression=!1;k.async=!1;return k}D(h,f);return h}(q);a.FunctionDeclaration=g;g=function(f){function h(d){var c=
f.call(this)||this;c.name=d;c.type=b.Syntax.Identifier;return c}D(h,f);return h}(q);a.Identifier=g;g=function(f){function h(d,c,e){var k=f.call(this)||this;k.test=d;k.consequent=c;k.alternate=e;k.type=b.Syntax.IfStatement;return k}D(h,f);return h}(q);a.IfStatement=g;g=function(f){function h(d,c){var e=f.call(this)||this;e.value=d;e.raw=c;e.type=b.Syntax.Literal;return e}D(h,f);return h}(q);a.Literal=g;g=function(f){function h(d){var c=f.call(this)||this;c.properties=d;c.type=b.Syntax.ObjectExpression;
return c}D(h,f);return h}(q);a.ObjectExpression=g;g=function(f){function h(d,c,e,k,l,m){var n=f.call(this)||this;n.kind=d;n.key=c;n.computed=e;n.value=k;n.method=l;n.shorthand=m;n.type=b.Syntax.Property;return n}D(h,f);return h}(q);a.Property=g;g=function(f){function h(d){var c=f.call(this)||this;c.argument=d;c.type=b.Syntax.ReturnStatement;return c}D(h,f);return h}(q);a.ReturnStatement=g;g=function(f){function h(d){var c=f.call(this)||this;c.body=d;c.type=b.Syntax.Program;return c}D(h,f);return h}(q);
a.Program=g;g=function(f){function h(d,c){var e=f.call(this)||this;e.value=d;e.tail=c;e.type=b.Syntax.TemplateElement;return e}D(h,f);return h}(q);a.TemplateElement=g;g=function(f){function h(d,c){var e=f.call(this)||this;e.quasis=d;e.expressions=c;e.type=b.Syntax.TemplateLiteral;return e}D(h,f);return h}(q);a.TemplateLiteral=g;a.UnaryOperators=["-","+","!","~"];g=function(f){function h(d,c){var e=f.call(this)||this;e.operator=d;e.argument=c;e.type=b.Syntax.UnaryExpression;e.prefix=!0;return e}D(h,
f);return h}(q);a.UnaryExpression=g;a.UpdateOperators=["++","--"];g=function(f){function h(d,c,e){var k=f.call(this)||this;k.operator=d;k.argument=c;k.prefix=e;k.type=b.Syntax.UpdateExpression;return k}D(h,f);return h}(q);a.UpdateExpression=g;g=function(f){function h(d,c){var e=f.call(this)||this;e.declarations=d;e.kind=c;e.type=b.Syntax.VariableDeclaration;return e}D(h,f);return h}(q);a.VariableDeclaration=g;q=function(f){function h(d,c){var e=f.call(this)||this;e.id=d;e.init=c;e.type=b.Syntax.VariableDeclarator;
return e}D(h,f);return h}(q);a.VariableDeclarator=q})},"esri/arcade/lib/scanner":function(){define(["require","exports","./assert","./character","./messages"],function(D,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});q.Scanner=void 0;D=function(){function f(h,d){this.source=h;this.errorHandler=d;this.isModule=this.trackComment=!1;this.length=h.length;this.index=0;this.lineNumber=0<h.length?1:0;this.lineStart=0;this.curlyStack=[]}f.prototype.saveState=function(){return{index:this.index,
lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}};f.prototype.restoreState=function(h){this.index=h.index;this.lineNumber=h.lineNumber;this.lineStart=h.lineStart;this.curlyStack=h.curlyStack};f.prototype.eof=function(){return this.index>=this.length};f.prototype.throwUnexpectedToken=function(h){void 0===h&&(h=g.Messages.UnexpectedTokenIllegal);return this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,h)};f.prototype.tolerateUnexpectedToken=
function(h){void 0===h&&(h=g.Messages.UnexpectedTokenIllegal);this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,h)};f.prototype.skipSingleLineComment=function(h){var d=[],c=0,e=null;this.trackComment&&(d=[],c=this.index-h,e={start:{line:this.lineNumber,column:this.index-this.lineStart-h},end:{line:0,column:0}});for(;!this.eof();){var k=this.source.charCodeAt(this.index);++this.index;if(b.Character.isLineTerminator(k))return e&&(e.end={line:this.lineNumber,column:this.index-
this.lineStart-1},h={multiLine:!1,slice:[c+h,this.index-1],range:[c,this.index-1],loc:e},d.push(h)),13===k&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,d}e&&(e.end={line:this.lineNumber,column:this.index-this.lineStart},h={multiLine:!1,slice:[c+h,this.index],range:[c,this.index],loc:e},d.push(h));return d};f.prototype.skipMultiLineComment=function(){var h=[],d=0,c=null;this.trackComment&&(d=this.index-2,c={start:{line:this.lineNumber,column:this.index-
this.lineStart-2},end:{line:0,column:0}});for(;!this.eof();){var e=this.source.charCodeAt(this.index);if(b.Character.isLineTerminator(e))13===e&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else{if(42===e&&47===this.source.charCodeAt(this.index+1))return this.index+=2,c&&(c.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!0,slice:[d+2,this.index-2],range:[d,this.index],loc:c},h.push(d)),h;++this.index}}c&&
(c.end={line:this.lineNumber,column:this.index-this.lineStart},d={multiLine:!0,slice:[d+2,this.index],range:[d,this.index],loc:c},h.push(d));this.tolerateUnexpectedToken();return h};f.prototype.scanComments=function(){var h=null;this.trackComment&&(h=[]);for(var d=0===this.index;!this.eof();){var c=this.source.charCodeAt(this.index);if(b.Character.isWhiteSpace(c))++this.index;else if(b.Character.isLineTerminator(c))++this.index,13===c&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,
this.lineStart=this.index,d=!0;else if(47===c)if(c=this.source.charCodeAt(this.index+1),47===c)this.index+=2,c=this.skipSingleLineComment(2),h&&(h=h.concat(c)),d=!0;else if(42===c)this.index+=2,c=this.skipMultiLineComment(),h&&(h=h.concat(c));else break;else if(d&&45===c)if(45===this.source.charCodeAt(this.index+1)&&62===this.source.charCodeAt(this.index+2))this.index+=3,c=this.skipSingleLineComment(3),h&&(h=h.concat(c));else break;else if(60!==c||this.isModule)break;else if("!--"===this.source.slice(this.index+
1,this.index+4))this.index+=4,c=this.skipSingleLineComment(4),h&&(h=h.concat(c));else break}return h};f.prototype.isKeyword=function(h){h=h.toLowerCase();switch(h.length){case 2:return"if"===h||"in"===h;case 3:return"var"===h||"for"===h;case 4:return"else"===h;case 5:return"break"===h;case 6:return"return"===h;case 8:return"function"===h||"continue"===h;default:return!1}};f.prototype.codePointAt=function(h){var d=this.source.charCodeAt(h);55296<=d&&56319>=d&&(h=this.source.charCodeAt(h+1),56320<=
h&&57343>=h&&(d=1024*(d-55296)+h-56320+65536));return d};f.prototype.scanHexEscape=function(h){h="u"===h?4:2;for(var d=0,c=0;c<h;++c)if(!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index)))d=16*d+"0123456789abcdef".indexOf(this.source[this.index++].toLowerCase());else return null;return String.fromCharCode(d)};f.prototype.scanUnicodeCodePointEscape=function(){var h=this.source[this.index],d=0;for("}"===h&&this.throwUnexpectedToken();!this.eof();){h=this.source[this.index++];if(!b.Character.isHexDigit(h.charCodeAt(0)))break;
d=16*d+"0123456789abcdef".indexOf(h.toLowerCase())}(1114111<d||"}"!==h)&&this.throwUnexpectedToken();return b.Character.fromCodePoint(d)};f.prototype.getIdentifier=function(){for(var h=this.index++;!this.eof();){var d=this.source.charCodeAt(this.index);if(92===d||55296<=d&&57343>d)return this.index=h,this.getComplexIdentifier();if(b.Character.isIdentifierPart(d))++this.index;else break}return this.source.slice(h,this.index)};f.prototype.getComplexIdentifier=function(){var h=this.codePointAt(this.index),
d=b.Character.fromCodePoint(h);this.index+=d.length;if(92===h){117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken();++this.index;if("{"===this.source[this.index]){++this.index;var c=this.scanUnicodeCodePointEscape()}else c=this.scanHexEscape("u"),null!==c&&"\\"!==c&&b.Character.isIdentifierStart(c.charCodeAt(0))||this.throwUnexpectedToken();d=c}for(;!this.eof();){h=this.codePointAt(this.index);if(!b.Character.isIdentifierPart(h))break;c=b.Character.fromCodePoint(h);d+=c;this.index+=
c.length;92===h&&(d=d.substr(0,d.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,c=this.scanUnicodeCodePointEscape()):(c=this.scanHexEscape("u"),null!==c&&"\\"!==c&&b.Character.isIdentifierPart(c.charCodeAt(0))||this.throwUnexpectedToken()),d+=c)}return d};f.prototype.octalToDecimal=function(h){var d="0"!==h,c="01234567".indexOf(h);!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(d=
!0,c=8*c+"01234567".indexOf(this.source[this.index++]),0<="0123".indexOf(h)&&!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(c=8*c+"01234567".indexOf(this.source[this.index++])));return{code:c,octal:d}};f.prototype.scanIdentifier=function(){var h=this.index,d=92===this.source.charCodeAt(h)?this.getComplexIdentifier():this.getIdentifier();var c=1===d.length?3:this.isKeyword(d)?4:"null"===d.toLowerCase()?5:"true"===d.toLowerCase()||"false"===d.toLowerCase()?1:3;if(3!==c&&
h+d.length!==this.index){var e=this.index;this.index=h;this.tolerateUnexpectedToken(g.Messages.InvalidEscapedReservedWord);this.index=e}return{type:c,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};f.prototype.scanPunctuator=function(){var h=this.index,d=this.source[this.index];switch(d){case "(":case "{":"{"===d&&this.curlyStack.push("{");++this.index;break;case ".":++this.index;break;case "}":++this.index;this.curlyStack.pop();break;case ")":case ";":case ",":case "[":case "]":case ":":case "?":case "~":++this.index;
break;default:d=this.source.substr(this.index,4),"\x3e\x3e\x3e\x3d"===d?this.index+=4:(d=d.substr(0,3),"\x3d\x3d\x3d"===d||"!\x3d\x3d"===d||"\x3e\x3e\x3e"===d||"\x3c\x3c\x3d"===d||"\x3e\x3e\x3d"===d||"**\x3d"===d?this.index+=3:(d=d.substr(0,2),"\x26\x26"===d||"||"===d||"\x3d\x3d"===d||"!\x3d"===d||"+\x3d"===d||"-\x3d"===d||"*\x3d"===d||"/\x3d"===d||"++"===d||"--"===d||"\x3c\x3c"===d||"\x3e\x3e"===d||"\x26\x3d"===d||"|\x3d"===d||"^\x3d"===d||"%\x3d"===d||"\x3c\x3d"===d||"\x3e\x3d"===d||"\x3d\x3e"===
d||"**"===d?this.index+=2:(d=this.source[this.index],0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d)&&++this.index)))}this.index===h&&this.throwUnexpectedToken();return{type:7,value:d,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};f.prototype.scanHexLiteral=function(h){for(var d="";!this.eof()&&b.Character.isHexDigit(this.source.charCodeAt(this.index));)d+=this.source[this.index++];0===d.length&&this.throwUnexpectedToken();b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&
this.throwUnexpectedToken();return{type:6,value:parseInt("0x"+d,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};f.prototype.scanBinaryLiteral=function(h){for(var d="";!this.eof();){var c=this.source[this.index];if("0"!==c&&"1"!==c)break;d+=this.source[this.index++]}0===d.length&&this.throwUnexpectedToken();this.eof()||(c=this.source.charCodeAt(this.index),(b.Character.isIdentifierStart(c)||b.Character.isDecimalDigit(c))&&this.throwUnexpectedToken());return{type:6,
value:parseInt(d,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};f.prototype.scanOctalLiteral=function(h,d){var c="",e=!1;b.Character.isOctalDigit(h.charCodeAt(0))?(e=!0,c="0"+this.source[this.index++]):++this.index;for(;!this.eof()&&b.Character.isOctalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];e||0!==c.length||this.throwUnexpectedToken();(b.Character.isIdentifierStart(this.source.charCodeAt(this.index))||b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&
this.throwUnexpectedToken();return{type:6,value:parseInt(c,8),octal:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:d,end:this.index}};f.prototype.scanNumericLiteral=function(){var h=this.index,d=this.source[h];a.assert(b.Character.isDecimalDigit(d.charCodeAt(0))||"."===d,"Numeric literal must start with a decimal digit or a decimal point");var c="";if("."!==d){c=this.source[this.index++];d=this.source[this.index];if("0"===c){if("x"===d||"X"===d)return++this.index,this.scanHexLiteral(h);
if("b"===d||"B"===d)return++this.index,this.scanBinaryLiteral(h);if("o"===d||"O"===d)return this.scanOctalLiteral(d,h)}for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];d=this.source[this.index]}if("."===d){for(c+=this.source[this.index++];b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];d=this.source[this.index]}if("e"===d||"E"===d){c+=this.source[this.index++];d=this.source[this.index];if("+"===d||"-"===
d)c+=this.source[this.index++];if(b.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;b.Character.isDecimalDigit(this.source.charCodeAt(this.index));)c+=this.source[this.index++];else this.throwUnexpectedToken()}b.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken();return{type:6,value:parseFloat(c),lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};f.prototype.scanStringLiteral=function(){var h=this.index,d=this.source[h];
a.assert("'"===d||'"'===d,"String literal must starts with a quote");++this.index;for(var c=!1,e="";!this.eof();){var k=this.source[this.index++];if(k===d){d="";break}if("\\"===k)if((k=this.source[this.index++])&&b.Character.isLineTerminator(k.charCodeAt(0)))++this.lineNumber,"\r"===k&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(k){case "u":"{"===this.source[this.index]?(++this.index,e+=this.scanUnicodeCodePointEscape()):(k=this.scanHexEscape(k),null===k&&this.throwUnexpectedToken(),
e+=k);break;case "x":k=this.scanHexEscape(k);null===k&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);e+=k;break;case "n":e+="\n";break;case "r":e+="\r";break;case "t":e+="\t";break;case "b":e+="\b";break;case "f":e+="\f";break;case "v":e+="\x0B";break;case "8":case "9":e+=k;this.tolerateUnexpectedToken();break;default:k&&b.Character.isOctalDigit(k.charCodeAt(0))?(k=this.octalToDecimal(k),c=k.octal||c,e+=String.fromCharCode(k.code)):e+=k}else if(b.Character.isLineTerminator(k.charCodeAt(0)))break;
else e+=k}""!==d&&(this.index=h,this.throwUnexpectedToken());return{type:8,value:e,octal:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};f.prototype.scanTemplate=function(){var h="",d=!1,c=this.index,e="`"===this.source[c],k=!1,l=2;for(++this.index;!this.eof();){var m=this.source[this.index++];if("`"===m){l=1;d=k=!0;break}if("$"===m){if("{"===this.source[this.index]){this.curlyStack.push("${");++this.index;d=!0;break}h+=m}else if("\\"===m)if(m=this.source[this.index++],
b.Character.isLineTerminator(m.charCodeAt(0)))++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(m){case "n":h+="\n";break;case "r":h+="\r";break;case "t":h+="\t";break;case "u":if("{"===this.source[this.index])++this.index,h+=this.scanUnicodeCodePointEscape();else{var n=this.index,p=this.scanHexEscape(m);null!==p?h+=p:(this.index=n,h+=m)}break;case "x":m=this.scanHexEscape(m);null===m&&this.throwUnexpectedToken(g.Messages.InvalidHexEscapeSequence);
h+=m;break;case "b":h+="\b";break;case "f":h+="\f";break;case "v":h+="\v";break;default:"0"===m?(b.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral),h+="\x00"):b.Character.isOctalDigit(m.charCodeAt(0))?this.throwUnexpectedToken(g.Messages.TemplateOctalLiteral):h+=m}else b.Character.isLineTerminator(m.charCodeAt(0))?(++this.lineNumber,"\r"===m&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,h+="\n"):h+=m}d||
this.throwUnexpectedToken();e||this.curlyStack.pop();return{type:10,value:this.source.slice(c+1,this.index-l),cooked:h,head:e,tail:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:c,end:this.index}};f.prototype.testRegExp=function(h,d){var c=this,e=h;0<=d.indexOf("u")&&(e=e.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(k,l,m){k=parseInt(l||m,16);1114111<k&&c.throwUnexpectedToken(g.Messages.InvalidRegExp);return 65535>=k?String.fromCharCode(k):"\uffff"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
"\uffff"));try{RegExp(e)}catch(k){this.throwUnexpectedToken(g.Messages.InvalidRegExp)}try{return new RegExp(h,d)}catch(k){return null}};f.prototype.scanRegExpBody=function(){var h=this.source[this.index];a.assert("/"===h,"Regular expression literal must start with a slash");for(var d=this.source[this.index++],c=!1,e=!1;!this.eof();)if(h=this.source[this.index++],d+=h,"\\"===h)h=this.source[this.index++],b.Character.isLineTerminator(h.charCodeAt(0))&&this.throwUnexpectedToken(g.Messages.UnterminatedRegExp),
d+=h;else if(b.Character.isLineTerminator(h.charCodeAt(0)))this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);else if(c)"]"===h&&(c=!1);else{if("/"===h){e=!0;break}"["===h&&(c=!0)}e||this.throwUnexpectedToken(g.Messages.UnterminatedRegExp);return d.substr(1,d.length-2)};f.prototype.scanRegExpFlags=function(){for(var h="";!this.eof();){var d=this.source[this.index];if(!b.Character.isIdentifierPart(d.charCodeAt(0)))break;++this.index;if("\\"!==d||this.eof())h+=d;else{d=this.source[this.index];
if("u"===d){++this.index;d=this.index;var c=this.scanHexEscape("u");if(null!==c)for(h+=c;d<this.index;++d);else this.index=d,h+="u"}this.tolerateUnexpectedToken()}}return h};f.prototype.scanRegExp=function(){var h=this.index,d=this.scanRegExpBody(),c=this.scanRegExpFlags(),e=this.testRegExp(d,c);return{type:9,value:"",pattern:d,flags:c,regex:e,lineNumber:this.lineNumber,lineStart:this.lineStart,start:h,end:this.index}};f.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,
lineStart:this.lineStart,start:this.index,end:this.index};var h=this.source.charCodeAt(this.index);return b.Character.isIdentifierStart(h)?this.scanIdentifier():40===h||41===h||59===h?this.scanPunctuator():39===h||34===h?this.scanStringLiteral():46===h?b.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():b.Character.isDecimalDigit(h)?this.scanNumericLiteral():96===h||125===h&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():
55296<=h&&57343>h&&b.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()};return f}();q.Scanner=D})},"esri/arcade/lib/character":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.Character=void 0;var a=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,
b=/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/;
q.Character={fromCodePoint:function(g){return 65536>g?String.fromCharCode(g):String.fromCharCode(55296+(g-65536>>10))+String.fromCharCode(56320+(g-65536&1023))},isWhiteSpace:function(g){return 32===g||9===g||11===g||12===g||160===g||5760<=g&&0<=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(g)},isLineTerminator:function(g){return 10===g||13===g||8232===g||8233===g},isIdentifierStart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||92===g||
128<=g&&a.test(q.Character.fromCodePoint(g))},isIdentifierPart:function(g){return 36===g||95===g||65<=g&&90>=g||97<=g&&122>=g||48<=g&&57>=g||92===g||128<=g&&b.test(q.Character.fromCodePoint(g))},isDecimalDigit:function(g){return 48<=g&&57>=g},isHexDigit:function(g){return 48<=g&&57>=g||65<=g&&70>=g||97<=g&&102>=g},isOctalDigit:function(g){return 48<=g&&55>=g}}})},"esri/arcade/lib/token":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.TokenName=
q.TokenType=void 0;var a=q.TokenType||(q.TokenType={});a[a.BooleanLiteral=1]="BooleanLiteral";a[a.EOF=2]="EOF";a[a.Identifier=3]="Identifier";a[a.Keyword=4]="Keyword";a[a.NullLiteral=5]="NullLiteral";a[a.NumericLiteral=6]="NumericLiteral";a[a.Punctuator=7]="Punctuator";a[a.StringLiteral=8]="StringLiteral";a[a.RegularExpression=9]="RegularExpression";a[a.Template=10]="Template";q.TokenName={};q.TokenName[1]="Boolean";q.TokenName[2]="\x3cend\x3e";q.TokenName[3]="Identifier";q.TokenName[4]="Keyword";
q.TokenName[5]="Null";q.TokenName[6]="Numeric";q.TokenName[7]="Punctuator";q.TokenName[8]="String";q.TokenName[9]="RegularExpression";q.TokenName[10]="Template"})},"esri/arcade/lib/tokenizer":function(){var D=this&&this.__spreadArray||function(q,a){for(var b=0,g=a.length,f=q.length;b<g;b++,f++)q[f]=a[b];return q};define("require exports ./error-handler ./nodes ./scanner ./token".split(" "),function(q,a,b,g,f,h){Object.defineProperty(a,"__esModule",{value:!0});a.Tokenizer=void 0;var d=function(){function c(){this.values=
[];this.curly=this.paren=-1}c.prototype.beforeFunctionExpression=function(e){return 0<=D(D(D(D(["(","{","[","return",","],g.AssignmentOperators),g.BinaryOperators),g.LogicalOperators),g.UnaryOperators).indexOf(e)};c.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],k=null!==e;switch(e){case "this":case "]":k=!1;break;case ")":e=this.values[this.paren-1];k="if"===e||"while"===e||"for"===e||"with"===e;break;case "}":k=!0,"function"===this.values[this.curly-3]?k=(e=this.values[this.curly-
4])?!this.beforeFunctionExpression(e):!1:"function"===this.values[this.curly-4]&&(k=(e=this.values[this.curly-5])?!this.beforeFunctionExpression(e):!0)}return k};c.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)};return c}();q=function(){function c(e,k){this.errorHandler=new b.ErrorHandler;this.errorHandler.tolerant=k?"boolean"===typeof k.tolerant&&k.tolerant:
!1;this.scanner=new f.Scanner(e,this.errorHandler);this.scanner.trackComment=k?"boolean"===typeof k.comment&&k.comment:!1;this.trackRange=k?"boolean"===typeof k.range&&k.range:!1;this.trackLoc=k?"boolean"===typeof k.loc&&k.loc:!1;this.buffer=[];this.reader=new d}c.prototype.errors=function(){return this.errorHandler.errors};c.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(e)for(var k=0;k<e.length;++k){var l=e[k],m=this.scanner.source.slice(l.slice[0],
l.slice[1]);m={type:l.multiLine?"BlockComment":"LineComment",value:m};this.trackRange&&(m.range=l.range);this.trackLoc&&(m.loc=l.loc);this.buffer.push(m)}if(!this.scanner.eof()){e=null;this.trackLoc&&(e={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});k=void 0;if("/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){l=this.scanner.saveState();try{k=this.scanner.scanRegExp()}catch(n){this.scanner.restoreState(l),k=this.scanner.lex()}}else k=
this.scanner.lex();this.reader.push(k);l={type:h.TokenName[k.type],value:this.scanner.source.slice(k.start,k.end)};this.trackRange&&(l.range=[k.start,k.end]);this.trackLoc&&e&&(e.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=e);9===k.type&&(l.regex={pattern:k.pattern,flags:k.flags});this.buffer.push(l)}}return this.buffer.shift()};return c}();a.Tokenizer=q})},"esri/layers/vectorTiles/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],
function(D,q,a){function b(h,d){Array.isArray(d)?(h[0]=d[0],h[1]=d[1],h[2]=d[2],h[3]=d[3]):(h[0]=d.r,h[1]=d.g,h[2]=d.b,h[3]=d.a);return h}function g(h,d,c){void 0===d&&(d=0);void 0===c&&(c=!1);var e=h[d+3];h[d+0]*=e;h[d+1]*=e;h[d+2]*=e;c||(h[d+3]*=255);return h}Object.defineProperty(q,"__esModule",{value:!0});q.white=[255,255,255,1];var f=[0,0,0,0];q.premultiplyAlpha=g;q.copyAndPremultiply=function(h){return g(b([],h))};q.premultiplyAlphaUint32=function(h){g(b(f,h));return a.i8888to32(f[0],f[1],f[2],
f[3])};q.premultiplyAlphaRGBA=function(h){if(!h)return 0;var d=h.a;return a.i8888to32(h.r*d,h.g*d,h.b*d,255*d)}})},"esri/layers/vectorTiles/views/2d/engine/webgl/number":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=new Float32Array(1),b=new Uint32Array(a.buffer);q.nextHighestPowerOfTwo=function(g){g--;g|=g>>1;g|=g>>2;g|=g>>4;g|=g>>8;g|=g>>16;g++;return g};q.toUint32=function(g){a[0]=g;return b[0]};q.i1616to32=function(g,f){return 65535&
g|f<<16};q.i8888to32=function(g,f,h,d){return g&255|(f&255)<<8|(h&255)<<16|d<<24};q.i8816to32=function(g,f,h){return g&255|(f&255)<<8|h<<16};q.numTo32=function(g){return g|0}})},"esri/layers/vectorTiles/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});D=function(){function b(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=
this.offsetY=this.offsetX=this.angle=0}b.prototype.acquire=function(g,f,h,d,c,e,k,l,m){this.color=g;this.haloColor=f;this.haloSize=h;this.size=d;this.angle=c;this.offsetX=e;this.offsetY=k;this.hAnchor=l;this.vAnchor=m};b.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};b.pool=new a(b);return b}();q.TextProperties=
D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushInfo":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../GeometryUtils ./WGLBrush ../shaders/glShaderSnippets ../../../tiling/enums ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,g,f,h,d,c,e,k){Object.defineProperty(q,"__esModule",{value:!0});D=function(l){function m(){var n=l.call(this)||this;n._initialized=
!1;n._maxWidth=0;n._color=new Float32Array([1,0,0,1]);return n}a(m,l);m.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null);this._canvas=
null};m.prototype.draw=function(n,p){var v=n.context;if(p.status!==h.TileStatus.INITIALIZED){this._initialized||this._initialize(v);v.bindVAO(this._outlineVertexArrayObject);v.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",p.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",p.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",512);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",
this._color);v.setLineWidth(2);v.drawArrays(3,0,4);v.bindVAO();var r=this._getTexture(v,p);r&&(v.bindVAO(this._tileInfoVertexArrayObject),v.bindProgram(this._tileInfoProgram),v.bindTexture(r,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",p.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",p.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",1),this._tileInfoProgram.setUniform2f("u_delta",
8,8),this._tileInfoProgram.setUniform2f("u_dimensions",r.descriptor.width,r.descriptor.height),v.drawArrays(5,0,4),v.bindVAO())}};m.prototype._initialize=function(n){if(this._initialized)return!0;var p={a_pos:0},v=new c(n,f.backgroundVS,f.backgroundFS,p),r=new c(n,f.tileInfoVS,f.tileInfoFS,p),y={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},x=new Int8Array([0,0,1,0,1,1,0,1]);x=d.createVertex(n,35044,x);x=new k(n,p,y,{geometry:x});var z=new Int8Array([0,0,1,
0,0,1,1,1]);z=d.createVertex(n,35044,z);n=new k(n,p,y,{geometry:z});this._outlineProgram=v;this._tileInfoProgram=r;this._outlineVertexArrayObject=x;this._tileInfoVertexArrayObject=n;return this._initialized=!0};m.prototype._getTexture=function(n,p){if(p.texture)return p.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));
var v=p.key.id,r=this._canvas.getContext("2d");r.font="24px sans-serif";r.textAlign="left";r.textBaseline="middle";var y=r.measureText(v);y=Math.pow(2,Math.ceil(b.log2(y.width+2)));y>this._maxWidth&&(this._maxWidth=y);r.clearRect(0,0,this._maxWidth,32);r.fillStyle="blue";r.fillText(v,0,16);p.texture=new e(n,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return p.texture};return m}(g["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrush":function(){define(["require",
"exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){return function(){}}();q["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/glShaderSnippets":function(){define("require exports dojo/text!./backgroundShaders.xml dojo/text!./bitblitShaders.xml dojo/text!./stencilShaders.xml dojo/text!./tileInfo.xml ../../../../webgl/ShaderSnippets".split(" "),function(D,q,a,b,g,f,h){D=new h;h.parse(a,D);h.parse(b,D);h.parse(g,D);h.parse(f,D);return D})},
"esri/layers/vectorTiles/views/2d/tiling/enums":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=q.TileStatus||(q.TileStatus={});a[a.INITIALIZED=0]="INITIALIZED";a[a.NO_DATA=1]="NO_DATA";a[a.READY=2]="READY";a[a.MODIFIED=3]="MODIFIED";a[a.INVALID=4]="INVALID"})},"esri/layers/vectorTiles/views/webgl/BufferObject":function(){define(["require","exports","dojo/has"],function(D,q,a){return function(){function b(g,f,h,d,c){this._glName=this._context=
null;this._bufferType=void 0;this._usage=35044;this._size=-1;this._indexType=void 0;this._context=g;this._bufferType=f;this._usage=h;this._id=b._nextId++;this._glName=this._context.gl.createBuffer();a("esri-webgl-debug")&&g.instanceCounter.incrementCount(1);d&&this.setData(d,c)}b.createIndex=function(g,f,h,d){return new b(g,34963,f,h,d)};b.createVertex=function(g,f,h){return new b(g,34962,f,h)};Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"usage",{get:function(){return this._usage},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bufferType",{get:function(){return this._bufferType},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"indexType",{get:function(){return this._indexType},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"byteSize",{get:function(){return 34962===this._bufferType?this._size:5125===this._indexType?4*this._size:2*this._size},enumerable:!0,configurable:!0});b.prototype.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(1),this._context=null)};b.prototype.setData=function(g,f){if(g){if("number"===typeof g){if(34963===
this._bufferType&&f)switch(this._indexType=f,this._size=g,f){case 5123:g*=2;break;case 5125:g*=4}}else{var h=g.byteLength;g instanceof Uint16Array&&(h/=2,this._indexType=5123);g instanceof Uint32Array&&(h/=4,this._indexType=5125);this._size=h;ArrayBuffer.isView(g)&&(g=g.buffer)}h=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this._bufferType,g,this._usage);this._context.bindVAO(h)}};b.prototype.setSubData=function(g,f,h,d){void 0===
f&&(f=0);void 0===h&&(h=0);if(g){var c=d,e=g.byteLength;g instanceof Uint16Array&&(e/=2,f*=2,h*=2,c*=2);g instanceof Uint32Array&&(e/=4,f*=4,h*=4,c*=4);void 0===d&&(d=e-1);d=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);e=this._context.gl;g=ArrayBuffer.isView(g)?g.buffer:g;e.bufferSubData(this._bufferType,f,g.slice(h,c));this._context.bindVAO(d)}};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/Texture":function(){define(["require","exports",
"dojo/has"],function(D,q,a){return function(){function b(g,f,h){this._glName=this._context=null;this._id=-1;this._desc=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;this._boundToUnits=new Set;this._context=g;this._desc={pixelFormat:f.pixelFormat,internalFormat:f.internalFormat,dataType:f.dataType,target:f.target?f.target:3553,samplingMode:f.samplingMode?f.samplingMode:9729,wrapMode:f.wrapMode?f.wrapMode:10497,maxAnisotropy:f.maxAnisotropy,flipped:void 0!==f.flipped?f.flipped:!1,hasMipmap:void 0!==
f.hasMipmap?f.hasMipmap:!1,level:void 0!==f.level?f.level:0,unpackAlignment:f.unpackAlignment?f.unpackAlignment:4,width:f.width,height:f.height,preMultiplyAlpha:void 0!==f.preMultiplyAlpha?f.preMultiplyAlpha:!1};this._id=++b._nextId;a("esri-webgl-debug")&&g.instanceCounter.incrementCount(0);this.setData(h)}Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});b.prototype.dispose=function(){var g=this;if(this._context){if(this._glName){var f=this._context.gl;this._boundToUnits.forEach(function(h){g._context.bindTexture(null,h)});f.deleteTexture(this._glName);this._glName=null}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0);this._context=null}};b.prototype.resize=function(g,f){var h=this._desc;if(h.width!==
g||h.height!==f)h.width=g,h.height=f,this.setData(null)};b.prototype.setData=function(g){var f=this._context.gl;this._glName||(this._glName=f.createTexture());void 0===g&&(g=null);null===g&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var h=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var d=this._desc;b._validateTexture(d);f.pixelStorei(f.UNPACK_ALIGNMENT,d.unpackAlignment);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,d.flipped?1:0);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
d.preMultiplyAlpha);if(g instanceof ImageData||g instanceof HTMLImageElement||g instanceof HTMLCanvasElement||g instanceof HTMLVideoElement)f.texImage2D(f.TEXTURE_2D,d.level,d.internalFormat?d.internalFormat:d.pixelFormat,d.pixelFormat,d.dataType,g),void 0===this._desc.width&&(this._desc.width=g.width),void 0===this._desc.height&&(this._desc.height=g.height);else{var c=d.internalFormat?d.internalFormat:d.pixelFormat,e=d.pixelFormat;f.DEPTH24_STENCIL8&&c===f.DEPTH_STENCIL&&(c=f.DEPTH24_STENCIL8);f.texImage2D(f.TEXTURE_2D,
d.level,c,d.width,d.height,0,e,d.dataType,g)}d.hasMipmap&&this.generateMipmap();b._applySamplingMode(f,this._desc);b._applyWrapMode(f,this._desc);b._applyAnisotropicFilteringParameters(this._context,this._desc);this._context.bindTexture(h,0)};b.prototype.updateData=function(g,f,h,d,c,e){var k=this._context.gl,l=this._desc,m=this._context.getBoundTexture(0);this._context.bindTexture(this,0);e instanceof ImageData||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?
k.texSubImage2D(k.TEXTURE_2D,g,f,h,l.pixelFormat,l.dataType,e):k.texSubImage2D(k.TEXTURE_2D,g,f,h,d,c,l.pixelFormat,l.dataType,e);this._context.bindTexture(m,0)};b.prototype.generateMipmap=function(){var g=this._desc;g.hasMipmap||(g.hasMipmap=!0,b._validateTexture(g));9729===g.samplingMode?(this._samplingModeDirty=!0,g.samplingMode=9985):9728===g.samplingMode&&(this._samplingModeDirty=!0,g.samplingMode=9984);g=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var f=this._context.gl;
f.generateMipmap(f.TEXTURE_2D);this._context.bindTexture(g,0)};b.prototype.setSamplingMode=function(g){g!==this._desc.samplingMode&&(this._desc.samplingMode=g,b._validateTexture(this._desc),this._samplingModeDirty=!0)};b.prototype.setWrapMode=function(g){g!==this._desc.wrapMode&&(this._desc.wrapMode=g,b._validateTexture(this._desc),this._wrapModeDirty=!0)};b.prototype.applyChanges=function(){var g=this._context.gl,f=this._desc;this._samplingModeDirty&&(b._applySamplingMode(g,f),this._samplingModeDirty=
!1);this._wrapModeDirty&&(b._applyWrapMode(g,f),this._wrapModeDirty=!1)};b.prototype.setBoundToUnit=function(g,f){f?this._boundToUnits.add(g):this._boundToUnits["delete"](g)};b._isPowerOfTwo=function(g){return 0===(g&g-1)};b._validateTexture=function(g){b._isPowerOfTwo(g.width)&&b._isPowerOfTwo(g.height)};b._applySamplingMode=function(g,f){var h=f.samplingMode;if(9985===h||9987===h)h=9729;else if(9984===h||9986===h)h=9728;g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,h);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_MIN_FILTER,f.samplingMode)};b._applyWrapMode=function(g,f){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,f.wrapMode);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,f.wrapMode)};b._applyAnisotropicFilteringParameters=function(g,f){if(null!=f.maxAnisotropy){var h=g.capabilities.textureFilterAnisotropic;if(h){var d=g.gl;d.texParameterf(d.TEXTURE_2D,h.TEXTURE_MAX_ANISOTROPY,f.maxAnisotropy)}}};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/webgl/VertexArrayObject":function(){define(["require",
"exports","dojo/has","./Util"],function(D,q,a,b){return function(){function g(f,h,d,c,e){this._locations=this._layout=this._glName=this._context=null;this._indexBuffer=this._buffers=void 0;this._initialized=!1;this._context=f;this._layout=d;this._buffers=c;this._locations=h;e&&(this._indexBuffer=e);this._id=g._nextId++;a("esri-webgl-debug")&&f.instanceCounter.incrementCount(2)}Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,
"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"vertexBuffers",{get:function(){return this._buffers},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"indexBuffer",{get:function(){return this._indexBuffer},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"size",{get:function(){var f=this;return Object.keys(this._buffers).reduce(function(h,d){return h+f._buffers[d].size},this._indexBuffer?this._indexBuffer.size:
0)},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"locations",{get:function(){return this._locations},enumerable:!0,configurable:!0});g.prototype.dispose=function(f){void 0===f&&(f=!0);if(this._context){var h=this._context.capabilities.vao;h&&this._glName&&(h.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);
if(f){for(var d in this._buffers)this._buffers[d].dispose(),delete this._buffers[d];this._indexBuffer&&(this._indexBuffer.dispose(),this._indexBuffer=null)}a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(2);this._context=null}};g.prototype.initialize=function(){if(!this._initialized){var f=this._context.capabilities.vao;if(f){var h=f.createVertexArray();f.bindVertexArray(h);this._bindLayout();f.bindVertexArray(null);this._glName=h}this._initialized=!0}};g.prototype.bind=function(){this.initialize();
var f=this._context.capabilities.vao;f?f.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};g.prototype._bindLayout=function(){var f=this._buffers,h=!!this._context.capabilities.vao,d=this._layout,c=this._indexBuffer,e=this._context.gl,k;for(k in f)b.bindVertexBufferLayout(this._context,this._locations,f[k],d[k]);c&&(h?e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,c.glName):this._context.bindBuffer(c))};g.prototype.unbind=function(){this.initialize();var f=this._context.capabilities.vao;
f?f.bindVertexArray(null):this._unbindLayout()};g.prototype._unbindLayout=function(){var f=this._buffers,h=this._layout,d;for(d in f)b.unbindVertexBufferLayout(this._context,this._locations,f[d],h[d]);(f=this._indexBuffer)&&this._context.unbindBuffer(f.bufferType)};g._nextId=0;return g}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLBrushStencil":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/libs/gl-matrix/vec4 ./WGLBrush ../shaders/glShaderSnippets ../../../../webgl/BufferObject ../../../../webgl/Program ../../../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,g,f,h,d,c){Object.defineProperty(q,"__esModule",{value:!0});D=function(e){function k(){var l=e.call(this)||this;l._color=b.create();l._initialized=!1;l._color.set([1,0,0,1]);return l}a(k,e);k.prototype.dispose=function(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null);this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)};k.prototype.draw=function(l,m){var n=l.context;this._initialized||this._initialize(n);
n.setStencilFunctionSeparate(1032,519,m.stencilRef,255);n.bindVAO(this._solidVertexArrayObject);n.bindProgram(this._solidProgram);this._solidProgram.setUniformMatrix4fv("u_transformMatrix",m.tileTransform.transform);this._solidProgram.setUniform2fv("u_normalized_origin",m.tileTransform.displayCoord);this._solidProgram.setUniform1f("u_coord_range",512);this._solidProgram.setUniform1f("u_depth",0);this._solidProgram.setUniform4fv("u_color",this._color);n.drawArrays(5,0,4);n.bindVAO()};k.prototype._initialize=
function(l){if(this._initialized)return!0;var m={a_pos:0},n=new d(l,f.backgroundVS,f.backgroundFS,m);if(!n)return!1;var p=new Int8Array([0,0,1,0,0,1,1,1]);p=h.createVertex(l,35044,p);l=new c(l,m,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:p});this._solidProgram=n;this._solidVertexArrayObject=l;return this._initialized=!0};return k}(g["default"]);q["default"]=D})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec4":function(){define(["./common"],
function(D){var q={create:function(){var a=new D.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new D.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,g,f){var h=new D.ARRAY_TYPE(4);h[0]=a;h[1]=b;h[2]=g;h[3]=f;return h},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,g,f,h){a[0]=b;a[1]=g;a[2]=f;a[3]=h;return a},add:function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];return a},
subtract:function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=b[3]-g[3];return a}};q.sub=q.subtract;q.multiply=function(a,b,g){a[0]=b[0]*g[0];a[1]=b[1]*g[1];a[2]=b[2]*g[2];a[3]=b[3]*g[3];return a};q.mul=q.multiply;q.divide=function(a,b,g){a[0]=b[0]/g[0];a[1]=b[1]/g[1];a[2]=b[2]/g[2];a[3]=b[3]/g[3];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=
Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};q.min=function(a,b,g){a[0]=Math.min(b[0],g[0]);a[1]=Math.min(b[1],g[1]);a[2]=Math.min(b[2],g[2]);a[3]=Math.min(b[3],g[3]);return a};q.max=function(a,b,g){a[0]=Math.max(b[0],g[0]);a[1]=Math.max(b[1],g[1]);a[2]=Math.max(b[2],g[2]);a[3]=Math.max(b[3],g[3]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};q.scale=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*
g;a[2]=b[2]*g;a[3]=b[3]*g;return a};q.scaleAndAdd=function(a,b,g,f){a[0]=b[0]+g[0]*f;a[1]=b[1]+g[1]*f;a[2]=b[2]+g[2]*f;a[3]=b[3]+g[3]*f;return a};q.distance=function(a,b){var g=b[0]-a[0],f=b[1]-a[1],h=b[2]-a[2],d=b[3]-a[3];return Math.sqrt(g*g+f*f+h*h+d*d)};q.dist=q.distance;q.squaredDistance=function(a,b){var g=b[0]-a[0],f=b[1]-a[1],h=b[2]-a[2],d=b[3]-a[3];return g*g+f*f+h*h+d*d};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],g=a[1],f=a[2];a=a[3];return Math.sqrt(b*b+g*g+f*f+a*a)};q.len=
q.length;q.squaredLength=function(a){var b=a[0],g=a[1],f=a[2];a=a[3];return b*b+g*g+f*f+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};q.normalize=function(a,b){var g=b[0],f=b[1],h=b[2],d=b[3],c=g*g+f*f+h*h+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=g*c,a[1]=f*c,a[2]=h*c,a[3]=d*c);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};q.lerp=function(a,
b,g,f){var h=b[0],d=b[1],c=b[2];b=b[3];a[0]=h+f*(g[0]-h);a[1]=d+f*(g[1]-d);a[2]=c+f*(g[2]-c);a[3]=b+f*(g[3]-b);return a};q.random=function(a,b){b=b||1;a[0]=D.RANDOM();a[1]=D.RANDOM();a[2]=D.RANDOM();a[3]=D.RANDOM();q.normalize(a,a);q.scale(a,a,b);return a};q.transformMat4=function(a,b,g){var f=b[0],h=b[1],d=b[2];b=b[3];a[0]=g[0]*f+g[4]*h+g[8]*d+g[12]*b;a[1]=g[1]*f+g[5]*h+g[9]*d+g[13]*b;a[2]=g[2]*f+g[6]*h+g[10]*d+g[14]*b;a[3]=g[3]*f+g[7]*h+g[11]*d+g[15]*b;return a};q.transformQuat=function(a,b,g){var f=
b[0],h=b[1],d=b[2],c=g[0],e=g[1],k=g[2];g=g[3];var l=g*f+e*d-k*h,m=g*h+k*f-c*d,n=g*d+c*h-e*f;f=-c*f-e*h-k*d;a[0]=l*g+f*-c+m*-k-n*-e;a[1]=m*g+f*-e+n*-c-l*-k;a[2]=n*g+f*-k+l*-e-m*-c;a[3]=b[3];return a};q.forEach=function(){var a=q.create();return function(b,g,f,h,d,c){g||(g=4);f||(f=0);for(h=h?Math.min(h*g+f,b.length):b.length;f<h;f+=g)a[0]=b[f],a[1]=b[f+1],a[2]=b[f+2],a[3]=b[f+3],d(a,a,c),b[f]=a[0],b[f+1]=a[1],b[f+2]=a[2],b[f+3]=a[3];return b}}();q.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};q.equals=function(a,b){var g=a[0],f=a[1],h=a[2],d=a[3],c=b[0],e=b[1],k=b[2],l=b[3];return Math.abs(g-c)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(c))&&Math.abs(f-e)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(e))&&Math.abs(h-k)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-l)<=D.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))};return q})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushFill":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,g,f,h){Object.defineProperty(q,"__esModule",{value:!0});D=function(d){function c(){var e=null!==d&&d.apply(this,arguments)||this;e._isInitialized=!1;e._fillAttributeLocations={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4};e._fillAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_tlbr:3,a_aux:4,a_vv:5};e._spritesTextureSize=new Float32Array(2);return e}a(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return b.WGLGeometryType.FILL};c.prototype.drawGeometry=
function(e,k,l,m){m=e.context;var n=e.painter,p=e.rendererInfo,v=e.requiredLevel,r=e.stationary,y=l.indexCount,x=l.indexFrom;this._initialize();var z=l.materialInfo.materialKeyInfo,u=z.hasVV()?this._fillAttributeLocationsVV:this._fillAttributeLocations;if(u=e.painter.materialManager.getProgram(l.materialInfo.materialKey,e.drawPhase,u)){m.bindProgram(u);var w=this._getVAO(m,k,z.hasVV());m.bindVAO(w);if(0<l.materialInfo.texBindingInfo.length){l=l.materialInfo.texBindingInfo[0];w=l.pageId;var t=e.painter.textureManager.sprites;
this._spritesTextureSize[0]=t.getWidth(w);this._spritesTextureSize[1]=t.getHeight(w);u.setUniform1f("u_zoomFactor",1/Math.pow(2,v-k.key.level)/e.pixelRatio);n.textureManager.bindSpritePage(m,w,l.unit,r?9728:9729);u.setUniform1i(l.semantic,l.unit);u.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}u.setUniformMatrix4fv("u_transformMatrix",k.tileTransform.transform);u.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord);u.setUniform1f("u_opacity",1);z.vvColor&&(u.setUniform1fv("u_vvColorValues",
p.vvColorValues),u.setUniform4fv("u_vvColors",p.vvColors));z.vvOpacity&&(u.setUniform1fv("u_vvOpacityValues",p.vvOpacityValues),u.setUniform1fv("u_vvOpacities",p.vvOpacities));m.drawElements(4,y,5125,4*x);m.bindVAO(null)}};c.prototype._initialize=function(){if(this._isInitialized)return!0;this._fillVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:24,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:8,stride:24,normalized:!0,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:24,normalized:!1,divisor:0}]};this._fillVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_tlbr",count:4,
type:5123,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_aux",count:4,type:5121,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_vv",count:2,type:5126,offset:24,stride:32,normalized:!1,divisor:0}]};this._isInitialized=!0};c.prototype._getVAO=function(e,k,l){if(k.fillGeometry.vao)return k.fillGeometry.vao;var m=k.fillGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],n=k.fillGeometry.indexBuffer;if(!m||!n)return null;k.fillGeometry.vao=l?new h(e,this._fillAttributeLocationsVV,this._fillVertexAttributeLayoutVV,
{geometry:m},n):new h(e,this._fillAttributeLocations,this._fillVertexAttributeLayout,{geometry:m},n);return k.fillGeometry.vao};return c}(f["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrush":function(){define(["require","exports","../../../../../core/tsSupport/extendsHelper","./WGLBrush","../util/iterator"],function(D,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});D=function(f){function h(){return null!==f&&f.apply(this,arguments)||this}
a(h,f);h.prototype.draw=function(d,c){var e=this;if(c.canDisplay){var k=this.getGeometryType(),l=c.getDisplayList(d.drawPhase),m=c.getGeometry(k);m&&g.forEachIter(l.ofType(k),function(n){return e.drawGeometry(d,c,n,m)})}};return h}(b["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/util/iterator":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.forEachIter=function(a,b){for(;;){var g=a.next();if(g.done)break;b(g.value)}}})},
"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,g,f,h){Object.defineProperty(q,"__esModule",{value:!0});D=function(d){function c(){var e=null!==d&&d.apply(this,arguments)||this;e._attributeLocations={a_pos:0,a_color:1,a_vertexOffset:2,a_texAndSize:3,a_refSymbolAndPlacementOffset:4,a_visible:5,
a_visibilityRange:6};e._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_texAndSize",count:4,type:5120,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_refSymbolAndPlacementOffset",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",
count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}],visibilityRange:[{name:"a_visibilityRange",count:2,type:5121,offset:0,stride:2,normalized:!1,divisor:0}]};e._glyphsTextureSize=new Float32Array(2);return e}a(c,d);c.prototype.dispose=function(){};c.prototype.drawGeometry=function(e,k,l,m){if(e.requiredLevel===k.key.level){m=e.context;var n=e.painter,p=e.drawPhase,v=l.materialInfo,r=l.indexCount;l=l.indexFrom;var y=this._attributeLocations,x=e.drawPhase===b.WGLDrawPhase.LABEL_ALPHA,z=v.materialKey;
x&&(z|=8);if(p=n.materialManager.getProgram(z,p,y))m.setStencilTestEnabled(!1),m.bindProgram(p),y=this._getVAO(m,k),m.bindVAO(y),x?(m.setBlendingEnabled(!1),p.setUniform1f("u_fadeStep",e.labelStep)):(v=v.texBindingInfo[0],n.textureManager.bindGlyphsPage(m,v.pageId,v.unit),p.setUniform1i(v.semantic,v.unit)),v=n.textureManager.glyphs,this._glyphsTextureSize[0]=v.width/4,this._glyphsTextureSize[1]=v.height/4,n=n.extrudeNoRotationMatrix,m.bindTexture(e.labelFBO.colorTexture,3),p.setUniform1i("u_referenceTex",
3),p.setUniformMatrix4fv("u_transformMatrix",k.tileTransform.transform),p.setUniformMatrix4fv("u_extrudeMatrix",n),p.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),p.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),p.setUniform1f("u_pixelRatio",e.pixelRatio),p.setUniform1f("u_opacity",1),p.setUniform1f("u_zoomLevel",10*e.displayLevel),p.setUniform1f("u_mapRotation",e.state.rotation),p.setUniform1f("u_mapAligned",0),p.setUniform2fv("u_screenSize",e.state.size),m.drawElements(4,
r,5125,4*l),m.bindVAO(null),m.setStencilTestEnabled(!0),m.setBlendingEnabled(!0)}};c.prototype.getGeometryType=function(){return b.WGLGeometryType.LABEL};c.prototype._getVAO=function(e,k){var l=k.labelGeometry;if(l&&l.vao)return l.vao;var m=l.vertexBufferMap[g.C_VBO_GEOMETRY],n=l.vertexBufferMap[g.C_VBO_VISIBILITY_RANGE],p=l.indexBuffer;if(!m||!p||!n)return null;l.vao=new h(e,this._attributeLocations,this._vertexAttributeLayout,{geometry:m,visibility:l.vertexBufferMap[g.C_VBO_VISIBILITY],visibilityRange:n},
p);return l.vao};return c}(f["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushLine":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,g,f,h){Object.defineProperty(q,"__esModule",{value:!0});D=function(d){function c(){var e=null!==d&&d.apply(this,arguments)||this;e._lineAttributeLocations={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,
a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6};e._lineAttributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_offsetAndNormal:3,a_accumulatedDistanceAndHalfWidth:4,a_tlbr:5,a_segmentDirection:6,a_vv:7};e._lineVertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:32,normalized:!0,divisor:0},{name:"a_offsetAndNormal",
count:4,type:5120,offset:12,stride:32,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:32,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:32,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:32,normalized:!1,divisor:0}]};e._lineVertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:44,
normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:44,normalized:!0,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:12,stride:44,normalized:!1,divisor:0},{name:"a_accumulatedDistanceAndHalfWidth",count:2,type:5123,offset:16,stride:44,normalized:!1,divisor:0},{name:"a_tlbr",count:4,type:5123,offset:20,stride:44,normalized:!1,divisor:0},{name:"a_segmentDirection",count:4,type:5120,offset:28,stride:44,normalized:!1,divisor:0},{name:"a_vv",count:3,type:5126,offset:32,
stride:44,normalized:!1,divisor:0}]};e._spritesTextureSize=new Float32Array(2);return e}a(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=function(){return b.WGLGeometryType.LINE};c.prototype.drawGeometry=function(e,k,l,m){m=e.context;var n=e.painter,p=e.rendererInfo,v=e.requiredLevel,r=e.drawPhase,y=l.indexFrom,x=l.indexCount,z=l.materialInfo;l=z.materialKeyInfo;var u=l.hasVV()?this._lineAttributeLocationsVV:this._lineAttributeLocations;if(r=n.materialManager.getProgram(z.materialKey,
r,u)){m.bindProgram(r);u=this._getVAO(m,k,l.hasVV());m.bindVAO(u);u=1/e.pixelRatio;if(0<z.texBindingInfo.length){z=z.texBindingInfo[0];var w=z.pageId,t=n.textureManager.sprites;this._spritesTextureSize[0]=t.getWidth(w);this._spritesTextureSize[1]=t.getHeight(w);n.textureManager.bindSpritePage(m,w,z.unit);r.setUniform1i(z.semantic,z.unit);r.setUniform2fv("u_mosaicSize",this._spritesTextureSize)}e=Math.pow(2,v-k.key.level)/e.pixelRatio;r.setUniform1f("u_zoomFactor",e);r.setUniformMatrix4fv("u_transformMatrix",
k.tileTransform.transform);r.setUniformMatrix4fv("u_extrudeMatrix",n.extrudeMatrix);r.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord);r.setUniform1f("u_opacity",1);r.setUniform1f("u_blur",0+u);r.setUniform1f("u_antialiasing",u);r.setUniform1f("u_zoomFactor",e);l.vvSizeMinMaxValue&&r.setUniform4fv("u_vvSizeMinMaxValue",p.vvSizeMinMaxValue);l.vvSizeScaleStops&&r.setUniform1f("u_vvSizeScaleStopsValue",p.vvSizeScaleStopsValue);l.vvSizeFieldStops&&(r.setUniform1fv("u_vvSizeFieldStopsValues",
p.vvSizeFieldStopsValues),r.setUniform1fv("u_vvSizeFieldStopsSizes",p.vvSizeFieldStopsSizes));l.vvSizeUnitValue&&r.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",p.vvSizeUnitValueToPixelsRatio);l.vvColor&&(r.setUniform1fv("u_vvColorValues",p.vvColorValues),r.setUniform4fv("u_vvColors",p.vvColors));l.vvOpacity&&(r.setUniform1fv("u_vvOpacityValues",p.vvOpacityValues),r.setUniform1fv("u_vvOpacities",p.vvOpacities));m.setFaceCullingEnabled(!0);m.setFrontFace(2305);m.setCullFace(1029);m.drawElements(4,
x,5125,4*y);m.setFaceCullingEnabled(!1);m.bindVAO(null)}};c.prototype._getVAO=function(e,k,l){if(k.lineGeometry.vao)return k.lineGeometry.vao;var m=k.lineGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],n=k.lineGeometry.indexBuffer;if(!m||!n)return null;k.lineGeometry.vao=l?new h(e,this._lineAttributeLocationsVV,this._lineVertexAttributeLayoutVV,{geometry:m},n):new h(e,this._lineAttributeLocations,this._lineVertexAttributeLayout,{geometry:m},n);return k.lineGeometry.vao};return c}(f["default"]);q["default"]=
D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/Texture ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,g,f,h,d){Object.defineProperty(q,"__esModule",{value:!0});D=function(c){function e(){var k=null!==c&&c.apply(this,arguments)||this;k._iconAttributeLocations={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,
a_outlineColor:5,a_sizeAndOutlineWidth:6};k._iconAttributeLocationsVV={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_vv:7};k._iconAttributeLocationsHeatmap={a_pos:0,a_vertexOffset:1,a_vertexTex:2,a_id:3,a_color:4,a_outlineColor:5,a_sizeAndOutlineWidth:6,a_weight:7};k._iconVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:28,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:28,normalized:!1,
divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:28,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:28,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:28,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:28,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:28,normalized:!1,divisor:0}]};k._iconVertexAttributesWithVV={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:44,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:44,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:44,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:44,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:44,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:44,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,
stride:44,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:28,stride:44,normalized:!1,divisor:0}]};k._iconVertexAttributesWithHeatmap={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:32,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:32,normalized:!1,divisor:0},{name:"a_vertexTex",count:4,type:5121,offset:8,stride:32,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:12,stride:32,normalized:!0,divisor:0},{name:"a_color",count:4,
type:5121,offset:16,stride:32,normalized:!0,divisor:0},{name:"a_outlineColor",count:4,type:5121,offset:20,stride:32,normalized:!0,divisor:0},{name:"a_sizeAndOutlineWidth",count:4,type:5121,offset:24,stride:32,normalized:!1,divisor:0},{name:"a_weight",count:1,type:5126,offset:28,stride:32,normalized:!1,divisor:0}]};k._spritesTextureSize=new Float32Array(2);return k}a(e,c);e.prototype.dispose=function(){};e.prototype.getGeometryType=function(){return b.WGLGeometryType.MARKER};e.prototype.drawGeometry=
function(k,l,m,n){n=k.context;var p=k.painter,v=k.rendererInfo,r=k.drawPhase;k=m.indexCount;var y=m.indexFrom,x=m.materialInfo;m=x.materialKeyInfo;var z=m.heatmap,u=m.hasVV()?this._iconAttributeLocationsVV:this._iconAttributeLocations;if(r=p.materialManager.getProgram(x.materialKey,r,u))n.bindProgram(r),u=this._getVAO(n,l,m.hasVV(),z),n.bindVAO(u),z?(x=this._getIntensityTexture(n,v.heatmapParameters),n.bindTexture(x,1),r.setUniform1i("u_texture",1),this._spritesTextureSize[0]=Math.round(v.heatmapParameters.radius),
this._spritesTextureSize[1]=Math.round(v.heatmapParameters.radius)):(z=x.texBindingInfo[0],x=z.pageId,p.textureManager.bindSpritePage(n,x,z.unit),r.setUniform1i(z.semantic,z.unit),z=p.textureManager.sprites,this._spritesTextureSize[0]=z.getWidth(x)/4,this._spritesTextureSize[1]=z.getHeight(x)/4),p=v.vvMaterialParameters.vvRotationEnabled&&"geographic"===v.vvMaterialParameters.vvRotationType?p.extrudeMatrix:p.extrudeNoRotationMatrix,r.setUniformMatrix4fv("u_transformMatrix",l.tileTransform.transform),
r.setUniformMatrix4fv("u_extrudeMatrix",p),r.setUniform2fv("u_normalized_origin",l.tileTransform.displayCoord),r.setUniform2fv("u_mosaicSize",this._spritesTextureSize),r.setUniform1f("u_opacity",1),m.vvSizeMinMaxValue&&r.setUniform4fv("u_vvSizeMinMaxValue",v.vvSizeMinMaxValue),m.vvSizeScaleStops&&r.setUniform1f("u_vvSizeScaleStopsValue",v.vvSizeScaleStopsValue),m.vvSizeFieldStops&&(r.setUniform1fv("u_vvSizeFieldStopsValues",v.vvSizeFieldStopsValues),r.setUniform1fv("u_vvSizeFieldStopsSizes",v.vvSizeFieldStopsSizes)),
m.vvSizeUnitValue&&r.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",v.vvSizeUnitValueToPixelsRatio),m.vvColor&&(r.setUniform1fv("u_vvColorValues",v.vvColorValues),r.setUniform4fv("u_vvColors",v.vvColors)),m.vvOpacity&&(r.setUniform1fv("u_vvOpacityValues",v.vvOpacityValues),r.setUniform1fv("u_vvOpacities",v.vvOpacities)),m.vvRotation&&r.setUniform1f("u_vvRotationType","geographic"===v.vvMaterialParameters.vvRotationType?0:1),n.drawElements(4,k,5125,4*y),n.bindVAO(null)};e.prototype._getVAO=function(k,
l,m,n){if(l.iconGeometry.vao)return l.iconGeometry.vao;var p=l.iconGeometry.vertexBufferMap[g.C_VBO_GEOMETRY],v=l.iconGeometry.indexBuffer;if(!p||!v)return null;l.iconGeometry.vao=m?new d(k,this._iconAttributeLocationsVV,this._iconVertexAttributesWithVV,{geometry:p},v):n?new d(k,this._iconAttributeLocationsHeatmap,this._iconVertexAttributesWithHeatmap,{geometry:p},v):new d(k,this._iconAttributeLocations,this._iconVertexAttributes,{geometry:p},v);return l.iconGeometry.vao};e.prototype._getIntensityTexture=
function(k,l){if(l.intensityKernel&&!l.refreshIntensityKernel)return l.intensityKernel;l.intensityKernel&&(l.intensityKernel.dispose(),l.intensityKernel=null);for(var m=l.radius,n=l.kernelSize,p=l.blurRadius,v=m*m,r=[],y=-1;++y<n;)r[y]=Math.exp(-Math.pow(y-p,2)/(2*v))/(m/2*Math.sqrt(2*Math.PI));m=[];for(var x,z=0;z<n;z++)for(v=r[z],y=0;y<n;y++)x=z*n+y,p=r[y],m[4*x]=v*p,m[4*x+1]=0,m[4*x+2]=0,m[4*x+3]=1;n=new h(k,{target:3553,pixelFormat:6408,internalFormat:k.capabilities.colorBufferFloat.RGBA32F,dataType:5126,
samplingMode:k.capabilities.textureFloatLinear?9729:9728,wrapMode:33071,width:n,height:n},new Float32Array(m));l.intensityKernel=n;l.refreshIntensityKernel=!1;return n};return e}(f["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/brushes/WGLGeometryBrushText":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../enums ../Utils ./WGLGeometryBrush ../../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,g,f,h){Object.defineProperty(q,"__esModule",
{value:!0});D=function(d){function c(){var e=null!==d&&d.apply(this,arguments)||this;e._attributeLocations={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_visible:5};e._attributeLocationsVV={a_pos:0,a_id:1,a_color:2,a_vertexOffset:3,a_texFontSize:4,a_vv:5,a_visible:6};e._vertexAttributeLayout={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:20,normalized:!0,divisor:0},{name:"a_color",count:4,type:5121,
offset:8,stride:20,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:20,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:20,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};e._vertexAttributeLayoutVV={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:36,normalized:!1,divisor:0},{name:"a_id",count:4,type:5121,offset:4,stride:36,normalized:!0,divisor:0},{name:"a_color",
count:4,type:5121,offset:8,stride:36,normalized:!0,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:12,stride:36,normalized:!1,divisor:0},{name:"a_texFontSize",count:4,type:5120,offset:16,stride:36,normalized:!1,divisor:0},{name:"a_vv",count:4,type:5126,offset:20,stride:36,normalized:!1,divisor:0}],visibility:[{name:"a_visible",count:1,type:5121,offset:0,stride:1,normalized:!0,divisor:0}]};e._glyphsTextureSize=new Float32Array(2);return e}a(c,d);c.prototype.dispose=function(){};c.prototype.getGeometryType=
function(){return b.WGLGeometryType.TEXT};c.prototype.drawGeometry=function(e,k,l,m){m=e.context;var n=e.painter,p=e.rendererInfo,v=l.materialInfo,r=l.indexCount;l=l.indexFrom;var y=v.materialKeyInfo,x=y.vvSizeMinMaxValue||y.vvSizeScaleStops||y.vvSizeFieldStops||y.vvSizeUnitValue||y.vvColor||y.vvRotation||y.vvOpacity;if(e=n.materialManager.getProgram(v.materialKey,e.drawPhase,x?this._attributeLocationsVV:this._attributeLocations))m.bindProgram(e),x=this._getVAO(m,k,x,this.getGeometryType()),m.bindVAO(x),
v=v.texBindingInfo[0],n.textureManager.bindGlyphsPage(m,v.pageId,v.unit),e.setUniform1i(v.semantic,v.unit),v=n.textureManager.glyphs,this._glyphsTextureSize[0]=v.width/4,this._glyphsTextureSize[1]=v.height/4,n=p.vvMaterialParameters.vvRotationEnabled&&"geographic"===p.vvMaterialParameters.vvRotationType?n.extrudeMatrix:n.extrudeNoRotationMatrix,e.setUniformMatrix4fv("u_transformMatrix",k.tileTransform.transform),e.setUniformMatrix4fv("u_extrudeMatrix",n),e.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),
e.setUniform2fv("u_mosaicSize",this._glyphsTextureSize),e.setUniform1f("u_pixelRatio",1),e.setUniform1f("u_opacity",1),y.vvSizeMinMaxValue&&e.setUniform4fv("u_vvSizeMinMaxValue",p.vvSizeMinMaxValue),y.vvSizeScaleStops&&e.setUniform1f("u_vvSizeScaleStopsValue",p.vvSizeScaleStopsValue),y.vvSizeFieldStops&&(e.setUniform1fv("u_vvSizeFieldStopsValues",p.vvSizeFieldStopsValues),e.setUniform1fv("u_vvSizeFieldStopsSizes",p.vvSizeFieldStopsSizes)),y.vvSizeUnitValue&&e.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",
p.vvSizeUnitValueToPixelsRatio),y.vvColor&&(e.setUniform1fv("u_vvColorValues",p.vvColorValues),e.setUniform4fv("u_vvColors",p.vvColors)),y.vvOpacity&&(e.setUniform1fv("u_vvOpacityValues",p.vvOpacityValues),e.setUniform1fv("u_vvOpacities",p.vvOpacities)),y.vvRotation&&e.setUniform1f("u_vvRotationType","geographic"===p.vvMaterialParameters.vvRotationType?0:1),m.drawElements(4,r,5125,4*l),m.bindVAO(null)};c.prototype._getVAO=function(e,k,l,m){if((k=k.getGeometry(m))&&k.vao)return k.vao;m=k.vertexBufferMap[g.C_VBO_GEOMETRY];
var n=k.vertexBufferMap[g.C_VBO_VISIBILITY],p=k.indexBuffer;if(!m||!p)return null;k.vao=l?new h(e,this._attributeLocationsVV,this._vertexAttributeLayoutVV,{geometry:m,visibility:n},p):new h(e,this._attributeLocations,this._vertexAttributeLayout,{geometry:m,visibility:n},p);return k.vao};return c}(f["default"]);q["default"]=D})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/WGLHighlightPainter":function(){define(["require","exports","dojo/has","./highlight/HighlightRenderer","./highlight/HighlightSurfaces"],
function(D,q,a,b,g){return function(){function f(){this._hlRenderer=new b;this._hlSurfaces=new g;this._height=this._width=void 0}f.prototype.dispose=function(){this._hlSurfaces&&this._hlSurfaces.dispose();this._hlRenderer&&this._hlRenderer.dispose();this._boundFBO=null};f.prototype.setup=function(h,d,c){var e=d%4,k=c%4;d+=2>e?-e:4-e;c+=2>k?-k:4-k;this._width=d;this._height=c;this._boundFBO=h.getBoundFramebufferObject();d=Math.round(.75*d);c=Math.round(.75*c);this._hlRenderer.setup(h,d,c);this._hlSurfaces.setup(h,
d,c)};f.prototype.setHighlightOptions=function(h){this._hlRenderer.setHighlightOptions({fillColor:h.fillColor,outlineColor:h.outlineColor,outlineWidth:.75*h.outlineWidth,outerHaloWidth:.75*h.outerHaloWidth,innerHaloWidth:.75*h.innerHaloWidth,outlinePosition:.75*h.outlinePosition})};f.prototype.startMaskDraw=function(h){h.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo);h.setClearColor(0,0,0,0);h.setClearStencil(0);h.clear(h.gl.COLOR_BUFFER_BIT|h.gl.STENCIL_BUFFER_BIT);h.setViewport(0,0,.75*this._width,
.75*this._height)};f.prototype.draw=function(h){h.setStencilTestEnabled(!1);h.setBlendingEnabled(!1);h.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo);h.setClearColor(0,0,0,0);h.clear(h.gl.COLOR_BUFFER_BIT);this._hlRenderer.preBlur(h,this._hlSurfaces.sharedBlur1Tex);a("esri-feature-highlight-debug")?(h.bindFramebuffer(null),h.clear(h.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(h,this._hlSurfaces.sharedBlur2Tex)):(h.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),h.setClearColor(0,0,0,0),h.clear(h.gl.COLOR_BUFFER_BIT),
this._hlRenderer.finalBlur(h,this._hlSurfaces.sharedBlur2Tex),h.bindFramebuffer(this._boundFBO),h.setBlendingEnabled(!0),h.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(h,this._hlSurfaces.sharedBlur1Tex),this._boundFBO=null)};return f}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightRenderer":function(){define("require exports ../../shaders/hlShaderSnippets ../../../../../webgl/BufferObject ../../../../../webgl/ShaderVariations ../../../../../webgl/Texture ../../../../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,g,f,h){var d=[void 0,void 0,void 0,1],c=[3,4],e=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return function(){function l(){this._height=this._width=void 0;this._highlightOptions={fillColor:[.2,.6,.9,.75],outlineColor:[.2,.6,.9,.9],outlinePosition:0,outlineWidth:3.4,innerHaloWidth:2,outerHaloWidth:3.3};this._resources=null}l.prototype.dispose=function(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),
this._resources.blurProgram.dispose(),this._resources.shadeTex.dispose(),this._resources=null)};l.prototype.preBlur=function(m,n){m.bindTexture(n,c[0]);m.bindProgram(this._resources.blurProgram);this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",e);m.bindVAO(this._resources.quadVAO);m.drawArrays(5,0,4);m.bindVAO()};l.prototype.finalBlur=function(m,n){m.bindTexture(n,c[0]);m.bindProgram(this._resources.blurProgram);
this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]);this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",k);m.bindVAO(this._resources.quadVAO);m.drawArrays(5,0,4);m.bindVAO()};l.prototype.renderHighlight=function(m,n){m.bindTexture(n,c[0]);m.bindTexture(this._resources.shadeTex,c[1]);m.bindProgram(this._resources.highlightProgram);m.bindVAO(this._resources.quadVAO);m.drawArrays(5,0,4);m.bindVAO()};l.prototype._initialize=function(m,n,p){this._width=n;this._height=
p;n=new b(m,34962,35044,(new Int8Array([-128,-128,0,0,127,-128,255,0,-128,127,0,255,127,127,255,255])).buffer);p=new h(m,{a_position:0,a_texcoord:1},{geometry:[{name:"a_position",count:2,type:5120,offset:0,stride:4,normalized:!0},{name:"a_texcoord",count:2,type:5121,offset:2,stride:4,normalized:!0}]},{geometry:n});var v=(new g("hl",["texturedVS","highlightFS"],[],a,m,{a_position:0,a_texcoord:1})).getProgram([]),r=(new g("hl",["texturedVS","blurFS"],[],a,m,{a_position:0,a_texcoord:1})).getProgram([]);
v.setUniform1i("u_texture",c[0]);v.setUniform1i("u_shade",c[1]);v.setUniform4fv("u_sigmas",d);r.setUniform1i("u_texture",c[0]);r.setUniform4fv("u_sigmas",d);m=new f(m,{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,width:256,height:1,samplingMode:9728});this._resources={quadGeometry:n,quadVAO:p,highlightProgram:v,blurProgram:r,shadeTex:m}};l.prototype.setHighlightOptions=function(m){function n(t,A,G){u[0]=(1-G)*t[0]+G*A[0];u[1]=(1-G)*t[1]+G*A[1];u[2]=(1-G)*t[2]+G*A[2];u[3]=(1-G)*t[3]+G*
A[3]}this._highlightOptions=m;if(this._resources){for(var p=m.outlinePosition-m.outlineWidth/2-m.outerHaloWidth,v=m.outlinePosition-m.outlineWidth/2,r=m.outlinePosition+m.outlineWidth/2,y=m.outlinePosition+m.outlineWidth/2+m.innerHaloWidth,x=new Uint8Array(1024),z,u=[void 0,void 0,void 0,void 0],w=0;256>w;++w)z=p+w/255*(y-p),z<p?(x[4*w]=0,x[4*w+1]=0,x[4*w+2]=0,x[4*w+3]=0):z<v?n([0,0,0,0],m.outlineColor,(z-p)/(v-p)):z<r?(u[0]=m.outlineColor[0],u[1]=m.outlineColor[1],u[2]=m.outlineColor[2],u[3]=m.outlineColor[3]):
z<y?n(m.outlineColor,m.fillColor,(z-r)/(y-r)):(x[4*w]=m.fillColor[0],x[4*w+1]=m.fillColor[1],x[4*w+2]=m.fillColor[2],x[4*w+3]=m.fillColor[3]),x[4*w]=255*u[0]*u[3],x[4*w+1]=255*u[1]*u[3],x[4*w+2]=255*u[2]*u[3],x[4*w+3]=255*u[3];this._resources.highlightProgram.setUniform2fv("u_minMaxDistance",[p,y]);this._resources.shadeTex.updateData(0,0,0,256,1,x)}};l.prototype.setup=function(m,n,p){this._resources?(this._width=n,this._height=p):(this._initialize(m,n,p),this.setHighlightOptions(this._highlightOptions))};
return l}()})},"esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaderSnippets":function(){define(["require","exports","dojo/text!./hlShaders.xml","../../../../webgl/ShaderSnippets"],function(D,q,a,b){D=new b;b.parse(a,D);return D})},"esri/layers/vectorTiles/views/2d/engine/webgl/painter/highlight/HighlightSurfaces":function(){define(["require","exports","../../../../../webgl/FramebufferObject","../../../../../webgl/Texture"],function(D,q,a,b){function g(f,h,d){h=new b(f,{target:3553,pixelFormat:6408,
dataType:5121,wrapMode:33071,width:h,height:d,samplingMode:9729});f=a.createWithAttachments(f,h,{colorTarget:0,depthStencilTarget:2});return[h,f]}return function(){function f(){this._height=this._width=void 0;this._resources=null}f.prototype.dispose=function(){this._resources&&(this._resources.sharedBlur1Tex.dispose(),this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Tex.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)};f.prototype._initialize=function(h,
d,c){this._width=d;this._height=c;var e=g(h,d,c),k=e[0];e=e[1];h=g(h,d,c);this._resources={sharedBlur1Tex:k,sharedBlur1Fbo:e,sharedBlur2Tex:h[0],sharedBlur2Fbo:h[1]}};f.prototype.setup=function(h,d,c){!this._resources||this._width===d&&this._height===c||this.dispose();this._resources||this._initialize(h,d,c)};Object.defineProperty(f.prototype,"sharedBlur1Tex",{get:function(){return this._resources.sharedBlur1Tex},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"sharedBlur1Fbo",{get:function(){return this._resources.sharedBlur1Fbo},
enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"sharedBlur2Tex",{get:function(){return this._resources.sharedBlur2Tex},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"sharedBlur2Fbo",{get:function(){return this._resources.sharedBlur2Fbo},enumerable:!0,configurable:!0});return f}()})},"esri/layers/vectorTiles/views/webgl/FramebufferObject":function(){define(["require","exports","dojo/has","./Renderbuffer","./Texture"],function(D,q,a,b,g){return function(){function f(h,
d,c,e){this._colorAttachment=this._stencilAttachment=this._depthAttachment=this._glName=this._context=null;this._initialized=!1;this._context=h;this._desc={colorTarget:d.colorTarget,depthStencilTarget:d.depthStencilTarget,width:d.width,height:d.height,multisampled:d.multisampled};this._id=f._nextId++;a("esri-webgl-debug")&&h.instanceCounter.incrementCount(4);c&&(h=void 0,c instanceof g?(this._colorAttachment=c,h=c.descriptor):(h=c,this._colorAttachment=new g(this._context,h)),f._validateTextureDimensions(h,
this._desc));if(e instanceof b){if(2===d.depthStencilTarget)this._stencilAttachment=e;else if(1===d.depthStencilTarget||3===d.depthStencilTarget)this._depthAttachment=e;f._validateBufferDimensions(e.descriptor,this._desc)}else e&&(d=void 0,e instanceof g?(this._depthStencilTexture=e,d=this._depthStencilTexture.descriptor):(d=e,this._depthStencilTexture=new g(this._context,d)),f._validateTextureDimensions(d,this._desc))}f.create=function(h,d){return new f(h,d)};f.createWithAttachments=function(h,d,
c,e){return new f(h,c,d,e)};Object.defineProperty(f.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof g?this._colorAttachment:null},enumerable:!0,
configurable:!0});Object.defineProperty(f.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0});f.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),
this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)};f.prototype.attachColorTexture=function(h){if(h){f._validateTextureDimensions(h.descriptor,this._desc);this._disposeColorAttachment();if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,h.glName,0)}this._colorAttachment=h}};f.prototype.detachColorTexture=
function(){var h=void 0;if(this._colorAttachment instanceof g){h=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}this._colorAttachment=null}return h};f.prototype.attachDepthStencilTexture=function(h){if(h){f._validateTextureDimensions(h.descriptor,this._desc);4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();
if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,h.glName,0)}this._depthStencilTexture=h}};f.prototype.detachDepthStencilTexture=function(){var h=this._depthStencilTexture;if(h&&this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;this._context.gl.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return h};
f.prototype.attachDepthStencilBuffer=function(h){if(h){var d=h.descriptor;f._validateBufferDimensions(d,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===d.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),d=this._context.gl,d.framebufferRenderbuffer(d.FRAMEBUFFER,1===this._desc.depthStencilTarget?d.DEPTH_ATTACHMENT:d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,h.glName));this._depthAttachment=h}};f.prototype.detachDepthStencilBuffer=function(){var h=
this._context.gl,d=this._depthAttachment;d&&this._initialized&&(this._context.bindFramebuffer(this),h.framebufferRenderbuffer(h.FRAMEBUFFER,1===this._desc.depthStencilTarget?h.DEPTH_ATTACHMENT:h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,null));this._depthAttachment=null;return d};f.prototype.copyToTexture=function(h,d,c,e,k,l,m){var n=this._context;n.bindTexture(m);n.bindFramebuffer(this);n.gl.copyTexSubImage2D(3553,0,k,l,h,d,c,e)};f.prototype.readPixels=function(h,d,c,e,k,l,m){this._context.bindFramebuffer(this);
this._context.gl.readPixels(h,d,c,e,k,l,m)};f.prototype.resize=function(h,d){var c=this._desc;if(c.width!==h||c.height!==d)if(this._initialized)c.width=h,c.height=d,this._colorAttachment instanceof g?(e=this._colorAttachment,c=e.descriptor,c.width=h,c.height=d,this._colorAttachment.dispose(),this._colorAttachment=new g(this._context,c),f._validateTextureDimensions(e.descriptor,this._desc)):this._colorAttachment&&this._disposeColorAttachment(),null!=this._depthStencilTexture?(c=this._depthStencilTexture.descriptor,
c.width=h,c.height=d,this._depthStencilTexture.dispose(),this._depthStencilTexture=new g(this._context,c)):(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments(),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1;else{c.width=h;c.height=d;if(this._colorAttachment instanceof g){var e=this._colorAttachment;e.resize(h,d)}this._depthStencilTexture&&this._depthStencilTexture.resize(h,d)}};f.prototype.initialize=function(){if(this._initialized)return!1;
var h=this._context.gl;this._glName&&h.deleteFramebuffer(this._glName);var d=h.createFramebuffer(),c=this._desc;h.bindFramebuffer(h.FRAMEBUFFER,d);if(!this._colorAttachment)if(0===c.colorTarget)this._colorAttachment=new g(this._context,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:c.width,height:c.height});else{var e=new b(this._context,{internalFormat:32854,width:c.width,height:c.height});h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,
e.glName);this._colorAttachment=e}this._colorAttachment instanceof g&&h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,this._colorAttachment.glName,0);switch(c.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new b(this._context,{internalFormat:1===c.depthStencilTarget?33189:34041,width:c.width,height:c.height}));h.framebufferRenderbuffer(h.FRAMEBUFFER,1===c.depthStencilTarget?h.DEPTH_ATTACHMENT:h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,this._depthAttachment.glName);
break;case 2:this._stencilAttachment||(this._stencilAttachment=new b(this._context,{internalFormat:36168,width:c.width,height:c.height}));h.framebufferRenderbuffer(h.FRAMEBUFFER,h.STENCIL_ATTACHMENT,h.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(this._depthStencilTexture=new g(this._context,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:c.width,height:c.height})),h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,
h.TEXTURE_2D,this._depthStencilTexture.glName,0)}h.checkFramebufferStatus(h.FRAMEBUFFER);this._glName=d;return this._initialized=!0};f.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof g){var h=this._colorAttachment;if(this._initialized){this._context.bindFramebuffer(this);var d=this._context.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,null,0)}h.dispose()}else this._colorAttachment instanceof WebGLRenderbuffer&&(h=this._colorAttachment,d=
this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(h));this._colorAttachment=null};f.prototype._disposeDepthStencilAttachments=function(){var h=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),h.framebufferRenderbuffer(h.FRAMEBUFFER,1===this._desc.depthStencilTarget?h.DEPTH_ATTACHMENT:h.DEPTH_STENCIL_ATTACHMENT,
h.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.STENCIL_ATTACHMENT,h.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),
this._depthStencilTexture=null)};f._validateBufferDimensions=function(h,d){void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height||(d.width=h.width,d.height=h.height)};f._validateTextureDimensions=function(h,d){void 0!==d.width&&0<=d.width&&void 0!==d.height&&0<=d.height||(d.width=h.width,d.height=h.height)};f._nextId=0;return f}()})},"esri/layers/vectorTiles/views/webgl/Renderbuffer":function(){define(["require","exports","dojo/has"],function(D,q,a){return function(){function b(g,f){this._context=
g;this._desc=f;this._glName=null;this._id=-1;var h=this._context.gl;a("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5);this._id=++b._nextId;this._glName=h.createRenderbuffer();this._context.bindRenderbuffer(this);h.renderbufferStorage(h.RENDERBUFFER,f.internalFormat,f.width,f.height)}Object.defineProperty(b.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,
configurable:!0});Object.defineProperty(b.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0});b.prototype.resize=function(g,f){var h=this._context.gl,d=this._desc;if(d.width!==g||d.height!==f)d.width=g,d.height=f,this._context.bindRenderbuffer(this),h.renderbufferStorage(h.RENDERBUFFER,d.internalFormat,d.width,d.height)};b.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null);a("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5);
this._context=null};b._nextId=0;return b}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/Renderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../GeometryUtils ./BackgroundRenderer ./CircleRenderer ./FadeRecorder ./FillRenderer ./LineRenderer ./SymbolRenderer ./TileInfoRenderer ../../webgl/FramebufferObject".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l){return function(){function m(){this._extrudeRotateVector=new Float32Array([0,0,1]);this._extrudeScaleVector=new Float32Array([1,
1,1]);this._state={rotation:0,width:0,height:0};this._cachedRotation=this._cachedHeight=this._cachedWidth=0}m.prototype.initialize=function(n,p,v){void 0===v&&(v=!0);this._SpriteMosaic=n;this._glyphMosaic=p;this._ignoreSpeed=!v;this._backgroundRenderer=new g;this._lineRenderer=new c;this._fillRenderer=new d;this._symbolRenderer=new e;this._circleRenderer=new f;this._tileInfoRenderer=new k;this._fadeRecorder=new h.FadeRecorder(300);this._extrudeMatrix=new Float32Array(16);this._extrudeNoRotationMatrix=
new Float32Array(16);this._backgroundColor=new Float32Array([1,0,0,1])};m.prototype.dispose=function(){this._backgroundRenderer&&(this._backgroundRenderer.dispose(),this._backgroundRenderer=null);this._lineRenderer&&(this._lineRenderer.dispose(),this._lineRenderer=null);this._fillRenderer&&(this._fillRenderer.dispose(),this._fillRenderer=null);this._symbolRenderer&&(this._symbolRenderer.dispose(),this._symbolRenderer=null);this._circleRenderer&&(this._circleRenderer.dispose(),this._circleRenderer=
null);this._tileInfoRenderer&&(this._tileInfoRenderer.dispose(),this._tileInfoRenderer=null);this._hittestFBO&&(this._hittestFBO.dispose(),this._hittestFBO=null)};m.prototype.setStateParams=function(n,p,v){this._fadeRecorder.recordLevel(v);this._state=n;if(this._state.width!==this._cachedWidth||this._state.height!==this._cachedHeight||this._state.rotation!==this._cachedRotation)this._extrudeScaleVector[0]=2/n.width,this._extrudeScaleVector[1]=-2/n.height,a.identity(this._extrudeMatrix),a.rotate(this._extrudeMatrix,
this._extrudeMatrix,-n.rotation*b.C_DEG_TO_RAD,this._extrudeRotateVector),a.scale(this._extrudeMatrix,this._extrudeMatrix,this._extrudeScaleVector),a.transpose(this._extrudeMatrix,this._extrudeMatrix),a.identity(this._extrudeNoRotationMatrix),a.scale(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix,this._extrudeScaleVector),a.transpose(this._extrudeNoRotationMatrix,this._extrudeNoRotationMatrix),this._cachedWidth=this._state.width,this._cachedHeight=this._state.height,this._cachedRotation=
this._state.rotation};m.prototype.drawClippingMasks=function(n,p){if(0!==p.length){n.setDepthWriteEnabled(!1);n.setDepthTestEnabled(!1);n.setStencilTestEnabled(!0);n.setBlendingEnabled(!1);n.setColorMask(!1,!1,!1,!1);n.setStencilOp(7680,7680,7681);n.setStencilWriteMask(255);n.setClearStencil(0);n.clear(n.gl.STENCIL_BUFFER_BIT);for(var v=0;v<p.length;v++){var r=p[v];r.attached&&r.visible&&(n.setStencilFunctionSeparate(1032,519,r.stencilData.reference,r.stencilData.mask),this._backgroundRenderer.renderSolidColor(n,
{u_matrix:r.tileTransform.transform,u_normalized_origin:r.tileTransform.displayCoord,u_coord_range:r.coordRange,u_depth:0,u_color:this._backgroundColor}))}n.setColorMask(!0,!0,!0,!0);n.setBlendingEnabled(!0)}};m.prototype.renderDebug=function(n,p){var v=p.key;this._backgroundColor.set([v.col%2,v.row%2,0===v.col%2&&0===v.row%2?1:0,.5]);this._backgroundRenderer.renderSolidColor(n,{u_matrix:p.tileTransform.transform,u_normalized_origin:p.tileTransform.displayCoord,u_coord_range:p.coordRange,u_depth:0,
u_color:this._backgroundColor})};m.prototype.renderBucket=function(n,p,v,r,y,x,z,u){if(!(void 0!==z.minzoom&&z.minzoom>=v+1E-6||void 0!==z.maxzoom&&z.maxzoom<v-1E-6))switch(p.type){case 0:2!==y&&this._renderBackground(n,p,v,y,x,z,u);break;case 1:2!==y&&this._renderFill(n,p,v,y,x,z,u);break;case 2:1!==y&&3!==y||this._renderLine(n,p,v,y,x,z,u);break;case 3:2!==y&&3!==y||this._renderSymbol(n,p,v,y,r,x,z,u);break;case 4:2!==y&&3!==y||this._renderCircle(n,p,v,y,r,x,z,u)}};m.prototype.renderTileInfo=function(n,
p){this._tileInfoRenderer.render(n,p)};m.prototype.needsRedraw=function(){return this._fadeRecorder.needsRedraw()};m.prototype.hitTest=function(n,p,v,r,y,x,z){var u=[0,0],w=[0,0],t=n.state;t.toMap(u,[0,0]);t.toMap(w,[x,x]);p=r.filter(function(B){return!(u[0]>B.bounds[2]||w[0]<B.bounds[0]||u[1]<B.bounds[3]||w[1]>B.bounds[1])});if(0===p.length)return[];p.sort(function(B,E){return B.key.level-E.key.level});v=p.length;for(r=1;r<=v;r++){var A=p[r-1];A.attached&&(A.stencilData.reference=r,A.stencilData.mask=
255)}z(t,y,p);y=n.context;this._hittestFBO||(this._hittestFBO=l.create(y,{colorTarget:0,depthStencilTarget:3,width:x,height:x}));z=y.getViewport();t=y.getBoundFramebufferObject();y.bindFramebuffer(this._hittestFBO);y.setViewport(0,0,x,x);r=y.gl;y.setDepthWriteEnabled(!0);y.setStencilWriteMask(255);y.setClearColor(1,1,1,1);y.setClearDepth(1);y.setClearStencil(0);y.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT);y.setDepthWriteEnabled(!1);this.drawClippingMasks(y,p);y.setBlendingEnabled(!1);
y.setStencilWriteMask(0);y.setStencilOp(7680,7680,7681);y.setDepthFunction(515);y.setDepthTestEnabled(!0);y.setDepthWriteEnabled(!0);y.setStencilTestEnabled(!0);for(r=0;r<v;r++)A=p[r],A.attached&&A.doRender(n);y.setStencilTestEnabled(!1);y.setDepthTestEnabled(!1);this._readbackBuffer||(this._readbackBuffer=new Uint8Array(4*x*x),this._readbackBuffer32=new Uint32Array(this._readbackBuffer.buffer));this._hittestFBO.readPixels(0,0,x,x,6408,5121,this._readbackBuffer);n=new Set;x*=x;p=this._readbackBuffer32[Math.round(x/
2)];4294967295!==p&&n.add(p);for(r=0;r<x;r++)p=this._readbackBuffer32[r],4294967295!==p&&n.add(p);y.bindFramebuffer(t);y.setViewport(z.x,z.y,z.width,z.height);var G=[];n.forEach(function(B){G.push(B)});return G};m.prototype._renderBackground=function(n,p,v,r,y,x,z){this._backgroundRenderer.render(n,p,v,r,y,x,this._SpriteMosaic,this._SpriteMosaic.pixelRatio,z)};m.prototype._renderLine=function(n,p,v,r,y,x,z){this._lineRenderer.render(n,p,v,r,this._state,y,x,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,
z)};m.prototype._renderFill=function(n,p,v,r,y,x,z){this._fillRenderer.render(n,p,v,this._state.rotation,r,y,x,this._SpriteMosaic,this._extrudeMatrix,this._SpriteMosaic.pixelRatio,z)};m.prototype._renderCircle=function(n,p,v,r,y,x,z,u){var w=!0;y===x.key.level&&(w=!1);n.setStencilTestEnabled(w);this._circleRenderer.render(n,p,v,r,this._state.rotation,x,z,this._extrudeMatrix,u)};m.prototype._renderSymbol=function(n,p,v,r,y,x,z,u){var w=!0;y===x.key.level&&(w=!1);n.setStencilTestEnabled(w);this._symbolRenderer.render(n,
p,v,r,this._state.rotation,this._fadeRecorder.getFadeValues(this._ignoreSpeed),x,z,this._SpriteMosaic,this._glyphMosaic,this._extrudeMatrix,this._extrudeNoRotationMatrix,this._SpriteMosaic.pixelRatio,u)};return m}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/BackgroundRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/vec4 ../MemoryBuffer ./rendererUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,g,f,h,d,c,e){return function(){function k(){this._solidAttributeLocations={a_pos:0};this._attributeLocations={a_pos:0,a_id:1};this._patternMatrix=a.create();this._color=b.create();this._rendererInitialized=this._solidrendererInitialized=!1;this._color.set([1,0,0,1])}k.prototype.dispose=function(){this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=
null)};k.prototype.renderSolidColor=function(l,m){this._solidrendererInitialized||this._initializeSolidRenderer(l);l.bindVAO(this._solidVertexArrayObject);var n=this._shaderVariations.getProgram([!1,!1],void 0,void 0,this._solidAttributeLocations);l.bindProgram(n);n.setUniformMatrix4fv("u_transformMatrix",m.u_matrix);n.setUniform2fv("u_normalized_origin",m.u_normalized_origin);n.setUniform1f("u_coord_range",m.u_coord_range||4096);n.setUniform1f("u_depth",m.u_depth||0);n.setUniform4fv("u_color",m.u_color||
this._color);l.drawArrays(5,0,4);l.bindVAO()};k.prototype.render=function(l,m,n,p,v,r,y,x,z){this._rendererInitialized||this._initialize(l);var u=r.getPaintValue("background-color",n);z*=r.getPaintValue("background-opacity",n);var w=r.getPaintValue("background-pattern",n),t=void 0!==w,A=u[3]*z,G=t||1>A;if(!G||0!==p)if(G||1!==p){G=3===p;p=this._shaderVariations.getProgram([t,G],void 0,void 0,this._attributeLocations);l.bindVAO(this._vertexArrayObject);l.bindProgram(p);p.setUniform1f("u_coord_range",
v.coordRange);p.setUniform1f("u_depth",r.z||0);p.setUniformMatrix4fv("u_transformMatrix",v.tileTransform.transform);p.setUniform2fv("u_normalized_origin",v.tileTransform.displayCoord);if(t){r=y.getMosaicItemPosition(w,!0);if(!r)return;n=512*Math.pow(2,Math.floor(n)-v.key.level)*x;a.identity(this._patternMatrix);v=n/r.size[1];this._patternMatrix[0]=n/r.size[0];this._patternMatrix[4]=v;y.bind(l,9729,r.page||0);p.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix);p.setUniform1f("u_opacity",
z);p.setUniform2f("u_pattern_tl",r.tl[0],r.tl[1]);p.setUniform2f("u_pattern_br",r.br[0],r.br[1]);p.setUniform1i("u_texture",0)}else this._color[0]=A*u[0],this._color[1]=A*u[1],this._color[2]=A*u[2],this._color[3]=A,p.setUniform4fv("u_color",this._color);G&&(m=f.int32To4Bytes(m.layerID),p.setUniform4f("u_id",m[0],m[1],m[2],m[3]));l.drawArrays(5,0,4);l.bindVAO()}};k.prototype._initializeSolidRenderer=function(l){if(this._solidrendererInitialized)return!0;if(!this._shaderVariations){var m=new c("background",
["backgroundVS","backgroundFS"],[],h,l);m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=m}m=new Int8Array([0,0,1,0,0,1,1,1]);m=d.createVertex(l,35044,m);this._solidVertexArrayObject=new e(l,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},{geometry:m});return this._solidrendererInitialized=!0};k.prototype._initialize=function(l){if(this._rendererInitialized)return!0;if(!this._shaderVariations){var m=
new c("background",["backgroundVS","backgroundFS"],[],h,l);m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=m}m=[];m.push(g.i1616to32(0,0));m.push(g.i1616to32(1,0));m.push(g.i1616to32(0,1));m.push(g.i1616to32(1,1));m=new Uint32Array(m);m=d.createVertex(l,35044,m);this._vertexArrayObject=new e(l,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:m});return this._rendererInitialized=
!0};return k}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/mat3":function(){define(["./common"],function(D){var q={create:function(){var a=new D.ARRAY_TYPE(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new D.ARRAY_TYPE(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},
copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},fromValues:function(a,b,g,f,h,d,c,e,k){var l=new D.ARRAY_TYPE(9);l[0]=a;l[1]=b;l[2]=g;l[3]=f;l[4]=h;l[5]=d;l[6]=c;l[7]=e;l[8]=k;return l},set:function(a,b,g,f,h,d,c,e,k,l){a[0]=b;a[1]=g;a[2]=f;a[3]=h;a[4]=d;a[5]=c;a[6]=e;a[7]=k;a[8]=l;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var g=b[1],
f=b[2],h=b[5];a[1]=b[3];a[2]=b[6];a[3]=g;a[5]=b[7];a[6]=f;a[7]=h}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var g=b[0],f=b[1],h=b[2],d=b[3],c=b[4],e=b[5],k=b[6],l=b[7],m=b[8],n=m*c-e*l,p=-m*d+e*k,v=l*d-c*k,r=g*n+f*p+h*v;if(!r)return null;r=1/r;a[0]=n*r;a[1]=(-m*f+h*l)*r;a[2]=(e*f-h*c)*r;a[3]=p*r;a[4]=(m*g-h*k)*r;a[5]=(-e*g+h*d)*r;a[6]=v*r;a[7]=(-l*g+f*k)*r;a[8]=(c*g-f*d)*r;return a},adjoint:function(a,b){var g=b[0],
f=b[1],h=b[2],d=b[3],c=b[4],e=b[5],k=b[6],l=b[7],m=b[8];a[0]=c*m-e*l;a[1]=h*l-f*m;a[2]=f*e-h*c;a[3]=e*k-d*m;a[4]=g*m-h*k;a[5]=h*d-g*e;a[6]=d*l-c*k;a[7]=f*k-g*l;a[8]=g*c-f*d;return a},determinant:function(a){var b=a[3],g=a[4],f=a[5],h=a[6],d=a[7],c=a[8];return a[0]*(c*g-f*d)+a[1]*(-c*b+f*h)+a[2]*(d*b-g*h)},multiply:function(a,b,g){var f=b[0],h=b[1],d=b[2],c=b[3],e=b[4],k=b[5],l=b[6],m=b[7];b=b[8];var n=g[0],p=g[1],v=g[2],r=g[3],y=g[4],x=g[5],z=g[6],u=g[7];g=g[8];a[0]=n*f+p*c+v*l;a[1]=n*h+p*e+v*m;a[2]=
n*d+p*k+v*b;a[3]=r*f+y*c+x*l;a[4]=r*h+y*e+x*m;a[5]=r*d+y*k+x*b;a[6]=z*f+u*c+g*l;a[7]=z*h+u*e+g*m;a[8]=z*d+u*k+g*b;return a}};q.mul=q.multiply;q.translate=function(a,b,g){var f=b[0],h=b[1],d=b[2],c=b[3],e=b[4],k=b[5],l=b[6],m=b[7];b=b[8];var n=g[0];g=g[1];a[0]=f;a[1]=h;a[2]=d;a[3]=c;a[4]=e;a[5]=k;a[6]=n*f+g*c+l;a[7]=n*h+g*e+m;a[8]=n*d+g*k+b;return a};q.rotate=function(a,b,g){var f=b[0],h=b[1],d=b[2],c=b[3],e=b[4],k=b[5],l=b[6],m=b[7];b=b[8];var n=Math.sin(g);g=Math.cos(g);a[0]=g*f+n*c;a[1]=g*h+n*e;
a[2]=g*d+n*k;a[3]=g*c-n*f;a[4]=g*e-n*h;a[5]=g*k-n*d;a[6]=l;a[7]=m;a[8]=b;return a};q.scale=function(a,b,g){var f=g[0];g=g[1];a[0]=f*b[0];a[1]=f*b[1];a[2]=f*b[2];a[3]=g*b[3];a[4]=g*b[4];a[5]=g*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};q.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=b[0];a[7]=b[1];a[8]=1;return a};q.fromRotation=function(a,b){var g=Math.sin(b),f=Math.cos(b);a[0]=f;a[1]=g;a[2]=0;a[3]=-g;a[4]=f;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};q.fromScaling=function(a,
b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=b[1];a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};q.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};q.fromQuat=function(a,b){var g=b[0],f=b[1],h=b[2],d=b[3],c=g+g,e=f+f,k=h+h;g*=c;var l=f*c;f*=e;var m=h*c,n=h*e;h*=k;c*=d;e*=d;d*=k;a[0]=1-f-h;a[3]=l-d;a[6]=m+e;a[1]=l+d;a[4]=1-g-h;a[7]=n-c;a[2]=m-e;a[5]=n+c;a[8]=1-g-f;return a};q.normalFromMat4=function(a,b){var g=b[0],f=b[1],h=b[2],d=b[3],c=b[4],e=b[5],
k=b[6],l=b[7],m=b[8],n=b[9],p=b[10],v=b[11],r=b[12],y=b[13],x=b[14],z=b[15],u=g*e-f*c,w=g*k-h*c,t=g*l-d*c,A=f*k-h*e,G=f*l-d*e,B=h*l-d*k,E=m*y-n*r,F=m*x-p*r;m=m*z-v*r;var I=n*x-p*y;n=n*z-v*y;p=p*z-v*x;v=u*p-w*n+t*I+A*m-G*F+B*E;if(!v)return null;v=1/v;a[0]=(e*p-k*n+l*I)*v;a[1]=(k*m-c*p-l*F)*v;a[2]=(c*n-e*m+l*E)*v;a[3]=(h*n-f*p-d*I)*v;a[4]=(g*p-h*m+d*F)*v;a[5]=(f*m-g*n-d*E)*v;a[6]=(y*B-x*G+z*A)*v;a[7]=(x*t-r*B-z*w)*v;a[8]=(r*G-y*t+z*u)*v;return a};q.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+
a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};q.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};q.add=function(a,b,g){a[0]=b[0]+g[0];a[1]=b[1]+g[1];a[2]=b[2]+g[2];a[3]=b[3]+g[3];a[4]=b[4]+g[4];a[5]=b[5]+g[5];a[6]=b[6]+g[6];a[7]=b[7]+g[7];a[8]=b[8]+g[8];return a};q.subtract=function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];a[2]=b[2]-g[2];a[3]=
b[3]-g[3];a[4]=b[4]-g[4];a[5]=b[5]-g[5];a[6]=b[6]-g[6];a[7]=b[7]-g[7];a[8]=b[8]-g[8];return a};q.sub=q.subtract;q.multiplyScalar=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;a[2]=b[2]*g;a[3]=b[3]*g;a[4]=b[4]*g;a[5]=b[5]*g;a[6]=b[6]*g;a[7]=b[7]*g;a[8]=b[8]*g;return a};q.multiplyScalarAndAdd=function(a,b,g,f){a[0]=b[0]+g[0]*f;a[1]=b[1]+g[1]*f;a[2]=b[2]+g[2]*f;a[3]=b[3]+g[3]*f;a[4]=b[4]+g[4]*f;a[5]=b[5]+g[5]*f;a[6]=b[6]+g[6]*f;a[7]=b[7]+g[7]*f;a[8]=b[8]+g[8]*f;return a};q.exactEquals=function(a,b){return a[0]===
b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};q.equals=function(a,b){var g=a[0],f=a[1],h=a[2],d=a[3],c=a[4],e=a[5],k=a[6],l=a[7],m=a[8],n=b[0],p=b[1],v=b[2],r=b[3],y=b[4],x=b[5],z=a[6],u=b[7],w=b[8];return Math.abs(g-n)<=D.EPSILON*Math.max(1,Math.abs(g),Math.abs(n))&&Math.abs(f-p)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(h-v)<=D.EPSILON*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(d-r)<=D.EPSILON*Math.max(1,Math.abs(d),
Math.abs(r))&&Math.abs(c-y)<=D.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(e-x)<=D.EPSILON*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(k-z)<=D.EPSILON*Math.max(1,Math.abs(k),Math.abs(z))&&Math.abs(l-u)<=D.EPSILON*Math.max(1,Math.abs(l),Math.abs(u))&&Math.abs(m-w)<=D.EPSILON*Math.max(1,Math.abs(m),Math.abs(w))};return q})},"esri/layers/vectorTiles/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(D,q){return function(){function a(b){this._array=[];this._stride=
b}Object.defineProperty(a.prototype,"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=
function(){this.array.length=0};a.prototype.toBuffer=function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(b,g){return 65535&b|g<<16};a.i8888to32=function(b,g,f,h){return b&255|(g&255)<<8|(f&255)<<16|h<<24};a.i8816to32=function(b,g,f){return b&255|(g&255)<<8|f<<16};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/rendererUtils":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=new Uint32Array(1),b=
new Uint8Array(a.buffer);q.int32To4Bytes=function(g){a[0]=g|0;return[b[0],b[1],b[2],b[3]]}})},"esri/layers/vectorTiles/views/vectorTiles/renderers/vtShaderSnippets":function(){define("require exports dojo/text!../../2d/engine/webgl/shaders/tileInfo.xml dojo/text!./shaders/backgroundShaders.xml dojo/text!./shaders/circleShaders.xml dojo/text!./shaders/fillShaders.xml dojo/text!./shaders/iconShaders.xml dojo/text!./shaders/lineShaders.xml dojo/text!./shaders/outlineShaders.xml dojo/text!./shaders/textShaders.xml ../../webgl/ShaderSnippets".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k){D=new k;k.parse(b,D);k.parse(a,D);k.parse(f,D);k.parse(c,D);k.parse(d,D);k.parse(h,D);k.parse(e,D);k.parse(g,D);return D})},"esri/layers/vectorTiles/views/vectorTiles/renderers/CircleRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,
g,f,h,d,c,e){return function(){function k(){this._attributeLocations={a_pos:0,a_color:1,a_stroke_color:2,a_data:3};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._color=g.create();this._strokeColor=g.create()}k.prototype.dispose=function(){};k.prototype.render=function(l,m,n,p,v,r,y,x,z){if(0!==m.triangleElementCount){this._initialized||this._initialize(l);var u=y.hasDataDrivenRadius?1:y.getPaintValue("circle-radius",n),w=y.hasDataDrivenColor?[1,1,1,1]:y.getPaintValue("circle-color",
n),t=y.hasDataDrivenOpacity?1:y.getPaintValue("circle-opacity",n),A=y.hasDataDrivenStrokeWidth?1:y.getPaintValue("circle-stroke-width",n),G=y.hasDataDrivenStrokeColor?[1,1,1,1]:y.getPaintValue("circle-stroke-color",n),B=y.hasDataDrivenStrokeOpacity?1:y.getPaintValue("circle-stroke-opacity",n),E=y.hasDataDrivenBlur?0:y.getPaintValue("circle-blur",n);t=t*w[3]*z;this._color[0]=t*w[0];this._color[1]=t*w[1];this._color[2]=t*w[2];this._color[3]=t;t=B*G[3]*z;this._strokeColor[0]=t*G[0];this._strokeColor[1]=
t*G[1];this._strokeColor[2]=t*G[2];this._strokeColor[3]=t;z=r.tileTransform.transform;w=y.getPaintValue("circle-translate",n);if(0!==w[0]||0!==w[1])a.copy(this._viewProjMat,r.tileTransform.transform),z=w[0],w=w[1],B=G=0,B=(1<<r.key.level)/Math.pow(2,n)*(r.coordRange/512),1===y.getPaintValue("circle-translate-anchor",n)?(v*=-f.C_DEG_TO_RAD,n=Math.sin(v),v=Math.cos(v),G=B*(z*v-w*n),B*=z*n+w*v):(G=B*z,B*=w),this._offsetVector[0]=G,this._offsetVector[1]=B,this._offsetVector[2]=0,a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector),z=this._viewProjMat;if(n=this._getCircleVAO(l,r))l.bindVAO(n),n=3===p,p=this._shaderVariations.getProgram([n],void 0,void 0,this._attributeLocations),l.bindProgram(p),p.setUniformMatrix4fv("u_transformMatrix",z),p.setUniformMatrix4fv("u_extrudeMatrix",x),p.setUniform2fv("u_normalized_origin",r.tileTransform.displayCoord),p.setUniform1f("u_depth",y.z),p.setUniform1f("u_radius",u),p.setUniform4fv("u_color",this._color),p.setUniform1f("u_blur",E),p.setUniform1f("u_stroke_width",
A),p.setUniform4fv("u_stroke_color",this._strokeColor),p.setUniform1f("u_antialiasingWidth",1.2),n&&(r=h.int32To4Bytes(m.layerID),p.setUniform4f("u_id",r[0],r[1],r[2],r[3])),l.drawElements(4,m.triangleElementCount,5125,12*m.triangleElementStart),l.bindVAO()}};k.prototype._initialize=function(l){if(this._initialized)return!0;l=new c("circle",["circleVS","circleFS"],[],d,l);l.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=l;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:16,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:16,normalized:!0,divisor:0},{name:"a_stroke_color",count:4,type:5121,offset:8,stride:16,normalized:!0,divisor:0},{name:"a_data",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};return this._initialized=!0};k.prototype._getCircleVAO=function(l,m){if(m.circleVertexArrayObject)return m.circleVertexArrayObject;var n=m.circleVertexBuffer,p=m.circleIndexBuffer;if(!n||!p)return null;m.circleVertexArrayObject=
new e(l,this._attributeLocations,this._vertexAttributes,{geometry:n},p);return m.circleVertexArrayObject};return k}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FadeRecorder":function(){define(["require","exports","../../../core/now"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});(function(){return function(b,g){this.level=b;this.now=g}})();D=function(){return function(b,g,f,h){this.fadeSpeed=b;this.minfadeLevel=g;this.maxfadeLevel=f;this.fadeChange=h}}();q.FadeProperties=
D;D=function(){function b(g){void 0===g&&(g=300);this._levelSnapshots=[];this._duration=g}b.prototype.recordLevel=function(g){var f=a(),h=this._levelSnapshots;0===h.length&&(h.push({level:g,now:0}),h.push({level:g,now:0}));2!==h.length&&h[0].level===g||h.push({level:g,now:f})};b.prototype.needsRedraw=function(){if(0===this._levelSnapshots.length)return!1;for(var g=this._duration,f=this._levelSnapshots,h=f.length,d=f[h-1],c=-1;h>c+1&&f[c+1].now+g<d.now;)c++;for(0>c&&(c=0);c<h;c++)if(f[c].level!==d.level)return!0;
return!1};b.prototype.getFadeValues=function(g){void 0===g&&(g=!1);for(var f=this._duration,h=a(),d=this._levelSnapshots;3<d.length&&d[1].now+f<h;)d.shift();d[1].now+f<h&&(d[0].level=d[1].level);var c=d[0].level,e=d[d.length-1],k=e.level,l=Math.min(c,k);c=Math.max(c,k);d=(e.level-d[1].level)/((e.now-d[1].now)/f);return g?{fadeSpeed:0,minfadeLevel:l,maxfadeLevel:c,fadeChange:0}:{fadeSpeed:d,minfadeLevel:l,maxfadeLevel:c,fadeChange:(h-e.now)/f*d}};return b}();q.FadeRecorder=D})},"esri/layers/vectorTiles/views/vectorTiles/renderers/FillRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat3 ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k){var l=1/65536;return function(){function m(){this._fillAttributeLocations={a_pos:0};this._fillAttributeLocationsDD={a_pos:0,a_color:1};this._outlineAttributeLocations={a_pos:0,a_offset:1,a_xnormal:2};this._outlineAttributeLocationsDD={a_pos:0,a_offset:1,a_xnormal:2,a_color:3};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=g.create();this._patternMatrix=a.create();this._color=f.create();this._outlineColor=f.create()}m.prototype.dispose=function(){};
m.prototype.render=function(n,p,v,r,y,x,z,u,w,t,A){if(0!==p.triangleElementCount){this._initialized||this._initialize(n);var G=void 0!==z.getPaintValue("fill-pattern",v),B=z.hasDataDrivenColor?[1,1,1,1]:z.getPaintValue("fill-color",v),E=z.hasDataDrivenOpacity?1:z.getPaintValue("fill-opacity",v),F=E*B[3]*A;this._color[0]=F*B[0];this._color[1]=F*B[1];this._color[2]=F*B[2];this._color[3]=F;B=3===y;var I;B&&(I=d.int32To4Bytes(p.layerID));F=x.tileTransform.transform;var M=x.coordRange/512,P=z.getPaintValue("fill-translate",
v);if(0!==P[0]||0!==P[1]){b.copy(this._viewProjMat,x.tileTransform.transform);F=P[0];P=P[1];var aa=0,ca=0;M*=(1<<x.key.level)/Math.pow(2,v);1===z.getPaintValue("fill-translate-anchor",v)?(aa=-h.C_DEG_TO_RAD*r,r=Math.sin(aa),ca=Math.cos(aa),aa=M*(F*ca-P*r),ca=M*(F*r+P*ca)):(aa=M*F,ca=M*P);this._offsetVector[0]=aa;this._offsetVector[1]=ca;this._offsetVector[2]=0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);F=this._viewProjMat}this._drawFill(n,p,v,y,x,z,u,F,t,A,B,I);if(z.getPaintValue("fill-antialias",
v)&&!G&&0<p.outlineElementCount&&(1===y||3===y)){y=z.hasDataDrivenOutline;if(z.outlineUsesFillColor){if(1!==this._color[3])return;this._outlineColor[0]=this._color[0];this._outlineColor[1]=this._color[1];this._outlineColor[2]=this._color[2];this._outlineColor[3]=this._color[3]}else v=z.hasDataDrivenOutlineColor?[1,1,1,1]:z.getPaintValue("fill-outline-color",v),A*=E*v[3],this._outlineColor[0]=A*v[0],this._outlineColor[1]=A*v[1],this._outlineColor[2]=A*v[2],this._outlineColor[3]=A;t=.75/t;if(A=this._getOutlineVAO(n,
x,y))n.bindVAO(A),A=this._outlineShaderVariations.getProgram([y,B],void 0,void 0,y?this._outlineAttributeLocationsDD:this._outlineAttributeLocations),n.bindProgram(A),A.setUniformMatrix4fv("u_transformMatrix",F),A.setUniformMatrix4fv("u_extrudeMatrix",w),A.setUniform2fv("u_normalized_origin",x.tileTransform.displayCoord),A.setUniform1f("u_depth",z.z+l),A.setUniform1f("u_outline_width",t),A.setUniform4fv("u_color",this._outlineColor),B&&A.setUniform4f("u_id",I[0],I[1],I[2],I[3]),n.drawElements(4,p.outlineElementCount,
5125,12*p.outlineElementStart),n.bindVAO()}}};m.prototype._initialize=function(n){if(this._initialized)return!0;var p=new e("fill",["fillVS","fillFS"],[],c,n);p.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");p.addDefine("DD","DD",[!0,!1],"DD");p.addDefine("ID","ID",[!0,!0],"ID");this._fillShaderVariations=p;this._fillVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:4,normalized:!1,divisor:0}]};this._fillVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,
stride:8,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:4,stride:8,normalized:!0,divisor:0}]};n=new e("outline",["outlineVS","outlineFS"],[],c,n);n.addDefine("DD","DD",[!0,!1],"DD");n.addDefine("ID","ID",[!0,!0],"ID");this._outlineShaderVariations=n;this._outlineVertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:8,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:8,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,
stride:8,normalized:!1,divisor:0}]};this._outlineVertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offset",count:2,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_xnormal",count:2,type:5120,offset:6,stride:12,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:8,stride:12,normalized:!0,divisor:0}]};return this._initialized=!0};m.prototype._drawFill=function(n,p,v,r,y,x,z,u,w,t,A,G){var B=x.getPaintValue("fill-pattern",
v),E=void 0!==B,F=x.hasDataDrivenOpacity?1:t*x.getPaintValue("fill-opacity",v),I=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("fill-color",v);t*=F*I[3];this._color[0]=t*I[0];this._color[1]=t*I[1];this._color[2]=t*I[2];this._color[3]=t;I=x.hasDataDrivenFill;F=!1;!E&&(I?0:1===t)&&(F=!0);if(!E||0!==r)if(!F||1!==r)if(E||F||0!==r)if(r=this._getFillVAO(n,y,I))n.bindVAO(r),r=this._fillShaderVariations.getProgram([E,I,A],void 0,void 0,I?this._fillAttributeLocationsDD:this._fillAttributeLocations),n.bindProgram(r),
E&&(B=z.getMosaicItemPosition(B,!0))&&(v=y.coordRange/512/Math.pow(2,Math.round(v)-y.key.level)/w,a.identity(this._patternMatrix),w=1/(B.size[1]*v),this._patternMatrix[0]=1/(B.size[0]*v),this._patternMatrix[4]=w,z.bind(n,9729,B.page,1),r.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix),r.setUniform2f("u_pattern_tl",B.tl[0],B.tl[1]),r.setUniform2f("u_pattern_br",B.br[0],B.br[1]),r.setUniform1i("u_texture",1)),r.setUniformMatrix4fv("u_transformMatrix",u),r.setUniform2fv("u_normalized_origin",
y.tileTransform.displayCoord),r.setUniform1f("u_depth",x.z+l),r.setUniform4fv("u_color",this._color),A&&r.setUniform4f("u_id",G[0],G[1],G[2],G[3]),n.drawElements(4,p.triangleElementCount,5125,12*p.triangleElementStart),n.bindVAO()};m.prototype._getFillVAO=function(n,p,v){if(v){if(p.fillDDVertexArrayObject)return p.fillDDVertexArrayObject;v=p.fillDDVertexBuffer;var r=p.fillIndexBuffer;if(!v||!r)return null;p.fillDDVertexArrayObject=new k(n,this._fillAttributeLocationsDD,this._fillVertexAttributesDD,
{geometry:v},r);return p.fillDDVertexArrayObject}if(p.fillVertexArrayObject)return p.fillVertexArrayObject;v=p.fillVertexBuffer;r=p.fillIndexBuffer;if(!v||!r)return null;p.fillVertexArrayObject=new k(n,this._fillAttributeLocations,this._fillVertexAttributes,{geometry:v},r);return p.fillVertexArrayObject};m.prototype._getOutlineVAO=function(n,p,v){if(v){if(p.outlineDDVertexArrayObject)return p.outlineDDVertexArrayObject;v=p.outlineDDVertexBuffer;var r=p.outlineIndexBuffer;if(!v||!r)return null;p.outlineDDVertexArrayObject=
new k(n,this._outlineAttributeLocationsDD,this._outlineVertexAttributesDD,{geometry:v},r);return p.outlineDDVertexArrayObject}if(p.outlineVertexArrayObject)return p.outlineVertexArrayObject;v=p.outlineVertexBuffer;r=p.outlineIndexBuffer;if(!v||!r)return null;p.outlineVertexArrayObject=new k(n,this._outlineAttributeLocations,this._outlineVertexAttributes,{geometry:v},r);return p.outlineVertexArrayObject};return m}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/LineRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec2 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k){return function(){function l(){this._attributeLocations={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2};this._attributeLocationsDD={a_pos:0,a_offsetAndNormal:1,a_accumulatedDistance:2,a_color:3,a_width:4};this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=g.create();this._color=f.create();this._dashArray=b.create()}l.prototype.dispose=function(){};l.prototype.render=function(m,n,p,v,r,y,x,z,u,w,t){if(0!==n.triangleElementCount){this._initialized||
this._initialize(m);var A=y.tileTransform.transform,G=y.coordRange/512,B=x.getPaintValue("line-translate",p);if(0!==B[0]||0!==B[1]){a.copy(this._viewProjMat,y.tileTransform.transform);A=B[0];B=B[1];var E=0,F=0;F=(1<<y.key.level)/Math.pow(2,p)*G;r=r.rotation;if(1===x.getPaintValue("line-translate-anchor",p)){E=-h.C_DEG_TO_RAD*r;r=Math.sin(E);var I=Math.cos(E);E=F*(A*I-B*r);F*=A*r+B*I}else E=F*A,F*=B;this._offsetVector[0]=E;this._offsetVector[1]=F;this._offsetVector[2]=0;a.translate(this._viewProjMat,
this._viewProjMat,this._offsetVector);A=this._viewProjMat}B=x.getPaintValue("line-pattern",p);F=void 0!==B;w=1/w;r=x.getPaintValue("line-blur",p);I=x.hasDataDrivenColor?[1,1,1,1]:x.getPaintValue("line-color",p);var M=x.hasDataDrivenOpacity?1:x.getPaintValue("line-opacity",p);E=x.hasDataDrivenWidth?1:x.getPaintValue("line-width",p);t*=M*I[3];this._color[0]=t*I[0];this._color[1]=t*I[1];this._color[2]=t*I[2];this._color[3]=t;t=x.hasDataDrivenLine;v=3===v;var P;v&&(P=d.int32To4Bytes(n.layerID));if(I=
this._getLineVAO(m,y,t)){m.bindVAO(I);t=this._shaderVariations.getProgram([F,t,v],void 0,void 0,t?this._attributeLocationsDD:this._attributeLocations);m.bindProgram(t);t.setUniformMatrix4fv("u_transformMatrix",A);t.setUniformMatrix4fv("u_extrudeMatrix",u);t.setUniform2fv("u_normalized_origin",y.tileTransform.displayCoord);t.setUniform1f("u_depth",x.z);t.setUniform1f("u_blur",r);t.setUniform1f("u_antialiasing",w);t.setUniform4fv("u_color",this._color);t.setUniform1f("u_width",E);v&&t.setUniform4f("u_id",
P[0],P[1],P[2],P[3]);if(F){if(p=z.getMosaicItemPosition(B,!0))z.bind(m,9729,p.page,1),t.setUniform2f("u_pattern_tl",p.tl[0],p.br[1]),t.setUniform2f("u_pattern_br",p.br[0],p.tl[1]),t.setUniform2f("u_spriteSize",G*p.size[0],p.size[1]),t.setUniform1i("u_texture",1)}else z=x.getPaintValue("line-dasharray",p),2>z.length&&(z=[1,-1]),this._dashArray[0]=G*z[0],this._dashArray[1]=G*z[1],t.setUniform2fv("u_dasharray",this._dashArray);m.drawElements(4,n.triangleElementCount,5125,12*n.triangleElementStart);m.bindVAO()}}};
l.prototype._initialize=function(m){if(this._initialized)return!0;m=new e("line",["lineVS","lineFS"],[],c,m);m.addDefine("PATTERN","PATTERN",[!0,!0],"PATTERN");m.addDefine("DD","DD",[!0,!1],"DD");m.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=m;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:12,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:12,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5123,
offset:8,stride:12,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:20,normalized:!1,divisor:0},{name:"a_offsetAndNormal",count:4,type:5120,offset:4,stride:20,normalized:!1,divisor:0},{name:"a_accumulatedDistance",count:2,type:5122,offset:8,stride:20,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:12,stride:20,normalized:!0,divisor:0},{name:"a_width",count:1,type:5126,offset:16,stride:20,normalized:!1,divisor:0}]};return this._initialized=
!0};l.prototype._getLineVAO=function(m,n,p){if(p){if(n.lineDDVertexArrayObject)return n.lineDDVertexArrayObject;p=n.lineDDVertexBuffer;var v=n.lineIndexBuffer;if(!p||!v)return null;n.lineDDVertexArrayObject=new k(m,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:p},v);return n.lineDDVertexArrayObject}if(n.lineVertexArrayObject)return n.lineVertexArrayObject;p=n.lineVertexBuffer;v=n.lineIndexBuffer;if(!p||!v)return null;n.lineVertexArrayObject=new k(m,this._attributeLocations,this._vertexAttributes,
{geometry:p},v);return n.lineVertexArrayObject};return l}()})},"esri/layers/vectorTiles/core/libs/gl-matrix/vec2":function(){define(["./common"],function(D){var q={create:function(){var a=new D.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new D.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var g=new D.ARRAY_TYPE(2);g[0]=a;g[1]=b;return g},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,g){a[0]=b;a[1]=g;return a},add:function(a,b,g){a[0]=b[0]+
g[0];a[1]=b[1]+g[1];return a},subtract:function(a,b,g){a[0]=b[0]-g[0];a[1]=b[1]-g[1];return a}};q.sub=q.subtract;q.multiply=function(a,b,g){a[0]=b[0]*g[0];a[1]=b[1]*g[1];return a};q.mul=q.multiply;q.divide=function(a,b,g){a[0]=b[0]/g[0];a[1]=b[1]/g[1];return a};q.div=q.divide;q.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};q.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};q.min=function(a,b,g){a[0]=Math.min(b[0],g[0]);a[1]=Math.min(b[1],g[1]);return a};
q.max=function(a,b,g){a[0]=Math.max(b[0],g[0]);a[1]=Math.max(b[1],g[1]);return a};q.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};q.scale=function(a,b,g){a[0]=b[0]*g;a[1]=b[1]*g;return a};q.scaleAndAdd=function(a,b,g,f){a[0]=b[0]+g[0]*f;a[1]=b[1]+g[1]*f;return a};q.distance=function(a,b){var g=b[0]-a[0],f=b[1]-a[1];return Math.sqrt(g*g+f*f)};q.dist=q.distance;q.squaredDistance=function(a,b){var g=b[0]-a[0],f=b[1]-a[1];return g*g+f*f};q.sqrDist=q.squaredDistance;q.length=
function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};q.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};q.normalize=function(a,b){var g=b[0],f=b[1];g=g*g+f*f;0<g&&(g=1/Math.sqrt(g),a[0]=b[0]*g,a[1]=b[1]*g);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};q.cross=function(a,b,g){b=b[0]*g[1]-b[1]*g[0];a[0]=a[1]=0;a[2]=b;return a};
q.lerp=function(a,b,g,f){var h=b[0];b=b[1];a[0]=h+f*(g[0]-h);a[1]=b+f*(g[1]-b);return a};q.random=function(a,b){b=b||1;var g=2*D.RANDOM()*Math.PI;a[0]=Math.cos(g)*b;a[1]=Math.sin(g)*b;return a};q.transformMat2=function(a,b,g){var f=b[0];b=b[1];a[0]=g[0]*f+g[2]*b;a[1]=g[1]*f+g[3]*b;return a};q.transformMat2d=function(a,b,g){var f=b[0];b=b[1];a[0]=g[0]*f+g[2]*b+g[4];a[1]=g[1]*f+g[3]*b+g[5];return a};q.transformMat3=function(a,b,g){var f=b[0];b=b[1];a[0]=g[0]*f+g[3]*b+g[6];a[1]=g[1]*f+g[4]*b+g[7];return a};
q.transformMat4=function(a,b,g){var f=b[0];b=b[1];a[0]=g[0]*f+g[4]*b+g[12];a[1]=g[1]*f+g[5]*b+g[13];return a};q.forEach=function(){var a=q.create();return function(b,g,f,h,d,c){g||(g=2);f||(f=0);for(h=h?Math.min(h*g+f,b.length):b.length;f<h;f+=g)a[0]=b[f],a[1]=b[f+1],d(a,a,c),b[f]=a[0],b[f+1]=a[1];return b}}();q.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};q.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};q.equals=function(a,b){var g=a[0],f=a[1],h=b[0],d=b[1];return Math.abs(g-h)<=
D.EPSILON*Math.max(1,Math.abs(g),Math.abs(h))&&Math.abs(f-d)<=D.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))};return q})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SymbolRenderer":function(){define(["require","exports","./IconRenderer","./SDFRenderer"],function(D,q,a,b){return function(){function g(){this._iconRenderer=new a;this._sdfRenderer=new b}g.prototype.dispose=function(){this._iconRenderer&&(this._iconRenderer.dispose(),this._iconRenderer=null);this._sdfRenderer&&(this._sdfRenderer.dispose(),
this._sdfRenderer=null)};g.prototype.render=function(f,h,d,c,e,k,l,m,n,p,v,r,y,x){h.hasData()&&(0<h.markerPerPageElementsMap.size&&this._iconRenderer.render(f,h,d,c,e,k,l,m,n,v,r,x),0<h.glyphPerPageElementsMap.size&&this._sdfRenderer.render(f,h,d,c,e,k,l,m,p,v,r,y,x))};return g}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/IconRenderer":function(){define("require exports ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,g,f,h,d,c,e){return function(){function k(){this._attributeLocations={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._spritesTextureSize=new Float32Array(2);this._initialized=!1;this._viewProjMat=a.create();this._offsetVector=b.create();this._extrudeMat=a.create();this._color=g.create()}k.prototype.dispose=function(){};k.prototype.render=function(l,m,n,p,v,r,y,x,z,u,w,t){var A=this;
this._initialized||this._initialize(l);var G=x.hasDataDrivenIconSize?1:x.getLayoutValue("icon-size",n),B=x.hasDataDrivenIconColor?[1,1,1,1]:x.getPaintValue("icon-color",n),E=x.hasDataDrivenIconOpacity?1:x.getPaintValue("icon-opacity",n);t*=B[3]*E;this._color[0]=t*B[0];this._color[1]=t*B[1];this._color[2]=t*B[2];this._color[3]=t;B=x.getLayoutValue("icon-rotation-alignment",n);2===B&&(B=1===x.getLayoutValue("symbol-placement",n)?0:1);var F=0===B;t=m.isSDF;E=x.hasDataDrivenIcon;p=3===p;B=f.degToByte(v);
var I=y.tileTransform.transform,M=x.getPaintValue("icon-translate",n);if(0!==M[0]||0!==M[1]){a.copy(this._viewProjMat,y.tileTransform.transform);I=M[0];M=M[1];var P=0,aa=0;aa=(1<<y.key.level)/Math.pow(2,n)*(y.coordRange/512);if(1===x.getPaintValue("icon-translate-anchor",n)){P=-f.C_DEG_TO_RAD*v;v=Math.sin(P);var ca=Math.cos(P);P=aa*(I*ca-M*v);aa*=I*v+M*ca}else P=aa*I,aa*=M;this._offsetVector[0]=P;this._offsetVector[1]=aa;this._offsetVector[2]=0;a.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);
I=this._viewProjMat}F?a.copy(this._extrudeMat,u):a.copy(this._extrudeMat,w);if(u=this._getIconVAO(l,y,E)){l.bindVAO(u);var ea=this._shaderVariations.getProgram([t,E,p],void 0,void 0,E?this._attributeLocationsDD:this._attributeLocations);l.bindProgram(ea);t&&(u=x.getPaintValue("icon-halo-color",n),w=x.getPaintValue("icon-halo-width",n),ea.setUniform4f("u_outlineColor",u[0],u[1],u[2],u[3]),ea.setUniform1f("u_outlineSize",w));ea.setUniformMatrix4fv("u_transformMatrix",I);ea.setUniformMatrix4fv("u_extrudeMatrix",
this._extrudeMat);ea.setUniform2fv("u_normalized_origin",y.tileTransform.displayCoord);ea.setUniform1f("u_depth",x.z);ea.setUniform1f("u_mapRotation",B);ea.setUniform1f("u_keepUpright",0);ea.setUniform1f("u_level",10*n);ea.setUniform1f("u_fadeSpeed",10*r.fadeSpeed);ea.setUniform1f("u_minfadeLevel",10*r.minfadeLevel);ea.setUniform1f("u_maxfadeLevel",10*r.maxfadeLevel);ea.setUniform1f("u_fadeChange",10*(n+r.fadeChange));ea.setUniform1i("u_texture",1);ea.setUniform1f("u_size",G);ea.setUniform4fv("u_color",
this._color);p&&(n=h.int32To4Bytes(m.layerID),ea.setUniform4f("u_id",n[0],n[1],n[2],n[3]));m.markerPerPageElementsMap.forEach(function(T,la){A._spritesTextureSize[0]=z.getWidth(la)/4;A._spritesTextureSize[1]=z.getHeight(la)/4;ea.setUniform2fv("u_mosaicSize",A._spritesTextureSize);z.bind(l,9729,la,1);l.drawElements(4,T[1],5125,12*T[0])});l.bindVAO()}};k.prototype._initialize=function(l){if(this._initialized)return!0;l=new c("icon",["iconVS","iconFS"],[],d,l);l.addDefine("SDF","SDF",[!0,!0],"SDF");
l.addDefine("DD","DD",[!0,!1],"DD");l.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=l;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",
count:2,type:5122,offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};k.prototype._getIconVAO=
function(l,m,n){if(n){if(m.iconDDVertexArrayObject)return m.iconDDVertexArrayObject;n=m.iconDDVertexBuffer;var p=m.iconIndexBuffer;if(!n||!p)return null;m.iconDDVertexArrayObject=new e(l,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:n},p);return m.iconDDVertexArrayObject}if(m.iconVertexArrayObject)return m.iconVertexArrayObject;n=m.iconVertexBuffer;p=m.iconIndexBuffer;if(!n||!p)return null;m.iconVertexArrayObject=new e(l,this._attributeLocations,this._vertexAttributes,{geometry:n},
p);return m.iconVertexArrayObject};return k}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/SDFRenderer":function(){define("require exports dojo/has ../../../core/libs/gl-matrix/mat4 ../../../core/libs/gl-matrix/vec3 ../../../core/libs/gl-matrix/vec4 ../GeometryUtils ./rendererUtils ./vtShaderSnippets ../../webgl/ShaderVariations ../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,g,f,h,d,c,e,k){var l=1/65536;return function(){function m(){this._attributeLocations={a_pos:0,a_vertexOffset:1,
a_tex:2,a_levelInfo:3};this._attributeLocationsDD={a_pos:0,a_vertexOffset:1,a_tex:2,a_levelInfo:3,a_color:4,a_size:5};this._initialized=!1;this._viewProjMat=b.create();this._offsetVector=g.create();this._extrudeMat=b.create();this._haloColor=f.create();this._sdfColor=f.create();this._scaleVec=g.create()}m.prototype.dispose=function(){};m.prototype.render=function(n,p,v,r,y,x,z,u,w,t,A,G,B){var E=this;if(!a("esri-vector-tiles-avoid-text")){this._initialized||this._initialize(n);var F=h.degToByte(y),
I=u.getLayoutValue("text-rotation-alignment",v);2===I&&(I=1===u.getLayoutValue("symbol-placement",v)?0:1);var M=0===I;I=u.getLayoutValue("text-keep-upright",v)&&M;r=3===r;G=.8*3/G;var P=u.hasDataDrivenTextSize?1:u.getLayoutValue("text-size",v),aa=u.hasDataDrivenTextColor?[1,1,1,1]:u.getPaintValue("text-color",v),ca=u.hasDataDrivenTextOpacity?1:u.getPaintValue("text-opacity",v),ea=aa[3]*ca*B;this._sdfColor[0]=ea*aa[0];this._sdfColor[1]=ea*aa[1];this._sdfColor[2]=ea*aa[2];this._sdfColor[3]=ea;this._glyphTextureSize||
(this._glyphTextureSize=new Float32Array([w.width/4,w.height/4]));aa=z.tileTransform.transform;ea=u.getPaintValue("text-translate",v);if(0!==ea[0]||0!==ea[1]){b.copy(this._viewProjMat,z.tileTransform.transform);aa=ea[0];ea=ea[1];var T=0,la=0;la=(1<<z.key.level)/Math.pow(2,v)*(z.coordRange/512);if(1===u.getPaintValue("text-translate-anchor",v)){T=-h.C_DEG_TO_RAD*y;y=Math.sin(T);var X=Math.cos(T);T=la*(aa*X-ea*y);la*=aa*y+ea*X}else T=la*aa,la*=ea;this._offsetVector[0]=T;this._offsetVector[1]=la;this._offsetVector[2]=
0;b.translate(this._viewProjMat,this._viewProjMat,this._offsetVector);aa=this._viewProjMat}M?b.copy(this._extrudeMat,t):b.copy(this._extrudeMat,A);this._scaleVec[0]=1/24;this._scaleVec[1]=1/24;this._scaleVec[2]=1;b.scale(this._extrudeMat,this._extrudeMat,this._scaleVec);t=u.hasDataDrivenText;if(A=this._getSDFVAO(n,z,t)){n.bindVAO(A);var R=this._shaderVariations.getProgram([t,r],void 0,void 0,t?this._attributeLocationsDD:this._attributeLocations);n.bindProgram(R);R.setUniformMatrix4fv("u_transformMatrix",
aa);R.setUniformMatrix4fv("u_extrudeMatrix",this._extrudeMat);R.setUniform2fv("u_normalized_origin",z.tileTransform.displayCoord);R.setUniform1f("u_depth",u.z+l);R.setUniform2fv("u_mosaicSize",this._glyphTextureSize);R.setUniform1f("u_mapRotation",F);R.setUniform1f("u_keepUpright",I?1:0);R.setUniform1f("u_level",10*v);R.setUniform1f("u_fadeSpeed",10*x.fadeSpeed);R.setUniform1f("u_minfadeLevel",10*x.minfadeLevel);R.setUniform1f("u_maxfadeLevel",10*x.maxfadeLevel);R.setUniform1f("u_fadeChange",10*(v+
x.fadeChange));R.setUniform1i("u_texture",0);R.setUniform1f("u_size",P);R.setUniform1f("u_antialiasingWidth",G);r&&(x=d.int32To4Bytes(p.layerID),R.setUniform4f("u_id",x[0],x[1],x[2],x[3]));p.glyphPerPageElementsMap.forEach(function(fa,S){w.bind(n,9729,S,0);var Y=u.getPaintValue("text-halo-color",v),ia=u.getPaintValue("text-halo-width",v);if(0<Y[3]&&0<ia){var L=Y[3]*ca*B;E._haloColor[0]=L*Y[0];E._haloColor[1]=L*Y[1];E._haloColor[2]=L*Y[2];E._haloColor[3]=L;Y=3*u.getPaintValue("text-halo-blur",v);ia*=
3;R.setUniform4fv("u_color",E._haloColor);R.setUniform1f("u_halo",1);R.setUniform1f("u_edgeDistance",ia);R.setUniform1f("u_edgeBlur",Y);n.drawElements(4,fa[1],5125,12*fa[0])}0<E._sdfColor[3]&&(R.setUniform4fv("u_color",E._sdfColor),R.setUniform1f("u_halo",0),R.setUniform1f("u_edgeDistance",0),R.setUniform1f("u_edgeBlur",0),n.drawElements(4,fa[1],5125,12*fa[0]))});n.bindVAO()}}};m.prototype._initialize=function(n){if(this._initialized)return!0;n=new e("text",["textVS","textFS"],[],c,n);n.addDefine("DD",
"DD",[!0,!1],"DD");n.addDefine("ID","ID",[!0,!0],"ID");this._shaderVariations=n;this._vertexAttributes={geometry:[{name:"a_pos",count:2,type:5122,offset:0,stride:16,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:16,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:16,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:16,normalized:!1,divisor:0}]};this._vertexAttributesDD={geometry:[{name:"a_pos",count:2,type:5122,
offset:0,stride:24,normalized:!1,divisor:0},{name:"a_vertexOffset",count:2,type:5122,offset:4,stride:24,normalized:!1,divisor:0},{name:"a_tex",count:4,type:5121,offset:8,stride:24,normalized:!1,divisor:0},{name:"a_levelInfo",count:4,type:5121,offset:12,stride:24,normalized:!1,divisor:0},{name:"a_color",count:4,type:5121,offset:16,stride:24,normalized:!0,divisor:0},{name:"a_size",count:1,type:5126,offset:20,stride:24,normalized:!1,divisor:0}]};return this._initialized=!0};m.prototype._getSDFVAO=function(n,
p,v){if(v){if(p.textDDVertexArrayObject)return p.textDDVertexArrayObject;v=p.textDDVertexBuffer;var r=p.textIndexBuffer;if(!v||!r)return null;p.textDDVertexArrayObject=new k(n,this._attributeLocationsDD,this._vertexAttributesDD,{geometry:v},r);return p.textDDVertexArrayObject}if(p.textVertexArrayObject)return p.textVertexArrayObject;v=p.textVertexBuffer;r=p.textIndexBuffer;if(!v||!r)return null;p.textVertexArrayObject=new k(n,this._attributeLocations,this._vertexAttributes,{geometry:v},r);return p.textVertexArrayObject};
return m}()})},"esri/layers/vectorTiles/views/vectorTiles/renderers/TileInfoRenderer":function(){define("require exports ../GeometryUtils ./vtShaderSnippets ../../webgl/BufferObject ../../webgl/Program ../../webgl/Texture ../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,g,f,h,d){return function(){function c(){this._initialized=!1;this._maxWidth=0;this._color=new Float32Array([1,0,0,1])}c.prototype.dispose=function(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=
null);this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null);this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null);this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null)};c.prototype.render=function(e,k){this._initialized||this._initialize(e);e.bindVAO(this._outlineVertexArrayObject);e.bindProgram(this._outlineProgram);this._outlineProgram.setUniformMatrix4fv("u_transformMatrix",
k.tileTransform.transform);this._outlineProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord);this._outlineProgram.setUniform1f("u_coord_range",k.coordRange);this._outlineProgram.setUniform1f("u_depth",0);this._outlineProgram.setUniform4fv("u_color",this._color);e.setLineWidth(2);e.drawArrays(3,0,4);e.bindVAO();var l=this._getTexture(e,k);l&&(e.bindVAO(this._tileInfoVertexArrayObject),e.bindProgram(this._tileInfoProgram),e.bindTexture(l,0),this._tileInfoProgram.setUniformMatrix4fv("u_transformMatrix",
k.tileTransform.transform),this._tileInfoProgram.setUniform2fv("u_normalized_origin",k.tileTransform.displayCoord),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform1f("u_coord_ratio",k.coordRange/512),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",l.descriptor.width,l.descriptor.height),e.drawArrays(5,0,4),e.bindVAO())};c.prototype._initialize=function(e){if(this._initialized)return!0;var k={a_pos:0},l=new f(e,b.backgroundVS,
b.backgroundFS,k),m=new f(e,b.tileInfoVS,b.tileInfoFS,k),n={geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:2,normalized:!1,divisor:0}]},p=new Int8Array([0,0,1,0,1,1,0,1]);p=g.createVertex(e,35044,p);p=new d(e,k,n,{geometry:p});var v=new Int8Array([0,0,1,0,0,1,1,1]);v=g.createVertex(e,35044,v);e=new d(e,k,n,{geometry:v});this._outlineProgram=l;this._tileInfoProgram=m;this._outlineVertexArrayObject=p;this._tileInfoVertexArrayObject=e;return this._initialized=!0};c.prototype._getTexture=function(e,
k){if(k.texture)return k.texture;this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","canvas2d"),this._canvas.setAttribute("width","256"),this._canvas.setAttribute("height","32"),this._canvas.setAttribute("style","display:none"));var l=k.key.id,m=this._canvas.getContext("2d");m.font="24px sans-serif";m.textAlign="left";m.textBaseline="middle";var n=m.measureText(l);n=Math.pow(2,Math.ceil(a.log2(n.width+2)));n>this._maxWidth&&(this._maxWidth=n);m.clearRect(0,
0,this._maxWidth,32);m.fillStyle=k.key.level>k.refKey.level?"red":"blue";m.fillText(l,0,16);k.texture=new h(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728},this._canvas);return k.texture};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/VectorTileDisplayObject":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/ObjectPool ../../core/libs/gl-matrix/mat4 ../../core/libs/gl-matrix/vec2 ../../geometry/support/spatialReferenceUtils ../2d/engine/DisplayObject ../2d/tiling/enums ../2d/tiling/TileKey ./RenderBucket ../webgl/BufferObject".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l){var m="fillVertexBuffer fillDDVertexBuffer fillIndexBuffer outlineVertexBuffer outlineDDVertexBuffer outlineIndexBuffer lineVertexBuffer lineDDVertexBuffer lineIndexBuffer iconVertexBuffer iconDDVertexBuffer iconIndexBuffer textVertexBuffer textDDVertexBuffer textIndexBuffer circleVertexBuffer circleIndexBuffer".split(" ");return function(n){function p(){for(var v=[],r=0;r<arguments.length;r++)v[r]=arguments[r];r=n.call(this)||this;r._renderBuckets=[];r._vectorTileData=
null;r._symbolUpdateData=null;r.status=c.TileStatus.INITIALIZED;r.coords=[0,0];r.bounds=[0,0,0,0];r.tileTransform={transform:Float32Array[16],displayCoord:Float32Array[2]};r.stencilData={mask:0,reference:0};r.status=c.TileStatus.INITIALIZED;r.tileTransform.transform=g.create();r.tileTransform.displayCoord=f.create();0<v.length&&(y=r.acquire).call.apply(y,[r].concat(v));return r;var y}a(p,n);p.prototype.reset=function(){e.pool.release(this.key);this.refKey=this.key=null;this.coords[0]=0;this.coords[1]=
0;this.bounds[0]=0;this.bounds[1]=0;this.bounds[2]=0;this.height=this.width=this.bounds[3]=0;this.resolution=null;this.rotation=0;this.id=this.client=this.styleLayers=this._vectorTileData=null;this.tileTransform.transform.fill(0);this.tileTransform.displayCoord.fill(0);this.stencilData.mask=0;this.stencilData.reference=0;this._renderBuckets.length=0;this._symbolUpdateData=null;this.status=c.TileStatus.INITIALIZED};p.prototype.acquire=function(v,r,y,x,z){this.key=v;this.refKey=r;r=y.lodAt(v.level).resolution;
var u=y.size[0]*r,w=y.origin,t=v.col*u,A=v.row*u,G=y.spatialReference,B=0;G&&(G._isWrappable?G._isWrappable():G.isWrappable)&&(G=h.getInfo(G),B=G.valid[1]-G.valid[0]);t=w.x+t+v.world*B;w=w.y-A;this.coords[0]=t;this.coords[1]=w;this.bounds[0]=t;this.bounds[1]=w;this.bounds[2]=t+u;this.bounds[3]=w-u;this.widthInPixels=y.size[1];this.coordRange=4096;this.resolution=r;this.rotation=z;this.styleLayers=x;this.id=v.id};p.prototype.setData=function(v,r){this._vectorTileData=v;this.client=r;v&&v.bufferDataInfo||
(this.status=c.TileStatus.NO_DATA)};p.prototype.updateSymbolData=function(v){v&&(this._symbolUpdateData=v,this.requestRender())};p.prototype.dispose=function(){this.fillVertexArrayObject&&(this.fillVertexArrayObject.dispose(),this.fillVertexArrayObject=null);this.fillDDVertexArrayObject&&(this.fillDDVertexArrayObject.dispose(),this.fillDDVertexArrayObject=null);this.outlineVertexArrayObject&&(this.outlineVertexArrayObject.dispose(),this.outlineVertexArrayObject=null);this.outlineDDVertexArrayObject&&
(this.outlineDDVertexArrayObject.dispose(),this.outlineDDVertexArrayObject=null);this.lineVertexArrayObject&&(this.lineVertexArrayObject.dispose(),this.lineVertexArrayObject=null);this.lineDDVertexArrayObject&&(this.lineDDVertexArrayObject.dispose(),this.lineDDVertexArrayObject=null);this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&
(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this.circleVertexArrayObject&&(this.circleVertexArrayObject.dispose(),this.circleVertexArrayObject=null);this.fillVertexBuffer&&(this.fillVertexBuffer.dispose(),this.fillVertexBuffer=null);this.fillDDVertexBuffer&&(this.fillDDVertexBuffer.dispose(),this.fillDDVertexBuffer=null);this.fillIndexBuffer&&(this.fillIndexBuffer.dispose(),
this.fillIndexBuffer=null);this.outlineVertexBuffer&&(this.outlineVertexBuffer.dispose(),this.outlineVertexBuffer=null);this.outlineDDVertexBuffer&&(this.outlineDDVertexBuffer.dispose(),this.outlineDDVertexBuffer=null);this.outlineIndexBuffer&&(this.outlineIndexBuffer.dispose(),this.outlineIndexBuffer=null);this.lineVertexBuffer&&(this.lineVertexBuffer.dispose(),this.lineVertexBuffer=null);this.lineDDVertexBuffer&&(this.lineDDVertexBuffer.dispose(),this.lineDDVertexBuffer=null);this.lineIndexBuffer&&
(this.lineIndexBuffer.dispose(),this.lineIndexBuffer=null);this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),this.iconVertexBuffer=null);this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.textVertexBuffer&&(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textIndexBuffer&&
(this.textIndexBuffer.dispose(),this.textIndexBuffer=null);this.circleVertexBuffer&&(this.circleVertexBuffer.dispose(),this.circleVertexBuffer=null);this.circleIndexBuffer&&(this.circleIndexBuffer.dispose(),this.circleIndexBuffer=null);this.texture&&(this.texture.dispose(),this.texture=null);this._renderBuckets.length=0;this.status=c.TileStatus.INITIALIZED};p.prototype.getCpuMemoryUsage=function(){return null!=this._vectorTileData&&this._vectorTileData.bufferData?this._vectorTileData.bufferData.reduce(function(v,
r){return v+r.byteLength},0)+this._vectorTileData.bufferDataInfo.byteLength+this._vectorTileData.bucketDataInfo.byteLength:0};p.prototype.getGpuMemoryUsage=function(){var v=this,r=m.reduce(function(y,x){return v[x]?y+v[x].size:y},0);this.texture&&(r+=this.texture.descriptor.width*this.texture.descriptor.height*4);return r};p.prototype.attach=function(v){if(this.status!==c.TileStatus.INITIALIZED)return!0;if(0===this._renderBuckets.length)for(var r=new Uint32Array(this._vectorTileData.bucketDataInfo),
y=r.length,x=0;x<y;){var z=r[x],u=r[x+1];if(0===u)u=new k.BackgroundRenderBucket,u.layerID=z,this._renderBuckets.push(u),x+=2;else if(1===u)u=new k.FillRenderBucket,u.layerID=z,u.triangleElementStart=r[x+2],u.triangleElementCount=r[x+3],u.outlineElementStart=r[x+4],u.outlineElementCount=r[x+5],this._renderBuckets.push(u),x+=6;else if(2===u)u=new k.LineRenderBucket,u.layerID=z,u.triangleElementStart=r[x+2],u.triangleElementCount=r[x+3],this._renderBuckets.push(u),x+=4;else if(3===u){u=new k.SymbolRenderBucket;
u.layerID=z;u.isSDF=0!==r[x+2];var w=x+3;z=r[w];w++;if(0<z)for(var t=void 0,A=void 0,G=void 0,B=0;B<z;B++)t=r[w],A=r[w+1],G=r[w+2],u.markerPerPageElementsMap.set(t,[A,G]),w+=3;var E=r[w];w++;if(0<E)for(G=A=t=void 0,B=0;B<E;B++)t=r[w],A=r[w+1],G=r[w+2],u.glyphPerPageElementsMap.set(t,[A,G]),w+=3;this._renderBuckets.push(u);x+=5+3*z+3*E}else 4===u&&(u=new k.CircleRenderBucket,u.layerID=z,u.triangleElementStart=r[x+2],u.triangleElementCount=r[x+3],this._renderBuckets.push(u),x+=4)}v=v.context;r=new Uint32Array(this._vectorTileData.bufferDataInfo);
y=r.length;for(u=x=0;u<y;u+=2,x++)if(!(0>=r[u+1]||0===this._vectorTileData.bufferData[x].byteLength))switch(r[u]){case 1:this.fillVertexBuffer?this.fillVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 2:this.fillDDVertexBuffer?this.fillDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillDDVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 3:this.fillIndexBuffer?
this.fillIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.fillIndexBuffer=l.createIndex(v,35044,this._vectorTileData.bufferData[x]);break;case 4:this.outlineVertexBuffer?this.outlineVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 5:this.outlineDDVertexBuffer?this.outlineDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineDDVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);
break;case 6:this.outlineIndexBuffer?this.outlineIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.outlineIndexBuffer=l.createIndex(v,35044,this._vectorTileData.bufferData[x]);break;case 7:this.lineVertexBuffer?this.lineVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 8:this.lineDDVertexBuffer?this.lineDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineDDVertexBuffer=l.createVertex(v,
35044,this._vectorTileData.bufferData[x]);break;case 9:this.lineIndexBuffer?this.lineIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.lineIndexBuffer=l.createIndex(v,35044,this._vectorTileData.bufferData[x]);break;case 10:this.iconVertexBuffer?this.iconVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.iconVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 11:this.iconDDVertexBuffer?this.iconDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):
this.iconDDVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 12:this.iconIndexBuffer?this.iconIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.iconIndexBuffer=l.createIndex(v,35044,this._vectorTileData.bufferData[x]);break;case 13:this.textVertexBuffer?this.textVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.textVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 14:this.textDDVertexBuffer?this.textDDVertexBuffer.setData(this._vectorTileData.bufferData[x]):
this.textDDVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 15:this.textIndexBuffer?this.textIndexBuffer.setData(this._vectorTileData.bufferData[x]):this.textIndexBuffer=l.createIndex(v,35044,this._vectorTileData.bufferData[x]);break;case 16:this.circleVertexBuffer?this.circleVertexBuffer.setData(this._vectorTileData.bufferData[x]):this.circleVertexBuffer=l.createVertex(v,35044,this._vectorTileData.bufferData[x]);break;case 17:this.circleIndexBuffer?this.circleIndexBuffer.setData(this._vectorTileData.bufferData[x]):
this.circleIndexBuffer=l.createIndex(v,35044,this._vectorTileData.bufferData[x])}this._vectorTileData=null;this.status=c.TileStatus.READY;return!0};p.prototype.detach=function(v){this.client&&this.status!==c.TileStatus.INVALID&&this.status!==c.TileStatus.INITIALIZED&&this.client.invoke("destructTileData",this.id);this.dispose();n.prototype.detach.call(this,v)};p.prototype.doRender=function(v){if(this.visible&&this.status===c.TileStatus.READY){var r=v.context,y=v.renderer;if(r&&y){var x=v.drawphase;
this._symbolUpdateData&&this._updateSymbolData(v);r.setStencilFunction(514,this.stencilData.reference,this.stencilData.mask);var z=this.styleLayers,u=void 0!==v.layerOpacity?v.layerOpacity:1;if(0!==u){var w=this._renderBuckets.length,t=0;if(0===x)for(t=w-1;0<=t;t--){var A=this._renderBuckets[t];3!==A.type&&4!==A.type&&A.hasData()&&y.renderBucket(r,A,v.displayLevel,v.requiredLevel,x,this,z.layers[A.layerID],u)}else for(t=0;t<w;t++)A=this._renderBuckets[t],A.hasData()&&y.renderBucket(r,A,v.displayLevel,
v.requiredLevel,x,this,z.layers[A.layerID],u)}}}};p.prototype._updateSymbolData=function(v){if(!this._symbolUpdateData.bucketDataInfo)return!0;var r=new Uint32Array(this._symbolUpdateData.bucketDataInfo),y=r.length;if(0===y)return this._symbolUpdateData=null,!0;if(this.status!==c.TileStatus.READY)return this.requestRender(),!1;v=v.context;for(var x=new Uint32Array(this._symbolUpdateData.bufferDataInfo),z=x.length,u=0,w=0;w<z;w+=2,u++)switch(x[w]){case 10:this.iconVertexBuffer&&(this.iconVertexBuffer.dispose(),
this.iconVertexBuffer=null);this.iconVertexBuffer=l.createVertex(v,35044,this._symbolUpdateData.bufferData[u]);break;case 11:this.iconDDVertexBuffer&&(this.iconDDVertexBuffer.dispose(),this.iconDDVertexBuffer=null);this.iconDDVertexBuffer=l.createVertex(v,35044,this._symbolUpdateData.bufferData[u]);break;case 12:this.iconIndexBuffer&&(this.iconIndexBuffer.dispose(),this.iconIndexBuffer=null);this.iconIndexBuffer=l.createIndex(v,35044,this._symbolUpdateData.bufferData[u]);break;case 13:this.textVertexBuffer&&
(this.textVertexBuffer.dispose(),this.textVertexBuffer=null);this.textVertexBuffer=l.createVertex(v,35044,this._symbolUpdateData.bufferData[u]);break;case 14:this.textDDVertexBuffer&&(this.textDDVertexBuffer.dispose(),this.textDDVertexBuffer=null);this.textDDVertexBuffer=l.createVertex(v,35044,this._symbolUpdateData.bufferData[u]);break;case 15:this.textIndexBuffer&&(this.textIndexBuffer.dispose(),this.textIndexBuffer=null),this.textIndexBuffer=l.createIndex(v,35044,this._symbolUpdateData.bufferData[u])}v=
this._renderBuckets.length;for(x=0;x<v;x++)this._renderBuckets[x]instanceof k.SymbolRenderBucket&&(z=this._renderBuckets[x],z.markerPerPageElementsMap.clear(),z.glyphPerPageElementsMap.clear());for(v=0;v<y;){z=r[v];u=-1;w=this._renderBuckets.length;for(x=0;x<w;x++)if(this._renderBuckets[x].layerID===z){u=x;break}x=this._renderBuckets[u];x||(x=new k.SymbolRenderBucket,x.layerID=z,x.isSDF=0!==r[v+2],this._renderBuckets.push(x));var t=v+3;z=r[t];t++;if(0<z)for(var A=w=u=void 0,G=0;G<z;G++)u=r[t],w=r[t+
1],A=r[t+2],x.markerPerPageElementsMap.set(u,[w,A]),t+=3;var B=r[t];t++;if(0<B)for(A=w=u=void 0,G=0;G<B;G++)u=r[t],w=r[t+1],A=r[t+2],x.glyphPerPageElementsMap.set(u,[w,A]),t+=3;v+=5+3*z+3*B}this.iconVertexArrayObject&&(this.iconVertexArrayObject.dispose(),this.iconVertexArrayObject=null);this.iconDDVertexArrayObject&&(this.iconDDVertexArrayObject.dispose(),this.iconDDVertexArrayObject=null);this.textVertexArrayObject&&(this.textVertexArrayObject.dispose(),this.textVertexArrayObject=null);this.textDDVertexArrayObject&&
(this.textDDVertexArrayObject.dispose(),this.textDDVertexArrayObject=null);this._symbolUpdateData=null;return!0};p.pool=new b(p);return p}(d)})},"esri/layers/vectorTiles/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(D,q,a){return function(){function b(g,f,h,d){this.set(g,f,h,d)}b.from=function(g,f,h,d){return b.pool.acquire(g,f,h,d)};b.getId=function(g,f,h,d){return"object"===typeof g?g.level+"/"+g.row+"/"+g.col+"/"+g.world:g+"/"+f+"/"+h+"/"+
d};Object.defineProperty(b.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});b.prototype.equals=function(g){return this.level===g.level&&this.row===g.row&&this.col===g.col&&this.world===g.world};b.prototype.release=function(){this.world=this.col=this.row=this.level=0};b.prototype.set=function(g,f,h,d){null==g?this.world=this.col=this.row=this.level=0:"object"===
typeof g?(this.level=g.level||0,this.row=g.row||0,this.col=g.col||0,this.world=g.world||0):"string"===typeof g?(g=g.split("/"),f=g[1],h=g[2],d=g[3],this.level=parseFloat(g[0]),this.row=parseFloat(f),this.col=parseFloat(h),this.world=parseFloat(d)):(this.level=+g,this.row=+f,this.col=+h,this.world=+d||0);return this};b.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};b.prototype.getChildKeys=function(){var g=this.level+1,f=this.row<<1,h=this.col<<1,d=this.world;
return[b.pool.acquire(g,f,h,d),b.pool.acquire(g,f,h+1,d),b.pool.acquire(g,f+1,h,d),b.pool.acquire(g,f+1,h+1,d)]};b.prototype._compare=function(g){return this.row<g.row?-1:this.row>g.row?1:this.col<g.col?-1:this.col>g.col?1:0};b.sort=function(g){return g.map(function(f){return b.from(f)}).sort(function(f,h){return f._compare(h)}).map(function(f){return f.id})};b.pool=new a(b,!0,null,25,50);return b}()})},"esri/layers/vectorTiles/views/vectorTiles/RenderBucket":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper"],function(D,q,a,b){Object.defineProperty(q,"__esModule",{value:!0});D=function(){return function(g){this.type=g}}();q.RenderBucket=D;b=function(g){function f(){var h=g.call(this,2)||this;h.triangleElementStart=0;h.triangleElementCount=0;return h}a(f,g);f.prototype.hasData=function(){return 0<this.triangleElementCount};return f}(D);q.LineRenderBucket=b;b=function(g){function f(){var h=g.call(this,1)||this;h.triangleElementStart=
0;h.triangleElementCount=0;h.outlineElementStart=0;h.outlineElementCount=0;return h}a(f,g);f.prototype.hasData=function(){return 0<this.triangleElementCount||0<this.outlineElementCount};return f}(D);q.FillRenderBucket=b;b=function(g){function f(){var h=g.call(this,3)||this;h.markerPerPageElementsMap=new Map;h.glyphPerPageElementsMap=new Map;h.isSDF=!1;return h}a(f,g);f.prototype.hasData=function(){return 0<this.markerPerPageElementsMap.size||0<this.glyphPerPageElementsMap.size};return f}(D);q.SymbolRenderBucket=
b;b=function(g){function f(){var h=g.call(this,4)||this;h.triangleElementStart=0;h.triangleElementCount=0;return h}a(f,g);f.prototype.hasData=function(){return 0<this.triangleElementCount};return f}(D);q.CircleRenderBucket=b;D=function(g){function f(){return g.call(this,0)||this}a(f,g);f.prototype.hasData=function(){return!0};return f}(D);q.BackgroundRenderBucket=D})},"esri/layers/vectorTiles/views/vectorTiles/TileHandler":function(){define("require exports dojo/Deferred dojo/has dojo/promise/all ../../request ../../core/LRUCache ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../2d/tiling/TileKey ./GeometryUtils ./GlyphMosaic ./GlyphSource ./SpriteMosaic ./SpriteSource ./TileIndex ./VectorTileDisplayObject module".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y,x){var z=new h(10),u=new Map;return function(){function w(t,A,G,B,E){void 0===B&&(B=!1);this.devicePixelRatio=G;this.allowUpdates=B;this._tileIndex=this._connection=this._glyphMosaic=this._spriteMosaic=null;this._updateQueue=new Map;this._ongoingRequests=new Map;this._vectorTileLayer=t;this._styleRepository=t.styleRepository;this._requestUpdate=A}w.prototype.destroy=function(){this.stop();this._vectorTileLayer=this._requestUpdate=this._styleRepository=
null;this._spriteMosaic&&(this._spriteMosaic.dispose(),this._spriteMosaic=null);this._glyphMosaic&&(this._glyphMosaic.dispose(),this._glyphMosaic=null)};Object.defineProperty(w.prototype,"initialized",{get:function(){return this._broadcastPromise&&this._broadcastPromise.isFulfilled()},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"spriteMosaic",{get:function(){return this._spriteMosaic},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"glyphMosaic",{get:function(){return this._glyphMosaic},
enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"ongoingRequestCount",{get:function(){return this._ongoingRequests.size},enumerable:!0,configurable:!0});w.prototype.start=function(){var t=this;this.stop();var A=this._styleRepository,G=new v(A.sprite,this.devicePixelRatio);G.devicePixelRatio=this.devicePixelRatio;var B=G.load().then(function(){t._spriteMosaic=new p(1024,1024,250);t._spriteMosaic.setSpriteSource(G);b("stable-symbol-rendering")&&t._spriteMosaic.preloadSpriteItems()}),
E=new n(A.glyphs);this._glyphMosaic=new m(1024,1024,E);var F=this._fetchTileMap(this._vectorTileLayer.tileIndexUrl),I=e.open(c.getAbsMid("./WorkerTileHandler",D,x),{client:this}).then(function(P){t._connection=P}),M=new a(function(P){B.isFulfilled()||B.cancel();F.isFulfilled()||F.cancel();I.isFulfilled()||I.cancel()});g([B,F,I]).then(function(P){g(t._connection.broadcast("setLayers",A.styleJSON)).then(function(){M.resolve()})});return this._broadcastPromise=M.promise};w.prototype.stop=function(){this._broadcastPromise&&
!this._broadcastPromise.isFulfilled()&&this._broadcastPromise.cancel();this._updateQueue.forEach(function(t){return t.cancel()});this._ongoingRequests.forEach(function(t){return t.cancel()});this._connection&&(this._connection.close(),this._connection=null)};w.prototype.updateTile=function(t,A){var G=this;if(!this.allowUpdates)return d.resolve(null);if(!this._broadcastPromise.isFulfilled()||!this._connection)return d.reject(Error("no connection"));var B=Math.round(l.degToByte(A.state.rotation));if(t.rotation===
B)return d.resolve(null);var E=t.key;if(this._updateQueue.has(E.id)){var F=this._updateQueue.get(E.id);F.cancel()}t.rotation=B;F=this._connection.invoke("update",{key:t.id,rotation:B},null,{client:t.client}).then(function(I){t.updateSymbolData(I);return I}).always(function(){G._updateQueue["delete"](E.id)});this._updateQueue.set(t.id,F);return F};w.prototype.getVectorTileWithLRC=function(t,A,G,B){var E=this;void 0===B&&(B=0);var F=new k(t,A,G,0);return this.getRefKey(F).then(function(I){var M=new y(F,
I,E._vectorTileLayer.tileInfo,E._styleRepository,0);if(I)return E.getTileData(M.key,0).then(function(P){M.setData(P.tileData,P.client);return M});M.setData(null,null);return M})};w.prototype.getTileData=function(t,A){var G=this;return this._broadcastPromise.isFulfilled()&&this._connection?this.getRefKey(t).then(function(B){if(!B)return d.resolve(null);var E=Math.round(l.degToByte(A));return G._getTileData(G._connection,t,B,E).then(function(F){return F&&F.tileData?{tileData:F.tileData,client:F.client}:
d.reject("No data")})}):d.reject(Error("no connection"))};w.prototype.getRefKey=function(t){return this._tileIndex?this._tileIndex.dataKey(t):d.resolve(t)};w.prototype.fetchTileData=function(t){t=k.pool.acquire(t);var A=this._vectorTileLayer.getTileUrl(t.level,t.row,t.col);k.pool.release(t);return f(A,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(G){return{result:G.data,transferList:[G.data]}})};w.prototype.getSprites=function(t){return this._spriteMosaic.getSpriteItems(t)};
w.prototype.getGlyphs=function(t){return this._glyphMosaic.getGlyphItems(t.tileID,t.font,t.codePoints)};w.prototype.getStyleRepository=function(){return this._styleRepository};w.prototype.getTileIndex=function(){return this._tileIndex};w.prototype._getTileData=function(t,A,G,B){var E=this,F={client:null};if(t=this._ongoingRequests.get(A.id))return t;t=this._connection.invoke("getTile",{key:A.id,refKey:G.id,rotation:B,cacheTile:this.allowUpdates},null,F).then(function(I){E._ongoingRequests["delete"](A.id);
return{tileData:I,client:F.client}})["catch"](function(I){E._ongoingRequests["delete"](A.id);E._connection.invoke("destructTileData",A.id,null,F);return d.reject(I)});this._ongoingRequests.set(A.id,t);return t};w.prototype._fetchTileMap=function(t){var A=this;if(this._vectorTileLayer.capabilities.operations.supportsTileMap&&this._vectorTileLayer.tilemapCache)return this._tileIndex=new r(this._vectorTileLayer.tilemapCache),d.resolve();if(!t)return d.resolve();if(z.has(t))return this._tileIndex=z.use(t),
d.resolve();if(u.has(t))return u.get(t).then(function(B){A._tileIndex=new r(B.data)});var G=f(t,{callbackParamName:"callback",responseType:"json"});G.then(function(B){A._tileIndex=new r(B.data);u["delete"](t);z.insert(t,A._tileIndex)});u.set(t,G);return G};return w}()})},"esri/layers/vectorTiles/core/LRUCache":function(){define(["require","exports"],function(D,q){return function(){function a(b){this._cache={};this._lruQueue=[];if(0>=b)throw Error("LRU cache size must be bigger than zero!");this._maxSize=
b}a.prototype.has=function(b){return void 0!==this._cache[b]};a.prototype.insert=function(b,g){null!==this.use(b)?this._cache[b]=g:(this._collect(),this._cache[b]=g,this._lruQueue.unshift(b))};a.prototype.use=function(b){var g=this._cache[b];if(!g)return null;this._lruQueue.splice(this._lruQueue.indexOf(b),1);this._lruQueue.unshift(b);return g};a.prototype.print=function(){for(var b=0,g=this._lruQueue;b<g.length;b++);};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var b=
this._lruQueue.pop(),g=this._cache[b];g&&g.release&&g.release();delete this._cache[b]}};return a}()})},"esri/layers/vectorTiles/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(D,q,a){function b(g,f){if(Array.isArray(f)){var h=new a;g(f,function(){for(var d=[],c=0;c<arguments.length;c++)d[c]=arguments[c];h.resolve(d)});return h.promise}return b(g,[f]).then(function(d){return d[0]})}Object.defineProperty(q,"__esModule",{value:!0});q.when=b;q.getAbsMid=function(g,
f,h){return f.toAbsMid?f.toAbsMid(g):h.id.replace(/\/[^\/]*$/gi,"/")+g}})},"esri/layers/vectorTiles/core/workers":function(){define(["require","exports","./workers/workers"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});for(var b in a)q.hasOwnProperty(b)||(q[b]=a[b])})},"esri/layers/vectorTiles/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(D,q,a,b,g,f,
h,d,c){function e(){if(v)return v;for(var r=k+l,y=[],x=function(u){var w=c.create(u).then(function(t){return p[u]=t});y.push(w)},z=0;z<r;z++)x(z);return v=b(y).then(function(){})}Object.defineProperty(q,"__esModule",{value:!0});q.Connection=h;q.RemoteClient=d;(h=navigator.hardwareConcurrency)||(h=a("safari")&&a("mac")||a("trident")?8:2);var k=a("esri-workers-debug")?1:Math.max(1,Math.ceil(h/2)),l=a("esri-workers-debug")?1:Math.max(1,Math.floor(h/2)),m=g.getLogger("esri.core.workers"),n=0,p=[];q.initialize=
function(){e()};q.open=function(r,y,x){void 0===y&&(y={});if(Array.isArray(r))return new q.Connection(r.map(function(w){return new q.RemoteClient(w,y.client)}));if("string"!==typeof r){m.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var z=r;r=y;y={client:z,strategy:x?"dedicated":"distributed"}}var u=y.strategy||"distributed";return"local"===u?f.create(function(w){D([r],function(t){w(q.RemoteClient.connect(t))})}).then(function(w){return new q.Connection([new q.RemoteClient(w,
y.client)])}):e().then(function(){if("dedicated"===u){var w=k+n++;n%=l;return p[w].open(r).then(function(t){return new q.Connection([new q.RemoteClient(t,y.client)])})}return f.all(p.map(function(t){return t.open(r)})).then(function(t){return new q.Connection(t.map(function(A){return new q.RemoteClient(A,y.client)}))})})};q.terminate=function(){for(var r=0;r<p.length;r++)p[r]&&p[r].terminate();p.length=0};var v})},"esri/layers/vectorTiles/core/workers/Connection":function(){define(["require","exports",
"../promiseUtils"],function(D,q,a){return function(){function b(g){this._clientIdx=0;this._clients=g}b.prototype.broadcast=function(g,f,h){for(var d=[],c=0,e=this._clients;c<e.length;c++)d.push(e[c].invoke(g,f,h));return d};b.prototype.close=function(){for(var g=0,f=this._clients;g<f.length;g++)f[g].close();this._clients=[]};b.prototype.invoke=function(g,f,h,d){var c=d&&d.client;if(!this._clients||!this._clients.length)return a.reject(Error("Connection closed"));null!=c&&-1!==this._clients.indexOf(c)||
this._clients.some(function(e){return e.isBusy()?!1:(c=e,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,c=this._clients[this._clientIdx]);g=c.invoke(g,f,h);d&&(d.client=c);return g};b.prototype.openPorts=function(){return a.all(this._clients.map(function(g){return g.openPort()}))};return b}()})},"esri/layers/vectorTiles/core/workers/RemoteClient":function(){define("require exports dojo/Deferred ../Error ../promiseUtils ./utils".split(" "),function(D,q,a,b,g,f){function h(n,p){n["delete"](p)}
var d=f.MessageType.CLOSE,c=f.MessageType.CANCEL,e=f.MessageType.INVOKE,k=f.MessageType.RESPONSE,l=f.MessageType.OPEN_PORT,m=function(){function n(p){this._timer=null;this._cancelledJobIds=new Set;this._invokeMessages=[];this._invoke=p;this._timer=null;this._process=this._process.bind(this)}n.prototype.push=function(p){p.type===f.MessageType.CANCEL?this._cancelledJobIds.add(p.jobId):(this._invokeMessages.push(p),null===this._timer&&(this._timer=setTimeout(this._process,0)))};n.prototype.clear=function(){this._invokeMessages.length=
0;this._cancelledJobIds.clear();this._timer=null};n.prototype._process=function(){this._timer=null;for(var p=0,v=this._invokeMessages;p<v.length;p++){var r=v[p];this._cancelledJobIds.has(r.jobId)||this._invoke(r)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return n}();return function(){function n(p,v,r){this._outJobs=new Map;this._inJobs=new Map;this._queue=new m(this._onInvoke.bind(this));this._onMessage=this._onMessage.bind(this);this._client=v;this._port=p;this._port.addEventListener("message",
this._onMessage);this._port.start();this._channel=r}n.connect=function(p){var v=new MessageChannel;p="function"===typeof p?new p:"default"in p&&"function"===typeof p["default"]?new p["default"]:p;p.remoteClient=new n(v.port1,p,v);return v.port2};n.prototype.close=function(){this._post({type:d});this._close()};n.prototype.isBusy=function(){return 0<this._outJobs.size};n.prototype.invoke=function(p,v,r){var y=this;if(!this._port)return g.reject(new b("remote-client:port-closed","Can't invoke(), port is closed"));
var x=f.newJobId(),z=new a(function(){h(y._outJobs,x);y._post({type:c,jobId:x})});this._outJobs.set(x,z);this._post({type:e,jobId:x,methodName:p},v,r);return z.promise};n.prototype.openPort=function(){var p=this,v=f.newJobId(),r=new a(function(){h(p._outJobs,v);p._post({type:c,jobId:v})});this._outJobs.set(v,r);this._post({type:l,jobId:v});return r.promise};n.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",this._onMessage);this._port.close();
this._outJobs.forEach(function(p){p.cancel()});this._inJobs.clear();this._outJobs.clear();this._queue.clear();this._port=this._client=null};n.prototype._onMessage=function(p){if(p=f.receiveMessage(p))switch(p.type){case k:this._onResponse(p);break;case e:this._queue.push(p);break;case c:this._onCancel(p);break;case d:this._close();break;case l:this._onOpenPort(p)}};n.prototype._onCancel=function(p){var v=this._inJobs,r=p.jobId,y=v.get(r);this._queue.push(p);y&&(h(v,r),y.cancel())};n.prototype._onInvoke=
function(p){var v=this,r=p.methodName,y=p.jobId;p=p.data;var x=this._inJobs,z=this._client,u=z[r];try{if(!u&&r&&-1!==r.indexOf("."))for(var w=r.split("."),t=0;t<w.length-1;t++)z=z[w[t]],u=z[w[t+1]];if("function"!==typeof u)throw new TypeError(r+" is not a function");var A=u.call(z,p,this)}catch(G){this._post({type:k,jobId:y,error:f.toInvokeError(G)});return}g.isThenable(A)?(x.set(y,A),A.then(function(G){x.has(y)&&(h(x,y),v._post({type:k,jobId:y},G))})["catch"](function(G){x.has(y)&&(h(x,y),G&&"cancel"===
G.dojoType||v._post({type:k,jobId:y,error:f.toInvokeError(G||{message:"Error encountered at method "+r})}))})):this._post({type:k,jobId:y},A)};n.prototype._onOpenPort=function(p){var v=new MessageChannel;new n(v.port1,this._client);this._post({type:k,jobId:p.jobId},v.port2,[v.port2])};n.prototype._onResponse=function(p){var v=p.jobId,r=p.error;p=p.data;var y=this._outJobs;if(y.has(v)){var x=y.get(v);h(y,v);r?x.reject(b.fromJSON(JSON.parse(r))):x.resolve(p)}};n.prototype._post=function(p,v,r){return f.postMessage(this._port,
p,v,r)};return n}()})},"esri/layers/vectorTiles/core/workers/utils":function(){define(["require","exports","dojo/has"],function(D,q,a){function b(f){return f&&"object"===typeof f&&("result"in f||"transferList"in f)}Object.defineProperty(q,"__esModule",{value:!0});(function(f){f[f.HANDSHAKE=0]="HANDSHAKE";f[f.CONFIGURE=1]="CONFIGURE";f[f.CONFIGURED=2]="CONFIGURED";f[f.OPEN=3]="OPEN";f[f.OPENED=4]="OPENED";f[f.RESPONSE=5]="RESPONSE";f[f.INVOKE=6]="INVOKE";f[f.CANCEL=7]="CANCEL";f[f.CLOSE=8]="CLOSE";
f[f.OPEN_PORT=9]="OPEN_PORT"})(q.MessageType||(q.MessageType={}));var g=0;q.newJobId=function(){return g++};q.isTranferableResult=b;q.toInvokeError=function(f){return f?f.toJSON?JSON.stringify(f):JSON.stringify({name:f.name,message:f.message,details:f.details,stack:f.stack}):null};q.postMessage=function(f,h,d,c){2===arguments.length||void 0===d&&void 0===c?f.postMessage(h):(a("esri-workers-supports-transfer-arraybuffer")||(c?(c=c.filter(function(e){return!(e instanceof ArrayBuffer)}),c.length||(c=
null)):b(d)&&d.transferList&&(d.transferList=d.transferList.filter(function(e){return!(e instanceof ArrayBuffer)}),d.transferList.length||(d.transferList=null))),c?(h.data=d,f.postMessage(h,c)):b(d)?(h.data=d.result,d.transferList?f.postMessage(h,d.transferList):f.postMessage(h)):(h.data=d,f.postMessage(h)))};q.receiveMessage=function(f){return f?(f=f.data)?"string"===typeof f?JSON.parse(f):f:null:null}})},"esri/layers/vectorTiles/core/workers/WorkerOwner":function(){define("require exports dojo/Deferred ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),
function(D,q,a,b,g,f,h,d,c){var e=f.getLogger("esri.core.workers"),k=d.MessageType.CANCEL,l=d.MessageType.INVOKE,m=d.MessageType.OPEN,n=d.MessageType.OPENED,p=d.MessageType.RESPONSE;return function(){function v(r,y){this._outJobs=new Map;this._inJobs=new Map;this.worker=r;this.id=y;r.addEventListener("message",this._onMessage.bind(this));r.addEventListener("error",function(x){x.preventDefault();e.error(x)})}v.create=function(r){return c.createWorker().then(function(y){return new v(y,r)})};v.prototype.terminate=
function(){this.worker.terminate()};v.prototype.open=function(r){var y=this,x=d.newJobId(),z=new a(function(u){y._outJobs["delete"](x);y._post({type:k,jobId:x})});this._outJobs.set(x,z);this._post({type:m,jobId:x,modulePath:r});return z.promise};v.prototype._onMessage=function(r){if(r=d.receiveMessage(r))switch(r.type){case n:case p:this._onResponse(r);break;case k:this._onCancel(r);break;case l:this._onInvoke(r)}};v.prototype._onCancel=function(r){(r=this._inJobs.get(r.jobId))&&r.cancel()};v.prototype._onInvoke=
function(r){var y=this,x=r.methodName,z=r.jobId;r=r.data;var u=this._inJobs,w=b.workerMessages[x];try{if("function"!==typeof w)throw new TypeError(x+" is not a function");var t=w.call(null,r)}catch(A){this._post({type:p,jobId:z,error:d.toInvokeError(A)});return}h.isThenable(t)?(u.set(z,t),t.then(function(A){u["delete"](z);y._post({type:p,jobId:z},A)})["catch"](function(A){u["delete"](z);A||(A={message:"Error encountered at method"+x});A.dojoType&&"cancel"===A.dojoType||y._post({type:p,jobId:z,error:d.toInvokeError(A)})})):
this._post({type:p,jobId:z},t)};v.prototype._onResponse=function(r){var y=r.jobId,x=r.error;r=r.data;var z=this._outJobs.get(y);z&&(this._outJobs["delete"](y),x?z.reject(g.fromJSON(JSON.parse(x))):z.resolve(r))};v.prototype._post=function(r,y,x){return d.postMessage(this.worker,r,y,x)};return v}()})},"esri/layers/vectorTiles/kernel":function(){define(["require","exports","esri/kernel","./identity/IdentityManager"],function(D,q,a,b){return function(){function g(){}Object.defineProperty(g,"id",{get:function(){return a.id?
b:null},enumerable:!0,configurable:!0});g.workerMessages={};return g}()})},"esri/layers/vectorTiles/identity/IdentityManager":function(){define(["require","exports","esri/IdentityManager"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.findCredential=function(b){return a.findCredential(b)}})},"esri/IdentityManager":function(){define(["./IdentityManagerDialog","./kernel","./OAuthSignInHandler","dojo/_base/declare"],function(D,q,a,b){D=new D;q.id=b.safeMixin(D,a);return q.id})},
"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ./kernel ./lang ./domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/jsapi dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v){q=q([p],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(r){g.mixin(this,
r);this.registerConnectEvents()},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e${lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(r,y,x){this._nls||(this._nls=v.identity);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var z=this._loginDialog,u=x&&x.error,w=x&&x.token,t=new b(function(){z.onCancel()});if(z.open)return r=Error("BUSY"),r.name="identity-manager:busy",r.code="IdentityManager.1",r.log=!!a.isDebug,t.errback(r),t;m.hide(z.errMsg_);u&&403==u.code&&w&&(h.set(z.errMsg_,"innerHTML",this._nls.forbidden),
m.show(z.errMsg_));z.dfd_=t;z.serverInfo_=y;z.resUrl_=r;z.admin_=x&&x.isAdmin;h.set(z.resLink_,{title:r,innerHTML:"("+(this.getResourceName(r)||this._nls.lblItem)+")"});h.set(z.serverLink_,{title:y.server,innerHTML:(-1!==y.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":y.server)+" "});z.txtPwd_.set("value","");z.show();return t},_createLoginDialog:function(){var r=this._nls,y=l.substitute(r,this._dialogContent);y=l.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",
server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},y);var x=new e({title:r.title,content:y,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(z){z.charOrCode===d.ENTER&&this.execute_()},execute_:function(){var z=this.txtUser_.get("value"),u=this.txtPwd_.get("value"),w=this.dfd_,t=this;if(this.form_.validate()&&z&&u){this.btnSubmit_.set("label",r.lblSigning);var A=k.id.findCredential(t.resUrl_,z),G=function(B){t.btnSubmit_.set("label",
r.lblOk);t.btnSubmit_.set("disabled",!1);m.hide(t.errMsg_);t.hide();e._DialogLevelManager.hide(t);var E=t.serverInfo_;t.dfd_=t.serverInfo_=t.generateDfd_=t.resUrl_=null;var F=A;if(B){var I=B.token;var M=l.isDefined(B.expires)?Number(B.expires):null;var P=!!B.ssl;F?(F.userId=z,F.token=I,F.expires=M,F.validity=B.validity,F.ssl=P,F.creationTime=(new Date).getTime()):F=new n({userId:z,server:E.server,token:I,expires:M,ssl:P,isAdmin:t.admin_,validity:B.validity})}w.callback(F)};A&&!A._enqueued?G():(t.btnSubmit_.set("disabled",
!0),t.generateDfd_=k.id.generateToken(this.serverInfo_,{username:z,password:u},{isAdmin:this.admin_}).addCallback(G).addErrback(function(B){t.btnSubmit_.set("disabled",!1);t.generateDfd_=null;t.btnSubmit_.set("label",r.lblOk);h.set(t.errMsg_,"innerHTML",B&&B.code?r.invalidUser:r.noAuthService);m.show(t.errMsg_)}))}},cancel_:function(){x.generateDfd_&&x.generateDfd_.cancel();var z=x.dfd_,u=x.resUrl_,w=x.serverInfo_;x.btnSubmit_.set("disabled",!1);x.dfd_=x.serverInfo_=x.generateDfd_=x.resUrl_=null;
m.hide(x.errMsg_);e._DialogLevelManager.hide(x);x.esriIdMgr_.onDialogCancel({resourceUrl:u,serverInfo:w});u=Error("ABORTED");u.name="identity-manager:user-aborted";u.code="IdentityManager.2";u.log=!!a.isDebug;z.errback(u)}});y=x.domNode;x.form_=c.byNode(D.query(".esriIdForm",y)[0]);x.txtUser_=c.byNode(D.query(".esriIdUser",y)[0]);x.txtPwd_=c.byNode(D.query(".esriIdPwd",y)[0]);x.btnSubmit_=c.byNode(D.query(".esriIdSubmit",y)[0]);x.btnCancel_=c.byNode(D.query(".esriIdCancel",y)[0]);x.resLink_=D.query(".resLink",
y)[0];x.serverLink_=D.query(".serverLink",y)[0];x.errMsg_=D.query(".esriErrorMsg",y)[0];x.connect(x.txtUser_,"onKeyPress",x.keypressed_);x.connect(x.txtPwd_,"onKeyPress",x.keypressed_);x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x}});return k.IdentityManagerDialog=k.IdentityManager=q})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y,x,z,u,w,t,A,G,B,E,F,I,M,P){function aa(){}var ca=new g;ca.resolve(!0);w=b("dijit._DialogBase"+(v("dojo-bidi")?"_NoBidi":""),[A,B,E,G],{templateString:P,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:w.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(X){this._set("draggable",X)},maxRatio:.9,
closable:!0,_setClosableAttr:function(X){this.closeButtonNode.style.display=X?"":"none";this._set("closable",X)},postMixInProperties:function(){var X=k.getLocalization("dijit","common");m.mixin(this,X);this.inherited(arguments)},postCreate:function(){c.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);a.after(this,"onExecute",m.hitch(this,"hide"),!0);a.after(this,"onCancel",m.hitch(this,"hide"),!0);n(this.closeButtonNode,
r.press,function(X){X.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&T.isTop(this)&&(this._getFocusItems(),u.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();u.focus(this._firstFocusItem)},_endDrag:function(){var X=d.position(this.domNode),R=y.getBox(this.ownerDocument);X.y=Math.min(Math.max(X.y,0),R.h-X.h);X.x=Math.min(Math.max(X.x,0),R.w-X.w);this._relativePosition=X;this._position()},_setup:function(){var X=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==v("ie")?z:x)(X,{handle:this.titleBar}),a.after(this._moveable,"onMoveStop",m.hitch(this,"_endDrag"),!0)):h.add(X,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":q.map(this["class"].split(/\s/),function(R){return R+"_underlay"}).join(" "),_onKeyDown:m.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!h.contains(this.ownerDocumentBody,"dojoMove")){var X=
this.domNode,R=y.getBox(this.ownerDocument),fa=this._relativePosition,S=d.position(X);c.set(X,{left:Math.floor(R.l+(fa?Math.min(fa.x,R.w-S.w):(R.w-S.w)/2))+"px",top:Math.floor(R.t+(fa?Math.min(fa.y,R.h-S.h):(R.h-S.h)/2))+"px"})}},_onKey:function(X){if(X.keyCode==l.TAB){this._getFocusItems();var R=X.target;this._firstFocusItem==this._lastFocusItem?(X.stopPropagation(),X.preventDefault()):R==this._firstFocusItem&&X.shiftKey?(u.focus(this._lastFocusItem),X.stopPropagation(),X.preventDefault()):R!=this._lastFocusItem||
X.shiftKey||(u.focus(this._firstFocusItem),X.stopPropagation(),X.preventDefault())}else this.closable&&X.keyCode==l.ESCAPE&&(this.onCancel(),X.stopPropagation(),X.preventDefault())},show:function(){if(this.open)return ca.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),T.hide(this));var X=y.get(this.ownerDocument);this._modalconnects.push(n(X,"scroll",m.hitch(this,"resize",null)));this._modalconnects.push(n(this.domNode,
"keydown",m.hitch(this,"_onKey")));c.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();this._fadeInDeferred=new g(m.hitch(this,function(){R.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,aa);X=this._fadeInDeferred.promise;var R=e.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:m.hitch(this,function(){T.show(this,this.underlayAttrs)}),onEnd:m.hitch(this,function(){this.autofocus&&T.isTop(this)&&(this._getFocusItems(),
u.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return X},hide:function(){if(!this._alreadyInitialized||!this.open)return ca.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred=new g(m.hitch(this,function(){R.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,aa);this._fadeOutDeferred.then(m.hitch(this,"onHide"));var X=this._fadeOutDeferred.promise;var R=e.fadeOut({node:this.domNode,duration:this.duration,
onEnd:m.hitch(this,function(){this.domNode.style.display="none";T.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var fa;fa=this._modalconnects.pop();)fa.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return X},resize:function(X){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!X){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),q.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(Y){Y&&c.set(Y,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var R=y.getBox(this.ownerDocument);R.w*=this.maxRatio;R.h*=this.maxRatio;var fa=d.position(this.domNode);this._shrunk=!1;fa.w>=R.w&&(X={w:R.w},d.setMarginBox(this.domNode,X),fa=d.position(this.domNode),
this._shrunk=!0);fa.h>=R.h&&(X||(X={w:fa.w}),X.h=R.h,this._shrunk=!0);X&&(X.w||(X.w=fa.w),X.h||(X.h=fa.h))}if(X){d.setMarginBox(this.domNode,X);R=[];this.titleBar&&R.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&R.push({domNode:this.actionBarNode,region:"bottom"});fa={domNode:this.containerNode,region:"center"};R.push(fa);var S=M.marginBox2contentBox(this.domNode,X);M.layoutChildren(this.domNode,S,R);this._singleChild?(R=M.marginBox2contentBox(this.containerNode,fa),this._singleChild.resize({w:R.w,
h:R.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();v("touch")||X||this._position()}},_layoutChildren:function(){q.forEach(this.getChildren(),function(X){X.resize&&X.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var X;X=this._modalconnects.pop();)X.remove();T.hide(this);this.inherited(arguments)}});v("dojo-bidi")&&
(w=b("dijit._DialogBase",w,{_setTitleAttr:function(X){this._set("title",X);this.titleNode.innerHTML=X;this.applyTextDir(this.titleNode)},_setTextDirAttr:function(X){this._created&&this.textDir!=X&&(this._set("textDir",X),this.set("title",this.title))}}));var ea=b("dijit.Dialog",[I,w],{});ea._DialogBase=w;var T=ea._DialogLevelManager={_beginZIndex:950,show:function(X,R){la[la.length-1].focus=u.curNode;var fa=la[la.length-1].dialog?la[la.length-1].zIndex+2:ea._DialogLevelManager._beginZIndex;c.set(X.domNode,
"zIndex",fa);F.show(R,fa-1);la.push({dialog:X,underlayAttrs:R,zIndex:fa})},hide:function(X){if(la[la.length-1].dialog==X){la.pop();var R=la[la.length-1];1==la.length?F.hide():F.show(R.underlayAttrs,R.zIndex-1);if(X.refocus&&(X=R.focus,!R.dialog||X&&f.isDescendant(X,R.dialog.domNode)||(R.dialog._getFocusItems(),X=R.dialog._firstFocusItem),X))try{X.focus()}catch(fa){}}else R=q.indexOf(q.map(la,function(fa){return fa.dialog}),X),-1!=R&&la.splice(R,1)},isTop:function(X){return la[la.length-1].dialog==
X}},la=ea._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];u.watch("curNode",function(X,R,fa){X=la[la.length-1].dialog;if(fa&&X&&!X._fadeOutDeferred&&fa.ownerDocument==X.ownerDocument){do if(fa==X.domNode||h.contains(fa,"dijitPopup"))return;while(fa=fa.parentNode);X.focus()}});v("dijit-legacy-requires")&&p(0,function(){D(["dijit/TooltipDialog"])});return ea})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(D,q){var a=q.prototype.onMove;return D("dojo.dnd.TimedMoveable",
q,{timeout:40,constructor:function(b,g){g||(g={});g.timeout&&"number"==typeof g.timeout&&0<=g.timeout&&(this.timeout=g.timeout)},onMoveStop:function(b){b._timer&&(clearTimeout(b._timer),a.call(this,b,b._leftTop));q.prototype.onMoveStop.apply(this,arguments)},onMove:function(b,g){b._leftTop=g;if(!b._timer){var f=this;b._timer=setTimeout(function(){b._timer=null;a.call(f,b,b._leftTop)},this.timeout)}}})})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),
function(D,q,a,b,g,f){return q("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(h){var d=[];D.forEach(h||this.getChildren(),function(c){"value"in c?d.push(c):d=d.concat(this._getDescendantFormWidgets(c.getChildren()))},this);return d},reset:function(){D.forEach(this._getDescendantFormWidgets(),function(h){h.reset&&h.reset()})},validate:function(){var h=!1;return D.every(D.map(this._getDescendantFormWidgets(),function(d){d._hasBeenBlurred=!0;var c=d.disabled||!d.validate||
d.validate();c||h||(f.scrollIntoView(d.containerNode||d.domNode),d.focus(),h=!0);return c}),function(d){return d})},setValues:function(h){a.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",h)},_setValueAttr:function(h){var d={};D.forEach(this._getDescendantFormWidgets(),function(l){l.name&&(d[l.name]||(d[l.name]=[])).push(l)});for(var c in d)if(d.hasOwnProperty(c)){var e=d[c],k=b.getObject(c,!1,h);void 0!==k&&(k=[].concat(k),
"boolean"==typeof e[0].checked?D.forEach(e,function(l){l.set("value",-1!=D.indexOf(k,l._get("value")))}):e[0].multiple?e[0].set("value",k):D.forEach(e,function(l,m){l.set("value",k[m])}))}},getValues:function(){a.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var h={};D.forEach(this._getDescendantFormWidgets(),function(d){var c=d.name;if(c&&!d.disabled){var e=d.get("value");"boolean"==typeof d.checked?
/Radio/.test(d.declaredClass)?!1!==e?b.setObject(c,e,h):(e=b.getObject(c,!1,h),void 0===e&&b.setObject(c,null,h)):(d=b.getObject(c,!1,h),d||(d=[],b.setObject(c,d,h)),!1!==e&&d.push(e)):(d=b.getObject(c,!1,h),"undefined"!=typeof d?b.isArray(d)?d.push(e):b.setObject(c,[d,e],h):b.setObject(c,e,h))}});return h},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var h=D.map(this._descendants,function(d){return d.get("state")||""});return 0<=D.indexOf(h,"Error")?
"Error":0<=D.indexOf(h,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(h){this._descendants=this._getDescendantFormWidgets();D.forEach(this._descendants,function(d){d._started||d.startup()});h||this._onChildChange()},_onChildChange:function(h){h&&"state"!=h&&"disabled"!=h||this._set("state",this._getState());h&&"value"!=h&&"disabled"!=h&&"checked"!=h||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var h=this;this.own(g(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(d){d.target!=h.domNode&&h._onChildChange(d.type.replace("attrmodified-",""))}));this.watch("state",function(d,c,e){this.onValidStateChange(""==e)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(D,q){return D("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=q._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l){var m=D("dijit.DialogUnderlay",[d,c],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(n){b.set(this.node,"id",n+"_underlay");this._set("dialogId",n)},_setClassAttr:function(n){this.node.className="dijitDialogUnderlay "+n;this._set("class",n)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(f(this.domNode,"keydown",q.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var n=this.node.style,p=this.domNode.style;p.display="none";var v=h.getBox(this.ownerDocument);p.top=v.t+"px";p.left=v.l+"px";n.width=v.w+"px";n.height=v.h+"px";p.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new e(this.domNode);var n=h.get(this.ownerDocument);this._modalConnects=[k.on("resize",q.hitch(this,"layout")),f(n,"scroll",
q.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});m.show=function(n,p){var v=m._singleton;!v||v._destroyed?v=l._underlay=m._singleton=new m(n):n&&v.set(n);g.set(v.domNode,"zIndex",p);v.open||v.show()};m.hide=function(){var n=
m._singleton;n&&!n._destroyed&&n.hide()};return m})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v){return c("dijit.layout.ContentPane",[a,b,g],{href:"",content:"",extractContent:!1,parseOnLoad:!0,
parserScope:D._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(r,
y,x){var z=new x(r,y);return!z.href&&z._contentSetter&&z._contentSetter.parseDeferred&&!z._contentSetter.parseDeferred.isFulfilled()?z._contentSetter.parseDeferred.then(function(){return z}):z},create:function(r,y){if(!(r&&r.template||!y||"href"in r||"content"in r)){y=k.byId(y);for(var x=y.ownerDocument.createDocumentFragment();y.firstChild;)x.appendChild(y.firstChild);r=q.delegate(r,{content:x})}this.inherited(arguments,[r,y])},postMixInProperties:function(){this.inherited(arguments);var r=p.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=f.substitute(this.loadingMessage,r);this.errorMessage=f.substitute(this.errorMessage,r)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(r){r._started||r._destroyed||!q.isFunction(r.startup)||(r.startup(),r._started=!0)},this)},_startChildren:function(){d.forEach(this.getChildren(),
function(r){r._started||r._destroyed||!q.isFunction(r.startup)||(r.startup(),r._started=!0)});this._contentSetter&&d.forEach(this._contentSetter.parseResults,function(r){r._started||r._destroyed||!q.isFunction(r.startup)||(r.startup(),r._started=!0)},this)},setHref:function(r){D.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",r)},_setHrefAttr:function(r){this.cancel();this.onLoadDeferred=new e(q.hitch(this,"cancel"));this.onLoadDeferred.then(q.hitch(this,
"onLoad"));this._set("href",r);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(r){D.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",r)},_setContentAttr:function(r){this._set("href","");this.cancel();this.onLoadDeferred=new e(q.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._setContent(r||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(r){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new e(q.hitch(this,"cancel"));this.onLoadDeferred.then(q.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var r=this,y={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};q.isObject(this.ioArgs)&&q.mixin(y,this.ioArgs);var x=this._xhrDfd=(this.ioMethod||n.get)(y),z;x.then(function(u){z=u;try{return r._isDownloaded=!0,r._setContent(u,!1)}catch(w){r._onError("Content",
w)}},function(u){x.canceled||r._onError("Download",u);delete r._xhrDfd;return u}).then(function(){r.onDownloadEnd();delete r._xhrDfd;return z});delete this._hrefChanged},_onLoadHandler:function(r){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(r)}catch(y){}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(r){}},destroyDescendants:function(r){this.isLoaded&&this._onUnloadHandler();var y=this._contentSetter;d.forEach(this.getChildren(),function(x){x.destroyRecursive?
x.destroyRecursive(r):x.destroy&&x.destroy(r);x._destroyed=!0});y&&(d.forEach(y.parseResults,function(x){x._destroyed||(x.destroyRecursive?x.destroyRecursive(r):x.destroy&&x.destroy(r),x._destroyed=!0)}),delete y.parseResults);r||m.empty(this.containerNode);delete this._singleChild},_setContent:function(r,y){r=this.preprocessContent(r);this.destroyDescendants();var x=this._contentSetter;x&&x instanceof h._ContentSetter||(x=this._contentSetter=new h._ContentSetter({node:this.containerNode,_onError:q.hitch(this,
this._onError),onContentError:q.hitch(this,function(w){w=this.onContentError(w);try{this.containerNode.innerHTML=w}catch(t){}})}));var z=q.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!r.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});z=x.set(q.isObject(r)&&r.domNode?r.domNode:r,z);var u=this;return v(z&&z.then?z:x.parseDeferred,function(){delete u._contentSetterParams;
y||(u._started&&(u._startChildren(),u._scheduleLayout()),u._onLoadHandler(r))})},preprocessContent:function(r){return r},_onError:function(r,y,x){this.onLoadDeferred.reject(y);r=this["on"+r+"Error"].call(this,y);x||r&&this._setContent(r,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),
function(D,q,a,b,g,f,h,d,c,e){return q("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var k=this.getParent();this._childOfLayoutWidget=k&&k.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(c.on("resize",f.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var k=[],l=!1;h("\x3e *",this.containerNode).some(function(m){var n=
d.byNode(m);n&&n.resize?k.push(n):!/script|link|style/i.test(m.nodeName)&&m.offsetHeight&&(l=!0)});this._singleChild=1!=k.length||l?null:k[0];a.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(k,l){this._resizeCalled=!0;this._scheduleLayout(k,l)},_scheduleLayout:function(k,l){this._isShown()?this._layout(k,l):(this._needLayout=!0,this._changeSize=k,this._resultSize=l)},_layout:function(k,l){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();
k&&b.setMarginBox(this.domNode,k);var m=this.containerNode;if(m===this.domNode){var n=l||{};f.mixin(n,k||{});"h"in n&&"w"in n||(n=f.mixin(b.getMarginBox(m),n));this._contentBox=e.marginBox2contentBox(m,n)}else this._contentBox=b.getContentBox(m);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var k=this._contentBox||b.getContentBox(this.containerNode);this._singleChild.resize({w:k.w,h:k.h})}else{k=this.getChildren();for(var l,
m=0;l=k[m++];)l.resize&&l.resize()}},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var k=this.domNode,l=this.domNode.parentNode;return"none"!=k.style.display&&"hidden"!=k.style.visibility&&!a.contains(k,"dijitHidden")&&l&&l.style&&"none"!=l.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array",
"dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(D,q,a,b,g){function f(c){return c.substring(0,1).toUpperCase()+c.substring(1)}function h(c,e){var k=c.resize?c.resize(e):a.setMarginBox(c.domNode,e);k?g.mixin(c,k):(g.mixin(c,a.getMarginBox(c.domNode)),g.mixin(c,e))}var d={marginBox2contentBox:function(c,e){var k=b.getComputedStyle(c),l=a.getMarginExtents(c,k),m=a.getPadBorderExtents(c,k);return{l:b.toPixelValue(c,k.paddingLeft),t:b.toPixelValue(c,k.paddingTop),w:e.w-
(l.w+m.w),h:e.h-(l.h+m.h)}},layoutChildren:function(c,e,k,l,m){e=g.mixin({},e);q.add(c,"dijitLayoutContainer");k=D.filter(k,function(n){return"center"!=n.region&&"client"!=n.layoutAlign}).concat(D.filter(k,function(n){return"center"==n.region||"client"==n.layoutAlign}));D.forEach(k,function(n){var p=n.domNode,v=n.region||n.layoutAlign;if(!v)throw Error("No region setting for "+n.id);var r=p.style;r.left=e.l+"px";r.top=e.t+"px";r.position="absolute";q.add(p,"dijitAlign"+f(v));p={};l&&l==n.id&&(p["top"==
n.region||"bottom"==n.region?"h":"w"]=m);"leading"==v&&(v=n.isLeftToRight()?"left":"right");"trailing"==v&&(v=n.isLeftToRight()?"right":"left");"top"==v||"bottom"==v?(p.w=e.w,h(n,p),e.h-=n.h,"top"==v?e.t+=n.h:r.top=e.t+e.h+"px"):"left"==v||"right"==v?(p.h=e.h,h(n,p),e.w-=n.w,"left"==v?e.l+=n.w:r.left=e.l+e.w+"px"):"client"!=v&&"center"!=v||h(n,e)})}};g.setObject("dijit.layout.utils",d);return d})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),
function(D,q,a,b,g,f,h){var d=0,c={_secureForInnerHtml:function(e){return e.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:f.empty,_setNodeContent:function(e,k){f.empty(e);if(k)if("number"==typeof k&&(k=k.toString()),"string"==typeof k&&(k=f.toDom(k,e.ownerDocument)),!k.nodeType&&q.isArrayLike(k))for(var l=k.length,m=0;m<k.length;m=l==k.length?m+1:0)f.place(k[m],e,"last");else f.place(k,e,"last");return e},_ContentSetter:b("dojo.html._ContentSetter",null,{node:"",
content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:D._scopeName,startup:!0,constructor:function(e,k){q.mixin(this,e||{});k=this.node=g.byId(this.node||k);this.id||(this.id=["Setter",k?k.id||k.tagName:"",d++].join("_"))},set:function(e,k){void 0!==e&&(this.content=e);"number"==typeof e&&(e=e.toString());k&&this._mixin(k);this.onBegin();this.setContent();var l=this.onEnd();return l&&l.then?l:this.node},setContent:function(){var e=this.node;if(!e)throw Error(this.declaredClass+
": setContent given no node");try{e=c._setNodeContent(e,this.content)}catch(l){var k=this.onContentError(l);try{e.innerHTML=k}catch(m){}}this.node=e},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(a.forEach(this.parseResults,function(e){e.destroy&&e.destroy()}),delete this.parseResults);f.empty(this.node)},onBegin:function(){var e=this.content;if(q.isString(e)&&(this.cleanContent&&
(e=c._secureForInnerHtml(e)),this.extractContent)){var k=e.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);k&&(e=k[1])}this.empty();this.content=e;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(e){return"Error occurred setting content: "+e},onExecError:function(e){return"Error occurred executing scripts: "+e},_mixin:function(e){var k=
{},l;for(l in e)l in k||(this[l]=e[l])},_parse:function(){var e=this.node;try{var k={};a.forEach(["dir","lang","textDir"],function(m){this[m]&&(k[m]=this[m])},this);var l=this;this.parseDeferred=h.parse({rootNode:e,noStart:!this.startup,inherited:k,scope:this.parserScope}).then(function(m){return l.parseResults=m},function(m){l._onError("Content",m,"Error parsing in _ContentSetter#"+l.id)})}catch(m){this._onError("Content",m,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(e,k,l){e=
this["on"+e+"Error"].call(this,k);l||e&&c._setNodeContent(this.node,e,!0)}}),set:function(e,k,l){void 0==k&&(k="");"number"==typeof k&&(k=k.toString());return l?(new c._ContentSetter(q.mixin(l,{content:k,node:e}))).set():c._setNodeContent(e,k,!0)}};q.setObject("dojo.html",c);return c})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v){function r(w){return eval("("+w+")")}function y(w){var t=w._nameCaseMap,A=w.prototype;if(!t||t._extendCnt<z){t=w._nameCaseMap={};for(var G in A)"_"!==G.charAt(0)&&(t[G.toLowerCase()]=G);t._extendCnt=z}return t}function x(w,t){t||(t=D);var A=t._dojoParserCtorMap||(t._dojoParserCtorMap={}),G=w.join();if(!A[G]){for(var B=[],E=0,F=w.length;E<F;E++){var I=w[E];B[B.length]=A[I]=A[I]||a.getObject(I)||~I.indexOf("/")&&t(I)}E=B.shift();A[G]=B.length?E.createSubclass?
E.createSubclass(B):E.extend.apply(E,B):E}return A[G]}new Date("X");var z=0;c.after(a,"extend",function(){z++},!0);var u={_clearCache:function(){z++;_ctorMap={}},_functionFromScript:function(w,t){var A="",G="",B=w.getAttribute(t+"args")||w.getAttribute("args"),E=w.getAttribute("with");B=(B||"").split(/\s*,\s*/);E&&E.length&&b.forEach(E.split(/\s*,\s*/),function(F){A+="with("+F+"){";G+="}"});return new Function(B,A+w.innerHTML+G)},instantiate:function(w,t,A){t=t||{};A=A||{};var G=(A.scope||q._scopeName)+
"Type",B="data-"+(A.scope||q._scopeName)+"-",E=B+"type",F=B+"mixins",I=[];b.forEach(w,function(M){var P=G in t?t[G]:M.getAttribute(E)||M.getAttribute(G);if(P){var aa=M.getAttribute(F);P=aa?[P].concat(aa.split(/\s*,\s*/)):[P];I.push({node:M,types:P})}});return this._instantiate(I,t,A)},_instantiate:function(w,t,A,G){function B(E){t._started||A.noStart||b.forEach(E,function(F){"function"!==typeof F.startup||F._started||F.startup()});return E}w=b.map(w,function(E){var F=E.ctor||x(E.types,A.contextRequire);
if(!F)throw Error("Unable to resolve constructor for: '"+E.types.join()+"'");return this.construct(F,E.node,t,A,E.scripts,E.inherited)},this);return G?e(w).then(B):B(w)},construct:function(w,t,A,G,B,E){function F(W){la&&a.setObject(la,W);for(ea=0;ea<S.length;ea++)c[S[ea].advice||"after"](W,S[ea].method,a.hitch(W,S[ea].func),!0);for(ea=0;ea<Y.length;ea++)Y[ea].call(W);for(ea=0;ea<ia.length;ea++)W.watch(ia[ea].prop,ia[ea].func);for(ea=0;ea<L.length;ea++)p(W,L[ea].event,L[ea].func);return W}var I=w&&
w.prototype;G=G||{};var M={};G.defaults&&a.mixin(M,G.defaults);E&&a.mixin(M,E);if(m("dom-attributes-explicit"))var P=t.attributes;else m("dom-attributes-specified-flag")?P=b.filter(t.attributes,function(W){return W.specified}):(E=(/^input$|^img$/i.test(t.nodeName)?t:t.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),P=b.map(E.split(/\s+/),function(W){var ja=W.toLowerCase();return{name:W,value:"LI"==t.nodeName&&"value"==W||
"enctype"==ja?t.getAttribute(ja):t.getAttributeNode(ja).value}}));var aa=G.scope||q._scopeName;E="data-"+aa+"-";var ca={};"dojo"!==aa&&(ca[E+"props"]="data-dojo-props",ca[E+"type"]="data-dojo-type",ca[E+"mixins"]="data-dojo-mixins",ca[aa+"type"]="dojotype",ca[E+"id"]="data-dojo-id");var ea=0,T;aa=[];for(var la,X;T=P[ea++];){var R=T.name,fa=R.toLowerCase();T=T.value;switch(ca[fa]||fa){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":X=T;break;case "data-dojo-id":case "jsid":la=
T;break;case "data-dojo-attach-point":case "dojoattachpoint":M.dojoAttachPoint=T;break;case "data-dojo-attach-event":case "dojoattachevent":M.dojoAttachEvent=T;break;case "class":M["class"]=t.className;break;case "style":M.style=t.style&&t.style.cssText;break;default:if(R in I||(R=y(w)[fa]||R),R in I)switch(typeof I[R]){case "string":M[R]=T;break;case "number":M[R]=T.length?Number(T):NaN;break;case "boolean":M[R]="false"!=T.toLowerCase();break;case "function":""===T||-1!=T.search(/[^\w\.]+/i)?M[R]=
new Function(T):M[R]=a.getObject(T,!1)||new Function(T);aa.push(R);break;default:fa=I[R],M[R]=fa&&"length"in fa?T?T.split(/\s*,\s*/):[]:fa instanceof Date?""==T?new Date(""):"now"==T?new Date:k.fromISOString(T):fa instanceof d?q.baseUrl+T:r(T)}else M[R]=T}}for(P=0;P<aa.length;P++)ca=aa[P].toLowerCase(),t.removeAttribute(ca),t[ca]=null;if(X)try{X=r.call(G.propsThis,"{"+X+"}"),a.mixin(M,X)}catch(W){throw Error(W.toString()+" in data-dojo-props\x3d'"+X+"'");}a.mixin(M,A);B||(B=w&&(w._noScript||I._noScript)?
[]:n("\x3e script[type^\x3d'dojo/']",t));var S=[],Y=[],ia=[],L=[];if(B)for(ea=0;ea<B.length;ea++)ca=B[ea],t.removeChild(ca),A=ca.getAttribute(E+"event")||ca.getAttribute("event"),G=ca.getAttribute(E+"prop"),X=ca.getAttribute(E+"method"),aa=ca.getAttribute(E+"advice"),P=ca.getAttribute("type"),ca=this._functionFromScript(ca,E),A?"dojo/connect"==P?S.push({method:A,func:ca}):"dojo/on"==P?L.push({event:A,func:ca}):M[A]=ca:"dojo/aspect"==P?S.push({method:X,advice:aa,func:ca}):"dojo/watch"==P?ia.push({prop:G,
func:ca}):Y.push(ca);w=(B=w.markupFactory||I.markupFactory)?B(M,t,w):new w(M,t);return w.then?w.then(F):F(w)},scan:function(w,t){function A(S){if(!S.inherited){S.inherited={};var Y=S.node,ia=A(S.parent);Y={dir:Y.getAttribute("dir")||ia.dir,lang:Y.getAttribute("lang")||ia.lang,textDir:Y.getAttribute(P)||ia.textDir};for(var L in Y)Y[L]&&(S.inherited[L]=Y[L])}return S.inherited}var G=[],B=[],E={},F=(t.scope||q._scopeName)+"Type",I="data-"+(t.scope||q._scopeName)+"-",M=I+"type",P=I+"textdir";I+="mixins";
var aa=w.firstChild,ca=t.inherited;if(!ca){ca=function L(Y,ia){return Y.getAttribute&&Y.getAttribute(ia)||Y.parentNode&&L(Y.parentNode,ia)};ca={dir:ca(w,"dir"),lang:ca(w,"lang"),textDir:ca(w,P)};for(var ea in ca)ca[ea]||delete ca[ea]}ca={inherited:ca};for(var T,la;;)if(aa)if(1!=aa.nodeType)aa=aa.nextSibling;else if(T&&"script"==aa.nodeName.toLowerCase())(X=aa.getAttribute("type"))&&/^dojo\/\w/i.test(X)&&T.push(aa),aa=aa.nextSibling;else if(la)aa=aa.nextSibling;else{var X=aa.getAttribute(M)||aa.getAttribute(F);
ea=aa.firstChild;if(X||ea&&(3!=ea.nodeType||ea.nextSibling)){la=null;if(X){var R=aa.getAttribute(I);T=R?[X].concat(R.split(/\s*,\s*/)):[X];try{la=x(T,t.contextRequire)}catch(S){}la||b.forEach(T,function(S){~S.indexOf("/")&&!E[S]&&(E[S]=!0,B[B.length]=S)});R=la&&!la.prototype._noScript?[]:null;ca={types:T,ctor:la,parent:ca,node:aa,scripts:R};ca.inherited=A(ca);G.push(ca)}else ca={node:aa,scripts:T,parent:ca};T=R;la=aa.stopParser||la&&la.prototype.stopParser&&!t.template;aa=ea}else aa=aa.nextSibling}else{if(!ca||
!ca.node)break;aa=ca.node.nextSibling;la=!1;ca=ca.parent;T=ca.scripts}var fa=new l;B.length?(t.contextRequire||D)(B,function(){fa.resolve(b.filter(G,function(S){if(!S.ctor)try{S.ctor=x(S.types,t.contextRequire)}catch(L){}for(var Y=S.parent;Y&&!Y.types;)Y=Y.parent;var ia=S.ctor&&S.ctor.prototype;S.instantiateChildren=!(ia&&ia.stopParser&&!t.template);S.instantiate=!Y||Y.instantiate&&Y.instantiateChildren;return S.instantiate}))}):fa.resolve(G);return fa.promise},_require:function(w,t){var A=r("{"+
w.innerHTML+"}"),G=[],B=[],E=new l,F=t&&t.contextRequire||D,I;for(I in A)G.push(I),B.push(A[I]);F(B,function(){for(var M=0;M<G.length;M++)a.setObject(G[M],arguments[M]);E.resolve(arguments)});return E.promise},_scanAmd:function(w,t){var A=new l,G=A.promise;A.resolve(!0);var B=this;n("script[type\x3d'dojo/require']",w).forEach(function(E){G=G.then(function(){return B._require(E,t)});E.parentNode.removeChild(E)});return G},parse:function(w,t){!w||"string"==typeof w||"nodeType"in w||(t=w,w=t.rootNode);
var A=w?f.byId(w):h.body();t=t||{};var G=t.template?{template:!0}:{},B=[],E=this,F=this._scanAmd(A,t).then(function(){return E.scan(A,t)}).then(function(I){return E._instantiate(I,G,t,!0)}).then(function(I){return B=B.concat(I)}).otherwise(function(I){throw I;});a.mixin(B,F);return B}};q.parser=u;g.parseOnLoad&&v(100,u,"parse");return u})},"esri/Credential":function(){define(["dojo/_base/declare","dojo/has","./kernel","./IdentityManagerBase"],function(D,q,a,b){D=D(b.Credential,{});return a.Credential=
D})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/url dojo/sniff dojo/io-query dojo/on ./kernel ./config ./lang ./ServerInfo ./urlUtils ./deferredUtils ./request ./Evented ./OAuthCredential ./arcgis/OAuthInfo".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y,x){var z={},u=function(B){var E=(new f(B.owningSystemUrl)).host;B=(new f(B.server)).host;var F=/.+\.arcgis\.com$/i;return F.test(E)&&
F.test(B)},w=function(B,E){return!!(u(B)&&E&&b.some(E,function(F){return F.test(B.server)}))},t=null,A=null;try{t=window.localStorage,A=window.sessionStorage}catch(B){}h=D(r,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=a.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=[];this._getOAuthHash();c(window,"pageshow",a.hitch(this,this._pageShowHandler))},defaultOAuthInfo:null,defaultTokenValidity:60,
tokenValidity:null,normalizeWebTierAuth:!1,_appUrlObj:n.urlToObject(window.location.href),_postMessageAuthHandle:null,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,_adminSvcs:/\/rest\/admin\/services(\/|$)/i,_gwDomains:[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},
{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,
customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(B){var E=this.serverInfos;E?(B=b.filter(B,function(F){return!this.findServerInfo(F.server)},this),this.serverInfos=E.concat(B)):
this.serverInfos=B;b.forEach(B,function(F){F.owningSystemUrl&&this._portals.push(F.owningSystemUrl);if(F.hasPortal){this._portals.push(F.server);var I=k.defaults.io.corsEnabledServers,M=this._getOrigin(F.tokenServiceUrl);n.canUseXhr(F.server)||I.push(F.server.replace(/^https?:\/\//i,""));n.canUseXhr(M)||I.push(M.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(B){var E=this.oAuthInfos;E?(b.forEach(B,function(F){(F=this.findOAuthInfo(F.portalUrl))&&E.splice(E.indexOf(F),1)},this),
this.oAuthInfos=E.concat(B)):this.oAuthInfos=B},registerToken:function(B){B=l.mixin({},B);var E=this._sanitizeUrl(B.server),F=this.findServerInfo(E),I=!0,M;F||(F=new m,F.server=this._getServerInstanceRoot(E),F.tokenServiceUrl=this._getTokenSvcUrl(E),F.hasPortal=!0,this.registerServers([F]));(M=this.findCredential(E,B.userId))?(delete B.server,a.mixin(M,B),I=!1):(M=new G({userId:B.userId,server:F.server,token:B.token,expires:B.expires,ssl:B.ssl,scope:this._isServerRsrc(E)?"server":"portal"}),M.resources=
[E],this.credentials.push(M));M.onTokenChange(!1);I||M.refreshServerTokens()},toJson:function(){return l.fixJson({serverInfos:b.map(this.serverInfos,function(B){return B.toJson()}),oAuthInfos:b.map(this.oAuthInfos,function(B){return B.toJson()}),credentials:b.map(this.credentials,function(B){return B.toJson()})})},initialize:function(B){if(B){a.isString(B)&&(B=JSON.parse(B));var E=B.serverInfos,F=B.oAuthInfos;B=B.credentials;if(E){var I=[];b.forEach(E,function(P){P.server&&P.tokenServiceUrl&&I.push(P.declaredClass?
P:new m(P))});I.length&&this.registerServers(I)}if(F){var M=[];b.forEach(F,function(P){P.appId&&M.push(P.declaredClass?P:new x(P))});M.length&&this.registerOAuthInfos(M)}B&&b.forEach(B,function(P){P.userId&&P.server&&P.token&&P.expires&&P.expires>(new Date).getTime()&&(P=P.declaredClass?P:new G(P),P.onTokenChange(),this.credentials.push(P))},this)}},findServerInfo:function(B){var E;B=this._sanitizeUrl(B);b.some(this.serverInfos,function(F){this._hasSameServerInstance(F.server,B)&&(E=F);return!!E},
this);return E},findOAuthInfo:function(B){var E;B=this._sanitizeUrl(B);b.some(this.oAuthInfos,function(F){this._hasSameServerInstance(F.portalUrl,B)&&(E=F);return!!E},this);return E},findCredential:function(B,E){var F;B=this._sanitizeUrl(B);var I=this._isServerRsrc(B)?"server":"portal";E?b.some(this.credentials,function(M){this._hasSameServerInstance(M.server,B)&&E===M.userId&&M.scope===I&&(F=M);return!!F},this):b.some(this.credentials,function(M){this._hasSameServerInstance(M.server,B)&&-1!==this._getIdenticalSvcIdx(B,
M)&&M.scope===I&&(F=M);return!!F},this);return F},getCredential:function(B,E){var F=!0;if(l.isDefined(E))if(a.isObject(E)){var I=!!E.token;var M=E.error;F=!1!==E.prompt}else I=E;B=this._sanitizeUrl(B);var P=new g(p._dfdCanceller),aa=this._isAdminResource(B);if((I=I?this.findCredential(B):null)&&M&&498===M.code)I.destroy();else if(I)return F=Error("You are currently signed in as: '"+I.userId+"'. You do not have access to this resource: "+B),F.name="identity-manager:not-authorized",F.code="IdentityManagerBase.1",
F.httpCode=M&&M.httpCode,F.messageCode=M?M.messageCode:null,F.subcode=M?M.subcode:null,F.details=M?M.details:null,F.log=!!q.isDebug,P.errback(F),P;if(M=this._findCredential(B,E))return P.callback(M),P;var ca=this.findServerInfo(B);if(ca)!ca.hasServer&&this._isServerRsrc(B)&&(ca._restInfoDfd=this._getTokenSvcUrl(B,!0),ca.hasServer=!0);else{M=this._getTokenSvcUrl(B);if(!M)return F=Error("Unknown resource - could not find token service endpoint."),F.name="identity-manager:unknown-resource",F.code="IdentityManagerBase.2",
F.log=!!q.isDebug,P.errback(F),P;ca=new m;ca.server=this._getServerInstanceRoot(B);a.isString(M)?(ca.tokenServiceUrl=M,ca.hasPortal=!0):(ca._restInfoDfd=M,ca.hasServer=!0);this.registerServers([ca])}ca.hasPortal&&void 0===ca._selfReq&&(F||n.hasSameOrigin(ca.tokenServiceUrl,window.location.origin)||this._gwDomains.some(function(ea){return ea.tokenServiceUrl===ca.tokenServiceUrl}))&&(ca._selfReq={owningTenant:E&&E.owningTenant,selfDfd:this._getPortalSelf(ca.tokenServiceUrl.replace(this._rePortalTokenSvc,
"/sharing/rest/portals/self"),B)});return this._enqueue(B,ca,E,P,aa)},getResourceName:function(B){return this._isRESTService(B)?B.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(B)&&B.replace(this._gwUser,"$1")||this._gwItem.test(B)&&B.replace(this._gwItem,"$1")||this._gwGroup.test(B)&&B.replace(this._gwGroup,"$1")||""},generateToken:function(B,E,F){var I=this._rePortalTokenSvc.test(B.tokenServiceUrl),M=new f(window.location.href.toLowerCase()),P=!E;var aa=B.shortLivedTokenValidity;
if(E){var ca=e.id.tokenValidity||aa||e.id.defaultTokenValidity;ca>aa&&(ca=aa)}if(F){var ea=F.isAdmin;var T=F.serverUrl;var la=F.token;var X=F.ssl;B.customParameters=F.customParameters}if(ea)aa=B.adminTokenServiceUrl;else{aa=B.tokenServiceUrl;var R=new f(aa.toLowerCase());B.webTierAuth&&F&&F.serverUrl&&!X&&"http"===M.scheme&&(n.hasSameOrigin(M.uri,aa,!0)||"https"===R.scheme&&M.host===R.host&&"7080"===M.port&&"7443"===R.port)&&(aa=aa.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));P&&I&&(aa=
aa.replace(/\/rest/i,""))}ea=a.mixin({url:aa,content:a.mixin({request:"getToken",username:E&&E.username,password:E&&E.password,serverUrl:T,token:la,expiration:ca,referer:ea||I?window.location.host:null,client:ea?"referer":null,f:"json"},B.customParameters),handleAs:"json",callbackParamName:P?"callback":void 0},F&&F.ioArgs);F={usePost:!P,disableIdentityLookup:!0,useProxy:this._useProxy(B,F)};I||(ea.withCredentials=!1);I=v(ea,F);I.addCallback(function(fa){if(!fa||!fa.token)return fa=Error("Unable to generate token"),
fa.name="identity-manager:authentication-failed",fa.code="IdentityManagerBase.3",fa.log=!!q.isDebug,fa;var S=B.server;z[S]||(z[S]={});E&&(z[S][E.username]=E.password);fa.validity=ca;return fa});I.addErrback(function(fa){});return I},isBusy:function(){return!!this._busy},checkSignInStatus:function(B){var E=new g;this.checkAppAccess(B,"").then(function(F){E.resolve(F.credential)})["catch"](function(F){E.reject(F)});return E},checkAppAccess:function(B,E,F){var I=this,M=!1;return this.getCredential(B,
{prompt:!1}).then(function(P){var aa={f:"json"};if("portal"===P.scope)if(E&&(I._doPortalSignIn(B)||F&&F.force)){var ca=P.server+"/sharing/rest/oauth2/validateAppAccess";aa.client_id=E}else if(P.token)ca=P.server+"/sharing/rest";else return{credential:P};else if(P.token)ca=P.server+"/rest/services";else return{credential:P};P.token&&(aa.token=P.token);return v({url:ca,content:aa,callbackParamName:"callback"},{disableIdentityLookup:!0}).then(function(ea){if(!1===ea.valid){var T=Error("You are currently signed in as: '"+
P.userId+"'.  You do not have access to this app: '"+E+"'.");T.name="identity-manager:not-authorized";T.code="IdentityManagerBase.1";T.log=!!q.isDebug;T.details=ea;throw T;}M=!!ea.viewOnlyUserTypeApp;return{credential:P}})["catch"](function(ea){if("IdentityManagerBase.1"===ea.code||400===ea.code)throw 400===ea.code&&(ea.name="identity-manager:invalid-request"),ea;if(498===ea.code)throw P.destroy(),ea=Error("User is not signed in."),ea.name="identity-manager:not-authenticated",ea.code="IdentityManagerBase.6",
ea.log=!!q.isDebug,ea;return{credential:P}})}).then(function(P){return{credential:P.credential,viewOnly:M}})},setProtocolErrorHandler:function(B){this._protocolFunc=B},signIn:function(){},oAuthSignIn:function(){},onCredentialCreate:function(){},onCredentialsDestroy:function(){},destroyCredentials:function(){if(this.credentials){var B=this.credentials.slice();b.forEach(B,function(E){E.destroy()})}this.onCredentialsDestroy()},enablePostMessageAuth:function(B){B||(B="https://www.arcgis.com/sharing/rest");
this._postMessageAuthHandle&&this._postMessageAuthHandle.remove();this._postMessageAuthHandle=c(window,"message",function(E){(E.origin===window.location.origin||l.endsWith(E.origin,".arcgis.com"))&&E.data&&"arcgis:auth:requestCredential"===E.data.type&&this.getCredential(B).then(function(F){E.source.postMessage({type:"arcgis:auth:credential",credential:{expires:F.expires,server:F.server,ssl:F.ssl,token:F.token,userId:F.userId}},E.origin)})["catch"](function(F){E.source.postMessage({type:"arcgis:auth:error",
error:{name:F.name,message:F.message}},E.origin)})}.bind(this))},disablePostMessageAuth:function(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)},_getOAuthHash:function(){var B=window.location.hash;if(B){"#"===B.charAt(0)&&(B=B.substring(1));B=d.queryToObject(B);var E=!1;if(B.access_token&&B.expires_in&&B.state&&B.hasOwnProperty("username"))try{B.state=JSON.parse(B.state),"object"===typeof B.state&&B.state.portalUrl&&(this._oAuthHash=B,E=!0)}catch(F){}else B.error&&
B.error_description&&"access_denied"===B.error&&(E=!0);E&&(window.location.hash=B.state&&B.state.hash||"")}},_pageShowHandler:function(B){B.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(B=Error("ABORTED"),B.name="identity-manager:user-aborted",B.code="IdentityManager.2",B.log=!!q.isDebug,this._errbackFunc(B))},_findCredential:function(B,E){var F=-1,I,M,P=E&&E.token;var aa=E&&E.resource;var ca=this._isServerRsrc(B)?"server":"portal",ea=b.filter(this.credentials,function(R){return this._hasSameServerInstance(R.server,
B)&&R.scope===ca},this);B=aa||B;if(ea.length)if(1===ea.length){aa=ea[0];var T=(I=(M=this.findServerInfo(aa.server))&&M.owningSystemUrl)&&this.findCredential(I,aa.userId);F=this._getIdenticalSvcIdx(B,aa);if(P)-1!==F&&(aa.resources.splice(F,1),this._removeResource(B,T));else return-1===F&&aa.resources.push(B),this._addResource(B,T),aa}else{var la,X;b.some(ea,function(R){X=this._getIdenticalSvcIdx(B,R);return-1!==X?(la=R,T=(I=(M=this.findServerInfo(la.server))&&M.owningSystemUrl)&&this.findCredential(I,
la.userId),F=X,!0):!1},this);if(P)la&&(la.resources.splice(F,1),this._removeResource(B,T));else if(la)return this._addResource(B,T),la}},_findOAuthInfo:function(B){var E=this.findOAuthInfo(B);E||b.some(this.oAuthInfos,function(F){this._isIdProvider(F.portalUrl,B)&&(E=F);return!!E},this);return E},_addResource:function(B,E){E&&-1===this._getIdenticalSvcIdx(B,E)&&E.resources.push(B)},_removeResource:function(B,E){var F=-1;E&&(F=this._getIdenticalSvcIdx(B,E),-1<F&&E.resources.splice(F,1))},_useProxy:function(B,
E){return E&&E.isAdmin&&!n.hasSameOrigin(B.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(B.tokenServiceUrl)&&10.1==B.currentVersion&&!n.hasSameOrigin(B.tokenServiceUrl,window.location.href)},_getOrigin:function(B){B=new f(B);return B.scheme+"://"+B.host+(l.isDefined(B.port)?":"+B.port:"")},_getServerInstanceRoot:function(B){var E=B.toLowerCase(),F=E.indexOf(this._agsRest);-1===F&&this._isAdminResource(B)&&(F=this._agsAdmin.test(B)?B.replace(this._agsAdmin,"$1").length:B.search(this._adminSvcs));
-1===F&&(F=E.indexOf("/sharing"));-1===F&&"/"===E.substr(-1)&&(F=E.length-1);return-1<F?B.substring(0,F):B},_hasSameServerInstance:function(B,E){"/"===B.substr(-1)&&(B=B.slice(0,-1));B=B.toLowerCase();E=this._getServerInstanceRoot(E).toLowerCase();B=this._normalizeAGOLorgDomain(B);E=this._normalizeAGOLorgDomain(E);B=B.substr(B.indexOf(":"));E=E.substr(E.indexOf(":"));return B===E},_normalizeAGOLorgDomain:function(B){var E=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,F=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,
I=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;E.test(B)?B=B.replace(E,"https://www.arcgis.com"):F.test(B)?B=B.replace(F,"https://devext.arcgis.com"):I.test(B)&&(B=B.replace(I,"https://qaext.arcgis.com"));return B},_sanitizeUrl:function(B){var E=(k.defaults.io.proxyUrl||"").toLowerCase(),F=E?B.toLowerCase().indexOf(E+"?"):-1;-1!==F&&(B=B.substring(F+E.length+1));B=n.normalize(B);return n.urlToObject(B).path},_isRESTService:function(B){return-1<B.indexOf(this._agsRest)},_isAdminResource:function(B){return this._agsAdmin.test(B)||
this._adminSvcs.test(B)},_isServerRsrc:function(B){return this._isRESTService(B)||this._isAdminResource(B)},_isIdenticalService:function(B,E){if(this._isRESTService(B)&&this._isRESTService(E)){var F=this._getSuffix(B).toLowerCase(),I=this._getSuffix(E).toLowerCase();var M=F===I;M||(M=/(.*)\/(MapServer|FeatureServer).*/ig,M=F.replace(M,"$1")===I.replace(M,"$1"))}else this._isAdminResource(B)&&this._isAdminResource(E)?M=!0:this._isServerRsrc(B)||this._isServerRsrc(E)||!this._isPortalDomain(B)||(M=!0);
return M},_isPortalDomain:function(B){var E=new f(B.toLowerCase()),F=this._portalConfig;B=b.some(this._gwDomains,function(I){return I.regex.test(E.uri)});!B&&F&&(B=this._hasSameServerInstance(this._getServerInstanceRoot(F.restBaseUrl),E.uri));B||(!this._arcgisUrl&&(F=a.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=(new f(F)).authority),this._arcgisUrl&&(B=this._arcgisUrl.toLowerCase()===E.authority));B||(B=b.some(this._portals,function(I){return this._hasSameServerInstance(I,E.uri)},
this));return B=B||this._agsPortal.test(E.path)},_isIdProvider:function(B,E){var F=-1,I=-1;b.forEach(this._gwDomains,function(ca,ea){-1===F&&ca.regex.test(B)&&(F=ea);-1===I&&ca.regex.test(E)&&(I=ea)});var M=!1;if(-1<F&&-1<I)if(0===F||4===F){if(0===I||4===I)M=!0}else if(1===F){if(1===I||2===I)M=!0}else 2===F?2===I&&(M=!0):3===F&&3===I&&(M=!0);if(!M){var P=this.findServerInfo(E),aa=P&&P.owningSystemUrl;aa&&u(P)&&this._isPortalDomain(aa)&&this._isIdProvider(B,aa)&&(M=!0)}return M},_isPublic:function(B){B=
this._sanitizeUrl(B);return b.some(this._publicUrls,function(E){return E.test(B)})},_getIdenticalSvcIdx:function(B,E){var F=-1;b.some(E.resources,function(I,M){return this._isIdenticalService(B,I)?(F=M,!0):!1},this);return F},_getSuffix:function(B){return B.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(B){if(this._isRESTService(B)||this._isAdminResource(B)){var E=this._getServerInstanceRoot(B);var F=E+"/admin/generateToken";B=E+"/rest/info";E=v({url:B,
content:{f:"json"},handleAs:"json",callbackParamName:"callback"});E.adminUrl_=F;return E}if(this._isPortalDomain(B)){var I="";b.some(this._gwDomains,function(M){M.regex.test(B)&&(I=M.tokenServiceUrl);return!!I});I||b.some(this._portals,function(M){this._hasSameServerInstance(M,B)&&(I=M+this._gwTokenUrl);return!!I},this);I||(F=B.toLowerCase().indexOf("/sharing"),-1!==F&&(I=B.substring(0,F)+this._gwTokenUrl));I||(I=this._getOrigin(B)+this._gwTokenUrl);I&&(F=(new f(B)).port,/^http:\/\//i.test(B)&&"7080"===
F&&(I=I.replace(/:7080/i,":7443")),I=I.replace(/http:/i,"https:"));return I}if(-1!==B.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},_exchangeToken:function(B,E,F){return v({url:B+"/sharing/rest/oauth2/exchangeToken",content:{f:"json",client_id:E,token:F}},{disableIdentityLookup:!0,usePost:!0}).then(function(I){return I.token})},_getPlatformSelf:function(B,E){return v({url:B+"/sharing/rest/oauth2/platformSelf",content:{f:"json"},headers:{"X-Esri-Auth-Client-Id":E,
"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},withCredentials:!0},{disableIdentityLookup:!0,usePost:!0})},_getPortalSelf:function(B,E){var F="";b.some(this._gwDomains,function(M){M.regex.test(B)&&(F=M.customBaseUrl);return!!F});if(F){var I=new g;I.resolve({allSSL:!0,currentVersion:"4.4",customBaseUrl:F,portalMode:"multitenant",supportsOAuth:!0});return I}"https:"===window.location.protocol?B=B.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(E)&&(B=B.replace(/^https:/i,
"http:").replace(/:7443/i,":7080"));return v({url:B,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_doPortalSignIn:function(B){var E=this._portalConfig,F=window.location.href,I=this.findServerInfo(B);return(E||this._isPortalDomain(F))&&(I?I.hasPortal||I.owningSystemUrl&&this._isPortalDomain(I.owningSystemUrl):this._isPortalDomain(B))&&(this._isIdProvider(F,B)||E&&(this._hasSameServerInstance(this._getServerInstanceRoot(E.restBaseUrl),B)||
this._isIdProvider(E.restBaseUrl,B))||n.hasSameOrigin(F,B,!0))?!0:!1},_checkProtocol:function(B,E,F,I){var M=!0;I=I?E.adminTokenServiceUrl:E.tokenServiceUrl;0!==a.trim(I).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||k.defaults.io.useCors&&(n.canUseXhr(I)||n.canUseXhr(n.getProxyUrl(!0).path))||(M=this._protocolFunc?!!this._protocolFunc({resourceUrl:B,serverInfo:E}):!1,M||(B=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),
B.name="identity-manager:aborted",B.code="IdentityManagerBase.4",B.log=!!q.isDebug,F(B)));return M},_enqueue:function(B,E,F,I,M,P){I||(I=new g(p._dfdCanceller));I.resUrl_=B;I.sinfo_=E;I.options_=F;I.admin_=M;I.refresh_=P;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(B),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(I)):this._xoReqs.push(I):this._doSignIn(I);return I},_doSignIn:function(B){this._busy=B;this._rejectOnPersistedPageShow=
!1;var E=this,F=function(T){var la=B.options_&&B.options_.resource,X=B.resUrl_,R=B.refresh_,fa=!1;-1===b.indexOf(E.credentials,T)&&(R&&-1!==b.indexOf(E.credentials,R)?(R.userId=T.userId,R.token=T.token,R.expires=T.expires,R.validity=T.validity,R.ssl=T.ssl,R.creationTime=T.creationTime,fa=!0,T=R):E.credentials.push(T));T.resources||(T.resources=[]);T.resources.push(la||X);T.scope=E._isServerRsrc(X)?"server":"portal";T.onTokenChange();la=E._soReqs;var S={};E._soReqs=[];b.forEach(la,function(Y){if(!this._isIdenticalService(X,
Y.resUrl_)){var ia=this._getSuffix(Y.resUrl_);S[ia]||(S[ia]=!0,T.resources.push(Y.resUrl_))}},E);B.callback(T);b.forEach(la,function(Y){this._hasSameServerInstance(this._getServerInstanceRoot(X),Y.resUrl_)?Y.callback(T):this._soReqs.push(Y)},E);E._busy=B.resUrl_=B.sinfo_=B.refresh_=null;if(!fa)E.onCredentialCreate({credential:T});E._soReqs.length?E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},I=function(T){B.errback(T);E._busy=B.resUrl_=B.sinfo_=B.refresh_=null;E._soReqs.length?
E._doSignIn(E._soReqs.shift()):E._xoReqs.length&&E._doSignIn(E._xoReqs.shift())},M=function(T,la,X,R){var fa=B.sinfo_,S=!B.options_||!1!==B.options_.prompt,Y=fa.hasPortal&&E._findOAuthInfo(B.resUrl_);if(T)F(new G({userId:T,server:fa.server,token:X||null,expires:l.isDefined(R)?Number(R):null,ssl:!!la}));else if(window!==window.parent&&E._appUrlObj.query&&E._appUrlObj.query["arcgis-auth-origin"]&&E._appUrlObj.query["arcgis-auth-portal"]&&E._hasSameServerInstance(E._getServerInstanceRoot(E._appUrlObj.query["arcgis-auth-portal"]),
B.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},E._appUrlObj.query["arcgis-auth-origin"]);var ia=c(window,"message",function(qa){if(qa.source===window.parent&&qa.data)if("arcgis:auth:credential"===qa.data.type)ia.remove(),F(new G(qa.data.credential));else if("arcgis:auth:error"===qa.data.type){ia.remove();qa=qa.data.error;switch(qa.name){case "identity-manager:busy":case "identity-manager:not-authorized":var wa="IdentityManager.1";break;case "identity-manager:server-identification-failed":case "identity-manager:unknown-resource":case "identity-manager:user-aborted":wa=
"IdentityManager.2";break;case "identity-manager:authentication-failed":wa="IdentityManager.3";break;case "identity-manager:aborted":wa="IdentityManager.4";break;case "identity-manager:not-authenticated":wa="IdentityManager.6";break;case "identity-manager:invalid-request":wa=400}var sa=Error(qa.message);sa.name=qa.name;sa.code=wa;sa.log=!!q.isDebug;I(sa)}})}else if(Y){var L=Y._oAuthCred;L||(T=new y(Y,t),la=new y(Y,A),T.isValid()&&la.isValid()?T.expires>la.expires?(L=T,la.destroy()):(L=la,T.destroy()):
L=T.isValid()?T:la,Y._oAuthCred=L);if(L.isValid()){var W=new G({userId:L.userId,server:fa.server,token:L.token,expires:L.expires,ssl:L.ssl,_oAuthCred:L});Y.appId!==L.appId&&E._doPortalSignIn(B.resUrl_)?B._pendingDfd=E._exchangeToken(W.server,Y.appId,W.token).then(function(qa){W.token=qa;L.token=qa;L.save();F(W)})["catch"](function(){F(W)}):F(W)}else if(E._oAuthHash&&E._hasSameServerInstance(Y.portalUrl,E._oAuthHash.state.portalUrl))T=E._oAuthHash,W=new G({userId:T.username,server:fa.server,token:T.access_token,
expires:(new Date).getTime()+1E3*Number(T.expires_in),ssl:"true"===T.ssl,oAuthState:T.state,_oAuthCred:L}),L.storage=T.persist?t:A,L.token=W.token,L.expires=W.expires,L.userId=W.userId,L.ssl=W.ssl,L.save(),E._oAuthHash=null,F(W);else{var ja=function(){S?B._pendingDfd=E.oAuthSignIn(B.resUrl_,fa,Y,B.options_).addCallbacks(F,I):(ra=Error("User is not signed in."),ra.name="identity-manager:not-authenticated",ra.code="IdentityManagerBase.6",ra.log=!!q.isDebug,I(ra))};E._doPortalSignIn(B.resUrl_)?B._pendingDfd=
E._getPlatformSelf(fa.server,Y.appId).then(function(qa){var wa=qa.portalUrl;!wa||n.hasSameOrigin(wa,window.location.origin,!0)?(W=new G({server:fa.server,userId:qa.username,token:qa.token}),F(W)):ja()})["catch"](ja):ja()}}else if(S)E._checkProtocol(B.resUrl_,fa,I,B.admin_)&&(T=B.options_,B.admin_&&(T=T||{},T.isAdmin=!0),B._pendingDfd=E.signIn(B.resUrl_,fa,T).addCallbacks(F,I));else{var ra=Error("User is not signed in.");ra.name="identity-manager:not-authenticated";ra.code="IdentityManagerBase.6";
ra.log=!!q.isDebug;I(ra)}},P=function(){var T=B.sinfo_,la=T.owningSystemUrl,X=B.options_,R;if(X){var fa=X.token;var S=X.error;var Y=X.prompt}(R=E._findCredential(la,{token:fa,resource:B.resUrl_}))||b.some(E.credentials,function(ia){this._isIdProvider(la,ia.server)&&(R=ia);return!!R},E);R?(X=E.findCredential(B.resUrl_,R.userId))?F(X):w(T,E._legacyFed)?(X=R.toJson(),X.server=T.server,X.resources=null,F(new G(X))):(B._pendingDfd=E.generateToken(E.findServerInfo(R.server),null,{serverUrl:B.resUrl_,token:R.token,
ssl:R.ssl})).addCallbacks(function(ia){F(new G({userId:R.userId,server:T.server,token:ia.token,expires:l.isDefined(ia.expires)?Number(ia.expires):null,ssl:!!ia.ssl,isAdmin:B.admin_,validity:ia.validity}))},I):(E._busy=null,fa&&(B.options_.token=null),(B._pendingDfd=E.getCredential(la.replace(/\/?$/,"/sharing"),{resource:B.resUrl_,owningTenant:T.owningTenant,token:fa,error:S,prompt:Y})).addCallbacks(function(ia){E._enqueue(B.resUrl_,B.sinfo_,B.options_,B,B.admin_)},function(ia){I(ia)}))};this._errbackFunc=
I;var aa=B.sinfo_.owningSystemUrl,ca=this._isServerRsrc(B.resUrl_),ea=B.sinfo_._restInfoDfd;ea?ea.addCallbacks(function(T){var la=B.sinfo_;la._restInfoDfd&&(la.adminTokenServiceUrl=la._restInfoDfd.adminUrl_,la._restInfoDfd=null,la.tokenServiceUrl=a.getObject("authInfo.tokenServicesUrl",!1,T)||a.getObject("authInfo.tokenServiceUrl",!1,T)||a.getObject("tokenServiceUrl",!1,T),la.shortLivedTokenValidity=a.getObject("authInfo.shortLivedTokenValidity",!1,T),la.currentVersion=T.currentVersion,la.owningTenant=
T.owningTenant,(T=la.owningSystemUrl=T.owningSystemUrl)&&E._portals.push(T));ca&&la.owningSystemUrl?P():M()},function(){B.sinfo_._restInfoDfd=null;var T=Error("Unknown resource - could not find token service endpoint.");T.name="identity-manager:server-identification-failed";T.code="IdentityManagerBase.2";T.log=!!q.isDebug;I(T)}):ca&&aa?P():B.sinfo_._selfReq?B.sinfo_._selfReq.selfDfd.then(function(T){var la={};if(T){var X=T.user&&T.user.username;la.username=X;la.allSSL=T.allSSL;var R=T.supportsOAuth;
var fa=T.currentVersion;if("multitenant"===T.portalMode)var S=T.customBaseUrl}B.sinfo_.webTierAuth=!!X;return X&&E.normalizeWebTierAuth?E.generateToken(B.sinfo_,null,{ssl:la.allSSL}).addBoth(function(Y){la.portalToken=Y&&Y.token;la.tokenExpiration=Y&&Y.expires;return la}):!X&&R&&4.4<=parseFloat(fa)&&!E._findOAuthInfo(B.resUrl_)?E._generateOAuthInfo({portalUrl:B.sinfo_.server,customBaseUrl:S,owningTenant:B.sinfo_._selfReq.owningTenant}).always(function(){return la}):la}).always(function(T){B.sinfo_._selfReq=
null;T?M(T.username,T.allSSL,T.portalToken,T.tokenExpiration):M()}):M()},_generateOAuthInfo:function(B){var E=this,F=B.portalUrl,I=B.customBaseUrl,M=B.owningTenant;if(B=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){var P=window.location.href;var aa=P.indexOf("?");-1<aa&&(P=P.slice(0,aa));aa=P.search(/\/(apps|home)\//);P=-1<aa?P.slice(0,aa):null}B&&P?(this._hasTestedIfAppIsOnPortal=!0,B=v({url:P+"/sharing/rest",content:{f:"json"},handleAs:"json"}).then(function(){E.defaultOAuthInfo=
new x({appId:"arcgisonline",popupCallbackUrl:P+"/home/oauth-callback.html"})})):(B=new g,B.resolve(),B=B.promise);return B.then(function(){if(E.defaultOAuthInfo)return F=F.replace(/^http:/i,"https:"),v({url:F+"/sharing/rest/oauth2/validateRedirectUri",content:{accountId:M,client_id:E.defaultOAuthInfo.appId,redirect_uri:n.getAbsoluteUrl(E.defaultOAuthInfo.popupCallbackUrl),f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(ca){if(ca.valid){var ea=E.defaultOAuthInfo.clone();ea.portalUrl=
ca.urlKey&&I?"https://"+ca.urlKey.toLowerCase()+"."+I:F;ea.popup=window!==window.top||!(n.hasSameOrigin(F,window.location.origin)||E._gwDomains.some(function(T){return T.regex.test(F)&&T.regex.test(window.location.origin)}));E.oAuthInfos.push(ea)}})})}});var G=D(r,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(B){a.mixin(this,B);this.resources=this.resources||[];l.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var B=
this,E=this.resources&&this.resources[0],F=e.id.findServerInfo(this.server),I=F&&F.owningSystemUrl,M=!!I&&"server"===this.scope,P=M&&w(F,e.id._legacyFed),aa=M&&e.id.findServerInfo(I),ca,ea=(ca=F.webTierAuth)&&e.id.normalizeWebTierAuth,T=z[this.server];T=T&&T[this.userId];var la={username:this.userId,password:T};if(!ca||ea)if(M&&!aa&&b.some(e.id.serverInfos,function(fa){e.id._isIdProvider(I,fa.server)&&(aa=fa);return!!aa}),ca=aa&&e.id.findCredential(aa.server,this.userId),!M||ca)if(P)ca.refreshToken();
else{if(M)var X={serverUrl:E,token:ca&&ca.token,ssl:ca&&ca.ssl};else if(ea)la=null,X={ssl:this.ssl};else if(T)this.isAdmin&&(X={isAdmin:!0});else{if(E){E=e.id._sanitizeUrl(E);this._enqueued=1;var R=e.id._enqueue(E,F,null,null,this.isAdmin,this);R.addCallback(function(){B._enqueued=0;B.refreshServerTokens()}).addErrback(function(){B._enqueued=0})}return R}return e.id.generateToken(M?aa:F,M?null:la,X).addCallback(function(fa){B.token=fa.token;B.expires=l.isDefined(fa.expires)?Number(fa.expires):null;
B.creationTime=(new Date).getTime();B.validity=fa.validity;B.onTokenChange();B.refreshServerTokens()}).addErrback(function(){})}},refreshServerTokens:function(){"portal"===this.scope&&b.forEach(e.id.credentials,function(B){var E=e.id.findServerInfo(B.server),F=E&&E.owningSystemUrl;B!==this&&B.userId===this.userId&&F&&"server"===B.scope&&(e.id._hasSameServerInstance(this.server,F)||e.id._isIdProvider(F,this.server))&&(w(E,e.id._legacyFed)?(B.token=this.token,B.expires=this.expires,B.creationTime=this.creationTime,
B.validity=this.validity,B.onTokenChange()):B.refreshToken())},this)},onTokenChange:function(B){clearTimeout(this._refreshTimer);var E=this.server&&e.id.findServerInfo(this.server),F=(E=E&&E.owningSystemUrl)&&e.id.findServerInfo(E);!1!==B&&(!E||"portal"===this.scope||F&&F.webTierAuth&&!e.id.normalizeWebTierAuth)&&(l.isDefined(this.expires)||l.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=
this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var B=b.indexOf(e.id.credentials,this);-1<B&&e.id.credentials.splice(B,1);this.onTokenChange();this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var B=l.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),E=this.resources;E&&0<E.length&&
(B.resources=E.slice());return B},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var B=6E4*this.tokenRefreshBuffer,E=Math.pow(2,31)-1,F=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>F?F=0:F>E&&(F=E);this._refreshTimer=setTimeout(a.hitch(this,this.refreshToken),F>B?F-B:F)}});h.Credential=G;return e.IdentityManagerBase=h})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","./kernel","./lang"],function(D,
q,a,b,g){D=D(null,{declaredClass:"esri.ServerInfo",constructor:function(f){q.mixin(this,f)},toJson:function(){return g.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}});return b.ServerInfo=D})},"esri/OAuthCredential":function(){define(["./kernel",
"dojo/_base/declare","dojo/has","dojo/json"],function(D,q,a,b){q=q(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,appId:null,expires:null,ssl:null,token:null,userId:null,constructor:function(g,f){this.oAuthInfo=g;this.storage=f;this._init()},isValid:function(){var g=!1;if(this.oAuthInfo&&this.token&&this.userId){var f=(new Date).getTime();this.expires>f&&(this.expires-f)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(g=!0)}return g},save:function(){if(this.storage){var g=this._load(),
f=this.oAuthInfo;if(f&&f.authNamespace&&f.portalUrl){var h=g[f.authNamespace];h||(h=g[f.authNamespace]={});h[f.portalUrl]={appId:this.appId=f.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",b.stringify(g))}catch(d){}}}},destroy:function(){var g=this._load(),f=this.oAuthInfo;if(f&&f.appId&&f.portalUrl&&this.token&&this.expires>Date.now()){var h=f.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",d=new FormData;
d.append("f","json");d.append("auth_token",this.token);d.append("client_id",f.appId);d.append("token_type_hint","access_token");if("function"===typeof navigator.sendBeacon)navigator.sendBeacon(h,d);else{var c=new XMLHttpRequest;c.open("POST",h);c.send(d)}}if(f&&f.authNamespace&&f.portalUrl&&this.storage&&(h=g[f.authNamespace])){delete h[f.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",b.stringify(g))}catch(e){}}f&&(this.oAuthInfo=f._oAuthCred=null)},_init:function(){var g=this._load(),f=this.oAuthInfo;
f&&f.authNamespace&&f.portalUrl&&(g=g[f.authNamespace])&&(g=g[f.portalUrl])&&(this.appId=g.appId,this.expires=g.expires,this.ssl=g.ssl,this.token=g.token,this.userId=g.userId)},_load:function(){var g={};if(this.storage){var f=this.storage.getItem("esriJSAPIOAuth");if(f)try{g=b.parse(f)}catch(h){}}return g}});return D.OAuthCredential=q})},"esri/arcgis/OAuthInfo":function(){define(["../kernel","../lang","dojo/_base/declare","dojo/_base/lang","dojo/has"],function(D,q,a,b,g){var f=a(null,{declaredClass:"esri.arcgis.OAuthInfo",
constructor:function(h){b.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d490,width\x3d800,resizable,scrollbars,status",preserveUrlHash:!1},h)},_oAuthCred:null,toJson:function(){return q.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,
forceLogin:this.forceLogin,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures,preserveUrlHash:this.preserveUrlHash})},clone:function(){return new f(this.toJson())}});b.setObject("arcgis.OAuthInfo",f,D);return f})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(D,q,a,b,g,f,h,d){return D("dijit.form.Form",
[g,f,h,d],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(c){q.set(this.domNode,"encType",c);b("ie")&&(this.domNode.encoding=
c);this._set("encType",c)},reset:function(c){var e={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:c?c.target:this.domNode,target:c?c.target:this.domNode};!1!==this.onReset(e)&&e.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(c){this.reset(c);c.stopPropagation();c.preventDefault();return!1},_onSubmit:function(c){var e=this.constructor.prototype;if(this.execute!=e.execute||this.onExecute!=e.onExecute)a.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.",
"","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(c)&&(c.stopPropagation(),c.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"esri/OAuthSignInHandler":function(){define("./Credential ./domUtils ./lang ./urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/_base/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/jsapi dojo/io-query dojo/sniff dojo/json dijit/form/Button dojo/query".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n){var p=null,v=null;try{p=window.localStorage,v=window.sessionStorage}catch(r){}return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e${oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e${invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e${lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e${lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(r){this._oAuthRedirectFunc=r},oAuthSignIn:function(r,y,x,z){var u=this._oAuthDfd=new d;u.resUrl_=r;u.sinfo_=y;u.oinfo_=x;var w=!z||!1!==z.oAuthPopupConfirmation;if(!x.popup||!w)return this._doOAuthSignIn(r,y,x),u;this._nls||(this._nls=k.identity);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());r=this.oAuthDialog;x=z&&z.error;z=z&&z.token;q.hide(r.errMsg_);x&&403==x.code&&z&&(e.set(r.errMsg_,"innerHTML",this._nls.forbidden),q.show(r.errMsg_));e.set(r.serverLink_,
{title:y.server,innerHTML:-1!==y.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":y.server});r.show();return u},setOAuthResponseHash:function(r){var y=this._oAuthDfd;this._oAuthDfd=null;if(y&&r)if(clearInterval(this._oAuthIntervalId),"#"===r.charAt(0)&&(r=r.substring(1)),r=l.queryToObject(r),r.error){var x="access_denied"===r.error;r=Error(x?"ABORTED":"OAuth: "+r.error+" - "+r.error_description);r.name=x?"identity-manager:user-aborted":"identity-manager:authentication-failed";r.code="IdentityManagerBase."+
(x?2:3);r.log=!!h.isDebug;y.errback(r)}else{x=y.oinfo_._oAuthCred;var z=new D({userId:r.username,server:y.sinfo_.server,token:r.access_token,expires:(new Date).getTime()+1E3*Number(r.expires_in),ssl:"true"===r.ssl,_oAuthCred:x});x.storage=r.persist?p:v;x.token=z.token;x.expires=z.expires;x.userId=z.userId;x.ssl=z.ssl;x.save();y.callback(z)}},_createOAuthDialog:function(){var r=this._nls,y=a.substitute(r,this._oAuthDialogContent);y=a.substitute({server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
y);var x=new g({title:r.title,content:y,"class":"esriOAuthSignInDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var z=x.esriIdMgr_._oAuthDfd;x.hide_();x.esriIdMgr_._doOAuthSignIn(z.resUrl_,z.sinfo_,z.oinfo_)},cancel_:function(){var z=x.esriIdMgr_._oAuthDfd;x.esriIdMgr_._oAuthDfd=null;x.hide_();var u=Error("ABORTED");u.code="IdentityManager.2";u.log=!!h.isDebug;z.errback(u)},hide_:function(){q.hide(x.errMsg_);x.hide();g._DialogLevelManager.hide(x)}});r=x.domNode;x.btnSubmit_=f.byNode(c.query(".esriIdSubmit",
r)[0]);x.btnCancel_=f.byNode(c.query(".esriIdCancel",r)[0]);x.serverLink_=c.query(".serverLink",r)[0];x.errMsg_=c.query(".esriErrorMsg",r)[0];x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x},_doOAuthSignIn:function(r,y,x){var z=this,u={portalUrl:x.portalUrl};!x.popup&&x.preserveUrlHash&&window.location.hash&&(u.hash=window.location.hash);u={client_id:x.appId,response_type:"token",state:n.stringify(u),expiration:x.expiration,
locale:x.locale,redirect_uri:x.popup?b.getAbsoluteUrl(x.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};x.forceLogin&&(u.force_login=!0);!x.popup&&this._doPortalSignIn(r)&&(u.redirectToUserOrgUrl=!0);var w=x.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",t=w+"?"+l.objectToQuery(u);if(x.popup){if(7===m("ie")){var A=window.open(x.popupCallbackUrl,"esriJSAPIOAuth",x.popupWindowFeatures);A.location=t}else A=window.open(t,"esriJSAPIOAuth",x.popupWindowFeatures);A?(A.focus(),
this._oAuthDfd.oAuthWin_=A,this._oAuthIntervalId=setInterval(function(){if(A.closed){clearInterval(z._oAuthIntervalId);var G=z._oAuthDfd;if(G){var B=Error("ABORTED");B.code="IdentityManager.2";B.log=!!h.isDebug;G.errback(B)}}},500)):(r=Error("ABORTED"),r.name="identity-manager:user-aborted",r.code="IdentityManager.2",r.log=!!h.isDebug,this._oAuthDfd.errback(r))}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:u,authorizeUrl:w,resourceUrl:r,serverInfo:y,
oAuthInfo:x}):window.location=t}}})},"esri/layers/vectorTiles/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../Logger ../promiseUtils ../sniff ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(D,q,a,b,g,f,h,d,c,e,k,l,m){function n(w){return d.create(function(t){function A(B){if(B=l.receiveMessage(B))switch(B.type){case u:B=w;var E=g.workers.loaderUrl||k.DEFAULT_LOADER_URL;if(null!=g["default"]){var F=
a({},g);delete F["default"];F=JSON.parse(JSON.stringify(F))}else F=JSON.parse(JSON.stringify(g));var I=g.workers.loaderConfig;I=k["default"]({baseUrl:I.baseUrl,locale:b.locale,has:a({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-cors":1,"esri-secure-context":c("esri-secure-context"),"esri-workers-supports-transfer-arraybuffer":c("esri-workers-supports-transfer-arraybuffer"),"events-keypress-typed":0,"host-webworker":1},I.has),map:a({},I.map),paths:a({},I.paths),packages:I.packages||
[]});B.postMessage({type:z,configure:{esriConfig:F,loaderUrl:E,loaderConfig:I}});break;case x:w.removeEventListener("message",A),w.removeEventListener("error",G),t(w)}}function G(B){B.preventDefault();w.removeEventListener("message",A);w.removeEventListener("error",G);r.warn("Failed to create Worker. Fallback to execute module in main thread",B);w=new m;w.addEventListener("message",A);w.addEventListener("error",G)}w.addEventListener("message",A);w.addEventListener("error",G)})}Object.defineProperty(q,
"__esModule",{value:!0});var p=e.normalize(D.toUrl("./worker.js")),v=!e.hasSameOrigin(p,location.href),r=h.getLogger("esri.core.workers"),y=null,x=l.MessageType.CONFIGURED,z=l.MessageType.CONFIGURE,u=l.MessageType.HANDSHAKE;q.createWorker=function(){if(!c("esri-workers"))return n(new m);if(!v){var w=void 0;try{w=new Worker(p)}catch(t){r.warn("Failed to create Worker. Fallback to execute module in main thread",event),w=new m}return n(w)}y||(y=f(p,{responseType:"text"}));return y.then(function(t){return new Worker(URL.createObjectURL(new Blob([t.data],
{type:"text/javascript"})))})["catch"](function(t){r.warn("Failed to create Worker. Fallback to execute module in main thread",t);return new m}).then(function(t){return n(t)})}})},"esri/layers/vectorTiles/core/sniff":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(D,q,a,b,g){function f(){var e={available:!1,version:0,majorPerformanceCaveat:!1,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1},
k=document.createElement("canvas");if(!k)return e;var l=g.createContext(k,{failIfMajorPerformanceCaveat:!0},"webgl");!l&&(l=g.createContext(k,{},"webgl"))&&(e.majorPerformanceCaveat=!0);if(!l)return e;k=l.getParameter(l.VERSION);if(!k)return e;if(k=k.match(/^WebGL\s+([\d.]*)/))e.version=parseFloat(k[1]),e.available=.94<=e.version,k=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_FLOAT),e.supportsHighPrecisionFragment=k&&0<k.precision,e.supportsVertexShaderSamplers=0<l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
e.supportsElementIndexUint=null!==l.getExtension("OES_element_index_uint"),e.supportsStandardDerivatives=null!==l.getExtension("OES_standard_derivatives");return e}function h(){var e={available:!1,version:0},k=document.createElement("canvas");if(!k)return e;k=g.createContext(k,{},"webgl2");if(!k)return e;e.available=!0;k=k.getParameter(k.VERSION);if(!k)return e;if(k=k.match(/^WebGL\s+([\d.]*)/))e.version=parseFloat(k[1]);return e}(function(){var e=navigator.userAgent,k=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i);
e=e.match(/iPhone/i);k&&a.add("esri-mobile",k);e&&a.add("esri-iPhone",e);a.add("esri-phonegap",!!b.cordova);a.add("esri-cors",a("esri-phonegap")||"XMLHttpRequest"in b&&"withCredentials"in new XMLHttpRequest);a.add("esri-geolocation",function(){return!!navigator.geolocation});a.add("esri-canvas-svg-support",function(){return!(a("trident")||a("ie"))});a.add("esri-secure-context",function(){if("isSecureContext"in b)return b.isSecureContext;if(b.location&&b.location.origin)return 0===b.location.origin.indexOf("https:")});
a.add("esri-wasm","WebAssembly"in b);a("host-webworker")||(a.add("esri-workers","Worker"in b),a.add("esri-script-sandbox",function(){return"MessageChannel"in b&&"HTMLIFrameElement"in b&&"sandbox"in HTMLIFrameElement.prototype}),a.add("esri-url-encodes-apostrophe",function(){var l=b.document.createElement("a");l.href="?'";return-1<l.href.indexOf("?%27")}),d||(d=f()),a.add("esri-webgl",d.available),a.add("esri-webgl-high-precision-fragment",d.supportsHighPrecisionFragment),a.add("esri-webgl-vertex-shader-samplers",
d.supportsVertexShaderSamplers),a.add("esri-webgl-element-index-uint",d.supportsElementIndexUint),a.add("esri-webgl-standard-derivatives",d.supportsStandardDerivatives),a.add("esri-webgl-major-performance-caveat",d.majorPerformanceCaveat),a.add("esri-featurelayer-webgl-labeling",!0),c||(c=h()),a.add("esri-webgl2",c.available))})();var d=null,c=null;return a})},"esri/layers/vectorTiles/views/webgl/context-util":function(){define(["require","exports"],function(D,q){function a(h,d,c){void 0===d&&(d=
{});switch(c){case "webgl":var e=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":e=["webgl2"];break;default:e=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}c=null;for(var k=0;k<e.length;k++){var l=e[k];try{c=h.getContext(l,d)}catch(m){}if(c)break}return c}function b(h,d){var c=h.parentNode;c&&(c.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
d+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(q,"__esModule",{value:!0});q.createContextOrErrorHTML=function(h,d,c){void 0===d&&(d={});if(!window.WebGLRenderingContext)return b(h,g),null;d=a(h,d,c);return d?d:(b(h,f),null)};q.createContext=a;var g='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',f='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
"esri/layers/vectorTiles/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(D,q,a,b,g){Object.defineProperty(q,"__esModule",{value:!0});q.DEFAULT_LOADER_URL=g.makeAbsolute(g.removeQueryParameters(D.toUrl("./worker-init.js")));q.DEFAULT_CONFIG={baseUrl:function(){var f=g.removeQueryParameters(D.toUrl("dojo/x.js"));return g.makeAbsolute(f.slice(0,f.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},
{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};q["default"]=
function(f){var h={async:f.async,isDebug:f.isDebug,locale:f.locale,baseUrl:f.baseUrl,has:a({},f.has),map:a({},f.map),packages:f.packages&&f.packages.concat()||[],paths:a({},f.paths)};f.hasOwnProperty("async")||(h.async=!0);f.hasOwnProperty("isDebug")||(h.isDebug=!1);f.baseUrl||(h.baseUrl=q.DEFAULT_CONFIG.baseUrl);q.DEFAULT_CONFIG.packages.forEach(function(k){a:{for(var l=h.packages,m=0;m<l.length;m++)if(l[m].name===k.name)break a;k=a({},k);m=g.removeQueryParameters(D.toUrl(k.name+"/x.js"));m=m.slice(0,
m.length-5);k.location=g.makeAbsolute(m);l.push(k)}});f=h.map=h.map||{};for(var d=0,c=Object.keys(q.DEFAULT_CONFIG.map);d<c.length;d++){var e=c[d];f[e]||(f[e]=q.DEFAULT_CONFIG.map[e])}return h}})},"esri/layers/vectorTiles/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(D,q,a,b,g){var f=function(){return function(){var c=this,e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(k){c[k]=
function(){for(var l=[],m=0;m<arguments.length;m++)l[m]=arguments[m];return e[k].apply(e,l)}})}}(),h=b.MutationObserver||b.WebKitMutationObserver,d=function(){if(b.process&&b.process.nextTick)var c=function(l){b.process.nextTick(l)};else if(b.Promise)c=function(l){b.Promise.resolve().then(l)};else if(h){var e=[],k=document.createElement("div");(new h(function(){for(;0<e.length;)e.shift()()})).observe(k,{attributes:!0});c=function(l){e.push(l);k.setAttribute("queueStatus","1")}}return c}();return function(){function c(){this._dispatcher=
new f;this._isInitialized=!1;this._workerPostMessage({type:g.MessageType.HANDSHAKE})}c.prototype.terminate=function(){};Object.defineProperty(c.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=e)&&this.addEventListener("message",e)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&
this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=e)&&this.addEventListener("error",e)},enumerable:!0,configurable:!0});c.prototype.postMessage=function(e,k){var l=this;d(function(){l._workerMessageHandler(new MessageEvent("message",{data:e}))})};c.prototype.dispatchEvent=function(e){return this._dispatcher.dispatchEvent(e)};c.prototype.addEventListener=function(e,k,l){this._dispatcher.addEventListener(e,k,l)};c.prototype.removeEventListener=function(e,k,l){this._dispatcher.removeEventListener(e,
k,l)};c.prototype._workerPostMessage=function(e,k){var l=this;d(function(){l.dispatchEvent(new MessageEvent("message",{data:e}))})};c.prototype._workerMessageHandler=function(e){var k=this;if(e=g.receiveMessage(e)){var l=e.jobId;switch(e.type){case g.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:g.MessageType.CONFIGURED});break;case g.MessageType.OPEN:e=e.modulePath,a("esri-webpack")?D(["esri/core/workers/RemoteClient","esri/views/vectorTiles/WorkerTileHandler","esri/views/2d/layers/features/Pipeline",
"esri/views/3d/layers/PointCloudWorker","esri/views/3d/layers/SceneLayerWorker","esri/layers/graphics/sources/support/CSVSourceWorker","esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker",e],function(m,n,p,v,r,y,x,z){switch(z){case "esri/views/vectorTiles/WorkerTileHandler":break;case "esri/views/2d/layers/features/Pipeline":n=p;break;case "esri/views/3d/layers/PointCloudWorker":n=v;break;case "esri/views/3d/layers/SceneLayerWorker":n=r;break;case "esri/layers/graphics/sources/support/CSVSourceWorker":n=
y;break;case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":n=x;break;default:n=z}m=m.connect(n);k._workerPostMessage({type:g.MessageType.OPENED,jobId:l,data:m})}):D(["./RemoteClient",e],function(m,n){var p=m.connect(n);k._workerPostMessage({type:g.MessageType.OPENED,jobId:l,data:p})})}}};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphMosaic":function(){define("require exports dojo/has ../../core/promiseUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),
function(D,q,a,b,g,f,h){var d;a("stable-symbol-rendering")&&(d=new Set);return function(){function c(e,k,l){this.height=this.width=0;this._dirties=[];this._glyphData=[];this._currentPage=0;this._glyphIndex={};this._textures=[];this._rangePromises=new Map;this.width=e;this.height=k;this._glyphSource=l;this._binPack=new f(e-4,k-4);this._glyphData.push(new Uint8Array(e*k));this._dirties.push(!0);this._textures.push(void 0)}c.prototype.getGlyphItems=function(e,k,l){var m=this,n=[],p=this._glyphSource,
v=new Set;e=1/256;for(var r=0;r<l.length;r++)v.add(Math.floor(l[r]*e));var y=[];v.forEach(function(x){if(256>=x){var z=k+x;m._rangePromises.has(z)?y.push(m._rangePromises.get(z)):(x=p.getRange(k,x).always(function(){m._rangePromises["delete"](z)}),m._rangePromises.set(z,x),y.push(x))}});return b.all(y).then(function(x){x=m._glyphIndex[k];x||(x={},m._glyphIndex[k]=x);if(a("stable-symbol-rendering")){d.clear();for(var z=0;z<l.length;z++){var u=l[z];d.add(u)}var w=[];v.forEach(function(ea){w.push(ea)});
w.sort();u=[];for(z=0;z<w.length;z++)for(var t=w[z],A=0;256>A;++A)u.push(256*t+A)}else u=l;z=0;for(t=u;z<t.length;z++)if(u=t[z],A=x[u]){if(!a("stable-symbol-rendering")||d.has(u))n[u]={rect:A.rect,metrics:A.metrics,page:A.page}}else{var G=p.getGlyph(k,u);if(G&&G.metrics){A=G.metrics;var B=void 0;if(0===A.width)B=new g(0,0,0,0);else{var E=A.width+6,F=A.height+6,I=E%4?4-E%4:4,M=F%4?4-F%4:4;1===I&&(I=5);1===M&&(M=5);B=m._binPack.allocate(E+I,F+M);B.isEmpty&&(m._dirties[m._currentPage]||(m._glyphData[m._currentPage]=
null),m._currentPage=m._glyphData.length,m._glyphData.push(new Uint8Array(m.width*m.height)),m._dirties.push(!0),m._textures.push(void 0),m._binPack=new f(m.width-4,m.height-4),B=m._binPack.allocate(E+I,F+M));I=m._glyphData[m._currentPage];G=G.bitmap;var P=M=void 0;if(G)for(var aa=0;aa<F;aa++){M=E*aa;P=m.width*(B.y+aa+1)+B.x;for(var ca=0;ca<E;ca++)I[P+ca+1]=G[M+ca]}}x[u]={rect:B,metrics:A,tileIDs:null,page:m._currentPage};if(!a("stable-symbol-rendering")||d.has(u))n[u]={rect:B,metrics:A,page:m._currentPage};
m._dirties[m._currentPage]=!0}}return n})};c.prototype.removeGlyphs=function(e){for(var k in this._glyphIndex){var l=this._glyphIndex[k];if(l){var m=void 0,n;for(n in l)if(m=l[n],m.tileIDs["delete"](e),0===m.tileIDs.size){for(var p=this._glyphData[m.page],v=m.rect,r=void 0,y=void 0,x=0;x<v.height;x++)for(r=this.width*(v.y+x)+v.x,y=0;y<v.width;y++)p[r+y]=0;delete l[n];this._dirties[m.page]=!0}}}};c.prototype.bind=function(e,k,l,m){void 0===m&&(m=0);this._textures[l]||(this._textures[l]=new h(e,{pixelFormat:6406,
dataType:5121,width:this.width,height:this.height},new Uint8Array(this.width*this.height)));var n=this._textures[l];n.setSamplingMode(k);this._dirties[l]&&n.setData(this._glyphData[l]);e.bindTexture(n,m);this._dirties[l]=!1};c.prototype.dispose=function(){this._binPack=null;for(var e=0,k=this._textures;e<k.length;e++){var l=k[e];l&&l.dispose()}this._textures.length=0};return c}()})},"esri/layers/vectorTiles/views/vectorTiles/Rect":function(){define(["require","exports"],function(D,q){return function(){function a(b,
g,f,h){void 0===b&&(b=0);void 0===g&&(g=0);void 0===f&&(f=0);void 0===h&&(h=0);this.x=b;this.y=g;this.width=f;this.height=h}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/layers/vectorTiles/views/vectorTiles/RectangleBinPack":function(){define(["require","exports","./Rect"],function(D,q,a){return function(){function b(g,f){this._height=this._width=0;this._free=[];this._width=g;this._height=f;this._free.push(new a(0,
0,g,f))}Object.defineProperty(b.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0});b.prototype.allocate=function(g,f){if(g>this._width||f>this._height)return new a;for(var h=null,d=-1,c=0;c<this._free.length;++c){var e=this._free[c];g<=e.width&&f<=e.height&&(null===h||e.y<=h.y&&e.x<=h.x)&&(h=e,d=c)}if(null===h)return new a;this._free.splice(d,1);h.width<
h.height?(h.width>g&&this._free.push(new a(h.x+g,h.y,h.width-g,f)),h.height>f&&this._free.push(new a(h.x,h.y+f,h.width,h.height-f))):(h.width>g&&this._free.push(new a(h.x+g,h.y,h.width-g,h.height)),h.height>f&&this._free.push(new a(h.x,h.y+f,g,h.height-f)));return new a(h.x,h.y,g,f)};b.prototype.release=function(g){for(var f=0;f<this._free.length;++f){var h=this._free[f];if(h.y===g.y&&h.height===g.height&&h.x+h.width===g.x)h.width+=g.width;else if(h.x===g.x&&h.width===g.width&&h.y+h.height===g.y)h.height+=
g.height;else if(g.y===h.y&&g.height===h.height&&g.x+g.width===h.x)h.x=g.x,h.width+=g.width;else if(g.x===h.x&&g.width===h.width&&g.y+g.height===h.y)h.y=g.y,h.height+=g.height;else continue;this._free.splice(f,1);this.release(g)}this._free.push(g)};return b}()})},"esri/layers/vectorTiles/views/vectorTiles/GlyphSource":function(){define(["require","exports","../../request","../../core/pbf","../../core/promiseUtils"],function(D,q,a,b,g){var f=function(){function d(c){this._metrics=[];this._bitmaps=
[];if(c)for(;c.next();)switch(c.tag()){case 1:for(var e=c.getMessage();e.next();)switch(e.tag()){case 3:for(var k=e.getMessage(),l=void 0,m=void 0,n=void 0,p=void 0,v=void 0,r=void 0,y=void 0;k.next();)switch(k.tag()){case 1:l=k.getUInt32();break;case 2:m=k.getBytes();break;case 3:n=k.getUInt32();break;case 4:p=k.getUInt32();break;case 5:v=k.getSInt32();break;case 6:r=k.getSInt32();break;case 7:y=k.getUInt32();break;default:k.skip()}l&&(this._metrics[l]={width:n,height:p,left:v,top:r,advance:y},this._bitmaps[l]=
m);break;default:e.skip()}break;default:c.skip()}}d.prototype.getMetrics=function(c){return this._metrics[c]};d.prototype.getBitmap=function(c){return this._bitmaps[c]};return d}(),h=function(){function d(){this._ranges=[]}d.prototype.getRange=function(c){return this._ranges[c]};d.prototype.addRange=function(c,e){this._ranges[c]=e};return d}();return function(){function d(c){this._glyphInfo={};this._baseURL=c}d.prototype.getRange=function(c,e){var k=this._getFontStack(c);if(k.getRange(e))return g.resolve();
var l=256*e,m=l+255;l=this._baseURL.replace("{fontstack}",c).replace("{range}",l+"-"+m);return a(l,{callbackParamName:"callback",responseType:"array-buffer"}).then(function(n){k.addRange(e,new f(new b(new Uint8Array(n.data),new DataView(n.data))))})["catch"](function(){k.addRange(e,new f)})};d.prototype.getGlyph=function(c,e){var k=this._getFontStack(c);if(k){var l=Math.floor(e/256);if(!(256<l)&&(k=k.getRange(l)))return{metrics:k.getMetrics(e),bitmap:k.getBitmap(e)}}};d.prototype._getFontStack=function(c){var e=
this._glyphInfo[c];e||(e=this._glyphInfo[c]=new h);return e};return d}()})},"esri/layers/vectorTiles/core/pbf":function(){define(["require","exports"],function(D,q){return function(){function a(b,g,f,h){this._tag=0;this._dataType=99;this._data=b;this._dataView=g;this._pos=f||0;this._end=h||b.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(b){for(;;){if(this._pos===this._end)return!1;
var g=this._decodeVarint();this._tag=g>>3;this._dataType=g&7;if(!b||b===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var b=4294967295;b=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<7)>>>0;if(128>
this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return b;b=(b|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return b};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var b=this.getUInt32();return b>>>1^-(b&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=
function(){var b=0!==this._data[this._pos];this._skip(1);return b};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var b=this._dataView,g=this._pos;b=b.getUint32(g,!0)+4294967296*b.getUint32(g+4,!0);this._skip(8);return b};a.prototype.getSFixed64=function(){var b=this._dataView,g=this._pos;b=b.getUint32(g,!0)+4294967296*b.getInt32(g+4,!0);this._skip(8);return b};a.prototype.getDouble=function(){var b=this._dataView.getFloat64(this._pos,!0);this._skip(8);
return b};a.prototype.getFixed32=function(){var b=this._dataView.getUint32(this._pos,!0);this._skip(4);return b};a.prototype.getSFixed32=function(){var b=this._dataView.getInt32(this._pos,!0);this._skip(4);return b};a.prototype.getFloat=function(){var b=this._dataView.getFloat32(this._pos,!0);this._skip(4);return b};a.prototype.getString=function(){var b=this._getLength(),g=this._pos;g=this._toString(this._data,g,g+b);this._skip(b);return g};a.prototype.getBytes=function(){var b=this._getLength(),
g=this._pos;g=this._toBytes(this._data,g,g+b);this._skip(b);return g};a.prototype.getMessage=function(){var b=this._getLength(),g=this._pos;g=new a(this._data,this._dataView,g,g+b);this._skip(b);return g};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(b){if(this._pos+b>this._end)throw Error("Attempt to skip past the end of buffer!");
this._pos+=b};a.prototype._decodeVarint=function(){var b=this._data,g=this._pos,f=0;if(10<=this._end-g){var h=b[g++];f|=h&127;if(0!==(h&128)&&(h=b[g++],f|=(h&127)<<7,0!==(h&128)&&(h=b[g++],f|=(h&127)<<14,0!==(h&128)&&(h=b[g++],f|=(h&127)<<21,0!==(h&128)&&(h=b[g++],f+=268435456*(h&127),0!==(h&128)&&(h=b[g++],f+=34359738368*(h&127),0!==(h&128)&&(h=b[g++],f+=4398046511104*(h&127),0!==(h&128)&&(h=b[g++],f+=562949953421312*(h&127),0!==(h&128)&&(h=b[g++],f+=72057594037927936*(h&127),0!==(h&128)&&(h=b[g++],
f+=0x7fffffffffffffff*(h&127),0!==(h&128)))))))))))throw Error("Varint too long!");}else{for(var d=1;g!==this._end;){h=b[g];if(0===(h&128))break;++g;f+=(h&127)*d;d*=128}if(g===this._end)throw Error("Varint overrun!");++g;f+=h*d}this._pos=g;return f};a.prototype._decodeSVarint=function(){var b=this._decodeVarint();return b%2?-(b+1)/2:b/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(b,g,
f){var h="",d="";for(f=Math.min(this._end,f);g<f;++g){var c=b[g];c&128?d+="%"+c.toString(16):(h+=decodeURIComponent(d)+String.fromCharCode(c),d="")}d.length&&(h+=decodeURIComponent(d));return h};a.prototype._toBytes=function(b,g,f){f=Math.min(this._end,f);return new Uint8Array(b.buffer,g,f-g)};return a}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteMosaic":function(){define("require exports ./GeometryUtils ./Rect ./RectangleBinPack ../webgl/Texture".split(" "),function(D,q,a,b,g,f){return function(){function h(d,
c,e){void 0===e&&(e=0);this._size=[];this._mosaicsData=[];this._textures=[];this._dirties=[];this._pageHeight=this._pageWidth=this._currentPage=this._maxItemSize=0;this._mosaicRects={};this.pixelRatio=1;this._pageWidth=d;this._pageHeight=c;0<e&&(this._maxItemSize=e);this._binPack=new g(d-4,c-4)}h.prototype.getWidth=function(d){return d>=this._size.length?-1:this._size[d][0]};h.prototype.getHeight=function(d){return d>=this._size.length?-1:this._size[d][1]};h.prototype.setSpriteSource=function(d){this.dispose();
this.pixelRatio=d.devicePixelRatio;if(0===this._mosaicsData.length){this._binPack=new g(this._pageWidth-4,this._pageHeight-4);var c=new Uint32Array(Math.floor(this._pageWidth)*Math.floor(this._pageHeight));this._mosaicsData[0]=c;this._dirties.push(!0);this._size.push([this._pageWidth,this._pageHeight]);this._textures.push(void 0)}this._sprites=d};h.prototype.getSpriteItem=function(d,c){void 0===c&&(c=!1);var e=this._mosaicRects[d];if(e)return e;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;
e=this._sprites.getSpriteInfo(d);if(!e||!e.width||!e.height||0>e.width||0>e.height)return null;var k=e.width,l=e.height,m=this._allocateImage(k,l),n=m[0],p=m[1];if(0>=n.width)return null;this._copy(n,e,p,m[2],c);e={rect:n,width:k,height:l,anchorX:0,anchorY:0,sdf:e.sdf,pixelRatio:e.pixelRatio,page:p};return this._mosaicRects[d]=e};h.prototype.preloadSpriteItems=function(){for(var d=0,c=this._sprites.spriteNames;d<c.length;d++)this.getSpriteItem(c[d],!0)};h.prototype.getSpriteItems=function(d){for(var c=
{},e=0;e<d.length;e++){var k=d[e];c[k]=this.getSpriteItem(k)}return c};h.prototype.getMosaicItemPosition=function(d,c){var e=this.getSpriteItem(d,c),k=e&&e.rect;if(!k)return null;k.width=e.width;k.height=e.height;return{size:[e.width,e.height],tl:[(k.x+2)/this._size[e.page][0],(k.y+2)/this._size[e.page][1]],br:[(k.x+2+e.width)/this._size[e.page][0],(k.y+2+e.height)/this._size[e.page][1]],page:e.page}};h.prototype.bind=function(d,c,e,k){void 0===e&&(e=0);void 0===k&&(k=0);this._textures[e]||(this._textures[e]=
new f(d,{pixelFormat:6408,dataType:5121,width:this._size[e][0],height:this._size[e][1]},new Uint8Array(this._mosaicsData[e].buffer)));var l=this._textures[e];l.setSamplingMode(c);this._dirties[e]&&l.setData(new Uint8Array(this._mosaicsData[e].buffer));d.bindTexture(l,k);this._dirties[e]=!1};h._copyBits=function(d,c,e,k,l,m,n,p,v,r,y){var x=k*c+e;n=p*m+n;if(y)for(n-=m,y=-1;y<=r;y++,x=((y+r)%r+k)*c+e,n+=m)for(p=-1;p<=v;p++)l[n+p]=d[x+(p+v)%v];else for(y=0;y<r;y++){for(p=0;p<v;p++)l[n+p]=d[x+p];x+=c;
n+=m}};h.prototype._copy=function(d,c,e,k,l,m){if(this._sprites&&"loaded"===this._sprites.loadStatus&&!(e>=this._mosaicsData.length)){var n=new Uint32Array(m?m.buffer:this._sprites.image.buffer);h._copyBits(n,m?c.width:this._sprites.width,c.x,c.y,this._mosaicsData[e],k[0],d.x+2,d.y+2,c.width,c.height,l);this._dirties[e]=!0}};h.prototype._allocateImage=function(d,c){d+=2;c+=2;var e=Math.max(d,c);if(this._maxItemSize&&this._maxItemSize<e){e=Math.pow(2,Math.ceil(a.log2(d)));var k=Math.pow(2,Math.ceil(a.log2(c))),
l=new b(0,0,d,c);this._mosaicsData.push(new Uint32Array(e*k));this._dirties.push(!0);this._size.push([e,k]);this._textures.push(void 0);return[l,this._mosaicsData.length-1,[e,k]]}e=d%4?4-d%4:4;k=c%4?4-c%4:4;1===e&&(e=5);1===k&&(k=5);e=this._binPack.allocate(d+e,c+k);return 0>=e.width?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),
this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new g(this._pageWidth-4,this._pageHeight-4),this._allocateImage(d,c)):[e,this._currentPage,[this._pageWidth,this._pageHeight]]};h.prototype.dispose=function(){this._binPack=null;this._mosaicRects={};for(var d=0,c=this._textures;d<c.length;d++){var e=c[d];e&&e.dispose()}this._textures.length=0};return h}()})},"esri/layers/vectorTiles/views/vectorTiles/SpriteSource":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojo/Deferred ../../kernel ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),
function(D,q,a,b,g,f,h,d,c){return function(){function e(k,l){this.baseURL=k;this.devicePixelRatio=l;this._isRetina=!1;this._spritesData={};this.height=this.width=this.image=null;this.loadStatus="not-loaded"}Object.defineProperty(e.prototype,"spriteNames",{get:function(){var k=[],l;for(l in this._spritesData)k.push(l);k.sort();return k},enumerable:!0,configurable:!0});e.prototype.getSpriteInfo=function(k){return this._spritesData[k]};e.prototype.load=function(){var k=this;this.loadStatus="loading";
return this.baseURL?this._loadSprites().then(function(){k.loadStatus="loaded";return k})["catch"](function(l){k.loadStatus="failed";return k}):d.resolve(this)};e.prototype._loadSprites=function(){var k=this;this._isRetina=1.15<this.devicePixelRatio?!0:!1;var l=this.baseURL,m=this._isRetina?"@2x":"";return h(l+m+".json",{callbackParamName:"callback",responseType:"json"}).then(function(n){var p=Object.keys(n.data);if(!p||0===p.length||1===p.length&&"_ssl"===p[0])return d.resolve(null);k._spritesData=
n.data;var v=new g,r=new Image;r.crossOrigin="anonymous";r.onload=function(){r.onload=null;k.width=r.width;k.height=r.height;var y=document.createElement("canvas");y.width=r.width;y.height=r.height;y=y.getContext("2d");y.drawImage(r,0,0,r.width,r.height);y=y.getImageData(0,0,r.width,r.height);y=new Uint8Array(y.data);for(var x,z=0;z<y.length;z+=4)x=y[z+3]/255,y[z]*=x,y[z+1]*=x,y[z+2]*=x;k.image=y;v.resolve()};r.onerror=function(){k._spritesData=null;v.reject()};n=""+l+m+".png";f.id&&(p=f.id.findCredential(n))&&
p.token&&(n+="?token\x3d"+p.token);r.src=c.addProxy(n);return v})};return e}()})},"esri/layers/vectorTiles/views/vectorTiles/TileIndex":function(){define(["require","exports","../../core/promiseUtils","../../layers/support/TilemapCache","../2d/tiling/TileKey"],function(D,q,a,b,g){return function(){function f(h){if(h instanceof b)this._tilemapCache=h;else if(h&&"index"in h)this._tilemap=h.index;else throw Error("Invalid tilemap!");}f.prototype.dataKey=function(h){if(this._tilemapCache){var d=h.level,
c=h.row,e=h.col,k=new g(h);return this._tilemapCache.fetchAvailabilityUpsample(d,c,e,k).then(function(){return k})["catch"](function(l){if(l&&"cancel"===l.dojoType)throw l;k.level=d;k.row=c;k.col=e;return k})}return this._getIndexedDataKey(h)};f.prototype.forEach=function(h,d,c,e,k){this._callback=k;this._maxLevel=d+h;this._forEach(this._tilemap,d,c,e)};f.prototype._forEach=function(h,d,c,e){0!==h&&(this._callback(d,c,e),d!==this._maxLevel&&"object"===typeof h&&(this._forEach(h[0],d+1,2*c,2*e),this._forEach(h[1],
d+1,2*c,2*e+1),this._forEach(h[2],d+1,2*c+1,2*e),this._forEach(h[3],d+1,2*c+1,2*e+1)))};f.prototype._getIndexedDataKey=function(h){var d=[h];if(0>h.level||0>h.row||0>h.col||0<h.row>>h.level||0<h.col>>h.level)return a.resolve(null);for(;0!==h.level;)h=new g(h.level-1,h.row>>1,h.col>>1,h.world),d.push(h);h=this._tilemap;var c=d.pop();if(1===h)return a.resolve(c);for(;d.length;){var e=d.pop();var k=(e.col&1)+((e.row&1)<<1);if(h)if(0===h[k]){c=null;break}else if(1===h[k]){c=e;break}else c=e,h=h[k]}return a.resolve(c)};
return f}()})},"esri/layers/vectorTiles/views/2d/engine/StageGL":function(){define("require exports ../../../core/tsSupport/extendsHelper dojo/has ../../../core/promiseUtils ./Container ../engine/webgl/Fader ./webgl/BitBlitRenderer ./webgl/enums ./webgl/WGLPainter ./webgl/shaders/glShaderSnippets ../libs/gl-matrix/common ../libs/gl-matrix/mat2d ../libs/gl-matrix/vec2 ../../support/screenshotUtils ../../webgl/BufferObject ../../webgl/context-util ../../webgl/FramebufferObject ../../webgl/Program ../../webgl/RenderingContext ../../webgl/VertexArrayObject".split(" "),
function(D,q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y,x,z,u){function w(A){return{state:A.state,pixelRatio:A.pixelRatio,stationary:A.stationary}}var t={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"};return function(A){function G(){var B=null!==A&&A.apply(this,arguments)||this;B._clipData=new Float32Array(8);B._upperLeft=n.create();B._upperRight=n.create();B._lowerLeft=n.create();B._lowerRight=n.create();B._mat2=m.create();B._clipRendererInitialized=!1;B._contextVersion=null;B._labelFader=new h["default"](B);
return B}a(G,A);Object.defineProperty(G.prototype,"glPainter",{get:function(){return this._painter},enumerable:!0,configurable:!0});G.prototype.fadeInLabels=function(){this._labelFader.reset();this.requestRender()};G.prototype.createElement=function(){var B=document.createElement("canvas");B.setAttribute("class","esri-display-object");return B};G.prototype.setElement=function(B){this.element=B};G.prototype.useContextVersion=function(B){this._renderingContext||(this._contextVersion=B)};G.prototype.attach=
function(B){if(this.attached)return!0;this._resizeCanvas(B);var E=r.createContextOrErrorHTML(this.element,{alpha:!0,antialias:!1,depth:!0,stencil:!0},this._contextVersion);this._renderingContext=new z(E);this._contextVersion=this._renderingContext.contextVersion;this.attached=!0;this._cachedRenderParams=w(B);this._painter||(this._painter=new e["default"],this._painter.initialize(this._renderingContext));return A.prototype.attach.call(this,B)};G.prototype.detach=function(B){A.prototype.detach.call(this,
B);this._boundFBO=null;this._clipFBO&&(this._clipFBO.dispose(),this._clipFBO=null);this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO1=null);this._labelsFBO2&&(this._labelsFBO2.dispose(),this._labelsFBO2=null);this._blitRenderer&&(this._blitRenderer.dispose(),this._blitRenderer=null);this._clipVAO&&(this._clipVAO.dispose(),this._clipVBO=this._clipVAO=null);this._painter&&(this._painter.dispose(),this._painter=null);this._clipStencilProgram&&(this._clipStencilProgram.dispose(),this._clipStencilProgram=
null);this._renderingContext&&(this._renderingContext.dispose(),this._renderingContext=null);this._cachedRenderParams=null};G.prototype.renderChildren=function(B){var E=this.children;B.drawPhase=c.WGLDrawPhase.FILL|c.WGLDrawPhase.LINE|c.WGLDrawPhase.MARKER|c.WGLDrawPhase.TEXT;for(var F=E.length,I=0;I<F;I++){var M=E[I];M.attached&&this.renderChild(M,B)}if(b("esri-featurelayer-webgl-labeling")){var P=B.context,aa=P.getBoundFramebufferObject();P.bindFramebuffer(this._labelsFBO2);I=B.stationary;P.setClearColor(0,
0,0,I?0:1);P.clear(P.gl.COLOR_BUFFER_BIT);if(I)for(B.drawPhase=c.WGLDrawPhase.LABEL_ALPHA,B.labelFBO=this._labelsFBO1,B.labelStep=this._labelFader.step(),I=0;I<F;I++)M=E[I],M.attached&&this.renderChild(M,B);else this._labelFader.reset();P.bindFramebuffer(aa);B.labelFBO=this._labelsFBO2;B.drawPhase=c.WGLDrawPhase.LABEL;for(I=0;I<F;I++)M=E[I],M.attached&&this.renderChild(M,B);B=this._labelsFBO2;this._labelsFBO2=this._labelsFBO1;this._labelsFBO1=B}};G.prototype.beforeRenderChildren=function(B,E){var F=
E.context,I=E.state,M=E.pixelRatio,P=this._painter;if(P){F.enforceState();P.update(I,M);var aa=I.width;P=I.height;var ca=I.rotation;aa=Math.round(aa*M);P=Math.round(P*M);this._boundFBO=F.getBoundFramebufferObject();!b("esri-featurelayer-webgl-labeling")||this._labelsFBO1&&this._labelsFBO1.width===aa&&this._labelsFBO1.height===P||(this._labelsFBO1&&(this._labelsFBO1.dispose(),this._labelsFBO2.dispose()),this._labelsFBO1=y.createWithAttachments(F,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,
samplingMode:9728,wrapMode:33071,width:aa,height:P},{colorTarget:0,depthStencilTarget:0}),F.bindFramebuffer(this._labelsFBO1),F.setDepthWriteEnabled(!0),F.setStencilWriteMask(255),F.setClearColor(0,0,0,0),F.setClearDepth(1),F.setClearStencil(0),F.clear(F.gl.COLOR_BUFFER_BIT|F.gl.DEPTH_BUFFER_BIT|F.gl.STENCIL_BUFFER_BIT),F.setDepthWriteEnabled(!1),F.bindFramebuffer(this._boundFBO),this._labelsFBO2=y.createWithAttachments(F,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:aa,height:P},{colorTarget:0,depthStencilTarget:0}));if(I.spatialReference&&(I.spatialReference._isWrappable?I.spatialReference._isWrappable():I.spatialReference.isWrappable)){var ea=l.toRadian(ca),T=Math.abs(Math.cos(ea)),la=Math.abs(Math.sin(ea)),X=Math.round(I.worldScreenWidth);if(Math.round(aa*T+P*la)<=X)this._clipFrame=!1;else{this._clipFBO&&this._clipFBO.width===aa&&this._clipFBO.height===P||(this._clipFBO=new y(F,{colorTarget:0,depthStencilTarget:3,width:aa,height:P}));
var R=.5*aa,fa=.5*P;I=1/aa;var S=1/P;M*=.5*X;var Y=.5*(aa*la+P*T);aa=this._upperLeft;T=this._upperRight;la=this._lowerLeft;X=this._lowerRight;n.set(aa,-M,-Y);n.set(T,M,-Y);n.set(la,-M,Y);n.set(X,M,Y);m.identity(this._mat2);m.translate(this._mat2,this._mat2,[R,fa]);0!==ca&&m.rotate(this._mat2,this._mat2,ea);n.transformMat2d(aa,aa,this._mat2);n.transformMat2d(T,T,this._mat2);n.transformMat2d(la,la,this._mat2);n.transformMat2d(X,X,this._mat2);ca=this._clipData;ca.set([2*la[0]*I-1,2*(P-la[1])*S-1,2*X[0]*
I-1,2*(P-X[1])*S-1,2*aa[0]*I-1,2*(P-aa[1])*S-1,2*T[0]*I-1,2*(P-T[1])*S-1]);this._clipRendererInitialized||this._initializeClipRenderer(F);this._clipVBO.setData(ca);this._boundFBO=F.getBoundFramebufferObject();F.bindFramebuffer(this._clipFBO);F.setDepthWriteEnabled(!0);F.setStencilWriteMask(255);F.setClearColor(0,0,0,0);F.setClearDepth(1);F.setClearStencil(0);F.clear(F.gl.COLOR_BUFFER_BIT|F.gl.DEPTH_BUFFER_BIT|F.gl.STENCIL_BUFFER_BIT);F.setDepthWriteEnabled(!1);this._clipFrame=!0}}else this._clipFrame=
!1}};G.prototype.afterRenderChildren=function(B,E){if(this._clipFrame&&this._clipRendererInitialized){var F=this._renderingContext;F.bindFramebuffer(this._boundFBO);this._boundFBO=null;F.bindVAO(this._clipVAO);F.bindProgram(this._clipStencilProgram);F.setDepthWriteEnabled(!1);F.setDepthTestEnabled(!1);F.setStencilTestEnabled(!0);F.setBlendingEnabled(!1);F.setColorMask(!1,!1,!1,!1);F.setStencilOp(7680,7680,7681);F.setStencilWriteMask(255);F.setStencilFunction(519,1,255);F.drawElements(4,6,5123,0);
F.bindVAO();F.setColorMask(!0,!0,!0,!0);F.setBlendingEnabled(!0);F.setStencilFunction(514,1,255);this._blitRenderer.render(F,this._clipFBO.colorTexture,9728,1);F.setStencilTestEnabled(!1)}};G.prototype.doRender=function(B){var E=this.element.style;this.visible?(E.display="block",E.opacity=""+this.opacity,this._resizeCanvas(B),A.prototype.doRender.call(this,B),this._cachedRenderParams=w(B)):E.display="none"};G.prototype.takeScreenshot=function(B){void 0===B&&(B={});var E=B.pixelRatio||1;this._cachedRenderParams.pixelRatio=
E;var F=Math.round(E*this._cachedRenderParams.state.width),I=Math.round(E*this._cachedRenderParams.state.height),M=0,P=0,aa=F,ca=I,ea=F,T=I;if(ea=B.area)M=Math.round(E*ea.x),P=Math.round(E*ea.y),aa=Math.round(E*ea.width),ca=Math.round(E*ea.height);void 0!==B.width&&void 0!==B.height?(ea=B.width/B.height,ca*ea<aa?(ea*=ca,M+=Math.floor((aa-ea)/2),aa=Math.floor(ea)):(ea=aa/ea,P+=Math.floor((ca-ea)/2),ca=Math.floor(ea)),ea=B.width,T=B.height):(ea=aa,T=ca);E=document.createElement("canvas");E.width=ea;
E.height=T;var la=E.getContext("2d"),X=new Uint8Array(aa*ca*4),R=this._renderingContext,fa=y.create(R,{colorTarget:1,depthStencilTarget:3,width:F,height:I});R.bindFramebuffer(fa);R.setViewport(0,0,F,I);var S=this._cachedRenderParams,Y=this._renderingContext.gl;this._renderingContext.setClearColor(0,0,0,0);this._renderingContext.setClearDepth(1);this._renderingContext.setClearStencil(0);this._renderingContext.clear(Y.COLOR_BUFFER_BIT|Y.DEPTH_BUFFER_BIT|Y.STENCIL_BUFFER_BIT);S.context=this._renderingContext;
S.painter=this._painter;this.beforeRenderChildren(S,S);if(void 0!==B.rotation&&null!==B.rotation){Y=S.state;var ia=Y.clone();ia.viewpoint.rotation=B.rotation;S.state=ia;this.renderChildren(S);S.state=Y}else this.renderChildren(S);this.afterRenderChildren(S,S);fa.readPixels(M,I-(P+ca),aa,ca,6408,5121,X);R.bindFramebuffer();R=la.getImageData(0,0,ea,T);if(0!==M||0!==P||aa!==F||ca!==I||ea!==F||T!==I)p.resampleHermite(X,aa,ca,R.data,ea,T,!0);else{P=ca-1;ca=0;fa=4*aa;for(ia=Y=M=I=F=aa=S=void 0;ca<P;){Y=
ca*fa;ia=P*fa;for(S=0;S<fa;S+=4)aa=X[Y+S],F=X[Y+S+1],I=X[Y+S+2],M=X[Y+S+3],X[Y+S]=X[ia+S],X[Y+S+1]=X[ia+S+1],X[Y+S+2]=X[ia+S+2],X[Y+S+3]=X[ia+S+3],X[ia+S]=aa,X[ia+S+1]=F,X[ia+S+2]=I,X[ia+S+3]=M;ca++;P--}aa=R.data;F=X.length;for(P=0;P<F;P++)aa[P]=X[P]}X=R.data;ca=X.length;for(P=0;P<ca;P+=4)M=X[P+3],0<M&&(I=M/255,aa=Math.floor(X[P+0]/I),F=Math.floor(X[P+1]/I),I=Math.floor(X[P+2]/I),X[P+0]=255>=aa?aa:255,X[P+1]=255>=F?F:255,X[P+2]=255>=I?I:255);la.putImageData(R,0,0);la=t[B.format?B.format.toLowerCase():
"png"];X=1;void 0!==B.quality&&(X=B.quality/100);B=E.toDataURL(la,X);return g.resolve({dataURL:B,x:0,y:0,width:ea,height:T})};G.prototype.prepareChildrenRenderParameters=function(B){if(!this.attached||!this._renderingContext)return null;B=w(B);var E=this._renderingContext,F=E.gl;E.setDepthWriteEnabled(!0);E.setStencilWriteMask(255);E.setClearColor(0,0,0,0);E.setClearDepth(1);E.setClearStencil(0);E.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT|F.STENCIL_BUFFER_BIT);E.setViewport(0,0,this.element.width,
this.element.height);E.setDepthWriteEnabled(!1);B.context=E;B.painter=this._painter;return B};G.prototype.attachChild=function(B,E){return B.attach(E)};G.prototype.detachChild=function(B,E){return B.detach(E)};G.prototype.renderChild=function(B,E){return B.processRender(E)};G.prototype._resizeCanvas=function(B){var E=this.element,F=E.style,I=B.state,M=B.pixelRatio;B=Math.round(I.width*M);M=Math.round(I.height*M);if(E.width!==B||E.height!==M)E.width=B,E.height=M;F.width=I.width+"px";F.height=I.height+
"px"};G.prototype._initializeClipRenderer=function(B){if(this._clipRendererInitialized)return!0;this._blitRenderer=new d;var E={a_pos:0},F=new x(B,k.stencilVS,k.stencilFS,E);if(!F)return!1;var I=v.createVertex(B,35040,32),M=new Uint16Array([0,1,2,2,1,3]);M=v.createIndex(B,35044,M);B=new u(B,E,{geometry:[{name:"a_pos",count:2,type:5126,offset:0,stride:8,normalized:!1,divisor:0}]},{geometry:I},M);this._clipStencilProgram=F;this._clipVBO=I;this._clipVAO=B;return this._clipRendererInitialized=!0};return G}(f)})},
"esri/layers/vectorTiles/views/2d/engine/webgl/Fader":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});var a=function(){function b(g,f){void 0===f&&(f=250);this.duration=f;this._startTime=this._lastTime=0;this._parent=g}b.prototype.reset=function(){0===this._lastTime;this._startTime=performance.now()};b.prototype.step=function(){var g=performance.now();if(0===this._lastTime)return this._lastTime=g,this._parent.requestRender(),0;var f=g-this._lastTime;
this._lastTime=g;g-this._startTime<2*this.duration&&this._parent.requestRender();return f/this.duration};return b}();q["default"]=a})},"esri/layers/vectorTiles/views/2d/engine/webgl/BitBlitRenderer":function(){define("require exports ./shaders/glShaderSnippets ../../../webgl/BufferObject ../../../webgl/Program ../../../webgl/VertexArrayObject".split(" "),function(D,q,a,b,g,f){return function(){function h(){this._initialized=!1}h.prototype.dispose=function(){this._program&&(this._program.dispose(),
this._program=null);this._vertexArrayObject&&(this._vertexArrayObject.dispose(),this._vertexArrayObject=null)};h.prototype.render=function(d,c,e,k){d&&(this._initialized||this._initialize(d),d.setBlendFunctionSeparate(1,771,1,771),d.bindVAO(this._vertexArrayObject),d.bindProgram(this._program),c.setSamplingMode(e),d.bindTexture(c,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",k),d.drawArrays(5,0,4),d.bindVAO())};h.prototype._initialize=function(d){if(this._initialized)return!0;
var c={a_pos:0,a_tex:1},e=new g(d,a.bitblitVS,a.bitblitFS,c);if(!e)return!1;var k=new Int8Array(16);k[0]=-1;k[1]=-1;k[2]=0;k[3]=0;k[4]=1;k[5]=-1;k[6]=1;k[7]=0;k[8]=-1;k[9]=1;k[10]=0;k[11]=1;k[12]=1;k[13]=1;k[14]=1;k[15]=1;d=new f(d,c,{geometry:[{name:"a_pos",count:2,type:5120,offset:0,stride:4,normalized:!1,divisor:0},{name:"a_tex",count:2,type:5120,offset:2,stride:4,normalized:!1,divisor:0}]},{geometry:b.createVertex(d,35044,k)});this._program=e;this._vertexArrayObject=d;return this._initialized=
!0};return h}()})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!D)var D=1E-6;if(!q)var q="undefined"!==typeof Float32Array?Float32Array:Array;if(!a)var a=Math.random;var b={GLMAT_EPSILON:D,GLMAT_ARRAY_TYPE:q,GLMAT_RANDOM:a,setMatrixArrayType:function(h){b.GLMAT_ARRAY_TYPE=h}},g=Math.PI/180,f=180/Math.PI;b.toRadian=function(h){return h*g};b.toDegree=function(h){return h*f};b.setMatrixArrayType(Array);return b})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],
function(D){var q=D.GLMAT_ARRAY_TYPE;D={create:function(){var a=new q(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new q(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var g=b[0],f=b[1],h=b[2],d=b[3],c=b[4],e=b[5],k=g*d-f*h;if(!k)return null;k=1/k;a[0]=d*k;a[1]=
-f*k;a[2]=-h*k;a[3]=g*k;a[4]=(h*e-d*c)*k;a[5]=(f*c-g*e)*k;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,g){var f=b[0],h=b[1],d=b[2],c=b[3],e=b[4];b=b[5];var k=g[0],l=g[1],m=g[2],n=g[3],p=g[4];g=g[5];a[0]=f*k+d*l;a[1]=h*k+c*l;a[2]=f*m+d*n;a[3]=h*m+c*n;a[4]=f*p+d*g+e;a[5]=h*p+c*g+b;return a}};D.mul=D.multiply;D.rotate=function(a,b,g){var f=b[0],h=b[1],d=b[2],c=b[3],e=b[4];b=b[5];var k=Math.sin(g);g=Math.cos(g);a[0]=f*g+d*k;a[1]=h*g+c*k;a[2]=f*-k+d*g;a[3]=h*-k+c*
g;a[4]=e;a[5]=b;return a};D.scale=function(a,b,g){var f=b[1],h=b[2],d=b[3],c=b[4],e=b[5],k=g[0];g=g[1];a[0]=b[0]*k;a[1]=f*k;a[2]=h*g;a[3]=d*g;a[4]=c;a[5]=e;return a};D.translate=function(a,b,g){var f=b[0],h=b[1],d=b[2],c=b[3],e=b[4];b=b[5];var k=g[0];g=g[1];a[0]=f;a[1]=h;a[2]=d;a[3]=c;a[4]=f*k+d*g+e;a[5]=h*k+c*g+b;return a};D.fromRotation=function(a,b){var g=Math.sin(b),f=Math.cos(b);a[0]=f;a[1]=g;a[2]=-g;a[3]=f;a[4]=0;a[5]=0;return a};D.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];
a[4]=0;a[5]=0;return a};D.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};D.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};D.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return D})},"esri/layers/vectorTiles/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(D){var q=D.GLMAT_ARRAY_TYPE,a=D.GLMAT_RANDOM,
b={create:function(){var g=new q(2);g[0]=0;g[1]=0;return g},clone:function(g){var f=new q(2);f[0]=g[0];f[1]=g[1];return f},fromValues:function(g,f){var h=new q(2);h[0]=g;h[1]=f;return h},copy:function(g,f){g[0]=f[0];g[1]=f[1];return g},set:function(g,f,h){g[0]=f;g[1]=h;return g},add:function(g,f,h){g[0]=f[0]+h[0];g[1]=f[1]+h[1];return g},subtract:function(g,f,h){g[0]=f[0]-h[0];g[1]=f[1]-h[1];return g}};b.sub=b.subtract;b.multiply=function(g,f,h){g[0]=f[0]*h[0];g[1]=f[1]*h[1];return g};b.mul=b.multiply;
b.divide=function(g,f,h){g[0]=f[0]/h[0];g[1]=f[1]/h[1];return g};b.div=b.divide;b.min=function(g,f,h){g[0]=Math.min(f[0],h[0]);g[1]=Math.min(f[1],h[1]);return g};b.max=function(g,f,h){g[0]=Math.max(f[0],h[0]);g[1]=Math.max(f[1],h[1]);return g};b.scale=function(g,f,h){g[0]=f[0]*h;g[1]=f[1]*h;return g};b.scaleAndAdd=function(g,f,h,d){g[0]=f[0]+h[0]*d;g[1]=f[1]+h[1]*d;return g};b.distance=function(g,f){var h=f[0]-g[0],d=f[1]-g[1];return Math.sqrt(h*h+d*d)};b.dist=b.distance;b.squaredDistance=function(g,
f){var h=f[0]-g[0],d=f[1]-g[1];return h*h+d*d};b.sqrDist=b.squaredDistance;b.length=function(g){var f=g[0];g=g[1];return Math.sqrt(f*f+g*g)};b.len=b.length;b.squaredLength=function(g){var f=g[0];g=g[1];return f*f+g*g};b.sqrLen=b.squaredLength;b.negate=function(g,f){g[0]=-f[0];g[1]=-f[1];return g};b.inverse=function(g,f){g[0]=1/f[0];g[1]=1/f[1];return g};b.normalize=function(g,f){var h=f[0],d=f[1];h=h*h+d*d;0<h&&(h=1/Math.sqrt(h),g[0]=f[0]*h,g[1]=f[1]*h);return g};b.dot=function(g,f){return g[0]*f[0]+
g[1]*f[1]};b.cross=function(g,f,h){f=f[0]*h[1]-f[1]*h[0];g[0]=g[1]=0;g[2]=f;return g};b.lerp=function(g,f,h,d){var c=f[0];f=f[1];g[0]=c+d*(h[0]-c);g[1]=f+d*(h[1]-f);return g};b.random=function(g,f){f=f||1;var h=2*a()*Math.PI;g[0]=Math.cos(h)*f;g[1]=Math.sin(h)*f;return g};b.transformMat2=function(g,f,h){var d=f[0];f=f[1];g[0]=h[0]*d+h[2]*f;g[1]=h[1]*d+h[3]*f;return g};b.transformMat2d=function(g,f,h){var d=f[0];f=f[1];g[0]=h[0]*d+h[2]*f+h[4];g[1]=h[1]*d+h[3]*f+h[5];return g};b.transformMat3=function(g,
f,h){var d=f[0];f=f[1];g[0]=h[0]*d+h[3]*f+h[6];g[1]=h[1]*d+h[4]*f+h[7];return g};b.transformMat4=function(g,f,h){var d=f[0];f=f[1];g[0]=h[0]*d+h[4]*f+h[12];g[1]=h[1]*d+h[5]*f+h[13];return g};b.forEach=function(){var g=b.create();return function(f,h,d,c,e,k){h||(h=2);d||(d=0);for(c=c?Math.min(c*h+d,f.length):f.length;d<c;d+=h)g[0]=f[d],g[1]=f[d+1],e(g,g,k),f[d]=g[0],f[d+1]=g[1];return f}}();b.str=function(g){return"vec2("+g[0]+", "+g[1]+")"};return b})},"esri/layers/vectorTiles/views/support/screenshotUtils":function(){define(["require",
"exports","../../core/tsSupport/assignHelper"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.adjustScreenshotSettings=function(b,g){b=a({format:"png",quality:100},b);if(b.includePadding){var f=g.width;var h=g.height}else f=g.width-g.padding.left-g.padding.right,h=g.height-g.padding.top-g.padding.bottom;var d=f/h;void 0!==b.width&&void 0===b.height?b.height=b.width/d:void 0!==b.height&&void 0===b.width&&(b.width=d*b.height);void 0!==b.height&&(b.height=Math.floor(b.height));void 0!==
b.width&&(b.width=Math.floor(b.width));b.area||b.includePadding||(b.area={x:g.padding.left,y:g.padding.top,width:f,height:h});return b};q.resampleHermite=function(b,g,f,h,d,c,e){void 0===e&&(e=!0);var k=g/d;f/=c;for(var l=Math.ceil(k/2),m=Math.ceil(f/2),n=0;n<c;n++)for(var p=0;p<d;p++){for(var v=4*(p+(e?c-n-1:n)*d),r=0,y=0,x=0,z=0,u=0,w=0,t=0,A=(n+.5)*f,G=Math.floor(n*f);G<(n+1)*f;G++){var B=Math.abs(A-(G+.5))/m,E=(p+.5)*k;B*=B;for(var F=Math.floor(p*k);F<(p+1)*k;F++){var I=Math.abs(E-(F+.5))/l;r=
Math.sqrt(B+I*I);-1<=r&&1>=r&&(r=2*r*r*r-3*r*r+1,0<r&&(I=4*(F+G*g),t+=r*b[I+3],x+=r,255>b[I+3]&&(r=r*b[I+3]/250),z+=r*b[I],u+=r*b[I+1],w+=r*b[I+2],y+=r))}}h[v]=z/y;h[v+1]=u/y;h[v+2]=w/y;h[v+3]=t/x}}})},"esri/layers/vectorTiles/views/webgl/RenderingContext":function(){define("require exports dojo/has ./enums ./InstanceCounter ./capabilities/isWebGL2Context ./capabilities/load".split(" "),function(D,q,a,b,g,f,h){return function(){function d(c,e){this.gl=null;this._blendEnabled=!1;this._blendColorState=
{r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=
this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._lineWidth=1;this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap={};this.contextVersion=f["default"](c)?"webgl2":"webgl";
this.gl=c;c instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=h.loadCapabilities(c,e);var k=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:k[0],y:k[1],width:k[2],height:k[3]};k=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),
maxMaxAnisotropy:k?this.gl.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS)};a("esri-webgl-debug")&&(this.instanceCounter=new g);this.enforceState()}Object.defineProperty(d.prototype,"contextAttributes",{get:function(){return this.gl.getContextAttributes()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0});d.prototype.dispose=
function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap={};a("esri-webgl-debug")&&this.instanceCounter.printResourceCount();this.gl=null};d.prototype.setBlendingEnabled=function(c){this._blendEnabled!==c&&(!0===c?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=c)};d.prototype.setBlendColor=function(c,e,k,l){if(c!==this._blendColorState.r||e!==this._blendColorState.g||k!==this._blendColorState.b||l!==this._blendColorState.a)this.gl.blendColor(c,
e,k,l),this._blendColorState.r=c,this._blendColorState.g=e,this._blendColorState.b=k,this._blendColorState.a=l};d.prototype.setBlendFunction=function(c,e){if(c!==this._blendFunctionState.srcRGB||e!==this._blendFunctionState.dstRGB)this.gl.blendFunc(c,e),this._blendFunctionState.srcRGB=c,this._blendFunctionState.srcAlpha=c,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=e};d.prototype.setBlendFunctionSeparate=function(c,e,k,l){if(this._blendFunctionState.srcRGB!==c||this._blendFunctionState.srcAlpha!==
k||this._blendFunctionState.dstRGB!==e||this._blendFunctionState.dstAlpha!==l)this.gl.blendFuncSeparate(c,e,k,l),this._blendFunctionState.srcRGB=c,this._blendFunctionState.srcAlpha=k,this._blendFunctionState.dstRGB=e,this._blendFunctionState.dstAlpha=l};d.prototype.setBlendEquation=function(c){this._blendEquationState.mode!==c&&(this.gl.blendEquation(c),this._blendEquationState.mode=c,this._blendEquationState.modeAlpha=c)};d.prototype.setBlendEquationSeparate=function(c,e){if(this._blendEquationState.mode!==
c||this._blendEquationState.modeAlpha!==e)this.gl.blendEquationSeparate(c,e),this._blendEquationState.mode=c,this._blendEquationState.modeAlpha=e};d.prototype.setColorMask=function(c,e,k,l){if(this._colorMaskState.r!==c||this._colorMaskState.g!==e||this._colorMaskState.b!==k||this._colorMaskState.a!==l)this.gl.colorMask(c,e,k,l),this._colorMaskState.r=c,this._colorMaskState.g=e,this._colorMaskState.b=k,this._colorMaskState.a=l};d.prototype.setClearColor=function(c,e,k,l){if(this._clearColor.r!==c||
this._clearColor.g!==e||this._clearColor.b!==k||this._clearColor.a!==l)this.gl.clearColor(c,e,k,l),this._clearColor.r=c,this._clearColor.g=e,this._clearColor.b=k,this._clearColor.a=l};d.prototype.setFaceCullingEnabled=function(c){this._polygonCullingEnabled!==c&&(!0===c?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=c)};d.prototype.setPolygonOffsetFillEnabled=function(c){this._polygonOffsetFillEnabled!==c&&(!0===c?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):
this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=c)};d.prototype.setPolygonOffset=function(c,e){if(this._polygonOffset[0]!==c||this._polygonOffset[1]!==e)this._polygonOffset[0]=c,this._polygonOffset[1]=e,this.gl.polygonOffset(c,e)};d.prototype.setCullFace=function(c){this._cullFace!==c&&(this.gl.cullFace(c),this._cullFace=c)};d.prototype.setFrontFace=function(c){this._frontFace!==c&&(this.gl.frontFace(c),this._frontFace=c)};d.prototype.setScissorTestEnabled=function(c){this._scissorTestEnabled!==
c&&(!0===c?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=c)};d.prototype.setScissorRect=function(c,e,k,l){if(this._scissorRect.x!==c||this._scissorRect.y!==e||this._scissorRect.width!==k||this._scissorRect.height!==l)this.gl.scissor(c,e,k,l),this._scissorRect.x=c,this._scissorRect.y=e,this._scissorRect.width=k,this._scissorRect.height=l};d.prototype.setDepthTestEnabled=function(c){this._depthTestEnabled!==c&&(!0===c?this.gl.enable(this.gl.DEPTH_TEST):
this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=c)};d.prototype.setClearDepth=function(c){this._clearDepth!==c&&(this.gl.clearDepth(c),this._clearDepth=c)};d.prototype.setDepthFunction=function(c){this._depthFunction!==c&&(this.gl.depthFunc(c),this._depthFunction=c)};d.prototype.setDepthWriteEnabled=function(c){this._depthWriteEnabled!==c&&(this.gl.depthMask(c),this._depthWriteEnabled=c)};d.prototype.setDepthRange=function(c,e){if(this._depthRange.zNear!==c||this._depthRange.zFar!==e)this.gl.depthRange(c,
e),this._depthRange.zNear=c,this._depthRange.zFar=e};d.prototype.setStencilTestEnabled=function(c){this._stencilTestEnabled!==c&&(!0===c?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=c)};d.prototype.setClearStencil=function(c){c!==this._clearStencil&&(this.gl.clearStencil(c),this._clearStencil=c)};d.prototype.setStencilFunction=function(c,e,k){if(this._stencilFunction.func!==c||this._stencilFunction.ref!==e||this._stencilFunction.mask!==k)this.gl.stencilFunc(c,
e,k),this._stencilFunction.face=1032,this._stencilFunction.func=c,this._stencilFunction.ref=e,this._stencilFunction.mask=k};d.prototype.setStencilFunctionSeparate=function(c,e,k,l){if(this._stencilFunction.face!==c||this._stencilFunction.func!==e||this._stencilFunction.ref!==k||this._stencilFunction.mask!==l)this.gl.stencilFuncSeparate(c,e,k,l),this._stencilFunction.face=c,this._stencilFunction.func=e,this._stencilFunction.ref=k,this._stencilFunction.mask=l};d.prototype.setStencilWriteMask=function(c){this._stencilWriteMask!==
c&&(this.gl.stencilMask(c),this._stencilWriteMask=c)};d.prototype.setStencilOp=function(c,e,k){if(this._stencilOperation.fail!==c||this._stencilOperation.zFail!==e||this._stencilOperation.zPass!==k)this.gl.stencilOp(c,e,k),this._stencilOperation.face=1032,this._stencilOperation.fail=c,this._stencilOperation.zFail=e,this._stencilOperation.zPass=k};d.prototype.setStencilOpSeparate=function(c,e,k,l){if(this._stencilOperation.face!==c||this._stencilOperation.fail!==e||this._stencilOperation.zFail!==k||
this._stencilOperation.zPass!==l)this.gl.stencilOpSeparate(c,e,k,l),this._stencilOperation.face=c,this._stencilOperation.face=c,this._stencilOperation.fail=e,this._stencilOperation.zFail=k,this._stencilOperation.zPass=l};d.prototype.setLineWidth=function(c){var e=this._lineWidth;this._lineWidth!==c&&(this.gl.lineWidth(c),this._lineWidth=c);return e};d.prototype.setActiveTexture=function(c){var e=this._activeTextureUnit;0<=c&&c!==this._activeTextureUnit&&(this.gl.activeTexture(b.BASE_TEXTURE_UNIT+
c),this._activeTextureUnit=c);return e};d.prototype.clear=function(c){c&&this.gl.clear(c)};d.prototype.drawArrays=function(c,e,k){this.gl.drawArrays(c,e,k)};d.prototype.drawElements=function(c,e,k,l){5123===k?this.gl.drawElements(c,e,k,l):5125===k&&this.gl.drawElements(c,e,k,l)};Object.defineProperty(d.prototype,"capabilities",{get:function(){return this._capabilities},enumerable:!0,configurable:!0});d.prototype.setViewport=function(c,e,k,l){var m=this._viewport;if(m.x!==c||m.y!==e||m.width!==k||
m.height!==l)m.x=c,m.y=e,m.width=k,m.height=l,this.gl.viewport(c,e,k,l)};d.prototype.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};d.prototype.bindProgram=function(c){c?this._activeShaderProgram!==c&&(c.initialize(),this.gl.useProgram(c.glName),this._activeShaderProgram=c):(this.gl.useProgram(null),this._activeShaderProgram=null)};d.prototype.bindTexture=function(c,e){void 0===e&&(e=0);-1===d._MAX_TEXTURE_IMAGE_UNITS&&
(d._MAX_TEXTURE_IMAGE_UNITS=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS));var k=this._textureUnitMap[e];this.setActiveTexture(e);null==c||null==c.glName?(null!=k&&(this.gl.bindTexture(k.descriptor.target,null),k.setBoundToUnit(e,!1)),this._textureUnitMap[e]=null):k&&k.id===c.id?c.applyChanges():(this.gl.bindTexture(c.descriptor.target,c.glName),c.setBoundToUnit(e,!0),c.applyChanges(),this._textureUnitMap[e]=c)};d.prototype.bindFramebuffer=function(c){c?this._activeFramebuffer!==c&&(c.initialize()||
this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,c.glName),this._activeFramebuffer=c):(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null)};d.prototype.bindBuffer=function(c){c&&(34962===c.bufferType?this._activeVertexBuffer=d._bindBuffer(this.gl,c,c.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,c,c.bufferType,this._activeIndexBuffer))};d.prototype.bindRenderbuffer=function(c){var e=this.gl;c||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._activeRenderbuffer=
null);this._activeRenderbuffer!==c&&(e.bindRenderbuffer(e.RENDERBUFFER,c.glName),this._activeRenderbuffer=c)};d.prototype.unbindBuffer=function(c){34962===c?this._activeVertexBuffer=d._bindBuffer(this.gl,null,c,this._activeVertexBuffer):this._activeIndexBuffer=d._bindBuffer(this.gl,null,c,this._activeIndexBuffer)};d.prototype.bindVAO=function(c){c?this._activeVertexArrayObject&&this._activeVertexArrayObject.id===c.id||(c.bind(),this._activeVertexArrayObject=c):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),
this._activeVertexArrayObject=null)};d.prototype.getBoundTexture=function(c){return this._textureUnitMap[c]};d.prototype.getBoundFramebufferObject=function(){return this._activeFramebuffer};d.prototype.getBoundVAO=function(){return this._activeVertexArrayObject};d.prototype.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);for(var c=0;c<this.parameters.maxTextureImageUnits;c++)this.bindTexture(null,c);this.setBlendingEnabled(!1);
this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);
this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};d.prototype.enforceState=function(){var c=this.gl,e=this._capabilities.vao;e&&e.bindVertexArray(null);for(var k=0;k<this.parameters.maxVertexAttributes;k++)c.disableVertexAttribArray(k);this._activeVertexBuffer?c.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):
c.bindBuffer(34962,null);this._activeIndexBuffer?c.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):c.bindBuffer(34963,null);if(e&&this._activeVertexArrayObject){if(e=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(e)}c.bindFramebuffer(c.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:null);c.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);c.blendColor(this._blendColorState.r,
this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);c.bindRenderbuffer(c.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?c.enable(this.gl.BLEND):c.disable(this.gl.BLEND);c.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);c.blendFuncSeparate(this._blendFunctionState.srcRGB,this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);c.clearColor(this._clearColor.r,
this._clearColor.g,this._clearColor.b,this._clearColor.a);c.clearDepth(this._clearDepth);c.clearStencil(this._clearStencil);c.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);c.cullFace(this._cullFace);c.depthFunc(this._depthFunction);c.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);c.depthMask(this._depthWriteEnabled);c.frontFace(this._frontFace);c.lineWidth(this._lineWidth);
!0===this._polygonCullingEnabled?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);c.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?c.enable(c.POLYGON_OFFSET_FILL):c.disable(c.POLYGON_OFFSET_FILL);c.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?c.enable(c.SCISSOR_TEST):c.disable(c.SCISSOR_TEST);c.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);
c.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST);c.stencilMask(this._stencilWriteMask);for(e=0;e<this.parameters.maxTextureImageUnits;e++)c.activeTexture(b.BASE_TEXTURE_UNIT+e),c.bindTexture(3553,null),(k=this._textureUnitMap[e])&&c.bindTexture(k.descriptor.target,k.glName);c.activeTexture(b.BASE_TEXTURE_UNIT+this._activeTextureUnit);
c.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};d._bindBuffer=function(c,e,k,l){if(!e)return c.bindBuffer(k,null),null;if(l===e)return l;c.bindBuffer(k,e.glName);return e};d._MAX_TEXTURE_IMAGE_UNITS=-1;return d}()})},"esri/layers/vectorTiles/views/webgl/enums":function(){define(["require","exports"],function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q.BASE_TEXTURE_UNIT=33984})},"esri/layers/vectorTiles/views/webgl/InstanceCounter":function(){define(["require",
"exports"],function(D,q){return function(){function a(){this._instanceCount={textureCount:0,bufferCount:0,vaoCount:0,programCount:0,framebufferCount:0,renderBufferCount:0}}a.prototype.incrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount++;break;case 1:this._instanceCount.bufferCount++;break;case 2:this._instanceCount.vaoCount++;break;case 3:this._instanceCount.programCount++;break;case 4:this._instanceCount.framebufferCount++;break;case 5:this._instanceCount.renderBufferCount++}};
a.prototype.decrementCount=function(b){switch(b){case 0:this._instanceCount.textureCount--;break;case 1:this._instanceCount.bufferCount--;break;case 2:this._instanceCount.vaoCount--;break;case 3:this._instanceCount.programCount--;break;case 4:this._instanceCount.framebufferCount--;break;case 5:this._instanceCount.renderBufferCount--}};a.prototype.printResourceCount=function(){};return a}()})},"esri/layers/vectorTiles/views/webgl/capabilities/isWebGL2Context":function(){define(["require","exports"],
function(D,q){Object.defineProperty(q,"__esModule",{value:!0});q["default"]=function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/layers/vectorTiles/views/webgl/capabilities/load":function(){define("require exports ./DisjointTimerQuery ./Instancing ./isWebGL2Context ./VertexArrayObjects".split(" "),function(D,q,a,b,g,f){function h(d,c,e,k,l){if(k&&g["default"](d))return!0;if(c[e])return!1;for(c=0;c<l.length;c++)if(d.getExtension(l[c]))return!0;return!1}
Object.defineProperty(q,"__esModule",{value:!0});q.loadCapabilities=function(d,c){var e=c&&c.disabledExtensions||{},k=b.load(d,e),l=f.load(d,e);var m=e.compressedTextureS3TC?null:(m=d.getExtension("WEBGL_compressed_texture_s3tc"))?{COMPRESSED_RGB_S3TC_DXT1:m.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:m.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:m.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:m.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null;var n=e.textureFilterAnisotropic?
null:(n=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"))?{MAX_TEXTURE_MAX_ANISOTROPY:n.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:n.TEXTURE_MAX_ANISOTROPY_EXT}:null;var p=a.load(d,e);if(g["default"](d))var v=e.colorBufferFloat||!d.getExtension("EXT_color_buffer_float")?null:{R16F:d.R16F,RG16F:d.RG16F,RGBA16F:d.RGBA16F,R32F:d.R32F,RG32F:d.RG32F,RGBA32F:d.RGBA32F,R11F_G11F_B10F:d.R11F_G11F_B10F};
else if(d instanceof WebGLRenderingContext){v=!e.colorBufferFloat&&d.getExtension("EXT_color_buffer_half_float");var r=!e.colorBufferFloat&&d.getExtension("WEBGL_color_buffer_float");v=v||r?{RGBA16F:v?v.RGBA16F_EXT:void 0,RGBA32F:r?r.RGBA32F_EXT:void 0}:null}else v=void 0;r=g["default"](d)?{MIN:d.MIN,MAX:d.MAX}:e.blendMinMax?null:(r=d.getExtension("EXT_blend_minmax"))?{MIN:r.MIN_EXT,MAX:r.MAX_EXT}:null;return{instancing:k,vao:l,compressedTextureS3TC:m,textureFilterAnisotropic:n,disjointTimerQuery:p,
colorBufferFloat:v,blendMinMax:r,depthTexture:h(d,e,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]),standardDerivatives:h(d,e,"standardDerivatives",!0,["OES_standard_derivatives"]),shaderTextureLOD:h(d,e,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]),textureFloatLinear:h(d,e,"textureFloatLinear",!1,["OES_texture_float_linear"]),fragDepth:h(d,e,"fragDepth",!0,["EXT_frag_depth"])}}})},"esri/layers/vectorTiles/views/webgl/capabilities/DisjointTimerQuery":function(){define(["require",
"exports","./isWebGL2Context"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,g){if(g.disjointTimerQuery)return null;var f=b.getExtension("EXT_disjoint_timer_query")||b.getExtension("EXT_disjoint_timer_query_webgl2");return f?a["default"](b)?{createQuery:function(){return b.createQuery()},resultAvailable:function(h){return b.getQueryParameter(h,b.QUERY_RESULT_AVAILABLE)},getResult:function(h){return b.getQueryParameter(h,b.QUERY_RESULT)},disjoint:function(){return b.getParameter(f.GPU_DISJOINT_EXT)},
beginTimeElapsed:function(h){return b.beginQuery(f.TIME_ELAPSED_EXT,h)},endTimeElapsed:function(){return b.endQuery(f.TIME_ELAPSED_EXT)},createTimestamp:function(h){return f.queryCounterEXT(h,f.TIMESTAMP_EXT)},timestampBits:function(){return b.getQuery(f.TIMESTAMP_EXT,f.QUERY_COUNTER_BITS_EXT)}}:{createQuery:function(){return f.createQueryEXT()},resultAvailable:function(h){return f.getQueryObjectEXT(h,f.QUERY_RESULT_AVAILABLE_EXT)},getResult:function(h){return f.getQueryObjectEXT(h,f.QUERY_RESULT_EXT)},
disjoint:function(){return b.getParameter(f.GPU_DISJOINT_EXT)},beginTimeElapsed:function(h){return f.beginQueryEXT(f.TIME_ELAPSED_EXT,h)},endTimeElapsed:function(){return f.endQueryEXT(f.TIME_ELAPSED_EXT)},createTimestamp:function(h){return f.queryCounterEXT(h,f.TIMESTAMP_EXT)},timestampBits:function(){return f.getQueryEXT(f.TIMESTAMP_EXT,f.QUERY_COUNTER_BITS_EXT)}}:null}})},"esri/layers/vectorTiles/views/webgl/capabilities/Instancing":function(){define(["require","exports","./isWebGL2Context"],function(D,
q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,g){if(a["default"](b))return{drawArraysInstanced:b.drawArraysInstanced.bind(b),drawElementsInstanced:b.drawElementsInstanced.bind(b),vertexAttribDivisor:b.vertexAttribDivisor.bind(b)};if(g.angleInstancedArrays)return null;var f=b.getExtension("ANGLE_instanced_arrays");return f?{drawArraysInstanced:f.drawArraysInstancedANGLE.bind(f),drawElementsInstanced:f.drawElementsInstancedANGLE.bind(f),vertexAttribDivisor:f.vertexAttribDivisorANGLE.bind(f)}:
null}})},"esri/layers/vectorTiles/views/webgl/capabilities/VertexArrayObjects":function(){define(["require","exports","./isWebGL2Context"],function(D,q,a){Object.defineProperty(q,"__esModule",{value:!0});q.load=function(b,g){if(a["default"](b))return{createVertexArray:b.createVertexArray.bind(b),deleteVertexArray:b.deleteVertexArray.bind(b),bindVertexArray:b.bindVertexArray.bind(b)};if(g.vao)return null;var f=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||
b.getExtension("WEBKIT_OES_vertex_array_object");return f?{createVertexArray:f.createVertexArrayOES.bind(f),deleteVertexArray:f.deleteVertexArrayOES.bind(f),bindVertexArray:f.bindVertexArrayOES.bind(f)}:null}})},"esri/layers/vectorTiles/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(D,q,a,b,g,f,h){var d=new f("0/0/0/0"),c=function(){function k(l,m,n,p,v,r,y,x){this.x=
l;this.ymin=m;this.ymax=n;this.invM=p;this.leftAdjust=v;this.rightAdjust=r;this.leftBound=y;this.rightBound=x}k.create=function(l,m){if(l[1]>m[1]){var n=[m,l];l=n[0];m=n[1]}n=l[0];var p=l[1],v=m[0],r=m[1],y=v-n,x=r-p;x=0!==x?y/x:0;var z=(Math.ceil(p)-p)*x,u=(Math.floor(p)-p)*x;return new k(n,Math.floor(p),Math.ceil(r),x,0>y?z:u,0>y?u:z,0>y?v:n,0>y?n:v)};k.prototype.incrRow=function(){this.x+=this.invM};k.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};k.prototype.getRightCol=
function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return k}(),e=[[0,0],[0,0],[0,0],[0,0]];return function(){function k(l,m){var n=this;this.tileInfo=l;this.fullExtent=m;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var p=l.lods.slice();p.sort(function(r,y){return y.scale-r.scale});var v=this._lodInfos=p.map(function(r){return b.create(l,r,m)});p.forEach(function(r,y){n._infoByLevel[r.level]=v[y];n._infoByScale[r.scale]=v[y];n.scales[y]=r.scale},this);
this._wrap=l.isWrappable}k.prototype.getLODInfoAt=function(l){return this._infoByLevel[l.level]};k.prototype.getTileBounds=function(l,m,n){void 0===n&&(n=!1);d.set(m);return(m=this._infoByLevel[d.level])?m.getTileBounds(l,d,n):l};k.prototype.getTileCoords=function(l,m,n){void 0===n&&(n=!1);d.set(m);return(m=this._infoByLevel[d.level])?m.getTileCoords(l,d,n):l};k.prototype.getTileCoverage=function(l,m,n){void 0===m&&(m=192);void 0===n&&(n="closest");n="closest"===n?this.getClosestInfoForScale(l.scale):
this.getSmallestInfoForScale(l.scale);var p=g.pool.acquire(n),v=this._wrap;var r=Infinity;var y=-Infinity,x=p.spans;e[0][0]=e[0][1]=e[1][1]=e[3][0]=-m;e[1][0]=e[2][0]=l.size[0]+m;e[2][1]=e[3][1]=l.size[1]+m;for(m=0;m<e.length;m++){var z=e[m];l.toMap(z,z);z[0]=n.getColumnForX(z[0]);z[1]=n.getRowForY(z[1])}l=[];z=3;for(m=0;4>m;m++){if(e[m][1]!==e[z][1]){var u=c.create(e[m],e[z]);r=Math.min(u.ymin,r);y=Math.max(u.ymax,y);void 0===l[u.ymin]&&(l[u.ymin]=[]);l[u.ymin].push(u)}z=m}if(null==r||null==y||100<
y-r)return null;for(z=[];r<y;){null!=l[r]&&(z=z.concat(l[r]));var w=Infinity;var t=-Infinity;for(m=z.length-1;0<=m;m--)u=z[m],w=Math.min(w,u.getLeftCol()),t=Math.max(t,u.getRightCol());w=Math.floor(w);t=Math.floor(t);if(r>=n.first[1]&&r<=n.last[1])if(v)if(n.size[0]<n.worldSize[0])for(u=Math.floor(t/n.worldSize[0]),m=Math.floor(w/n.worldSize[0]);m<=u;m++)x.push(new h(r,Math.max(n.getFirstColumnForWorld(m),w),Math.min(n.getLastColumnForWorld(m),t)));else x.push(new h(r,w,t));else w>n.last[0]||t<n.first[0]||
(w=Math.max(w,n.first[0]),t=Math.min(t,n.last[0]),x.push(new h(r,w,t)));r+=1;for(m=z.length-1;0<=m;m--)u=z[m],u.ymax>=r?u.incrRow():z.splice(m,1)}return p};k.prototype.getTileIdAtParent=function(l,m){var n=f.pool.acquire(m),p=this._infoByLevel[n.level];if(l.resolution<p.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+l.resolution+" is not a parent resolution of "+p.resolution);return l.resolution===p.resolution?n.id:f.getId(l.level,Math.floor(n.row*p.resolution/
l.resolution+.01),Math.floor(n.col*p.resolution/l.resolution+.01),n.world)};k.prototype.getTileParentId=function(l){l=f.pool.acquire(l);var m=this._lodInfos.indexOf(this._infoByLevel[l.level])-1;if(0>m)return f.pool.release(l),null;m=this.getTileIdAtParent(this._lodInfos[m],l);f.pool.release(l);return m};k.prototype.getTileResolution=function(l){return(l=this._infoByLevel[l.level])?l.resolution:-1};k.prototype.getTileScale=function(l){return(l=this._infoByLevel[l.level])?l.scale:-1};k.prototype.intersects=
function(l,m){var n=f.pool.acquire(m),p=this._infoByLevel[n.level],v=l.lodInfo;if(v.resolution>p.resolution){var r=f.pool.acquire(this.getTileIdAtParent(v,n)),y=v.denormalizeCol(r.col,r.world),x=l.spans.some(function(E){return E.row===r.row&&E.colFrom<=y&&E.colTo>=y});f.pool.release(n);f.pool.release(r);return x}if(v.resolution<p.resolution){var z=l.spans.reduce(function(E,F){E[0]=Math.min(E[0],F.row);E[1]=Math.max(E[1],F.row);E[2]=Math.min(E[2],F.colFrom);E[3]=Math.max(E[3],F.colTo);return E},[Infinity,
-Infinity,Infinity,-Infinity]);x=z[0];var u=z[1],w=z[2];z=z[3];var t=p.denormalizeCol(n.col,n.world),A=v.getColumnForX(p.getXForColumn(t)),G=v.getRowForY(p.getYForRow(n.row));t=v.getColumnForX(p.getXForColumn(t+1))-1;p=v.getRowForY(p.getYForRow(n.row+1))-1;f.pool.release(n);return!(A>z||t<w||G>u||p<x)}var B=v.denormalizeCol(n.col,n.world);x=l.spans.some(function(E){return E.row===n.row&&E.colFrom<=B&&E.colTo>=B});f.pool.release(n);return x};k.prototype.normalizeBounds=function(l,m,n){l[0]=m[0];l[1]=
m[1];l[2]=m[2];l[3]=m[3];this._wrap&&(m=a.getInfo(this.tileInfo.spatialReference),n=-n*(m.valid[1]-m.valid[0]),l[0]+=n,l[2]+=n);return l};k.prototype.getSmallestInfoForScale=function(l){var m=this.scales;if(this._infoByScale[l])return this._infoByScale[l];if(l>m[0])return this._infoByScale[m[0]];for(var n=1;n<m.length-1;n++)if(l>m[n]+1E-6)return this._infoByScale[m[n-1]];return this._infoByScale[m[m.length-1]]};k.prototype.getClosestInfoForScale=function(l){var m=this.scales;this._infoByScale[l]||
(l=m.reduce(function(n,p,v,r){return Math.abs(p-l)<Math.abs(n-l)?p:n},m[0]));return this._infoByScale[l]};return k}()})},"esri/layers/vectorTiles/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(D,q,a,b){function g(h,d,c){h[0]=d;h[1]=c;return h}var f=new b("0/0/0/0");return function(){function h(d,c,e,k,l,m,n,p,v,r,y,x){this.level=d;this.resolution=c;this.scale=e;this.origin=k;this.first=l;this.last=m;this.size=
n;this.norm=p;this.worldStart=v;this.worldEnd=r;this.worldSize=y;this.wrap=x}h.create=function(d,c,e){var k=a.getInfo(d.spatialReference),l=[d.origin.x,d.origin.y],m=[d.size[0]*c.resolution,d.size[1]*c.resolution],n=[-Infinity,-Infinity],p=[Infinity,Infinity],v=[Infinity,Infinity];e&&(g(n,Math.max(0,Math.floor((e.xmin-l[0])/m[0])),Math.max(0,Math.floor((l[1]-e.ymax)/m[1]))),g(p,Math.max(0,Math.floor((e.xmax-l[0])/m[0])),Math.max(0,Math.floor((l[1]-e.ymin)/m[1]))),g(v,p[0]-n[0]+1,p[1]-n[1]+1));if(d.isWrappable){d=
[Math.ceil(Math.round(2*k.origin[1]/c.resolution)/d.size[0]),v[1]];k=[Math.floor((k.origin[0]-l[0])/m[0]),n[1]];e=[d[0]+k[0]-1,p[1]];var r=!0}else k=n,e=p,d=v,r=!1;return new h(c.level,c.resolution,c.scale,l,n,p,v,m,k,e,d,r)};h.prototype.normalizeCol=function(d){if(!this.wrap)return d;var c=this.worldSize[0];return 0>d?c-1-Math.abs((d+1)%c):d%c};h.prototype.denormalizeCol=function(d,c){return this.wrap?this.worldSize[0]*c+d:d};h.prototype.getWorldForColumn=function(d){return this.wrap?Math.floor(d/
this.worldSize[0]):0};h.prototype.getFirstColumnForWorld=function(d){return d*this.worldSize[0]+this.first[0]};h.prototype.getLastColumnForWorld=function(d){return d*this.worldSize[0]+this.first[0]+this.size[0]-1};h.prototype.getColumnForX=function(d){return(d-this.origin[0])/this.norm[0]};h.prototype.getXForColumn=function(d){return this.origin[0]+d*this.norm[0]};h.prototype.getRowForY=function(d){return(this.origin[1]-d)/this.norm[1]};h.prototype.getYForRow=function(d){return this.origin[1]-d*this.norm[1]};
h.prototype.getTileBounds=function(d,c,e){void 0===e&&(e=!1);f.set(c);var k=e?f.col:this.denormalizeCol(f.col,f.world),l=f.row;c=this.getXForColumn(k);e=this.getYForRow(l+1);k=this.getXForColumn(k+1);l=this.getYForRow(l);d[0]=c;d[1]=e;d[2]=k;d[3]=l;return d};h.prototype.getTileCoords=function(d,c,e){void 0===e&&(e=!1);f.set(c);c=e?f.col:this.denormalizeCol(f.col,f.world);Array.isArray(d)?g(d,this.getXForColumn(c),this.getYForRow(f.row)):(d.x=this.getXForColumn(c),d.y=this.getYForRow(f.row));return d};
return h}()})},"esri/layers/vectorTiles/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(D,q,a,b,g){return function(){function f(h){this.lodInfo=h;this.spans=a.acquire()}f.prototype.release=function(){for(var h=0,d=this.spans;h<d.length;h++)g.pool.release(d[h]);a.release(this.spans)};f.prototype.forEach=function(h,d){var c=this.spans,e=this.lodInfo,k=e.level;if(0!==c.length)for(var l=0;l<c.length;l++){var m=
c[l],n=m.row,p=m.colTo;for(m=m.colFrom;m<=p;m++)h.call(d,k,n,e.normalizeCol(m),e.getWorldForColumn(m))}};f.pool=new b(f,!0);return f}()})},"esri/layers/vectorTiles/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(D,q,a){return function(){function b(g,f,h){this.row=g;this.colFrom=f;this.colTo=h}b.pool=new a(b,!0);return b}()})},"esri/layers/vectorTiles/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"./enums","./TileKey"],function(D,q,a,b,g){var f=new g(0,0,0,0),h=new Map,d=[],c=[];return function(){function e(k){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=k.acquireTile;this.releaseTile=k.releaseTile;this.tileInfoView=k.tileInfoView;k.cachePolicy&&(this.cachePolicy=k.cachePolicy);k.coveragePolicy&&(this.coveragePolicy=k.coveragePolicy);null!=k.buffer&&(this.buffer=
k.buffer)}e.prototype.destroy=function(){this.clear()};e.prototype.update=function(k){var l=this,m=this.tileIndex,n=this.tileInfoView.getTileCoverage(k.state,this.buffer,this.coveragePolicy);if(n){var p=n.spans,v=n.lodInfo,r=v.level,y=k.state.resolution,x=!k.stationary&&y>this._previousResolution;this._previousResolution=y;m.forEach(function(E){return E.visible=!0});this.tiles.length=0;h.clear();var z=0,u=0;if(0<p.length)for(var w=0;w<p.length;w++){k=p[w];for(var t=k.row,A=k.colTo,G=k.colFrom;G<=
A;G++)z++,k=f.set(r,t,v.normalizeCol(G),v.getWorldForColumn(G)).id,m.has(k)?(y=m.get(k),y.status!==b.TileStatus.INITIALIZED&&u++,y.attached?h.set(k,y):y.attached||x||this._addParentTile(k,h)):(y=this.acquireTile(f),this.tileIndex.set(k,y),x||this._addParentTile(k,h))}var B=u===z;c.length=0;d.length=0;m.forEach(function(E,F){f.set(F);if(!h.has(F)){var I=l.tileInfoView.intersects(n,f);!I||!x&&B?"purge"===l.cachePolicy&&E.status!==b.TileStatus.MODIFIED&&E.status!==b.TileStatus.READY?d.push(F):(f.level>
r||!I)&&d.push(F):E.attached?c.push(F):f.level>r&&d.push(F)}});for(p=0;p<c.length;p++)k=c[p],(y=m.get(k))&&y.attached&&h.set(k,y);for(p=0;p<d.length;p++)k=d[p],y=m.get(k),this.releaseTile(y),m["delete"](k);h.forEach(function(E){return l.tiles.push(E)});m.forEach(function(E){h.has(E.key.id)||(E.visible=!1)});c.length=0;d.length=0;h.clear();return B}};e.prototype.clear=function(){var k=this,l=this.tileIndex;l.forEach(function(m){k.releaseTile(m)});l.clear()};e.prototype._addParentTile=function(k,l){for(var m=
k,n=null;;){m=this.tileInfoView.getTileParentId(m);if(!m)break;if(this.tileIndex.has(m)&&(n=this.tileIndex.get(m))&&n.attached){l.has(n.key.id)||l.set(n.key.id,n);break}}};return e}()})},"esri/layers/vectorTiles/views/2d/tiling/TileQueue":function(){define(["require","exports","../../../core/QueueProcessor","../libs/gl-matrix/vec2"],function(D,q,a,b){function g(c,e){c.length=0;e.forEach(function(k){return c.push(k)});return c}var f=new Set,h=[],d=new Map;return function(){function c(e){var k=this;
this._keysToRequests=new Map;this.tileInfoView=null;var l=e.strategy&&"scale-first"!==e.strategy?this._peekByCenterFirst.bind(this):this._peekByScaleFirst.bind(this);this.tileInfoView=e.tileInfoView;this._queues=e.tileServers&&0<e.tileServers.length?e.tileServers.map(function(m){return new a({concurrency:e.concurrency||6,process:function(n){n=k._keysToRequests.get(n);return e.process(n,m)},peeker:l})}):[new a({concurrency:e.concurrency||6,process:function(m){m=k._keysToRequests.get(m);return e.process(m)},
peeker:l})]}Object.defineProperty(c.prototype,"length",{get:function(){return this._queues.reduce(function(e,k){return e+k.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});c.prototype.clear=function(){for(var e=0,k=this._queues;e<k.length;e++)k[e].clear();this._keysToRequests.clear()};c.prototype.find=function(e,k){for(var l=this,m=0,n=this._queues;m<n.length;m++){var p=n[m].find(function(v){return e(l._keysToRequests.get(v).key)});
if(p)return p}};c.prototype.get=function(e){e="string"===typeof e?e:e.id;for(var k=0,l=this._queues;k<l.length;k++){var m=l[k].get(e);if(m)return m}};c.prototype.getRequest=function(e){return this._keysToRequests.get("string"===typeof e?e:e.id)};c.prototype.has=function(e){return"string"===typeof e?this._keysToRequests.has(e):this._keysToRequests.has(e.id)};c.prototype.isOngoing=function(e){var k="string"===typeof e?e:e.id;return this.has(k)&&this._queues.some(function(l){return l.isOngoing(k)})};
c.prototype.pause=function(){for(var e=0,k=this._queues;e<k.length;e++)k[e].pause()};c.prototype.push=function(e){var k=this,l=e.key.id,m=this._queues[e.key.row%this._queues.length].push(l);this._keysToRequests.set(l,e);m.then(function(){k._keysToRequests["delete"](l)});m["catch"](function(){k._keysToRequests["delete"](l)});return m};c.prototype.reset=function(){for(var e=0,k=this._queues;e<k.length;e++)k[e].reset()};c.prototype.resume=function(){for(var e=0,k=this._queues;e<k.length;e++)k[e].resume()};
c.prototype._peekByScaleFirst=function(e){if(!this.state)return e[0];for(var k=this.tileInfoView,l=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var p=this._keysToRequests.get(e[n]),v=this.tileInfoView.getTileScale(p.key);d.has(v)||(d.set(v,[]),l=Math.max(v,l),m=Math.min(v,m));d.get(v).push(p.key);f.add(v)}var r=this.state.scale;d.has(r)||(g(h,f),h.sort(),r=h.reduce(function(u,w,t,A){return Math.abs(w-r)<Math.abs(u-r)?w:u},h[0]));r=Math.min(r,l);r=Math.max(r,m);e=d.get(r);
var y=k.getClosestInfoForScale(r),x=y.getColumnForX(this.state.center[0]),z=y.getRowForY(this.state.center[1]);e.sort(function(u,w){var t=y.denormalizeCol(u.col,u.world),A=y.denormalizeCol(w.col,w.world);return Math.sqrt((x-t)*(x-t)+(z-u.row)*(z-u.row))-Math.sqrt((x-A)*(x-A)+(z-w.row)*(z-w.row))});f.clear();d.clear();return e[0].id};c.prototype._peekByCenterFirst=function(e){if(!this.state)return e[0];for(var k=this.tileInfoView,l=this.state.center,m=[0,0],n=Number.POSITIVE_INFINITY,p=null,v=0;v<
e.length;v++){var r=this._keysToRequests.get(e[v]);k.getTileCoords(m,r.key);var y=b.distance(m,l);y<n&&(n=y,p=r.key)}return p.id};return c}()})},"esri/layers/vectorTiles/core/QueueProcessor":function(){define(["require","exports","dojo/Deferred","./Queue","./scheduling"],function(D,q,a,b,g){return function(){function f(h){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;h.concurrency&&(this.concurrency=h.concurrency);
this.ordered=!!h.ordered;this._queue=new b(h.peeker?{peeker:h.peeker}:void 0);this.process=h.process}Object.defineProperty(f.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});f.prototype.clear=function(){this._queue.clear();var h=[];this._processingItems.forEach(function(d){return h.push(d.resultPromise)});this._processingItems.clear();h.forEach(function(d){return d.cancel()});h.length=0;this._apiPromises.forEach(function(d){return h.push(d)});
this._apiPromises.clear();h.forEach(function(d){return d.cancel()});this._cancelNext()};f.prototype.find=function(h,d){var c=this,e=void 0;this._apiPromises.forEach(function(k,l){h.call(d,l)&&(e=c._apiPromises.get(l).promise)});return e};f.prototype.get=function(h){return(h=this._apiPromises.get(h))&&h.promise||void 0};f.prototype.isOngoing=function(h){return this._processingItems.has(h)};f.prototype.has=function(h){return this._apiPromises.has(h)};f.prototype.pause=function(){this._isPaused||(this._isPaused=
!0,this._cancelNext())};f.prototype.push=function(h){var d=this;if(this._apiPromises.has(h))return this._apiPromises.get(h).promise;var c=new a(function(e){var k=d._processingItems.get(h);k?k.resultPromise.cancel(e):(d._remove(h),d._scheduleNext())});this._add(h,c);this._scheduleNext();return c.promise};f.prototype.reset=function(){var h=[];this._processingItems.forEach(function(e){return h.push(e)});this._processingItems.clear();for(var d=0;d<h.length;d++){var c=h[d];c.resultPromise.isFulfilled()?
this._processReset(c):(c.isReset=!0,c.resultPromise.cancel())}};f.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};f.prototype._scheduleNext=function(){var h=this;this._isPaused||this._scheduledNextHandle||(this._scheduledNextHandle=g.schedule(function(){h._scheduledNextHandle=null;h._next()}))};f.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};f.prototype._processResult=function(h,
d){this._remove(h.item);this._scheduleNext();h.dfd.resolve(d)};f.prototype._processError=function(h,d){h.isReset?this._processReset(h):(this._remove(h.item),this._scheduleNext(),h.dfd.reject(d))};f.prototype._processReset=function(h){this._remove(h.item);this._add(h.item,h.dfd);this._scheduleNext()};f.prototype._processOrdered=function(h,d){var c=this,e=!1;if(h.isReset)this._processReset(h);else{h.result=d;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(n){e||
(n.result?c._itemsToProcess.push(n):e=!0)});for(var k=0,l=this._itemsToProcess;k<l.length;k++){var m=l[k];!1===m.result.ok?this._processError(m,m.result.error):this._processResult(m,m.result.value)}this._itemsToProcess.length=0}};f.prototype._process=function(h){var d=this;if(null!=h){var c=this._apiPromises.get(h),e=this.process(h);if(e&&"function"===typeof e.then){var k={item:h,resultPromise:e,result:null,dfd:c,isReset:!1};this._processingItems.set(h,k);this.ordered?e.then(function(l){return d._processOrdered(k,
{ok:!0,value:l})},function(l){return d._processOrdered(k,{ok:!1,error:l})}):e.then(function(l){return d._processResult(k,l)},function(l){return d._processError(k,l)})}else c.resolve(e),this._remove(h)}};f.prototype._add=function(h,d){this._apiPromises.set(h,d);this._queue.push(h)};f.prototype._remove=function(h){this._queue.remove(h);this._apiPromises["delete"](h);this._processingItems["delete"](h)};f.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),
this._scheduledNextHandle=null)};return f}()})},"esri/layers/vectorTiles/core/Queue":function(){define(["require","exports"],function(D,q){return function(){function a(b){this._items=[];this._itemSet=new Set;this._peeker=function(g){return g[0]};this._length=0;b&&b.peeker&&(this._peeker=b.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=
function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(b){this.contains(b)||this._add(b)};a.prototype.contains=function(b){return 0<this._length&&this._itemSet.has(b)};a.prototype.pop=function(){if(0!==this._length){var b=this.peek();this._remove(b);return b}};a.prototype.remove=function(b){this.contains(b)&&this._remove(b)};a.prototype._add=function(b){this._items.push(b);this._itemSet.add(b);this._length++};a.prototype._remove=function(b){this._itemSet["delete"](b);
this._items.splice(this._items.indexOf(b),1);this._length--};return a}()})},"esri/layers/vectorTiles/views/webgl/webgl-utils":function(){define([],function(){var D=function(q,a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],g=null,f=0;f<b.length;++f){try{g=q.getContext(b[f],a)}catch(h){}if(g)break}return g};return{create3DContext:D,setupWebGL:function(q,a){function b(f){var h=q.parentNode;h&&(h.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
f+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),[null,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'];var g=D(q,a);return g?[g]:(b('It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),
[null,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'])},detectWebGL:function(){try{var q=window.WebGLRenderingContext}catch(b){q=[!1,0]}try{var a=D(document.createElement("canvas"))}catch(b){a=[!1,1]}q?a?(q=a,q=[!0,{VERSION:q.getParameter(q.VERSION),SHADING_LANGUAGE_VERSION:q.getParameter(q.SHADING_LANGUAGE_VERSION),VENDOR:q.getParameter(q.VENDOR),RENDERER:q.getParameter(q.RENDERER),
EXTENSIONS:q.getSupportedExtensions(),MAX_TEXTURE_SIZE:q.getParameter(q.MAX_TEXTURE_SIZE),MAX_RENDERBUFFER_SIZE:q.getParameter(q.MAX_RENDERBUFFER_SIZE),MAX_VERTEX_TEXTURE_IMAGE_UNITS:q.getParameter(q.MAX_VERTEX_TEXTURE_IMAGE_UNITS)}]):q=[!1,1]:q=[!1,0];return q}}})},"url:esri/core/request/iframe.html":'\x3c!DOCTYPE html\x3e\r\n\x3chtml\x3e\r\n\x3chead\x3e\r\n  \x3cmeta http-equiv\x3d"Content-Security-Policy" content\x3d"default-src \'none\'; script-src * \'unsafe-inline\'"\x3e\r\n\r\n  \x3cscript\x3e\r\n    var dojoConfig \x3d {\r\n      async: true,\r\n      baseUrl: "../../../dojo/",\r\n      has: {\r\n        "csp-restrictions": true,\r\n        "dojo-preload-i18n-Api": false\r\n      }\r\n    };\r\n  \x3c/script\x3e\r\n  \x3c!--\r\n  This src is relative to this page and assumes dojo is a sibling to esri.\r\n  It is updated when this file is set as the iframe\'s `srcdoc` value.\r\n  --\x3e\r\n  \x3cscript src\x3d"../../../dojo/dojo.js"\x3e\x3c/script\x3e\r\n\r\n  \x3cscript\x3e\r\n    function windowMessageHandler(event) {\r\n      window.removeEventListener("message", windowMessageHandler);\r\n\r\n      var port \x3d event.ports[0];\r\n\r\n      require([\r\n        "dojo/request/script"\r\n      ], function(script) {\r\n        port.postMessage("ready");\r\n\r\n        port.addEventListener("message", function(event) {\r\n          var data \x3d event.data;\r\n          script.get(data.url, data.options)\r\n              .then(function(response) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  response: response\r\n                });\r\n              })\r\n              .otherwise(function(error) {\r\n                port.postMessage({\r\n                  id: data.id,\r\n                  isError: true,\r\n                  message: error.message\r\n                });\r\n              });\r\n        });\r\n        port.start();\r\n      });\r\n    }\r\n\r\n    window.addEventListener("message", windowMessageHandler);\r\n  \x3c/script\x3e\r\n\x3c/head\x3e\r\n\x3cbody\x3e\r\n\x3c/body\x3e\r\n\x3c/html\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR)|| defined(VV_OPACITY)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n      \r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_tlbr;\r\n      attribute vec4 a_aux;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $fillVVUniformsVS\r\n      $fillVVFunctions\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump float u_zoomFactor;\r\n    uniform mediump vec2 u_mosaicSize;\r\n\r\n    varying mediump vec4 v_tlbr;\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n  #ifdef VV_OPACITY\r\n        v_opacity \x3d getVVOpacity(a_vv.y);\r\n  #else\r\n        v_opacity \x3d 1.0;\r\n  #endif\r\n\r\n  #ifdef VV_COLOR\r\n       v_color \x3d getVVColor(a_vv.x, a_color);\r\n  #else\r\n       v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n      v_id \x3d a_id;\r\n  #endif // ID\r\n\r\n  #ifdef PATTERN\r\n       // calculate the pattern matrix\r\n       mat3 patternMatrix \x3d mat3(1.0, 0.0, 0.0,\r\n                                 0.0, 1.0, 0.0,\r\n                                 0.0, 0.0, 1.0);\r\n       patternMatrix[0][0] \x3d 1.0 / (u_zoomFactor * a_aux.x);\r\n       patternMatrix[1][1] \x3d 1.0 / (u_zoomFactor * a_aux.y);\r\n\r\n       // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n       // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from\r\n       // tile coordinates to texture coordinates.\r\n       v_tileTextureCoord \x3d (patternMatrix * vec3(a_pos, 1.0)).xy;\r\n       v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n  #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n      uniform lowp float u_opacity;\r\n\r\n  #ifdef PATTERN\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_tlbr;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp float v_opacity;\r\n\r\n      void main()\r\n      {\r\n  #ifdef PATTERN\r\n         // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n         mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n         // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n         // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n         // we need to only sample from area that has our sprite in the mosaic.\r\n         mediump vec2 samplePos \x3d mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\r\n         // sample the sprite mosaic\r\n         lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n         gl_FragColor \x3d u_opacity * v_opacity * v_color * color;\r\n  #else\r\n        gl_FragColor \x3d u_opacity * v_opacity * v_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef HIGHLIGHT\r\n        gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n  #endif // HIGHLIGHT\r\n\r\n  #ifdef ID\r\n      //if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n      //  discard;\r\n      //}\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      interpolationRatio \x3d clamp(interpolationRatio, 0.0, 1.0);\r\n      return u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    //const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n    const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n    // per quad (instance) attributes (20 bytes \x3d\x3d\x3e equivalent of 5 bytes per vertex)\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_vertexOffset;\r\n    attribute vec4 a_vertexTex;\r\n\r\n    attribute vec4 a_id; // since we need to render the Id as a color we need to break it into RGBA components. so just like a color, the Id is normalized.\r\n    attribute vec4 a_color;\r\n    attribute vec4 a_outlineColor;\r\n    attribute vec4 a_sizeAndOutlineWidth;\r\n\r\n    // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n    // relative to the tile\'s upper left corner\r\n    // the extrusion vector.\r\n    uniform highp mat4 u_transformMatrix;\r\n    // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n    uniform highp mat4 u_extrudeMatrix;\r\n    // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n    uniform highp vec2 u_normalized_origin;\r\n\r\n    // the size of the mosaic given in pixels\r\n    uniform vec2 u_mosaicSize;\r\n\r\n    // the opacity of the layer given by the painter\r\n    uniform mediump float u_opacity;\r\n\r\n    // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n    varying mediump vec2 v_tex;\r\n    // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n    // opacity of the layer given by the painter\r\n    varying lowp float v_transparency;\r\n    // the of the icon given in pixels\r\n    varying mediump vec2 v_size;\r\n\r\n    // icon color. If is a picture-marker it is used to tint the texture color\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    attribute float a_heatmapWeight;\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n    $iconVVUniformsVS\r\n    $iconVVFunctions\r\n\r\n    void main()\r\n    {\r\n      vec2 a_offset \x3d a_vertexOffset;\r\n      vec2 a_tex \x3d a_vertexTex.xy;\r\n      vec2 a_size \x3d a_sizeAndOutlineWidth.xy;\r\n\r\n      // default values (we need them for the variations to come)\r\n      float a_angle \x3d 0.0;\r\n      float delta_z \x3d 0.0;\r\n      float depth \x3d 0.0;\r\n      v_transparency \x3d 1.0;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n      // vv size override the original symbol\'s size\r\n      float h \x3d getVVMinMaxSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n      float h \x3d u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n      float h \x3d getVVStopsSize(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n      float h \x3d getVVUnitValue(a_vv.x, a_size.y);\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n      // make sure to preserve the aspect ratio of the symbol\r\n      vec2 size \x3d vec2(h * a_size.x / a_size.y, h);\r\n      vec2 offset \x3d a_offset * size / a_size;\r\n      v_size \x3d size;\r\n  #else\r\n  #ifdef HEATMAP\r\n      // reconstruct the kernel size\r\n      a_size \x3d 9.0 * a_size + 1.0;\r\n  #endif // HEATMAP\r\n\r\n      vec2 offset \x3d a_offset;\r\n      v_size \x3d a_size;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef SDF\r\n    offset *\x3d 2.0;\r\n  #endif // SDF\r\n\r\n  #ifdef VV_ROTATION\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * getVVRotation(a_vv.w) * vec4(offset, delta_z, 0.0);\r\n  #else\r\n      gl_Position \x3d vec4(u_normalized_origin, depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(offset, delta_z, 0.0);\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_OPACITY\r\n      v_transparency \x3d getVVOpacity(a_vv.z);\r\n  #else\r\n      v_transparency \x3d u_opacity;\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n  #else\r\n      v_color \x3d a_color;\r\n  #endif // VV_COLOR\r\n\r\n      // output the texture coordinates and the transparency\r\n      v_tex \x3d a_tex / u_mosaicSize;\r\n\r\n #ifdef SDF\r\n      v_outlineColor \x3d a_outlineColor;\r\n      v_outlineWidth \x3d a_sizeAndOutlineWidth.z;\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n      v_id \x3d a_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    v_heatmapWeight \x3d a_heatmapWeight;\r\n #endif // HEATMAP\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n   \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    uniform lowp sampler2D u_texture;\r\n\r\n    varying lowp vec2 v_tex;\r\n    varying lowp float v_transparency;\r\n    varying mediump vec2 v_size;\r\n    varying lowp vec4 v_color;\r\n\r\n #ifdef SDF\r\n    varying lowp vec4 v_outlineColor;\r\n    varying mediump float v_outlineWidth;\r\n\r\n    // we need the conversion function from RGBA to float\r\n    $rgba2float\r\n #endif // SDF\r\n\r\n #ifdef ID\r\n    varying highp vec4 v_id;\r\n #endif // ID\r\n\r\n #ifdef HEATMAP\r\n    varying mediump float v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n    const float softEdgeRatio \x3d 1.0; // use blur here if needed\r\n\r\n    void main()\r\n    {\r\n #ifdef SDF\r\n      lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n      // calculate the distance from the edge [-0.5, 0.5]\r\n      float d \x3d 0.5 - rgba2float(texture2D(u_texture, v_tex));\r\n\r\n      // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n      float size \x3d max(v_size.x, v_size.y);\r\n      float dist \x3d d * size * softEdgeRatio;\r\n\r\n      // set the fragment\'s transparency according to the distance from the edge\r\n      fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n      // count for the outline\r\n      // therefore tint the entire icon area.\r\n      if (v_outlineWidth \x3e 0.25) {\r\n        lowp vec4 outlinePixelColor \x3d v_outlineColor;\r\n\r\n        // outlines can\'t be larger than the size of the symbol\r\n        float clampedOutlineSize \x3d min(v_outlineWidth, size);\r\n\r\n        outlinePixelColor *\x3d clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\r\n\r\n        // finally combine the outline and the fill colors (outline draws on top of fill)\r\n        gl_FragColor \x3d v_transparency * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\r\n      }\r\n      else {\r\n        gl_FragColor \x3d v_transparency * fillPixelColor;\r\n      }\r\n #else // not an SDF\r\n      lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n\r\n #ifdef HEATMAP\r\n      texColor.r *\x3d v_heatmapWeight;\r\n #endif // HEATMAP\r\n\r\n      gl_FragColor \x3d v_transparency * texColor;\r\n #endif // SDF\r\n\r\n #ifdef HIGHLIGHT\r\n      gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n #endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n #endif // ID\r\n    }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/labelShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"labelVS"\x3e\r\n  \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n      attribute vec2 a_pos;                  // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_color;                // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset;         // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texAndSize;          // 4 (4 x unsigned byte) texture coordinatesm and font size. w is for the halo size\r\n      attribute vec4 a_refSymbolAndPlacementOffset; // 4 (4 x unsigned byte) the offset of the reference symbol of the feature (x,y) and the placement offset (z, w) all given in pixels\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      attribute mediump vec2 a_visibilityRange; // 2 x unsigned byte;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      // the curent zoom\r\n      uniform mediump float u_zoomLevel; // the current zoom level X 10\r\n      uniform lowp float u_mapRotation;\r\n      uniform lowp float u_mapAligned;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n       uniform mediump float u_fadeStep;\r\n       varying mediump float v_fadeStep;\r\n    #else\r\n       varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // clip the vertex if we are beyond the visibility range of the vertex\r\n        // please note: min value of 0 is regarded infinity. max value of 255 is regarded infinity\r\n        z +\x3d 1.0 + sign(a_visibilityRange.x - u_zoomLevel);\r\n        z +\x3d 1.0 + sign(u_zoomLevel - a_visibilityRange.y);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n        float fontSize \x3d a_texAndSize.z;\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        float mapRotation \x3d u_mapAligned * C_DEG_TO_RAD * -u_mapRotation;\r\n        float sinA \x3d sin(mapRotation);\r\n        float cosA \x3d cos(mapRotation);\r\n\r\n        mat4 mapRotationMat \x3d mat4(cosA, sinA, 0.0, 0.0,\r\n                                  -sinA, cosA, 0.0, 0.0,\r\n                                    0.0,  0.0, 1.0, 0.0,\r\n                                    0.0,  0.0, 0.0, 1.0);\r\n\r\n        vec4 refSymbolOffset \x3d mapRotationMat *  vec4(a_refSymbolAndPlacementOffset.xy, 0.0, 0.0);\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) +\r\n                      u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) +\r\n                      u_extrudeMatrix * vec4(refSymbolOffset.xy + a_refSymbolAndPlacementOffset.zw, 0.0, 0.0) +\r\n                      extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n        v_tex \x3d a_texAndSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.106 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texAndSize.w / fontScale / maxSdfDistance;\r\n\r\n        v_transparency \x3d u_opacity;\r\n\r\n      #ifdef ID\r\n        v_fadeStep \x3d u_fadeStep;\r\n      #else\r\n        v_color \x3d a_color;\r\n      #endif // ID\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"labelFS"\x3e\r\n   \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform mediump sampler2D u_referenceTex;\r\n      uniform mediump vec2 u_screenSize;\r\n      uniform mediump float u_pixelRatio;\r\n\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n    #ifdef ID\r\n      varying mediump float v_fadeStep;\r\n    #else\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec4 v_color;\r\n    #endif // ID\r\n\r\n    const vec3 epsilon \x3d vec3(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);\r\n\r\n      void main()\r\n      {\r\n        mediump vec2 refTextPos \x3d gl_FragCoord.xy / (u_pixelRatio * u_screenSize.xy);\r\n        mediump vec4 referenceFragment \x3d texture2D(u_referenceTex, refTextPos);\r\n    #ifdef ID\r\n        mediump float alpha \x3d clamp(referenceFragment.a + v_fadeStep, 0.0, 1.0);\r\n        // fill the whole quad\r\n        gl_FragColor \x3d vec4(alpha);\r\n    #else\r\n        // read the fade alpha\r\n        lowp float fadeAlpha \x3d referenceFragment.a;\r\n\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float sdfAlpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d fadeAlpha * sdfAlpha * v_transparency * v_color;\r\n    #endif\r\n      }\r\n   ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"thinLineParams"\x3e\r\n     \x3c![CDATA[\r\n    float thinLineHalfWidth \x3d 1.0; // meaning that a 2 pixels line width is considered a thin line\r\n    float thinLineWidthFactor \x3d 1.1;\r\n     ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY)\r\n    attribute vec3 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n    \r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      float f \x3d (sizeValue - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(mix(u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w, f), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) { \r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) { \r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n     precision mediump float;\r\n\r\n     attribute vec2 a_pos;\r\n     attribute vec4 a_id;\r\n     attribute vec4 a_color;\r\n     attribute vec4 a_offsetAndNormal;\r\n     attribute vec2 a_accumulatedDistanceAndHalfWidth;\r\n     attribute vec4 a_tlbr;\r\n     attribute vec4 a_segmentDirection;\r\n\r\n     // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n     // relative to the tile\'s upper left corner\r\n     // the extrusion vector.\r\n     uniform highp mat4 u_transformMatrix;\r\n     // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n     uniform highp mat4 u_extrudeMatrix;\r\n     // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n     uniform highp vec2 u_normalized_origin;\r\n     uniform lowp float u_opacity; // the layer\'s opacity\r\n     uniform mediump float u_zoomFactor;\r\n     uniform mediump float u_antialiasing;\r\n\r\n     // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n     varying mediump vec2 v_normal;\r\n     varying mediump float v_lineHalfWidth;\r\n     varying lowp vec4 v_color;\r\n     varying lowp float v_transparency;\r\n\r\n     const float scale \x3d 1.0 / 31.0;\r\n#ifdef SDF\r\n     const float widthFactor \x3d 2.0;\r\n#else\r\n     const float widthFactor \x3d 1.0;\r\n#endif\r\n\r\n\r\n#ifdef PATTERN\r\n     uniform mediump vec2 u_mosaicSize;\r\n\r\n     varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n     varying mediump vec2 v_patternSize;\r\n#endif // PATTERN\r\n\r\n// we need to accumulated distance only if it is a pattern or an SDF line\r\n#if defined(PATTERN) || defined(SDF)\r\n     varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n     // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n     $lineVVUniformsVS\r\n     $lineVVFunctions\r\n\r\n     void main()\r\n     {\r\n     // size VV block\r\n#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_SIZE_MIN_MAX_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVMinMaxSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n#ifdef VV_SIZE_SCALE_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * u_vvSizeScaleStopsValue;\r\n#endif // VV_SIZE_SCALE_STOPS\r\n\r\n#ifdef VV_SIZE_FIELD_STOPS\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVStopsSize(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_FIELD_STOPS\r\n\r\n#ifdef VV_SIZE_UNIT_VALUE\r\n       mediump float lineHalfWidth \x3d 0.5 * getVVUnitValue(a_vv.x, 2.0 * a_accumulatedDistanceAndHalfWidth.y * scale);\r\n#endif // VV_SIZE_UNIT_VALUE\r\n\r\n#else // no VV\r\n       mediump float lineHalfWidth \x3d a_accumulatedDistanceAndHalfWidth.y * scale;\r\n#endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n#ifdef VV_OPACITY\r\n      v_transparency \x3d u_opacity * getVVOpacity(a_vv.z);\r\n#else\r\n      v_transparency \x3d u_opacity;\r\n#endif // VV_OPACITY\r\n\r\n#ifdef VV_COLOR\r\n      v_color \x3d getVVColor(a_vv.y, a_color);\r\n#else\r\n      v_color \x3d a_color;\r\n#endif // VV_COLOR\r\n\r\n       // make sure to clip the vertices in case that the width of the line is 0 (or negative)\r\n       float z \x3d 2.0 * step(lineHalfWidth, 0.0);\r\n\r\n       // add an antialiasing distance. We use 0.2 rather than 0.5 in order to match the SVG renderer\r\n       // also limit the total line width to 1.3 pixels. Below this value lines don\'t look good compared to the SVG renderer\r\n       lineHalfWidth \x3d max(lineHalfWidth, 0.45) + 0.2 * u_antialiasing;\r\n\r\n       // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n       $thinLineParams\r\n       // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n       // in practice, a thin line is a line who\'s half width vary from 0.45px to the value of thinLineHalfWidth, as the value\r\n       // is claped in line 221 above\r\n       mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n       v_lineHalfWidth \x3d lineHalfWidth;\r\n\r\n       // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n       // sake of using less attribute memory, we need to scale it back to the original range of ~ [0, 1])\r\n       // in a case of a thin line we move each vertex twice as far\r\n       mediump vec2 dist \x3d thinLineFactor * widthFactor * lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n       // transform the vertex\r\n       gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(a_pos, z, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n       v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n       v_accumulatedDistance \x3d a_accumulatedDistanceAndHalfWidth.x + dot(scale * a_segmentDirection.xy, dist / u_zoomFactor);\r\n#endif // PATTERN || SDF\r\n\r\n#ifdef PATTERN\r\n      v_tlbr \x3d vec4(a_tlbr.x / u_mosaicSize.x, a_tlbr.y / u_mosaicSize.y, a_tlbr.z / u_mosaicSize.x, a_tlbr.w / u_mosaicSize.y);\r\n      v_patternSize \x3d vec2(a_tlbr.z - a_tlbr.x, a_tlbr.w - a_tlbr.y);\r\n#endif // PATTERN\r\n\r\n#ifdef ID\r\n      v_id \x3d a_id;\r\n#endif // ID\r\n     }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n       precision lowp float;\r\n\r\n       uniform lowp float u_blur;\r\n       uniform mediump float u_antialiasing;\r\n\r\n       varying mediump vec2 v_normal;\r\n       varying mediump float v_lineHalfWidth;\r\n       varying lowp vec4 v_color;\r\n       varying lowp float v_transparency;\r\n\r\n#if defined(PATTERN) || defined(SDF)\r\n      uniform sampler2D u_texture;\r\n      uniform mediump float u_zoomFactor;\r\n\r\n      varying mediump vec4 v_tlbr; // normalized pattern coordinates [0, 1]\r\n      varying mediump vec2 v_patternSize;\r\n      varying highp float v_accumulatedDistance;\r\n#endif // PATTERN SDF\r\n\r\n#ifdef SDF\r\n      const float sdfPatternHalfWidth \x3d 15.5; // YF: assumed that the width will be set to 31\r\n     const float widthFactor \x3d 2.0;\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n#endif // SDF\r\n\r\n#ifdef ID\r\n     varying highp vec4 v_id;\r\n#endif // ID\r\n\r\n       void main()\r\n       {\r\n         // include the thin line parameters (thinLineHalfWidth and thinLineWidthFactor)\r\n         $thinLineParams\r\n\r\n         // for now assume that a thin line is a line which is under 2 pixels (1 pixels on either sides of the centerline)\r\n         mediump float thinLineFactor \x3d max(thinLineWidthFactor * step(v_lineHalfWidth, thinLineHalfWidth), 1.0);\r\n\r\n         // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n         // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n         // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n         mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n         // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n         // when it is a thin line then use a slightly shallower slope in order to add more feathering\r\n         lowp float alpha \x3d clamp(thinLineFactor * (v_lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\r\n\r\n#if defined(SDF)\r\n         mediump float lineHalfWidth \x3d widthFactor * v_lineHalfWidth;\r\n         mediump float lineWidthRatio \x3d lineHalfWidth / sdfPatternHalfWidth;\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * lineHalfWidth) / (lineWidthRatio * v_patternSize.x), 1.0);\r\n         mediump float relativeTexY \x3d 0.5 + 0.5 * v_normal.y;\r\n\r\n          // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // calculate the distance from the edge [-0.5, 0.5]\r\n         mediump float d \x3d rgba2float(texture2D(u_texture, texCoord)) - 0.5;\r\n\r\n         // the distance is a proportional to the line width\r\n         float dist \x3d d * lineHalfWidth;\r\n\r\n         lowp vec4 fillPixelColor \x3d v_transparency * alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\r\n        gl_FragColor \x3d fillPixelColor;\r\n#elif defined(PATTERN)\r\n         // we need to calculate the relative portion of the line texture along the line given the accumulated distance along the line\r\n         // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n         mediump float relativeTexX \x3d mod((u_zoomFactor * v_accumulatedDistance + v_normal.x * v_lineHalfWidth) / v_patternSize.x, 1.0);\r\n\r\n         // in order to calculate the texture coordinates prependicular to the line (Y axis), we use the interpolated normal values\r\n         // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n         // texture value shpould be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n         // (TL) ---------------------------      --\x3e left edge of line. Interpolatedf normal is 1.0\r\n         //              | -\x3e line-width / 2\r\n         //      - - - - - - - - - - - - - -\r\n         //              | -\x3e line-width / 2\r\n         //      ---------------------------- (BR)--\x3e right edge of line. Interpolatedf normal is -1.0\r\n\r\n         mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / v_patternSize.y);\r\n\r\n         // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n         mediump vec2 texCoord \x3d mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\r\n\r\n         // get the color from the texture\r\n         lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n         gl_FragColor \x3d v_transparency * alpha * v_color * color;\r\n#else // solid line (no texture, no pattern)\r\n         // output the fragment color\r\n         gl_FragColor \x3d v_transparency * alpha * v_color;\r\n#endif // SDF\r\n\r\n#ifdef HIGHLIGHT\r\n         gl_FragColor.a \x3d step(1.0 / 255.0, gl_FragColor.a);\r\n#endif // HIGHLIGHT\r\n\r\n #ifdef ID\r\n         if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n           discard;\r\n         }\r\n         gl_FragColor \x3d v_id;\r\n #endif // ID\r\n       }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link esri/views/2d/engine/webgl/glShaderSnippets glShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n\x3csnippet name\x3d"textVVUniformsVS"\x3e\r\n    \x3c![CDATA[\r\n  #if defined(VV_COLOR) || defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE) || defined(VV_OPACITY) || defined(VV_ROTATION)\r\n    attribute vec4 a_vv;\r\n  #endif // VV_COLOR || VV_SIZE_MIN_MAX_VALUE || VV_SIZE_SCALE_STOPS || VV_SIZE_FIELD_STOPS || VV_SIZE_UNIT_VALUE || VV_OPACITY || VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    uniform float u_vvColorValues[8];\r\n    uniform vec4 u_vvColors[8];\r\n  #endif // VV_COLOR\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    uniform vec4 u_vvSizeMinMaxValue;\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n    uniform float u_vvSizeScaleStopsValue;\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    uniform float u_vvSizeFieldStopsValues[6];\r\n    uniform float u_vvSizeFieldStopsSizes[6];\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    uniform float u_vvSizeUnitValueWorldToPixelsRatio;\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    uniform float u_vvOpacityValues[8];\r\n    uniform float u_vvOpacities[8];\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    uniform lowp float u_vvRotationType;\r\n  #endif // VV_ROTATION\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVVFunctions"\x3e\r\n    \x3c![CDATA[\r\n    bool isNan(float val) {\r\n      return !( val \x3c 0.0 || 0.0 \x3c val || val \x3d\x3d 0.0 );\r\n    }\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n    float getVVMinMaxSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      // we need to multiply by 8 in order to translate to tile coordinates\r\n      float interpolationRatio \x3d (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\r\n      return clamp(u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z), u_vvSizeMinMaxValue.z, u_vvSizeMinMaxValue.w);\r\n    }\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n    const int VV_SIZE_N \x3d 6;\r\n    float getVVStopsSize(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (sizeValue \x3c\x3d u_vvSizeFieldStopsValues[0]) {\r\n        return u_vvSizeFieldStopsSizes[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_SIZE_N; ++i) {\r\n        if (u_vvSizeFieldStopsValues[i] \x3e\x3d sizeValue) {\r\n          float f \x3d (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\r\n          return mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\r\n    }\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n    float getVVUnitValue(float sizeValue, float fallback) {\r\n      if (isNan(sizeValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      return u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\r\n    }\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n  #ifdef VV_OPACITY\r\n    const int VV_OPACITY_N \x3d 8;\r\n    float getVVOpacity(float opacityValue) {\r\n      if (isNan(opacityValue)) {\r\n        return 1.0;\r\n      }\r\n\r\n      if (opacityValue \x3c\x3d u_vvOpacityValues[0]) {\r\n        return u_vvOpacities[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_OPACITY_N; ++i) {\r\n        if (u_vvOpacityValues[i] \x3e\x3d opacityValue) {\r\n          float f \x3d (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\r\n          return mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvOpacities[VV_OPACITY_N - 1];\r\n    }\r\n  #endif // VV_OPACITY\r\n\r\n  #ifdef VV_ROTATION\r\n    mat4 getVVRotation(float rotationValue) {\r\n      // YF TODO: if the symbol has rotation we need to combine the symbo\'s rotation with the VV one\r\n      if (isNan(rotationValue)) {\r\n        return mat4(1, 0, 0, 0,\r\n                    0, 1, 0, 0,\r\n                    0, 0, 1, 0,\r\n                    0, 0, 0, 1);\r\n      }\r\n\r\n      float rotation \x3d rotationValue;\r\n      if (u_vvRotationType \x3d\x3d 1.0) {\r\n        rotation \x3d 90.0 - rotation;\r\n      }\r\n\r\n      float angle \x3d C_DEG_TO_RAD * rotation;\r\n\r\n      float sinA \x3d sin(angle);\r\n      float cosA \x3d cos(angle);\r\n\r\n      return mat4(cosA, sinA, 0, 0,\r\n                  -sinA,  cosA, 0, 0,\r\n                  0,     0, 1, 0,\r\n                  0,     0, 0, 1);\r\n    }\r\n  #endif // VV_ROTATION\r\n\r\n  #ifdef VV_COLOR\r\n    const int VV_COLOR_N \x3d 8;\r\n\r\n    vec4 getVVColor(float colorValue, vec4 fallback) {\r\n      if (isNan(colorValue)) {\r\n        return fallback;\r\n      }\r\n\r\n      if (colorValue \x3c\x3d u_vvColorValues[0]) {\r\n        return u_vvColors[0];\r\n      }\r\n\r\n      for (int i \x3d 1; i \x3c VV_COLOR_N; ++i) {\r\n        if (u_vvColorValues[i] \x3e\x3d colorValue) {\r\n          float f \x3d (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\r\n          return mix(u_vvColors[i-1], u_vvColors[i], f);\r\n        }\r\n      }\r\n\r\n      return u_vvColors[VV_COLOR_N - 1];\r\n    }\r\n  #endif // VV_COLOR\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n\r\n      attribute vec2 a_pos;           // 2 * 2 (2 x signed 16)\r\n      attribute vec4 a_id;            // 4 (4 x unsigned byte)\r\n      attribute vec4 a_color;         // 4 (4 x unsigned byte)\r\n      attribute vec2 a_vertexOffset; // 2 * 2 // (2 x signed 16) offset from the anchor point of the string\r\n      attribute vec4 a_texFontSize; // 4 (4 x unsigned byte) texture coordinatesm and font size\r\n\r\n      attribute lowp float  a_visible; // a one byte controlling the visibility of the vertex (a separate visibility buffer), values are 0 or 1 (visible)\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n      uniform float u_pixelRatio;\r\n\r\n      // the opacity of the layer\r\n      uniform mediump float u_opacity;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precission we multiply the values\r\n      // by 16 and then at the shader devide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n      const float outlineScale \x3d 1.0 / 10.0;\r\n      const float sdfFontSize \x3d 24.0;\r\n\r\n      // maximum SDF distance of 8 pixels represent the distance values that range from -2 inside the geometry to 6 on the outside.\r\n      // 6 is actually the maximum distance outside the glyph, therefore it is the limitation of the halo which is 1/4 of the geometry size.\r\n      const float maxSdfDistance \x3d 8.0;\r\n\r\n  #ifdef ID\r\n    varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      // import the VV inputs and functions (they are #ifdefed, so if the proper #define is not set it will end-up being a no-op)\r\n      $textVVUniformsVS\r\n      $textVVFunctions\r\n\r\n      void main()\r\n      {\r\n        // make sure to clip the vertices in case that given record is marked as invisible\r\n        float z \x3d 2.0 * (1.0 - a_visible);\r\n\r\n        // we use the list significant bit of the position in order to store the indication whethe the vertex is of a halow of a glyph\r\n        mediump float halo \x3d mod(a_pos, 2.0).x;\r\n\r\n  #if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n  #ifdef VV_SIZE_MIN_MAX_VALUE\r\n        // vv size override the original symbol\'s size\r\n        vec2 size \x3d vec2(getVVMinMaxSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_MIN_MAX_VALUE\r\n\r\n  #ifdef VV_SIZE_SCALE_STOPS\r\n        vec2 size \x3d vec2(u_vvSizeScaleStopsValue);\r\n  #endif // VV_SIZE_SCALE_STOPS\r\n\r\n  #ifdef VV_SIZE_FIELD_STOPS\r\n        vec2 size \x3d vec2(getVVStopsSize(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_FIELD_STOPS\r\n\r\n  #ifdef VV_SIZE_UNIT_VALUE\r\n        vec2 size \x3d vec2(getVVUnitValue(a_vv.x, a_texFontSize.z));\r\n  #endif // VV_SIZE_UNIT_VALUE\r\n\r\n        float fontSize \x3d size.x;\r\n  #else // this generic case, no VV\r\n        float fontSize \x3d a_texFontSize.z;\r\n  #endif // defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\r\n\r\n        float fontScale \x3d fontSize / sdfFontSize;\r\n        // we need to scale the extrude matrix by the font-scale in order to get the right text size\r\n        mat4 extrudeMatrix \x3d fontScale * u_extrudeMatrix;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        //gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n\r\n    #ifdef VV_ROTATION\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * getVVRotation(a_vv.w) * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #else\r\n        gl_Position \x3d vec4(u_normalized_origin, 0.0, 0.0) + u_transformMatrix * vec4(floor(a_pos * 0.5), z, 1.0) + extrudeMatrix * vec4(offsetPrecision * a_vertexOffset, 0.0, 0.0);\r\n    #endif // VV_ROTATION\r\n\r\n        v_tex \x3d a_texFontSize.xy / u_mosaicSize;\r\n        v_antialiasingWidth \x3d 0.105 * sdfFontSize / fontSize / u_pixelRatio;\r\n        // if halo.x is zero (not a halo) v_edgeDistanceOffset will end up being zero as well.\r\n        v_edgeDistanceOffset \x3d halo * outlineScale * a_texFontSize.w / fontScale / maxSdfDistance;\r\n\r\n    #ifdef VV_OPACITY\r\n        v_transparency \x3d getVVOpacity(a_vv.z);\r\n    #else\r\n        v_transparency \x3d u_opacity;\r\n    #endif // VV_OPACITY\r\n\r\n    #ifdef VV_COLOR\r\n       // we don\'t want to override the halo color\r\n       v_color \x3d halo * a_color + (1.0 - halo) * getVVColor(a_vv.y, a_color);\r\n    #else\r\n        v_color \x3d a_color;\r\n    #endif // VV_COLOR\r\n\r\n  #ifdef ID\r\n        v_id \x3d a_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      uniform lowp sampler2D u_texture;\r\n\r\n      varying mediump vec4 v_color;\r\n      varying mediump float v_antialiasingWidth;\r\n      varying mediump float v_edgeDistanceOffset;\r\n      varying mediump vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n\r\n  #ifdef ID\r\n      varying highp vec4 v_id;\r\n  #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // the edge distance if a factor of the outline width\r\n        float glyphEdgeDistance \x3d 0.75 - v_edgeDistanceOffset;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        lowp float alpha \x3d smoothstep(glyphEdgeDistance - v_antialiasingWidth, glyphEdgeDistance + v_antialiasingWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n  #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/backgroundShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform lowp vec4 u_color;\r\n    void main() {\r\n      gl_FragColor \x3d u_color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/bitblitShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"bitblitVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n    attribute vec2 a_tex;\r\n\r\n    varying mediump vec2 v_uv;\r\n\r\n    void main(void) {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n      v_uv \x3d a_tex;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"bitblitFS"\x3e\r\n  \x3c![CDATA[\r\n    \tuniform lowp sampler2D u_tex;\r\n      uniform lowp float u_opacity;\r\n\r\n      varying mediump vec2 v_uv;\r\n\r\n      void main() {\r\n        lowp vec4 color \x3d texture2D(u_tex, v_uv);\r\n\r\n        // Note: output in pre-multiplied alpha for correct alpha compositing\r\n        gl_FragColor \x3d color *  u_opacity;\r\n      }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/stencilShaders.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"stencilVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(a_pos, 0.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"stencilFS"\x3e\r\n  \x3c![CDATA[\r\n    void main() {\r\n      gl_FragColor \x3d vec4(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/tileInfo.xml":'\x3csnippets\x3e\r\n  \x3csnippet name\x3d"tileInfoVS"\x3e\r\n  \x3c![CDATA[\r\n    attribute vec2 a_pos;\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_depth;\r\n    uniform mediump float u_coord_ratio;\r\n    uniform mediump vec2 u_delta; // in tile coordinates\r\n    uniform mediump vec2 u_dimensions; // in tile coordinates\r\n\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main() {\r\n      mediump vec2 offests \x3d u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(offests, 0.0, 1.0);\r\n\r\n      v_tex \x3d a_pos;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"tileInfoFS"\x3e\r\n  \x3c![CDATA[\r\n    uniform mediump sampler2D u_texture;\r\n    varying mediump vec2 v_tex;\r\n\r\n    void main(void) {\r\n      lowp vec4 color \x3d texture2D(u_texture, v_tex);\r\n      gl_FragColor \x3d 0.75 * color;\r\n    }\r\n  ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/2d/engine/webgl/shaders/hlShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Highlight generation and rendering shaders.\r\n\r\n  These shader sources are loaded by hlShaderSnippets.ts which in turn\r\n  is used by HighlightRenderer to instantiate the programs needed for\r\n  generating and rendering the highlights.\r\n\r\n  These shaders are intended to be used with full screen quads.\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3c!--\r\n    Vertex shader: texturedVS\r\n\r\n    Identity vertex shader that outputs an untransformed 2-D vertex\r\n    and passes its texture coordinates unchanged to the interpolator.\r\n  --\x3e\r\n  \x3csnippet name\x3d"texturedVS"\x3e\r\n    \x3c![CDATA[\r\n    // Vertex position.\r\n    attribute mediump vec2 a_position;\r\n\r\n    // Texture coordinates.\r\n    attribute mediump vec2 a_texcoord;\r\n\r\n    // Texture coordinates to be interpolated.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    void main(void) {\r\n      // Pass the position unchanged.\r\n      gl_Position \x3d vec4(a_position, 0.0, 1.0);\r\n\r\n      // Pass the texture coordinates unchanged.\r\n      v_texcoord \x3d a_texcoord;\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: blurFS\r\n\r\n    A gaussian blur shader. It blurs the alpha channel of its input\r\n    according to 4 different sigma and stores the results into the\r\n    four channel of the target framebuffer.\r\n\r\n    It is intended to be called twice; the first time to perform an\r\n    horizontal blur, and a second time to perform a vertical blur.\r\n\r\n    This shader is used to turn the highlight mask into a highlight\r\n    map. The highlight map is an approximation of the signed distance\r\n    field of the mask.\r\n  --\x3e\r\n  \x3csnippet name\x3d"blurFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // Blur direction information. There are two possible\r\n    // configurations that the host code can use.\r\n    //  - [1, 0, 1/WIDTH, 0] Used when blurring horizontally. In this\r\n    //    case u_direction[0] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[2] \x3d 1/WIDTH is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    //  - [0, 1, 0, 1/HEIGHT] Used when blurring vertically. In this\r\n    //    case u_direction[1] \x3d 1 is expressed in pixel and is fed to\r\n    //    the gauss function to produce the value of the gaussian weight\r\n    //    for that pixel, while u_direction[3] \x3d 1/HEIGHT is in texel units\r\n    //    and is used to sample the right texel from the texture map.\r\n    uniform mediump vec4 u_direction;\r\n\r\n    // Source to destination channel selection matrix.\r\n    uniform mediump mat4 u_channelSelector;\r\n\r\n    // The highlight map is obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // This is the highlight mask if we have not blurred horizontally yet, otherwise\r\n    // it is the horizontally blurred highlight map and blurring it one more time\r\n    // vertically will complete the process.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The gaussian kernel. Note that it lacks the normalization constant, because\r\n    // we want to store it unnormalized in the highlight map (i.e. having a peak\r\n    // value of 1). Note also that we are using the SIMD (single instruction, multiple\r\n    // data) capabilities of the GPU to compute four different gaussian kernels, one\r\n    // for each sigma.\r\n    mediump vec4 gauss(mediump vec2 dir) {\r\n      return exp(-dot(dir, dir) / (2.0 * u_sigmas * u_sigmas));\r\n    }\r\n\r\n    mediump vec4 selectChannel(mediump vec4 sample) {\r\n      return u_channelSelector * sample;\r\n    }\r\n\r\n    // Sample the input texture and accumulated its gaussian weighted value and the\r\n    // total weight.\r\n    void accumGauss(mediump float i, inout mediump vec4 tot, inout mediump vec4 weight) {\r\n      // Computes the gaussian weights, one for each sigma.\r\n      // Note that u_direction.xy is [1, 0] when blurring horizontally and [0, 1] when blurring vertically.\r\n      mediump vec4 w \x3d gauss(i * u_direction.xy);\r\n\r\n      // Accumumates the values.\r\n      // Note that u_direction.xy is [1/WIDTH, 0] when blurring horizontally and [0, 1/HEIGHT] when blurring vertically.\r\n      tot +\x3d selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw)) * w;\r\n\r\n      // Accumulates the weights.\r\n      weight +\x3d w;\r\n    }\r\n\r\n    void main(void) {\r\n      // Initialize accumulated values and weights to zero.\r\n      mediump vec4 tot \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n      mediump vec4 weight \x3d vec4(0.0, 0.0, 0.0, 0.0);\r\n\r\n      // Accumulates enough samples. These will be taken\r\n      // horizontally or vertically depending on the value\r\n      // of u_direction.\r\n      accumGauss(-5.0, tot, weight);\r\n      accumGauss(-4.0, tot, weight);\r\n      accumGauss(-3.0, tot, weight);\r\n      accumGauss(-2.0, tot, weight);\r\n      accumGauss(-1.0, tot, weight);\r\n      accumGauss(0.0, tot, weight);\r\n      accumGauss(1.0, tot, weight);\r\n      accumGauss(2.0, tot, weight);\r\n      accumGauss(3.0, tot, weight);\r\n      accumGauss(4.0, tot, weight);\r\n      accumGauss(5.0, tot, weight);\r\n\r\n      // Compute blurred values.\r\n      mediump vec4 rgba \x3d tot / weight;\r\n\r\n      // Return the values. Note that each channel will contain\r\n      // the result of a different blur operation, one for each\r\n      // of the four chosen sigma.\r\n      gl_FragColor \x3d vec4(rgba);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3c!--\r\n    Fragment shader: highlightFS\r\n\r\n    Takes as input the highlight map, estimated the signed distance field,\r\n    and shades the fragments according to their estimated distance from the\r\n    edge of the highlighted feature.\r\n\r\n    A shade texture is used to turn distance values into colors; the shade\r\n    texture is basically a color gradient and is recomputed on the host\r\n    every time that the user alters the highlight options.\r\n  --\x3e\r\n  \x3csnippet name\x3d"highlightFS"\x3e\r\n    \x3c![CDATA[\r\n    // Interpolated texture coordinates.\r\n    varying mediump vec2 v_texcoord;\r\n\r\n    // The highlight map. Each channel is a blurred\r\n    // version of the alpha channel of the highlight mask.\r\n    //  - Channel 0 (red) corresponds to a gaussian blur with sigma \x3d u_sigmas[0];\r\n    //  - Channel 1 (green) corresponds to a gaussian blur with sigma \x3d u_sigmas[1];\r\n    //  - Channel 2 (blue) corresponds to a gaussian blur with sigma \x3d u_sigmas[2];\r\n    //  - Channel 3 (alpha) corresponds to a gaussian blur with sigma \x3d u_sigmas[3];\r\n    // As of today, only channel 3 is used for distance estimation.\r\n    // But the availability of different amounts of blur leaves the\r\n    // door open to multi-scale approaches.\r\n    uniform sampler2D u_texture;\r\n\r\n    // The highlight map was obtained by blurring the alpha channel of the highlight\r\n    // mask accroding to these 4 values of the gaussian\'s sigma parameter.\r\n    uniform mediump vec4 u_sigmas;\r\n\r\n    // A 1-D texture used to shade the highlight.\r\n    uniform sampler2D u_shade;\r\n\r\n    // The 1-D shade texture is spreaded between u_minMaxDistance[0] and u_minMaxDistance[1].\r\n    uniform mediump vec2 u_minMaxDistance;\r\n\r\n    // Signed distance estimation.\r\n    mediump float estimateDistance() {\r\n      // Use the largest sigma and the corresponding distance value stored in the\r\n      // last channel of the highlight map.\r\n      mediump float sigma \x3d u_sigmas[3];\r\n      mediump float y \x3d texture2D(u_texture, v_texcoord)[3];\r\n\r\n      // Estimates the distance by linearization and local inversion around\r\n      // the inflection point. The inflection point is in x \x3d 0.\r\n      const mediump float y0 \x3d 0.5;                           // Value of the convolution at the inflection point.\r\n      mediump float m0 \x3d 1.0 / (sqrt(2.0 * 3.1415) * sigma);  // Slope of the convolution at the inflection point.\r\n      mediump float d \x3d (y - y0) / m0;                        // Inversion of a local linearization.\r\n\r\n      // Return the estimated distance.\r\n      return d;\r\n    }\r\n\r\n    // Shading based on estimated distance.\r\n    mediump vec4 shade(mediump float d) {\r\n      // Maps the sampled distance from the [A, D] range (see HighlightRenderer::setHighlightOptions) to [0, 1].\r\n      mediump float mappedDistance \x3d (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\r\n\r\n      // Force to [0, 1]; it should not be necessary because the shade texture uses the CLAMP address mode, so\r\n      // this should happen anyway internally to the sampler, but in practice it is needed to avoid weird\r\n      // banding artifacts.\r\n      // We don\'t really know if we need this or not.\r\n      mappedDistance \x3d clamp(mappedDistance, 0.0, 1.0);\r\n\r\n      // Sample the 1-D shade texture on its center line (i.e. on t\x3d0.5).\r\n      return texture2D(u_shade, vec2(mappedDistance, 0.5));\r\n    }\r\n\r\n    void main(void) {\r\n      // Estimate the distance.\r\n      mediump float d \x3d estimateDistance();\r\n\r\n      // Shade the distance.\r\n      gl_FragColor \x3d shade(d);\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/backgroundShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"backgroundVS"\x3e\r\n    \x3c![CDATA[\r\n    precision mediump float;\r\n\r\n    attribute vec2 a_pos;\r\n\r\n  #ifdef ID\r\n    uniform mediump vec4 u_id;\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    uniform highp mat4 u_transformMatrix;\r\n    uniform mediump vec2 u_normalized_origin;\r\n    uniform mediump float u_coord_range;\r\n    uniform mediump float u_depth;\r\n\r\n  #ifdef PATTERN\r\n    uniform mediump mat3 u_pattern_matrix; // can we use medium precision?\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #endif // PATTERN\r\n\r\n    void main() {\r\n      gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(u_coord_range * a_pos, 0.0, 1.0);\r\n\r\n  #ifdef PATTERN\r\n      // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n      // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n      v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      v_id \x3d u_id / 255.0;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"backgroundFS"\x3e\r\n    \x3c![CDATA[\r\n  #ifdef PATTERN\r\n    uniform lowp float u_opacity;\r\n    uniform mediump vec2 u_pattern_tl;\r\n    uniform mediump vec2 u_pattern_br;\r\n    uniform sampler2D u_texture;\r\n\r\n    varying mediump vec2 v_tileTextureCoord;\r\n  #else\r\n    uniform lowp vec4 u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n    varying mediump vec4 v_id;\r\n  #endif // ID\r\n\r\n    void main() {\r\n  #ifdef PATTERN\r\n      // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n      mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n      // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n      // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n      // we need to only sample from area that has our sprite in the mosaic.\r\n      mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n      // sample the sprite mosaic\r\n      lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n      gl_FragColor \x3d u_opacity * color;\r\n  #else\r\n      gl_FragColor \x3d u_color;\r\n  #endif // PATTERN\r\n\r\n  #ifdef ID\r\n      if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n        discard;\r\n      }\r\n      gl_FragColor \x3d v_id;\r\n  #endif // ID\r\n    }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/circleShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"circleVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_color;\r\n      attribute vec4 a_stroke_color;\r\n      attribute vec4 a_data;\r\n\r\n      const float sizePrecision \x3d 0.25; // 1/4\r\n      const float blurPrecision \x3d 0.03125; // 1/32\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_radius;\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_stroke_width;\r\n      uniform lowp vec4 u_stroke_color;\r\n\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      void main()\r\n      {\r\n        v_color \x3d a_color * u_color;\r\n        v_stroke_color \x3d a_stroke_color * u_stroke_color;\r\n        v_stroke_width \x3d a_data[1] * sizePrecision * u_stroke_width;\r\n        v_radius \x3d a_data[2] * u_radius;\r\n        v_blur \x3d max(a_data[0] * blurPrecision + u_blur, u_antialiasingWidth / (v_radius + v_stroke_width));\r\n\r\n        mediump vec2 offset \x3d vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\r\n        v_offset \x3d offset;\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos * 0.5, 0.0, 1.0) + u_extrudeMatrix * (v_radius + v_stroke_width) * vec4(offset, 0.0, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"circleFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n      varying lowp vec4 v_color;\r\n      varying lowp vec4 v_stroke_color;\r\n      varying mediump float v_blur;\r\n      varying mediump float v_stroke_width;\r\n      varying mediump float v_radius;\r\n      varying mediump vec2 v_offset;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        mediump float dist \x3d length(v_offset);\r\n\r\n        mediump float alpha \x3d smoothstep(0.0, -v_blur, dist - 1.0);\r\n\r\n        lowp float color_mix_ratio \x3d v_stroke_width \x3c 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\r\n\r\n        gl_FragColor \x3d alpha * mix(v_color, v_stroke_color, color_mix_ratio);\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/fillShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"fillVS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      attribute vec2 a_pos;\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump mat3 u_pattern_matrix;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n      #ifdef PATTERN\r\n        // calculate the texture coordinates of the current vertex. It will of course get interpolated.\r\n        // The pattern matrix is a 3x3 scale matrix which \'tiles\' the texture inside the tile, translating from tile coordinates\r\n        // (-4k to 8k -1) to texture coordinates.\r\n        v_tileTextureCoord \x3d (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\r\n      #endif // PATTERN\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0, 1.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"fillFS"\x3e\r\n    \x3c![CDATA[\r\n      precision lowp float;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform lowp sampler2D u_texture;\r\n      varying mediump vec2 v_tileTextureCoord;\r\n    #endif // PATTERN\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n      void main()\r\n      {\r\n      #ifdef PATTERN\r\n        // normalize the calculated texture coordinate such that it fits in the range of 0 to 1.\r\n        mediump vec2 normalizedTextureCoord \x3d mod(v_tileTextureCoord, 1.0);\r\n\r\n        // interpolate the image coordinate between the top-left and the bottom right to get the actual position to sample.\r\n        // after normalizing the position, we get a value ranging between 0 and 1 which refers to the entire texture, however\r\n        // we need to only sample from area that has our sprite in the mosaic.\r\n        mediump vec2 samplePos \x3d mix(u_pattern_tl, u_pattern_br, normalizedTextureCoord);\r\n\r\n        // sample the sprite mosaic\r\n        lowp vec4 color \x3d texture2D(u_texture, samplePos);\r\n        gl_FragColor \x3d v_color[3] * color;\r\n      #else\r\n        gl_FragColor \x3d v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/iconShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO consider moving this snippet into a util.xml file\r\n    const vec4 rgba2float_factors \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, rgba2float_factors);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying mediump vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader devide by the same number\r\n      const float C_OFFSET_PRECISION \x3d 1.0 / 8.0;\r\n\r\n      const float C_256_TO_RAD \x3d 3.14159265359 / 128.0;\r\n      const float C_DEG_TO_RAD \x3d 3.14159265359 / 180.0;\r\n      const float tileCoordRatio \x3d 1.0 / 8.0;\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle         \x3d a_levelInfo[1];\r\n        mediump float a_minLevel      \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel      \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label had been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        vec2 offset \x3d C_OFFSET_PRECISION * a_vertexOffset;\r\n\r\n        v_size \x3d abs(offset);\r\n\r\n      #ifdef SDF\r\n        offset \x3d (120.0 / 86.0) * offset;\r\n      #endif // SDF\r\n\r\n      #ifdef DD\r\n        mediump float icon_size \x3d a_size * u_size;\r\n      #else\r\n        mediump float icon_size \x3d u_size;\r\n      #endif // DD\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * icon_size * vec4(offset, delta_z, 0.0);\r\n\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n        v_transparency *\x3d v_color.w;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"iconFS"\x3e\r\n    \x3c![CDATA[\r\n      precision mediump float;\r\n\r\n      uniform lowp sampler2D u_texture; // SDF texture\r\n    #ifdef SDF\r\n      uniform lowp vec4 u_color; // a color to override the one of the vertex\r\n      uniform lowp vec4 u_outlineColor;\r\n      uniform mediump float u_outlineSize;\r\n    #endif // SDF\r\n\r\n      varying mediump vec2 v_tex;\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      varying mediump vec2 v_size;\r\n\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // we need the conversion function from RGBA to float\r\n      $rgba2float\r\n\r\n      vec4 mixColors(vec4 color1, vec4 color2) {\r\n        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)\r\n        // we use pre-multiplied colors hence the need for this kind of mixing. At lease we save ourselves an extra division...\r\n        float compositeAlpha \x3d color2.a + color1.a * (1.0 - color2.a);\r\n        vec3 compositeColor \x3d color2.rgb + color1.rgb * (1.0 - color2.a);\r\n\r\n        return vec4(compositeColor, compositeAlpha);\r\n      }\r\n\r\n      void main()\r\n      {\r\n      #ifdef SDF\r\n        lowp vec4 fillPixelColor \x3d v_color;\r\n\r\n        // calculate the distance from the edge [-0.5, 0.5]\r\n        float d \x3d rgba2float(texture2D(u_texture, v_tex)) - 0.5;\r\n\r\n        // the soft edge ratio is about 1.5 pixels allocated for the soft edge.\r\n        // 1 / 86 represents a single pixel given the size of the SDF is 128 and we add 4 pixels margins to deal with\r\n        // other non SDF types.\r\n        // The rasterized geometry takes only 86 pixels because of the extra 16 pixels margin for the outline.\r\n        const float sofetEdgeRatio \x3d 0.248062016; // \x3d\x3d\x3e (32.0 / 86.0) / 1.5;\r\n        float size \x3d max(v_size.x, v_size.y);\r\n        float dist \x3d d * sofetEdgeRatio * size;\r\n\r\n        // set the fragment\'s transparency according to the distance from the edge\r\n        fillPixelColor *\x3d clamp(0.5 - dist, 0.0, 1.0);\r\n\r\n        // count for the outline\r\n        // therefore tint the entire icon area.\r\n        if (u_outlineSize \x3e 0.25) {\r\n          lowp vec4 outlinePixelColor \x3d u_outlineColor;\r\n          // the outline limit ratio is derived from the 16 pixels allocated for the outline and the fact that 1/86 represents\r\n          // a single pixel.\r\n          const float outlineLimitRatio \x3d (16.0 / 86.0);\r\n          float clampedOutlineSize \x3d sofetEdgeRatio * min(u_outlineSize, outlineLimitRatio * max(v_size.x, v_size.y));\r\n\r\n          outlinePixelColor *\x3d clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\r\n\r\n          // finally combine the outline and the fill colors\r\n          gl_FragColor \x3d v_transparency * mixColors(fillPixelColor, outlinePixelColor);\r\n        }\r\n        else {\r\n          gl_FragColor \x3d v_transparency * fillPixelColor;\r\n        }\r\n      #else // not an SDF\r\n        lowp vec4 texColor \x3d texture2D(u_texture, v_tex);\r\n        gl_FragColor \x3d v_transparency * texColor;\r\n      #endif // SDF\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/lineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"lineVS"\x3e\r\n    \x3c![CDATA[\r\n      /* The implementation of the renderer is based on the article and implementation of MB described here:\r\n      * https://www.mapbox.com/blog/drawing-antialiased-lines/\r\n      */\r\n\r\n      attribute vec2 a_pos;\r\n      attribute vec4 a_offsetAndNormal;\r\n      attribute vec2 a_accumulatedDistance;\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      uniform mediump float u_blur;\r\n      uniform mediump float u_antialiasing; // the feather distance at which the line edge fades out\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the interpolated normal to the line. the information is packed into the two LSBs of the vertex coordinate\r\n      varying mediump vec2 v_normal;\r\n\r\n      // the accumulated distance along the line. We need this information in order to render the dashes.\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      const float scale \x3d 1.0 / 31.0;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n      attribute mediump float a_width;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      uniform mediump float u_width;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_lineHalfWidth; // the inset and outset of the line\r\n      varying mediump float v_blur;\r\n\r\n    #ifndef PATTERN\r\n      uniform mediump vec2 u_dasharray;\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n      void main()\r\n      {\r\n        v_normal \x3d a_offsetAndNormal.zw * scale;\r\n\r\n      #ifdef DD\r\n        v_lineHalfWidth \x3d a_width * u_width;\r\n      #else\r\n        v_lineHalfWidth \x3d u_width;\r\n      #endif // DD\r\n\r\n        v_lineHalfWidth +\x3d u_antialiasing;\r\n        v_lineHalfWidth *\x3d 0.5;\r\n\r\n      #ifndef PATTERN\r\n      #ifdef DD\r\n        v_dasharray \x3d u_dasharray * a_width;\r\n      #else\r\n        v_dasharray \x3d u_dasharray * u_width;\r\n      #endif // DD\r\n      #endif\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec2 dist \x3d v_lineHalfWidth * a_offsetAndNormal.xy * scale;\r\n\r\n        // transform the vertex\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * vec4(dist, 0.0, 0.0);\r\n\r\n        // the accumulated distance will be used to calculate the dashes (or the no-data...)\r\n        v_accumulatedDistance \x3d a_accumulatedDistance.x;\r\n\r\n        v_blur \x3d u_blur + u_antialiasing;\r\n\r\n        #ifdef DD\r\n          v_color \x3d a_color * u_color;\r\n        #else\r\n          v_color \x3d u_color;\r\n        #endif // DD\r\n\r\n        #ifdef ID\r\n          v_id \x3d u_id / 255.0;\r\n        #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"lineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying mediump vec2 v_normal;\r\n      varying highp float v_accumulatedDistance;\r\n\r\n      varying mediump float v_lineHalfWidth;\r\n      varying lowp vec4 v_color;\r\n\r\n      varying mediump float v_blur;\r\n\r\n    #ifdef PATTERN\r\n      uniform mediump vec2 u_pattern_tl;\r\n      uniform mediump vec2 u_pattern_br;\r\n      uniform mediump vec2 u_spriteSize;\r\n      uniform sampler2D u_texture;\r\n\r\n      // Horizontal scale is used to scale the horizontal texture coordinate v_normal.x before adding it as an offset to the\r\n      // accumulated distance. Most vertices will have v_normal.x \x3d\x3d 0, because the pattern must be sampled only depending on\r\n      // the v_accumulatedDistance value. But tessellation at caps can have vertices with v_normal.x !\x3d 0, thus allowing to\r\n      // "keep moving" for a few more pixel even when the line has ended or has not started yet.\r\n      const mediump float tileCoordRatio \x3d 8.0;\r\n    #else\r\n      varying mediump vec2 v_dasharray;\r\n    #endif\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // dist represent the distance of the fragment from the line. 1.0 or -1.0 will be the values on the edge of the line,\r\n        // and any value in between will be inside the line (the sign represent the direction - right or left).\r\n        // since u_linewidth.s (half line width) is represented in pixels, dist is also given in pixels\r\n        mediump float fragDist \x3d length(v_normal) * v_lineHalfWidth;\r\n\r\n        // calculate the alpha given the difference between the line-width and the distance of the fragment from the center-line.\r\n        // We need to count for both sides of the line.\r\n        lowp float alpha \x3d clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\r\n\r\n      #ifdef PATTERN\r\n        // we need to calculate the relative portion of the line texture along the line given the accumulated distance aliong the line\r\n        // The computed value should is anumber btween 0 and 1 which will later be used to interpolate btween the BR and TL values\r\n        mediump float relativeTexX \x3d mod((v_accumulatedDistance + v_normal.x * v_lineHalfWidth * tileCoordRatio) / u_spriteSize.x, 1.0);\r\n\r\n        // in order to calculate the texture coordinates perpendicular to the line (Y axis), we use the interpolated normal values\r\n        // which range from -1.0 to 1.0. On the line\'s centerline, the value of the interpolated normal is 0.0, however the relative\r\n        // texture value should be 0.5 (given that at the bottom of the line, the texture coordinate must be equal to 0.0)\r\n        // (TL) ---------------------------      --\x3e left edge of line. Interpolated normal is 1.0\r\n        //              | -\x3e line-width / 2\r\n        //      - - - - - - - - - - - - - -\r\n        //              | -\x3e line-width / 2\r\n        //      ---------------------------- (BR)--\x3e right edge of line. Interpolated normal is -1.0\r\n\r\n        mediump float relativeTexY \x3d 0.5 + (v_normal.y * v_lineHalfWidth / u_spriteSize.y);\r\n\r\n        // claculate the actual texture coordinates by interpolating between the TL/BR pattern coordinates\r\n        mediump vec2 texCoord \x3d mix(u_pattern_tl, u_pattern_br, vec2(relativeTexX, relativeTexY));\r\n\r\n        // get the color from the texture\r\n        lowp vec4 color \x3d texture2D(u_texture, texCoord);\r\n\r\n        // finally write the fragment value\r\n        gl_FragColor \x3d alpha * v_color[3] * color;\r\n      #else\r\n        // now calculate the dashes given the accumulated distance of the line:\r\n        // start with calculating a normalized position along the line\r\n        lowp float dashPos \x3d  mod(v_accumulatedDistance, v_dasharray.x + v_dasharray.y);\r\n\r\n        // calculate the contribution to the alpha of the dash part. It is provided by the shortest portion of the position along the dash.\r\n        // we must clamp since the value might be bigger than 1 or smaller than zero (when over a dash).\r\n        //   | \x3c--- pos along the dash part\r\n        // -------_______-------_______\r\n        // when the dashPos is over the \'gap\' part of the dash dasharray.x - dashPos is negative and therefore the alpha will\r\n        // get clamped to zero.\r\n        // when dasharray.x - dashPos is positive, or when dashPos is smaller than 1.0, it gives us a soft edge to each dash part.\r\n        // along the direction of the line.\r\n        lowp float dashAlpha \x3d clamp(min(dashPos, v_dasharray.x - dashPos) + 0.5, 0.0, 1.0);\r\n\r\n        // if we don\'t have a no-data part to the dash then it is a solid line\r\n        dashAlpha \x3d max(sign(-v_dasharray.y), dashAlpha);\r\n        // finally multiply the fragment\'s alpha by the calculated dash-alpha\r\n        alpha *\x3d dashAlpha;\r\n\r\n        // output the fragment color\r\n        gl_FragColor \x3d alpha * v_color;\r\n      #endif // PATTERN\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/outlineShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  // YF TODO: (doc)\r\n--\x3e\r\n\x3csnippets\x3e\r\n  \x3csnippet name\x3d"outlineVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_offset;\r\n      attribute vec2 a_xnormal;\r\n\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      uniform lowp vec4 u_color;\r\n      varying lowp vec4 v_color;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      uniform highp mat4 u_transformMatrix;\r\n      uniform highp mat4 u_extrudeMatrix;\r\n      uniform highp vec2 u_normalized_origin;\r\n      uniform mediump float u_depth;\r\n      uniform mediump float u_outline_width;\r\n\r\n      varying lowp vec2 v_normal;\r\n\r\n      const float scale \x3d 1.0 / 15.0;\r\n\r\n      void main()\r\n      {\r\n      #ifdef DD\r\n        v_color \x3d a_color * u_color;\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_normal \x3d a_xnormal;\r\n\r\n        // calculate the relative distance from the centerline to the edge of the line. Since offset is given in integers (for the\r\n        // sake of using less attribute memory, we need to scale it back to the original range of ~ 0: 1)\r\n        mediump vec4 dist \x3d vec4(u_outline_width * a_offset * scale, 0.0, 0.0);\r\n\r\n        // Remove the texture normal bit of the position before scaling it with the\r\n        // model/view matrix. Add the extrusion vector *after* the model/view matrix\r\n        // because we\'re extruding the line in pixel space, regardless of the current\r\n        // tile\'s zoom level.\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * dist;\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"outlineFS"\x3e\r\n    \x3c![CDATA[\r\n      varying lowp vec4 v_color;\r\n      varying mediump vec2 v_normal;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      void main()\r\n      {\r\n        // Calculate the distance of the pixel from the line in pixels.\r\n        lowp float dist \x3d abs(v_normal.y);\r\n\r\n        lowp float alpha \x3d smoothstep(1.0, 0.0, dist);\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\x3c/snippets\x3e\r\n',
"url:esri/layers/vectorTiles/views/vectorTiles/renderers/shaders/textShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\r\n\x3c!--\r\n  Add your GLSL snippets to this file. You should start from\r\n  importing your old GLSL files. For instance, if you have a\r\n  file such as myShader.vs.glsl you should create a new \x3csnippet name\x3d"myShaderVS"\x3e\r\n  and then copy and paste the GLSL source as the content. You will then convert your\r\n  code to use the {@link module:esri/views/vectorTiles/renderers/vtShaderSnippets vtShaderSnippets}\r\n  instance to access the GLSL code, instead of importing it directly with require("dojo/text!...").\r\n--\x3e\r\n\x3csnippets\x3e\r\n\r\n  \x3csnippet name\x3d"rgba2float"\x3e\x3c![CDATA[\r\n    // TODO this snippet should only be in views/3d/webgl-engine/materials/internal/Util.xml\r\n\r\n    // Factors to convert rgba back to float\r\n    const vec4 toFloat \x3d vec4(\r\n        255.0 / (256.0),\r\n        255.0 / (256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0),\r\n        255.0 / (256.0 * 256.0 * 256.0 * 256.0)\r\n      );\r\n\r\n    float rgba2float(vec4 rgba) {\r\n      // Convert components from 0-\x3e1 back to 0-\x3e255 and then\r\n      // add the components together with their corresponding\r\n      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)\r\n      return dot(rgba, toFloat);\r\n    }\r\n  ]]\x3e\x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textVS"\x3e\r\n    \x3c![CDATA[\r\n      attribute vec2 a_pos;\r\n      attribute vec2 a_vertexOffset;\r\n      attribute vec4 a_tex;\r\n      attribute vec4 a_levelInfo;\r\n\r\n      uniform lowp vec4 u_color; // always defined as halo does not support data driven but text does\r\n    #ifdef DD\r\n      attribute vec4 a_color;\r\n    #endif // DD\r\n      varying lowp vec4 v_color;\r\n\r\n      uniform mediump float u_size;\r\n    #ifdef DD\r\n      attribute mediump float a_size;\r\n    #endif // DD\r\n      varying mediump float v_size;\r\n\r\n    #ifdef ID\r\n      uniform mediump vec4 u_id;\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n\r\n      // attribute bool a_visible; // --\x3e a one bit controlling the visibility of the vertex\r\n\r\n      // the relative transformation of a vertex given in tile coordinates to a relative normalized coordinate\r\n      // relative to the tile\'s upper left corner\r\n      // the extrusion vector.\r\n      uniform highp mat4 u_transformMatrix;\r\n\r\n      // the extrude matrix which is responsible for the \'anti-zoom\' as well as the rotation\r\n      uniform highp mat4 u_extrudeMatrix;\r\n\r\n      // u_normalized_origin is the tile\'s upper left corner given in normalized coordinates\r\n      uniform highp vec2 u_normalized_origin;\r\n\r\n      // the size of the mosaic given in pixels\r\n      uniform vec2 u_mosaicSize;\r\n\r\n      // the z of the layer. Given by the order of the layers in the style\r\n      uniform mediump float u_depth;\r\n\r\n      // the map\'s rotation from the north\r\n      uniform mediump float u_mapRotation;\r\n      uniform mediump float u_level;\r\n\r\n      // indicate whether the current set of iconst should be kept upright when the map is rotated\r\n      uniform lowp float u_keepUpright;\r\n\r\n      // the rate of the change in the opacity (fade) of the icons\r\n      uniform mediump float u_fadeSpeed;\r\n\r\n      // the low level we transition (to/from)\r\n      uniform mediump float u_minfadeLevel;\r\n\r\n      // the high level we transition (to/from)\r\n      uniform mediump float u_maxfadeLevel;\r\n\r\n      // the amount of fade given teh current time past the last recorded level\r\n      uniform mediump float u_fadeChange;\r\n\r\n      // the opacity of the layer given by the painter\r\n      uniform mediump float u_opacity;\r\n\r\n      // the interpolated texture coordinate value to be used by the fragment shader in order to sample the sprite texture\r\n      varying lowp vec2 v_tex;\r\n\r\n      // the calculated transparency to be applied by the fragment shader. It is incorporating both the fade as well as the\r\n      // opacity of the layer given by the painter\r\n      varying lowp float v_transparency;\r\n\r\n      // the vertex offsets are given in integers, therefore in order to maintain a reasonable precision we multiply the values\r\n      // by 8 and then at the shader divide by the same number\r\n      const float offsetPrecision \x3d 1.0 / 8.0;\r\n\r\n      // outline position and appearance\r\n      const mediump float edgePos \x3d 0.75; // defined by the SDF encoding\r\n      uniform mediump float u_edgeDistance;\r\n      uniform mediump float u_edgeBlur;\r\n      uniform mediump float u_antialiasingWidth; // antialiasing (factors in the pixel_ratio for high res devices)\r\n\r\n      varying mediump float v_edgeDistance; // will factor in the size\r\n      varying mediump float v_edgeWidth; // will factor in the size\r\n\r\n      uniform lowp float u_halo; // needed to avoid using the color attribute for halo\r\n\r\n      void main()\r\n      {\r\n        mediump float a_labelMinLevel \x3d a_levelInfo[0];\r\n        mediump float a_angle        \x3d a_levelInfo[1];\r\n        mediump float a_minLevel    \x3d a_levelInfo[2];\r\n        mediump float a_maxLevel    \x3d a_levelInfo[3];\r\n\r\n        // if the given vertex should not be visible simply clip it by adding it a value that will push it outside the clipping plane\r\n        mediump float delta_z \x3d 0.0;\r\n\r\n        // TODO: force clipping the vertex in case that the vertex isn\'t visible\r\n        //delta_z +\x3d a_visible ? 0.0 : 1.0;\r\n\r\n        // If the label rotates with the map, and if the rotated label is upside down, hide it\r\n        mediump float rotated \x3d mod(a_angle + u_mapRotation, 256.0);\r\n        delta_z +\x3d (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated)); //ie. z +\x3d (flip \x3e 0) \x26\x26 (64 \x3c\x3d rotated) \x26\x26 (rotated \x3c 192)\r\n\r\n        // u_level is the current service level adjusted for the change in font size\r\n        delta_z +\x3d 1.0 - step(a_minLevel, u_level); // Test if (level \x3c minLevel)\r\n        delta_z +\x3d step(a_maxLevel, u_level); // Test if (maxLevel \x3c\x3d level)\r\n\r\n        // calculate the alpha given the change in the fade and the fade-speed\r\n        lowp float alpha \x3d clamp((u_fadeChange - a_labelMinLevel) / u_fadeSpeed, 0.0, 1.0);\r\n\r\n        // if the speed is positive we are zooming in and therefore we need to \'fade-in\'. Else we need to \'fade-out\'\r\n        v_transparency \x3d (u_fadeSpeed \x3e\x3d 0.0 ? alpha : 1.0 - alpha);\r\n\r\n        // now deal with the min/max fade-levels. If we exceeded the level we simply snap to 0 or 1\r\n        if (u_maxfadeLevel \x3c a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 0.0;\r\n        }\r\n        if (u_minfadeLevel \x3e\x3d a_labelMinLevel)\r\n        {\r\n          v_transparency \x3d 1.0;\r\n        }\r\n\r\n        // if label has been faded out, clip it\r\n        delta_z +\x3d step(v_transparency, 0.0);\r\n\r\n        v_tex \x3d a_tex.xy / u_mosaicSize;\r\n\r\n      #ifdef DD\r\n        if (u_halo \x3e 0.5)\r\n        {\r\n          v_color \x3d u_color;\r\n        }\r\n        else\r\n        {\r\n          v_color \x3d a_color * u_color;\r\n          // opacity already factored in a_color\r\n        }\r\n      #else\r\n        v_color \x3d u_color;\r\n      #endif // DD\r\n\r\n      #ifdef DD\r\n        v_size \x3d a_size * u_size;\r\n      #else\r\n        v_size \x3d u_size;\r\n      #endif // DD\r\n\r\n      #ifdef ID\r\n        v_id \x3d u_id / 255.0;\r\n      #endif // ID\r\n\r\n        v_edgeDistance \x3d edgePos - u_edgeDistance / v_size;\r\n        v_edgeWidth \x3d (u_antialiasingWidth + u_edgeBlur) / v_size;\r\n\r\n        gl_Position \x3d vec4(u_normalized_origin, u_depth, 0.0) + u_transformMatrix * vec4(a_pos, 0.0, 1.0) + u_extrudeMatrix * v_size * vec4(offsetPrecision * a_vertexOffset, delta_z, 0.0);\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n  \x3csnippet name\x3d"textFS"\x3e\r\n    \x3c![CDATA[\r\n      uniform lowp sampler2D u_texture;\r\n      uniform mediump float u_edgeDistance;\r\n\r\n      varying lowp vec2 v_tex;\r\n      varying lowp float v_transparency;\r\n      varying lowp vec4 v_color;\r\n      varying mediump float v_edgeWidth;\r\n      varying mediump float v_edgeDistance;\r\n\r\n    #ifdef ID\r\n      varying mediump vec4 v_id;\r\n    #endif // ID\r\n\r\n      // this is taken from http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf\r\n      // and https://www.mapbox.com/blog/text-signed-distance-fields/\r\n      // http://metalbyexample.com/rendering-text-in-metal-with-signed-distance-fields/\r\n\r\n      void main()\r\n      {\r\n        // read the distance from the SDF texture\r\n        lowp float dist \x3d texture2D(u_texture, v_tex).a;\r\n\r\n        // use a smooth-step in order to calculate the geometry of the shape given by the distance field\r\n        mediump float alpha \x3d smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist) * v_transparency;\r\n\r\n        gl_FragColor \x3d alpha * v_color;\r\n\r\n      #ifdef ID\r\n        if (gl_FragColor.a \x3c 1.0 / 255.0) {\r\n          discard;\r\n        }\r\n        gl_FragColor \x3d v_id;\r\n      #endif // ID\r\n      }\r\n    ]]\x3e\r\n  \x3c/snippet\x3e\r\n\r\n\x3c/snippets\x3e\r\n\r\n',
"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"*now":function(D){D(['dojo/i18n!*preload*esri/layers/nls/VectorTileLayerImpl*["ar","bs","ca","cs","da","de","de-ch","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","fr-ch","he","hr","hu","id","it","it-ch","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("esri/layers/VectorTileLayerImpl","dojo/_base/lang dojo/has dojo/dom-construct dojo/dom-style dojo/io-query ../geometry/Extent ../geometry/screenUtils ../geometry/scaleUtils ../SpatialReference ../config ../lang ../domUtils ../urlUtils ../kernel ./layer ./TileInfo ./unitBezier ./vectorTiles/request ./vectorTiles/core/promiseUtils ./vectorTiles/core/urlUtils ./vectorTiles/geometry/support/spatialReferenceUtils ./vectorTiles/layers/support/vectorTileLayerLoader ./vectorTiles/layers/support/TilemapCache ./vectorTiles/views/vectorTiles/style/StyleRepository ./vectorTiles/views/vectorTiles/VectorTileContainer ./vectorTiles/views/vectorTiles/VectorTileDisplayObject ./vectorTiles/views/vectorTiles/TileHandler ./vectorTiles/views/2d/engine/StageGL ./vectorTiles/views/2d/tiling/TileInfoView ./vectorTiles/views/2d/tiling/TileStrategy ./vectorTiles/views/2d/tiling/TileKey ./vectorTiles/views/2d/tiling/TileQueue ./vectorTiles/views/webgl/webgl-utils".split(" "),function(D,
q,a,b,g,f,h,d,c,e,k,l,m,n,p,v,r,y,x,z,u,w,t,A,G,B,E,F,I,M,P,aa,ca){var ea=r.ease;h=p.createSubclass({declaredClass:"esri.layers.VectorTileLayer",_mapsWithAttribution:"OpenStreetMap_v2 OpenStreetMap_Daylight_v2 OpenStreetMap_Export_v2 OpenStreetMap_FTS_v2 OpenStreetMap_GCS_v2 World_Basemap World_Basemap_v2 World_Basemap_Export_v2 World_Basemap_GCS_v2 World_Basemap_WGS84 World_Contours_v2".split(" "),_eventMap:{"style-change":["style"]},constructor:function(R,fa){this._frame=this._frame.bind(this);
this._params=fa||{};fa&&fa.tileServers&&fa.tileServers.length&&(this.tileServers=fa.tileServers=fa.tileServers.map(function(S){return m.getAbsoluteUrl(S)},this));fa&&fa.copyright&&(this.copyright=fa.copyright);this._viewState={scale:0,width:0,height:0,size:[0,0],rotation:0,resolution:1,center:[0,0],worldScreenWidth:0,spatialReference:null,toScreen:function(S,Y){var ia=this.center[1]+this.resolution*this.height*.5;S[0]=(Y[0]-(this.center[0]-this.resolution*this.width*.5))/this.resolution;S[1]=(ia-
Y[1])/this.resolution;return S},toMap:function(S,Y){var ia=this.center[1]+this.resolution*this.height*.5;S[0]=this.center[0]-this.resolution*this.width*.5+Y[0]*this.resolution;S[1]=ia-Y[1]*this.resolution;return S}};this._renderParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this._updateParameters={state:this._viewState,pixelRatio:window.devicePixelRatio,stationary:!0};this.type="vector-tile";fa&&fa.resourceInfo?(this._stopDisplay(),this._applyMetadata(fa.resourceInfo)):
this.setStyle(R);this.registerConnectEvents()},setStyle:function(R){return this.loadStyle(R)},getStyle:function(){return this.currentStyleInfo&&this.currentStyleInfo.style||null},opacity:1,setOpacity:function(R){if(this.opacity!=R)this.onOpacityChange(this.opacity=R)},onOpacityChange:function(){},_pinching:!1,getTileUrl:function(R,fa,S){var Y=this._url&&this._url.query,ia=this.tileServers[fa%this.tileServers.length];ia=ia.replace(/\{z\}/gi,R.toString()).replace(/\{level\}/gi,R.toString()).replace(/\{y\}/gi,
fa.toString()).replace(/\{row\}/gi,fa.toString()).replace(/\{x\}/gi,S.toString()).replace(/\{col\}/gi,S.toString());Y&&(ia+="?"+g.objectToQuery(Y));ia=this.addTimestampToURL(ia);return m.addProxy(ia)},loadStyle:function(R){if(this._loadingPromise&&"string"===typeof R&&this.url===R)return this._loadingPromise;this._stopDisplay();var fa=this._loadingPromise;this._loadingPromise=w.loadMetadata(R).then(function(S){this._applyMetadata(S)}.bind(this)).otherwise(function(S){this._errorHandler(S);throw S;
}.bind(this));fa&&!fa.isFulfilled()&&fa.cancel();return this._loadingPromise},_applyMetadata:function(R){this.url=R.url;this._url=R.parsedUrl;!this._url&&R.styleUrl&&(this._url=z.urlToObject(R.styleUrl));this.currentStyleInfo={glyphsUrl:R.glyphsUrl,serviceUrl:R.serviceUrl,spriteUrl:R.spriteUrl,styleUrl:R.styleUrl,style:R.style,layerDefinition:R.layerDefinition};this.styleRepository=new A(R.style,R);this._read(R.layerDefinition);this.onStyleChange(this.getStyle());this.loaded||(this._findCredential(),
this.loaded=!0,this.onLoad(this));this.suspended||this._tileHandler||this._startDisplay()},refresh:function(){this.suspended||(this._refreshTS=Date.now(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},takeScreenshot:function(R){return this._stageGL?this._stageGL.takeScreenshot(R):x.reject("No valid GL context!")},_setMap:function(R,fa,S){this.inherited(arguments);this._map=R;var Y=this._div=a.create("div",null,fa);b.set(Y,{position:"absolute",width:R.width+"px",height:R.height+
"px",overflow:"visible",opacity:this.opacity});this.attr("data-vectortiles",!0);this._onResizeHandle=R.on("resize",D.hitch(this,this._onResizeHandler));this._onOpacityHandle=this.on("opacity-change",D.hitch(this,this._opacityChangeHandler));this._onScaleVisHandle=this.on("scale-visibility-change",D.hitch(this,function(){}));this._onVisibilityHandle=this.on("visibility-change",D.hitch(this,function(){}));R.acquireWebGLContext(this);this._stageGL=new F;this._stageGL.setElement(this._stageGL.createElement());
this._div.appendChild(this._stageGL.element);this._stageGL.parent={requestChildRender:this._scheduleRender.bind(this)};this._stageGL.attach(this._renderParameters);this._startDisplay();this.evaluateSuspension();if(this.suspended&&!R.loaded)var ia=R.on("load",D.hitch(this,function(){ia.remove();this.evaluateSuspension()}));return Y},_unsetMap:function(R,fa){R.releaseWebGLContext(this);this._map=null;this.suspended||this._stopDisplay();this._stageGL.detach(this._renderParameters);this._stageGL=null;
a.destroy(this._div);this._div=null;this._handles&&this._handles.forEach(function(S){S.remove()});this._handles=null;this._onResizeHandle=this._onResizeHandle&&this._onResizeHandle.remove()&&null;this._onOpacityHandle=this._onOpacityHandle&&this._onOpacityHandle.remove()&&null;this._onScaleVisHandle=this._onScaleVisHandle&&this._onScaleVisHandle.remove()&&null;this._onVisibilityHandle=this._onVisibilityHandle&&this._onVisibilityHandle.remove()&&null;this.inherited(arguments)},_read:function(R){this.version=
R.currentVersion||R.version;this.copyright=this.copyright||R.copyrightText;this.fullExtent=new f(R.fullExtent);this.initialExtent=new f(R.initialExtent);this.spatialReference=this.fullExtent.spatialReference;this.tileInfo=new v(R.tileInfo);this.tileInfo.size=[this.tileInfo.cols,this.tileInfo.height];this.tileInfo.spatialReference.isWrappable=this.tileInfo.spatialReference._isWrappable();this.tileInfo.scales=this.tileInfo.lods.map(function(S){return S.scale});this.tileInfo.scaleToZoom=function(S){for(var Y=
this.scales,ia=Y.length-1,L=0;L<ia;L++){var W=Y[L],ja=Y[L+1];if(W<=S)break;if(ja===S)return L+1;if(W>S&&ja<S)return L+1-(S-ja)/(W-ja)}return L};this._hasMin||this.setMinScale(R.minScale);this._hasMax||this.setMaxScale(R.maxScale);R.tileMap&&(this.tileIndexUrl=z.join(this.currentStyleInfo.serviceUrl,R.tileMap));if(!this._params.tileServers){var fa=R.tiles;this.currentStyleInfo&&this.currentStyleInfo.serviceUrl&&fa.forEach(function(S,Y,ia){z.isAbsolute(S)?ia[Y]=S:ia[Y]=z.join(this.currentStyleInfo.serviceUrl,
S)}.bind(this));this.tileServers=fa}fa=null;this.currentStyleInfo.serviceUrl&&(this.parsedUrl=z.urlToObject(this.currentStyleInfo.serviceUrl),fa=this._getDefaultAttribution(this.parsedUrl.path));fa?(this.attributionDataUrl=fa,this.hasAttributionData=!0):(this.attributionDataUrl=null,this.hasAttributionData=!1);this.capabilities=this._getCapabilities(R);this.tilemapCache=this.capabilities.supportsTileMapIndexing?new t({layer:this}):null},_getCapabilities:function(R){var fa=R.hasOwnProperty("exportTilesAllowed")?
R.exportTilesAllowed:!1;R=R.capabilities?-1!==R.capabilities.toLowerCase().indexOf("tilemap"):!1;return{exportTilesAllowed:fa,supportsTileMapIndexing:R}},_getDefaultAttribution:function(R){var fa=R.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(fa&&(R=fa[3])){fa=fa[2]||"";R=R.toLowerCase();for(var S=0,Y=this._mapsWithAttribution.length;S<Y;S++){var ia=this._mapsWithAttribution[S];if(-1<ia.toLowerCase().indexOf(R))return R=
window.location.protocol,("http:"===R||"https:"===R?R:"https:")+"//static.arcgis.com/attribution/Vector"+fa+"/"+ia}}},_startDisplay:function(){var R={capabilities:{operations:{supportsTileMap:this.capabilities.supportsTileMapIndexing}},styleRepository:this.styleRepository,tileIndexUrl:this.tileIndexUrl,tileInfo:this.tileInfo,tilemapCache:this.tilemapCache,fullExtent:{width:this.fullExtent.getWidth()},getTileUrl:this.getTileUrl.bind(this)};this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio;this._vectorTileContainer=new G;this._stageGL.addChild(this._vectorTileContainer);this._viewState.spatialReference=this.tileInfo.spatialReference;this._tileInfoView=new I(this.tileInfo,this.fullExtent);this._tileRequests=new Map;this._tileHandler=new E(R,this._scheduleUpdate.bind(this),window.devicePixelRatio||1,!1,this._tileInfoView);this._viewState.spatialReference=this.spatialReference;this._allTilesAreHandled=!1;this._tileHandlerPromise=this._tileHandler.start().then(function(){this._fetchQueue=
new aa({tileInfoView:this._tileInfoView,process:this._getTileData.bind(this)});this._tileStrategy=new M({cachePolicy:"keep",coveragePolicy:"smallest",acquireTile:this._acquireTile.bind(this),releaseTile:this._releaseTile.bind(this),tileInfoView:this._tileInfoView});this._vectorTileContainer.initialize(this._tileHandler.spriteMosaic,this._tileHandler.glyphMosaic,this.tileInfo,this._tileInfoView);this._scheduleUpdate()}.bind(this))},_stopDisplay:function(){this._tileHandlerPromise&&!this._tileHandlerPromise.isFulfilled()&&
this._tileHandlerPromise.cancel();this._tileStrategy&&(this._frameRequested=this._updateRequested=this._renderRequested=!1,this._animation&&(this._animation.stop(),this._animation=null),this._tileRequests.forEach(function(R){R.cancel("cancel")}),this._tileHandler.stop(),this._tileHandler.destroy(),this._tileStrategy.destroy(),this._tileInfoView=this._tileHandler=this._tileStrategy=null,this._vectorTileContainer.removeAllChildren(),this._stageGL.removeChild(this._vectorTileContainer),this._vectorTileContainer=
null)},_scheduleRender:function(){this._renderRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleUpdate:function(){this._updateRequested=!0;this._map&&this._tileStrategy&&this._scheduleFrame()},_scheduleFrame:function(){this._map&&!this._frameRequested&&(this._frameRequested=!0,X(this._frame))},_frame:function(){if(this._frameRequested){this._frameRequested=!1;this._renderParameters.pixelRatio!==window.devicePixelRatio&&(this._renderParameters.pixelRatio=this._updateParameters.pixelRatio=
window.devicePixelRatio,this._stopDisplay(),this._startDisplay());this._animation&&(this._animation.step(),this._animation.running||(this._animation=null));this._updateParameters.stationary=this._renderParameters.stationary=!this._animation&&!this._pinching&&!this._panning;this._viewState.resolution=this._viewState.scale/(39.37*d.getUnitValueForSR(this.spatialReference)*96);var R=0;this._viewState.spatialReference&&this._viewState.spatialReference._isWrappable()&&(R=u.getInfo(this._viewState.spatialReference),
R=R.valid[1]-R.valid[0]);this._viewState.worldScreenWidth=Math.round(R/this._viewState.resolution);this._renderRequested&&(this._renderRequested=!1,this._stageGL.doRender(this._renderParameters));this._updateRequested&&(this._updateRequested=!1,this._fetchQueue.pause(),this._fetchQueue.state=this._updateParameters.state,this._allTilesAreHandled=this._tileStrategy.update(this._updateParameters),this._fetchQueue.resume());this._animation&&(this._scheduleRender(),this._scheduleUpdate());this._checkUpdating()}},
_setViewState:function(R){R=D.mixin(this._viewState,R);R.center.type&&(R.center=[R.center.x,R.center.y]);this._scheduleRender();this._scheduleUpdate()},_animateViewState:function(R,fa){var S=fa.immediate||0===e.defaults.map.zoomDuration;this._animation=null;if(S)this._setViewState(R);else{S=this._viewState;var Y=e.defaults.map.zoomDuration,ia=T()+16,L=S.center[0],W=S.center[1],ja=S.scale,ra=Array.isArray(R.center)?R.center[0]:R.center.x,qa=Array.isArray(R.center)?R.center[1]:R.center.y,wa=R.scale||
S.scale,sa=this;this._animation={running:!0,stop:function(){this.running=!1},step:function(){if(this.running){var V=(T()+16-ia)/Y;1<=V&&(V=1,this.running=!1);V=ea(V);sa._setViewState({center:[L+(ra-L)*V,W+(qa-W)*V],scale:ja+(wa-ja)*V})}}};this._scheduleRender();this._scheduleUpdate()}},_checkUpdating:function(){var R=!0;this._tileRequests.forEach(function(fa){R|=fa.isFulfilled()});R&&this._tileStrategy&&(R=this._allTilesAreHandled);R?this._fireUpdateEnd():this._fireUpdateStart()},_acquireTile:function(R){var fa=
P.pool.acquire();fa.set(R.level,R.row,R.col,R.world);R=this._tileHandler.getStyleRepository();var S=B.pool.acquire(fa,fa,this.tileInfo,R,this._tileHandler.glyphMosaic,0);this._tileHandlerPromise.then(function(){var Y=this._tileHandler.getRefKey(fa).then(function(ia){S.refKey=ia;return this._fetchQueue.push(fa).then(function(L){S.setData(L.tileData,L.workerId,L.connection);S.once("attach",this._scheduleUpdate.bind(this));this._vectorTileContainer.addChild(S)}.bind(this))}.bind(this));this._tileRequests.set(fa.id,
Y)}.bind(this));return S},_releaseTile:function(R){var fa=R.key.id,S=this._tileRequests.get(fa);S.isFulfilled()||S.cancel();this._tileRequests["delete"](fa);this._vectorTileContainer.removeChild(R);this._scheduleUpdate();R.once("detach",function(){B.pool.release(R)})},_getTileData:function(R){return this._tileHandler.getTileData(R,0)},onStyleChange:function(R){},_opacityChangeHandler:function(R){this._div&&(this._div.style.opacity=R.opacity)},_onResizeHandler:function(R){var fa=this._div&&this._div.style;
fa&&(fa.width=R.width+"px",fa.height=R.height+"px",this._setViewState({center:R.extent.getCenter(),width:R.width,height:R.height,size:[R.width,R.height]}))},onResume:function(){var R=this._map;this.inherited(arguments);l.show(this._div);this._setViewState({center:R.extent.getCenter(),scale:R.getScale(),width:R.width,height:R.height,size:[R.width,R.height],spatialReference:R.spatialReference});this._handles=[R.on("pan-end",D.hitch(this,this._onPanEndHandler)),R.on("pan",D.hitch(this,this._onPanExtentChangeHandler)),
R.on("extent-change",D.hitch(this,this._onExtentChangeHandler)),R.on("scale",D.hitch(this,this._onScaleHandler))]},onSuspend:function(){this.inherited(arguments);l.hide(this._div);this._handles.forEach(function(R){R.remove()});this._handles=null},_onPanEndHandler:function(R){this._panning=!1;this._setViewState({center:R.extent.getCenter(),scale:this._map.getScale()})},_onPanExtentChangeHandler:function(R){this._panning=!0;this._animation&&(this._animation.stop(),this._animation=null);this._setViewState({center:R.extent.getCenter(),
scale:this._map.getScale()})},_onExtentChangeHandler:function(R){var fa=this._pinching||R.immediate;this._animateViewState({center:R.extent.getCenter(),scale:R.lod.scale},{immediate:fa});this._pinching=!1},_onScaleHandler:function(R){this._animation&&(this._animation.stop(),this._animation=null);var fa=this._map;if(fa._zoomAnimDiv.extent)this._pinching=this._panning=!1,this._animateViewState({center:fa._zoomAnimDiv.extent.getCenter(),scale:fa._zoomAnimDiv.newLod.scale},{immediate:R.immediate});else{var S=
fa.navigationManager,Y=S._dragOrigin;R=fa.extent.getCenter();var ia=Y.x-.5*fa.width;Y=Y.y-.5*fa.height;var L=fa.extent.getWidth()/fa.width;if(S._pinchScale){this._pinching=!0;S=S._pinchScale;var W=L/S;R.x-=ia*(W-L);R.y+=Y*(W-L);fa=fa.__LOD.scale/S;this._setViewState({center:R,scale:fa})}else S._zoomEndExtent&&(this._pinching=!1,S=fa.getScale()/fa.navigationManager._zoomEndLod.scale,W=L/S,R.x-=ia*(W-L),R.y+=Y*(W-L),fa=fa.navigationManager._zoomEndLod.scale,this._animateViewState({center:R,scale:fa},
{immediate:!1}))}}});h.ACCESS_TOKEN=null;h.supported=function(){return ca.detectWebGL()[0]};var T=function(){var R=window.performance||{},fa=R.now||R.webkitNow||R.msNow||R.oNow||R.mozNow;if(void 0!==fa)return function(){return fa.call(R)};var S=window.performance&&window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:(new Date).getTime();return function(){return(new Date).getTime()-S}}();c=q("ff");k=q("ie");n=q("webkit");q=q("opera");var la=
(new Date).getTime(),X=window.requestAnimationFrame;X||(X=window[(n&&"webkit"||c&&"moz"||q&&"o"||k&&"ms")+"RequestAnimationFrame"])||(X=function(R){var fa=T(),S=Math.max(0,16-(fa-la)),Y=window.setTimeout(function(){R(T())},S);la=fa+S;return Y});return h});